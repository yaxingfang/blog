{"meta":{"version":1,"warehouse":"4.0.2"},"models":{"Asset":[{"_id":"source/imgs/alipay.jpg","path":"imgs/alipay.jpg","modified":1,"renderable":0},{"_id":"source/imgs/wechat.jpg","path":"imgs/wechat.jpg","modified":1,"renderable":0},{"_id":"themes/icarus/source/css/cyberpunk.styl","path":"css/cyberpunk.styl","modified":1,"renderable":1},{"_id":"themes/icarus/source/css/default.styl","path":"css/default.styl","modified":1,"renderable":1},{"_id":"themes/icarus/source/css/style.styl","path":"css/style.styl","modified":1,"renderable":1},{"_id":"themes/icarus/source/img/alipay.jpg","path":"img/alipay.jpg","modified":1,"renderable":1},{"_id":"themes/icarus/source/img/avatar.png","path":"img/avatar.png","modified":1,"renderable":1},{"_id":"themes/icarus/source/img/favicon.svg","path":"img/favicon.svg","modified":1,"renderable":1},{"_id":"themes/icarus/source/img/logo.svg","path":"img/logo.svg","modified":1,"renderable":1},{"_id":"themes/icarus/source/img/og_image.png","path":"img/og_image.png","modified":1,"renderable":1},{"_id":"themes/icarus/source/img/razor-bottom-black.svg","path":"img/razor-bottom-black.svg","modified":1,"renderable":1},{"_id":"themes/icarus/source/img/razor-top-black.svg","path":"img/razor-top-black.svg","modified":1,"renderable":1},{"_id":"themes/icarus/source/img/wechat.jpg","path":"img/wechat.jpg","modified":1,"renderable":1},{"_id":"themes/icarus/source/js/animation.js","path":"js/animation.js","modified":1,"renderable":1},{"_id":"themes/icarus/source/js/back_to_top.js","path":"js/back_to_top.js","modified":1,"renderable":1},{"_id":"themes/icarus/source/js/column.js","path":"js/column.js","modified":1,"renderable":1},{"_id":"themes/icarus/source/js/main.js","path":"js/main.js","modified":1,"renderable":1}],"Cache":[{"_id":"source/.DS_Store","hash":"65f144aaafaa028db795d82d98f5ec098e9113a1","modified":1673961684803},{"_id":"source/about/.DS_Store","hash":"34fe290bc8d934cf4c51deea76c7ec16f3cf4d2f","modified":1673929875866},{"_id":"source/about/index.md","hash":"35fd2deabb9fb305739d73ad4628a2be3403304a","modified":1673946754499},{"_id":"source/categories/index.md","hash":"34befbcc0cb1361fe6ab629e0efcb19c0ee86647","modified":1673929754157},{"_id":"source/categories/.DS_Store","hash":"34fe290bc8d934cf4c51deea76c7ec16f3cf4d2f","modified":1671761650651},{"_id":"source/_posts/12å¼ å›¾å›å¿†æˆ‘çš„2022.md","hash":"2fa277b175c35bd4f4adfab1cef458731ebf9d6a","modified":1673919281080},{"_id":"source/_posts/.DS_Store","hash":"c9de02b28f9c45b6545d14f99988ecc16682a5b8","modified":1674426324937},{"_id":"source/_posts/Javaå…«è‚¡æ–‡ - JavaåŸºç¡€.md","hash":"7277fe8148e862b835a2ad15af65f9df11a34b2d","modified":1674463579750},{"_id":"source/_posts/Javaå…«è‚¡æ–‡ - Javaå¼‚å¸¸.md","hash":"a5ed1a7995cbbc7a79c83a72f7b28b81a3bde17b","modified":1674463588846},{"_id":"source/_posts/Javaå…«è‚¡æ–‡ - Javaé›†åˆ.md","hash":"fcef603cf39c920cffd7b75e99ff19da36182458","modified":1674463608897},{"_id":"source/_posts/2022å®ä¹ æ€»ç»“.md","hash":"a7dfc6e236d32a00ac9ad1780b233c010ffc6ec8","modified":1673919096271},{"_id":"source/_posts/Javaå…«è‚¡æ–‡ - MyBatis.md","hash":"16333af5accc98f33efaf9e65760cba4cae7b8b4","modified":1674463632143},{"_id":"source/_posts/2022ç§‹æ‹›æ€»ç»“.md","hash":"fb66d0c72c1e3051feda71c3acdc141c628eefca","modified":1673919154053},{"_id":"source/_posts/Javaå…«è‚¡æ–‡ - Spring.md","hash":"04b1ce216eaee399a16daf7d90384c741a992fea","modified":1674463635868},{"_id":"source/_posts/Javaå…«è‚¡æ–‡ - SpringMVC.md","hash":"f911d9cef568a5682d27eb42db4bff7f4b3d8989","modified":1674463642666},{"_id":"source/_posts/å­—èŠ‚æš‘æœŸå®ä¹ åŒç»„å®ä¹ ç”Ÿç§‹æ‹›æƒ…å†µåˆ†äº«.md","hash":"48232ce118c80b150e88f47341a1e0d3da65bd9a","modified":1673919235150},{"_id":"source/_posts/Typoraé…ç½®é˜¿é‡Œäº‘OSSå›¾åºŠ.md","hash":"925a467c76b79bfb3d658a7c8ce79a0548d1d108","modified":1673921367111},{"_id":"source/_posts/å›è€å®¶çš„ä¸€å‘¨.md","hash":"479d7dfd0f78087f92e4bb96e1cdf4f849ecbe55","modified":1673919260538},{"_id":"source/_posts/æ–°ä¹°çš„å°ä¹¦æ¡Œ.md","hash":"ce557f4dc51c0d7c1c7188b4bec4697f8f7a8402","modified":1673919384834},{"_id":"source/_posts/å¼€äº†ä¸ªBç«™å¤§ä¼šå‘˜.md","hash":"4e0f99778887d0f244479017e8d892757ad6e036","modified":1673919249679},{"_id":"source/_posts/æ‰‹æŠŠæ‰‹å¸¦ä½ æ­å»ºä¸ªäººåšå®¢.md","hash":"84652e02091ae84983566fac5df4f4a17bdac8c0","modified":1673957565141},{"_id":"source/_posts/æ–°å¹´å¿«ä¹ï¼.md","hash":"a1d29f9cabd7a9f2d2a87c29c455c56726ff2487","modified":1674463160578},{"_id":"source/_posts/æ±Ÿè‹çœè€ƒè€ƒå®Œå•¦.md","hash":"8d9e78d8a31b9d77d0e392278914c72784b05468","modified":1673919255047},{"_id":"source/tags/index.md","hash":"95d08ed3da8f867aaab215ddace25b88fbf1a14f","modified":1673931830273},{"_id":"source/_posts/æœ€è¿‘å…³äºæ ¡æ‹›ã€äº’è”ç½‘çš„ä¸€äº›ä¿¡æ¯.md","hash":"4983eeafd9e929c0b0776972d17e035fa20f907f","modified":1673919286943},{"_id":"source/imgs/wechat.jpg","hash":"28ad8a9883ec29a49d52aeb9d8792493f56e760a","modified":1671703105000},{"_id":"source/_posts/Javaå…«è‚¡æ–‡ - Javaå¹¶å‘.md","hash":"391cf571efa361ff709b4d3b90d9dd16f55d0747","modified":1674463629147},{"_id":"source/imgs/alipay.jpg","hash":"581c5ac9226be5f2e061f385780f39bc52850b47","modified":1671703075000},{"_id":"themes/icarus/layout/comment/.gitkeep","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1673879406353},{"_id":"themes/icarus/layout/donate/.gitkeep","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1673879406360},{"_id":"themes/icarus/layout/misc/.gitkeep","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1673879406364},{"_id":"themes/icarus/layout/share/.gitkeep","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1673879406372},{"_id":"themes/icarus/layout/search/.gitkeep","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1673879406368},{"_id":"themes/icarus/include/schema/comment/.gitkeep","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1673879406219},{"_id":"themes/icarus/include/schema/misc/.gitkeep","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1673879406321},{"_id":"themes/icarus/include/schema/donate/.gitkeep","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1673879406290},{"_id":"themes/icarus/include/schema/search/.gitkeep","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1673879406335},{"_id":"themes/icarus/include/schema/share/.gitkeep","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1673879406346},{"_id":"themes/icarus/CONTRIBUTING.md","hash":"70254c6778c1e41bb2ff222bbf3a70b2239b9bc1","modified":1673879406442},{"_id":"themes/icarus/package.json","hash":"9d42eb99acdaf56afbda664adea40d8d80cdb0b0","modified":1673879406412},{"_id":"themes/icarus/include/config.js","hash":"1ff0f174e9670074ad2bee890d5b6da486800c9a","modified":1673879406385},{"_id":"themes/icarus/README.md","hash":"32f9f4fc8cd7ec60b30544bd2e558b593519ae5d","modified":1673879406442},{"_id":"themes/icarus/LICENSE","hash":"86037e5335a49321fa73b7815cab542057fac944","modified":1673879406375},{"_id":"themes/icarus/include/dependency.js","hash":"0ca35dec92ccf383f45db905db1a5a0e92d7209e","modified":1673879406388},{"_id":"themes/icarus/.DS_Store","hash":"5b559435f1621224e3831be57a6c74f226edc1f8","modified":1674354255289},{"_id":"themes/icarus/include/register.js","hash":"ec6596b63bfb4349ba61792d905abe8e06fea625","modified":1673879406395},{"_id":"themes/icarus/include/.DS_Store","hash":"201de63d0ec04970108d6af3d91e0bdae872026a","modified":1674354226964},{"_id":"themes/icarus/languages/es.yml","hash":"38579b8fad4b6997362acc770615bcd85ff20f68","modified":1673879406471},{"_id":"themes/icarus/languages/en.yml","hash":"3d674204d9f723c829226da745afddd180c1131d","modified":1673879406471},{"_id":"themes/icarus/languages/de.yml","hash":"78421f09961ca0b24756a0688fb2cb2e2696e25f","modified":1673879406470},{"_id":"themes/icarus/languages/fr.yml","hash":"06d5c819d6108a42b28cff7b52e5410d0bed55d1","modified":1673879406472},{"_id":"themes/icarus/languages/id.yml","hash":"5e48b1d62378cadeb64b88349477726a5c1bae47","modified":1673879406473},{"_id":"themes/icarus/languages/ja.yml","hash":"801d9930fef48d6a3f80470d5bed4f3eb78147e6","modified":1673879406474},{"_id":"themes/icarus/languages/ko.yml","hash":"e3374265377809c1518114cf352b595840c0b416","modified":1673879406474},{"_id":"themes/icarus/languages/pl.yml","hash":"2e7debb44cd91096f30efc87bf8d6b1d0d0214c9","modified":1673879406474},{"_id":"themes/icarus/languages/pt-BR.yml","hash":"ee8f73350e4c6e2f63b7fc72b34472a6b1e21244","modified":1673879406475},{"_id":"themes/icarus/languages/ru.yml","hash":"9d91358c2acbe7a0f2a25daf7f65b999ff32d068","modified":1673879406476},{"_id":"themes/icarus/languages/vn.yml","hash":"5f2fffa642110c81d8f529949711c9d19ad6bbbe","modified":1673879406478},{"_id":"themes/icarus/languages/tk.yml","hash":"ca583168bd2025124a1cd0e977da475d7a7496fd","modified":1673879406477},{"_id":"themes/icarus/languages/tr.yml","hash":"dd0a7bfe14848d6e1aa229198fe1db03e08e305e","modified":1673879406477},{"_id":"themes/icarus/languages/zh-CN.yml","hash":"02475ba14afc70dfeaf5678467cee307835e4efa","modified":1673879406479},{"_id":"themes/icarus/languages/zh-TW.yml","hash":"a6826e0c8cdb9ad286324b682b466a9e2ad78e6f","modified":1673879406479},{"_id":"themes/icarus/layout/archive.jsx","hash":"99bf235042d0c57af15d2f108ba5eda77443fea8","modified":1673879406424},{"_id":"themes/icarus/layout/categories.jsx","hash":"b8ad43e28a4990d222bfbb95b032f88555492347","modified":1673879406427},{"_id":"themes/icarus/layout/.DS_Store","hash":"282592d5239b152794d0c05ad8384bd7de1b9dec","modified":1674355043735},{"_id":"themes/icarus/layout/category.jsx","hash":"fd15e4eac32de9ac8687aeb3dbe179ab61375700","modified":1673879406427},{"_id":"themes/icarus/layout/index.jsx","hash":"0a84a2348394fa9fc5080dd396bd28d357594f47","modified":1673879406432},{"_id":"themes/icarus/layout/layout.jsx","hash":"a7ba430119c32bcb39a85ec0f8fa2c199b38e4c4","modified":1673962797554},{"_id":"themes/icarus/layout/page.jsx","hash":"d26c2db57e5a88d6483a03aeb51cda9d191d8cea","modified":1673879406433},{"_id":"themes/icarus/layout/tags.jsx","hash":"2c42cb64778235dd220c563a27a92108ddc50cc4","modified":1673879406440},{"_id":"themes/icarus/layout/post.jsx","hash":"d26c2db57e5a88d6483a03aeb51cda9d191d8cea","modified":1673879406435},{"_id":"themes/icarus/layout/tag.jsx","hash":"d2f18cac32ca2725d34ccff3f2051c623be6c892","modified":1673879406440},{"_id":"themes/icarus/include/migration/head.js","hash":"7189efe33d18927d3790e8afb06642fb293b8603","modified":1673879406390},{"_id":"themes/icarus/scripts/index.js","hash":"0c666db6fcb4ffc4d300f4e108c00ee42b1cbbe6","modified":1673879406391},{"_id":"themes/icarus/include/migration/v5_v5.1.js","hash":"073f22bd16e34b56f016633b1676dab2e7d8843d","modified":1673879406398},{"_id":"themes/icarus/include/migration/v2_v3.js","hash":"3ccb2d2ce11018bebd7172da66faecc3983bff00","modified":1673879406396},{"_id":"themes/icarus/include/migration/v3_v4.js","hash":"9faf2184d7fe87debfbe007f3fc9079dcbcafcfe","modified":1673879406396},{"_id":"themes/icarus/include/migration/v4_v5.js","hash":"6342310892d113763b5544789b45d44c0ccf2854","modified":1673879406397},{"_id":"themes/icarus/include/style/article.styl","hash":"105c983871b6c9148d97a0f756886e56411572bd","modified":1673879406448},{"_id":"themes/icarus/include/schema/config.json","hash":"b949c52d02d5ee520ae4666a016ce91faf6fb350","modified":1673879406409},{"_id":"themes/icarus/include/style/base.styl","hash":"2bca6ad099949d52236c87db8db1002ffb99774c","modified":1673879406448},{"_id":"themes/icarus/include/style/button.styl","hash":"0fb35b4786be1b387c751fa2849bc71523fcedd4","modified":1673879406449},{"_id":"themes/icarus/source/.DS_Store","hash":"fa38fb826dec66318c0a571326ecc579c1e0e4d1","modified":1673962237963},{"_id":"themes/icarus/include/style/card.styl","hash":"f78674422eb408cd17c17bbdc3ee1ebe4a453e05","modified":1673879406449},{"_id":"themes/icarus/include/style/codeblock.styl","hash":"ec54dc24eb4d9802d8fefc44c210558bc1641109","modified":1673879406450},{"_id":"themes/icarus/include/style/helper.styl","hash":"9f3393e6122cc9f351091bfab960674e962da343","modified":1673879406454},{"_id":"themes/icarus/include/style/navbar.styl","hash":"34f09b144cb46a25ec2cc7260a6c207dd34ff1fe","modified":1673879406455},{"_id":"themes/icarus/include/style/footer.styl","hash":"a4ad715dee38b249538ac6cce94efc9b355a904b","modified":1673919825476},{"_id":"themes/icarus/include/style/donate.styl","hash":"8d0af00628c13134b5f30a558608e7bebf18c2ec","modified":1673879406453},{"_id":"themes/icarus/include/style/pagination.styl","hash":"b81bcd7ff915b4e9299533addc01bc4575ec35e3","modified":1673879406456},{"_id":"themes/icarus/include/style/plugin.styl","hash":"084843d5a522029e0f84a4fe791fbcb2cabd4c36","modified":1673879406456},{"_id":"themes/icarus/include/style/responsive.styl","hash":"207083fe287612cddee6608b541861b14ac8de81","modified":1673879406457},{"_id":"themes/icarus/include/style/timeline.styl","hash":"ea61798a09bffdda07efb93c2ff800b63bddc4c4","modified":1673879406466},{"_id":"themes/icarus/include/style/search.styl","hash":"416737e1da4e7e907bd03609b0fee9e2aacfe56c","modified":1673879406457},{"_id":"themes/icarus/include/util/console.js","hash":"59cf9d277d3ac85a496689bd811b1c316001641d","modified":1673879406387},{"_id":"themes/icarus/include/style/widget.styl","hash":"c746902251136544eb3fe523235b3183f4189460","modified":1673879406467},{"_id":"themes/icarus/layout/common/article.jsx","hash":"efe38d9c10d6421f142407651b6230e257a57451","modified":1674357530930},{"_id":"themes/icarus/layout/common/comment.jsx","hash":"427089c33002707b76e2f38709459a6824fd0f9b","modified":1673879406428},{"_id":"themes/icarus/layout/common/footer.jsx","hash":"baa8e40e036a3ec0114d96893b708435104b4ba9","modified":1673963514188},{"_id":"themes/icarus/layout/common/donates.jsx","hash":"889fb0a7ccc502f0a43b4a18eb330e351e50493c","modified":1673879406430},{"_id":"themes/icarus/layout/common/plugins.jsx","hash":"f6826c1a5f5f59f4a0aa00c63bdb0ad4ff4eab69","modified":1673879406435},{"_id":"themes/icarus/layout/common/navbar.jsx","hash":"d96e501e52861056474659f96ee0206588d8c93a","modified":1673879406433},{"_id":"themes/icarus/layout/common/head.jsx","hash":"2ec1f511f32e3a9c86d49f1338f57ae5ece18898","modified":1673879406431},{"_id":"themes/icarus/layout/common/scripts.jsx","hash":"4816c9099a881b5f7b13af3e42caae36edbffccd","modified":1673879406438},{"_id":"themes/icarus/layout/common/search.jsx","hash":"6f244a37293031670a2964fe424ecd062e591d7b","modified":1673879406439},{"_id":"themes/icarus/layout/common/widgets.jsx","hash":"45f869e8cab0eb00827164a927156a30e1d29bb7","modified":1673962836208},{"_id":"themes/icarus/layout/common/share.jsx","hash":"c9fb0319ad5e5a10ad3636b26a6c2afed14c590f","modified":1673879406440},{"_id":"themes/icarus/layout/plugin/animejs.jsx","hash":"e2aa27c3501a58ef1e91e511557b77395c2c02aa","modified":1673879406422},{"_id":"themes/icarus/layout/plugin/back_to_top.jsx","hash":"7fc0c5aaabd7d0eaff04cb68ec139442dc3414e8","modified":1673879406426},{"_id":"themes/icarus/include/schema/.DS_Store","hash":"0c99a902830c52fa5cf73bb54a4028ce3da36077","modified":1674354250279},{"_id":"themes/icarus/layout/widget/profile.jsx","hash":"0d3a7fd922c12cc45d2c8d26a8f4d3a9a6ed0ae0","modified":1673879406437},{"_id":"themes/icarus/source/css/style.styl","hash":"5b9815586e993a6ccbe8cdcfc0c65ea38fc315ac","modified":1673879406465},{"_id":"themes/icarus/source/css/default.styl","hash":"b01da3028e5a1267a40aaae5c86a11187a2259e3","modified":1673879406452},{"_id":"themes/icarus/source/img/favicon.svg","hash":"16fd847265845063a16596761cddb32926073dd2","modified":1673879406467},{"_id":"themes/icarus/source/css/cyberpunk.styl","hash":"ae17d3528df0c3f089df14a06b7bd82f1bc5fed9","modified":1673879406452},{"_id":"themes/icarus/source/img/avatar.png","hash":"0d8236dcca871735500e9d06bbdbe0853ed6775b","modified":1673879406444},{"_id":"themes/icarus/source/img/logo.svg","hash":"e9b5c1438ddb576693a15d0713b2a1d9ceda4be9","modified":1673879406468},{"_id":"themes/icarus/source/img/og_image.png","hash":"b03f163096ca9c350ec962feee9836277b5c2509","modified":1673879406447},{"_id":"themes/icarus/source/js/animation.js","hash":"0a8e361c353daa3194f4de3d646b96025d128e1a","modified":1673879406378},{"_id":"themes/icarus/source/img/razor-bottom-black.svg","hash":"a3eda07b1c605b456da9cdf335a1075db5e5d72c","modified":1673879406469},{"_id":"themes/icarus/source/js/back_to_top.js","hash":"d91f10c08c726135a13dfa1f422c49d8764ef03f","modified":1673879406379},{"_id":"themes/icarus/source/img/razor-top-black.svg","hash":"201f1171a43ce667a39091fe47c0f278857f18f0","modified":1673879406469},{"_id":"themes/icarus/source/js/column.js","hash":"0baee024ab67474c073a4c41b495f3e7f0df4505","modified":1673879406380},{"_id":"themes/icarus/include/schema/common/article.json","hash":"e2502c39045c6a26ccd8e880858f93e78c7bda35","modified":1673879406405},{"_id":"themes/icarus/source/js/main.js","hash":"ef8a0e5c80dc9cb02423fe18b142e17f99f8e9cb","modified":1674356784330},{"_id":"themes/icarus/include/schema/common/comment.json","hash":"f49270b619f5d2c3decde6b0b5a0c3bbab4b54a5","modified":1673879406407},{"_id":"themes/icarus/include/schema/common/donates.json","hash":"ae86e6f177bedf4afbe638502c12635027539305","modified":1673879406409},{"_id":"themes/icarus/include/schema/common/footer.json","hash":"09d706cbb94d6da9a0d15c719ce7139325cae1c7","modified":1673879406410},{"_id":"themes/icarus/include/schema/common/head.json","hash":"98889f059c635e6bdbd51effd04cf1cf44968a66","modified":1673879406411},{"_id":"themes/icarus/include/schema/common/navbar.json","hash":"6691e587284c4cf450e0288680d5ff0f3565f090","modified":1673879406411},{"_id":"themes/icarus/include/schema/common/plugins.json","hash":"6036a805749816416850d944f7d64aaae62e5e75","modified":1673879406414},{"_id":"themes/icarus/include/schema/common/providers.json","hash":"97ec953d497fb53594227ae98acaef8a8baa91da","modified":1673879406417},{"_id":"themes/icarus/include/schema/common/search.json","hash":"985fbcbf47054af714ead1a124869d54f2a8b607","modified":1673879406417},{"_id":"themes/icarus/include/schema/common/share.json","hash":"cf4f9ff4fb27c3541b35f57db355c228fa6873e4","modified":1673879406418},{"_id":"themes/icarus/include/schema/common/sidebar.json","hash":"eb241beaec4c73e3085dfb3139ce72e827e20549","modified":1673879406419},{"_id":"themes/icarus/include/schema/common/widgets.json","hash":"cadd9dc942740ecd5037d3943e72f8b6a8399bbe","modified":1673879406419},{"_id":"themes/icarus/include/schema/plugin/animejs.json","hash":"e62ab6e20bd8862efa1ed32e7c0db0f8acbcfdec","modified":1673879406401},{"_id":"themes/icarus/include/schema/plugin/back_to_top.json","hash":"dc0febab7e7b67075d0ad3f80f5ec8b798b68dea","modified":1673879406407},{"_id":"themes/icarus/include/schema/widget/profile.json","hash":"690ee1b0791cab47ea03cf42b5b4932ed2aa5675","modified":1673879406416},{"_id":"themes/icarus/source/img/alipay.jpg","hash":"581c5ac9226be5f2e061f385780f39bc52850b47","modified":1673963549028},{"_id":"themes/icarus/source/img/wechat.jpg","hash":"28ad8a9883ec29a49d52aeb9d8792493f56e760a","modified":1673963549027},{"_id":"public/baidusitemap.xml","hash":"f9f4b53609f914465aeb6124c49f15d4910a8333","modified":1674463674151},{"_id":"public/atom.xml","hash":"04054cbfbee2a190ef5facad940f218434e45235","modified":1674463674151},{"_id":"public/search.xml","hash":"c8720ac25c217615ee1a7066665bdfd5b1fc6e01","modified":1674463674151},{"_id":"public/sitemap.xml","hash":"e646edc4caac355ef93c877f5fc4399a11e6874c","modified":1674463674151},{"_id":"public/sitemap.txt","hash":"2bad3305af03c2a3bb08f8c66324c139cb5745cb","modified":1674463674151},{"_id":"public/js/algolia.js","hash":"a8df0c0abeeb4ee1d2d720161f3aea7339380704","modified":1674463674151},{"_id":"public/js/google_cse.js","hash":"1a9881669dfdeb2b3214074eee0d3e01e52db2c4","modified":1674463674151},{"_id":"public/js/toc.js","hash":"da6fb757a1b083b8ed138bf29aad3a7bf8ec4f11","modified":1674463674151},{"_id":"public/js/insight.js","hash":"86bbdb7305d9bf19ad62d2ca2cf169fc8d9f9d31","modified":1674463674151},{"_id":"public/content.json","hash":"7599f1cd53128cfadd353dff8a20263fc1d28c6a","modified":1674463674151},{"_id":"public/manifest.json","hash":"4a4efab11b9e9d2f34509cad49a130e06418fb6f","modified":1674463674151},{"_id":"public/about/index.html","hash":"4eca95c33e3a566fd4f1ad0e26a9147d5f4669ba","modified":1674463674151},{"_id":"public/categories/index.html","hash":"60dfe06f1a0a1f25025dbecadfa793dc2413ede3","modified":1674463674151},{"_id":"public/tags/index.html","hash":"9357d5b64144cc805b435bd6bed3f2e17b2bf342","modified":1674463674151},{"_id":"public/2023-happy-spring-festival.html","hash":"ceef991b278c8033e25cf34e5090e9ce26ea3874","modified":1674463674151},{"_id":"public/archives/index.html","hash":"43c5abdc1e1e398c416f49eb868858eac4ec3c24","modified":1674463674151},{"_id":"public/archives/page/2/index.html","hash":"f284606e00dcdcd14fc2ecfe932978b711ff690f","modified":1674463674151},{"_id":"public/archives/2022/index.html","hash":"ea2622d721bb6e975a4dad0deac43d33c0fd85ea","modified":1674463674151},{"_id":"public/archives/2022/12/index.html","hash":"d962b497aad4a519e81b1f51a421a81459cb8f6e","modified":1674463674151},{"_id":"public/archives/2023/index.html","hash":"69d0e0ca16d3fad41abcb25abe854dbbad8f5dfb","modified":1674463674151},{"_id":"public/archives/2023/01/index.html","hash":"a33e046f1eae7404b2dab84298e0283dec9b78b0","modified":1674463674151},{"_id":"public/categories/å®ä¹ ç§‹æ‹›/index.html","hash":"3b88ceaf1819967bca19cdb27d3410e0ed304019","modified":1674463674151},{"_id":"public/categories/å®ä¹ ç§‹æ‹›/å®ä¹ /index.html","hash":"27635707db96bd7130ca4a01c908d34d5a224517","modified":1674463674151},{"_id":"public/categories/å®ä¹ ç§‹æ‹›/ç§‹æ‹›/index.html","hash":"5bbc1e89c2f48983953ccf353226ffe4d0a6afde","modified":1674463674151},{"_id":"public/categories/æŠ€æœ¯æ€»ç»“/index.html","hash":"438d6fe52a2a04db23ee81b2e97d6d75f7eb06c6","modified":1674463674151},{"_id":"public/java-springmvc.html","hash":"95b53364ffeeed81794bd4e29a38b857a4161ec3","modified":1674463674151},{"_id":"public/java-spring.html","hash":"d131587061f71b4910042b7e492d3c1471d00592","modified":1674463674151},{"_id":"public/java-mybatis.html","hash":"eb3191c0be1fe0d1e0d05282b695d24d8aee2c94","modified":1674463674151},{"_id":"public/java-concurrent-programming.html","hash":"59de760218bbbba1cdcb3f5de452fa342d872ddb","modified":1674463674151},{"_id":"public/java-collection.html","hash":"568e20d02de1b8d19cadcf20ffcf425388b1275b","modified":1674463674151},{"_id":"public/java-exception-error.html","hash":"e44c232a4c3b90af4a3b2f55c5880f042fba73f0","modified":1674463674151},{"_id":"public/java-basic-knowledge.html","hash":"b8231c1cd9c1682fda2a113934b3d6579d7d104b","modified":1674463674151},{"_id":"public/202301-it-info.html","hash":"bc1a9d495886611f84eda87702617ab5b91b8a83","modified":1674463674151},{"_id":"public/2022-memory.html","hash":"bb13c9d0888baa93dbd9cc7ffe7f359586e31297","modified":1674463674151},{"_id":"public/week-back-home.html","hash":"0a22d4ffde3bc7f859b9aebd016695975db3b67d","modified":1674463674151},{"_id":"public/2022-jiangsu-gwy.html","hash":"b2067df469f7287ed796127f22a629a373b9f7ad","modified":1674463674151},{"_id":"public/bilibili-vip.html","hash":"59a4a4d86452c645cea5558cfe102ee748f23739","modified":1674463674151},{"_id":"public/new-desk.html","hash":"8cd6c532e11d56273515e9901731406ecc92637b","modified":1674463674151},{"_id":"public/my-bytedance-internship-friends-offer.html","hash":"67fa0572cb5705bae7725903e055e24d516b1aa0","modified":1674463674151},{"_id":"public/image-host.html","hash":"0cb997f881b2c6c442378b78604159cc813b4b40","modified":1674463674151},{"_id":"public/build-blog.html","hash":"0c8262d28b9789e9230e16b72d22c659105226f8","modified":1674463674151},{"_id":"public/2022-autumn-recruitment-summary.html","hash":"182985808deeddf8d2bef4f4aa3cf4e2fd97ade6","modified":1674463674151},{"_id":"public/2022-internship-summary.html","hash":"da56fe9eab07fcf302bfa322f8d2513b03579839","modified":1674463674151},{"_id":"public/categories/æ—¥å¸¸å°è®°/index.html","hash":"531859e576dee1df948aa3b4842e8a6b76487b68","modified":1674463674151},{"_id":"public/categories/Javaå…«è‚¡æ–‡/index.html","hash":"68615a3c4e597d95da0950cf6736226027163b39","modified":1674463674151},{"_id":"public/index.html","hash":"e5f996efce69e7a2c01e1971c4d7124621800912","modified":1674463674151},{"_id":"public/page/2/index.html","hash":"752f01ba804558b4c178fa00abfa94409cce3819","modified":1674463674151},{"_id":"public/img/avatar.png","hash":"0d8236dcca871735500e9d06bbdbe0853ed6775b","modified":1674463674151},{"_id":"public/img/favicon.svg","hash":"16fd847265845063a16596761cddb32926073dd2","modified":1674463674151},{"_id":"public/img/logo.svg","hash":"e9b5c1438ddb576693a15d0713b2a1d9ceda4be9","modified":1674463674151},{"_id":"public/img/razor-bottom-black.svg","hash":"a3eda07b1c605b456da9cdf335a1075db5e5d72c","modified":1674463674151},{"_id":"public/img/og_image.png","hash":"b03f163096ca9c350ec962feee9836277b5c2509","modified":1674463674151},{"_id":"public/img/razor-top-black.svg","hash":"201f1171a43ce667a39091fe47c0f278857f18f0","modified":1674463674151},{"_id":"public/imgs/alipay.jpg","hash":"581c5ac9226be5f2e061f385780f39bc52850b47","modified":1674463674151},{"_id":"public/imgs/wechat.jpg","hash":"28ad8a9883ec29a49d52aeb9d8792493f56e760a","modified":1674463674151},{"_id":"public/img/alipay.jpg","hash":"581c5ac9226be5f2e061f385780f39bc52850b47","modified":1674463674151},{"_id":"public/img/wechat.jpg","hash":"28ad8a9883ec29a49d52aeb9d8792493f56e760a","modified":1674463674151},{"_id":"public/js/animation.js","hash":"0a8e361c353daa3194f4de3d646b96025d128e1a","modified":1674463674151},{"_id":"public/js/back_to_top.js","hash":"d91f10c08c726135a13dfa1f422c49d8764ef03f","modified":1674463674151},{"_id":"public/js/column.js","hash":"0baee024ab67474c073a4c41b495f3e7f0df4505","modified":1674463674151},{"_id":"public/js/main.js","hash":"ef8a0e5c80dc9cb02423fe18b142e17f99f8e9cb","modified":1674463674151},{"_id":"public/css/cyberpunk.css","hash":"b462177bee11f76e84e649f8192d5a68cb4b1402","modified":1674463674151},{"_id":"public/css/default.css","hash":"8717dd0ed1fe2a4237fbfb4f4f6e566cb1ee16b7","modified":1674463674151},{"_id":"public/css/style.css","hash":"8717dd0ed1fe2a4237fbfb4f4f6e566cb1ee16b7","modified":1674463674151}],"Category":[{"name":"æ—¥å¸¸å°è®°","_id":"cld8kfsip0004zvt86uh15bd8"},{"name":"å®ä¹ ç§‹æ‹›","_id":"cld8kfsit0009zvt8ds7207xq"},{"name":"Javaå…«è‚¡æ–‡","_id":"cld8kfsix000gzvt8cfljb67j"},{"name":"å®ä¹ ","parent":"cld8kfsit0009zvt8ds7207xq","_id":"cld8kfsj1000szvt8a3k007f2"},{"name":"ç§‹æ‹›","parent":"cld8kfsit0009zvt8ds7207xq","_id":"cld8kfsj40015zvt86m8cez11"},{"name":"æŠ€æœ¯æ€»ç»“","_id":"cld8kfsj5001czvt86tcq7jot"}],"Data":[],"Page":[{"_content":"<div align=\"center\">\n<img src=\"https://rishavanand.github.io/static/images/greetings.gif\" align=\"center\" style=\"width: 100%\" />\n</div>  \n\nğŸ”­ æœ¬ç§‘ï¼šè‹å·å¤§å­¦çº³ç±³ç§‘å­¦ä¸æŠ€æœ¯å­¦é™¢ï¼Œçº³ç±³ç‰©ç†æ–¹å‘ï¼›ç¡•å£«ï¼šè‹å·å¤§å­¦è®¡ç®—æœºç§‘å­¦ä¸æŠ€æœ¯å­¦é™¢ï¼Œè®¡ç®—æœºæŠ€æœ¯ã€‚\n\nğŸŒ± åœ¨å­—èŠ‚è·³åŠ¨å®ä¹ è¿‡4ä¸ªæœˆï¼Œæ‹…ä»»é£ä¹¦ EA-finance - åç«¯å¼€å‘ä¸€èŒï¼Œç§‹æ‹›æ‹¿åˆ°äº†å­—èŠ‚è·³åŠ¨ã€ä¸Šæµ·é“¶è¡Œã€é«˜ä¸­ä¿¡æ¯æŠ€æœ¯è€å¸ˆç­‰offerã€‚\n\nâš¡ ç¼–ç¨‹è¯­è¨€ç†Ÿæ‚‰Javaã€Pythonï¼Œæ•°æ®åº“ç†Ÿæ‚‰MySQLã€Redisï¼Œæ¡†æ¶ç†Ÿæ‚‰Springå…¨å®¶æ¡¶ï¼Œå¸¸ç”¨å·¥å…·ç†Ÿæ‚‰Gitã€Mavenã€Linuxâ€¦â€¦\n\nâ“ æ¬¢è¿äº¤æµè®¡ç®—æœºè€ƒç ”ã€å®ä¹ ã€ç§‹æ‹›ã€ç¼–ç¨‹ã€äº’è”ç½‘ç­‰é—®é¢˜ï¼Œæˆ‘çš„é‚®ç®± yaxingfang@163.com\n","source":"about/index.md","raw":"<div align=\"center\">\n<img src=\"https://rishavanand.github.io/static/images/greetings.gif\" align=\"center\" style=\"width: 100%\" />\n</div>  \n\nğŸ”­ æœ¬ç§‘ï¼šè‹å·å¤§å­¦çº³ç±³ç§‘å­¦ä¸æŠ€æœ¯å­¦é™¢ï¼Œçº³ç±³ç‰©ç†æ–¹å‘ï¼›ç¡•å£«ï¼šè‹å·å¤§å­¦è®¡ç®—æœºç§‘å­¦ä¸æŠ€æœ¯å­¦é™¢ï¼Œè®¡ç®—æœºæŠ€æœ¯ã€‚\n\nğŸŒ± åœ¨å­—èŠ‚è·³åŠ¨å®ä¹ è¿‡4ä¸ªæœˆï¼Œæ‹…ä»»é£ä¹¦ EA-finance - åç«¯å¼€å‘ä¸€èŒï¼Œç§‹æ‹›æ‹¿åˆ°äº†å­—èŠ‚è·³åŠ¨ã€ä¸Šæµ·é“¶è¡Œã€é«˜ä¸­ä¿¡æ¯æŠ€æœ¯è€å¸ˆç­‰offerã€‚\n\nâš¡ ç¼–ç¨‹è¯­è¨€ç†Ÿæ‚‰Javaã€Pythonï¼Œæ•°æ®åº“ç†Ÿæ‚‰MySQLã€Redisï¼Œæ¡†æ¶ç†Ÿæ‚‰Springå…¨å®¶æ¡¶ï¼Œå¸¸ç”¨å·¥å…·ç†Ÿæ‚‰Gitã€Mavenã€Linuxâ€¦â€¦\n\nâ“ æ¬¢è¿äº¤æµè®¡ç®—æœºè€ƒç ”ã€å®ä¹ ã€ç§‹æ‹›ã€ç¼–ç¨‹ã€äº’è”ç½‘ç­‰é—®é¢˜ï¼Œæˆ‘çš„é‚®ç®± yaxingfang@163.com\n","date":"2023-01-17T12:00:04.997Z","updated":"2023-01-17T09:12:34.499Z","path":"about/index.html","title":"","comments":1,"layout":"page","_id":"cld8kfsih0000zvt8hnb867qa","content":"<div align=\"center\">\n<img src=\"https://rishavanand.github.io/static/images/greetings.gif\" align=\"center\" style=\"width: 100%\" />\n</div>  \n\n<p>ğŸ”­ æœ¬ç§‘ï¼šè‹å·å¤§å­¦çº³ç±³ç§‘å­¦ä¸æŠ€æœ¯å­¦é™¢ï¼Œçº³ç±³ç‰©ç†æ–¹å‘ï¼›ç¡•å£«ï¼šè‹å·å¤§å­¦è®¡ç®—æœºç§‘å­¦ä¸æŠ€æœ¯å­¦é™¢ï¼Œè®¡ç®—æœºæŠ€æœ¯ã€‚</p>\n<p>ğŸŒ± åœ¨å­—èŠ‚è·³åŠ¨å®ä¹ è¿‡4ä¸ªæœˆï¼Œæ‹…ä»»é£ä¹¦ EA-finance - åç«¯å¼€å‘ä¸€èŒï¼Œç§‹æ‹›æ‹¿åˆ°äº†å­—èŠ‚è·³åŠ¨ã€ä¸Šæµ·é“¶è¡Œã€é«˜ä¸­ä¿¡æ¯æŠ€æœ¯è€å¸ˆç­‰offerã€‚</p>\n<p>âš¡ ç¼–ç¨‹è¯­è¨€ç†Ÿæ‚‰Javaã€Pythonï¼Œæ•°æ®åº“ç†Ÿæ‚‰MySQLã€Redisï¼Œæ¡†æ¶ç†Ÿæ‚‰Springå…¨å®¶æ¡¶ï¼Œå¸¸ç”¨å·¥å…·ç†Ÿæ‚‰Gitã€Mavenã€Linuxâ€¦â€¦</p>\n<p>â“ æ¬¢è¿äº¤æµè®¡ç®—æœºè€ƒç ”ã€å®ä¹ ã€ç§‹æ‹›ã€ç¼–ç¨‹ã€äº’è”ç½‘ç­‰é—®é¢˜ï¼Œæˆ‘çš„é‚®ç®± <a href=\"mailto:&#121;&#97;&#x78;&#105;&#x6e;&#x67;&#x66;&#97;&#x6e;&#x67;&#x40;&#49;&#54;&#x33;&#x2e;&#x63;&#x6f;&#109;\">&#121;&#97;&#x78;&#105;&#x6e;&#x67;&#x66;&#97;&#x6e;&#x67;&#x40;&#49;&#54;&#x33;&#x2e;&#x63;&#x6f;&#109;</a></p>\n","site":{"data":{}},"length":324,"excerpt":"","more":"<div align=\"center\">\n<img src=\"https://rishavanand.github.io/static/images/greetings.gif\" align=\"center\" style=\"width: 100%\" />\n</div>  \n\n<p>ğŸ”­ æœ¬ç§‘ï¼šè‹å·å¤§å­¦çº³ç±³ç§‘å­¦ä¸æŠ€æœ¯å­¦é™¢ï¼Œçº³ç±³ç‰©ç†æ–¹å‘ï¼›ç¡•å£«ï¼šè‹å·å¤§å­¦è®¡ç®—æœºç§‘å­¦ä¸æŠ€æœ¯å­¦é™¢ï¼Œè®¡ç®—æœºæŠ€æœ¯ã€‚</p>\n<p>ğŸŒ± åœ¨å­—èŠ‚è·³åŠ¨å®ä¹ è¿‡4ä¸ªæœˆï¼Œæ‹…ä»»é£ä¹¦ EA-finance - åç«¯å¼€å‘ä¸€èŒï¼Œç§‹æ‹›æ‹¿åˆ°äº†å­—èŠ‚è·³åŠ¨ã€ä¸Šæµ·é“¶è¡Œã€é«˜ä¸­ä¿¡æ¯æŠ€æœ¯è€å¸ˆç­‰offerã€‚</p>\n<p>âš¡ ç¼–ç¨‹è¯­è¨€ç†Ÿæ‚‰Javaã€Pythonï¼Œæ•°æ®åº“ç†Ÿæ‚‰MySQLã€Redisï¼Œæ¡†æ¶ç†Ÿæ‚‰Springå…¨å®¶æ¡¶ï¼Œå¸¸ç”¨å·¥å…·ç†Ÿæ‚‰Gitã€Mavenã€Linuxâ€¦â€¦</p>\n<p>â“ æ¬¢è¿äº¤æµè®¡ç®—æœºè€ƒç ”ã€å®ä¹ ã€ç§‹æ‹›ã€ç¼–ç¨‹ã€äº’è”ç½‘ç­‰é—®é¢˜ï¼Œæˆ‘çš„é‚®ç®± <a href=\"mailto:&#121;&#97;&#x78;&#105;&#x6e;&#x67;&#x66;&#97;&#x6e;&#x67;&#x40;&#49;&#54;&#x33;&#x2e;&#x63;&#x6f;&#109;\">&#121;&#97;&#x78;&#105;&#x6e;&#x67;&#x66;&#97;&#x6e;&#x67;&#x40;&#49;&#54;&#x33;&#x2e;&#x63;&#x6f;&#109;</a></p>\n"},{"title":"Categories","type":"categories","date":"2022-12-12T02:27:11.000Z","_content":"","source":"categories/index.md","raw":"---\ntitle: Categories\ntype: \"categories\"\ndate: 2022-12-12 10:27:11\n---\n","updated":"2023-01-17T04:29:14.157Z","path":"categories/index.html","comments":1,"layout":"page","_id":"cld8kfsin0002zvt88c1s5gab","content":"","site":{"data":{}},"length":0,"excerpt":"","more":""},{"title":"Tags","layout":"tags","_content":"\n","source":"tags/index.md","raw":"---\ntitle: Tags\nlayout: tags\n---\n\n","date":"2023-01-17T05:03:50.281Z","updated":"2023-01-17T05:03:50.273Z","path":"tags/index.html","comments":1,"_id":"cld8kfsiq0005zvt85d7vfg2h","content":"","site":{"data":{}},"length":0,"excerpt":"","more":""}],"Post":[{"title":"12å¼ å›¾å›å¿†æˆ‘çš„2022","copyright":true,"mathjax":true,"date":"2023-01-01T12:59:55.000Z","urlname":"2022-memory","_content":"\n2022å¹´è½¬ç¬å³é€ï¼Œæˆ‘ä»æ‰‹æœºç›¸å†Œä¸­æ¯ä¸ªæœˆåˆ†åˆ«æŒ‘å‡ºä¸€å¼ ç…§ç‰‡ï¼Œåœ¨æ­¤ç»™æˆ‘çš„2022ç•™ä¸ªå›å¿†ã€‚\n\n<!--more-->\n\n### 1æœˆ\n\nè¿™å¼ ç…§ç‰‡æˆ‘è®°å¾—æ˜¯ä¸€æœˆä»½çš„æŸä¸€å¤©ï¼Œå’Œlbhå»å­¦æ ¡å—é—¨åƒå®Œæ™šé¥­å›å­¦æ ¡æ‹çš„ï¼Œè®°å¾—æ™šé¥­åƒçš„è¿˜æ˜¯â€œè¥¿å®‰è°ƒè°ƒâ€ï¼Œè‡Šå­é¢åƒçš„å¾ˆè¿‡ç˜¾ã€‚\n\n![1](https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/1.JPG)\n\n### 2æœˆ\n\n2æœˆçš„ç¬¬ä¸€å¤©å°±æ˜¯å¤§å¹´åˆä¸€è¿‡æ–°å¹´ï¼Œæ—©ä¸Šæ—©èµ·åœ¨å®¶é—¨å£æ”¾çˆ†ç«¹ã€‚\n\n![2](https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/2.jpg)\n\n### 3æœˆ\n\n3æœˆåŸºæœ¬å°±æ˜¯åœ¨å®¶åˆ·é¢˜ã€èƒŒå…«è‚¡ï¼ŒæŠ•é€’å®ä¹ ï¼Œå®ä¹ é¢è¯•ã€‚æ¯å¤©æ—©ä¸Šç…®ä¸¤ä¸ªç™½ç…®è›‹åƒã€‚è¿™æ˜¯æŸå¤©è§‰å¾—è‡ªå·±ç…®çš„å¥½çœ‹åˆå¥½åƒé‚è®°å½•ä¸‹ã€‚\n\n![3](https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/3.JPG)\n\n### 4æœˆ\n\n4æœˆæ”¶åˆ°å­—èŠ‚è·³åŠ¨çš„å®ä¹ offerå•¦ï¼Œæœˆåº•æ­£å¼å…¥èŒï¼Œæ”¶åˆ°å¯„æ¥çš„ç”µè„‘ï¼Œç–«æƒ…åŸå› å±…å®¶åŠå…¬äº†å‡ å‘¨ã€‚\n\n![4](https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/4.jpg)\n\n### 5æœˆ\n\n5æœˆåˆ°æ­å·çº¿ä¸‹å®ä¹ å•¦ï¼Œä¸­é—´æœ‰æœ‹å‹æ¥ç©ï¼Œä¸€èµ·å»çš„è¥¿æ¹–ã€‚\n\n![2205](https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/2205.jpg)\n\n### 6æœˆ\n\nè¿™æ˜¯å…¬å¸æ—è¾¹ä¸€æ ‹è®¾è®¡é™¢çš„æ¥¼ï¼Œå½“æ—¶è²Œä¼¼æ˜¯å‘¨äº”æ™šä¸Šï¼Œæå‰æºœï¼Œå½“æ—¶è§‰å¾—é…ä¸Šæ¹›è“çš„å¤©ç©ºå¾ˆå¥½çœ‹ã€‚\n\n![6](https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/6.JPG)\n\n### 7æœˆ\n\n7æœˆå’Œé«˜ä¸­è€åŒå­¦ä¸€èµ·çº¦äº†ä¸ªé¥­ï¼Œé€›äº†é€›è¥¿æ¹–ï¼Œ7æœˆçš„è·èŠ±å¼€çš„å¾ˆèŒ‚ç››ï¼Œè¥¿æ¹–æ—å…¨æ˜¯äººã€‚\n\n![7](https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/7.JPG)\n\n### 8æœˆ\n\n8æœˆç¦»èŒå‰ç…äº†ä¸€çœ¼ä»£ç é‡ï¼Œå¦‚ä¸‹æ˜¯4ä¸ªæœˆçš„æˆæœï¼Œæ„Ÿè§‰è¿˜å¯ä»¥ï¼Œæ²¡æœ‰å¾ˆæ°´ã€‚\n\n![8](https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/8.jpg)\n\n### 9æœˆ\n\n9æœˆå›æ ¡è¿˜æ˜¯æ¯”è¾ƒé—²çš„ï¼ŒåŸºæœ¬å°±æ˜¯çœ‹çœ‹ç½‘è¯¾ï¼Œåšç¬”è¯•ã€é¢è¯•ã€‚ä¸‹å›¾å’Œæœ‹å‹å‡ºå»åƒé¥­é€›è¡—ï¼Œçœ‹ä¸­äº†ä¸€ä»¶å¤–å¥—ã€‚\n\n![9](https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/9.JPG)\n\n### 10æœˆ\n\n10æœˆå»å‚åŠ äº†è¡¨å¼Ÿçš„å©šç¤¼ï¼Œ4ä¸ªä¼´éƒ+æ–°éƒçš„è‡ªæ‹ï¼Œå°å¸…ã€‚\n\n![10](https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/10.JPG)\n\n### 11æœˆ\n\nå®¿èˆå¸ˆå¼Ÿè¿‡ç”Ÿæ—¥ä¸€èµ·å»æµ·åº•æå¹²é¥­ï¼Œå¤´ä¸€å›ä½“éªŒä¸‹æµ·åº•æçš„å…è´¹æ‰‹éƒ¨æŠ¤ç†ã€‚\n\n![11](https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/11.JPG)\n\n### 12æœˆ\n\nå›è€å®¶è¿‡ç”Ÿæ—¥å¤§å§¨å¦ˆç»™ä¹°çš„è›‹ç³•ï¼Œå“ˆå“ˆå“ˆï¼Œå¿«ä¹ã€‚\n\n![12](https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/12.jpg)\n","source":"_posts/12å¼ å›¾å›å¿†æˆ‘çš„2022.md","raw":"---\ntitle: 12å¼ å›¾å›å¿†æˆ‘çš„2022\ncopyright: true\nmathjax: true\ncategories: æ—¥å¸¸å°è®°\ntags: \ndate: 2023-01-01 20:59:55\nurlname: 2022-memory\n---\n\n2022å¹´è½¬ç¬å³é€ï¼Œæˆ‘ä»æ‰‹æœºç›¸å†Œä¸­æ¯ä¸ªæœˆåˆ†åˆ«æŒ‘å‡ºä¸€å¼ ç…§ç‰‡ï¼Œåœ¨æ­¤ç»™æˆ‘çš„2022ç•™ä¸ªå›å¿†ã€‚\n\n<!--more-->\n\n### 1æœˆ\n\nè¿™å¼ ç…§ç‰‡æˆ‘è®°å¾—æ˜¯ä¸€æœˆä»½çš„æŸä¸€å¤©ï¼Œå’Œlbhå»å­¦æ ¡å—é—¨åƒå®Œæ™šé¥­å›å­¦æ ¡æ‹çš„ï¼Œè®°å¾—æ™šé¥­åƒçš„è¿˜æ˜¯â€œè¥¿å®‰è°ƒè°ƒâ€ï¼Œè‡Šå­é¢åƒçš„å¾ˆè¿‡ç˜¾ã€‚\n\n![1](https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/1.JPG)\n\n### 2æœˆ\n\n2æœˆçš„ç¬¬ä¸€å¤©å°±æ˜¯å¤§å¹´åˆä¸€è¿‡æ–°å¹´ï¼Œæ—©ä¸Šæ—©èµ·åœ¨å®¶é—¨å£æ”¾çˆ†ç«¹ã€‚\n\n![2](https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/2.jpg)\n\n### 3æœˆ\n\n3æœˆåŸºæœ¬å°±æ˜¯åœ¨å®¶åˆ·é¢˜ã€èƒŒå…«è‚¡ï¼ŒæŠ•é€’å®ä¹ ï¼Œå®ä¹ é¢è¯•ã€‚æ¯å¤©æ—©ä¸Šç…®ä¸¤ä¸ªç™½ç…®è›‹åƒã€‚è¿™æ˜¯æŸå¤©è§‰å¾—è‡ªå·±ç…®çš„å¥½çœ‹åˆå¥½åƒé‚è®°å½•ä¸‹ã€‚\n\n![3](https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/3.JPG)\n\n### 4æœˆ\n\n4æœˆæ”¶åˆ°å­—èŠ‚è·³åŠ¨çš„å®ä¹ offerå•¦ï¼Œæœˆåº•æ­£å¼å…¥èŒï¼Œæ”¶åˆ°å¯„æ¥çš„ç”µè„‘ï¼Œç–«æƒ…åŸå› å±…å®¶åŠå…¬äº†å‡ å‘¨ã€‚\n\n![4](https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/4.jpg)\n\n### 5æœˆ\n\n5æœˆåˆ°æ­å·çº¿ä¸‹å®ä¹ å•¦ï¼Œä¸­é—´æœ‰æœ‹å‹æ¥ç©ï¼Œä¸€èµ·å»çš„è¥¿æ¹–ã€‚\n\n![2205](https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/2205.jpg)\n\n### 6æœˆ\n\nè¿™æ˜¯å…¬å¸æ—è¾¹ä¸€æ ‹è®¾è®¡é™¢çš„æ¥¼ï¼Œå½“æ—¶è²Œä¼¼æ˜¯å‘¨äº”æ™šä¸Šï¼Œæå‰æºœï¼Œå½“æ—¶è§‰å¾—é…ä¸Šæ¹›è“çš„å¤©ç©ºå¾ˆå¥½çœ‹ã€‚\n\n![6](https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/6.JPG)\n\n### 7æœˆ\n\n7æœˆå’Œé«˜ä¸­è€åŒå­¦ä¸€èµ·çº¦äº†ä¸ªé¥­ï¼Œé€›äº†é€›è¥¿æ¹–ï¼Œ7æœˆçš„è·èŠ±å¼€çš„å¾ˆèŒ‚ç››ï¼Œè¥¿æ¹–æ—å…¨æ˜¯äººã€‚\n\n![7](https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/7.JPG)\n\n### 8æœˆ\n\n8æœˆç¦»èŒå‰ç…äº†ä¸€çœ¼ä»£ç é‡ï¼Œå¦‚ä¸‹æ˜¯4ä¸ªæœˆçš„æˆæœï¼Œæ„Ÿè§‰è¿˜å¯ä»¥ï¼Œæ²¡æœ‰å¾ˆæ°´ã€‚\n\n![8](https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/8.jpg)\n\n### 9æœˆ\n\n9æœˆå›æ ¡è¿˜æ˜¯æ¯”è¾ƒé—²çš„ï¼ŒåŸºæœ¬å°±æ˜¯çœ‹çœ‹ç½‘è¯¾ï¼Œåšç¬”è¯•ã€é¢è¯•ã€‚ä¸‹å›¾å’Œæœ‹å‹å‡ºå»åƒé¥­é€›è¡—ï¼Œçœ‹ä¸­äº†ä¸€ä»¶å¤–å¥—ã€‚\n\n![9](https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/9.JPG)\n\n### 10æœˆ\n\n10æœˆå»å‚åŠ äº†è¡¨å¼Ÿçš„å©šç¤¼ï¼Œ4ä¸ªä¼´éƒ+æ–°éƒçš„è‡ªæ‹ï¼Œå°å¸…ã€‚\n\n![10](https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/10.JPG)\n\n### 11æœˆ\n\nå®¿èˆå¸ˆå¼Ÿè¿‡ç”Ÿæ—¥ä¸€èµ·å»æµ·åº•æå¹²é¥­ï¼Œå¤´ä¸€å›ä½“éªŒä¸‹æµ·åº•æçš„å…è´¹æ‰‹éƒ¨æŠ¤ç†ã€‚\n\n![11](https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/11.JPG)\n\n### 12æœˆ\n\nå›è€å®¶è¿‡ç”Ÿæ—¥å¤§å§¨å¦ˆç»™ä¹°çš„è›‹ç³•ï¼Œå“ˆå“ˆå“ˆï¼Œå¿«ä¹ã€‚\n\n![12](https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/12.jpg)\n","slug":"12å¼ å›¾å›å¿†æˆ‘çš„2022","published":1,"updated":"2023-01-17T01:34:41.080Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cld8kfsik0001zvt8co8o6kyx","content":"<p>2022å¹´è½¬ç¬å³é€ï¼Œæˆ‘ä»æ‰‹æœºç›¸å†Œä¸­æ¯ä¸ªæœˆåˆ†åˆ«æŒ‘å‡ºä¸€å¼ ç…§ç‰‡ï¼Œåœ¨æ­¤ç»™æˆ‘çš„2022ç•™ä¸ªå›å¿†ã€‚</p>\n<span id=\"more\"></span>\n\n<h3 id=\"1æœˆ\"><a href=\"#1æœˆ\" class=\"headerlink\" title=\"1æœˆ\"></a>1æœˆ</h3><p>è¿™å¼ ç…§ç‰‡æˆ‘è®°å¾—æ˜¯ä¸€æœˆä»½çš„æŸä¸€å¤©ï¼Œå’Œlbhå»å­¦æ ¡å—é—¨åƒå®Œæ™šé¥­å›å­¦æ ¡æ‹çš„ï¼Œè®°å¾—æ™šé¥­åƒçš„è¿˜æ˜¯â€œè¥¿å®‰è°ƒè°ƒâ€ï¼Œè‡Šå­é¢åƒçš„å¾ˆè¿‡ç˜¾ã€‚</p>\n<p><img src=\"https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/1.JPG\" alt=\"1\"></p>\n<h3 id=\"2æœˆ\"><a href=\"#2æœˆ\" class=\"headerlink\" title=\"2æœˆ\"></a>2æœˆ</h3><p>2æœˆçš„ç¬¬ä¸€å¤©å°±æ˜¯å¤§å¹´åˆä¸€è¿‡æ–°å¹´ï¼Œæ—©ä¸Šæ—©èµ·åœ¨å®¶é—¨å£æ”¾çˆ†ç«¹ã€‚</p>\n<p><img src=\"https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/2.jpg\" alt=\"2\"></p>\n<h3 id=\"3æœˆ\"><a href=\"#3æœˆ\" class=\"headerlink\" title=\"3æœˆ\"></a>3æœˆ</h3><p>3æœˆåŸºæœ¬å°±æ˜¯åœ¨å®¶åˆ·é¢˜ã€èƒŒå…«è‚¡ï¼ŒæŠ•é€’å®ä¹ ï¼Œå®ä¹ é¢è¯•ã€‚æ¯å¤©æ—©ä¸Šç…®ä¸¤ä¸ªç™½ç…®è›‹åƒã€‚è¿™æ˜¯æŸå¤©è§‰å¾—è‡ªå·±ç…®çš„å¥½çœ‹åˆå¥½åƒé‚è®°å½•ä¸‹ã€‚</p>\n<p><img src=\"https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/3.JPG\" alt=\"3\"></p>\n<h3 id=\"4æœˆ\"><a href=\"#4æœˆ\" class=\"headerlink\" title=\"4æœˆ\"></a>4æœˆ</h3><p>4æœˆæ”¶åˆ°å­—èŠ‚è·³åŠ¨çš„å®ä¹ offerå•¦ï¼Œæœˆåº•æ­£å¼å…¥èŒï¼Œæ”¶åˆ°å¯„æ¥çš„ç”µè„‘ï¼Œç–«æƒ…åŸå› å±…å®¶åŠå…¬äº†å‡ å‘¨ã€‚</p>\n<p><img src=\"https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/4.jpg\" alt=\"4\"></p>\n<h3 id=\"5æœˆ\"><a href=\"#5æœˆ\" class=\"headerlink\" title=\"5æœˆ\"></a>5æœˆ</h3><p>5æœˆåˆ°æ­å·çº¿ä¸‹å®ä¹ å•¦ï¼Œä¸­é—´æœ‰æœ‹å‹æ¥ç©ï¼Œä¸€èµ·å»çš„è¥¿æ¹–ã€‚</p>\n<p><img src=\"https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/2205.jpg\" alt=\"2205\"></p>\n<h3 id=\"6æœˆ\"><a href=\"#6æœˆ\" class=\"headerlink\" title=\"6æœˆ\"></a>6æœˆ</h3><p>è¿™æ˜¯å…¬å¸æ—è¾¹ä¸€æ ‹è®¾è®¡é™¢çš„æ¥¼ï¼Œå½“æ—¶è²Œä¼¼æ˜¯å‘¨äº”æ™šä¸Šï¼Œæå‰æºœï¼Œå½“æ—¶è§‰å¾—é…ä¸Šæ¹›è“çš„å¤©ç©ºå¾ˆå¥½çœ‹ã€‚</p>\n<p><img src=\"https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/6.JPG\" alt=\"6\"></p>\n<h3 id=\"7æœˆ\"><a href=\"#7æœˆ\" class=\"headerlink\" title=\"7æœˆ\"></a>7æœˆ</h3><p>7æœˆå’Œé«˜ä¸­è€åŒå­¦ä¸€èµ·çº¦äº†ä¸ªé¥­ï¼Œé€›äº†é€›è¥¿æ¹–ï¼Œ7æœˆçš„è·èŠ±å¼€çš„å¾ˆèŒ‚ç››ï¼Œè¥¿æ¹–æ—å…¨æ˜¯äººã€‚</p>\n<p><img src=\"https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/7.JPG\" alt=\"7\"></p>\n<h3 id=\"8æœˆ\"><a href=\"#8æœˆ\" class=\"headerlink\" title=\"8æœˆ\"></a>8æœˆ</h3><p>8æœˆç¦»èŒå‰ç…äº†ä¸€çœ¼ä»£ç é‡ï¼Œå¦‚ä¸‹æ˜¯4ä¸ªæœˆçš„æˆæœï¼Œæ„Ÿè§‰è¿˜å¯ä»¥ï¼Œæ²¡æœ‰å¾ˆæ°´ã€‚</p>\n<p><img src=\"https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/8.jpg\" alt=\"8\"></p>\n<h3 id=\"9æœˆ\"><a href=\"#9æœˆ\" class=\"headerlink\" title=\"9æœˆ\"></a>9æœˆ</h3><p>9æœˆå›æ ¡è¿˜æ˜¯æ¯”è¾ƒé—²çš„ï¼ŒåŸºæœ¬å°±æ˜¯çœ‹çœ‹ç½‘è¯¾ï¼Œåšç¬”è¯•ã€é¢è¯•ã€‚ä¸‹å›¾å’Œæœ‹å‹å‡ºå»åƒé¥­é€›è¡—ï¼Œçœ‹ä¸­äº†ä¸€ä»¶å¤–å¥—ã€‚</p>\n<p><img src=\"https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/9.JPG\" alt=\"9\"></p>\n<h3 id=\"10æœˆ\"><a href=\"#10æœˆ\" class=\"headerlink\" title=\"10æœˆ\"></a>10æœˆ</h3><p>10æœˆå»å‚åŠ äº†è¡¨å¼Ÿçš„å©šç¤¼ï¼Œ4ä¸ªä¼´éƒ+æ–°éƒçš„è‡ªæ‹ï¼Œå°å¸…ã€‚</p>\n<p><img src=\"https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/10.JPG\" alt=\"10\"></p>\n<h3 id=\"11æœˆ\"><a href=\"#11æœˆ\" class=\"headerlink\" title=\"11æœˆ\"></a>11æœˆ</h3><p>å®¿èˆå¸ˆå¼Ÿè¿‡ç”Ÿæ—¥ä¸€èµ·å»æµ·åº•æå¹²é¥­ï¼Œå¤´ä¸€å›ä½“éªŒä¸‹æµ·åº•æçš„å…è´¹æ‰‹éƒ¨æŠ¤ç†ã€‚</p>\n<p><img src=\"https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/11.JPG\" alt=\"11\"></p>\n<h3 id=\"12æœˆ\"><a href=\"#12æœˆ\" class=\"headerlink\" title=\"12æœˆ\"></a>12æœˆ</h3><p>å›è€å®¶è¿‡ç”Ÿæ—¥å¤§å§¨å¦ˆç»™ä¹°çš„è›‹ç³•ï¼Œå“ˆå“ˆå“ˆï¼Œå¿«ä¹ã€‚</p>\n<p><img src=\"https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/12.jpg\" alt=\"12\"></p>\n","site":{"data":{}},"length":530,"excerpt":"<p>2022å¹´è½¬ç¬å³é€ï¼Œæˆ‘ä»æ‰‹æœºç›¸å†Œä¸­æ¯ä¸ªæœˆåˆ†åˆ«æŒ‘å‡ºä¸€å¼ ç…§ç‰‡ï¼Œåœ¨æ­¤ç»™æˆ‘çš„2022ç•™ä¸ªå›å¿†ã€‚</p>","more":"<h3 id=\"1æœˆ\"><a href=\"#1æœˆ\" class=\"headerlink\" title=\"1æœˆ\"></a>1æœˆ</h3><p>è¿™å¼ ç…§ç‰‡æˆ‘è®°å¾—æ˜¯ä¸€æœˆä»½çš„æŸä¸€å¤©ï¼Œå’Œlbhå»å­¦æ ¡å—é—¨åƒå®Œæ™šé¥­å›å­¦æ ¡æ‹çš„ï¼Œè®°å¾—æ™šé¥­åƒçš„è¿˜æ˜¯â€œè¥¿å®‰è°ƒè°ƒâ€ï¼Œè‡Šå­é¢åƒçš„å¾ˆè¿‡ç˜¾ã€‚</p>\n<p><img src=\"https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/1.JPG\" alt=\"1\"></p>\n<h3 id=\"2æœˆ\"><a href=\"#2æœˆ\" class=\"headerlink\" title=\"2æœˆ\"></a>2æœˆ</h3><p>2æœˆçš„ç¬¬ä¸€å¤©å°±æ˜¯å¤§å¹´åˆä¸€è¿‡æ–°å¹´ï¼Œæ—©ä¸Šæ—©èµ·åœ¨å®¶é—¨å£æ”¾çˆ†ç«¹ã€‚</p>\n<p><img src=\"https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/2.jpg\" alt=\"2\"></p>\n<h3 id=\"3æœˆ\"><a href=\"#3æœˆ\" class=\"headerlink\" title=\"3æœˆ\"></a>3æœˆ</h3><p>3æœˆåŸºæœ¬å°±æ˜¯åœ¨å®¶åˆ·é¢˜ã€èƒŒå…«è‚¡ï¼ŒæŠ•é€’å®ä¹ ï¼Œå®ä¹ é¢è¯•ã€‚æ¯å¤©æ—©ä¸Šç…®ä¸¤ä¸ªç™½ç…®è›‹åƒã€‚è¿™æ˜¯æŸå¤©è§‰å¾—è‡ªå·±ç…®çš„å¥½çœ‹åˆå¥½åƒé‚è®°å½•ä¸‹ã€‚</p>\n<p><img src=\"https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/3.JPG\" alt=\"3\"></p>\n<h3 id=\"4æœˆ\"><a href=\"#4æœˆ\" class=\"headerlink\" title=\"4æœˆ\"></a>4æœˆ</h3><p>4æœˆæ”¶åˆ°å­—èŠ‚è·³åŠ¨çš„å®ä¹ offerå•¦ï¼Œæœˆåº•æ­£å¼å…¥èŒï¼Œæ”¶åˆ°å¯„æ¥çš„ç”µè„‘ï¼Œç–«æƒ…åŸå› å±…å®¶åŠå…¬äº†å‡ å‘¨ã€‚</p>\n<p><img src=\"https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/4.jpg\" alt=\"4\"></p>\n<h3 id=\"5æœˆ\"><a href=\"#5æœˆ\" class=\"headerlink\" title=\"5æœˆ\"></a>5æœˆ</h3><p>5æœˆåˆ°æ­å·çº¿ä¸‹å®ä¹ å•¦ï¼Œä¸­é—´æœ‰æœ‹å‹æ¥ç©ï¼Œä¸€èµ·å»çš„è¥¿æ¹–ã€‚</p>\n<p><img src=\"https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/2205.jpg\" alt=\"2205\"></p>\n<h3 id=\"6æœˆ\"><a href=\"#6æœˆ\" class=\"headerlink\" title=\"6æœˆ\"></a>6æœˆ</h3><p>è¿™æ˜¯å…¬å¸æ—è¾¹ä¸€æ ‹è®¾è®¡é™¢çš„æ¥¼ï¼Œå½“æ—¶è²Œä¼¼æ˜¯å‘¨äº”æ™šä¸Šï¼Œæå‰æºœï¼Œå½“æ—¶è§‰å¾—é…ä¸Šæ¹›è“çš„å¤©ç©ºå¾ˆå¥½çœ‹ã€‚</p>\n<p><img src=\"https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/6.JPG\" alt=\"6\"></p>\n<h3 id=\"7æœˆ\"><a href=\"#7æœˆ\" class=\"headerlink\" title=\"7æœˆ\"></a>7æœˆ</h3><p>7æœˆå’Œé«˜ä¸­è€åŒå­¦ä¸€èµ·çº¦äº†ä¸ªé¥­ï¼Œé€›äº†é€›è¥¿æ¹–ï¼Œ7æœˆçš„è·èŠ±å¼€çš„å¾ˆèŒ‚ç››ï¼Œè¥¿æ¹–æ—å…¨æ˜¯äººã€‚</p>\n<p><img src=\"https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/7.JPG\" alt=\"7\"></p>\n<h3 id=\"8æœˆ\"><a href=\"#8æœˆ\" class=\"headerlink\" title=\"8æœˆ\"></a>8æœˆ</h3><p>8æœˆç¦»èŒå‰ç…äº†ä¸€çœ¼ä»£ç é‡ï¼Œå¦‚ä¸‹æ˜¯4ä¸ªæœˆçš„æˆæœï¼Œæ„Ÿè§‰è¿˜å¯ä»¥ï¼Œæ²¡æœ‰å¾ˆæ°´ã€‚</p>\n<p><img src=\"https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/8.jpg\" alt=\"8\"></p>\n<h3 id=\"9æœˆ\"><a href=\"#9æœˆ\" class=\"headerlink\" title=\"9æœˆ\"></a>9æœˆ</h3><p>9æœˆå›æ ¡è¿˜æ˜¯æ¯”è¾ƒé—²çš„ï¼ŒåŸºæœ¬å°±æ˜¯çœ‹çœ‹ç½‘è¯¾ï¼Œåšç¬”è¯•ã€é¢è¯•ã€‚ä¸‹å›¾å’Œæœ‹å‹å‡ºå»åƒé¥­é€›è¡—ï¼Œçœ‹ä¸­äº†ä¸€ä»¶å¤–å¥—ã€‚</p>\n<p><img src=\"https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/9.JPG\" alt=\"9\"></p>\n<h3 id=\"10æœˆ\"><a href=\"#10æœˆ\" class=\"headerlink\" title=\"10æœˆ\"></a>10æœˆ</h3><p>10æœˆå»å‚åŠ äº†è¡¨å¼Ÿçš„å©šç¤¼ï¼Œ4ä¸ªä¼´éƒ+æ–°éƒçš„è‡ªæ‹ï¼Œå°å¸…ã€‚</p>\n<p><img src=\"https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/10.JPG\" alt=\"10\"></p>\n<h3 id=\"11æœˆ\"><a href=\"#11æœˆ\" class=\"headerlink\" title=\"11æœˆ\"></a>11æœˆ</h3><p>å®¿èˆå¸ˆå¼Ÿè¿‡ç”Ÿæ—¥ä¸€èµ·å»æµ·åº•æå¹²é¥­ï¼Œå¤´ä¸€å›ä½“éªŒä¸‹æµ·åº•æçš„å…è´¹æ‰‹éƒ¨æŠ¤ç†ã€‚</p>\n<p><img src=\"https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/11.JPG\" alt=\"11\"></p>\n<h3 id=\"12æœˆ\"><a href=\"#12æœˆ\" class=\"headerlink\" title=\"12æœˆ\"></a>12æœˆ</h3><p>å›è€å®¶è¿‡ç”Ÿæ—¥å¤§å§¨å¦ˆç»™ä¹°çš„è›‹ç³•ï¼Œå“ˆå“ˆå“ˆï¼Œå¿«ä¹ã€‚</p>\n<p><img src=\"https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/12.jpg\" alt=\"12\"></p>"},{"title":"2022å®ä¹ æ€»ç»“","date":"2022-12-12T02:40:27.000Z","urlname":"2022-internship-summary","description":null,"copyright":true,"mathjax":true,"_content":"\n> å†™åœ¨å‰é¢ï¼šä½œä¸ºä¸€åç¡•è½¬ç çš„é€‰æ‰‹ï¼Œä»Šå¹´æš‘æœŸå®ä¹ è²Œä¼¼åˆæ ¼å¤–çš„éš¾ï¼Œèº«è¾¹çš„æœ‹å‹ã€è„‰è„‰ã€ç‰›å®¢ä¸Šçš„åŒå­¦éƒ½è¡¨ç¤ºä»Šå¹´å¤§ç¯å¢ƒå¾ˆå·®ï¼Œå®ä¹ å¾ˆéš¾æ‰¾ã€‚å„ä¸ªå¤§å‚ä»è£å‘˜ï¼Œ\"æ¯•ä¸šå­£\"ï¼Œåˆ°é” hcã€åœæ­¢æµç¨‹ã€ç”šè‡³ä¸»åŠ¨æ¯çº¦å·²ç­¾çš„ offerï¼Œæ— ä¸è¡¨ç°å‡ºä»Šå¹´å¤§ç¯å¢ƒæœ‰å¤šå·®ã€‚ä»¥ä¸‹æ˜¯æœ¬äººäºŒæœˆåº•ä»¥æ¥æ‰¾åç«¯å¼€å‘å²—çš„æš‘æœŸå®ä¹ å¯¹å„ä¸ªå…¬å¸é¢è¯•æµç¨‹ä¸€ä¸ªå¤§æ¦‚çš„å›é¡¾å’Œæ€»ç»“ã€‚\n\n<!-- more -->\n\n## å·²é¢è¯•\n\n### å¾®è½¯\n\n3.7 ä¸€é¢ â†’  3.10 ï¼ˆä¸€äºŒé¢å¹³è¡Œé¢ï¼Œä¸€é¢è¿‡ç›´è¾¾ç»ˆé¢ï¼‰ â†’ 3.16 æŒ‚ \n\n* å¾®è½¯å¾ˆçœ‹é‡ç®—æ³•ï¼Œå…¨ç¨‹æ— å…«è‚¡ï¼Œåšé¢˜æ—¶æ²¡æœ‰æ€è·¯å¯ä»¥å’Œé¢è¯•å®˜æ²Ÿé€šï¼Œä¸è¦è‡ªå·±ä¸€ä¸ªäººç¡¬æƒ³ï¼Œå¾®è½¯å¾ˆçœ‹é‡æ²Ÿé€šèƒ½åŠ›ã€‚\n* å°½é‡æ—©æŠ•ï¼Œå¾®è½¯ä»Šå¹´æš‘æœŸå®ä¹ æå‰æ‰¹å·®ä¸å¤šå»å¹´ 12 æœˆå°±å¼€å§‹äº†ï¼Œèº«è¾¹æœ‰æœ‹å‹æå‰æ‰¹è¿›çš„ï¼Œç›¸è¾ƒäºæ­£å¼æ‰¹è€Œè¨€éš¾åº¦æ„Ÿè§‰ä¹Ÿæ²¡æœ‰æ›´å¤§ï¼Œè€Œä¸”å…¶å®åˆ°äº†æ­£å¼æ‰¹å‰©ä½™çš„ hc å°±ä¸å¤šäº†ã€‚æœ‰æœ‹å‹æŠ•ç®€å†æœ‰ç‚¹æ™šè¿é¢è¯•éƒ½æ²¡æœ‰å®‰æ’åˆ°ã€‚\n\n### ç¾å›¢\n\n3.12 ç¬”è¯•ï¼ˆ3.18 / 5ï¼‰ â†’  3.18 ä¸€é¢ â†’  3.18 æŒ‚\n\né¢è¯•ä½“éªŒå¾ˆä¸å¥½ï¼ˆå½“ç„¶è‡ªå·±é¢çš„ä¹Ÿä¸å¥½ï¼‰ï¼Œåç»­è„‰è„‰ç‰›å®¢ä¸Šçœ‹åˆ°è¿™ä¸ªéƒ¨é—¨è²Œä¼¼ä¸€é¢æŒ‚äº†ä¸å°‘äººä¸ä¹é¡¶çº§ 985ã€‚\n\n### å­—èŠ‚\n\n3.22 ä¸€é¢ â†’  3.23 äºŒé¢ â†’  3.29 ä¸‰é¢ â†’  4.2 offerå®¡æ‰¹ â†’  4.11 offeré‚®ä»¶\n\n* å­—èŠ‚æ¯”è¾ƒçœ‹é‡åŸºç¡€å’Œç®—æ³•ï¼Œé¢˜è‡³å°‘è¦æœ‰æ€è·¯å’Œé¢è¯•å®˜æ²Ÿé€šï¼Œæœ€å¥½åšå‡ºæ¥ã€‚\n* æµç¨‹å¾ˆå¿«ï¼Œä¸€é¢äºŒé¢éƒ½æ˜¯å½“å¤©æ™šä¸Šç›´æ¥é€šçŸ¥é€šè¿‡ï¼Œä¸‰é¢è¿‡åå¥½å‡ å¤©ç­‰åˆ° HR ç”µè¯ï¼Œç„¶å offer å®¡æ‰¹è·¨äº†æ¸…æ˜èŠ‚ï¼Œç„¶ååˆè¿‡äº†ä¸€ä¸ªå‘¨æœ«ï¼Œè›®ç—›è‹¦çš„ã€‚\n* ç»¼åˆè€Œè¨€ï¼Œå­—èŠ‚çš„é¢è¯•ä½“éªŒå¾ˆå¥½ï¼Œé¢è¯•å®˜ä¼šå¼•å¯¼ä½ å»è¯´ï¼ŒåŒ…æ‹¬ä¸€äº›å…«è‚¡ã€åœºæ™¯é¢˜ã€‚\n\n### æºç¨‹\n\n3.24 ç¬”è¯•ï¼ˆ2.7 / 4ï¼‰ â†’  3.31 ä¸€é¢ â†’  4.13 çº¦äº†äºŒé¢ï¼ˆèººå¹³ä¸é¢äº†ï¼‰\n\næºç¨‹ä¸€é¢é—®çš„æ¯”è¾ƒåŸºç¡€ï¼Œç®—æ³•ä¹Ÿæ¯”è¾ƒç®€å•ã€‚\n\n### é˜¿é‡Œ\n\n3.24 åˆé¢ â†’  3.25 ç¬”è¯•ï¼ˆæƒ¨ï¼‰ â†’  4.7 äºŒé¢ â†’  4.11 è¡¥ç¬”è¯•\n\né˜¿é‡Œä¸€é¢çœ‹åŸºç¡€ï¼ŒäºŒé¢çœ‹é¡¹ç›®ï¼Œé¡¹ç›®ä¸å¤ªç†Ÿæ‚‰äº†ï¼Œè¢«æ‹·æ‰“çƒ‚äº†ã€‚\næ›´æ–°ï¼š4.11 æ™šä¸Šä¸´æ—¶çº¦åšé¢˜ï¼Œä¸¤é“ï¼Œä¸€é“å¤šçº¿ç¨‹æ‰“å°æ•°æ®é—®é¢˜ã€ä¸€é“é«˜å¹¶å‘è½¬è´¦æ¥å£è®¾è®¡é—®é¢˜\n\n\n### æ’ç”Ÿ\n\n3.31 ç¬”è¯•ï¼ˆæ— éš¾åº¦ï¼‰ â†’ 4.6 ä¸€é¢ â†’ 4.11 æŸ¥çœ‹ å·²ç»“æŸ â†’ 4.12 HR ç”µè¯\n\né—®çš„åä¸šåŠ¡ï¼Œè²Œä¼¼ä¸€é¢è¿‡äº†ï¼Œæ‹¿äº†å­—èŠ‚ offer å°±æ‹’äº†ã€‚\n\n## å·²ç¬”è¯•\n\n* 360 3.19 ç¬”è¯•ï¼ˆ1.9 / 2ï¼‰ \n\n* è´å£³ 3.21 ç¬”è¯•ï¼ˆ1.6 / 3ï¼‰\n\n* ç½‘æ˜“é›·ç« 3.26 ç¬”è¯•ï¼ˆ1.5 / 2ï¼‰\n\n* ç½‘æ˜“äº’è”ç½‘ 3.27 ç¬”è¯•ï¼ˆAKï¼‰ â†’ 4.2 æŸ¥çœ‹ ç¬”è¯•æœªé€šè¿‡ï¼ˆä»Šå¹´è²Œä¼¼å¾ˆå¤šAKçš„åŒå­¦è¢«ç¬”è¯•æŒ‚çš„ï¼ŒæŒºè¿·ï¼‰\n\n* ä¾¿åˆ©èœ‚ 3.31 ç¬”è¯•ï¼ˆæƒ¨ï¼‰\n\n* äº¬ä¸œ 4.2 ç¬”è¯•ï¼ˆ0.7 / 2ï¼‰\n\n* ç™¾åº¦ 4.12 ç¬”è¯• ç»ˆæ­¢æµç¨‹\n\n## å·²æŠ•é€’ç®€å†æŒ‚\n\nOPPOã€ç½‘æ˜“äº’å¨±\n\n## å·²æŠ•é€’æ— åç»­\n\né¡ºä¸°ã€58åŒåŸã€è”æƒ³ã€è¶‹åŠ¿ç§‘æŠ€\n","source":"_posts/2022å®ä¹ æ€»ç»“.md","raw":"---\ntitle: 2022å®ä¹ æ€»ç»“\ndate: 2022-12-12 10:40:27\ncategories: \n  - å®ä¹ ç§‹æ‹›\n  - å®ä¹ \ntags: \nurlname: 2022-internship-summary\ndescription: \ncopyright: true\nmathjax: true\n---\n\n> å†™åœ¨å‰é¢ï¼šä½œä¸ºä¸€åç¡•è½¬ç çš„é€‰æ‰‹ï¼Œä»Šå¹´æš‘æœŸå®ä¹ è²Œä¼¼åˆæ ¼å¤–çš„éš¾ï¼Œèº«è¾¹çš„æœ‹å‹ã€è„‰è„‰ã€ç‰›å®¢ä¸Šçš„åŒå­¦éƒ½è¡¨ç¤ºä»Šå¹´å¤§ç¯å¢ƒå¾ˆå·®ï¼Œå®ä¹ å¾ˆéš¾æ‰¾ã€‚å„ä¸ªå¤§å‚ä»è£å‘˜ï¼Œ\"æ¯•ä¸šå­£\"ï¼Œåˆ°é” hcã€åœæ­¢æµç¨‹ã€ç”šè‡³ä¸»åŠ¨æ¯çº¦å·²ç­¾çš„ offerï¼Œæ— ä¸è¡¨ç°å‡ºä»Šå¹´å¤§ç¯å¢ƒæœ‰å¤šå·®ã€‚ä»¥ä¸‹æ˜¯æœ¬äººäºŒæœˆåº•ä»¥æ¥æ‰¾åç«¯å¼€å‘å²—çš„æš‘æœŸå®ä¹ å¯¹å„ä¸ªå…¬å¸é¢è¯•æµç¨‹ä¸€ä¸ªå¤§æ¦‚çš„å›é¡¾å’Œæ€»ç»“ã€‚\n\n<!-- more -->\n\n## å·²é¢è¯•\n\n### å¾®è½¯\n\n3.7 ä¸€é¢ â†’  3.10 ï¼ˆä¸€äºŒé¢å¹³è¡Œé¢ï¼Œä¸€é¢è¿‡ç›´è¾¾ç»ˆé¢ï¼‰ â†’ 3.16 æŒ‚ \n\n* å¾®è½¯å¾ˆçœ‹é‡ç®—æ³•ï¼Œå…¨ç¨‹æ— å…«è‚¡ï¼Œåšé¢˜æ—¶æ²¡æœ‰æ€è·¯å¯ä»¥å’Œé¢è¯•å®˜æ²Ÿé€šï¼Œä¸è¦è‡ªå·±ä¸€ä¸ªäººç¡¬æƒ³ï¼Œå¾®è½¯å¾ˆçœ‹é‡æ²Ÿé€šèƒ½åŠ›ã€‚\n* å°½é‡æ—©æŠ•ï¼Œå¾®è½¯ä»Šå¹´æš‘æœŸå®ä¹ æå‰æ‰¹å·®ä¸å¤šå»å¹´ 12 æœˆå°±å¼€å§‹äº†ï¼Œèº«è¾¹æœ‰æœ‹å‹æå‰æ‰¹è¿›çš„ï¼Œç›¸è¾ƒäºæ­£å¼æ‰¹è€Œè¨€éš¾åº¦æ„Ÿè§‰ä¹Ÿæ²¡æœ‰æ›´å¤§ï¼Œè€Œä¸”å…¶å®åˆ°äº†æ­£å¼æ‰¹å‰©ä½™çš„ hc å°±ä¸å¤šäº†ã€‚æœ‰æœ‹å‹æŠ•ç®€å†æœ‰ç‚¹æ™šè¿é¢è¯•éƒ½æ²¡æœ‰å®‰æ’åˆ°ã€‚\n\n### ç¾å›¢\n\n3.12 ç¬”è¯•ï¼ˆ3.18 / 5ï¼‰ â†’  3.18 ä¸€é¢ â†’  3.18 æŒ‚\n\né¢è¯•ä½“éªŒå¾ˆä¸å¥½ï¼ˆå½“ç„¶è‡ªå·±é¢çš„ä¹Ÿä¸å¥½ï¼‰ï¼Œåç»­è„‰è„‰ç‰›å®¢ä¸Šçœ‹åˆ°è¿™ä¸ªéƒ¨é—¨è²Œä¼¼ä¸€é¢æŒ‚äº†ä¸å°‘äººä¸ä¹é¡¶çº§ 985ã€‚\n\n### å­—èŠ‚\n\n3.22 ä¸€é¢ â†’  3.23 äºŒé¢ â†’  3.29 ä¸‰é¢ â†’  4.2 offerå®¡æ‰¹ â†’  4.11 offeré‚®ä»¶\n\n* å­—èŠ‚æ¯”è¾ƒçœ‹é‡åŸºç¡€å’Œç®—æ³•ï¼Œé¢˜è‡³å°‘è¦æœ‰æ€è·¯å’Œé¢è¯•å®˜æ²Ÿé€šï¼Œæœ€å¥½åšå‡ºæ¥ã€‚\n* æµç¨‹å¾ˆå¿«ï¼Œä¸€é¢äºŒé¢éƒ½æ˜¯å½“å¤©æ™šä¸Šç›´æ¥é€šçŸ¥é€šè¿‡ï¼Œä¸‰é¢è¿‡åå¥½å‡ å¤©ç­‰åˆ° HR ç”µè¯ï¼Œç„¶å offer å®¡æ‰¹è·¨äº†æ¸…æ˜èŠ‚ï¼Œç„¶ååˆè¿‡äº†ä¸€ä¸ªå‘¨æœ«ï¼Œè›®ç—›è‹¦çš„ã€‚\n* ç»¼åˆè€Œè¨€ï¼Œå­—èŠ‚çš„é¢è¯•ä½“éªŒå¾ˆå¥½ï¼Œé¢è¯•å®˜ä¼šå¼•å¯¼ä½ å»è¯´ï¼ŒåŒ…æ‹¬ä¸€äº›å…«è‚¡ã€åœºæ™¯é¢˜ã€‚\n\n### æºç¨‹\n\n3.24 ç¬”è¯•ï¼ˆ2.7 / 4ï¼‰ â†’  3.31 ä¸€é¢ â†’  4.13 çº¦äº†äºŒé¢ï¼ˆèººå¹³ä¸é¢äº†ï¼‰\n\næºç¨‹ä¸€é¢é—®çš„æ¯”è¾ƒåŸºç¡€ï¼Œç®—æ³•ä¹Ÿæ¯”è¾ƒç®€å•ã€‚\n\n### é˜¿é‡Œ\n\n3.24 åˆé¢ â†’  3.25 ç¬”è¯•ï¼ˆæƒ¨ï¼‰ â†’  4.7 äºŒé¢ â†’  4.11 è¡¥ç¬”è¯•\n\né˜¿é‡Œä¸€é¢çœ‹åŸºç¡€ï¼ŒäºŒé¢çœ‹é¡¹ç›®ï¼Œé¡¹ç›®ä¸å¤ªç†Ÿæ‚‰äº†ï¼Œè¢«æ‹·æ‰“çƒ‚äº†ã€‚\næ›´æ–°ï¼š4.11 æ™šä¸Šä¸´æ—¶çº¦åšé¢˜ï¼Œä¸¤é“ï¼Œä¸€é“å¤šçº¿ç¨‹æ‰“å°æ•°æ®é—®é¢˜ã€ä¸€é“é«˜å¹¶å‘è½¬è´¦æ¥å£è®¾è®¡é—®é¢˜\n\n\n### æ’ç”Ÿ\n\n3.31 ç¬”è¯•ï¼ˆæ— éš¾åº¦ï¼‰ â†’ 4.6 ä¸€é¢ â†’ 4.11 æŸ¥çœ‹ å·²ç»“æŸ â†’ 4.12 HR ç”µè¯\n\né—®çš„åä¸šåŠ¡ï¼Œè²Œä¼¼ä¸€é¢è¿‡äº†ï¼Œæ‹¿äº†å­—èŠ‚ offer å°±æ‹’äº†ã€‚\n\n## å·²ç¬”è¯•\n\n* 360 3.19 ç¬”è¯•ï¼ˆ1.9 / 2ï¼‰ \n\n* è´å£³ 3.21 ç¬”è¯•ï¼ˆ1.6 / 3ï¼‰\n\n* ç½‘æ˜“é›·ç« 3.26 ç¬”è¯•ï¼ˆ1.5 / 2ï¼‰\n\n* ç½‘æ˜“äº’è”ç½‘ 3.27 ç¬”è¯•ï¼ˆAKï¼‰ â†’ 4.2 æŸ¥çœ‹ ç¬”è¯•æœªé€šè¿‡ï¼ˆä»Šå¹´è²Œä¼¼å¾ˆå¤šAKçš„åŒå­¦è¢«ç¬”è¯•æŒ‚çš„ï¼ŒæŒºè¿·ï¼‰\n\n* ä¾¿åˆ©èœ‚ 3.31 ç¬”è¯•ï¼ˆæƒ¨ï¼‰\n\n* äº¬ä¸œ 4.2 ç¬”è¯•ï¼ˆ0.7 / 2ï¼‰\n\n* ç™¾åº¦ 4.12 ç¬”è¯• ç»ˆæ­¢æµç¨‹\n\n## å·²æŠ•é€’ç®€å†æŒ‚\n\nOPPOã€ç½‘æ˜“äº’å¨±\n\n## å·²æŠ•é€’æ— åç»­\n\né¡ºä¸°ã€58åŒåŸã€è”æƒ³ã€è¶‹åŠ¿ç§‘æŠ€\n","slug":"2022å®ä¹ æ€»ç»“","published":1,"updated":"2023-01-17T01:31:36.271Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cld8kfsin0003zvt85kb1cvmo","content":"<blockquote>\n<p>å†™åœ¨å‰é¢ï¼šä½œä¸ºä¸€åç¡•è½¬ç çš„é€‰æ‰‹ï¼Œä»Šå¹´æš‘æœŸå®ä¹ è²Œä¼¼åˆæ ¼å¤–çš„éš¾ï¼Œèº«è¾¹çš„æœ‹å‹ã€è„‰è„‰ã€ç‰›å®¢ä¸Šçš„åŒå­¦éƒ½è¡¨ç¤ºä»Šå¹´å¤§ç¯å¢ƒå¾ˆå·®ï¼Œå®ä¹ å¾ˆéš¾æ‰¾ã€‚å„ä¸ªå¤§å‚ä»è£å‘˜ï¼Œâ€æ¯•ä¸šå­£â€ï¼Œåˆ°é” hcã€åœæ­¢æµç¨‹ã€ç”šè‡³ä¸»åŠ¨æ¯çº¦å·²ç­¾çš„ offerï¼Œæ— ä¸è¡¨ç°å‡ºä»Šå¹´å¤§ç¯å¢ƒæœ‰å¤šå·®ã€‚ä»¥ä¸‹æ˜¯æœ¬äººäºŒæœˆåº•ä»¥æ¥æ‰¾åç«¯å¼€å‘å²—çš„æš‘æœŸå®ä¹ å¯¹å„ä¸ªå…¬å¸é¢è¯•æµç¨‹ä¸€ä¸ªå¤§æ¦‚çš„å›é¡¾å’Œæ€»ç»“ã€‚</p>\n</blockquote>\n<span id=\"more\"></span>\n\n<h2 id=\"å·²é¢è¯•\"><a href=\"#å·²é¢è¯•\" class=\"headerlink\" title=\"å·²é¢è¯•\"></a>å·²é¢è¯•</h2><h3 id=\"å¾®è½¯\"><a href=\"#å¾®è½¯\" class=\"headerlink\" title=\"å¾®è½¯\"></a>å¾®è½¯</h3><p>3.7 ä¸€é¢ â†’  3.10 ï¼ˆä¸€äºŒé¢å¹³è¡Œé¢ï¼Œä¸€é¢è¿‡ç›´è¾¾ç»ˆé¢ï¼‰ â†’ 3.16 æŒ‚ </p>\n<ul>\n<li>å¾®è½¯å¾ˆçœ‹é‡ç®—æ³•ï¼Œå…¨ç¨‹æ— å…«è‚¡ï¼Œåšé¢˜æ—¶æ²¡æœ‰æ€è·¯å¯ä»¥å’Œé¢è¯•å®˜æ²Ÿé€šï¼Œä¸è¦è‡ªå·±ä¸€ä¸ªäººç¡¬æƒ³ï¼Œå¾®è½¯å¾ˆçœ‹é‡æ²Ÿé€šèƒ½åŠ›ã€‚</li>\n<li>å°½é‡æ—©æŠ•ï¼Œå¾®è½¯ä»Šå¹´æš‘æœŸå®ä¹ æå‰æ‰¹å·®ä¸å¤šå»å¹´ 12 æœˆå°±å¼€å§‹äº†ï¼Œèº«è¾¹æœ‰æœ‹å‹æå‰æ‰¹è¿›çš„ï¼Œç›¸è¾ƒäºæ­£å¼æ‰¹è€Œè¨€éš¾åº¦æ„Ÿè§‰ä¹Ÿæ²¡æœ‰æ›´å¤§ï¼Œè€Œä¸”å…¶å®åˆ°äº†æ­£å¼æ‰¹å‰©ä½™çš„ hc å°±ä¸å¤šäº†ã€‚æœ‰æœ‹å‹æŠ•ç®€å†æœ‰ç‚¹æ™šè¿é¢è¯•éƒ½æ²¡æœ‰å®‰æ’åˆ°ã€‚</li>\n</ul>\n<h3 id=\"ç¾å›¢\"><a href=\"#ç¾å›¢\" class=\"headerlink\" title=\"ç¾å›¢\"></a>ç¾å›¢</h3><p>3.12 ç¬”è¯•ï¼ˆ3.18 / 5ï¼‰ â†’  3.18 ä¸€é¢ â†’  3.18 æŒ‚</p>\n<p>é¢è¯•ä½“éªŒå¾ˆä¸å¥½ï¼ˆå½“ç„¶è‡ªå·±é¢çš„ä¹Ÿä¸å¥½ï¼‰ï¼Œåç»­è„‰è„‰ç‰›å®¢ä¸Šçœ‹åˆ°è¿™ä¸ªéƒ¨é—¨è²Œä¼¼ä¸€é¢æŒ‚äº†ä¸å°‘äººä¸ä¹é¡¶çº§ 985ã€‚</p>\n<h3 id=\"å­—èŠ‚\"><a href=\"#å­—èŠ‚\" class=\"headerlink\" title=\"å­—èŠ‚\"></a>å­—èŠ‚</h3><p>3.22 ä¸€é¢ â†’  3.23 äºŒé¢ â†’  3.29 ä¸‰é¢ â†’  4.2 offerå®¡æ‰¹ â†’  4.11 offeré‚®ä»¶</p>\n<ul>\n<li>å­—èŠ‚æ¯”è¾ƒçœ‹é‡åŸºç¡€å’Œç®—æ³•ï¼Œé¢˜è‡³å°‘è¦æœ‰æ€è·¯å’Œé¢è¯•å®˜æ²Ÿé€šï¼Œæœ€å¥½åšå‡ºæ¥ã€‚</li>\n<li>æµç¨‹å¾ˆå¿«ï¼Œä¸€é¢äºŒé¢éƒ½æ˜¯å½“å¤©æ™šä¸Šç›´æ¥é€šçŸ¥é€šè¿‡ï¼Œä¸‰é¢è¿‡åå¥½å‡ å¤©ç­‰åˆ° HR ç”µè¯ï¼Œç„¶å offer å®¡æ‰¹è·¨äº†æ¸…æ˜èŠ‚ï¼Œç„¶ååˆè¿‡äº†ä¸€ä¸ªå‘¨æœ«ï¼Œè›®ç—›è‹¦çš„ã€‚</li>\n<li>ç»¼åˆè€Œè¨€ï¼Œå­—èŠ‚çš„é¢è¯•ä½“éªŒå¾ˆå¥½ï¼Œé¢è¯•å®˜ä¼šå¼•å¯¼ä½ å»è¯´ï¼ŒåŒ…æ‹¬ä¸€äº›å…«è‚¡ã€åœºæ™¯é¢˜ã€‚</li>\n</ul>\n<h3 id=\"æºç¨‹\"><a href=\"#æºç¨‹\" class=\"headerlink\" title=\"æºç¨‹\"></a>æºç¨‹</h3><p>3.24 ç¬”è¯•ï¼ˆ2.7 / 4ï¼‰ â†’  3.31 ä¸€é¢ â†’  4.13 çº¦äº†äºŒé¢ï¼ˆèººå¹³ä¸é¢äº†ï¼‰</p>\n<p>æºç¨‹ä¸€é¢é—®çš„æ¯”è¾ƒåŸºç¡€ï¼Œç®—æ³•ä¹Ÿæ¯”è¾ƒç®€å•ã€‚</p>\n<h3 id=\"é˜¿é‡Œ\"><a href=\"#é˜¿é‡Œ\" class=\"headerlink\" title=\"é˜¿é‡Œ\"></a>é˜¿é‡Œ</h3><p>3.24 åˆé¢ â†’  3.25 ç¬”è¯•ï¼ˆæƒ¨ï¼‰ â†’  4.7 äºŒé¢ â†’  4.11 è¡¥ç¬”è¯•</p>\n<p>é˜¿é‡Œä¸€é¢çœ‹åŸºç¡€ï¼ŒäºŒé¢çœ‹é¡¹ç›®ï¼Œé¡¹ç›®ä¸å¤ªç†Ÿæ‚‰äº†ï¼Œè¢«æ‹·æ‰“çƒ‚äº†ã€‚<br>æ›´æ–°ï¼š4.11 æ™šä¸Šä¸´æ—¶çº¦åšé¢˜ï¼Œä¸¤é“ï¼Œä¸€é“å¤šçº¿ç¨‹æ‰“å°æ•°æ®é—®é¢˜ã€ä¸€é“é«˜å¹¶å‘è½¬è´¦æ¥å£è®¾è®¡é—®é¢˜</p>\n<h3 id=\"æ’ç”Ÿ\"><a href=\"#æ’ç”Ÿ\" class=\"headerlink\" title=\"æ’ç”Ÿ\"></a>æ’ç”Ÿ</h3><p>3.31 ç¬”è¯•ï¼ˆæ— éš¾åº¦ï¼‰ â†’ 4.6 ä¸€é¢ â†’ 4.11 æŸ¥çœ‹ å·²ç»“æŸ â†’ 4.12 HR ç”µè¯</p>\n<p>é—®çš„åä¸šåŠ¡ï¼Œè²Œä¼¼ä¸€é¢è¿‡äº†ï¼Œæ‹¿äº†å­—èŠ‚ offer å°±æ‹’äº†ã€‚</p>\n<h2 id=\"å·²ç¬”è¯•\"><a href=\"#å·²ç¬”è¯•\" class=\"headerlink\" title=\"å·²ç¬”è¯•\"></a>å·²ç¬”è¯•</h2><ul>\n<li><p>360 3.19 ç¬”è¯•ï¼ˆ1.9 / 2ï¼‰ </p>\n</li>\n<li><p>è´å£³ 3.21 ç¬”è¯•ï¼ˆ1.6 / 3ï¼‰</p>\n</li>\n<li><p>ç½‘æ˜“é›·ç« 3.26 ç¬”è¯•ï¼ˆ1.5 / 2ï¼‰</p>\n</li>\n<li><p>ç½‘æ˜“äº’è”ç½‘ 3.27 ç¬”è¯•ï¼ˆAKï¼‰ â†’ 4.2 æŸ¥çœ‹ ç¬”è¯•æœªé€šè¿‡ï¼ˆä»Šå¹´è²Œä¼¼å¾ˆå¤šAKçš„åŒå­¦è¢«ç¬”è¯•æŒ‚çš„ï¼ŒæŒºè¿·ï¼‰</p>\n</li>\n<li><p>ä¾¿åˆ©èœ‚ 3.31 ç¬”è¯•ï¼ˆæƒ¨ï¼‰</p>\n</li>\n<li><p>äº¬ä¸œ 4.2 ç¬”è¯•ï¼ˆ0.7 / 2ï¼‰</p>\n</li>\n<li><p>ç™¾åº¦ 4.12 ç¬”è¯• ç»ˆæ­¢æµç¨‹</p>\n</li>\n</ul>\n<h2 id=\"å·²æŠ•é€’ç®€å†æŒ‚\"><a href=\"#å·²æŠ•é€’ç®€å†æŒ‚\" class=\"headerlink\" title=\"å·²æŠ•é€’ç®€å†æŒ‚\"></a>å·²æŠ•é€’ç®€å†æŒ‚</h2><p>OPPOã€ç½‘æ˜“äº’å¨±</p>\n<h2 id=\"å·²æŠ•é€’æ— åç»­\"><a href=\"#å·²æŠ•é€’æ— åç»­\" class=\"headerlink\" title=\"å·²æŠ•é€’æ— åç»­\"></a>å·²æŠ•é€’æ— åç»­</h2><p>é¡ºä¸°ã€58åŒåŸã€è”æƒ³ã€è¶‹åŠ¿ç§‘æŠ€</p>\n","site":{"data":{}},"length":1022,"excerpt":"<blockquote>\n<p>å†™åœ¨å‰é¢ï¼šä½œä¸ºä¸€åç¡•è½¬ç çš„é€‰æ‰‹ï¼Œä»Šå¹´æš‘æœŸå®ä¹ è²Œä¼¼åˆæ ¼å¤–çš„éš¾ï¼Œèº«è¾¹çš„æœ‹å‹ã€è„‰è„‰ã€ç‰›å®¢ä¸Šçš„åŒå­¦éƒ½è¡¨ç¤ºä»Šå¹´å¤§ç¯å¢ƒå¾ˆå·®ï¼Œå®ä¹ å¾ˆéš¾æ‰¾ã€‚å„ä¸ªå¤§å‚ä»è£å‘˜ï¼Œâ€æ¯•ä¸šå­£â€ï¼Œåˆ°é” hcã€åœæ­¢æµç¨‹ã€ç”šè‡³ä¸»åŠ¨æ¯çº¦å·²ç­¾çš„ offerï¼Œæ— ä¸è¡¨ç°å‡ºä»Šå¹´å¤§ç¯å¢ƒæœ‰å¤šå·®ã€‚ä»¥ä¸‹æ˜¯æœ¬äººäºŒæœˆåº•ä»¥æ¥æ‰¾åç«¯å¼€å‘å²—çš„æš‘æœŸå®ä¹ å¯¹å„ä¸ªå…¬å¸é¢è¯•æµç¨‹ä¸€ä¸ªå¤§æ¦‚çš„å›é¡¾å’Œæ€»ç»“ã€‚</p>\n</blockquote>","more":"<h2 id=\"å·²é¢è¯•\"><a href=\"#å·²é¢è¯•\" class=\"headerlink\" title=\"å·²é¢è¯•\"></a>å·²é¢è¯•</h2><h3 id=\"å¾®è½¯\"><a href=\"#å¾®è½¯\" class=\"headerlink\" title=\"å¾®è½¯\"></a>å¾®è½¯</h3><p>3.7 ä¸€é¢ â†’  3.10 ï¼ˆä¸€äºŒé¢å¹³è¡Œé¢ï¼Œä¸€é¢è¿‡ç›´è¾¾ç»ˆé¢ï¼‰ â†’ 3.16 æŒ‚ </p>\n<ul>\n<li>å¾®è½¯å¾ˆçœ‹é‡ç®—æ³•ï¼Œå…¨ç¨‹æ— å…«è‚¡ï¼Œåšé¢˜æ—¶æ²¡æœ‰æ€è·¯å¯ä»¥å’Œé¢è¯•å®˜æ²Ÿé€šï¼Œä¸è¦è‡ªå·±ä¸€ä¸ªäººç¡¬æƒ³ï¼Œå¾®è½¯å¾ˆçœ‹é‡æ²Ÿé€šèƒ½åŠ›ã€‚</li>\n<li>å°½é‡æ—©æŠ•ï¼Œå¾®è½¯ä»Šå¹´æš‘æœŸå®ä¹ æå‰æ‰¹å·®ä¸å¤šå»å¹´ 12 æœˆå°±å¼€å§‹äº†ï¼Œèº«è¾¹æœ‰æœ‹å‹æå‰æ‰¹è¿›çš„ï¼Œç›¸è¾ƒäºæ­£å¼æ‰¹è€Œè¨€éš¾åº¦æ„Ÿè§‰ä¹Ÿæ²¡æœ‰æ›´å¤§ï¼Œè€Œä¸”å…¶å®åˆ°äº†æ­£å¼æ‰¹å‰©ä½™çš„ hc å°±ä¸å¤šäº†ã€‚æœ‰æœ‹å‹æŠ•ç®€å†æœ‰ç‚¹æ™šè¿é¢è¯•éƒ½æ²¡æœ‰å®‰æ’åˆ°ã€‚</li>\n</ul>\n<h3 id=\"ç¾å›¢\"><a href=\"#ç¾å›¢\" class=\"headerlink\" title=\"ç¾å›¢\"></a>ç¾å›¢</h3><p>3.12 ç¬”è¯•ï¼ˆ3.18 / 5ï¼‰ â†’  3.18 ä¸€é¢ â†’  3.18 æŒ‚</p>\n<p>é¢è¯•ä½“éªŒå¾ˆä¸å¥½ï¼ˆå½“ç„¶è‡ªå·±é¢çš„ä¹Ÿä¸å¥½ï¼‰ï¼Œåç»­è„‰è„‰ç‰›å®¢ä¸Šçœ‹åˆ°è¿™ä¸ªéƒ¨é—¨è²Œä¼¼ä¸€é¢æŒ‚äº†ä¸å°‘äººä¸ä¹é¡¶çº§ 985ã€‚</p>\n<h3 id=\"å­—èŠ‚\"><a href=\"#å­—èŠ‚\" class=\"headerlink\" title=\"å­—èŠ‚\"></a>å­—èŠ‚</h3><p>3.22 ä¸€é¢ â†’  3.23 äºŒé¢ â†’  3.29 ä¸‰é¢ â†’  4.2 offerå®¡æ‰¹ â†’  4.11 offeré‚®ä»¶</p>\n<ul>\n<li>å­—èŠ‚æ¯”è¾ƒçœ‹é‡åŸºç¡€å’Œç®—æ³•ï¼Œé¢˜è‡³å°‘è¦æœ‰æ€è·¯å’Œé¢è¯•å®˜æ²Ÿé€šï¼Œæœ€å¥½åšå‡ºæ¥ã€‚</li>\n<li>æµç¨‹å¾ˆå¿«ï¼Œä¸€é¢äºŒé¢éƒ½æ˜¯å½“å¤©æ™šä¸Šç›´æ¥é€šçŸ¥é€šè¿‡ï¼Œä¸‰é¢è¿‡åå¥½å‡ å¤©ç­‰åˆ° HR ç”µè¯ï¼Œç„¶å offer å®¡æ‰¹è·¨äº†æ¸…æ˜èŠ‚ï¼Œç„¶ååˆè¿‡äº†ä¸€ä¸ªå‘¨æœ«ï¼Œè›®ç—›è‹¦çš„ã€‚</li>\n<li>ç»¼åˆè€Œè¨€ï¼Œå­—èŠ‚çš„é¢è¯•ä½“éªŒå¾ˆå¥½ï¼Œé¢è¯•å®˜ä¼šå¼•å¯¼ä½ å»è¯´ï¼ŒåŒ…æ‹¬ä¸€äº›å…«è‚¡ã€åœºæ™¯é¢˜ã€‚</li>\n</ul>\n<h3 id=\"æºç¨‹\"><a href=\"#æºç¨‹\" class=\"headerlink\" title=\"æºç¨‹\"></a>æºç¨‹</h3><p>3.24 ç¬”è¯•ï¼ˆ2.7 / 4ï¼‰ â†’  3.31 ä¸€é¢ â†’  4.13 çº¦äº†äºŒé¢ï¼ˆèººå¹³ä¸é¢äº†ï¼‰</p>\n<p>æºç¨‹ä¸€é¢é—®çš„æ¯”è¾ƒåŸºç¡€ï¼Œç®—æ³•ä¹Ÿæ¯”è¾ƒç®€å•ã€‚</p>\n<h3 id=\"é˜¿é‡Œ\"><a href=\"#é˜¿é‡Œ\" class=\"headerlink\" title=\"é˜¿é‡Œ\"></a>é˜¿é‡Œ</h3><p>3.24 åˆé¢ â†’  3.25 ç¬”è¯•ï¼ˆæƒ¨ï¼‰ â†’  4.7 äºŒé¢ â†’  4.11 è¡¥ç¬”è¯•</p>\n<p>é˜¿é‡Œä¸€é¢çœ‹åŸºç¡€ï¼ŒäºŒé¢çœ‹é¡¹ç›®ï¼Œé¡¹ç›®ä¸å¤ªç†Ÿæ‚‰äº†ï¼Œè¢«æ‹·æ‰“çƒ‚äº†ã€‚<br>æ›´æ–°ï¼š4.11 æ™šä¸Šä¸´æ—¶çº¦åšé¢˜ï¼Œä¸¤é“ï¼Œä¸€é“å¤šçº¿ç¨‹æ‰“å°æ•°æ®é—®é¢˜ã€ä¸€é“é«˜å¹¶å‘è½¬è´¦æ¥å£è®¾è®¡é—®é¢˜</p>\n<h3 id=\"æ’ç”Ÿ\"><a href=\"#æ’ç”Ÿ\" class=\"headerlink\" title=\"æ’ç”Ÿ\"></a>æ’ç”Ÿ</h3><p>3.31 ç¬”è¯•ï¼ˆæ— éš¾åº¦ï¼‰ â†’ 4.6 ä¸€é¢ â†’ 4.11 æŸ¥çœ‹ å·²ç»“æŸ â†’ 4.12 HR ç”µè¯</p>\n<p>é—®çš„åä¸šåŠ¡ï¼Œè²Œä¼¼ä¸€é¢è¿‡äº†ï¼Œæ‹¿äº†å­—èŠ‚ offer å°±æ‹’äº†ã€‚</p>\n<h2 id=\"å·²ç¬”è¯•\"><a href=\"#å·²ç¬”è¯•\" class=\"headerlink\" title=\"å·²ç¬”è¯•\"></a>å·²ç¬”è¯•</h2><ul>\n<li><p>360 3.19 ç¬”è¯•ï¼ˆ1.9 / 2ï¼‰ </p>\n</li>\n<li><p>è´å£³ 3.21 ç¬”è¯•ï¼ˆ1.6 / 3ï¼‰</p>\n</li>\n<li><p>ç½‘æ˜“é›·ç« 3.26 ç¬”è¯•ï¼ˆ1.5 / 2ï¼‰</p>\n</li>\n<li><p>ç½‘æ˜“äº’è”ç½‘ 3.27 ç¬”è¯•ï¼ˆAKï¼‰ â†’ 4.2 æŸ¥çœ‹ ç¬”è¯•æœªé€šè¿‡ï¼ˆä»Šå¹´è²Œä¼¼å¾ˆå¤šAKçš„åŒå­¦è¢«ç¬”è¯•æŒ‚çš„ï¼ŒæŒºè¿·ï¼‰</p>\n</li>\n<li><p>ä¾¿åˆ©èœ‚ 3.31 ç¬”è¯•ï¼ˆæƒ¨ï¼‰</p>\n</li>\n<li><p>äº¬ä¸œ 4.2 ç¬”è¯•ï¼ˆ0.7 / 2ï¼‰</p>\n</li>\n<li><p>ç™¾åº¦ 4.12 ç¬”è¯• ç»ˆæ­¢æµç¨‹</p>\n</li>\n</ul>\n<h2 id=\"å·²æŠ•é€’ç®€å†æŒ‚\"><a href=\"#å·²æŠ•é€’ç®€å†æŒ‚\" class=\"headerlink\" title=\"å·²æŠ•é€’ç®€å†æŒ‚\"></a>å·²æŠ•é€’ç®€å†æŒ‚</h2><p>OPPOã€ç½‘æ˜“äº’å¨±</p>\n<h2 id=\"å·²æŠ•é€’æ— åç»­\"><a href=\"#å·²æŠ•é€’æ— åç»­\" class=\"headerlink\" title=\"å·²æŠ•é€’æ— åç»­\"></a>å·²æŠ•é€’æ— åç»­</h2><p>é¡ºä¸°ã€58åŒåŸã€è”æƒ³ã€è¶‹åŠ¿ç§‘æŠ€</p>"},{"title":"2022ç§‹æ‹›æ€»ç»“","date":"2022-12-12T03:57:22.000Z","urlname":"2022-autumn-recruitment-summary","copyright":true,"mathjax":true,"_content":"\n19å¹´ä¹˜ç€äººè§äººå¹çš„è®¡ç®—æœºå¤§çƒ­ï¼Œè·¨è€ƒè®¡ç®—æœºä¸€ç«™æœªæœï¼ŒäºŒæˆ˜ä¸Šå²¸æœ¬æ ¡è®¡ç®—æœºã€‚\n\nç ”äºŒæš‘æœŸç•™æ ¡ç§‘ç ”ï¼Œå¾ˆå¹¸è¿åšå‡ºæ¥ä¸¤ç¯‡æ–‡ç« ï¼Œæ¥ä¸‹æ¥å¯ä»¥å»å®ä¹ äº†ã€‚\n\nä»12æœˆåˆ°2æœˆï¼Œæ–­æ–­ç»­ç»­å¤ä¹ Javaåç«¯å¼€å‘æ‰€éœ€çš„çŸ¥è¯†ã€‚\n\nä»2æœˆåº•æ‰¾å®ä¹ ï¼Œ4æœˆåº•å…¥èŒå­—èŠ‚è·³åŠ¨ï¼Œ8æœˆåº•ç¦»èŒè¿”æ ¡ï¼Œç›´åˆ°11æœˆåº•ï¼ˆ11.27ï¼‰æ­£å¼ç­¾è®¢ä¸‰æ–¹ï¼Œè¿‡ç¨‹åå·ï¼Œå†…å¿ƒæƒ†æ€…ã€‚\n\nç§‹æ‹›æŠ•äº†çº¦50å®¶å…¬å¸ï¼Œéƒ½æ˜¯Javaåç«¯ï¼Œä¸»è¦æœ‰ä»¥ä¸‹ï¼š\n\n<!--more-->\n\nèš‚èšï¼ŒäºŒé¢æŒ‚\n\nä¸­ç§»è‹ç ”ï¼Œç¬¬äºŒæ‰¹æ¬¡ï¼Œé¢è¯•èµ°å®Œï¼Œæ²¡æœ‰æ”¶åˆ°ä½“æ£€\n\næµ™å•†é“¶è¡Œï¼Œé¢è¯•èµ°å®Œï¼Œæ²¡æœ‰ææ–™å®¡æ ¸\n\nå±±çŸ³ç½‘ç§‘ï¼Œhré¢æŒ‚\n\nè£è€€ï¼Œé¢è¯•èµ°å®Œï¼Œå£å¤´è°ˆè–ª\n\nä¸Šæµ·é“¶è¡Œï¼Œæ€»è¡Œè‹å·baseï¼Œæ”¶åˆ°offer\n\nè‹å·å†œè¡Œï¼Œæ”¶åˆ°ä½“æ£€\n\nå­—èŠ‚è·³åŠ¨ï¼Œè½¬æ­£offerï¼Œsp\n\næ€»ä½“è€Œè¨€ï¼Œä»Šå¹´å¼ºçš„äººè¿˜æ˜¯èƒ½æ‹¿åˆ°å¤šä¸ªå¤§å‚offerï¼Œä½†æ˜¯å¤§å‚é—¨æ§›æ¯”å¹´é«˜äº†å¾ˆå¤šã€‚åœ¨äº’è”ç½‘é¢“åŠ¿çš„ä»Šå¹´ï¼ŒèŠ¯ç‰‡ã€åµŒå…¥å¼æˆä¸ºé¦™é¥½é¥½ï¼Œè–ªèµ„é«˜ã€å‘å±•å¥½ï¼Œä¸å°‘äººç”šè‡³ç›´å‘¼èµ¶ç´§è½¬è¡Œï¼ˆæˆ‘æœ‰æœ‹å‹åœ¨é›¶åŸºç¡€æƒ…å†µä¸‹æ‹¿äº†äº”å…­å®¶åµŒå…¥å¼ä¸­å°å‚çš„offerï¼‰ã€‚\n\nå…³äºofferé€‰æ‹©ï¼Œæœ€ç»ˆæ˜¯è€ƒè™‘å­—èŠ‚è·³åŠ¨baseæ­å·ï¼Œè¿˜æœ‰ä¸€ä¸ªæ±Ÿè‹çœæŸåœ°çº§å¸‚top1é«˜ä¸­çš„ä¿¡æ¯æŠ€æœ¯è€å¸ˆï¼ˆè¿›ç¼–ï¼‰çš„offerã€‚åœ¨è€ƒè™‘å®¶åº­æƒ…å†µã€ä¸ªäººå·åº¦æ‰¿å—åº¦ã€ç¨³å®šæ€§ï¼Œæœ€ç»ˆé€‰æ‹©äº†åšä¸€åæ•™å¸ˆã€‚\n\næœªæ¥çš„å‘å±•ï¼Œå¤§æ¦‚ç‡å°±æ˜¯åšä¸€åæ™®é€šçš„ä¿¡æ¯æŠ€æœ¯æ•™å¸ˆï¼Œæœ‰å·çš„å¿ƒè¿˜æœ‰æœºä¼šå°è¯•åŠ å…¥å­¦æ ¡å¸¦ç«èµ›çš„é˜Ÿä¼ã€‚\n\nä¸ç®¡ä»€ä¹ˆofferé€‰æ‹©ï¼Œæœ‰å¾—å¿…å®šæœ‰å¤±ï¼Œåå…¨åç¾çš„å·¥ä½œå‡ ä¹æ²¡æœ‰ã€‚æ‰€ä»¥åœ¨è¿›è¡Œofferé€‰æ‹©æ—¶ï¼Œå¦‚æœæ²¡æœ‰æ˜ç¡®çš„çˆ±å¥½æƒ³åšçš„å·¥ä½œçš„è¯ï¼ˆæ¯”å¦‚æˆ‘ï¼‰ï¼Œé‚£å°±å¥½å¥½ç»¼åˆè€ƒè™‘ä»¥ä¸Šå‡ ç‚¹è¿›è¡Œåˆ¤æ–­å¾—å‡ºé€‰æ‹©äº†ã€‚\n\nåšå‡ºé€‰æ‹©å°±å¥½å¥½å†²å§ï¼Œæœªæ¥å¯æœŸã€‚å¤§å®¶éƒ½æœ‰å…‰æ˜çš„æœªæ¥ï¼\n","source":"_posts/2022ç§‹æ‹›æ€»ç»“.md","raw":"---\ntitle: 2022ç§‹æ‹›æ€»ç»“\ndate: 2022-12-12 11:57:22\ncategories: \n  - å®ä¹ ç§‹æ‹›\n  - ç§‹æ‹›\ntags: \nurlname: 2022-autumn-recruitment-summary\ncopyright: true\nmathjax: true\n---\n\n19å¹´ä¹˜ç€äººè§äººå¹çš„è®¡ç®—æœºå¤§çƒ­ï¼Œè·¨è€ƒè®¡ç®—æœºä¸€ç«™æœªæœï¼ŒäºŒæˆ˜ä¸Šå²¸æœ¬æ ¡è®¡ç®—æœºã€‚\n\nç ”äºŒæš‘æœŸç•™æ ¡ç§‘ç ”ï¼Œå¾ˆå¹¸è¿åšå‡ºæ¥ä¸¤ç¯‡æ–‡ç« ï¼Œæ¥ä¸‹æ¥å¯ä»¥å»å®ä¹ äº†ã€‚\n\nä»12æœˆåˆ°2æœˆï¼Œæ–­æ–­ç»­ç»­å¤ä¹ Javaåç«¯å¼€å‘æ‰€éœ€çš„çŸ¥è¯†ã€‚\n\nä»2æœˆåº•æ‰¾å®ä¹ ï¼Œ4æœˆåº•å…¥èŒå­—èŠ‚è·³åŠ¨ï¼Œ8æœˆåº•ç¦»èŒè¿”æ ¡ï¼Œç›´åˆ°11æœˆåº•ï¼ˆ11.27ï¼‰æ­£å¼ç­¾è®¢ä¸‰æ–¹ï¼Œè¿‡ç¨‹åå·ï¼Œå†…å¿ƒæƒ†æ€…ã€‚\n\nç§‹æ‹›æŠ•äº†çº¦50å®¶å…¬å¸ï¼Œéƒ½æ˜¯Javaåç«¯ï¼Œä¸»è¦æœ‰ä»¥ä¸‹ï¼š\n\n<!--more-->\n\nèš‚èšï¼ŒäºŒé¢æŒ‚\n\nä¸­ç§»è‹ç ”ï¼Œç¬¬äºŒæ‰¹æ¬¡ï¼Œé¢è¯•èµ°å®Œï¼Œæ²¡æœ‰æ”¶åˆ°ä½“æ£€\n\næµ™å•†é“¶è¡Œï¼Œé¢è¯•èµ°å®Œï¼Œæ²¡æœ‰ææ–™å®¡æ ¸\n\nå±±çŸ³ç½‘ç§‘ï¼Œhré¢æŒ‚\n\nè£è€€ï¼Œé¢è¯•èµ°å®Œï¼Œå£å¤´è°ˆè–ª\n\nä¸Šæµ·é“¶è¡Œï¼Œæ€»è¡Œè‹å·baseï¼Œæ”¶åˆ°offer\n\nè‹å·å†œè¡Œï¼Œæ”¶åˆ°ä½“æ£€\n\nå­—èŠ‚è·³åŠ¨ï¼Œè½¬æ­£offerï¼Œsp\n\næ€»ä½“è€Œè¨€ï¼Œä»Šå¹´å¼ºçš„äººè¿˜æ˜¯èƒ½æ‹¿åˆ°å¤šä¸ªå¤§å‚offerï¼Œä½†æ˜¯å¤§å‚é—¨æ§›æ¯”å¹´é«˜äº†å¾ˆå¤šã€‚åœ¨äº’è”ç½‘é¢“åŠ¿çš„ä»Šå¹´ï¼ŒèŠ¯ç‰‡ã€åµŒå…¥å¼æˆä¸ºé¦™é¥½é¥½ï¼Œè–ªèµ„é«˜ã€å‘å±•å¥½ï¼Œä¸å°‘äººç”šè‡³ç›´å‘¼èµ¶ç´§è½¬è¡Œï¼ˆæˆ‘æœ‰æœ‹å‹åœ¨é›¶åŸºç¡€æƒ…å†µä¸‹æ‹¿äº†äº”å…­å®¶åµŒå…¥å¼ä¸­å°å‚çš„offerï¼‰ã€‚\n\nå…³äºofferé€‰æ‹©ï¼Œæœ€ç»ˆæ˜¯è€ƒè™‘å­—èŠ‚è·³åŠ¨baseæ­å·ï¼Œè¿˜æœ‰ä¸€ä¸ªæ±Ÿè‹çœæŸåœ°çº§å¸‚top1é«˜ä¸­çš„ä¿¡æ¯æŠ€æœ¯è€å¸ˆï¼ˆè¿›ç¼–ï¼‰çš„offerã€‚åœ¨è€ƒè™‘å®¶åº­æƒ…å†µã€ä¸ªäººå·åº¦æ‰¿å—åº¦ã€ç¨³å®šæ€§ï¼Œæœ€ç»ˆé€‰æ‹©äº†åšä¸€åæ•™å¸ˆã€‚\n\næœªæ¥çš„å‘å±•ï¼Œå¤§æ¦‚ç‡å°±æ˜¯åšä¸€åæ™®é€šçš„ä¿¡æ¯æŠ€æœ¯æ•™å¸ˆï¼Œæœ‰å·çš„å¿ƒè¿˜æœ‰æœºä¼šå°è¯•åŠ å…¥å­¦æ ¡å¸¦ç«èµ›çš„é˜Ÿä¼ã€‚\n\nä¸ç®¡ä»€ä¹ˆofferé€‰æ‹©ï¼Œæœ‰å¾—å¿…å®šæœ‰å¤±ï¼Œåå…¨åç¾çš„å·¥ä½œå‡ ä¹æ²¡æœ‰ã€‚æ‰€ä»¥åœ¨è¿›è¡Œofferé€‰æ‹©æ—¶ï¼Œå¦‚æœæ²¡æœ‰æ˜ç¡®çš„çˆ±å¥½æƒ³åšçš„å·¥ä½œçš„è¯ï¼ˆæ¯”å¦‚æˆ‘ï¼‰ï¼Œé‚£å°±å¥½å¥½ç»¼åˆè€ƒè™‘ä»¥ä¸Šå‡ ç‚¹è¿›è¡Œåˆ¤æ–­å¾—å‡ºé€‰æ‹©äº†ã€‚\n\nåšå‡ºé€‰æ‹©å°±å¥½å¥½å†²å§ï¼Œæœªæ¥å¯æœŸã€‚å¤§å®¶éƒ½æœ‰å…‰æ˜çš„æœªæ¥ï¼\n","slug":"2022ç§‹æ‹›æ€»ç»“","published":1,"updated":"2023-01-17T01:32:34.053Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cld8kfsiq0006zvt8eejq2hpk","content":"<p>19å¹´ä¹˜ç€äººè§äººå¹çš„è®¡ç®—æœºå¤§çƒ­ï¼Œè·¨è€ƒè®¡ç®—æœºä¸€ç«™æœªæœï¼ŒäºŒæˆ˜ä¸Šå²¸æœ¬æ ¡è®¡ç®—æœºã€‚</p>\n<p>ç ”äºŒæš‘æœŸç•™æ ¡ç§‘ç ”ï¼Œå¾ˆå¹¸è¿åšå‡ºæ¥ä¸¤ç¯‡æ–‡ç« ï¼Œæ¥ä¸‹æ¥å¯ä»¥å»å®ä¹ äº†ã€‚</p>\n<p>ä»12æœˆåˆ°2æœˆï¼Œæ–­æ–­ç»­ç»­å¤ä¹ Javaåç«¯å¼€å‘æ‰€éœ€çš„çŸ¥è¯†ã€‚</p>\n<p>ä»2æœˆåº•æ‰¾å®ä¹ ï¼Œ4æœˆåº•å…¥èŒå­—èŠ‚è·³åŠ¨ï¼Œ8æœˆåº•ç¦»èŒè¿”æ ¡ï¼Œç›´åˆ°11æœˆåº•ï¼ˆ11.27ï¼‰æ­£å¼ç­¾è®¢ä¸‰æ–¹ï¼Œè¿‡ç¨‹åå·ï¼Œå†…å¿ƒæƒ†æ€…ã€‚</p>\n<p>ç§‹æ‹›æŠ•äº†çº¦50å®¶å…¬å¸ï¼Œéƒ½æ˜¯Javaåç«¯ï¼Œä¸»è¦æœ‰ä»¥ä¸‹ï¼š</p>\n<span id=\"more\"></span>\n\n<p>èš‚èšï¼ŒäºŒé¢æŒ‚</p>\n<p>ä¸­ç§»è‹ç ”ï¼Œç¬¬äºŒæ‰¹æ¬¡ï¼Œé¢è¯•èµ°å®Œï¼Œæ²¡æœ‰æ”¶åˆ°ä½“æ£€</p>\n<p>æµ™å•†é“¶è¡Œï¼Œé¢è¯•èµ°å®Œï¼Œæ²¡æœ‰ææ–™å®¡æ ¸</p>\n<p>å±±çŸ³ç½‘ç§‘ï¼Œhré¢æŒ‚</p>\n<p>è£è€€ï¼Œé¢è¯•èµ°å®Œï¼Œå£å¤´è°ˆè–ª</p>\n<p>ä¸Šæµ·é“¶è¡Œï¼Œæ€»è¡Œè‹å·baseï¼Œæ”¶åˆ°offer</p>\n<p>è‹å·å†œè¡Œï¼Œæ”¶åˆ°ä½“æ£€</p>\n<p>å­—èŠ‚è·³åŠ¨ï¼Œè½¬æ­£offerï¼Œsp</p>\n<p>æ€»ä½“è€Œè¨€ï¼Œä»Šå¹´å¼ºçš„äººè¿˜æ˜¯èƒ½æ‹¿åˆ°å¤šä¸ªå¤§å‚offerï¼Œä½†æ˜¯å¤§å‚é—¨æ§›æ¯”å¹´é«˜äº†å¾ˆå¤šã€‚åœ¨äº’è”ç½‘é¢“åŠ¿çš„ä»Šå¹´ï¼ŒèŠ¯ç‰‡ã€åµŒå…¥å¼æˆä¸ºé¦™é¥½é¥½ï¼Œè–ªèµ„é«˜ã€å‘å±•å¥½ï¼Œä¸å°‘äººç”šè‡³ç›´å‘¼èµ¶ç´§è½¬è¡Œï¼ˆæˆ‘æœ‰æœ‹å‹åœ¨é›¶åŸºç¡€æƒ…å†µä¸‹æ‹¿äº†äº”å…­å®¶åµŒå…¥å¼ä¸­å°å‚çš„offerï¼‰ã€‚</p>\n<p>å…³äºofferé€‰æ‹©ï¼Œæœ€ç»ˆæ˜¯è€ƒè™‘å­—èŠ‚è·³åŠ¨baseæ­å·ï¼Œè¿˜æœ‰ä¸€ä¸ªæ±Ÿè‹çœæŸåœ°çº§å¸‚top1é«˜ä¸­çš„ä¿¡æ¯æŠ€æœ¯è€å¸ˆï¼ˆè¿›ç¼–ï¼‰çš„offerã€‚åœ¨è€ƒè™‘å®¶åº­æƒ…å†µã€ä¸ªäººå·åº¦æ‰¿å—åº¦ã€ç¨³å®šæ€§ï¼Œæœ€ç»ˆé€‰æ‹©äº†åšä¸€åæ•™å¸ˆã€‚</p>\n<p>æœªæ¥çš„å‘å±•ï¼Œå¤§æ¦‚ç‡å°±æ˜¯åšä¸€åæ™®é€šçš„ä¿¡æ¯æŠ€æœ¯æ•™å¸ˆï¼Œæœ‰å·çš„å¿ƒè¿˜æœ‰æœºä¼šå°è¯•åŠ å…¥å­¦æ ¡å¸¦ç«èµ›çš„é˜Ÿä¼ã€‚</p>\n<p>ä¸ç®¡ä»€ä¹ˆofferé€‰æ‹©ï¼Œæœ‰å¾—å¿…å®šæœ‰å¤±ï¼Œåå…¨åç¾çš„å·¥ä½œå‡ ä¹æ²¡æœ‰ã€‚æ‰€ä»¥åœ¨è¿›è¡Œofferé€‰æ‹©æ—¶ï¼Œå¦‚æœæ²¡æœ‰æ˜ç¡®çš„çˆ±å¥½æƒ³åšçš„å·¥ä½œçš„è¯ï¼ˆæ¯”å¦‚æˆ‘ï¼‰ï¼Œé‚£å°±å¥½å¥½ç»¼åˆè€ƒè™‘ä»¥ä¸Šå‡ ç‚¹è¿›è¡Œåˆ¤æ–­å¾—å‡ºé€‰æ‹©äº†ã€‚</p>\n<p>åšå‡ºé€‰æ‹©å°±å¥½å¥½å†²å§ï¼Œæœªæ¥å¯æœŸã€‚å¤§å®¶éƒ½æœ‰å…‰æ˜çš„æœªæ¥ï¼</p>\n","site":{"data":{}},"length":646,"excerpt":"<p>19å¹´ä¹˜ç€äººè§äººå¹çš„è®¡ç®—æœºå¤§çƒ­ï¼Œè·¨è€ƒè®¡ç®—æœºä¸€ç«™æœªæœï¼ŒäºŒæˆ˜ä¸Šå²¸æœ¬æ ¡è®¡ç®—æœºã€‚</p>\n<p>ç ”äºŒæš‘æœŸç•™æ ¡ç§‘ç ”ï¼Œå¾ˆå¹¸è¿åšå‡ºæ¥ä¸¤ç¯‡æ–‡ç« ï¼Œæ¥ä¸‹æ¥å¯ä»¥å»å®ä¹ äº†ã€‚</p>\n<p>ä»12æœˆåˆ°2æœˆï¼Œæ–­æ–­ç»­ç»­å¤ä¹ Javaåç«¯å¼€å‘æ‰€éœ€çš„çŸ¥è¯†ã€‚</p>\n<p>ä»2æœˆåº•æ‰¾å®ä¹ ï¼Œ4æœˆåº•å…¥èŒå­—èŠ‚è·³åŠ¨ï¼Œ8æœˆåº•ç¦»èŒè¿”æ ¡ï¼Œç›´åˆ°11æœˆåº•ï¼ˆ11.27ï¼‰æ­£å¼ç­¾è®¢ä¸‰æ–¹ï¼Œè¿‡ç¨‹åå·ï¼Œå†…å¿ƒæƒ†æ€…ã€‚</p>\n<p>ç§‹æ‹›æŠ•äº†çº¦50å®¶å…¬å¸ï¼Œéƒ½æ˜¯Javaåç«¯ï¼Œä¸»è¦æœ‰ä»¥ä¸‹ï¼š</p>","more":"<p>èš‚èšï¼ŒäºŒé¢æŒ‚</p>\n<p>ä¸­ç§»è‹ç ”ï¼Œç¬¬äºŒæ‰¹æ¬¡ï¼Œé¢è¯•èµ°å®Œï¼Œæ²¡æœ‰æ”¶åˆ°ä½“æ£€</p>\n<p>æµ™å•†é“¶è¡Œï¼Œé¢è¯•èµ°å®Œï¼Œæ²¡æœ‰ææ–™å®¡æ ¸</p>\n<p>å±±çŸ³ç½‘ç§‘ï¼Œhré¢æŒ‚</p>\n<p>è£è€€ï¼Œé¢è¯•èµ°å®Œï¼Œå£å¤´è°ˆè–ª</p>\n<p>ä¸Šæµ·é“¶è¡Œï¼Œæ€»è¡Œè‹å·baseï¼Œæ”¶åˆ°offer</p>\n<p>è‹å·å†œè¡Œï¼Œæ”¶åˆ°ä½“æ£€</p>\n<p>å­—èŠ‚è·³åŠ¨ï¼Œè½¬æ­£offerï¼Œsp</p>\n<p>æ€»ä½“è€Œè¨€ï¼Œä»Šå¹´å¼ºçš„äººè¿˜æ˜¯èƒ½æ‹¿åˆ°å¤šä¸ªå¤§å‚offerï¼Œä½†æ˜¯å¤§å‚é—¨æ§›æ¯”å¹´é«˜äº†å¾ˆå¤šã€‚åœ¨äº’è”ç½‘é¢“åŠ¿çš„ä»Šå¹´ï¼ŒèŠ¯ç‰‡ã€åµŒå…¥å¼æˆä¸ºé¦™é¥½é¥½ï¼Œè–ªèµ„é«˜ã€å‘å±•å¥½ï¼Œä¸å°‘äººç”šè‡³ç›´å‘¼èµ¶ç´§è½¬è¡Œï¼ˆæˆ‘æœ‰æœ‹å‹åœ¨é›¶åŸºç¡€æƒ…å†µä¸‹æ‹¿äº†äº”å…­å®¶åµŒå…¥å¼ä¸­å°å‚çš„offerï¼‰ã€‚</p>\n<p>å…³äºofferé€‰æ‹©ï¼Œæœ€ç»ˆæ˜¯è€ƒè™‘å­—èŠ‚è·³åŠ¨baseæ­å·ï¼Œè¿˜æœ‰ä¸€ä¸ªæ±Ÿè‹çœæŸåœ°çº§å¸‚top1é«˜ä¸­çš„ä¿¡æ¯æŠ€æœ¯è€å¸ˆï¼ˆè¿›ç¼–ï¼‰çš„offerã€‚åœ¨è€ƒè™‘å®¶åº­æƒ…å†µã€ä¸ªäººå·åº¦æ‰¿å—åº¦ã€ç¨³å®šæ€§ï¼Œæœ€ç»ˆé€‰æ‹©äº†åšä¸€åæ•™å¸ˆã€‚</p>\n<p>æœªæ¥çš„å‘å±•ï¼Œå¤§æ¦‚ç‡å°±æ˜¯åšä¸€åæ™®é€šçš„ä¿¡æ¯æŠ€æœ¯æ•™å¸ˆï¼Œæœ‰å·çš„å¿ƒè¿˜æœ‰æœºä¼šå°è¯•åŠ å…¥å­¦æ ¡å¸¦ç«èµ›çš„é˜Ÿä¼ã€‚</p>\n<p>ä¸ç®¡ä»€ä¹ˆofferé€‰æ‹©ï¼Œæœ‰å¾—å¿…å®šæœ‰å¤±ï¼Œåå…¨åç¾çš„å·¥ä½œå‡ ä¹æ²¡æœ‰ã€‚æ‰€ä»¥åœ¨è¿›è¡Œofferé€‰æ‹©æ—¶ï¼Œå¦‚æœæ²¡æœ‰æ˜ç¡®çš„çˆ±å¥½æƒ³åšçš„å·¥ä½œçš„è¯ï¼ˆæ¯”å¦‚æˆ‘ï¼‰ï¼Œé‚£å°±å¥½å¥½ç»¼åˆè€ƒè™‘ä»¥ä¸Šå‡ ç‚¹è¿›è¡Œåˆ¤æ–­å¾—å‡ºé€‰æ‹©äº†ã€‚</p>\n<p>åšå‡ºé€‰æ‹©å°±å¥½å¥½å†²å§ï¼Œæœªæ¥å¯æœŸã€‚å¤§å®¶éƒ½æœ‰å…‰æ˜çš„æœªæ¥ï¼</p>"},{"title":"Javaå…«è‚¡æ–‡ - JavaåŸºç¡€","copyright":true,"mathjax":false,"date":"2023-01-23T02:05:51.000Z","toc":true,"urlname":"java-basic-knowledge","_content":"\n> æ•´ç†çš„JavaåŸºç¡€ç›¸å…³çŸ¥è¯†ç‚¹å’Œé¢è¯•é¢˜ï¼Œéƒ¨åˆ†å†…å®¹æ‘˜è‡ªç½‘ç»œï¼Œå¦‚æœ‰ä¾µæƒè¯·è”ç³»æˆ‘ï½\t<!--more-->\n\n## Javaæ¦‚è¿°\n\n### JVMã€JREå’ŒJDKçš„å…³ç³»\n\nJVMï¼šJava Virtual Machineï¼ŒJavaè™šæ‹Ÿæœºï¼ŒJavaç¨‹åºéœ€è¦è¿è¡Œåœ¨è™šæ‹Ÿæœºä¸Šï¼Œä¸åŒçš„å¹³å°æœ‰è‡ªå·±çš„è™šæ‹Ÿæœºï¼Œå› æ­¤Javaè¯­è¨€å¯ä»¥å®ç°è·¨å¹³å°ã€‚\n\nJREï¼šJava Runtime Environmentï¼ŒJavaè¿è¡Œç¯å¢ƒï¼ŒåŒ…æ‹¬Javaè™šæ‹Ÿæœºå’ŒJavaç¨‹åºæ‰€éœ€çš„æ ¸å¿ƒç±»åº“ç­‰ã€‚\n\nJDKï¼šJava Development Kitï¼ŒJavaå¼€å‘å·¥å…·åŒ…ï¼ŒåŒ…æ‹¬äº†JREå’Œå¼€å‘å·¥å…·ã€‚\n\n### ä»€ä¹ˆæ˜¯è·¨å¹³å°æ€§ï¼ŸåŸç†æ˜¯ä»€ä¹ˆ\n\næ‰€è°“è·¨å¹³å°æ€§ï¼Œæ˜¯æŒ‡Javaè¯­è¨€ç¼–å†™çš„ç¨‹åºï¼Œä¸€æ¬¡ç¼–è¯‘ï¼Œåˆ°å¤„è¿è¡Œã€‚\n\nå®ç°åŸç†ï¼šJavaç¨‹åºæ˜¯é€šè¿‡Javaè™šæ‹Ÿæœºåœ¨ç³»ç»Ÿå¹³å°ä¸Šè¿è¡Œçš„ï¼Œåªè¦è¯¥ç³»ç»Ÿå¯ä»¥å®‰è£…ç›¸åº”çš„Javaè™šæ‹Ÿæœºï¼Œè¯¥ç³»ç»Ÿå°±å¯ä»¥è¿è¡ŒJavaç¨‹åºã€‚\n\n### Javaè¯­è¨€æœ‰å“ªäº›ç‰¹ç‚¹\n\né¢å‘å¯¹è±¡ï¼ˆå°è£…ï¼Œç»§æ‰¿ï¼Œå¤šæ€ï¼‰\n\nå¹³å°æ— å…³æ€§ï¼ˆJavaè™šæ‹Ÿæœºå®ç°å¹³å°æ— å…³æ€§ï¼‰\n\n### ä»€ä¹ˆæ˜¯å­—èŠ‚ç ï¼Ÿé‡‡ç”¨å­—èŠ‚ç çš„æœ€å¤§å¥½å¤„æ˜¯ä»€ä¹ˆ\n\n**å­—èŠ‚ç **ï¼šJavaæºä»£ç ç»è¿‡è™šæ‹Ÿæœºç¼–è¯‘å™¨ç¼–è¯‘åäº§ç”Ÿçš„æ–‡ä»¶ï¼ˆå³æ‰©å±•ä¸º.classçš„æ–‡ä»¶ï¼‰ï¼Œå®ƒä¸é¢å‘ä»»ä½•ç‰¹å®šçš„å¤„ç†å™¨ï¼Œåªé¢å‘è™šæ‹Ÿæœºã€‚ï¼ˆjavac HelloWorld.Java â†’ HelloWorld.class â†’ Java HelloWorldæ‰§è¡Œç¨‹åºï¼‰\n\n**ç¼–è¯‘ä¸è§£é‡Šå¹¶å­˜**\n\nJavaæºä»£ç (.Javaæ–‡ä»¶)---->ç¼–è¯‘å™¨---->jvmå¯æ‰§è¡Œçš„Javaå­—èŠ‚ç (.classæ–‡ä»¶)---->jvm---->jvmä¸­è§£é‡Šå™¨----->æœºå™¨å¯æ‰§è¡Œçš„äºŒè¿›åˆ¶æœºå™¨ç ---->ç¨‹åºè¿è¡Œ\n\n### ä»€ä¹ˆæ˜¯Javaç¨‹åºçš„ä¸»ç±»ï¼Ÿ\n\nä¸€ä¸ªç¨‹åºä¸­å¯ä»¥æœ‰å¤šä¸ªç±»ï¼Œä½†åªèƒ½æœ‰ä¸€ä¸ªç±»æ˜¯ä¸»ç±»ã€‚åœ¨Javaåº”ç”¨ç¨‹åºä¸­ï¼Œè¿™ä¸ªä¸»ç±»æ˜¯æŒ‡åŒ…å«main()æ–¹æ³•çš„ç±»ã€‚\nä¸»ç±»æ˜¯Javaç¨‹åºæ‰§è¡Œçš„å…¥å£ã€‚ï¼ˆmainæ–¹æ³•é™¤äº†æ˜¯ä¸ªä¸»æ–¹æ³•ä»¥å¤–ï¼Œå’Œæ™®é€šçš„é™æ€æ–¹æ³•æ²¡æœ‰åŒºåˆ«ï¼Œéƒ½å¯ä»¥é‡è½½ã€è°ƒç”¨ã€ç»§æ‰¿ï¼‰\n\n### Javaå’ŒC++çš„åŒºåˆ«\n\nç›¸åŒç‚¹ï¼šéƒ½æ˜¯**é¢å‘å¯¹è±¡**çš„è¯­è¨€ï¼Œéƒ½æ”¯æŒ**å°è£…ã€ç»§æ‰¿å’Œå¤šæ€**\n\nä¸åŒç‚¹ï¼š\n\n- **Javaä¸æä¾›æŒ‡é’ˆ**æ¥ç›´æ¥è®¿é—®å†…å­˜ï¼Œç¨‹åºå†…å­˜æ›´åŠ å®‰å…¨ï¼Œæœ‰è‡ªåŠ¨å†…å­˜ç®¡ç†ï¼›C++ç”¨æŒ‡é’ˆç®¡ç†å†…å­˜\n\n- Javaçš„**ç±»æ˜¯å•ç»§æ‰¿**çš„ï¼ŒC++æ”¯æŒå¤šé‡ç»§æ‰¿ï¼›è™½ç„¶Javaçš„ç±»ä¸å¯ä»¥å¤šç»§æ‰¿ï¼Œä½†æ˜¯æ¥å£å¯ä»¥å¤šç»§æ‰¿ã€‚\n\n\tä¸ºä»€ä¹ˆJavaä¸­ç±»ä¸æ”¯æŒå¤šç»§æ‰¿ï¼Ÿâ€”â€”å¤šé‡ç»§æ‰¿çš„é’»çŸ³é—®é¢˜\n\n\t![å¤šé‡ç»§æ‰¿çš„é’»çŸ³é—®é¢˜](https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/TyporaNotes20190622142003813.png)\n\tç±» B å’Œç±» C ç»§æ‰¿è‡ªç±» Aï¼Œä¸”éƒ½é‡å†™äº†ç±» A ä¸­çš„åŒä¸€ä¸ªæ–¹æ³•ï¼Œè€Œç±» D åŒæ—¶ç»§æ‰¿äº†ç±» B å’Œç±» Cï¼ˆå¤šç»§æ‰¿)ï¼Œé‚£ä¹ˆæ­¤æ—¶ç±» D ä¼šç»§æ‰¿ Bã€C çš„æ–¹æ³•ï¼Œé‚£å¯¹äº Bã€C é‡å†™çš„ A ä¸­çš„æ–¹æ³•ï¼Œç±» D ä¼šç»§æ‰¿å“ªä¸€ä¸ªå‘¢ï¼Ÿ\n\n- Javaæœ‰**è‡ªåŠ¨å†…å­˜ç®¡ç†**æœºåˆ¶ï¼Œä¸éœ€è¦ç¨‹åºå‘˜æ‰‹åŠ¨é‡Šæ”¾æ— ç”¨å†…å­˜\n\n## åŸºç¡€è¯­æ³•\n\n### æ•°æ®ç±»å‹\n\n**å®šä¹‰**ï¼šJavaè¯­è¨€æ˜¯å¼ºç±»å‹è¯­è¨€ï¼Œå¯¹äºæ¯ä¸€ç§æ•°æ®éƒ½å®šä¹‰äº†æ˜ç¡®çš„å…·ä½“çš„æ•°æ®ç±»å‹ï¼Œåœ¨å†…å­˜ä¸­åˆ†é…äº†ä¸åŒå¤§å°çš„å†…å­˜ç©ºé—´ã€‚\n\n**åˆ†ç±»**\n\n- åŸºæœ¬æ•°æ®ç±»å‹\n\t- æ•°å€¼å‹\n\t\t- æ•´æ•°ç±»å‹(byte,short,int,long)\n\t\t- æµ®ç‚¹ç±»å‹(float,double)\n\t- å­—ç¬¦å‹(char)\n\t- å¸ƒå°”å‹(boolean)\n- å¼•ç”¨æ•°æ®ç±»å‹\n\t- ç±»(class)\n\t- æ¥å£(interface)\n\t- æ•°ç»„([])\n\n**JavaåŸºæœ¬æ•°æ®ç±»å‹å›¾**\n\n![JavaåŸºæœ¬æ•°æ®ç±»å‹å›¾](https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/TyporaNotesaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL0pvdXJXb24vaW1hZ2UvbWFzdGVyL0phdmElRTUlOUYlQkElRTclQTElODAlRTglQUYlQUQlRTYlQjMlOTUvSmF2YSVFNSU5RiVCQSVFNiU5QyVBQyVFNiU5NSVCMCVFNiU4RCVBRSVFNyVCMSVCQiVFNSU5RSU4Qi5wbmc.png)\n\n### ç±»å‹è½¬æ¢\n\nè‡ªåŠ¨ç±»å‹è½¬æ¢\n\n> ä¸¤ç§æ•°æ®ç±»å‹å½¼æ­¤å…¼å®¹\n>\n> ä½çº§ç±»å‹æ•°æ®è½¬æ¢æˆé«˜çº§ç±»å‹æ•°æ®\n\n- æ•°å€¼å‹æ•°æ®çš„è½¬æ¢ï¼šbyteâ†’shortâ†’intâ†’longâ†’floatâ†’double\n- å­—ç¬¦å‹è½¬æ¢ä¸ºæ•´å‹ï¼šcharâ†’intã€‚\n\nå¼ºåˆ¶ç±»å‹è½¬æ¢\n\n> å½“ä¸¤ç§æ•°æ®ç±»å‹ä¸å…¼å®¹ï¼Œæˆ–é«˜çº§ç±»å‹æ•°æ®è½¬æ¢æˆä½çº§ç±»å‹æ•°æ®æ—¶ï¼Œè‡ªåŠ¨è½¬æ¢å°†æ— æ³•è¿›è¡Œï¼ˆç¼–è¯‘é”™è¯¯ï¼‰ï¼Œè¿™æ—¶å°±éœ€è¦è¿›è¡Œå¼ºåˆ¶ç±»å‹è½¬æ¢\n\n### è®¿é—®ä¿®é¥°ç¬¦\n\n![è®¿é—®ä¿®é¥°ç¬¦](https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/TyporaNotesaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL0pvdXJXb24vaW1hZ2UvbWFzdGVyL0phdmElRTUlOUYlQkElRTclQTElODAlRTglQUYlQUQlRTYlQjMlOTUvSmF2YSVFOCVBRSVCRiVFOSU5NyVBRSVFNCVCRiVBRSVFOSVBNSVCMCVFNyVBQyVBNi5wbmc.png)\n\n### å…³é”®å­—\n\n#### final æœ‰ä»€ä¹ˆç”¨ï¼Ÿ\n\nç”¨äºä¿®é¥°ç±»ã€æ–¹æ³•å’Œå˜é‡ï¼›\n\n- è¢«finalä¿®é¥°çš„ç±»ä¸å¯ä»¥è¢«ç»§æ‰¿\n\n- è¢«finalä¿®é¥°çš„æ–¹æ³•ä¸å¯ä»¥è¢«é‡å†™\n\n- è¢«finalä¿®é¥°çš„å˜é‡ä¸å¯ä»¥è¢«æ”¹å˜ï¼Œè¢«finalä¿®é¥°**ä¸å¯å˜çš„æ˜¯å˜é‡çš„å¼•ç”¨ï¼Œè€Œä¸æ˜¯å¼•ç”¨æŒ‡å‘çš„å†…å®¹**ï¼Œå¼•ç”¨æŒ‡å‘çš„å†…å®¹æ˜¯å¯ä»¥æ”¹å˜\n\n\t```java\n\tfinal int[] nums = new int[]{1, 2, 3};\n\tnums[0] = 11;\n\tSystem.out.println(Arrays.toString(nums));\t// [11, 2, 3]\n\t```\n\n#### finalã€finallyã€finalizeåŒºåˆ«\n\n- finalæ˜¯Javaä¿®é¥°ç¬¦ï¼Œå¯ä»¥ä¿®é¥°ç±»ã€æ–¹æ³•ã€å˜é‡ï¼Œä¿®é¥°ç±»è¡¨ç¤ºè¯¥ç±»ä¸èƒ½è¢«ç»§æ‰¿ã€ä¿®é¥°æ–¹æ³•è¡¨ç¤ºè¯¥æ–¹æ³•ä¸èƒ½è¢«é‡å†™ã€ä¿®é¥°å˜é‡è¡¨ç¤ºè¯¥å˜é‡ä¸å¯ä»¥è¢«æ”¹å˜ã€‚\n- finallyä¸€èˆ¬ä½œç”¨åœ¨try-catchä»£ç å—ä¸­ï¼Œåœ¨å¤„ç†å¼‚å¸¸çš„æ—¶å€™ï¼Œé€šå¸¸æˆ‘ä»¬å°†ä¸€å®šè¦æ‰§è¡Œçš„ä»£ç æ–¹æ³•finallyä»£ç å—\n\tä¸­ï¼Œè¡¨ç¤ºä¸ç®¡æ˜¯å¦å‡ºç°å¼‚å¸¸ï¼Œè¯¥ä»£ç å—éƒ½ä¼šæ‰§è¡Œï¼Œä¸€èˆ¬ç”¨æ¥å­˜æ”¾ä¸€äº›å…³é—­èµ„æºçš„ä»£ç ã€‚\n- finalizeæ˜¯Objectç±»çš„ä¸€ä¸ªæ–¹æ³•ï¼Œè¯¥æ–¹æ³•ä¸€èˆ¬ç”±åƒåœ¾å›æ”¶å™¨æ¥è°ƒç”¨ï¼Œåœ¨æ‰§è¡Œåƒåœ¾å›æ”¶å‰ï¼Œç”±åƒåœ¾å›æ”¶å™¨è°ƒç”¨å¯¹è±¡çš„finalize()æ–¹æ³•ï¼Œå¹¶ä¸”åœ¨è¯¥æ–¹æ³•ä¸­å¯¹è±¡å¯èƒ½å¯ä»¥å¤æ´»ã€‚\n\n#### thiså…³é”®å­—çš„ç”¨æ³•\n\næŒ‡å‘å¯¹è±¡æœ¬èº«çš„ä¸€ä¸ªæŒ‡é’ˆã€‚\n\n#### superå…³é”®å­—çš„ç”¨æ³•\n\næŒ‡å‘è‡ªå·±çˆ¶ç±»å¯¹è±¡ï¼ˆæœ€è¿‘çš„çˆ¶ç±»ï¼‰çš„ä¸€ä¸ªæŒ‡é’ˆã€‚\n\n#### staticå­˜åœ¨çš„ä¸»è¦æ„ä¹‰\n\nstatic**é™æ€å˜é‡**ï¼šå’Œç±»ä¸€èµ·åŠ è½½ï¼Œ**ä»¥è‡´äºå³ä½¿æ²¡æœ‰åˆ›å»ºå¯¹è±¡ï¼Œä¹Ÿèƒ½ä½¿ç”¨å±æ€§å’Œè°ƒç”¨æ–¹æ³•ã€‚**\n\nstatic**é™æ€ä»£ç å—**ï¼šåœ¨ç±»åˆæ¬¡è¢«åŠ è½½çš„æ—¶å€™ï¼Œä¼šæŒ‰ç…§staticå—çš„é¡ºåºæ¥æ‰§è¡Œæ¯ä¸ªstaticå—ï¼Œå¹¶ä¸”åªä¼šæ‰§è¡Œä¸€æ¬¡ã€‚\nåŠ è½½ â†’ é“¾æ¥ï¼ˆéªŒè¯ã€å‡†å¤‡ã€è§£æï¼‰ â†’ åˆå§‹åŒ–\n\nstaticç±»å‹çš„å˜é‡åœ¨å‡†å¤‡é˜¶æ®µè¿›è¡Œé»˜è®¤åˆå§‹åŒ–ï¼Œä½†æ˜¯æœ‰static finalä¿®é¥°çš„ä¼šåœ¨å‡†å¤‡é˜¶æ®µç›´æ¥èµ‹å€¼ï¼Œ åœ¨åˆå§‹åŒ–é˜¶æ®µè¿›è¡Œæ˜¾å¼åˆå§‹åŒ–ã€‚\n\n#### staticæ³¨æ„äº‹é¡¹\n\n1ã€é™æ€åªèƒ½è®¿é—®é™æ€ã€‚ 2ã€éé™æ€æ—¢å¯ä»¥è®¿é—®éé™æ€çš„ï¼Œä¹Ÿå¯ä»¥è®¿é—®é™æ€çš„ã€‚\n\n### åˆå§‹åŒ–é¡ºåº\n\né™æ€å±æ€§ â†’ é™æ€æ–¹æ³•å— â†’ æ™®é€šå±æ€§ â†’ æ™®é€šæ–¹æ³•å— â†’ æ„é€ å‡½æ•°\n\n### æµç¨‹æ§åˆ¶è¯­å¥\n\n#### break ã€continueã€return çš„åŒºåˆ«åŠä½œç”¨\n\nbreak ç»“æŸå½“å‰çš„å¾ªç¯ä½“\n\ncontinue ç»“æŸæ­£åœ¨æ‰§è¡Œçš„å¾ªç¯ï¼Œè¿›å…¥ä¸‹ä¸€ä¸ªå¾ªç¯æ¡ä»¶\n\nreturn ç»“æŸå½“å‰çš„æ–¹æ³•ï¼Œç›´æ¥è¿”å›\n\n#### è·³å‡ºå½“å‰çš„å¤šé‡åµŒå¥—å¾ªç¯\n\nåœ¨Javaä¸­ï¼Œè¦æƒ³è·³å‡ºå¤šé‡å¾ªç¯ï¼Œå¯ä»¥åœ¨å¤–é¢çš„å¾ªç¯è¯­å¥å‰å®šä¹‰ä¸€ä¸ªæ ‡å·ï¼Œç„¶ååœ¨é‡Œå±‚å¾ªç¯ä½“çš„ä»£ç ä¸­ä½¿ç”¨å¸¦æœ‰æ ‡å·çš„break è¯­å¥ï¼Œå³å¯è·³å‡ºå¤–å±‚å¾ªç¯ã€‚ä¾‹å¦‚ï¼š\n\n```java\npublic static void main(String[] args) {\n    ok:\n    for (int i = 0; i < 10; i++) {\n        for (int j = 0; j < 10; j++) {\n            System.out.println(\"i=\" + i + \",j=\" + j);\n            if (j == 5) {\n                break ok;\n            }\n        }\n    }\n}\n```\n\n## é¢å‘å¯¹è±¡\n\n### é¢å‘å¯¹è±¡ä¸‰å¤§ç‰¹æ€§\n\n#### é¢å‘å¯¹è±¡çš„ç‰¹å¾æœ‰å“ªäº›æ–¹é¢\n\n**æŠ½è±¡**ï¼šæŠ½è±¡æ˜¯å°†ä¸€ç±»å¯¹è±¡çš„å…±åŒç‰¹å¾æ€»ç»“å‡ºæ¥æ„é€ ç±»çš„è¿‡ç¨‹ï¼ŒåŒ…æ‹¬æ•°æ®æŠ½è±¡å’Œè¡Œä¸ºæŠ½è±¡ä¸¤æ–¹é¢ã€‚æŠ½è±¡åªå…³æ³¨å¯¹è±¡æœ‰å“ªäº›å±æ€§å’Œè¡Œä¸ºï¼Œå¹¶ä¸å…³æ³¨è¿™äº›è¡Œä¸ºçš„ç»†èŠ‚æ˜¯ä»€ä¹ˆã€‚\n\n**å°è£…**\n\nå°è£…æŠŠä¸€ä¸ªå¯¹è±¡çš„å±æ€§ç§æœ‰åŒ–ï¼ŒåŒæ—¶æä¾›ä¸€äº›å¯ä»¥è¢«å¤–ç•Œè®¿é—®çš„å±æ€§çš„æ–¹æ³•ï¼Œå¦‚æœå±æ€§ä¸æƒ³è¢«å¤–ç•Œè®¿é—®ï¼Œæˆ‘ä»¬å¤§å¯ä¸å¿…æä¾›æ–¹æ³•ç»™å¤–ç•Œè®¿é—®ã€‚\n\n**ç»§æ‰¿**\n\nç»§æ‰¿æ˜¯**ä½¿ç”¨å·²å­˜åœ¨çš„ç±»ä½œä¸ºåŸºç¡€å»ºç«‹æ–°ç±»**çš„æŠ€æœ¯ï¼Œæ–°ç±»çš„å®šä¹‰å¯ä»¥å¢åŠ æ–°çš„æ•°æ®æˆ–æ–°çš„åŠŸèƒ½ï¼Œä¹Ÿå¯ä»¥ç”¨çˆ¶ç±»çš„åŠŸèƒ½ã€‚é€šè¿‡ä½¿ç”¨ç»§æ‰¿æˆ‘ä»¬èƒ½å¤Ÿéå¸¸æ–¹ä¾¿åœ°å¤ç”¨ä»¥å‰çš„ä»£ç ã€‚\n\nå…³äºç»§æ‰¿å¦‚ä¸‹ 3 ç‚¹è¯·è®°ä½ï¼š\n\n1. å­ç±»æ‹¥æœ‰çˆ¶ç±»é private çš„å±æ€§å’Œæ–¹æ³•ã€‚\n2. å­ç±»å¯ä»¥æ‹¥æœ‰è‡ªå·±å±æ€§å’Œæ–¹æ³•ï¼Œå³å­ç±»å¯ä»¥å¯¹çˆ¶ç±»è¿›è¡Œæ‰©å±•ã€‚\n3. å­ç±»å¯ä»¥ç”¨è‡ªå·±çš„æ–¹å¼å®ç°çˆ¶ç±»çš„æ–¹æ³•ï¼Œoverrideé‡å†™ã€‚\n\n**å¤šæ€**\n\næ‰€è°“å¤šæ€å°±æ˜¯æŒ‡ä¸€ä¸ªå¼•ç”¨å˜é‡åˆ°åº•ä¼šæŒ‡å‘å“ªä¸ªç±»çš„å®ä¾‹å¯¹è±¡ï¼Œè¯¥å¼•ç”¨å˜é‡è°ƒç”¨çš„æ–¹æ³•åˆ°åº•æ˜¯å“ªä¸ªç±»ä¸­å®ç°çš„æ–¹æ³•ï¼Œå¿…é¡»åœ¨ç¨‹åºè¿è¡ŒæœŸé—´æ‰èƒ½ç¡®å®šï¼Œç¼–è¯‘æœŸæ— æ³•ç¡®å®šã€‚\n\nçˆ¶ç±»çš„å¼•ç”¨æŒ‡å‘å­ç±»å®ä¾‹å¯¹è±¡ã€æ¥å£æŒ‡å‘å®ç°ç±»å®ä¾‹å¯¹è±¡ã€‚æé«˜äº†ç¨‹åºçš„æ‹“å±•æ€§ã€‚\n\nåœ¨Javaä¸­æœ‰ä¸¤ç§å½¢å¼å¯ä»¥å®ç°å¤šæ€ï¼šç»§æ‰¿ï¼ˆå¤šä¸ªå­ç±»å¯¹åŒä¸€æ–¹æ³•çš„é‡å†™ï¼‰å’Œæ¥å£ï¼ˆå®ç°æ¥å£å¹¶è¦†ç›–æ¥å£ä¸­åŒä¸€æ–¹æ³•ï¼‰ã€‚\n\næ–¹æ³•é‡è½½ï¼ˆoverloadï¼‰å®ç°ç¼–è¯‘æ—¶çš„å¤šæ€æ€§ï¼ˆä¹Ÿç§°ä¸ºå‰ç»‘å®šï¼‰ï¼Œæ–¹æ³•é‡å†™ï¼ˆoverrideï¼‰å®ç°è¿è¡Œæ—¶çš„å¤šæ€æ€§ï¼ˆä¹Ÿç§°ä¸ºåç»‘å®šï¼‰ã€‚\n\nJavaå®ç°å¤šæ€æœ‰ä¸‰ä¸ªå¿…è¦æ¡ä»¶ï¼šç»§æ‰¿ã€é‡å†™ã€å‘ä¸Šè½¬å‹ã€‚\n\n> ç»§æ‰¿ï¼šåœ¨å¤šæ€ä¸­å¿…é¡»å­˜åœ¨æœ‰ç»§æ‰¿å…³ç³»çš„å­ç±»å’Œçˆ¶ç±»ã€‚\n>\n> é‡å†™ï¼šå­ç±»å¯¹çˆ¶ç±»ä¸­æŸäº›æ–¹æ³•è¿›è¡Œé‡æ–°å®šä¹‰ï¼Œåœ¨è°ƒç”¨è¿™äº›æ–¹æ³•æ—¶å°±ä¼šè°ƒç”¨å­ç±»çš„æ–¹æ³•ã€‚\n>\n> å‘ä¸Šè½¬å‹ï¼šåœ¨å¤šæ€ä¸­éœ€è¦å°†å­ç±»çš„å¼•ç”¨èµ‹ç»™çˆ¶ç±»å¯¹è±¡ï¼Œåªæœ‰è¿™æ ·è¯¥å¼•ç”¨æ‰èƒ½å¤Ÿå…·å¤‡æŠ€èƒ½è°ƒç”¨çˆ¶ç±»çš„æ–¹æ³•å’Œå­ç±»çš„æ–¹æ³•ã€‚\n\nåªæœ‰æ»¡è¶³äº†ä¸Šè¿°ä¸‰ä¸ªæ¡ä»¶ï¼Œæˆ‘ä»¬æ‰èƒ½å¤Ÿåœ¨åŒä¸€ä¸ªç»§æ‰¿ç»“æ„ä¸­ä½¿ç”¨ç»Ÿä¸€çš„é€»è¾‘å®ç°ä»£ç å¤„ç†ä¸åŒçš„å¯¹è±¡ï¼Œä»è€Œè¾¾åˆ°æ‰§è¡Œä¸åŒçš„è¡Œä¸ºã€‚\n\n#### æŠ½è±¡ç±»å’Œæ¥å£çš„å¯¹æ¯”\n\næŠ½è±¡ç±»æ˜¯å¯¹ç±»çš„æŠ½è±¡ï¼Œç”¨æ¥**æ•æ‰é€šç”¨ç‰¹æ€§**ã€‚æ¥å£æ˜¯**è¡Œä¸ºçš„æŠ½è±¡**ï¼ŒæŠ½è±¡æ–¹æ³•çš„é›†åˆã€‚\n\n**ç›¸åŒç‚¹**\n\n- æ¥å£å’ŒæŠ½è±¡ç±»éƒ½ä¸èƒ½å®ä¾‹åŒ–\n- éƒ½ä½äºç»§æ‰¿çš„é¡¶ç«¯ï¼Œç”¨äºè¢«å…¶ä»–ç±»å®ç°æˆ–ç»§æ‰¿\n- éƒ½åŒ…å«æŠ½è±¡æ–¹æ³•ï¼Œå…¶å­ç±»éƒ½å¿…é¡»é‡å†™è¿™äº›æŠ½è±¡æ–¹æ³•\n\n**ä¸åŒç‚¹**\n\n| å‚æ•°       | æŠ½è±¡ç±»                             | æ¥å£                                             |\n| ---------- | ---------------------------------- | ------------------------------------------------ |\n| å£°æ˜       | æŠ½è±¡ç±»ä½¿ç”¨abstractå…³é”®å­—å£°æ˜       | æ¥å£ä½¿ç”¨interfaceå…³é”®å­—å£°æ˜                      |\n| å®ç°       | å­ç±»ä½¿ç”¨extendså…³é”®å­—æ¥ç»§æ‰¿æŠ½è±¡ç±»  | å­ç±»ä½¿ç”¨implementså…³é”®å­—æ¥å®ç°æ¥å£               |\n| æ„é€ å™¨     | æŠ½è±¡ç±»å¯ä»¥æœ‰æ„é€ å™¨                 | æ¥å£ä¸èƒ½æœ‰æ„é€ å™¨                                 |\n| è®¿é—®ä¿®é¥°ç¬¦ | æŠ½è±¡ç±»ä¸­çš„æ–¹æ³•å¯ä»¥æ˜¯ä»»æ„è®¿é—®ä¿®é¥°ç¬¦ | æ¥å£æ–¹æ³•é»˜è®¤ä¿®é¥°ç¬¦æ˜¯publicï¼Œä¹Ÿå¯ä»¥ä¸åŠ è®¿é—®ä¿®é¥°ç¬¦ |\n| å¤šç»§æ‰¿     | ä¸€ä¸ªç±»æœ€å¤šåªèƒ½ç»§æ‰¿ä¸€ä¸ªæŠ½è±¡ç±»       | ä¸€ä¸ªç±»å¯ä»¥å®ç°å¤šä¸ªæ¥å£                           |\n\n#### æ™®é€šç±»å’ŒæŠ½è±¡ç±»æœ‰å“ªäº›åŒºåˆ«ï¼Ÿ\n\n- æ™®é€šç±»ä¸èƒ½åŒ…å«æŠ½è±¡æ–¹æ³•ï¼ŒæŠ½è±¡ç±»å¯ä»¥åŒ…å«æŠ½è±¡æ–¹æ³•ã€‚\n- æŠ½è±¡ç±»ä¸èƒ½ç›´æ¥å®ä¾‹åŒ–ï¼Œæ™®é€šç±»å¯ä»¥ç›´æ¥å®ä¾‹åŒ–ã€‚\n\n#### æˆå‘˜å˜é‡å’Œå±€éƒ¨å˜é‡çš„åŒºåˆ«\n\n|              | æˆå‘˜å˜é‡               | å±€éƒ¨å˜é‡                                     |\n| ------------ | ---------------------- | -------------------------------------------- |\n| **ä½œç”¨åŸŸ**   | æ•´ä¸ªç±»å¯ä½¿ç”¨           | æ–¹æ³•ä½“å†…ä½¿ç”¨                                 |\n| **å­˜å‚¨ä½ç½®** | å±äºå¯¹è±¡ï¼Œå­˜åœ¨å †å†…å­˜ä¸­ | å±äºæ–¹æ³•ï¼Œå­˜åœ¨æ ˆå¸§ä¸­                         |\n| **ç”Ÿå‘½å‘¨æœŸ** | å’Œå¯¹è±¡åŒç”Ÿå‘½å‘¨æœŸ       | å’Œæ–¹æ³•åŒç”Ÿå‘½å‘¨æœŸ                             |\n| **åˆå§‹å€¼**   | ä¸æŒ‡å®šçš„è¯æœ‰é»˜è®¤åˆå§‹å€¼ | å¿…é¡»æ‰‹åŠ¨åˆå§‹åŒ–å¦åˆ™<br />ä¸èƒ½ä½¿ç”¨ï¼ˆç¼–è¯‘é”™è¯¯ï¼‰ |\n\n**ä½¿ç”¨åŸåˆ™**\n\nåœ¨ä½¿ç”¨å˜é‡æ—¶éœ€è¦éµå¾ªçš„åŸåˆ™ä¸ºï¼šå°±è¿‘åŸåˆ™\né¦–å…ˆåœ¨å±€éƒ¨èŒƒå›´æ‰¾ï¼Œæœ‰å°±ä½¿ç”¨ï¼›æ¥ç€åœ¨æˆå‘˜ä½ç½®æ‰¾ã€‚\n\n```java\npublic class Main {\n    int a = 2;\n    public static void main(String[] args) {\n        int a = 1;\n        System.out.println(a);\t// 1\n    }\n}\n```\n\n### å†…éƒ¨ç±»\n\n#### ä»€ä¹ˆæ˜¯å†…éƒ¨ç±»ï¼Ÿ\n\nåœ¨Javaä¸­ï¼Œå¯ä»¥å°†ä¸€ä¸ªç±»çš„å®šä¹‰æ”¾åœ¨å¦å¤–ä¸€ä¸ªç±»çš„å®šä¹‰å†…éƒ¨ï¼Œè¿™å°±æ˜¯**å†…éƒ¨ç±»**ã€‚\n\n#### å†…éƒ¨ç±»çš„åˆ†ç±»æœ‰å“ªäº›\n\nå†…éƒ¨ç±»å¯ä»¥åˆ†ä¸ºå››ç§ï¼š**é™æ€å†…éƒ¨ç±»ã€æˆå‘˜å†…éƒ¨ç±»ã€å±€éƒ¨å†…éƒ¨ç±»ã€åŒ¿åå†…éƒ¨ç±»**ã€‚\n\n##### é™æ€å†…éƒ¨ç±»\n\nå®šä¹‰åœ¨ç±»å†…éƒ¨çš„é™æ€ç±»ï¼Œå°±æ˜¯é™æ€å†…éƒ¨ç±»ã€‚\n\né™æ€å†…éƒ¨ç±»å¯ä»¥è®¿é—®å¤–éƒ¨ç±»æ‰€æœ‰çš„é™æ€å˜é‡ï¼Œè€Œä¸å¯è®¿é—®å¤–éƒ¨ç±»çš„éé™æ€å˜é‡\n\n##### æˆå‘˜å†…éƒ¨ç±»\n\nå®šä¹‰åœ¨ç±»å†…éƒ¨ï¼Œæˆå‘˜ä½ç½®ä¸Šçš„éé™æ€ç±»ï¼Œå°±æ˜¯æˆå‘˜å†…éƒ¨ç±»ã€‚\n\næˆå‘˜å†…éƒ¨ç±»å¯ä»¥è®¿é—®å¤–éƒ¨ç±»æ‰€æœ‰çš„å˜é‡å’Œæ–¹æ³•ï¼ŒåŒ…æ‹¬é™æ€å’Œéé™æ€ï¼Œç§æœ‰å’Œå…¬æœ‰ã€‚\n\n##### å±€éƒ¨å†…éƒ¨ç±»\n\nå®šä¹‰åœ¨æ–¹æ³•ä¸­çš„å†…éƒ¨ç±»ï¼Œå°±æ˜¯å±€éƒ¨å†…éƒ¨ç±»ã€‚\n\nå®šä¹‰åœ¨å®ä¾‹æ–¹æ³•ä¸­çš„å±€éƒ¨ç±»å¯ä»¥è®¿é—®å¤–éƒ¨ç±»çš„æ‰€æœ‰å˜é‡å’Œæ–¹æ³•ï¼Œå®šä¹‰åœ¨é™æ€æ–¹æ³•ä¸­çš„å±€éƒ¨ç±»åªèƒ½è®¿é—®å¤–éƒ¨ç±»çš„é™æ€å˜é‡å’Œæ–¹æ³•\n\n##### åŒ¿åå†…éƒ¨ç±»\n\nåŒ¿åå†…éƒ¨ç±»å°±æ˜¯æ²¡æœ‰åå­—çš„å†…éƒ¨ç±»ï¼Œæ—¥å¸¸å¼€å‘ä¸­ä½¿ç”¨çš„æ¯”è¾ƒå¤šã€‚åŒ¿åå†…éƒ¨ç±»å¿…é¡»ç»§æ‰¿æˆ–å®ç°ä¸€ä¸ªå·²æœ‰çš„æ¥å£ ï¼ŒåŒ¿åå†…éƒ¨ç±»ä¸èƒ½å®šä¹‰ä»»ä½•é™æ€æˆå‘˜å’Œé™æ€æ–¹æ³•\n\n#### å±€éƒ¨å†…éƒ¨ç±»å’ŒåŒ¿åå†…éƒ¨ç±»è®¿é—®å±€éƒ¨å˜é‡çš„æ—¶å€™ï¼Œä¸ºä»€ä¹ˆå˜é‡å¿…é¡»è¦åŠ ä¸Šfinalï¼Ÿ\n\nå±€éƒ¨å†…éƒ¨ç±»å’ŒåŒ¿åå†…éƒ¨ç±»è®¿é—®å±€éƒ¨å˜é‡çš„æ—¶å€™ï¼Œä¸ºä»€ä¹ˆå˜é‡å¿…é¡»è¦åŠ ä¸Šfinalå‘¢ï¼Ÿå®ƒå†…éƒ¨åŸç†æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ\n\nå…ˆçœ‹è¿™æ®µä»£ç ï¼š\n\n```java\npublic class Outer {\n    void outMethod(){\n        final int a =10;\n        class Inner {\n            void innerMethod(){\n                System.out.println(a);\n            }\n        }\n    }\n}\n```\n\nä»¥ä¸Šä¾‹å­ï¼Œä¸ºä»€ä¹ˆè¦åŠ finalå‘¢ï¼Ÿæ˜¯å› ä¸º**ç”Ÿå‘½å‘¨æœŸä¸ä¸€è‡´**\n\nå±€éƒ¨å˜é‡å­˜å‚¨åœ¨æ ˆä¸­ï¼Œå½“æ–¹æ³•æ‰§è¡Œç»“æŸåï¼Œå¦‚æœä¸ç”¨finalä¿®é¥°é‚£ä¹ˆè¯¥å±€éƒ¨å˜é‡å°±è¢«é”€æ¯ã€‚è€Œå±€éƒ¨å†…éƒ¨ç±»å¯¹å±€éƒ¨å˜é‡çš„å¼•ç”¨ä¾ç„¶å­˜åœ¨ï¼Œå¦‚æœå±€éƒ¨å†…éƒ¨ç±»è¦è°ƒç”¨å±€éƒ¨å˜é‡æ—¶ï¼Œå°±ä¼šå‡ºé”™ã€‚\nåŠ äº†finalï¼Œå¯ä»¥ç¡®ä¿å±€éƒ¨å†…éƒ¨ç±»ä½¿ç”¨çš„å˜é‡ä¸å¤–å±‚çš„å±€éƒ¨å˜é‡åŒºåˆ†å¼€ï¼Œè§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚\n\n### é‡å†™ä¸é‡è½½\n\n#### æ„é€ å™¨ï¼ˆconstructorï¼‰æ˜¯å¦å¯è¢«é‡å†™ï¼ˆoverrideï¼‰\n\næ„é€ å™¨ä¸èƒ½è¢«ç»§æ‰¿ï¼Œå› æ­¤ä¸èƒ½è¢«é‡å†™ï¼Œä½†å¯ä»¥è¢«é‡è½½ã€‚\n\n#### é‡è½½ï¼ˆOverloadï¼‰å’Œé‡å†™ï¼ˆOverrideï¼‰çš„åŒºåˆ«ã€‚é‡è½½çš„æ–¹æ³•èƒ½å¦æ ¹æ®è¿”å›ç±»å‹è¿›è¡ŒåŒºåˆ†ï¼Ÿ\n\næ–¹æ³•çš„é‡è½½å’Œé‡å†™éƒ½æ˜¯å®ç°å¤šæ€çš„æ–¹å¼ï¼ŒåŒºåˆ«åœ¨äºé‡è½½å®ç°çš„æ˜¯**ç¼–è¯‘æ—¶çš„å¤šæ€æ€§**ï¼Œè€Œé‡å†™å®ç°çš„æ˜¯**è¿è¡Œæ—¶çš„å¤šæ€æ€§**ã€‚\n\né‡è½½ï¼šå‘ç”Ÿåœ¨**åŒä¸€ä¸ªç±»**ä¸­ï¼Œ**æ–¹æ³•åç›¸åŒ å‚æ•°åˆ—è¡¨ä¸åŒ**ï¼ˆå‚æ•°ç±»å‹ä¸åŒã€ä¸ªæ•°ä¸åŒã€é¡ºåºä¸åŒï¼‰ï¼Œä¸æ–¹æ³•è¿”å›å€¼å’Œè®¿é—®ä¿®é¥°ç¬¦æ— å…³\n\né‡å†™ï¼šå‘ç”Ÿåœ¨**çˆ¶å­ç±»**ä¸­ï¼Œæ–¹æ³•åã€å‚æ•°åˆ—è¡¨å¿…é¡»ç›¸åŒï¼Œè¿”å›å€¼ç±»å‹å°äºç­‰äºçˆ¶ç±»ï¼ŒæŠ›å‡ºçš„å¼‚å¸¸å°äºç­‰äºçˆ¶ç±»ï¼Œ**è®¿é—®ä¿®é¥°ç¬¦å¤§äºç­‰äºçˆ¶ç±»**ï¼ˆé‡Œæ°ä»£æ¢åŸåˆ™ï¼‰\n\n### å¯¹è±¡ç›¸ç­‰åˆ¤æ–­\n\n#### == å’Œ equals çš„åŒºåˆ«æ˜¯ä»€ä¹ˆ\n\n**==** : å®ƒçš„ä½œç”¨æ˜¯åˆ¤æ–­ä¸¤ä¸ªå¯¹è±¡çš„åœ°å€æ˜¯ä¸æ˜¯ç›¸ç­‰ã€‚å³ï¼Œåˆ¤æ–­ä¸¤ä¸ªå¯¹è±¡æ˜¯ä¸æ˜¯åŒä¸€ä¸ªå¯¹è±¡ã€‚\n(åŸºæœ¬æ•°æ®ç±»å‹ == æ¯”è¾ƒçš„æ˜¯å€¼ï¼Œå¼•ç”¨æ•°æ®ç±»å‹ == æ¯”è¾ƒçš„æ˜¯å†…å­˜åœ°å€)\n\n**equals()** : å®ƒçš„ä½œç”¨ä¹Ÿæ˜¯åˆ¤æ–­ä¸¤ä¸ªå¯¹è±¡æ˜¯å¦ç›¸ç­‰ã€‚ä½†å®ƒä¸€èˆ¬æœ‰ä¸¤ç§ä½¿ç”¨æƒ…å†µï¼š\n\næƒ…å†µ1ï¼šç±»æ²¡æœ‰é‡å†™ equals() æ–¹æ³•ã€‚åˆ™é€šè¿‡ equals() æ¯”è¾ƒè¯¥ç±»çš„ä¸¤ä¸ªå¯¹è±¡æ—¶ï¼Œç­‰ä»·äºé€šè¿‡â€œ==â€æ¯”è¾ƒè¿™ä¸¤ä¸ªå¯¹è±¡ã€‚\n\næƒ…å†µ2ï¼šç±»é‡å†™äº† equals() æ–¹æ³•ã€‚ä¸€èˆ¬ï¼Œæˆ‘ä»¬éƒ½é‡å†™ equals() æ–¹æ³•æ¥ä¸¤ä¸ªå¯¹è±¡çš„å†…å®¹ç›¸ç­‰ï¼›è‹¥å®ƒä»¬çš„å†…å®¹ç›¸ç­‰ï¼Œåˆ™è¿”å› true (å³ï¼Œè®¤ä¸ºè¿™ä¸¤ä¸ªå¯¹è±¡ç›¸ç­‰)ã€‚\n\n#### hashCode ä¸ equals\n\n**hashCode()ä»‹ç»**\n\nhashCode() çš„ä½œç”¨æ˜¯è·å–å“ˆå¸Œç ï¼ˆæœ¬åœ°æ–¹æ³•ï¼‰ï¼Œä¹Ÿç§°ä¸ºæ•£åˆ—ç ï¼›å®ƒå®é™…ä¸Šæ˜¯è¿”å›ä¸€ä¸ªintæ•´æ•°ã€‚hashCode() å®šä¹‰åœ¨JDKçš„Objectç±»ä¸­ï¼Œè¿™å°±æ„å‘³ç€Javaä¸­çš„ä»»ä½•ç±»éƒ½æœ‰hashCode()æ–¹æ³•ã€‚\n\n**ä¸ºä»€ä¹ˆè¦æœ‰ hashCode**\n\n**æˆ‘ä»¬ä»¥â€œhashSet å¦‚ä½•æ£€æŸ¥é‡å¤â€ä¸ºä¾‹å­æ¥è¯´æ˜ä¸ºä»€ä¹ˆè¦æœ‰ hashCode**ï¼š\n\nå½“ä½ æŠŠå¯¹è±¡åŠ å…¥ hashSet æ—¶ï¼ŒhashSet ä¼šå…ˆè®¡ç®—å¯¹è±¡çš„ hashcode å€¼æ¥åˆ¤æ–­å¯¹è±¡åŠ å…¥çš„ä½ç½®ï¼Œå¦‚æœæ²¡æœ‰ç›¸ç¬¦çš„hashcodeï¼ŒhashSet ä¼šå‡è®¾å¯¹è±¡æ²¡æœ‰é‡å¤å‡ºç°ã€‚ä½†æ˜¯å¦‚æœå‘ç°æœ‰ç›¸åŒ hashcode å€¼çš„å¯¹è±¡ï¼Œè¿™æ—¶ä¼šè°ƒç”¨ equals()æ–¹æ³•æ¥æ£€æŸ¥ hashcode ç›¸ç­‰çš„å¯¹è±¡æ˜¯å¦çœŸçš„ç›¸åŒã€‚å¦‚æœä¸¤è€…ç›¸åŒï¼Œè¡¨æ˜å·²ç»æœ‰äº†ç›¸åŒçš„å¯¹è±¡äº†ï¼ŒhashSet å°±ä¸ä¼šè®©å…¶åŠ å…¥æ“ä½œæˆåŠŸã€‚å¦‚æœä¸åŒçš„è¯ï¼Œå°±ä¼šé‡æ–°æ•£åˆ—åˆ°å…¶ä»–ä½ç½®ã€‚\n\n**hashCode()ä¸equals()çš„ç›¸å…³è§„å®š**\n\n- å¦‚æœä¸¤ä¸ªå¯¹è±¡çš„hashCodeå€¼ç›¸ç­‰ï¼Œé‚£è¿™ä¸¤ä¸ªå¯¹è±¡ä¸ä¸€å®šç›¸ç­‰ï¼ˆå“ˆå¸Œç¢°æ’ï¼‰ã€‚\n- å¦‚æœä¸¤ä¸ªå¯¹è±¡çš„hashCodeå€¼ç›¸ç­‰å¹¶ä¸”equals()æ–¹æ³•ä¹Ÿè¿”å› trueï¼Œæˆ‘ä»¬æ‰è®¤ä¸ºè¿™ä¸¤ä¸ªå¯¹è±¡ç›¸ç­‰ã€‚\n- å¦‚æœä¸¤ä¸ªå¯¹è±¡çš„hashCodeå€¼ä¸ç›¸ç­‰ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç›´æ¥è®¤ä¸ºè¿™ä¸¤ä¸ªå¯¹è±¡ä¸ç›¸ç­‰ã€‚\n\n#### åªé‡å†™ hashCode å¯ä»¥å—ï¼Ÿ\n\nå¦‚æœåªé‡å†™ hashCodeï¼Œä¸é‡å†™ equalsï¼Œé‚£ä¹ˆå¦‚æœä¸¤ä¸ªå¯¹è±¡åˆ¤æ–­ hashCode ç›¸åŒäº†ï¼Œä»¥ä¸ºè¿™ä¿©å¯¹è±¡ç›¸åŒï¼Œé‚£ä¹ˆåªä¼šæ’å…¥ä¸€æ¬¡åˆ° set é‡Œé¢ï¼Œè€Œå®é™…ä¸Šè¿™ä¸¤ä¸ªä¸ä¸€æ ·ä¸€ä¸ªæ˜¯ A ä¸€ä¸ªæ˜¯ Bï¼Œéƒ½éœ€è¦æ’å…¥ã€‚\n\n> ä¸¤ä¸ªå¯¹è±¡çš„ hashCode ç›¸åŒï¼Œä½†æ˜¯å†…å®¹å¯èƒ½ä¸åŒï¼Œåœ¨ set ä¸­æ˜æ˜åº”è¯¥æ˜¯ä¸¤ä¸ªä¸åŒçš„å¯¹è±¡ï¼Œè¿™æ—¶å€™åªé€šè¿‡ hashCode åˆ¤æ–­ä»–ä¿©ç›¸åŒä¼šå¯¼è‡´åªæ’å…¥ä¸€ä¸ªå…ƒç´ ã€‚\n\n#### åªé‡å†™ equalså¯ä»¥å—ï¼Ÿ\n\nå¦‚æœåœ¨é‡å†™ equals æ—¶ï¼Œä¸é‡å†™ hashCodeï¼Œå°±ä¼šå¼•èµ·æ¯”å¦‚è¯´å°†ä¸¤ä¸ªç›¸ç­‰çš„è‡ªå®šä¹‰å¯¹è±¡å­˜å‚¨åœ¨ Set é›†åˆæ—¶ï¼Œä¼šå°†è¿™ä¸¤ä¸ªå¯¹è±¡éƒ½è¿›è¡Œæ’å…¥ã€‚ï¼ˆæ— æ³•å»é‡ï¼‰\n\n> å¦‚æœå®šä¹‰ä¸€ä¸ªseté‡Œé¢å­˜æ”¾Personå¯¹è±¡ï¼ŒPersonåªé‡å†™äº†equalsæ–¹æ³•å³å¯ä»¥åˆ¤æ–­å¯¹è±¡å†…å®¹æ˜¯å¦ç›¸åŒã€‚\n>\n> å¦‚æœåªé‡å†™äº† equals æ–¹æ³•ï¼Œé‚£ä¹ˆé»˜è®¤æƒ…å†µä¸‹ï¼ŒSet è¿›è¡Œå»é‡æ“ä½œæ—¶ï¼Œä¼šå…ˆåˆ¤æ–­ä¸¤ä¸ªå¯¹è±¡çš„ hashCode æ˜¯å¦ç›¸åŒï¼Œæ­¤æ—¶å› ä¸ºæ²¡æœ‰é‡å†™ hashCode æ–¹æ³•ï¼Œæ‰€ä»¥ä¼šç›´æ¥æ‰§è¡Œ Object ä¸­çš„ hashCode æ–¹æ³•ï¼Œè€Œ Object ä¸­çš„ hashCode æ–¹æ³•å¯¹æ¯”çš„æ˜¯ä¸¤ä¸ªä¸åŒå¼•ç”¨åœ°å€çš„å¯¹è±¡ï¼Œæ‰€ä»¥ç»“æœæ˜¯ falseï¼Œé‚£ä¹ˆ equals æ–¹æ³•å°±ä¸ç”¨æ‰§è¡Œäº†ï¼Œç›´æ¥è¿”å›çš„ç»“æœå°±æ˜¯ falseï¼šä¸¤ä¸ªå¯¹è±¡ä¸æ˜¯ç›¸ç­‰çš„ï¼Œäºæ˜¯å°±åœ¨ Set é›†åˆä¸­æ’å…¥äº†ä¸¤ä¸ªç›¸åŒçš„å¯¹è±¡ã€‚\n>\n> ä½†æ˜¯ï¼Œå¦‚æœåœ¨é‡å†™ equals æ–¹æ³•æ—¶ï¼Œä¹Ÿé‡å†™äº† hashCode æ–¹æ³•ï¼Œé‚£ä¹ˆåœ¨æ‰§è¡Œåˆ¤æ–­æ—¶ä¼šå»æ‰§è¡Œé‡å†™çš„ hashCode æ–¹æ³•ï¼Œæ­¤æ—¶å¯¹æ¯”çš„æ˜¯ä¸¤ä¸ªå¯¹è±¡çš„æ‰€æœ‰å±æ€§çš„ hashCode æ˜¯å¦ç›¸åŒï¼Œäºæ˜¯è°ƒç”¨ hashCode è¿”å›çš„ç»“æœå°±æ˜¯ trueï¼Œå†å»è°ƒç”¨ equals æ–¹æ³•ï¼Œå‘ç°ä¸¤ä¸ªå¯¹è±¡ç¡®å®æ˜¯ç›¸ç­‰çš„ï¼Œäºæ˜¯å°±è¿”å› true äº†ï¼Œå› æ­¤ Set é›†åˆå°±ä¸ä¼šå­˜å‚¨ä¸¤ä¸ªä¸€æ¨¡ä¸€æ ·çš„æ•°æ®äº†ï¼Œäºæ˜¯æ•´ä¸ªç¨‹åºçš„æ‰§è¡Œå°±æ­£å¸¸äº†ã€‚\n\n### å€¼ä¼ é€’\n\n#### ä¸ºä»€ä¹ˆ Java ä¸­åªæœ‰å€¼ä¼ é€’\n\nJavaé‡‡ç”¨æŒ‰å€¼è°ƒç”¨ï¼Œæ–¹æ³•å¾—åˆ°çš„æ˜¯æ‰€æœ‰å‚æ•°å€¼çš„ä¸€ä¸ªæ‹·è´ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ–¹æ³•ä¸èƒ½ä¿®æ”¹ä¼ é€’ç»™å®ƒçš„ä»»ä½•å‚æ•°å˜é‡çš„å†…å®¹ã€‚\n\nexample 1\n\n```java\npublic static void main(String[] args) {\n    int num1 = 10;\n    int num2 = 20;\n\n    swap(num1, num2);\n\n    System.out.println(\"num1 = \" + num1);\n    System.out.println(\"num2 = \" + num2);\n}\n\npublic static void swap(int a, int b) {\n    int temp = a;\n    a = b;\n    b = temp;\n\n    System.out.println(\"a = \" + a);\n    System.out.println(\"b = \" + b);\n}\n```\n\n**ç»“æœ**ï¼š\n\n```java\na = 20\nb = 10\nnum1 = 10\nnum2 = 20\n```\n\n**è§£æ**ï¼š\n\n![swap(int a, int b)](https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/TyporaNotesaHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy8xNDAyMzk3Mi00ZWQyZjQ0NTlmN2MyYzkwLmpwZw.png)\n\nåœ¨swapæ–¹æ³•ä¸­ï¼Œaã€bçš„å€¼è¿›è¡Œäº¤æ¢ï¼Œå¹¶ä¸ä¼šå½±å“åˆ° num1ã€num2ã€‚å› ä¸ºaã€bä¸­çš„å€¼ï¼Œåªæ˜¯ä» num1ã€num2 çš„å¤åˆ¶è¿‡æ¥çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œaã€bç›¸å½“äºnum1ã€num2 çš„å‰¯æœ¬ï¼Œå‰¯æœ¬çš„å†…å®¹æ— è®ºæ€ä¹ˆä¿®æ”¹ï¼Œéƒ½ä¸ä¼šå½±å“åˆ°åŸä»¶æœ¬èº«ã€‚\n\n**é€šè¿‡ä¸Šé¢ä¾‹å­ï¼Œæˆ‘ä»¬å·²ç»çŸ¥é“äº†ä¸€ä¸ªæ–¹æ³•ä¸èƒ½ä¿®æ”¹ä¸€ä¸ªåŸºæœ¬æ•°æ®ç±»å‹çš„å‚æ•°ï¼Œè€Œå¯¹è±¡å¼•ç”¨ä½œä¸ºå‚æ•°å°±ä¸ä¸€æ ·ï¼Œè¯·çœ‹ example2.**\n\nexample 2\n\n```java\n    public static void main(String[] args) {\n        int[] arr = { 1, 2, 3, 4, 5 };\n        System.out.println(arr[0]);\n        change(arr);\n        System.out.println(arr[0]);\n    }\n\n    public static void change(int[] array) {\n        // å°†æ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ å˜ä¸º0\n        array[0] = 0;\n    }\n```\n\n**ç»“æœ**ï¼š\n\n```undefined\n1\n0\n```\n\n**è§£æ**ï¼š\n\n![change(int[] array)](https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/TyporaNotesaHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy8xNDAyMzk3Mi1kYWI5Mzg5ZWRmMjIxNmIzLmpwZw.png)\n\narray è¢«åˆå§‹åŒ– arr çš„æ‹·è´ä¹Ÿå°±æ˜¯ä¸€ä¸ªå¯¹è±¡çš„å¼•ç”¨ï¼Œä¹Ÿå°±æ˜¯è¯´ array å’Œ arr æŒ‡å‘çš„æ—¶åŒä¸€ä¸ªæ•°ç»„å¯¹è±¡ã€‚ å› æ­¤ï¼Œå¤–éƒ¨å¯¹å¼•ç”¨å¯¹è±¡çš„æ”¹å˜ä¼šåæ˜ åˆ°æ‰€å¯¹åº”çš„å¯¹è±¡ä¸Šã€‚\n\n**é€šè¿‡ example2 æˆ‘ä»¬å·²ç»çœ‹åˆ°ï¼Œå®ç°ä¸€ä¸ªæ”¹å˜å¯¹è±¡å‚æ•°çŠ¶æ€çš„æ–¹æ³•å¹¶ä¸æ˜¯ä¸€ä»¶éš¾äº‹ã€‚ç†ç”±å¾ˆç®€å•ï¼Œæ–¹æ³•å¾—åˆ°çš„æ˜¯å¯¹è±¡å¼•ç”¨çš„æ‹·è´ï¼Œå¯¹è±¡å¼•ç”¨åŠå…¶ä»–çš„æ‹·è´åŒæ—¶å¼•ç”¨åŒä¸€ä¸ªå¯¹è±¡ã€‚**\n\nexample 3\n\n```java\npublic class Test {\n\n    public static void main(String[] args) {\n        Student s1 = new Student(\"å°å¼ \");\n        Student s2 = new Student(\"å°æ\");\n        Test.swap(s1, s2);\n        System.out.println(\"s1:\" + s1.getName());\n        System.out.println(\"s2:\" + s2.getName());\n    }\n\n    public static void swap(Student x, Student y) {\n        Student temp = x;\n        x = y;\n        y = temp;\n        System.out.println(\"x:\" + x.getName());\n        System.out.println(\"y:\" + y.getName());\n    }\n}\n```\n\n**ç»“æœ**ï¼š\n\n```undefined\nx:å°æ\ny:å°å¼ \ns1:å°å¼ \ns2:å°æ\n```\n\n**è§£æ**ï¼š\n\näº¤æ¢ä¹‹å‰ï¼š\n\n![before swap(Student x, Student y)](https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/TyporaNotesaHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy8xNDAyMzk3Mi03MmIwYzFmYjlmM2IwNzc2LmpwZw.png)\n\näº¤æ¢ä¹‹åï¼š\n\n![after swap(Student x, Student y)](https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/TyporaNotesaHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy8xNDAyMzk3Mi0zYWUzNzY4NGNiMzg2Njc4LmpwZw.png)\n\né€šè¿‡ä¸Šé¢ä¸¤å¼ å›¾å¯ä»¥å¾ˆæ¸…æ™°çš„çœ‹å‡ºï¼š **æ–¹æ³•å¹¶æ²¡æœ‰æ”¹å˜å­˜å‚¨åœ¨å˜é‡ s1 å’Œ s2 ä¸­çš„å¯¹è±¡å¼•ç”¨ã€‚swapæ–¹æ³•çš„å‚æ•°xå’Œyè¢«åˆå§‹åŒ–ä¸ºä¸¤ä¸ªå¯¹è±¡å¼•ç”¨çš„æ‹·è´ï¼Œè¿™ä¸ªæ–¹æ³•äº¤æ¢çš„æ˜¯è¿™ä¸¤ä¸ªæ‹·è´**\n\n#### å€¼ä¼ é€’å’Œå¼•ç”¨ä¼ é€’æœ‰ä»€ä¹ˆåŒºåˆ«\n\nå€¼ä¼ é€’ï¼šæŒ‡çš„æ˜¯åœ¨æ–¹æ³•è°ƒç”¨æ—¶ï¼Œä¼ é€’çš„å‚æ•°æ˜¯æŒ‰å€¼çš„æ‹·è´ä¼ é€’ï¼Œä¼ é€’çš„æ˜¯å€¼çš„æ‹·è´ï¼Œä¹Ÿå°±æ˜¯è¯´ä¼ é€’åå°±äº’ä¸ç›¸å…³äº†ã€‚\n\nå¼•ç”¨ä¼ é€’ï¼šæŒ‡çš„æ˜¯åœ¨æ–¹æ³•è°ƒç”¨æ—¶ï¼Œä¼ é€’çš„å‚æ•°æ˜¯æŒ‰å¼•ç”¨è¿›è¡Œä¼ é€’ï¼Œå…¶å®ä¼ é€’çš„å¼•ç”¨çš„åœ°å€ï¼Œä¹Ÿå°±æ˜¯å˜é‡æ‰€å¯¹åº”çš„å†…å­˜ç©ºé—´çš„åœ°å€ã€‚ä¼ é€’çš„æ˜¯å€¼çš„å¼•ç”¨ï¼Œä¹Ÿå°±æ˜¯è¯´ä¼ é€’å‰å’Œä¼ é€’åéƒ½æŒ‡å‘åŒä¸€ä¸ªå¼•ç”¨ï¼ˆä¹Ÿå°±æ˜¯åŒä¸€ä¸ªå†…å­˜ç©ºé—´ï¼‰ã€‚\n\n## IOæµ\n\n> å‚è€ƒï¼šhttps://blog.csdn.net/weixin_44579258/article/details/90758359\n\né˜»å¡å’Œéé˜»å¡æ˜¯æŒ‡è¿›ç¨‹è®¿é—®çš„æ•°æ®å¦‚æœå°šæœªå‡†å¤‡å°±ç»ªï¼Œè¿›ç¨‹æ˜¯å¦éœ€è¦ç­‰å¾…\nåŒæ­¥å’Œå¼‚æ­¥æ˜¯æŒ‡è®¿é—®æ•°æ®çš„æœºåˆ¶ï¼ŒåŒæ­¥ä¸€èˆ¬ä¸»åŠ¨è¯·æ±‚ç­‰å¾…IOæ“ä½œå®Œæ¯•çš„æ–¹å¼ã€‚å½“æ•°æ®å°±ç»ªåï¼Œå†è¯»å†™çš„æ—¶å€™å¿…é¡»é˜»å¡ï¼Œå¼‚æ­¥åˆ™ä¸»åŠ¨è¯·æ±‚æ•°æ®åä¾¿å¯ä»¥ç»§ç»­å¤„ç†å…¶ä»–ä»»åŠ¡ï¼Œéšåç­‰å¾…IOå®Œæ¯•é€šçŸ¥ï¼Œè¿™å¯ä»¥ä½¿è¿›ç¨‹åœ¨æ•°æ®è¯»å†™æ—¶ä¹Ÿä¸é˜»å¡\n\nå‡†å¤‡æ•°æ®ï¼šç½‘å¡ â†’ å†…æ ¸\næ•°æ®å°±ç»ªï¼šæ•°æ®æ‹·è´åˆ°äº†å†…æ ¸\næ‹·è´æ•°æ®ï¼šå°†å†…æ ¸æ•°æ®æ‹·è´åˆ°ç”¨æˆ·ç©ºé—´\n\n### Blocking I/O\n\n**BIO å±äºåŒæ­¥é˜»å¡ IO æ¨¡å‹** ã€‚\n\nåŒæ­¥é˜»å¡ IO æ¨¡å‹ä¸­ï¼Œåº”ç”¨ç¨‹åº**å‘èµ· read è°ƒç”¨**åï¼Œä¼šä¸€ç›´é˜»å¡ï¼Œç›´åˆ°å†…æ ¸å‡†å¤‡æ•°æ®ã€æ•°æ®å°±ç»ªï¼Œæ•°æ®ä»å†…æ ¸æ‹·è´åˆ°ç”¨æˆ·ç©ºé—´ã€‚\n\n![BIO](https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/TyporaNotes20190603201109632.png)\n\n### NIO (Non-blocking I/O)\n\nåŒæ­¥éé˜»å¡ IO æ¨¡å‹ä¸­ï¼Œç”¨æˆ·è¿›ç¨‹ä¼š**ä¸€ç›´å‘èµ· read è°ƒç”¨**ï¼ˆå¦‚æœå†…æ ¸è¿”å›erroråˆ™è¯´æ˜æ•°æ®æœªå‡†å¤‡å°±ç»ªï¼‰ï¼Œç›´åˆ°æ•°æ®å‡†å¤‡å°±ç»ªï¼Œç”¨æˆ·å‘èµ· read è°ƒç”¨æ—¶ï¼Œæ•°æ®ä»å†…æ ¸ç©ºé—´æ‹·è´åˆ°ç”¨æˆ·ç©ºé—´ï¼ˆç”¨æˆ·è¿›ç¨‹æ˜¯é˜»å¡çš„ï¼‰ã€‚\n\n> ç›¸æ¯”äºåŒæ­¥é˜»å¡ IO æ¨¡å‹ï¼ŒåŒæ­¥éé˜»å¡ IO æ¨¡å‹ç¡®å®æœ‰äº†å¾ˆå¤§æ”¹è¿›ã€‚é€šè¿‡è½®è¯¢æ“ä½œï¼Œé¿å…äº†ä¸€ç›´é˜»å¡ã€‚\n\n![NIO](https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/TyporaNotes20190603201218527.png)\n\n### IOå¤šè·¯å¤ç”¨ï¼ˆNIOï¼‰\n\nselect/epollçš„å¥½å¤„å°±åœ¨äºå•ä¸ªprocesså°±å¯ä»¥åŒæ—¶å¤„ç†å¤šä¸ªç½‘ç»œè¿æ¥çš„IOã€‚\n\n![NIO](https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/TyporaNotes2019060320125821.png)\n\nIOå¤ç”¨å’ŒåŒæ­¥é˜»å¡æœ¬è´¨ä¸€æ ·ï¼Œåœ¨NIOä¸­ï¼Œæ¯æ¬¡ç”¨æˆ·è¿›ç¨‹è¿›è¡Œreadè½®è¯¢æ•°æ®æ˜¯å¦å‡†å¤‡å°±ç»ªï¼Œè€Œåœ¨IOå¤šè·¯å¤ç”¨ä¸­ï¼Œåˆ©ç”¨äº†æ–°çš„selectç³»ç»Ÿè°ƒç”¨ï¼Œç”±å†…æ ¸æ¥è´Ÿè´£æœ¬æ¥æ˜¯è¯·æ±‚è¿›ç¨‹è¯¥åšçš„è½®è¯¢æ“ä½œã€‚\n\nå½“ç”¨æˆ·çº¿ç¨‹è°ƒç”¨selectï¼Œé‚£ä¹ˆæ•´ä¸ªè¿›ç¨‹ä¼šè¢«é˜»å¡ï¼Œè€ŒåŒæ—¶ï¼Œkernelå†…æ ¸ä¼šâ€œç›‘è§†â€æ‰€æœ‰selectè´Ÿè´£çš„socketï¼Œå½“ä»»ä½•ä¸€ä¸ªsocketä¸­çš„æ•°æ®å‡†å¤‡å¥½äº†ï¼Œselectå°±ä¼šè¿”å›å¯è¯»æ¡ä»¶è®©ç”¨æˆ·è¿›ç¨‹å‘èµ·readè°ƒç”¨ï¼Œç”¨æˆ·è¿›ç¨‹å‘èµ·è°ƒç”¨readæ“ä½œï¼Œå°†æ•°æ®ä»å†…æ ¸ç©ºé—´æ‹·è´åˆ°ç”¨æˆ·ç©ºé—´ã€‚\n\n\n### Asynchronous I/O\n\nå¼‚æ­¥ IO æ˜¯åŸºäºäº‹ä»¶å’Œå›è°ƒæœºåˆ¶å®ç°çš„ï¼Œä¹Ÿå°±æ˜¯åº”ç”¨æ“ä½œä¹‹åä¼šç›´æ¥è¿”å›ï¼Œä¸ä¼šå µå¡åœ¨é‚£é‡Œï¼Œå½“åå°å¤„ç†å®Œæˆï¼Œæ“ä½œç³»ç»Ÿä¼šé€šçŸ¥ç›¸åº”çš„çº¿ç¨‹è¿›è¡Œåç»­çš„æ“ä½œã€‚\n\nç”¨æˆ·å‘èµ·readè°ƒç”¨ï¼Œæ­¤æ—¶ç”¨æˆ·è¿›ç¨‹ä¸ä¼šé˜»å¡ã€‚å†…æ ¸å°†æ•°æ®å‡†å¤‡å°±ç»ªå¹¶å°†å…¶ä»å†…æ ¸æ‹·è´åˆ°ç”¨æˆ·ç©ºé—´åï¼Œå†…æ ¸ç»™ç”¨æˆ·è¿›ç¨‹å‘é€ä¸€ä¸ªä¿¡å·ç»™ä¹‹å‰è°ƒç”¨readçš„è¿›ç¨‹ï¼Œæ•°æ®å·²ç»æ‹·è´åˆ°ç”¨æˆ·ç©ºé—´äº†ã€‚\n\n![AIO](https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/TyporaNotes2019060320135956.png)\n\n## åå°„\n\n### ä»€ä¹ˆæ˜¯åå°„æœºåˆ¶ï¼Ÿ\n\nJAVAåå°„æœºåˆ¶æ˜¯åœ¨è¿è¡ŒçŠ¶æ€ä¸­ï¼Œå¯¹äºä»»æ„ä¸€ä¸ªç±»ï¼Œéƒ½èƒ½å¤ŸçŸ¥é“è¿™ä¸ªç±»çš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•ï¼›å¯¹äºä»»æ„ä¸€ä¸ªå¯¹è±¡ï¼Œéƒ½èƒ½å¤Ÿè°ƒç”¨å®ƒçš„ä»»æ„ä¸€ä¸ªæ–¹æ³•å’Œå±æ€§ï¼›è¿™ç§åŠ¨æ€è·å–çš„ä¿¡æ¯ä»¥åŠåŠ¨æ€è°ƒç”¨å¯¹è±¡çš„æ–¹æ³•çš„åŠŸèƒ½ç§°ä¸ºJavaè¯­è¨€çš„åå°„æœºåˆ¶ã€‚\n\n### åå°„æœºåˆ¶ä¼˜ç¼ºç‚¹\n\n- **ä¼˜ç‚¹ï¼š** è¿è¡ŒæœŸç±»å‹çš„åˆ¤æ–­ï¼ŒåŠ¨æ€åŠ è½½ç±»ï¼Œæé«˜ä»£ç çµæ´»åº¦ã€‚\n- **ç¼ºç‚¹ï¼š** æ€§èƒ½ç“¶é¢ˆï¼šåå°„ç›¸å½“äºä¸€ç³»åˆ—è§£é‡Šæ“ä½œï¼Œé€šçŸ¥ JVM è¦åšçš„äº‹æƒ…ï¼Œæ€§èƒ½æ¯”ç›´æ¥çš„Javaä»£ç è¦æ…¢å¾ˆå¤šã€‚\n\n### åå°„æœºåˆ¶çš„åº”ç”¨åœºæ™¯æœ‰å“ªäº›ï¼Ÿ\n\nâ‘ æˆ‘ä»¬åœ¨ä½¿ç”¨JDBCè¿æ¥æ•°æ®åº“æ—¶ä½¿ç”¨Class.forName()é€šè¿‡åå°„åŠ è½½æ•°æ®åº“çš„é©±åŠ¨ç¨‹åºï¼›\n\nâ‘¡Spring é€šè¿‡ XML é…ç½®æ¨¡å¼è£…è½½ Bean çš„è¿‡ç¨‹\n\n1. åŠ è½½é…ç½®æ–‡ä»¶ï¼Œè§£ææˆ BeanDefinition æ”¾åœ¨ Map é‡Œï¼Œmapä¸­å­˜æ”¾`<BeanNameï¼ŒClasså¯¹è±¡>`çš„æ˜ å°„\n2. è°ƒç”¨ getBean çš„æ—¶å€™ï¼Œä» BeanDefinition æ‰€å±çš„ Map é‡Œï¼Œæ‹¿å‡º Class å¯¹è±¡ä½¿ç”¨åå°„è¿›è¡Œå®ä¾‹åŒ–ï¼ŒåŒæ—¶ï¼Œå¦‚æœæœ‰ä¾èµ–å…³ç³»ï¼Œå°†é€’å½’è°ƒç”¨ getBean æ–¹æ³• â€”â€” å®Œæˆä¾èµ–æ³¨å…¥\n\n### Javaè·å–åå°„çš„ä¸‰ç§æ–¹æ³•\n\n1.é€šè¿‡newå¯¹è±¡å®ç°åå°„æœºåˆ¶ 2.é€šè¿‡è·¯å¾„å®ç°åå°„æœºåˆ¶ 3.é€šè¿‡ç±»åå®ç°åå°„æœºåˆ¶\n\n## åŒ…è£…ç±»\n\n#### è‡ªåŠ¨è£…ç®±ä¸æ‹†ç®±\n\n**è£…ç®±**ï¼šå°†åŸºæœ¬ç±»å‹ç”¨å®ƒä»¬å¯¹åº”çš„å¼•ç”¨ç±»å‹åŒ…è£…èµ·æ¥ï¼›`Integer a = 1;`\n\n**æ‹†ç®±**ï¼šå°†åŒ…è£…ç±»å‹è½¬æ¢ä¸ºåŸºæœ¬æ•°æ®ç±»å‹ï¼›`int b = a;`\n\n#### int å’Œ Integer æœ‰ä»€ä¹ˆåŒºåˆ«\n\nå¼•å…¥åŒ…è£…ç±»æ˜¯ä¸ºäº†èƒ½å¤Ÿå°†è¿™äº›**åŸºæœ¬æ•°æ®ç±»å‹å½“æˆå¯¹è±¡æ“ä½œ**\n\nJava ä¸ºæ¯ä¸ªåŸå§‹ç±»å‹æä¾›äº†åŒ…è£…ç±»å‹ï¼š\n\nåŸå§‹ç±»å‹: booleanï¼Œcharï¼Œbyteï¼Œshortï¼Œintï¼Œlongï¼Œfloatï¼Œdouble\n\nåŒ…è£…ç±»å‹ï¼šBooleanï¼ŒCharacterï¼ŒByteï¼ŒShortï¼ŒIntegerï¼ŒLongï¼ŒFloatï¼ŒDouble\n\n#### Integer a = 127 ä¸ Integer b = 127ç›¸ç­‰å—\n\n> åŒ…è£…ç±»å’ŒåŸºæœ¬æ•°æ®ç±»å‹æ¯”è¾ƒï¼Œä¼šå°†åŒ…è£…ç±»æ‹†ç®±æˆåŸºæœ¬æ•°æ®ç±»å‹ç„¶åæ¯”è¾ƒï¼Œ\n>\n> åªæœ‰å½“åŒ…è£…ç±»æ˜¯è‡ªåŠ¨è£…ç®±ï¼Œå¹¶ä¸”æ•°å€¼èŒƒå›´åœ¨ [-128, 127] æ—¶ï¼Œæ‰ä¼šä½¿ç”¨ cache ä¸­çš„å¯¹è±¡ã€‚\n\nå¯¹äºå¯¹è±¡å¼•ç”¨ç±»å‹ï¼š==æ¯”è¾ƒçš„æ˜¯å¯¹è±¡çš„å†…å­˜åœ°å€ã€‚\nå¯¹äºåŸºæœ¬æ•°æ®ç±»å‹ï¼š==æ¯”è¾ƒçš„æ˜¯å€¼ã€‚\n\n```java\npublic static void main(String[] args) {\n    Integer a = new Integer(3);\n  \tInteger b = 3;\n    int c = 3;\n    Integer d = 3;\n    System.out.println(a == b); // falseï¼Œä¸¤ä¸ªå¯¹è±¡æ¯”è¾ƒ\n    System.out.println(a == c); // trueï¼Œaè‡ªåŠ¨æ‹†ç®±\n    System.out.println(b == c); // trueï¼Œbè‡ªåŠ¨æ‹†ç®±\n    System.out.println(b == d); // trueï¼ŒåŒ…è£…ç±»è‡ªåŠ¨è£…ç®±ä¸”æ•°å€¼èŒƒå›´åœ¨cacheèŒƒå›´å†…\n\n    Integer a = new Integer(128);\n    Integer b = 128;\n    int c = 128;\n    Integer d = 128;\n    System.out.println(a == b); // falseï¼Œä¸¤ä¸ªå¯¹è±¡æ¯”è¾ƒ\n    System.out.println(a == c); // trueï¼Œaè‡ªåŠ¨æ‹†ç®±\n    System.out.println(b == c); // trueï¼Œbè‡ªåŠ¨æ‹†ç®±\n    System.out.println(b == d); // falseï¼ŒåŒ…è£…ç±»è‡ªåŠ¨è£…ç®±ä½†æ˜¯æ•°å€¼èŒƒå›´ä¸åœ¨cacheèŒƒå›´å†…\n}\n```\n\n","source":"_posts/Javaå…«è‚¡æ–‡ - JavaåŸºç¡€.md","raw":"---\ntitle: Javaå…«è‚¡æ–‡ - JavaåŸºç¡€\ncopyright: true\nmathjax: false\ncategories:\n  - Javaå…«è‚¡æ–‡\ndate: 2023-01-23 10:05:51\ntags:\ntoc: true\nurlname: java-basic-knowledge\n---\n\n> æ•´ç†çš„JavaåŸºç¡€ç›¸å…³çŸ¥è¯†ç‚¹å’Œé¢è¯•é¢˜ï¼Œéƒ¨åˆ†å†…å®¹æ‘˜è‡ªç½‘ç»œï¼Œå¦‚æœ‰ä¾µæƒè¯·è”ç³»æˆ‘ï½\t<!--more-->\n\n## Javaæ¦‚è¿°\n\n### JVMã€JREå’ŒJDKçš„å…³ç³»\n\nJVMï¼šJava Virtual Machineï¼ŒJavaè™šæ‹Ÿæœºï¼ŒJavaç¨‹åºéœ€è¦è¿è¡Œåœ¨è™šæ‹Ÿæœºä¸Šï¼Œä¸åŒçš„å¹³å°æœ‰è‡ªå·±çš„è™šæ‹Ÿæœºï¼Œå› æ­¤Javaè¯­è¨€å¯ä»¥å®ç°è·¨å¹³å°ã€‚\n\nJREï¼šJava Runtime Environmentï¼ŒJavaè¿è¡Œç¯å¢ƒï¼ŒåŒ…æ‹¬Javaè™šæ‹Ÿæœºå’ŒJavaç¨‹åºæ‰€éœ€çš„æ ¸å¿ƒç±»åº“ç­‰ã€‚\n\nJDKï¼šJava Development Kitï¼ŒJavaå¼€å‘å·¥å…·åŒ…ï¼ŒåŒ…æ‹¬äº†JREå’Œå¼€å‘å·¥å…·ã€‚\n\n### ä»€ä¹ˆæ˜¯è·¨å¹³å°æ€§ï¼ŸåŸç†æ˜¯ä»€ä¹ˆ\n\næ‰€è°“è·¨å¹³å°æ€§ï¼Œæ˜¯æŒ‡Javaè¯­è¨€ç¼–å†™çš„ç¨‹åºï¼Œä¸€æ¬¡ç¼–è¯‘ï¼Œåˆ°å¤„è¿è¡Œã€‚\n\nå®ç°åŸç†ï¼šJavaç¨‹åºæ˜¯é€šè¿‡Javaè™šæ‹Ÿæœºåœ¨ç³»ç»Ÿå¹³å°ä¸Šè¿è¡Œçš„ï¼Œåªè¦è¯¥ç³»ç»Ÿå¯ä»¥å®‰è£…ç›¸åº”çš„Javaè™šæ‹Ÿæœºï¼Œè¯¥ç³»ç»Ÿå°±å¯ä»¥è¿è¡ŒJavaç¨‹åºã€‚\n\n### Javaè¯­è¨€æœ‰å“ªäº›ç‰¹ç‚¹\n\né¢å‘å¯¹è±¡ï¼ˆå°è£…ï¼Œç»§æ‰¿ï¼Œå¤šæ€ï¼‰\n\nå¹³å°æ— å…³æ€§ï¼ˆJavaè™šæ‹Ÿæœºå®ç°å¹³å°æ— å…³æ€§ï¼‰\n\n### ä»€ä¹ˆæ˜¯å­—èŠ‚ç ï¼Ÿé‡‡ç”¨å­—èŠ‚ç çš„æœ€å¤§å¥½å¤„æ˜¯ä»€ä¹ˆ\n\n**å­—èŠ‚ç **ï¼šJavaæºä»£ç ç»è¿‡è™šæ‹Ÿæœºç¼–è¯‘å™¨ç¼–è¯‘åäº§ç”Ÿçš„æ–‡ä»¶ï¼ˆå³æ‰©å±•ä¸º.classçš„æ–‡ä»¶ï¼‰ï¼Œå®ƒä¸é¢å‘ä»»ä½•ç‰¹å®šçš„å¤„ç†å™¨ï¼Œåªé¢å‘è™šæ‹Ÿæœºã€‚ï¼ˆjavac HelloWorld.Java â†’ HelloWorld.class â†’ Java HelloWorldæ‰§è¡Œç¨‹åºï¼‰\n\n**ç¼–è¯‘ä¸è§£é‡Šå¹¶å­˜**\n\nJavaæºä»£ç (.Javaæ–‡ä»¶)---->ç¼–è¯‘å™¨---->jvmå¯æ‰§è¡Œçš„Javaå­—èŠ‚ç (.classæ–‡ä»¶)---->jvm---->jvmä¸­è§£é‡Šå™¨----->æœºå™¨å¯æ‰§è¡Œçš„äºŒè¿›åˆ¶æœºå™¨ç ---->ç¨‹åºè¿è¡Œ\n\n### ä»€ä¹ˆæ˜¯Javaç¨‹åºçš„ä¸»ç±»ï¼Ÿ\n\nä¸€ä¸ªç¨‹åºä¸­å¯ä»¥æœ‰å¤šä¸ªç±»ï¼Œä½†åªèƒ½æœ‰ä¸€ä¸ªç±»æ˜¯ä¸»ç±»ã€‚åœ¨Javaåº”ç”¨ç¨‹åºä¸­ï¼Œè¿™ä¸ªä¸»ç±»æ˜¯æŒ‡åŒ…å«main()æ–¹æ³•çš„ç±»ã€‚\nä¸»ç±»æ˜¯Javaç¨‹åºæ‰§è¡Œçš„å…¥å£ã€‚ï¼ˆmainæ–¹æ³•é™¤äº†æ˜¯ä¸ªä¸»æ–¹æ³•ä»¥å¤–ï¼Œå’Œæ™®é€šçš„é™æ€æ–¹æ³•æ²¡æœ‰åŒºåˆ«ï¼Œéƒ½å¯ä»¥é‡è½½ã€è°ƒç”¨ã€ç»§æ‰¿ï¼‰\n\n### Javaå’ŒC++çš„åŒºåˆ«\n\nç›¸åŒç‚¹ï¼šéƒ½æ˜¯**é¢å‘å¯¹è±¡**çš„è¯­è¨€ï¼Œéƒ½æ”¯æŒ**å°è£…ã€ç»§æ‰¿å’Œå¤šæ€**\n\nä¸åŒç‚¹ï¼š\n\n- **Javaä¸æä¾›æŒ‡é’ˆ**æ¥ç›´æ¥è®¿é—®å†…å­˜ï¼Œç¨‹åºå†…å­˜æ›´åŠ å®‰å…¨ï¼Œæœ‰è‡ªåŠ¨å†…å­˜ç®¡ç†ï¼›C++ç”¨æŒ‡é’ˆç®¡ç†å†…å­˜\n\n- Javaçš„**ç±»æ˜¯å•ç»§æ‰¿**çš„ï¼ŒC++æ”¯æŒå¤šé‡ç»§æ‰¿ï¼›è™½ç„¶Javaçš„ç±»ä¸å¯ä»¥å¤šç»§æ‰¿ï¼Œä½†æ˜¯æ¥å£å¯ä»¥å¤šç»§æ‰¿ã€‚\n\n\tä¸ºä»€ä¹ˆJavaä¸­ç±»ä¸æ”¯æŒå¤šç»§æ‰¿ï¼Ÿâ€”â€”å¤šé‡ç»§æ‰¿çš„é’»çŸ³é—®é¢˜\n\n\t![å¤šé‡ç»§æ‰¿çš„é’»çŸ³é—®é¢˜](https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/TyporaNotes20190622142003813.png)\n\tç±» B å’Œç±» C ç»§æ‰¿è‡ªç±» Aï¼Œä¸”éƒ½é‡å†™äº†ç±» A ä¸­çš„åŒä¸€ä¸ªæ–¹æ³•ï¼Œè€Œç±» D åŒæ—¶ç»§æ‰¿äº†ç±» B å’Œç±» Cï¼ˆå¤šç»§æ‰¿)ï¼Œé‚£ä¹ˆæ­¤æ—¶ç±» D ä¼šç»§æ‰¿ Bã€C çš„æ–¹æ³•ï¼Œé‚£å¯¹äº Bã€C é‡å†™çš„ A ä¸­çš„æ–¹æ³•ï¼Œç±» D ä¼šç»§æ‰¿å“ªä¸€ä¸ªå‘¢ï¼Ÿ\n\n- Javaæœ‰**è‡ªåŠ¨å†…å­˜ç®¡ç†**æœºåˆ¶ï¼Œä¸éœ€è¦ç¨‹åºå‘˜æ‰‹åŠ¨é‡Šæ”¾æ— ç”¨å†…å­˜\n\n## åŸºç¡€è¯­æ³•\n\n### æ•°æ®ç±»å‹\n\n**å®šä¹‰**ï¼šJavaè¯­è¨€æ˜¯å¼ºç±»å‹è¯­è¨€ï¼Œå¯¹äºæ¯ä¸€ç§æ•°æ®éƒ½å®šä¹‰äº†æ˜ç¡®çš„å…·ä½“çš„æ•°æ®ç±»å‹ï¼Œåœ¨å†…å­˜ä¸­åˆ†é…äº†ä¸åŒå¤§å°çš„å†…å­˜ç©ºé—´ã€‚\n\n**åˆ†ç±»**\n\n- åŸºæœ¬æ•°æ®ç±»å‹\n\t- æ•°å€¼å‹\n\t\t- æ•´æ•°ç±»å‹(byte,short,int,long)\n\t\t- æµ®ç‚¹ç±»å‹(float,double)\n\t- å­—ç¬¦å‹(char)\n\t- å¸ƒå°”å‹(boolean)\n- å¼•ç”¨æ•°æ®ç±»å‹\n\t- ç±»(class)\n\t- æ¥å£(interface)\n\t- æ•°ç»„([])\n\n**JavaåŸºæœ¬æ•°æ®ç±»å‹å›¾**\n\n![JavaåŸºæœ¬æ•°æ®ç±»å‹å›¾](https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/TyporaNotesaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL0pvdXJXb24vaW1hZ2UvbWFzdGVyL0phdmElRTUlOUYlQkElRTclQTElODAlRTglQUYlQUQlRTYlQjMlOTUvSmF2YSVFNSU5RiVCQSVFNiU5QyVBQyVFNiU5NSVCMCVFNiU4RCVBRSVFNyVCMSVCQiVFNSU5RSU4Qi5wbmc.png)\n\n### ç±»å‹è½¬æ¢\n\nè‡ªåŠ¨ç±»å‹è½¬æ¢\n\n> ä¸¤ç§æ•°æ®ç±»å‹å½¼æ­¤å…¼å®¹\n>\n> ä½çº§ç±»å‹æ•°æ®è½¬æ¢æˆé«˜çº§ç±»å‹æ•°æ®\n\n- æ•°å€¼å‹æ•°æ®çš„è½¬æ¢ï¼šbyteâ†’shortâ†’intâ†’longâ†’floatâ†’double\n- å­—ç¬¦å‹è½¬æ¢ä¸ºæ•´å‹ï¼šcharâ†’intã€‚\n\nå¼ºåˆ¶ç±»å‹è½¬æ¢\n\n> å½“ä¸¤ç§æ•°æ®ç±»å‹ä¸å…¼å®¹ï¼Œæˆ–é«˜çº§ç±»å‹æ•°æ®è½¬æ¢æˆä½çº§ç±»å‹æ•°æ®æ—¶ï¼Œè‡ªåŠ¨è½¬æ¢å°†æ— æ³•è¿›è¡Œï¼ˆç¼–è¯‘é”™è¯¯ï¼‰ï¼Œè¿™æ—¶å°±éœ€è¦è¿›è¡Œå¼ºåˆ¶ç±»å‹è½¬æ¢\n\n### è®¿é—®ä¿®é¥°ç¬¦\n\n![è®¿é—®ä¿®é¥°ç¬¦](https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/TyporaNotesaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL0pvdXJXb24vaW1hZ2UvbWFzdGVyL0phdmElRTUlOUYlQkElRTclQTElODAlRTglQUYlQUQlRTYlQjMlOTUvSmF2YSVFOCVBRSVCRiVFOSU5NyVBRSVFNCVCRiVBRSVFOSVBNSVCMCVFNyVBQyVBNi5wbmc.png)\n\n### å…³é”®å­—\n\n#### final æœ‰ä»€ä¹ˆç”¨ï¼Ÿ\n\nç”¨äºä¿®é¥°ç±»ã€æ–¹æ³•å’Œå˜é‡ï¼›\n\n- è¢«finalä¿®é¥°çš„ç±»ä¸å¯ä»¥è¢«ç»§æ‰¿\n\n- è¢«finalä¿®é¥°çš„æ–¹æ³•ä¸å¯ä»¥è¢«é‡å†™\n\n- è¢«finalä¿®é¥°çš„å˜é‡ä¸å¯ä»¥è¢«æ”¹å˜ï¼Œè¢«finalä¿®é¥°**ä¸å¯å˜çš„æ˜¯å˜é‡çš„å¼•ç”¨ï¼Œè€Œä¸æ˜¯å¼•ç”¨æŒ‡å‘çš„å†…å®¹**ï¼Œå¼•ç”¨æŒ‡å‘çš„å†…å®¹æ˜¯å¯ä»¥æ”¹å˜\n\n\t```java\n\tfinal int[] nums = new int[]{1, 2, 3};\n\tnums[0] = 11;\n\tSystem.out.println(Arrays.toString(nums));\t// [11, 2, 3]\n\t```\n\n#### finalã€finallyã€finalizeåŒºåˆ«\n\n- finalæ˜¯Javaä¿®é¥°ç¬¦ï¼Œå¯ä»¥ä¿®é¥°ç±»ã€æ–¹æ³•ã€å˜é‡ï¼Œä¿®é¥°ç±»è¡¨ç¤ºè¯¥ç±»ä¸èƒ½è¢«ç»§æ‰¿ã€ä¿®é¥°æ–¹æ³•è¡¨ç¤ºè¯¥æ–¹æ³•ä¸èƒ½è¢«é‡å†™ã€ä¿®é¥°å˜é‡è¡¨ç¤ºè¯¥å˜é‡ä¸å¯ä»¥è¢«æ”¹å˜ã€‚\n- finallyä¸€èˆ¬ä½œç”¨åœ¨try-catchä»£ç å—ä¸­ï¼Œåœ¨å¤„ç†å¼‚å¸¸çš„æ—¶å€™ï¼Œé€šå¸¸æˆ‘ä»¬å°†ä¸€å®šè¦æ‰§è¡Œçš„ä»£ç æ–¹æ³•finallyä»£ç å—\n\tä¸­ï¼Œè¡¨ç¤ºä¸ç®¡æ˜¯å¦å‡ºç°å¼‚å¸¸ï¼Œè¯¥ä»£ç å—éƒ½ä¼šæ‰§è¡Œï¼Œä¸€èˆ¬ç”¨æ¥å­˜æ”¾ä¸€äº›å…³é—­èµ„æºçš„ä»£ç ã€‚\n- finalizeæ˜¯Objectç±»çš„ä¸€ä¸ªæ–¹æ³•ï¼Œè¯¥æ–¹æ³•ä¸€èˆ¬ç”±åƒåœ¾å›æ”¶å™¨æ¥è°ƒç”¨ï¼Œåœ¨æ‰§è¡Œåƒåœ¾å›æ”¶å‰ï¼Œç”±åƒåœ¾å›æ”¶å™¨è°ƒç”¨å¯¹è±¡çš„finalize()æ–¹æ³•ï¼Œå¹¶ä¸”åœ¨è¯¥æ–¹æ³•ä¸­å¯¹è±¡å¯èƒ½å¯ä»¥å¤æ´»ã€‚\n\n#### thiså…³é”®å­—çš„ç”¨æ³•\n\næŒ‡å‘å¯¹è±¡æœ¬èº«çš„ä¸€ä¸ªæŒ‡é’ˆã€‚\n\n#### superå…³é”®å­—çš„ç”¨æ³•\n\næŒ‡å‘è‡ªå·±çˆ¶ç±»å¯¹è±¡ï¼ˆæœ€è¿‘çš„çˆ¶ç±»ï¼‰çš„ä¸€ä¸ªæŒ‡é’ˆã€‚\n\n#### staticå­˜åœ¨çš„ä¸»è¦æ„ä¹‰\n\nstatic**é™æ€å˜é‡**ï¼šå’Œç±»ä¸€èµ·åŠ è½½ï¼Œ**ä»¥è‡´äºå³ä½¿æ²¡æœ‰åˆ›å»ºå¯¹è±¡ï¼Œä¹Ÿèƒ½ä½¿ç”¨å±æ€§å’Œè°ƒç”¨æ–¹æ³•ã€‚**\n\nstatic**é™æ€ä»£ç å—**ï¼šåœ¨ç±»åˆæ¬¡è¢«åŠ è½½çš„æ—¶å€™ï¼Œä¼šæŒ‰ç…§staticå—çš„é¡ºåºæ¥æ‰§è¡Œæ¯ä¸ªstaticå—ï¼Œå¹¶ä¸”åªä¼šæ‰§è¡Œä¸€æ¬¡ã€‚\nåŠ è½½ â†’ é“¾æ¥ï¼ˆéªŒè¯ã€å‡†å¤‡ã€è§£æï¼‰ â†’ åˆå§‹åŒ–\n\nstaticç±»å‹çš„å˜é‡åœ¨å‡†å¤‡é˜¶æ®µè¿›è¡Œé»˜è®¤åˆå§‹åŒ–ï¼Œä½†æ˜¯æœ‰static finalä¿®é¥°çš„ä¼šåœ¨å‡†å¤‡é˜¶æ®µç›´æ¥èµ‹å€¼ï¼Œ åœ¨åˆå§‹åŒ–é˜¶æ®µè¿›è¡Œæ˜¾å¼åˆå§‹åŒ–ã€‚\n\n#### staticæ³¨æ„äº‹é¡¹\n\n1ã€é™æ€åªèƒ½è®¿é—®é™æ€ã€‚ 2ã€éé™æ€æ—¢å¯ä»¥è®¿é—®éé™æ€çš„ï¼Œä¹Ÿå¯ä»¥è®¿é—®é™æ€çš„ã€‚\n\n### åˆå§‹åŒ–é¡ºåº\n\né™æ€å±æ€§ â†’ é™æ€æ–¹æ³•å— â†’ æ™®é€šå±æ€§ â†’ æ™®é€šæ–¹æ³•å— â†’ æ„é€ å‡½æ•°\n\n### æµç¨‹æ§åˆ¶è¯­å¥\n\n#### break ã€continueã€return çš„åŒºåˆ«åŠä½œç”¨\n\nbreak ç»“æŸå½“å‰çš„å¾ªç¯ä½“\n\ncontinue ç»“æŸæ­£åœ¨æ‰§è¡Œçš„å¾ªç¯ï¼Œè¿›å…¥ä¸‹ä¸€ä¸ªå¾ªç¯æ¡ä»¶\n\nreturn ç»“æŸå½“å‰çš„æ–¹æ³•ï¼Œç›´æ¥è¿”å›\n\n#### è·³å‡ºå½“å‰çš„å¤šé‡åµŒå¥—å¾ªç¯\n\nåœ¨Javaä¸­ï¼Œè¦æƒ³è·³å‡ºå¤šé‡å¾ªç¯ï¼Œå¯ä»¥åœ¨å¤–é¢çš„å¾ªç¯è¯­å¥å‰å®šä¹‰ä¸€ä¸ªæ ‡å·ï¼Œç„¶ååœ¨é‡Œå±‚å¾ªç¯ä½“çš„ä»£ç ä¸­ä½¿ç”¨å¸¦æœ‰æ ‡å·çš„break è¯­å¥ï¼Œå³å¯è·³å‡ºå¤–å±‚å¾ªç¯ã€‚ä¾‹å¦‚ï¼š\n\n```java\npublic static void main(String[] args) {\n    ok:\n    for (int i = 0; i < 10; i++) {\n        for (int j = 0; j < 10; j++) {\n            System.out.println(\"i=\" + i + \",j=\" + j);\n            if (j == 5) {\n                break ok;\n            }\n        }\n    }\n}\n```\n\n## é¢å‘å¯¹è±¡\n\n### é¢å‘å¯¹è±¡ä¸‰å¤§ç‰¹æ€§\n\n#### é¢å‘å¯¹è±¡çš„ç‰¹å¾æœ‰å“ªäº›æ–¹é¢\n\n**æŠ½è±¡**ï¼šæŠ½è±¡æ˜¯å°†ä¸€ç±»å¯¹è±¡çš„å…±åŒç‰¹å¾æ€»ç»“å‡ºæ¥æ„é€ ç±»çš„è¿‡ç¨‹ï¼ŒåŒ…æ‹¬æ•°æ®æŠ½è±¡å’Œè¡Œä¸ºæŠ½è±¡ä¸¤æ–¹é¢ã€‚æŠ½è±¡åªå…³æ³¨å¯¹è±¡æœ‰å“ªäº›å±æ€§å’Œè¡Œä¸ºï¼Œå¹¶ä¸å…³æ³¨è¿™äº›è¡Œä¸ºçš„ç»†èŠ‚æ˜¯ä»€ä¹ˆã€‚\n\n**å°è£…**\n\nå°è£…æŠŠä¸€ä¸ªå¯¹è±¡çš„å±æ€§ç§æœ‰åŒ–ï¼ŒåŒæ—¶æä¾›ä¸€äº›å¯ä»¥è¢«å¤–ç•Œè®¿é—®çš„å±æ€§çš„æ–¹æ³•ï¼Œå¦‚æœå±æ€§ä¸æƒ³è¢«å¤–ç•Œè®¿é—®ï¼Œæˆ‘ä»¬å¤§å¯ä¸å¿…æä¾›æ–¹æ³•ç»™å¤–ç•Œè®¿é—®ã€‚\n\n**ç»§æ‰¿**\n\nç»§æ‰¿æ˜¯**ä½¿ç”¨å·²å­˜åœ¨çš„ç±»ä½œä¸ºåŸºç¡€å»ºç«‹æ–°ç±»**çš„æŠ€æœ¯ï¼Œæ–°ç±»çš„å®šä¹‰å¯ä»¥å¢åŠ æ–°çš„æ•°æ®æˆ–æ–°çš„åŠŸèƒ½ï¼Œä¹Ÿå¯ä»¥ç”¨çˆ¶ç±»çš„åŠŸèƒ½ã€‚é€šè¿‡ä½¿ç”¨ç»§æ‰¿æˆ‘ä»¬èƒ½å¤Ÿéå¸¸æ–¹ä¾¿åœ°å¤ç”¨ä»¥å‰çš„ä»£ç ã€‚\n\nå…³äºç»§æ‰¿å¦‚ä¸‹ 3 ç‚¹è¯·è®°ä½ï¼š\n\n1. å­ç±»æ‹¥æœ‰çˆ¶ç±»é private çš„å±æ€§å’Œæ–¹æ³•ã€‚\n2. å­ç±»å¯ä»¥æ‹¥æœ‰è‡ªå·±å±æ€§å’Œæ–¹æ³•ï¼Œå³å­ç±»å¯ä»¥å¯¹çˆ¶ç±»è¿›è¡Œæ‰©å±•ã€‚\n3. å­ç±»å¯ä»¥ç”¨è‡ªå·±çš„æ–¹å¼å®ç°çˆ¶ç±»çš„æ–¹æ³•ï¼Œoverrideé‡å†™ã€‚\n\n**å¤šæ€**\n\næ‰€è°“å¤šæ€å°±æ˜¯æŒ‡ä¸€ä¸ªå¼•ç”¨å˜é‡åˆ°åº•ä¼šæŒ‡å‘å“ªä¸ªç±»çš„å®ä¾‹å¯¹è±¡ï¼Œè¯¥å¼•ç”¨å˜é‡è°ƒç”¨çš„æ–¹æ³•åˆ°åº•æ˜¯å“ªä¸ªç±»ä¸­å®ç°çš„æ–¹æ³•ï¼Œå¿…é¡»åœ¨ç¨‹åºè¿è¡ŒæœŸé—´æ‰èƒ½ç¡®å®šï¼Œç¼–è¯‘æœŸæ— æ³•ç¡®å®šã€‚\n\nçˆ¶ç±»çš„å¼•ç”¨æŒ‡å‘å­ç±»å®ä¾‹å¯¹è±¡ã€æ¥å£æŒ‡å‘å®ç°ç±»å®ä¾‹å¯¹è±¡ã€‚æé«˜äº†ç¨‹åºçš„æ‹“å±•æ€§ã€‚\n\nåœ¨Javaä¸­æœ‰ä¸¤ç§å½¢å¼å¯ä»¥å®ç°å¤šæ€ï¼šç»§æ‰¿ï¼ˆå¤šä¸ªå­ç±»å¯¹åŒä¸€æ–¹æ³•çš„é‡å†™ï¼‰å’Œæ¥å£ï¼ˆå®ç°æ¥å£å¹¶è¦†ç›–æ¥å£ä¸­åŒä¸€æ–¹æ³•ï¼‰ã€‚\n\næ–¹æ³•é‡è½½ï¼ˆoverloadï¼‰å®ç°ç¼–è¯‘æ—¶çš„å¤šæ€æ€§ï¼ˆä¹Ÿç§°ä¸ºå‰ç»‘å®šï¼‰ï¼Œæ–¹æ³•é‡å†™ï¼ˆoverrideï¼‰å®ç°è¿è¡Œæ—¶çš„å¤šæ€æ€§ï¼ˆä¹Ÿç§°ä¸ºåç»‘å®šï¼‰ã€‚\n\nJavaå®ç°å¤šæ€æœ‰ä¸‰ä¸ªå¿…è¦æ¡ä»¶ï¼šç»§æ‰¿ã€é‡å†™ã€å‘ä¸Šè½¬å‹ã€‚\n\n> ç»§æ‰¿ï¼šåœ¨å¤šæ€ä¸­å¿…é¡»å­˜åœ¨æœ‰ç»§æ‰¿å…³ç³»çš„å­ç±»å’Œçˆ¶ç±»ã€‚\n>\n> é‡å†™ï¼šå­ç±»å¯¹çˆ¶ç±»ä¸­æŸäº›æ–¹æ³•è¿›è¡Œé‡æ–°å®šä¹‰ï¼Œåœ¨è°ƒç”¨è¿™äº›æ–¹æ³•æ—¶å°±ä¼šè°ƒç”¨å­ç±»çš„æ–¹æ³•ã€‚\n>\n> å‘ä¸Šè½¬å‹ï¼šåœ¨å¤šæ€ä¸­éœ€è¦å°†å­ç±»çš„å¼•ç”¨èµ‹ç»™çˆ¶ç±»å¯¹è±¡ï¼Œåªæœ‰è¿™æ ·è¯¥å¼•ç”¨æ‰èƒ½å¤Ÿå…·å¤‡æŠ€èƒ½è°ƒç”¨çˆ¶ç±»çš„æ–¹æ³•å’Œå­ç±»çš„æ–¹æ³•ã€‚\n\nåªæœ‰æ»¡è¶³äº†ä¸Šè¿°ä¸‰ä¸ªæ¡ä»¶ï¼Œæˆ‘ä»¬æ‰èƒ½å¤Ÿåœ¨åŒä¸€ä¸ªç»§æ‰¿ç»“æ„ä¸­ä½¿ç”¨ç»Ÿä¸€çš„é€»è¾‘å®ç°ä»£ç å¤„ç†ä¸åŒçš„å¯¹è±¡ï¼Œä»è€Œè¾¾åˆ°æ‰§è¡Œä¸åŒçš„è¡Œä¸ºã€‚\n\n#### æŠ½è±¡ç±»å’Œæ¥å£çš„å¯¹æ¯”\n\næŠ½è±¡ç±»æ˜¯å¯¹ç±»çš„æŠ½è±¡ï¼Œç”¨æ¥**æ•æ‰é€šç”¨ç‰¹æ€§**ã€‚æ¥å£æ˜¯**è¡Œä¸ºçš„æŠ½è±¡**ï¼ŒæŠ½è±¡æ–¹æ³•çš„é›†åˆã€‚\n\n**ç›¸åŒç‚¹**\n\n- æ¥å£å’ŒæŠ½è±¡ç±»éƒ½ä¸èƒ½å®ä¾‹åŒ–\n- éƒ½ä½äºç»§æ‰¿çš„é¡¶ç«¯ï¼Œç”¨äºè¢«å…¶ä»–ç±»å®ç°æˆ–ç»§æ‰¿\n- éƒ½åŒ…å«æŠ½è±¡æ–¹æ³•ï¼Œå…¶å­ç±»éƒ½å¿…é¡»é‡å†™è¿™äº›æŠ½è±¡æ–¹æ³•\n\n**ä¸åŒç‚¹**\n\n| å‚æ•°       | æŠ½è±¡ç±»                             | æ¥å£                                             |\n| ---------- | ---------------------------------- | ------------------------------------------------ |\n| å£°æ˜       | æŠ½è±¡ç±»ä½¿ç”¨abstractå…³é”®å­—å£°æ˜       | æ¥å£ä½¿ç”¨interfaceå…³é”®å­—å£°æ˜                      |\n| å®ç°       | å­ç±»ä½¿ç”¨extendså…³é”®å­—æ¥ç»§æ‰¿æŠ½è±¡ç±»  | å­ç±»ä½¿ç”¨implementså…³é”®å­—æ¥å®ç°æ¥å£               |\n| æ„é€ å™¨     | æŠ½è±¡ç±»å¯ä»¥æœ‰æ„é€ å™¨                 | æ¥å£ä¸èƒ½æœ‰æ„é€ å™¨                                 |\n| è®¿é—®ä¿®é¥°ç¬¦ | æŠ½è±¡ç±»ä¸­çš„æ–¹æ³•å¯ä»¥æ˜¯ä»»æ„è®¿é—®ä¿®é¥°ç¬¦ | æ¥å£æ–¹æ³•é»˜è®¤ä¿®é¥°ç¬¦æ˜¯publicï¼Œä¹Ÿå¯ä»¥ä¸åŠ è®¿é—®ä¿®é¥°ç¬¦ |\n| å¤šç»§æ‰¿     | ä¸€ä¸ªç±»æœ€å¤šåªèƒ½ç»§æ‰¿ä¸€ä¸ªæŠ½è±¡ç±»       | ä¸€ä¸ªç±»å¯ä»¥å®ç°å¤šä¸ªæ¥å£                           |\n\n#### æ™®é€šç±»å’ŒæŠ½è±¡ç±»æœ‰å“ªäº›åŒºåˆ«ï¼Ÿ\n\n- æ™®é€šç±»ä¸èƒ½åŒ…å«æŠ½è±¡æ–¹æ³•ï¼ŒæŠ½è±¡ç±»å¯ä»¥åŒ…å«æŠ½è±¡æ–¹æ³•ã€‚\n- æŠ½è±¡ç±»ä¸èƒ½ç›´æ¥å®ä¾‹åŒ–ï¼Œæ™®é€šç±»å¯ä»¥ç›´æ¥å®ä¾‹åŒ–ã€‚\n\n#### æˆå‘˜å˜é‡å’Œå±€éƒ¨å˜é‡çš„åŒºåˆ«\n\n|              | æˆå‘˜å˜é‡               | å±€éƒ¨å˜é‡                                     |\n| ------------ | ---------------------- | -------------------------------------------- |\n| **ä½œç”¨åŸŸ**   | æ•´ä¸ªç±»å¯ä½¿ç”¨           | æ–¹æ³•ä½“å†…ä½¿ç”¨                                 |\n| **å­˜å‚¨ä½ç½®** | å±äºå¯¹è±¡ï¼Œå­˜åœ¨å †å†…å­˜ä¸­ | å±äºæ–¹æ³•ï¼Œå­˜åœ¨æ ˆå¸§ä¸­                         |\n| **ç”Ÿå‘½å‘¨æœŸ** | å’Œå¯¹è±¡åŒç”Ÿå‘½å‘¨æœŸ       | å’Œæ–¹æ³•åŒç”Ÿå‘½å‘¨æœŸ                             |\n| **åˆå§‹å€¼**   | ä¸æŒ‡å®šçš„è¯æœ‰é»˜è®¤åˆå§‹å€¼ | å¿…é¡»æ‰‹åŠ¨åˆå§‹åŒ–å¦åˆ™<br />ä¸èƒ½ä½¿ç”¨ï¼ˆç¼–è¯‘é”™è¯¯ï¼‰ |\n\n**ä½¿ç”¨åŸåˆ™**\n\nåœ¨ä½¿ç”¨å˜é‡æ—¶éœ€è¦éµå¾ªçš„åŸåˆ™ä¸ºï¼šå°±è¿‘åŸåˆ™\né¦–å…ˆåœ¨å±€éƒ¨èŒƒå›´æ‰¾ï¼Œæœ‰å°±ä½¿ç”¨ï¼›æ¥ç€åœ¨æˆå‘˜ä½ç½®æ‰¾ã€‚\n\n```java\npublic class Main {\n    int a = 2;\n    public static void main(String[] args) {\n        int a = 1;\n        System.out.println(a);\t// 1\n    }\n}\n```\n\n### å†…éƒ¨ç±»\n\n#### ä»€ä¹ˆæ˜¯å†…éƒ¨ç±»ï¼Ÿ\n\nåœ¨Javaä¸­ï¼Œå¯ä»¥å°†ä¸€ä¸ªç±»çš„å®šä¹‰æ”¾åœ¨å¦å¤–ä¸€ä¸ªç±»çš„å®šä¹‰å†…éƒ¨ï¼Œè¿™å°±æ˜¯**å†…éƒ¨ç±»**ã€‚\n\n#### å†…éƒ¨ç±»çš„åˆ†ç±»æœ‰å“ªäº›\n\nå†…éƒ¨ç±»å¯ä»¥åˆ†ä¸ºå››ç§ï¼š**é™æ€å†…éƒ¨ç±»ã€æˆå‘˜å†…éƒ¨ç±»ã€å±€éƒ¨å†…éƒ¨ç±»ã€åŒ¿åå†…éƒ¨ç±»**ã€‚\n\n##### é™æ€å†…éƒ¨ç±»\n\nå®šä¹‰åœ¨ç±»å†…éƒ¨çš„é™æ€ç±»ï¼Œå°±æ˜¯é™æ€å†…éƒ¨ç±»ã€‚\n\né™æ€å†…éƒ¨ç±»å¯ä»¥è®¿é—®å¤–éƒ¨ç±»æ‰€æœ‰çš„é™æ€å˜é‡ï¼Œè€Œä¸å¯è®¿é—®å¤–éƒ¨ç±»çš„éé™æ€å˜é‡\n\n##### æˆå‘˜å†…éƒ¨ç±»\n\nå®šä¹‰åœ¨ç±»å†…éƒ¨ï¼Œæˆå‘˜ä½ç½®ä¸Šçš„éé™æ€ç±»ï¼Œå°±æ˜¯æˆå‘˜å†…éƒ¨ç±»ã€‚\n\næˆå‘˜å†…éƒ¨ç±»å¯ä»¥è®¿é—®å¤–éƒ¨ç±»æ‰€æœ‰çš„å˜é‡å’Œæ–¹æ³•ï¼ŒåŒ…æ‹¬é™æ€å’Œéé™æ€ï¼Œç§æœ‰å’Œå…¬æœ‰ã€‚\n\n##### å±€éƒ¨å†…éƒ¨ç±»\n\nå®šä¹‰åœ¨æ–¹æ³•ä¸­çš„å†…éƒ¨ç±»ï¼Œå°±æ˜¯å±€éƒ¨å†…éƒ¨ç±»ã€‚\n\nå®šä¹‰åœ¨å®ä¾‹æ–¹æ³•ä¸­çš„å±€éƒ¨ç±»å¯ä»¥è®¿é—®å¤–éƒ¨ç±»çš„æ‰€æœ‰å˜é‡å’Œæ–¹æ³•ï¼Œå®šä¹‰åœ¨é™æ€æ–¹æ³•ä¸­çš„å±€éƒ¨ç±»åªèƒ½è®¿é—®å¤–éƒ¨ç±»çš„é™æ€å˜é‡å’Œæ–¹æ³•\n\n##### åŒ¿åå†…éƒ¨ç±»\n\nåŒ¿åå†…éƒ¨ç±»å°±æ˜¯æ²¡æœ‰åå­—çš„å†…éƒ¨ç±»ï¼Œæ—¥å¸¸å¼€å‘ä¸­ä½¿ç”¨çš„æ¯”è¾ƒå¤šã€‚åŒ¿åå†…éƒ¨ç±»å¿…é¡»ç»§æ‰¿æˆ–å®ç°ä¸€ä¸ªå·²æœ‰çš„æ¥å£ ï¼ŒåŒ¿åå†…éƒ¨ç±»ä¸èƒ½å®šä¹‰ä»»ä½•é™æ€æˆå‘˜å’Œé™æ€æ–¹æ³•\n\n#### å±€éƒ¨å†…éƒ¨ç±»å’ŒåŒ¿åå†…éƒ¨ç±»è®¿é—®å±€éƒ¨å˜é‡çš„æ—¶å€™ï¼Œä¸ºä»€ä¹ˆå˜é‡å¿…é¡»è¦åŠ ä¸Šfinalï¼Ÿ\n\nå±€éƒ¨å†…éƒ¨ç±»å’ŒåŒ¿åå†…éƒ¨ç±»è®¿é—®å±€éƒ¨å˜é‡çš„æ—¶å€™ï¼Œä¸ºä»€ä¹ˆå˜é‡å¿…é¡»è¦åŠ ä¸Šfinalå‘¢ï¼Ÿå®ƒå†…éƒ¨åŸç†æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ\n\nå…ˆçœ‹è¿™æ®µä»£ç ï¼š\n\n```java\npublic class Outer {\n    void outMethod(){\n        final int a =10;\n        class Inner {\n            void innerMethod(){\n                System.out.println(a);\n            }\n        }\n    }\n}\n```\n\nä»¥ä¸Šä¾‹å­ï¼Œä¸ºä»€ä¹ˆè¦åŠ finalå‘¢ï¼Ÿæ˜¯å› ä¸º**ç”Ÿå‘½å‘¨æœŸä¸ä¸€è‡´**\n\nå±€éƒ¨å˜é‡å­˜å‚¨åœ¨æ ˆä¸­ï¼Œå½“æ–¹æ³•æ‰§è¡Œç»“æŸåï¼Œå¦‚æœä¸ç”¨finalä¿®é¥°é‚£ä¹ˆè¯¥å±€éƒ¨å˜é‡å°±è¢«é”€æ¯ã€‚è€Œå±€éƒ¨å†…éƒ¨ç±»å¯¹å±€éƒ¨å˜é‡çš„å¼•ç”¨ä¾ç„¶å­˜åœ¨ï¼Œå¦‚æœå±€éƒ¨å†…éƒ¨ç±»è¦è°ƒç”¨å±€éƒ¨å˜é‡æ—¶ï¼Œå°±ä¼šå‡ºé”™ã€‚\nåŠ äº†finalï¼Œå¯ä»¥ç¡®ä¿å±€éƒ¨å†…éƒ¨ç±»ä½¿ç”¨çš„å˜é‡ä¸å¤–å±‚çš„å±€éƒ¨å˜é‡åŒºåˆ†å¼€ï¼Œè§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚\n\n### é‡å†™ä¸é‡è½½\n\n#### æ„é€ å™¨ï¼ˆconstructorï¼‰æ˜¯å¦å¯è¢«é‡å†™ï¼ˆoverrideï¼‰\n\næ„é€ å™¨ä¸èƒ½è¢«ç»§æ‰¿ï¼Œå› æ­¤ä¸èƒ½è¢«é‡å†™ï¼Œä½†å¯ä»¥è¢«é‡è½½ã€‚\n\n#### é‡è½½ï¼ˆOverloadï¼‰å’Œé‡å†™ï¼ˆOverrideï¼‰çš„åŒºåˆ«ã€‚é‡è½½çš„æ–¹æ³•èƒ½å¦æ ¹æ®è¿”å›ç±»å‹è¿›è¡ŒåŒºåˆ†ï¼Ÿ\n\næ–¹æ³•çš„é‡è½½å’Œé‡å†™éƒ½æ˜¯å®ç°å¤šæ€çš„æ–¹å¼ï¼ŒåŒºåˆ«åœ¨äºé‡è½½å®ç°çš„æ˜¯**ç¼–è¯‘æ—¶çš„å¤šæ€æ€§**ï¼Œè€Œé‡å†™å®ç°çš„æ˜¯**è¿è¡Œæ—¶çš„å¤šæ€æ€§**ã€‚\n\né‡è½½ï¼šå‘ç”Ÿåœ¨**åŒä¸€ä¸ªç±»**ä¸­ï¼Œ**æ–¹æ³•åç›¸åŒ å‚æ•°åˆ—è¡¨ä¸åŒ**ï¼ˆå‚æ•°ç±»å‹ä¸åŒã€ä¸ªæ•°ä¸åŒã€é¡ºåºä¸åŒï¼‰ï¼Œä¸æ–¹æ³•è¿”å›å€¼å’Œè®¿é—®ä¿®é¥°ç¬¦æ— å…³\n\né‡å†™ï¼šå‘ç”Ÿåœ¨**çˆ¶å­ç±»**ä¸­ï¼Œæ–¹æ³•åã€å‚æ•°åˆ—è¡¨å¿…é¡»ç›¸åŒï¼Œè¿”å›å€¼ç±»å‹å°äºç­‰äºçˆ¶ç±»ï¼ŒæŠ›å‡ºçš„å¼‚å¸¸å°äºç­‰äºçˆ¶ç±»ï¼Œ**è®¿é—®ä¿®é¥°ç¬¦å¤§äºç­‰äºçˆ¶ç±»**ï¼ˆé‡Œæ°ä»£æ¢åŸåˆ™ï¼‰\n\n### å¯¹è±¡ç›¸ç­‰åˆ¤æ–­\n\n#### == å’Œ equals çš„åŒºåˆ«æ˜¯ä»€ä¹ˆ\n\n**==** : å®ƒçš„ä½œç”¨æ˜¯åˆ¤æ–­ä¸¤ä¸ªå¯¹è±¡çš„åœ°å€æ˜¯ä¸æ˜¯ç›¸ç­‰ã€‚å³ï¼Œåˆ¤æ–­ä¸¤ä¸ªå¯¹è±¡æ˜¯ä¸æ˜¯åŒä¸€ä¸ªå¯¹è±¡ã€‚\n(åŸºæœ¬æ•°æ®ç±»å‹ == æ¯”è¾ƒçš„æ˜¯å€¼ï¼Œå¼•ç”¨æ•°æ®ç±»å‹ == æ¯”è¾ƒçš„æ˜¯å†…å­˜åœ°å€)\n\n**equals()** : å®ƒçš„ä½œç”¨ä¹Ÿæ˜¯åˆ¤æ–­ä¸¤ä¸ªå¯¹è±¡æ˜¯å¦ç›¸ç­‰ã€‚ä½†å®ƒä¸€èˆ¬æœ‰ä¸¤ç§ä½¿ç”¨æƒ…å†µï¼š\n\næƒ…å†µ1ï¼šç±»æ²¡æœ‰é‡å†™ equals() æ–¹æ³•ã€‚åˆ™é€šè¿‡ equals() æ¯”è¾ƒè¯¥ç±»çš„ä¸¤ä¸ªå¯¹è±¡æ—¶ï¼Œç­‰ä»·äºé€šè¿‡â€œ==â€æ¯”è¾ƒè¿™ä¸¤ä¸ªå¯¹è±¡ã€‚\n\næƒ…å†µ2ï¼šç±»é‡å†™äº† equals() æ–¹æ³•ã€‚ä¸€èˆ¬ï¼Œæˆ‘ä»¬éƒ½é‡å†™ equals() æ–¹æ³•æ¥ä¸¤ä¸ªå¯¹è±¡çš„å†…å®¹ç›¸ç­‰ï¼›è‹¥å®ƒä»¬çš„å†…å®¹ç›¸ç­‰ï¼Œåˆ™è¿”å› true (å³ï¼Œè®¤ä¸ºè¿™ä¸¤ä¸ªå¯¹è±¡ç›¸ç­‰)ã€‚\n\n#### hashCode ä¸ equals\n\n**hashCode()ä»‹ç»**\n\nhashCode() çš„ä½œç”¨æ˜¯è·å–å“ˆå¸Œç ï¼ˆæœ¬åœ°æ–¹æ³•ï¼‰ï¼Œä¹Ÿç§°ä¸ºæ•£åˆ—ç ï¼›å®ƒå®é™…ä¸Šæ˜¯è¿”å›ä¸€ä¸ªintæ•´æ•°ã€‚hashCode() å®šä¹‰åœ¨JDKçš„Objectç±»ä¸­ï¼Œè¿™å°±æ„å‘³ç€Javaä¸­çš„ä»»ä½•ç±»éƒ½æœ‰hashCode()æ–¹æ³•ã€‚\n\n**ä¸ºä»€ä¹ˆè¦æœ‰ hashCode**\n\n**æˆ‘ä»¬ä»¥â€œhashSet å¦‚ä½•æ£€æŸ¥é‡å¤â€ä¸ºä¾‹å­æ¥è¯´æ˜ä¸ºä»€ä¹ˆè¦æœ‰ hashCode**ï¼š\n\nå½“ä½ æŠŠå¯¹è±¡åŠ å…¥ hashSet æ—¶ï¼ŒhashSet ä¼šå…ˆè®¡ç®—å¯¹è±¡çš„ hashcode å€¼æ¥åˆ¤æ–­å¯¹è±¡åŠ å…¥çš„ä½ç½®ï¼Œå¦‚æœæ²¡æœ‰ç›¸ç¬¦çš„hashcodeï¼ŒhashSet ä¼šå‡è®¾å¯¹è±¡æ²¡æœ‰é‡å¤å‡ºç°ã€‚ä½†æ˜¯å¦‚æœå‘ç°æœ‰ç›¸åŒ hashcode å€¼çš„å¯¹è±¡ï¼Œè¿™æ—¶ä¼šè°ƒç”¨ equals()æ–¹æ³•æ¥æ£€æŸ¥ hashcode ç›¸ç­‰çš„å¯¹è±¡æ˜¯å¦çœŸçš„ç›¸åŒã€‚å¦‚æœä¸¤è€…ç›¸åŒï¼Œè¡¨æ˜å·²ç»æœ‰äº†ç›¸åŒçš„å¯¹è±¡äº†ï¼ŒhashSet å°±ä¸ä¼šè®©å…¶åŠ å…¥æ“ä½œæˆåŠŸã€‚å¦‚æœä¸åŒçš„è¯ï¼Œå°±ä¼šé‡æ–°æ•£åˆ—åˆ°å…¶ä»–ä½ç½®ã€‚\n\n**hashCode()ä¸equals()çš„ç›¸å…³è§„å®š**\n\n- å¦‚æœä¸¤ä¸ªå¯¹è±¡çš„hashCodeå€¼ç›¸ç­‰ï¼Œé‚£è¿™ä¸¤ä¸ªå¯¹è±¡ä¸ä¸€å®šç›¸ç­‰ï¼ˆå“ˆå¸Œç¢°æ’ï¼‰ã€‚\n- å¦‚æœä¸¤ä¸ªå¯¹è±¡çš„hashCodeå€¼ç›¸ç­‰å¹¶ä¸”equals()æ–¹æ³•ä¹Ÿè¿”å› trueï¼Œæˆ‘ä»¬æ‰è®¤ä¸ºè¿™ä¸¤ä¸ªå¯¹è±¡ç›¸ç­‰ã€‚\n- å¦‚æœä¸¤ä¸ªå¯¹è±¡çš„hashCodeå€¼ä¸ç›¸ç­‰ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç›´æ¥è®¤ä¸ºè¿™ä¸¤ä¸ªå¯¹è±¡ä¸ç›¸ç­‰ã€‚\n\n#### åªé‡å†™ hashCode å¯ä»¥å—ï¼Ÿ\n\nå¦‚æœåªé‡å†™ hashCodeï¼Œä¸é‡å†™ equalsï¼Œé‚£ä¹ˆå¦‚æœä¸¤ä¸ªå¯¹è±¡åˆ¤æ–­ hashCode ç›¸åŒäº†ï¼Œä»¥ä¸ºè¿™ä¿©å¯¹è±¡ç›¸åŒï¼Œé‚£ä¹ˆåªä¼šæ’å…¥ä¸€æ¬¡åˆ° set é‡Œé¢ï¼Œè€Œå®é™…ä¸Šè¿™ä¸¤ä¸ªä¸ä¸€æ ·ä¸€ä¸ªæ˜¯ A ä¸€ä¸ªæ˜¯ Bï¼Œéƒ½éœ€è¦æ’å…¥ã€‚\n\n> ä¸¤ä¸ªå¯¹è±¡çš„ hashCode ç›¸åŒï¼Œä½†æ˜¯å†…å®¹å¯èƒ½ä¸åŒï¼Œåœ¨ set ä¸­æ˜æ˜åº”è¯¥æ˜¯ä¸¤ä¸ªä¸åŒçš„å¯¹è±¡ï¼Œè¿™æ—¶å€™åªé€šè¿‡ hashCode åˆ¤æ–­ä»–ä¿©ç›¸åŒä¼šå¯¼è‡´åªæ’å…¥ä¸€ä¸ªå…ƒç´ ã€‚\n\n#### åªé‡å†™ equalså¯ä»¥å—ï¼Ÿ\n\nå¦‚æœåœ¨é‡å†™ equals æ—¶ï¼Œä¸é‡å†™ hashCodeï¼Œå°±ä¼šå¼•èµ·æ¯”å¦‚è¯´å°†ä¸¤ä¸ªç›¸ç­‰çš„è‡ªå®šä¹‰å¯¹è±¡å­˜å‚¨åœ¨ Set é›†åˆæ—¶ï¼Œä¼šå°†è¿™ä¸¤ä¸ªå¯¹è±¡éƒ½è¿›è¡Œæ’å…¥ã€‚ï¼ˆæ— æ³•å»é‡ï¼‰\n\n> å¦‚æœå®šä¹‰ä¸€ä¸ªseté‡Œé¢å­˜æ”¾Personå¯¹è±¡ï¼ŒPersonåªé‡å†™äº†equalsæ–¹æ³•å³å¯ä»¥åˆ¤æ–­å¯¹è±¡å†…å®¹æ˜¯å¦ç›¸åŒã€‚\n>\n> å¦‚æœåªé‡å†™äº† equals æ–¹æ³•ï¼Œé‚£ä¹ˆé»˜è®¤æƒ…å†µä¸‹ï¼ŒSet è¿›è¡Œå»é‡æ“ä½œæ—¶ï¼Œä¼šå…ˆåˆ¤æ–­ä¸¤ä¸ªå¯¹è±¡çš„ hashCode æ˜¯å¦ç›¸åŒï¼Œæ­¤æ—¶å› ä¸ºæ²¡æœ‰é‡å†™ hashCode æ–¹æ³•ï¼Œæ‰€ä»¥ä¼šç›´æ¥æ‰§è¡Œ Object ä¸­çš„ hashCode æ–¹æ³•ï¼Œè€Œ Object ä¸­çš„ hashCode æ–¹æ³•å¯¹æ¯”çš„æ˜¯ä¸¤ä¸ªä¸åŒå¼•ç”¨åœ°å€çš„å¯¹è±¡ï¼Œæ‰€ä»¥ç»“æœæ˜¯ falseï¼Œé‚£ä¹ˆ equals æ–¹æ³•å°±ä¸ç”¨æ‰§è¡Œäº†ï¼Œç›´æ¥è¿”å›çš„ç»“æœå°±æ˜¯ falseï¼šä¸¤ä¸ªå¯¹è±¡ä¸æ˜¯ç›¸ç­‰çš„ï¼Œäºæ˜¯å°±åœ¨ Set é›†åˆä¸­æ’å…¥äº†ä¸¤ä¸ªç›¸åŒçš„å¯¹è±¡ã€‚\n>\n> ä½†æ˜¯ï¼Œå¦‚æœåœ¨é‡å†™ equals æ–¹æ³•æ—¶ï¼Œä¹Ÿé‡å†™äº† hashCode æ–¹æ³•ï¼Œé‚£ä¹ˆåœ¨æ‰§è¡Œåˆ¤æ–­æ—¶ä¼šå»æ‰§è¡Œé‡å†™çš„ hashCode æ–¹æ³•ï¼Œæ­¤æ—¶å¯¹æ¯”çš„æ˜¯ä¸¤ä¸ªå¯¹è±¡çš„æ‰€æœ‰å±æ€§çš„ hashCode æ˜¯å¦ç›¸åŒï¼Œäºæ˜¯è°ƒç”¨ hashCode è¿”å›çš„ç»“æœå°±æ˜¯ trueï¼Œå†å»è°ƒç”¨ equals æ–¹æ³•ï¼Œå‘ç°ä¸¤ä¸ªå¯¹è±¡ç¡®å®æ˜¯ç›¸ç­‰çš„ï¼Œäºæ˜¯å°±è¿”å› true äº†ï¼Œå› æ­¤ Set é›†åˆå°±ä¸ä¼šå­˜å‚¨ä¸¤ä¸ªä¸€æ¨¡ä¸€æ ·çš„æ•°æ®äº†ï¼Œäºæ˜¯æ•´ä¸ªç¨‹åºçš„æ‰§è¡Œå°±æ­£å¸¸äº†ã€‚\n\n### å€¼ä¼ é€’\n\n#### ä¸ºä»€ä¹ˆ Java ä¸­åªæœ‰å€¼ä¼ é€’\n\nJavaé‡‡ç”¨æŒ‰å€¼è°ƒç”¨ï¼Œæ–¹æ³•å¾—åˆ°çš„æ˜¯æ‰€æœ‰å‚æ•°å€¼çš„ä¸€ä¸ªæ‹·è´ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ–¹æ³•ä¸èƒ½ä¿®æ”¹ä¼ é€’ç»™å®ƒçš„ä»»ä½•å‚æ•°å˜é‡çš„å†…å®¹ã€‚\n\nexample 1\n\n```java\npublic static void main(String[] args) {\n    int num1 = 10;\n    int num2 = 20;\n\n    swap(num1, num2);\n\n    System.out.println(\"num1 = \" + num1);\n    System.out.println(\"num2 = \" + num2);\n}\n\npublic static void swap(int a, int b) {\n    int temp = a;\n    a = b;\n    b = temp;\n\n    System.out.println(\"a = \" + a);\n    System.out.println(\"b = \" + b);\n}\n```\n\n**ç»“æœ**ï¼š\n\n```java\na = 20\nb = 10\nnum1 = 10\nnum2 = 20\n```\n\n**è§£æ**ï¼š\n\n![swap(int a, int b)](https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/TyporaNotesaHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy8xNDAyMzk3Mi00ZWQyZjQ0NTlmN2MyYzkwLmpwZw.png)\n\nåœ¨swapæ–¹æ³•ä¸­ï¼Œaã€bçš„å€¼è¿›è¡Œäº¤æ¢ï¼Œå¹¶ä¸ä¼šå½±å“åˆ° num1ã€num2ã€‚å› ä¸ºaã€bä¸­çš„å€¼ï¼Œåªæ˜¯ä» num1ã€num2 çš„å¤åˆ¶è¿‡æ¥çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œaã€bç›¸å½“äºnum1ã€num2 çš„å‰¯æœ¬ï¼Œå‰¯æœ¬çš„å†…å®¹æ— è®ºæ€ä¹ˆä¿®æ”¹ï¼Œéƒ½ä¸ä¼šå½±å“åˆ°åŸä»¶æœ¬èº«ã€‚\n\n**é€šè¿‡ä¸Šé¢ä¾‹å­ï¼Œæˆ‘ä»¬å·²ç»çŸ¥é“äº†ä¸€ä¸ªæ–¹æ³•ä¸èƒ½ä¿®æ”¹ä¸€ä¸ªåŸºæœ¬æ•°æ®ç±»å‹çš„å‚æ•°ï¼Œè€Œå¯¹è±¡å¼•ç”¨ä½œä¸ºå‚æ•°å°±ä¸ä¸€æ ·ï¼Œè¯·çœ‹ example2.**\n\nexample 2\n\n```java\n    public static void main(String[] args) {\n        int[] arr = { 1, 2, 3, 4, 5 };\n        System.out.println(arr[0]);\n        change(arr);\n        System.out.println(arr[0]);\n    }\n\n    public static void change(int[] array) {\n        // å°†æ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ å˜ä¸º0\n        array[0] = 0;\n    }\n```\n\n**ç»“æœ**ï¼š\n\n```undefined\n1\n0\n```\n\n**è§£æ**ï¼š\n\n![change(int[] array)](https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/TyporaNotesaHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy8xNDAyMzk3Mi1kYWI5Mzg5ZWRmMjIxNmIzLmpwZw.png)\n\narray è¢«åˆå§‹åŒ– arr çš„æ‹·è´ä¹Ÿå°±æ˜¯ä¸€ä¸ªå¯¹è±¡çš„å¼•ç”¨ï¼Œä¹Ÿå°±æ˜¯è¯´ array å’Œ arr æŒ‡å‘çš„æ—¶åŒä¸€ä¸ªæ•°ç»„å¯¹è±¡ã€‚ å› æ­¤ï¼Œå¤–éƒ¨å¯¹å¼•ç”¨å¯¹è±¡çš„æ”¹å˜ä¼šåæ˜ åˆ°æ‰€å¯¹åº”çš„å¯¹è±¡ä¸Šã€‚\n\n**é€šè¿‡ example2 æˆ‘ä»¬å·²ç»çœ‹åˆ°ï¼Œå®ç°ä¸€ä¸ªæ”¹å˜å¯¹è±¡å‚æ•°çŠ¶æ€çš„æ–¹æ³•å¹¶ä¸æ˜¯ä¸€ä»¶éš¾äº‹ã€‚ç†ç”±å¾ˆç®€å•ï¼Œæ–¹æ³•å¾—åˆ°çš„æ˜¯å¯¹è±¡å¼•ç”¨çš„æ‹·è´ï¼Œå¯¹è±¡å¼•ç”¨åŠå…¶ä»–çš„æ‹·è´åŒæ—¶å¼•ç”¨åŒä¸€ä¸ªå¯¹è±¡ã€‚**\n\nexample 3\n\n```java\npublic class Test {\n\n    public static void main(String[] args) {\n        Student s1 = new Student(\"å°å¼ \");\n        Student s2 = new Student(\"å°æ\");\n        Test.swap(s1, s2);\n        System.out.println(\"s1:\" + s1.getName());\n        System.out.println(\"s2:\" + s2.getName());\n    }\n\n    public static void swap(Student x, Student y) {\n        Student temp = x;\n        x = y;\n        y = temp;\n        System.out.println(\"x:\" + x.getName());\n        System.out.println(\"y:\" + y.getName());\n    }\n}\n```\n\n**ç»“æœ**ï¼š\n\n```undefined\nx:å°æ\ny:å°å¼ \ns1:å°å¼ \ns2:å°æ\n```\n\n**è§£æ**ï¼š\n\näº¤æ¢ä¹‹å‰ï¼š\n\n![before swap(Student x, Student y)](https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/TyporaNotesaHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy8xNDAyMzk3Mi03MmIwYzFmYjlmM2IwNzc2LmpwZw.png)\n\näº¤æ¢ä¹‹åï¼š\n\n![after swap(Student x, Student y)](https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/TyporaNotesaHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy8xNDAyMzk3Mi0zYWUzNzY4NGNiMzg2Njc4LmpwZw.png)\n\né€šè¿‡ä¸Šé¢ä¸¤å¼ å›¾å¯ä»¥å¾ˆæ¸…æ™°çš„çœ‹å‡ºï¼š **æ–¹æ³•å¹¶æ²¡æœ‰æ”¹å˜å­˜å‚¨åœ¨å˜é‡ s1 å’Œ s2 ä¸­çš„å¯¹è±¡å¼•ç”¨ã€‚swapæ–¹æ³•çš„å‚æ•°xå’Œyè¢«åˆå§‹åŒ–ä¸ºä¸¤ä¸ªå¯¹è±¡å¼•ç”¨çš„æ‹·è´ï¼Œè¿™ä¸ªæ–¹æ³•äº¤æ¢çš„æ˜¯è¿™ä¸¤ä¸ªæ‹·è´**\n\n#### å€¼ä¼ é€’å’Œå¼•ç”¨ä¼ é€’æœ‰ä»€ä¹ˆåŒºåˆ«\n\nå€¼ä¼ é€’ï¼šæŒ‡çš„æ˜¯åœ¨æ–¹æ³•è°ƒç”¨æ—¶ï¼Œä¼ é€’çš„å‚æ•°æ˜¯æŒ‰å€¼çš„æ‹·è´ä¼ é€’ï¼Œä¼ é€’çš„æ˜¯å€¼çš„æ‹·è´ï¼Œä¹Ÿå°±æ˜¯è¯´ä¼ é€’åå°±äº’ä¸ç›¸å…³äº†ã€‚\n\nå¼•ç”¨ä¼ é€’ï¼šæŒ‡çš„æ˜¯åœ¨æ–¹æ³•è°ƒç”¨æ—¶ï¼Œä¼ é€’çš„å‚æ•°æ˜¯æŒ‰å¼•ç”¨è¿›è¡Œä¼ é€’ï¼Œå…¶å®ä¼ é€’çš„å¼•ç”¨çš„åœ°å€ï¼Œä¹Ÿå°±æ˜¯å˜é‡æ‰€å¯¹åº”çš„å†…å­˜ç©ºé—´çš„åœ°å€ã€‚ä¼ é€’çš„æ˜¯å€¼çš„å¼•ç”¨ï¼Œä¹Ÿå°±æ˜¯è¯´ä¼ é€’å‰å’Œä¼ é€’åéƒ½æŒ‡å‘åŒä¸€ä¸ªå¼•ç”¨ï¼ˆä¹Ÿå°±æ˜¯åŒä¸€ä¸ªå†…å­˜ç©ºé—´ï¼‰ã€‚\n\n## IOæµ\n\n> å‚è€ƒï¼šhttps://blog.csdn.net/weixin_44579258/article/details/90758359\n\né˜»å¡å’Œéé˜»å¡æ˜¯æŒ‡è¿›ç¨‹è®¿é—®çš„æ•°æ®å¦‚æœå°šæœªå‡†å¤‡å°±ç»ªï¼Œè¿›ç¨‹æ˜¯å¦éœ€è¦ç­‰å¾…\nåŒæ­¥å’Œå¼‚æ­¥æ˜¯æŒ‡è®¿é—®æ•°æ®çš„æœºåˆ¶ï¼ŒåŒæ­¥ä¸€èˆ¬ä¸»åŠ¨è¯·æ±‚ç­‰å¾…IOæ“ä½œå®Œæ¯•çš„æ–¹å¼ã€‚å½“æ•°æ®å°±ç»ªåï¼Œå†è¯»å†™çš„æ—¶å€™å¿…é¡»é˜»å¡ï¼Œå¼‚æ­¥åˆ™ä¸»åŠ¨è¯·æ±‚æ•°æ®åä¾¿å¯ä»¥ç»§ç»­å¤„ç†å…¶ä»–ä»»åŠ¡ï¼Œéšåç­‰å¾…IOå®Œæ¯•é€šçŸ¥ï¼Œè¿™å¯ä»¥ä½¿è¿›ç¨‹åœ¨æ•°æ®è¯»å†™æ—¶ä¹Ÿä¸é˜»å¡\n\nå‡†å¤‡æ•°æ®ï¼šç½‘å¡ â†’ å†…æ ¸\næ•°æ®å°±ç»ªï¼šæ•°æ®æ‹·è´åˆ°äº†å†…æ ¸\næ‹·è´æ•°æ®ï¼šå°†å†…æ ¸æ•°æ®æ‹·è´åˆ°ç”¨æˆ·ç©ºé—´\n\n### Blocking I/O\n\n**BIO å±äºåŒæ­¥é˜»å¡ IO æ¨¡å‹** ã€‚\n\nåŒæ­¥é˜»å¡ IO æ¨¡å‹ä¸­ï¼Œåº”ç”¨ç¨‹åº**å‘èµ· read è°ƒç”¨**åï¼Œä¼šä¸€ç›´é˜»å¡ï¼Œç›´åˆ°å†…æ ¸å‡†å¤‡æ•°æ®ã€æ•°æ®å°±ç»ªï¼Œæ•°æ®ä»å†…æ ¸æ‹·è´åˆ°ç”¨æˆ·ç©ºé—´ã€‚\n\n![BIO](https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/TyporaNotes20190603201109632.png)\n\n### NIO (Non-blocking I/O)\n\nåŒæ­¥éé˜»å¡ IO æ¨¡å‹ä¸­ï¼Œç”¨æˆ·è¿›ç¨‹ä¼š**ä¸€ç›´å‘èµ· read è°ƒç”¨**ï¼ˆå¦‚æœå†…æ ¸è¿”å›erroråˆ™è¯´æ˜æ•°æ®æœªå‡†å¤‡å°±ç»ªï¼‰ï¼Œç›´åˆ°æ•°æ®å‡†å¤‡å°±ç»ªï¼Œç”¨æˆ·å‘èµ· read è°ƒç”¨æ—¶ï¼Œæ•°æ®ä»å†…æ ¸ç©ºé—´æ‹·è´åˆ°ç”¨æˆ·ç©ºé—´ï¼ˆç”¨æˆ·è¿›ç¨‹æ˜¯é˜»å¡çš„ï¼‰ã€‚\n\n> ç›¸æ¯”äºåŒæ­¥é˜»å¡ IO æ¨¡å‹ï¼ŒåŒæ­¥éé˜»å¡ IO æ¨¡å‹ç¡®å®æœ‰äº†å¾ˆå¤§æ”¹è¿›ã€‚é€šè¿‡è½®è¯¢æ“ä½œï¼Œé¿å…äº†ä¸€ç›´é˜»å¡ã€‚\n\n![NIO](https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/TyporaNotes20190603201218527.png)\n\n### IOå¤šè·¯å¤ç”¨ï¼ˆNIOï¼‰\n\nselect/epollçš„å¥½å¤„å°±åœ¨äºå•ä¸ªprocesså°±å¯ä»¥åŒæ—¶å¤„ç†å¤šä¸ªç½‘ç»œè¿æ¥çš„IOã€‚\n\n![NIO](https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/TyporaNotes2019060320125821.png)\n\nIOå¤ç”¨å’ŒåŒæ­¥é˜»å¡æœ¬è´¨ä¸€æ ·ï¼Œåœ¨NIOä¸­ï¼Œæ¯æ¬¡ç”¨æˆ·è¿›ç¨‹è¿›è¡Œreadè½®è¯¢æ•°æ®æ˜¯å¦å‡†å¤‡å°±ç»ªï¼Œè€Œåœ¨IOå¤šè·¯å¤ç”¨ä¸­ï¼Œåˆ©ç”¨äº†æ–°çš„selectç³»ç»Ÿè°ƒç”¨ï¼Œç”±å†…æ ¸æ¥è´Ÿè´£æœ¬æ¥æ˜¯è¯·æ±‚è¿›ç¨‹è¯¥åšçš„è½®è¯¢æ“ä½œã€‚\n\nå½“ç”¨æˆ·çº¿ç¨‹è°ƒç”¨selectï¼Œé‚£ä¹ˆæ•´ä¸ªè¿›ç¨‹ä¼šè¢«é˜»å¡ï¼Œè€ŒåŒæ—¶ï¼Œkernelå†…æ ¸ä¼šâ€œç›‘è§†â€æ‰€æœ‰selectè´Ÿè´£çš„socketï¼Œå½“ä»»ä½•ä¸€ä¸ªsocketä¸­çš„æ•°æ®å‡†å¤‡å¥½äº†ï¼Œselectå°±ä¼šè¿”å›å¯è¯»æ¡ä»¶è®©ç”¨æˆ·è¿›ç¨‹å‘èµ·readè°ƒç”¨ï¼Œç”¨æˆ·è¿›ç¨‹å‘èµ·è°ƒç”¨readæ“ä½œï¼Œå°†æ•°æ®ä»å†…æ ¸ç©ºé—´æ‹·è´åˆ°ç”¨æˆ·ç©ºé—´ã€‚\n\n\n### Asynchronous I/O\n\nå¼‚æ­¥ IO æ˜¯åŸºäºäº‹ä»¶å’Œå›è°ƒæœºåˆ¶å®ç°çš„ï¼Œä¹Ÿå°±æ˜¯åº”ç”¨æ“ä½œä¹‹åä¼šç›´æ¥è¿”å›ï¼Œä¸ä¼šå µå¡åœ¨é‚£é‡Œï¼Œå½“åå°å¤„ç†å®Œæˆï¼Œæ“ä½œç³»ç»Ÿä¼šé€šçŸ¥ç›¸åº”çš„çº¿ç¨‹è¿›è¡Œåç»­çš„æ“ä½œã€‚\n\nç”¨æˆ·å‘èµ·readè°ƒç”¨ï¼Œæ­¤æ—¶ç”¨æˆ·è¿›ç¨‹ä¸ä¼šé˜»å¡ã€‚å†…æ ¸å°†æ•°æ®å‡†å¤‡å°±ç»ªå¹¶å°†å…¶ä»å†…æ ¸æ‹·è´åˆ°ç”¨æˆ·ç©ºé—´åï¼Œå†…æ ¸ç»™ç”¨æˆ·è¿›ç¨‹å‘é€ä¸€ä¸ªä¿¡å·ç»™ä¹‹å‰è°ƒç”¨readçš„è¿›ç¨‹ï¼Œæ•°æ®å·²ç»æ‹·è´åˆ°ç”¨æˆ·ç©ºé—´äº†ã€‚\n\n![AIO](https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/TyporaNotes2019060320135956.png)\n\n## åå°„\n\n### ä»€ä¹ˆæ˜¯åå°„æœºåˆ¶ï¼Ÿ\n\nJAVAåå°„æœºåˆ¶æ˜¯åœ¨è¿è¡ŒçŠ¶æ€ä¸­ï¼Œå¯¹äºä»»æ„ä¸€ä¸ªç±»ï¼Œéƒ½èƒ½å¤ŸçŸ¥é“è¿™ä¸ªç±»çš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•ï¼›å¯¹äºä»»æ„ä¸€ä¸ªå¯¹è±¡ï¼Œéƒ½èƒ½å¤Ÿè°ƒç”¨å®ƒçš„ä»»æ„ä¸€ä¸ªæ–¹æ³•å’Œå±æ€§ï¼›è¿™ç§åŠ¨æ€è·å–çš„ä¿¡æ¯ä»¥åŠåŠ¨æ€è°ƒç”¨å¯¹è±¡çš„æ–¹æ³•çš„åŠŸèƒ½ç§°ä¸ºJavaè¯­è¨€çš„åå°„æœºåˆ¶ã€‚\n\n### åå°„æœºåˆ¶ä¼˜ç¼ºç‚¹\n\n- **ä¼˜ç‚¹ï¼š** è¿è¡ŒæœŸç±»å‹çš„åˆ¤æ–­ï¼ŒåŠ¨æ€åŠ è½½ç±»ï¼Œæé«˜ä»£ç çµæ´»åº¦ã€‚\n- **ç¼ºç‚¹ï¼š** æ€§èƒ½ç“¶é¢ˆï¼šåå°„ç›¸å½“äºä¸€ç³»åˆ—è§£é‡Šæ“ä½œï¼Œé€šçŸ¥ JVM è¦åšçš„äº‹æƒ…ï¼Œæ€§èƒ½æ¯”ç›´æ¥çš„Javaä»£ç è¦æ…¢å¾ˆå¤šã€‚\n\n### åå°„æœºåˆ¶çš„åº”ç”¨åœºæ™¯æœ‰å“ªäº›ï¼Ÿ\n\nâ‘ æˆ‘ä»¬åœ¨ä½¿ç”¨JDBCè¿æ¥æ•°æ®åº“æ—¶ä½¿ç”¨Class.forName()é€šè¿‡åå°„åŠ è½½æ•°æ®åº“çš„é©±åŠ¨ç¨‹åºï¼›\n\nâ‘¡Spring é€šè¿‡ XML é…ç½®æ¨¡å¼è£…è½½ Bean çš„è¿‡ç¨‹\n\n1. åŠ è½½é…ç½®æ–‡ä»¶ï¼Œè§£ææˆ BeanDefinition æ”¾åœ¨ Map é‡Œï¼Œmapä¸­å­˜æ”¾`<BeanNameï¼ŒClasså¯¹è±¡>`çš„æ˜ å°„\n2. è°ƒç”¨ getBean çš„æ—¶å€™ï¼Œä» BeanDefinition æ‰€å±çš„ Map é‡Œï¼Œæ‹¿å‡º Class å¯¹è±¡ä½¿ç”¨åå°„è¿›è¡Œå®ä¾‹åŒ–ï¼ŒåŒæ—¶ï¼Œå¦‚æœæœ‰ä¾èµ–å…³ç³»ï¼Œå°†é€’å½’è°ƒç”¨ getBean æ–¹æ³• â€”â€” å®Œæˆä¾èµ–æ³¨å…¥\n\n### Javaè·å–åå°„çš„ä¸‰ç§æ–¹æ³•\n\n1.é€šè¿‡newå¯¹è±¡å®ç°åå°„æœºåˆ¶ 2.é€šè¿‡è·¯å¾„å®ç°åå°„æœºåˆ¶ 3.é€šè¿‡ç±»åå®ç°åå°„æœºåˆ¶\n\n## åŒ…è£…ç±»\n\n#### è‡ªåŠ¨è£…ç®±ä¸æ‹†ç®±\n\n**è£…ç®±**ï¼šå°†åŸºæœ¬ç±»å‹ç”¨å®ƒä»¬å¯¹åº”çš„å¼•ç”¨ç±»å‹åŒ…è£…èµ·æ¥ï¼›`Integer a = 1;`\n\n**æ‹†ç®±**ï¼šå°†åŒ…è£…ç±»å‹è½¬æ¢ä¸ºåŸºæœ¬æ•°æ®ç±»å‹ï¼›`int b = a;`\n\n#### int å’Œ Integer æœ‰ä»€ä¹ˆåŒºåˆ«\n\nå¼•å…¥åŒ…è£…ç±»æ˜¯ä¸ºäº†èƒ½å¤Ÿå°†è¿™äº›**åŸºæœ¬æ•°æ®ç±»å‹å½“æˆå¯¹è±¡æ“ä½œ**\n\nJava ä¸ºæ¯ä¸ªåŸå§‹ç±»å‹æä¾›äº†åŒ…è£…ç±»å‹ï¼š\n\nåŸå§‹ç±»å‹: booleanï¼Œcharï¼Œbyteï¼Œshortï¼Œintï¼Œlongï¼Œfloatï¼Œdouble\n\nåŒ…è£…ç±»å‹ï¼šBooleanï¼ŒCharacterï¼ŒByteï¼ŒShortï¼ŒIntegerï¼ŒLongï¼ŒFloatï¼ŒDouble\n\n#### Integer a = 127 ä¸ Integer b = 127ç›¸ç­‰å—\n\n> åŒ…è£…ç±»å’ŒåŸºæœ¬æ•°æ®ç±»å‹æ¯”è¾ƒï¼Œä¼šå°†åŒ…è£…ç±»æ‹†ç®±æˆåŸºæœ¬æ•°æ®ç±»å‹ç„¶åæ¯”è¾ƒï¼Œ\n>\n> åªæœ‰å½“åŒ…è£…ç±»æ˜¯è‡ªåŠ¨è£…ç®±ï¼Œå¹¶ä¸”æ•°å€¼èŒƒå›´åœ¨ [-128, 127] æ—¶ï¼Œæ‰ä¼šä½¿ç”¨ cache ä¸­çš„å¯¹è±¡ã€‚\n\nå¯¹äºå¯¹è±¡å¼•ç”¨ç±»å‹ï¼š==æ¯”è¾ƒçš„æ˜¯å¯¹è±¡çš„å†…å­˜åœ°å€ã€‚\nå¯¹äºåŸºæœ¬æ•°æ®ç±»å‹ï¼š==æ¯”è¾ƒçš„æ˜¯å€¼ã€‚\n\n```java\npublic static void main(String[] args) {\n    Integer a = new Integer(3);\n  \tInteger b = 3;\n    int c = 3;\n    Integer d = 3;\n    System.out.println(a == b); // falseï¼Œä¸¤ä¸ªå¯¹è±¡æ¯”è¾ƒ\n    System.out.println(a == c); // trueï¼Œaè‡ªåŠ¨æ‹†ç®±\n    System.out.println(b == c); // trueï¼Œbè‡ªåŠ¨æ‹†ç®±\n    System.out.println(b == d); // trueï¼ŒåŒ…è£…ç±»è‡ªåŠ¨è£…ç®±ä¸”æ•°å€¼èŒƒå›´åœ¨cacheèŒƒå›´å†…\n\n    Integer a = new Integer(128);\n    Integer b = 128;\n    int c = 128;\n    Integer d = 128;\n    System.out.println(a == b); // falseï¼Œä¸¤ä¸ªå¯¹è±¡æ¯”è¾ƒ\n    System.out.println(a == c); // trueï¼Œaè‡ªåŠ¨æ‹†ç®±\n    System.out.println(b == c); // trueï¼Œbè‡ªåŠ¨æ‹†ç®±\n    System.out.println(b == d); // falseï¼ŒåŒ…è£…ç±»è‡ªåŠ¨è£…ç®±ä½†æ˜¯æ•°å€¼èŒƒå›´ä¸åœ¨cacheèŒƒå›´å†…\n}\n```\n\n","slug":"Javaå…«è‚¡æ–‡ - JavaåŸºç¡€","published":1,"updated":"2023-01-23T08:46:19.750Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cld8kfsir0007zvt8b5os7454","content":"<blockquote>\n<p>æ•´ç†çš„JavaåŸºç¡€ç›¸å…³çŸ¥è¯†ç‚¹å’Œé¢è¯•é¢˜ï¼Œéƒ¨åˆ†å†…å®¹æ‘˜è‡ªç½‘ç»œï¼Œå¦‚æœ‰ä¾µæƒè¯·è”ç³»æˆ‘ï½\t<span id=\"more\"></span></p>\n</blockquote>\n<h2 id=\"Javaæ¦‚è¿°\"><a href=\"#Javaæ¦‚è¿°\" class=\"headerlink\" title=\"Javaæ¦‚è¿°\"></a>Javaæ¦‚è¿°</h2><h3 id=\"JVMã€JREå’ŒJDKçš„å…³ç³»\"><a href=\"#JVMã€JREå’ŒJDKçš„å…³ç³»\" class=\"headerlink\" title=\"JVMã€JREå’ŒJDKçš„å…³ç³»\"></a>JVMã€JREå’ŒJDKçš„å…³ç³»</h3><p>JVMï¼šJava Virtual Machineï¼ŒJavaè™šæ‹Ÿæœºï¼ŒJavaç¨‹åºéœ€è¦è¿è¡Œåœ¨è™šæ‹Ÿæœºä¸Šï¼Œä¸åŒçš„å¹³å°æœ‰è‡ªå·±çš„è™šæ‹Ÿæœºï¼Œå› æ­¤Javaè¯­è¨€å¯ä»¥å®ç°è·¨å¹³å°ã€‚</p>\n<p>JREï¼šJava Runtime Environmentï¼ŒJavaè¿è¡Œç¯å¢ƒï¼ŒåŒ…æ‹¬Javaè™šæ‹Ÿæœºå’ŒJavaç¨‹åºæ‰€éœ€çš„æ ¸å¿ƒç±»åº“ç­‰ã€‚</p>\n<p>JDKï¼šJava Development Kitï¼ŒJavaå¼€å‘å·¥å…·åŒ…ï¼ŒåŒ…æ‹¬äº†JREå’Œå¼€å‘å·¥å…·ã€‚</p>\n<h3 id=\"ä»€ä¹ˆæ˜¯è·¨å¹³å°æ€§ï¼ŸåŸç†æ˜¯ä»€ä¹ˆ\"><a href=\"#ä»€ä¹ˆæ˜¯è·¨å¹³å°æ€§ï¼ŸåŸç†æ˜¯ä»€ä¹ˆ\" class=\"headerlink\" title=\"ä»€ä¹ˆæ˜¯è·¨å¹³å°æ€§ï¼ŸåŸç†æ˜¯ä»€ä¹ˆ\"></a>ä»€ä¹ˆæ˜¯è·¨å¹³å°æ€§ï¼ŸåŸç†æ˜¯ä»€ä¹ˆ</h3><p>æ‰€è°“è·¨å¹³å°æ€§ï¼Œæ˜¯æŒ‡Javaè¯­è¨€ç¼–å†™çš„ç¨‹åºï¼Œä¸€æ¬¡ç¼–è¯‘ï¼Œåˆ°å¤„è¿è¡Œã€‚</p>\n<p>å®ç°åŸç†ï¼šJavaç¨‹åºæ˜¯é€šè¿‡Javaè™šæ‹Ÿæœºåœ¨ç³»ç»Ÿå¹³å°ä¸Šè¿è¡Œçš„ï¼Œåªè¦è¯¥ç³»ç»Ÿå¯ä»¥å®‰è£…ç›¸åº”çš„Javaè™šæ‹Ÿæœºï¼Œè¯¥ç³»ç»Ÿå°±å¯ä»¥è¿è¡ŒJavaç¨‹åºã€‚</p>\n<h3 id=\"Javaè¯­è¨€æœ‰å“ªäº›ç‰¹ç‚¹\"><a href=\"#Javaè¯­è¨€æœ‰å“ªäº›ç‰¹ç‚¹\" class=\"headerlink\" title=\"Javaè¯­è¨€æœ‰å“ªäº›ç‰¹ç‚¹\"></a>Javaè¯­è¨€æœ‰å“ªäº›ç‰¹ç‚¹</h3><p>é¢å‘å¯¹è±¡ï¼ˆå°è£…ï¼Œç»§æ‰¿ï¼Œå¤šæ€ï¼‰</p>\n<p>å¹³å°æ— å…³æ€§ï¼ˆJavaè™šæ‹Ÿæœºå®ç°å¹³å°æ— å…³æ€§ï¼‰</p>\n<h3 id=\"ä»€ä¹ˆæ˜¯å­—èŠ‚ç ï¼Ÿé‡‡ç”¨å­—èŠ‚ç çš„æœ€å¤§å¥½å¤„æ˜¯ä»€ä¹ˆ\"><a href=\"#ä»€ä¹ˆæ˜¯å­—èŠ‚ç ï¼Ÿé‡‡ç”¨å­—èŠ‚ç çš„æœ€å¤§å¥½å¤„æ˜¯ä»€ä¹ˆ\" class=\"headerlink\" title=\"ä»€ä¹ˆæ˜¯å­—èŠ‚ç ï¼Ÿé‡‡ç”¨å­—èŠ‚ç çš„æœ€å¤§å¥½å¤„æ˜¯ä»€ä¹ˆ\"></a>ä»€ä¹ˆæ˜¯å­—èŠ‚ç ï¼Ÿé‡‡ç”¨å­—èŠ‚ç çš„æœ€å¤§å¥½å¤„æ˜¯ä»€ä¹ˆ</h3><p><strong>å­—èŠ‚ç </strong>ï¼šJavaæºä»£ç ç»è¿‡è™šæ‹Ÿæœºç¼–è¯‘å™¨ç¼–è¯‘åäº§ç”Ÿçš„æ–‡ä»¶ï¼ˆå³æ‰©å±•ä¸º.classçš„æ–‡ä»¶ï¼‰ï¼Œå®ƒä¸é¢å‘ä»»ä½•ç‰¹å®šçš„å¤„ç†å™¨ï¼Œåªé¢å‘è™šæ‹Ÿæœºã€‚ï¼ˆjavac HelloWorld.Java â†’ HelloWorld.class â†’ Java HelloWorldæ‰§è¡Œç¨‹åºï¼‰</p>\n<p><strong>ç¼–è¯‘ä¸è§£é‡Šå¹¶å­˜</strong></p>\n<p>Javaæºä»£ç (.Javaæ–‡ä»¶)â€”-&gt;ç¼–è¯‘å™¨â€”-&gt;jvmå¯æ‰§è¡Œçš„Javaå­—èŠ‚ç (.classæ–‡ä»¶)â€”-&gt;jvmâ€”-&gt;jvmä¸­è§£é‡Šå™¨â€”â€“&gt;æœºå™¨å¯æ‰§è¡Œçš„äºŒè¿›åˆ¶æœºå™¨ç â€”-&gt;ç¨‹åºè¿è¡Œ</p>\n<h3 id=\"ä»€ä¹ˆæ˜¯Javaç¨‹åºçš„ä¸»ç±»ï¼Ÿ\"><a href=\"#ä»€ä¹ˆæ˜¯Javaç¨‹åºçš„ä¸»ç±»ï¼Ÿ\" class=\"headerlink\" title=\"ä»€ä¹ˆæ˜¯Javaç¨‹åºçš„ä¸»ç±»ï¼Ÿ\"></a>ä»€ä¹ˆæ˜¯Javaç¨‹åºçš„ä¸»ç±»ï¼Ÿ</h3><p>ä¸€ä¸ªç¨‹åºä¸­å¯ä»¥æœ‰å¤šä¸ªç±»ï¼Œä½†åªèƒ½æœ‰ä¸€ä¸ªç±»æ˜¯ä¸»ç±»ã€‚åœ¨Javaåº”ç”¨ç¨‹åºä¸­ï¼Œè¿™ä¸ªä¸»ç±»æ˜¯æŒ‡åŒ…å«main()æ–¹æ³•çš„ç±»ã€‚<br>ä¸»ç±»æ˜¯Javaç¨‹åºæ‰§è¡Œçš„å…¥å£ã€‚ï¼ˆmainæ–¹æ³•é™¤äº†æ˜¯ä¸ªä¸»æ–¹æ³•ä»¥å¤–ï¼Œå’Œæ™®é€šçš„é™æ€æ–¹æ³•æ²¡æœ‰åŒºåˆ«ï¼Œéƒ½å¯ä»¥é‡è½½ã€è°ƒç”¨ã€ç»§æ‰¿ï¼‰</p>\n<h3 id=\"Javaå’ŒC-çš„åŒºåˆ«\"><a href=\"#Javaå’ŒC-çš„åŒºåˆ«\" class=\"headerlink\" title=\"Javaå’ŒC++çš„åŒºåˆ«\"></a>Javaå’ŒC++çš„åŒºåˆ«</h3><p>ç›¸åŒç‚¹ï¼šéƒ½æ˜¯<strong>é¢å‘å¯¹è±¡</strong>çš„è¯­è¨€ï¼Œéƒ½æ”¯æŒ<strong>å°è£…ã€ç»§æ‰¿å’Œå¤šæ€</strong></p>\n<p>ä¸åŒç‚¹ï¼š</p>\n<ul>\n<li><p><strong>Javaä¸æä¾›æŒ‡é’ˆ</strong>æ¥ç›´æ¥è®¿é—®å†…å­˜ï¼Œç¨‹åºå†…å­˜æ›´åŠ å®‰å…¨ï¼Œæœ‰è‡ªåŠ¨å†…å­˜ç®¡ç†ï¼›C++ç”¨æŒ‡é’ˆç®¡ç†å†…å­˜</p>\n</li>\n<li><p>Javaçš„<strong>ç±»æ˜¯å•ç»§æ‰¿</strong>çš„ï¼ŒC++æ”¯æŒå¤šé‡ç»§æ‰¿ï¼›è™½ç„¶Javaçš„ç±»ä¸å¯ä»¥å¤šç»§æ‰¿ï¼Œä½†æ˜¯æ¥å£å¯ä»¥å¤šç»§æ‰¿ã€‚</p>\n<p>  ä¸ºä»€ä¹ˆJavaä¸­ç±»ä¸æ”¯æŒå¤šç»§æ‰¿ï¼Ÿâ€”â€”å¤šé‡ç»§æ‰¿çš„é’»çŸ³é—®é¢˜</p>\n<p>  <img src=\"https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/TyporaNotes20190622142003813.png\" alt=\"å¤šé‡ç»§æ‰¿çš„é’»çŸ³é—®é¢˜\"><br>  ç±» B å’Œç±» C ç»§æ‰¿è‡ªç±» Aï¼Œä¸”éƒ½é‡å†™äº†ç±» A ä¸­çš„åŒä¸€ä¸ªæ–¹æ³•ï¼Œè€Œç±» D åŒæ—¶ç»§æ‰¿äº†ç±» B å’Œç±» Cï¼ˆå¤šç»§æ‰¿)ï¼Œé‚£ä¹ˆæ­¤æ—¶ç±» D ä¼šç»§æ‰¿ Bã€C çš„æ–¹æ³•ï¼Œé‚£å¯¹äº Bã€C é‡å†™çš„ A ä¸­çš„æ–¹æ³•ï¼Œç±» D ä¼šç»§æ‰¿å“ªä¸€ä¸ªå‘¢ï¼Ÿ</p>\n</li>\n<li><p>Javaæœ‰<strong>è‡ªåŠ¨å†…å­˜ç®¡ç†</strong>æœºåˆ¶ï¼Œä¸éœ€è¦ç¨‹åºå‘˜æ‰‹åŠ¨é‡Šæ”¾æ— ç”¨å†…å­˜</p>\n</li>\n</ul>\n<h2 id=\"åŸºç¡€è¯­æ³•\"><a href=\"#åŸºç¡€è¯­æ³•\" class=\"headerlink\" title=\"åŸºç¡€è¯­æ³•\"></a>åŸºç¡€è¯­æ³•</h2><h3 id=\"æ•°æ®ç±»å‹\"><a href=\"#æ•°æ®ç±»å‹\" class=\"headerlink\" title=\"æ•°æ®ç±»å‹\"></a>æ•°æ®ç±»å‹</h3><p><strong>å®šä¹‰</strong>ï¼šJavaè¯­è¨€æ˜¯å¼ºç±»å‹è¯­è¨€ï¼Œå¯¹äºæ¯ä¸€ç§æ•°æ®éƒ½å®šä¹‰äº†æ˜ç¡®çš„å…·ä½“çš„æ•°æ®ç±»å‹ï¼Œåœ¨å†…å­˜ä¸­åˆ†é…äº†ä¸åŒå¤§å°çš„å†…å­˜ç©ºé—´ã€‚</p>\n<p><strong>åˆ†ç±»</strong></p>\n<ul>\n<li>åŸºæœ¬æ•°æ®ç±»å‹<ul>\n<li>æ•°å€¼å‹<ul>\n<li>æ•´æ•°ç±»å‹(byte,short,int,long)</li>\n<li>æµ®ç‚¹ç±»å‹(float,double)</li>\n</ul>\n</li>\n<li>å­—ç¬¦å‹(char)</li>\n<li>å¸ƒå°”å‹(boolean)</li>\n</ul>\n</li>\n<li>å¼•ç”¨æ•°æ®ç±»å‹<ul>\n<li>ç±»(class)</li>\n<li>æ¥å£(interface)</li>\n<li>æ•°ç»„([])</li>\n</ul>\n</li>\n</ul>\n<p><strong>JavaåŸºæœ¬æ•°æ®ç±»å‹å›¾</strong></p>\n<p><img src=\"https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/TyporaNotesaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL0pvdXJXb24vaW1hZ2UvbWFzdGVyL0phdmElRTUlOUYlQkElRTclQTElODAlRTglQUYlQUQlRTYlQjMlOTUvSmF2YSVFNSU5RiVCQSVFNiU5QyVBQyVFNiU5NSVCMCVFNiU4RCVBRSVFNyVCMSVCQiVFNSU5RSU4Qi5wbmc.png\" alt=\"JavaåŸºæœ¬æ•°æ®ç±»å‹å›¾\"></p>\n<h3 id=\"ç±»å‹è½¬æ¢\"><a href=\"#ç±»å‹è½¬æ¢\" class=\"headerlink\" title=\"ç±»å‹è½¬æ¢\"></a>ç±»å‹è½¬æ¢</h3><p>è‡ªåŠ¨ç±»å‹è½¬æ¢</p>\n<blockquote>\n<p>ä¸¤ç§æ•°æ®ç±»å‹å½¼æ­¤å…¼å®¹</p>\n<p>ä½çº§ç±»å‹æ•°æ®è½¬æ¢æˆé«˜çº§ç±»å‹æ•°æ®</p>\n</blockquote>\n<ul>\n<li>æ•°å€¼å‹æ•°æ®çš„è½¬æ¢ï¼šbyteâ†’shortâ†’intâ†’longâ†’floatâ†’double</li>\n<li>å­—ç¬¦å‹è½¬æ¢ä¸ºæ•´å‹ï¼šcharâ†’intã€‚</li>\n</ul>\n<p>å¼ºåˆ¶ç±»å‹è½¬æ¢</p>\n<blockquote>\n<p>å½“ä¸¤ç§æ•°æ®ç±»å‹ä¸å…¼å®¹ï¼Œæˆ–é«˜çº§ç±»å‹æ•°æ®è½¬æ¢æˆä½çº§ç±»å‹æ•°æ®æ—¶ï¼Œè‡ªåŠ¨è½¬æ¢å°†æ— æ³•è¿›è¡Œï¼ˆç¼–è¯‘é”™è¯¯ï¼‰ï¼Œè¿™æ—¶å°±éœ€è¦è¿›è¡Œå¼ºåˆ¶ç±»å‹è½¬æ¢</p>\n</blockquote>\n<h3 id=\"è®¿é—®ä¿®é¥°ç¬¦\"><a href=\"#è®¿é—®ä¿®é¥°ç¬¦\" class=\"headerlink\" title=\"è®¿é—®ä¿®é¥°ç¬¦\"></a>è®¿é—®ä¿®é¥°ç¬¦</h3><p><img src=\"https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/TyporaNotesaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL0pvdXJXb24vaW1hZ2UvbWFzdGVyL0phdmElRTUlOUYlQkElRTclQTElODAlRTglQUYlQUQlRTYlQjMlOTUvSmF2YSVFOCVBRSVCRiVFOSU5NyVBRSVFNCVCRiVBRSVFOSVBNSVCMCVFNyVBQyVBNi5wbmc.png\" alt=\"è®¿é—®ä¿®é¥°ç¬¦\"></p>\n<h3 id=\"å…³é”®å­—\"><a href=\"#å…³é”®å­—\" class=\"headerlink\" title=\"å…³é”®å­—\"></a>å…³é”®å­—</h3><h4 id=\"final-æœ‰ä»€ä¹ˆç”¨ï¼Ÿ\"><a href=\"#final-æœ‰ä»€ä¹ˆç”¨ï¼Ÿ\" class=\"headerlink\" title=\"final æœ‰ä»€ä¹ˆç”¨ï¼Ÿ\"></a>final æœ‰ä»€ä¹ˆç”¨ï¼Ÿ</h4><p>ç”¨äºä¿®é¥°ç±»ã€æ–¹æ³•å’Œå˜é‡ï¼›</p>\n<ul>\n<li><p>è¢«finalä¿®é¥°çš„ç±»ä¸å¯ä»¥è¢«ç»§æ‰¿</p>\n</li>\n<li><p>è¢«finalä¿®é¥°çš„æ–¹æ³•ä¸å¯ä»¥è¢«é‡å†™</p>\n</li>\n<li><p>è¢«finalä¿®é¥°çš„å˜é‡ä¸å¯ä»¥è¢«æ”¹å˜ï¼Œè¢«finalä¿®é¥°<strong>ä¸å¯å˜çš„æ˜¯å˜é‡çš„å¼•ç”¨ï¼Œè€Œä¸æ˜¯å¼•ç”¨æŒ‡å‘çš„å†…å®¹</strong>ï¼Œå¼•ç”¨æŒ‡å‘çš„å†…å®¹æ˜¯å¯ä»¥æ”¹å˜</p>\n  <figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">final</span> <span class=\"type\">int</span>[] nums = <span class=\"keyword\">new</span> <span class=\"title class_\">int</span>[]&#123;<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>&#125;;</span><br><span class=\"line\">nums[<span class=\"number\">0</span>] = <span class=\"number\">11</span>;</span><br><span class=\"line\">System.out.println(Arrays.toString(nums));\t<span class=\"comment\">// [11, 2, 3]</span></span><br></pre></td></tr></table></figure></li>\n</ul>\n<h4 id=\"finalã€finallyã€finalizeåŒºåˆ«\"><a href=\"#finalã€finallyã€finalizeåŒºåˆ«\" class=\"headerlink\" title=\"finalã€finallyã€finalizeåŒºåˆ«\"></a>finalã€finallyã€finalizeåŒºåˆ«</h4><ul>\n<li>finalæ˜¯Javaä¿®é¥°ç¬¦ï¼Œå¯ä»¥ä¿®é¥°ç±»ã€æ–¹æ³•ã€å˜é‡ï¼Œä¿®é¥°ç±»è¡¨ç¤ºè¯¥ç±»ä¸èƒ½è¢«ç»§æ‰¿ã€ä¿®é¥°æ–¹æ³•è¡¨ç¤ºè¯¥æ–¹æ³•ä¸èƒ½è¢«é‡å†™ã€ä¿®é¥°å˜é‡è¡¨ç¤ºè¯¥å˜é‡ä¸å¯ä»¥è¢«æ”¹å˜ã€‚</li>\n<li>finallyä¸€èˆ¬ä½œç”¨åœ¨try-catchä»£ç å—ä¸­ï¼Œåœ¨å¤„ç†å¼‚å¸¸çš„æ—¶å€™ï¼Œé€šå¸¸æˆ‘ä»¬å°†ä¸€å®šè¦æ‰§è¡Œçš„ä»£ç æ–¹æ³•finallyä»£ç å—<br>  ä¸­ï¼Œè¡¨ç¤ºä¸ç®¡æ˜¯å¦å‡ºç°å¼‚å¸¸ï¼Œè¯¥ä»£ç å—éƒ½ä¼šæ‰§è¡Œï¼Œä¸€èˆ¬ç”¨æ¥å­˜æ”¾ä¸€äº›å…³é—­èµ„æºçš„ä»£ç ã€‚</li>\n<li>finalizeæ˜¯Objectç±»çš„ä¸€ä¸ªæ–¹æ³•ï¼Œè¯¥æ–¹æ³•ä¸€èˆ¬ç”±åƒåœ¾å›æ”¶å™¨æ¥è°ƒç”¨ï¼Œåœ¨æ‰§è¡Œåƒåœ¾å›æ”¶å‰ï¼Œç”±åƒåœ¾å›æ”¶å™¨è°ƒç”¨å¯¹è±¡çš„finalize()æ–¹æ³•ï¼Œå¹¶ä¸”åœ¨è¯¥æ–¹æ³•ä¸­å¯¹è±¡å¯èƒ½å¯ä»¥å¤æ´»ã€‚</li>\n</ul>\n<h4 id=\"thiså…³é”®å­—çš„ç”¨æ³•\"><a href=\"#thiså…³é”®å­—çš„ç”¨æ³•\" class=\"headerlink\" title=\"thiså…³é”®å­—çš„ç”¨æ³•\"></a>thiså…³é”®å­—çš„ç”¨æ³•</h4><p>æŒ‡å‘å¯¹è±¡æœ¬èº«çš„ä¸€ä¸ªæŒ‡é’ˆã€‚</p>\n<h4 id=\"superå…³é”®å­—çš„ç”¨æ³•\"><a href=\"#superå…³é”®å­—çš„ç”¨æ³•\" class=\"headerlink\" title=\"superå…³é”®å­—çš„ç”¨æ³•\"></a>superå…³é”®å­—çš„ç”¨æ³•</h4><p>æŒ‡å‘è‡ªå·±çˆ¶ç±»å¯¹è±¡ï¼ˆæœ€è¿‘çš„çˆ¶ç±»ï¼‰çš„ä¸€ä¸ªæŒ‡é’ˆã€‚</p>\n<h4 id=\"staticå­˜åœ¨çš„ä¸»è¦æ„ä¹‰\"><a href=\"#staticå­˜åœ¨çš„ä¸»è¦æ„ä¹‰\" class=\"headerlink\" title=\"staticå­˜åœ¨çš„ä¸»è¦æ„ä¹‰\"></a>staticå­˜åœ¨çš„ä¸»è¦æ„ä¹‰</h4><p>static<strong>é™æ€å˜é‡</strong>ï¼šå’Œç±»ä¸€èµ·åŠ è½½ï¼Œ<strong>ä»¥è‡´äºå³ä½¿æ²¡æœ‰åˆ›å»ºå¯¹è±¡ï¼Œä¹Ÿèƒ½ä½¿ç”¨å±æ€§å’Œè°ƒç”¨æ–¹æ³•ã€‚</strong></p>\n<p>static<strong>é™æ€ä»£ç å—</strong>ï¼šåœ¨ç±»åˆæ¬¡è¢«åŠ è½½çš„æ—¶å€™ï¼Œä¼šæŒ‰ç…§staticå—çš„é¡ºåºæ¥æ‰§è¡Œæ¯ä¸ªstaticå—ï¼Œå¹¶ä¸”åªä¼šæ‰§è¡Œä¸€æ¬¡ã€‚<br>åŠ è½½ â†’ é“¾æ¥ï¼ˆéªŒè¯ã€å‡†å¤‡ã€è§£æï¼‰ â†’ åˆå§‹åŒ–</p>\n<p>staticç±»å‹çš„å˜é‡åœ¨å‡†å¤‡é˜¶æ®µè¿›è¡Œé»˜è®¤åˆå§‹åŒ–ï¼Œä½†æ˜¯æœ‰static finalä¿®é¥°çš„ä¼šåœ¨å‡†å¤‡é˜¶æ®µç›´æ¥èµ‹å€¼ï¼Œ åœ¨åˆå§‹åŒ–é˜¶æ®µè¿›è¡Œæ˜¾å¼åˆå§‹åŒ–ã€‚</p>\n<h4 id=\"staticæ³¨æ„äº‹é¡¹\"><a href=\"#staticæ³¨æ„äº‹é¡¹\" class=\"headerlink\" title=\"staticæ³¨æ„äº‹é¡¹\"></a>staticæ³¨æ„äº‹é¡¹</h4><p>1ã€é™æ€åªèƒ½è®¿é—®é™æ€ã€‚ 2ã€éé™æ€æ—¢å¯ä»¥è®¿é—®éé™æ€çš„ï¼Œä¹Ÿå¯ä»¥è®¿é—®é™æ€çš„ã€‚</p>\n<h3 id=\"åˆå§‹åŒ–é¡ºåº\"><a href=\"#åˆå§‹åŒ–é¡ºåº\" class=\"headerlink\" title=\"åˆå§‹åŒ–é¡ºåº\"></a>åˆå§‹åŒ–é¡ºåº</h3><p>é™æ€å±æ€§ â†’ é™æ€æ–¹æ³•å— â†’ æ™®é€šå±æ€§ â†’ æ™®é€šæ–¹æ³•å— â†’ æ„é€ å‡½æ•°</p>\n<h3 id=\"æµç¨‹æ§åˆ¶è¯­å¥\"><a href=\"#æµç¨‹æ§åˆ¶è¯­å¥\" class=\"headerlink\" title=\"æµç¨‹æ§åˆ¶è¯­å¥\"></a>æµç¨‹æ§åˆ¶è¯­å¥</h3><h4 id=\"break-ã€continueã€return-çš„åŒºåˆ«åŠä½œç”¨\"><a href=\"#break-ã€continueã€return-çš„åŒºåˆ«åŠä½œç”¨\" class=\"headerlink\" title=\"break ã€continueã€return çš„åŒºåˆ«åŠä½œç”¨\"></a>break ã€continueã€return çš„åŒºåˆ«åŠä½œç”¨</h4><p>break ç»“æŸå½“å‰çš„å¾ªç¯ä½“</p>\n<p>continue ç»“æŸæ­£åœ¨æ‰§è¡Œçš„å¾ªç¯ï¼Œè¿›å…¥ä¸‹ä¸€ä¸ªå¾ªç¯æ¡ä»¶</p>\n<p>return ç»“æŸå½“å‰çš„æ–¹æ³•ï¼Œç›´æ¥è¿”å›</p>\n<h4 id=\"è·³å‡ºå½“å‰çš„å¤šé‡åµŒå¥—å¾ªç¯\"><a href=\"#è·³å‡ºå½“å‰çš„å¤šé‡åµŒå¥—å¾ªç¯\" class=\"headerlink\" title=\"è·³å‡ºå½“å‰çš„å¤šé‡åµŒå¥—å¾ªç¯\"></a>è·³å‡ºå½“å‰çš„å¤šé‡åµŒå¥—å¾ªç¯</h4><p>åœ¨Javaä¸­ï¼Œè¦æƒ³è·³å‡ºå¤šé‡å¾ªç¯ï¼Œå¯ä»¥åœ¨å¤–é¢çš„å¾ªç¯è¯­å¥å‰å®šä¹‰ä¸€ä¸ªæ ‡å·ï¼Œç„¶ååœ¨é‡Œå±‚å¾ªç¯ä½“çš„ä»£ç ä¸­ä½¿ç”¨å¸¦æœ‰æ ‡å·çš„break è¯­å¥ï¼Œå³å¯è·³å‡ºå¤–å±‚å¾ªç¯ã€‚ä¾‹å¦‚ï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> &#123;</span><br><span class=\"line\">    ok:</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>; i &lt; <span class=\"number\">10</span>; i++) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">j</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>; j &lt; <span class=\"number\">10</span>; j++) &#123;</span><br><span class=\"line\">            System.out.println(<span class=\"string\">&quot;i=&quot;</span> + i + <span class=\"string\">&quot;,j=&quot;</span> + j);</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (j == <span class=\"number\">5</span>) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">break</span> ok;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"é¢å‘å¯¹è±¡\"><a href=\"#é¢å‘å¯¹è±¡\" class=\"headerlink\" title=\"é¢å‘å¯¹è±¡\"></a>é¢å‘å¯¹è±¡</h2><h3 id=\"é¢å‘å¯¹è±¡ä¸‰å¤§ç‰¹æ€§\"><a href=\"#é¢å‘å¯¹è±¡ä¸‰å¤§ç‰¹æ€§\" class=\"headerlink\" title=\"é¢å‘å¯¹è±¡ä¸‰å¤§ç‰¹æ€§\"></a>é¢å‘å¯¹è±¡ä¸‰å¤§ç‰¹æ€§</h3><h4 id=\"é¢å‘å¯¹è±¡çš„ç‰¹å¾æœ‰å“ªäº›æ–¹é¢\"><a href=\"#é¢å‘å¯¹è±¡çš„ç‰¹å¾æœ‰å“ªäº›æ–¹é¢\" class=\"headerlink\" title=\"é¢å‘å¯¹è±¡çš„ç‰¹å¾æœ‰å“ªäº›æ–¹é¢\"></a>é¢å‘å¯¹è±¡çš„ç‰¹å¾æœ‰å“ªäº›æ–¹é¢</h4><p><strong>æŠ½è±¡</strong>ï¼šæŠ½è±¡æ˜¯å°†ä¸€ç±»å¯¹è±¡çš„å…±åŒç‰¹å¾æ€»ç»“å‡ºæ¥æ„é€ ç±»çš„è¿‡ç¨‹ï¼ŒåŒ…æ‹¬æ•°æ®æŠ½è±¡å’Œè¡Œä¸ºæŠ½è±¡ä¸¤æ–¹é¢ã€‚æŠ½è±¡åªå…³æ³¨å¯¹è±¡æœ‰å“ªäº›å±æ€§å’Œè¡Œä¸ºï¼Œå¹¶ä¸å…³æ³¨è¿™äº›è¡Œä¸ºçš„ç»†èŠ‚æ˜¯ä»€ä¹ˆã€‚</p>\n<p><strong>å°è£…</strong></p>\n<p>å°è£…æŠŠä¸€ä¸ªå¯¹è±¡çš„å±æ€§ç§æœ‰åŒ–ï¼ŒåŒæ—¶æä¾›ä¸€äº›å¯ä»¥è¢«å¤–ç•Œè®¿é—®çš„å±æ€§çš„æ–¹æ³•ï¼Œå¦‚æœå±æ€§ä¸æƒ³è¢«å¤–ç•Œè®¿é—®ï¼Œæˆ‘ä»¬å¤§å¯ä¸å¿…æä¾›æ–¹æ³•ç»™å¤–ç•Œè®¿é—®ã€‚</p>\n<p><strong>ç»§æ‰¿</strong></p>\n<p>ç»§æ‰¿æ˜¯<strong>ä½¿ç”¨å·²å­˜åœ¨çš„ç±»ä½œä¸ºåŸºç¡€å»ºç«‹æ–°ç±»</strong>çš„æŠ€æœ¯ï¼Œæ–°ç±»çš„å®šä¹‰å¯ä»¥å¢åŠ æ–°çš„æ•°æ®æˆ–æ–°çš„åŠŸèƒ½ï¼Œä¹Ÿå¯ä»¥ç”¨çˆ¶ç±»çš„åŠŸèƒ½ã€‚é€šè¿‡ä½¿ç”¨ç»§æ‰¿æˆ‘ä»¬èƒ½å¤Ÿéå¸¸æ–¹ä¾¿åœ°å¤ç”¨ä»¥å‰çš„ä»£ç ã€‚</p>\n<p>å…³äºç»§æ‰¿å¦‚ä¸‹ 3 ç‚¹è¯·è®°ä½ï¼š</p>\n<ol>\n<li>å­ç±»æ‹¥æœ‰çˆ¶ç±»é private çš„å±æ€§å’Œæ–¹æ³•ã€‚</li>\n<li>å­ç±»å¯ä»¥æ‹¥æœ‰è‡ªå·±å±æ€§å’Œæ–¹æ³•ï¼Œå³å­ç±»å¯ä»¥å¯¹çˆ¶ç±»è¿›è¡Œæ‰©å±•ã€‚</li>\n<li>å­ç±»å¯ä»¥ç”¨è‡ªå·±çš„æ–¹å¼å®ç°çˆ¶ç±»çš„æ–¹æ³•ï¼Œoverrideé‡å†™ã€‚</li>\n</ol>\n<p><strong>å¤šæ€</strong></p>\n<p>æ‰€è°“å¤šæ€å°±æ˜¯æŒ‡ä¸€ä¸ªå¼•ç”¨å˜é‡åˆ°åº•ä¼šæŒ‡å‘å“ªä¸ªç±»çš„å®ä¾‹å¯¹è±¡ï¼Œè¯¥å¼•ç”¨å˜é‡è°ƒç”¨çš„æ–¹æ³•åˆ°åº•æ˜¯å“ªä¸ªç±»ä¸­å®ç°çš„æ–¹æ³•ï¼Œå¿…é¡»åœ¨ç¨‹åºè¿è¡ŒæœŸé—´æ‰èƒ½ç¡®å®šï¼Œç¼–è¯‘æœŸæ— æ³•ç¡®å®šã€‚</p>\n<p>çˆ¶ç±»çš„å¼•ç”¨æŒ‡å‘å­ç±»å®ä¾‹å¯¹è±¡ã€æ¥å£æŒ‡å‘å®ç°ç±»å®ä¾‹å¯¹è±¡ã€‚æé«˜äº†ç¨‹åºçš„æ‹“å±•æ€§ã€‚</p>\n<p>åœ¨Javaä¸­æœ‰ä¸¤ç§å½¢å¼å¯ä»¥å®ç°å¤šæ€ï¼šç»§æ‰¿ï¼ˆå¤šä¸ªå­ç±»å¯¹åŒä¸€æ–¹æ³•çš„é‡å†™ï¼‰å’Œæ¥å£ï¼ˆå®ç°æ¥å£å¹¶è¦†ç›–æ¥å£ä¸­åŒä¸€æ–¹æ³•ï¼‰ã€‚</p>\n<p>æ–¹æ³•é‡è½½ï¼ˆoverloadï¼‰å®ç°ç¼–è¯‘æ—¶çš„å¤šæ€æ€§ï¼ˆä¹Ÿç§°ä¸ºå‰ç»‘å®šï¼‰ï¼Œæ–¹æ³•é‡å†™ï¼ˆoverrideï¼‰å®ç°è¿è¡Œæ—¶çš„å¤šæ€æ€§ï¼ˆä¹Ÿç§°ä¸ºåç»‘å®šï¼‰ã€‚</p>\n<p>Javaå®ç°å¤šæ€æœ‰ä¸‰ä¸ªå¿…è¦æ¡ä»¶ï¼šç»§æ‰¿ã€é‡å†™ã€å‘ä¸Šè½¬å‹ã€‚</p>\n<blockquote>\n<p>ç»§æ‰¿ï¼šåœ¨å¤šæ€ä¸­å¿…é¡»å­˜åœ¨æœ‰ç»§æ‰¿å…³ç³»çš„å­ç±»å’Œçˆ¶ç±»ã€‚</p>\n<p>é‡å†™ï¼šå­ç±»å¯¹çˆ¶ç±»ä¸­æŸäº›æ–¹æ³•è¿›è¡Œé‡æ–°å®šä¹‰ï¼Œåœ¨è°ƒç”¨è¿™äº›æ–¹æ³•æ—¶å°±ä¼šè°ƒç”¨å­ç±»çš„æ–¹æ³•ã€‚</p>\n<p>å‘ä¸Šè½¬å‹ï¼šåœ¨å¤šæ€ä¸­éœ€è¦å°†å­ç±»çš„å¼•ç”¨èµ‹ç»™çˆ¶ç±»å¯¹è±¡ï¼Œåªæœ‰è¿™æ ·è¯¥å¼•ç”¨æ‰èƒ½å¤Ÿå…·å¤‡æŠ€èƒ½è°ƒç”¨çˆ¶ç±»çš„æ–¹æ³•å’Œå­ç±»çš„æ–¹æ³•ã€‚</p>\n</blockquote>\n<p>åªæœ‰æ»¡è¶³äº†ä¸Šè¿°ä¸‰ä¸ªæ¡ä»¶ï¼Œæˆ‘ä»¬æ‰èƒ½å¤Ÿåœ¨åŒä¸€ä¸ªç»§æ‰¿ç»“æ„ä¸­ä½¿ç”¨ç»Ÿä¸€çš„é€»è¾‘å®ç°ä»£ç å¤„ç†ä¸åŒçš„å¯¹è±¡ï¼Œä»è€Œè¾¾åˆ°æ‰§è¡Œä¸åŒçš„è¡Œä¸ºã€‚</p>\n<h4 id=\"æŠ½è±¡ç±»å’Œæ¥å£çš„å¯¹æ¯”\"><a href=\"#æŠ½è±¡ç±»å’Œæ¥å£çš„å¯¹æ¯”\" class=\"headerlink\" title=\"æŠ½è±¡ç±»å’Œæ¥å£çš„å¯¹æ¯”\"></a>æŠ½è±¡ç±»å’Œæ¥å£çš„å¯¹æ¯”</h4><p>æŠ½è±¡ç±»æ˜¯å¯¹ç±»çš„æŠ½è±¡ï¼Œç”¨æ¥<strong>æ•æ‰é€šç”¨ç‰¹æ€§</strong>ã€‚æ¥å£æ˜¯<strong>è¡Œä¸ºçš„æŠ½è±¡</strong>ï¼ŒæŠ½è±¡æ–¹æ³•çš„é›†åˆã€‚</p>\n<p><strong>ç›¸åŒç‚¹</strong></p>\n<ul>\n<li>æ¥å£å’ŒæŠ½è±¡ç±»éƒ½ä¸èƒ½å®ä¾‹åŒ–</li>\n<li>éƒ½ä½äºç»§æ‰¿çš„é¡¶ç«¯ï¼Œç”¨äºè¢«å…¶ä»–ç±»å®ç°æˆ–ç»§æ‰¿</li>\n<li>éƒ½åŒ…å«æŠ½è±¡æ–¹æ³•ï¼Œå…¶å­ç±»éƒ½å¿…é¡»é‡å†™è¿™äº›æŠ½è±¡æ–¹æ³•</li>\n</ul>\n<p><strong>ä¸åŒç‚¹</strong></p>\n<table>\n<thead>\n<tr>\n<th>å‚æ•°</th>\n<th>æŠ½è±¡ç±»</th>\n<th>æ¥å£</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>å£°æ˜</td>\n<td>æŠ½è±¡ç±»ä½¿ç”¨abstractå…³é”®å­—å£°æ˜</td>\n<td>æ¥å£ä½¿ç”¨interfaceå…³é”®å­—å£°æ˜</td>\n</tr>\n<tr>\n<td>å®ç°</td>\n<td>å­ç±»ä½¿ç”¨extendså…³é”®å­—æ¥ç»§æ‰¿æŠ½è±¡ç±»</td>\n<td>å­ç±»ä½¿ç”¨implementså…³é”®å­—æ¥å®ç°æ¥å£</td>\n</tr>\n<tr>\n<td>æ„é€ å™¨</td>\n<td>æŠ½è±¡ç±»å¯ä»¥æœ‰æ„é€ å™¨</td>\n<td>æ¥å£ä¸èƒ½æœ‰æ„é€ å™¨</td>\n</tr>\n<tr>\n<td>è®¿é—®ä¿®é¥°ç¬¦</td>\n<td>æŠ½è±¡ç±»ä¸­çš„æ–¹æ³•å¯ä»¥æ˜¯ä»»æ„è®¿é—®ä¿®é¥°ç¬¦</td>\n<td>æ¥å£æ–¹æ³•é»˜è®¤ä¿®é¥°ç¬¦æ˜¯publicï¼Œä¹Ÿå¯ä»¥ä¸åŠ è®¿é—®ä¿®é¥°ç¬¦</td>\n</tr>\n<tr>\n<td>å¤šç»§æ‰¿</td>\n<td>ä¸€ä¸ªç±»æœ€å¤šåªèƒ½ç»§æ‰¿ä¸€ä¸ªæŠ½è±¡ç±»</td>\n<td>ä¸€ä¸ªç±»å¯ä»¥å®ç°å¤šä¸ªæ¥å£</td>\n</tr>\n</tbody></table>\n<h4 id=\"æ™®é€šç±»å’ŒæŠ½è±¡ç±»æœ‰å“ªäº›åŒºåˆ«ï¼Ÿ\"><a href=\"#æ™®é€šç±»å’ŒæŠ½è±¡ç±»æœ‰å“ªäº›åŒºåˆ«ï¼Ÿ\" class=\"headerlink\" title=\"æ™®é€šç±»å’ŒæŠ½è±¡ç±»æœ‰å“ªäº›åŒºåˆ«ï¼Ÿ\"></a>æ™®é€šç±»å’ŒæŠ½è±¡ç±»æœ‰å“ªäº›åŒºåˆ«ï¼Ÿ</h4><ul>\n<li>æ™®é€šç±»ä¸èƒ½åŒ…å«æŠ½è±¡æ–¹æ³•ï¼ŒæŠ½è±¡ç±»å¯ä»¥åŒ…å«æŠ½è±¡æ–¹æ³•ã€‚</li>\n<li>æŠ½è±¡ç±»ä¸èƒ½ç›´æ¥å®ä¾‹åŒ–ï¼Œæ™®é€šç±»å¯ä»¥ç›´æ¥å®ä¾‹åŒ–ã€‚</li>\n</ul>\n<h4 id=\"æˆå‘˜å˜é‡å’Œå±€éƒ¨å˜é‡çš„åŒºåˆ«\"><a href=\"#æˆå‘˜å˜é‡å’Œå±€éƒ¨å˜é‡çš„åŒºåˆ«\" class=\"headerlink\" title=\"æˆå‘˜å˜é‡å’Œå±€éƒ¨å˜é‡çš„åŒºåˆ«\"></a>æˆå‘˜å˜é‡å’Œå±€éƒ¨å˜é‡çš„åŒºåˆ«</h4><table>\n<thead>\n<tr>\n<th></th>\n<th>æˆå‘˜å˜é‡</th>\n<th>å±€éƒ¨å˜é‡</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><strong>ä½œç”¨åŸŸ</strong></td>\n<td>æ•´ä¸ªç±»å¯ä½¿ç”¨</td>\n<td>æ–¹æ³•ä½“å†…ä½¿ç”¨</td>\n</tr>\n<tr>\n<td><strong>å­˜å‚¨ä½ç½®</strong></td>\n<td>å±äºå¯¹è±¡ï¼Œå­˜åœ¨å †å†…å­˜ä¸­</td>\n<td>å±äºæ–¹æ³•ï¼Œå­˜åœ¨æ ˆå¸§ä¸­</td>\n</tr>\n<tr>\n<td><strong>ç”Ÿå‘½å‘¨æœŸ</strong></td>\n<td>å’Œå¯¹è±¡åŒç”Ÿå‘½å‘¨æœŸ</td>\n<td>å’Œæ–¹æ³•åŒç”Ÿå‘½å‘¨æœŸ</td>\n</tr>\n<tr>\n<td><strong>åˆå§‹å€¼</strong></td>\n<td>ä¸æŒ‡å®šçš„è¯æœ‰é»˜è®¤åˆå§‹å€¼</td>\n<td>å¿…é¡»æ‰‹åŠ¨åˆå§‹åŒ–å¦åˆ™<br />ä¸èƒ½ä½¿ç”¨ï¼ˆç¼–è¯‘é”™è¯¯ï¼‰</td>\n</tr>\n</tbody></table>\n<p><strong>ä½¿ç”¨åŸåˆ™</strong></p>\n<p>åœ¨ä½¿ç”¨å˜é‡æ—¶éœ€è¦éµå¾ªçš„åŸåˆ™ä¸ºï¼šå°±è¿‘åŸåˆ™<br>é¦–å…ˆåœ¨å±€éƒ¨èŒƒå›´æ‰¾ï¼Œæœ‰å°±ä½¿ç”¨ï¼›æ¥ç€åœ¨æˆå‘˜ä½ç½®æ‰¾ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">Main</span> &#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> <span class=\"variable\">a</span> <span class=\"operator\">=</span> <span class=\"number\">2</span>;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> &#123;</span><br><span class=\"line\">        <span class=\"type\">int</span> <span class=\"variable\">a</span> <span class=\"operator\">=</span> <span class=\"number\">1</span>;</span><br><span class=\"line\">        System.out.println(a);\t<span class=\"comment\">// 1</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"å†…éƒ¨ç±»\"><a href=\"#å†…éƒ¨ç±»\" class=\"headerlink\" title=\"å†…éƒ¨ç±»\"></a>å†…éƒ¨ç±»</h3><h4 id=\"ä»€ä¹ˆæ˜¯å†…éƒ¨ç±»ï¼Ÿ\"><a href=\"#ä»€ä¹ˆæ˜¯å†…éƒ¨ç±»ï¼Ÿ\" class=\"headerlink\" title=\"ä»€ä¹ˆæ˜¯å†…éƒ¨ç±»ï¼Ÿ\"></a>ä»€ä¹ˆæ˜¯å†…éƒ¨ç±»ï¼Ÿ</h4><p>åœ¨Javaä¸­ï¼Œå¯ä»¥å°†ä¸€ä¸ªç±»çš„å®šä¹‰æ”¾åœ¨å¦å¤–ä¸€ä¸ªç±»çš„å®šä¹‰å†…éƒ¨ï¼Œè¿™å°±æ˜¯<strong>å†…éƒ¨ç±»</strong>ã€‚</p>\n<h4 id=\"å†…éƒ¨ç±»çš„åˆ†ç±»æœ‰å“ªäº›\"><a href=\"#å†…éƒ¨ç±»çš„åˆ†ç±»æœ‰å“ªäº›\" class=\"headerlink\" title=\"å†…éƒ¨ç±»çš„åˆ†ç±»æœ‰å“ªäº›\"></a>å†…éƒ¨ç±»çš„åˆ†ç±»æœ‰å“ªäº›</h4><p>å†…éƒ¨ç±»å¯ä»¥åˆ†ä¸ºå››ç§ï¼š<strong>é™æ€å†…éƒ¨ç±»ã€æˆå‘˜å†…éƒ¨ç±»ã€å±€éƒ¨å†…éƒ¨ç±»ã€åŒ¿åå†…éƒ¨ç±»</strong>ã€‚</p>\n<h5 id=\"é™æ€å†…éƒ¨ç±»\"><a href=\"#é™æ€å†…éƒ¨ç±»\" class=\"headerlink\" title=\"é™æ€å†…éƒ¨ç±»\"></a>é™æ€å†…éƒ¨ç±»</h5><p>å®šä¹‰åœ¨ç±»å†…éƒ¨çš„é™æ€ç±»ï¼Œå°±æ˜¯é™æ€å†…éƒ¨ç±»ã€‚</p>\n<p>é™æ€å†…éƒ¨ç±»å¯ä»¥è®¿é—®å¤–éƒ¨ç±»æ‰€æœ‰çš„é™æ€å˜é‡ï¼Œè€Œä¸å¯è®¿é—®å¤–éƒ¨ç±»çš„éé™æ€å˜é‡</p>\n<h5 id=\"æˆå‘˜å†…éƒ¨ç±»\"><a href=\"#æˆå‘˜å†…éƒ¨ç±»\" class=\"headerlink\" title=\"æˆå‘˜å†…éƒ¨ç±»\"></a>æˆå‘˜å†…éƒ¨ç±»</h5><p>å®šä¹‰åœ¨ç±»å†…éƒ¨ï¼Œæˆå‘˜ä½ç½®ä¸Šçš„éé™æ€ç±»ï¼Œå°±æ˜¯æˆå‘˜å†…éƒ¨ç±»ã€‚</p>\n<p>æˆå‘˜å†…éƒ¨ç±»å¯ä»¥è®¿é—®å¤–éƒ¨ç±»æ‰€æœ‰çš„å˜é‡å’Œæ–¹æ³•ï¼ŒåŒ…æ‹¬é™æ€å’Œéé™æ€ï¼Œç§æœ‰å’Œå…¬æœ‰ã€‚</p>\n<h5 id=\"å±€éƒ¨å†…éƒ¨ç±»\"><a href=\"#å±€éƒ¨å†…éƒ¨ç±»\" class=\"headerlink\" title=\"å±€éƒ¨å†…éƒ¨ç±»\"></a>å±€éƒ¨å†…éƒ¨ç±»</h5><p>å®šä¹‰åœ¨æ–¹æ³•ä¸­çš„å†…éƒ¨ç±»ï¼Œå°±æ˜¯å±€éƒ¨å†…éƒ¨ç±»ã€‚</p>\n<p>å®šä¹‰åœ¨å®ä¾‹æ–¹æ³•ä¸­çš„å±€éƒ¨ç±»å¯ä»¥è®¿é—®å¤–éƒ¨ç±»çš„æ‰€æœ‰å˜é‡å’Œæ–¹æ³•ï¼Œå®šä¹‰åœ¨é™æ€æ–¹æ³•ä¸­çš„å±€éƒ¨ç±»åªèƒ½è®¿é—®å¤–éƒ¨ç±»çš„é™æ€å˜é‡å’Œæ–¹æ³•</p>\n<h5 id=\"åŒ¿åå†…éƒ¨ç±»\"><a href=\"#åŒ¿åå†…éƒ¨ç±»\" class=\"headerlink\" title=\"åŒ¿åå†…éƒ¨ç±»\"></a>åŒ¿åå†…éƒ¨ç±»</h5><p>åŒ¿åå†…éƒ¨ç±»å°±æ˜¯æ²¡æœ‰åå­—çš„å†…éƒ¨ç±»ï¼Œæ—¥å¸¸å¼€å‘ä¸­ä½¿ç”¨çš„æ¯”è¾ƒå¤šã€‚åŒ¿åå†…éƒ¨ç±»å¿…é¡»ç»§æ‰¿æˆ–å®ç°ä¸€ä¸ªå·²æœ‰çš„æ¥å£ ï¼ŒåŒ¿åå†…éƒ¨ç±»ä¸èƒ½å®šä¹‰ä»»ä½•é™æ€æˆå‘˜å’Œé™æ€æ–¹æ³•</p>\n<h4 id=\"å±€éƒ¨å†…éƒ¨ç±»å’ŒåŒ¿åå†…éƒ¨ç±»è®¿é—®å±€éƒ¨å˜é‡çš„æ—¶å€™ï¼Œä¸ºä»€ä¹ˆå˜é‡å¿…é¡»è¦åŠ ä¸Šfinalï¼Ÿ\"><a href=\"#å±€éƒ¨å†…éƒ¨ç±»å’ŒåŒ¿åå†…éƒ¨ç±»è®¿é—®å±€éƒ¨å˜é‡çš„æ—¶å€™ï¼Œä¸ºä»€ä¹ˆå˜é‡å¿…é¡»è¦åŠ ä¸Šfinalï¼Ÿ\" class=\"headerlink\" title=\"å±€éƒ¨å†…éƒ¨ç±»å’ŒåŒ¿åå†…éƒ¨ç±»è®¿é—®å±€éƒ¨å˜é‡çš„æ—¶å€™ï¼Œä¸ºä»€ä¹ˆå˜é‡å¿…é¡»è¦åŠ ä¸Šfinalï¼Ÿ\"></a>å±€éƒ¨å†…éƒ¨ç±»å’ŒåŒ¿åå†…éƒ¨ç±»è®¿é—®å±€éƒ¨å˜é‡çš„æ—¶å€™ï¼Œä¸ºä»€ä¹ˆå˜é‡å¿…é¡»è¦åŠ ä¸Šfinalï¼Ÿ</h4><p>å±€éƒ¨å†…éƒ¨ç±»å’ŒåŒ¿åå†…éƒ¨ç±»è®¿é—®å±€éƒ¨å˜é‡çš„æ—¶å€™ï¼Œä¸ºä»€ä¹ˆå˜é‡å¿…é¡»è¦åŠ ä¸Šfinalå‘¢ï¼Ÿå®ƒå†…éƒ¨åŸç†æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ</p>\n<p>å…ˆçœ‹è¿™æ®µä»£ç ï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">Outer</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">void</span> <span class=\"title function_\">outMethod</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">final</span> <span class=\"type\">int</span> <span class=\"variable\">a</span> <span class=\"operator\">=</span><span class=\"number\">10</span>;</span><br><span class=\"line\">        <span class=\"keyword\">class</span> <span class=\"title class_\">Inner</span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">void</span> <span class=\"title function_\">innerMethod</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">                System.out.println(a);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ä»¥ä¸Šä¾‹å­ï¼Œä¸ºä»€ä¹ˆè¦åŠ finalå‘¢ï¼Ÿæ˜¯å› ä¸º<strong>ç”Ÿå‘½å‘¨æœŸä¸ä¸€è‡´</strong></p>\n<p>å±€éƒ¨å˜é‡å­˜å‚¨åœ¨æ ˆä¸­ï¼Œå½“æ–¹æ³•æ‰§è¡Œç»“æŸåï¼Œå¦‚æœä¸ç”¨finalä¿®é¥°é‚£ä¹ˆè¯¥å±€éƒ¨å˜é‡å°±è¢«é”€æ¯ã€‚è€Œå±€éƒ¨å†…éƒ¨ç±»å¯¹å±€éƒ¨å˜é‡çš„å¼•ç”¨ä¾ç„¶å­˜åœ¨ï¼Œå¦‚æœå±€éƒ¨å†…éƒ¨ç±»è¦è°ƒç”¨å±€éƒ¨å˜é‡æ—¶ï¼Œå°±ä¼šå‡ºé”™ã€‚<br>åŠ äº†finalï¼Œå¯ä»¥ç¡®ä¿å±€éƒ¨å†…éƒ¨ç±»ä½¿ç”¨çš„å˜é‡ä¸å¤–å±‚çš„å±€éƒ¨å˜é‡åŒºåˆ†å¼€ï¼Œè§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚</p>\n<h3 id=\"é‡å†™ä¸é‡è½½\"><a href=\"#é‡å†™ä¸é‡è½½\" class=\"headerlink\" title=\"é‡å†™ä¸é‡è½½\"></a>é‡å†™ä¸é‡è½½</h3><h4 id=\"æ„é€ å™¨ï¼ˆconstructorï¼‰æ˜¯å¦å¯è¢«é‡å†™ï¼ˆoverrideï¼‰\"><a href=\"#æ„é€ å™¨ï¼ˆconstructorï¼‰æ˜¯å¦å¯è¢«é‡å†™ï¼ˆoverrideï¼‰\" class=\"headerlink\" title=\"æ„é€ å™¨ï¼ˆconstructorï¼‰æ˜¯å¦å¯è¢«é‡å†™ï¼ˆoverrideï¼‰\"></a>æ„é€ å™¨ï¼ˆconstructorï¼‰æ˜¯å¦å¯è¢«é‡å†™ï¼ˆoverrideï¼‰</h4><p>æ„é€ å™¨ä¸èƒ½è¢«ç»§æ‰¿ï¼Œå› æ­¤ä¸èƒ½è¢«é‡å†™ï¼Œä½†å¯ä»¥è¢«é‡è½½ã€‚</p>\n<h4 id=\"é‡è½½ï¼ˆOverloadï¼‰å’Œé‡å†™ï¼ˆOverrideï¼‰çš„åŒºåˆ«ã€‚é‡è½½çš„æ–¹æ³•èƒ½å¦æ ¹æ®è¿”å›ç±»å‹è¿›è¡ŒåŒºåˆ†ï¼Ÿ\"><a href=\"#é‡è½½ï¼ˆOverloadï¼‰å’Œé‡å†™ï¼ˆOverrideï¼‰çš„åŒºåˆ«ã€‚é‡è½½çš„æ–¹æ³•èƒ½å¦æ ¹æ®è¿”å›ç±»å‹è¿›è¡ŒåŒºåˆ†ï¼Ÿ\" class=\"headerlink\" title=\"é‡è½½ï¼ˆOverloadï¼‰å’Œé‡å†™ï¼ˆOverrideï¼‰çš„åŒºåˆ«ã€‚é‡è½½çš„æ–¹æ³•èƒ½å¦æ ¹æ®è¿”å›ç±»å‹è¿›è¡ŒåŒºåˆ†ï¼Ÿ\"></a>é‡è½½ï¼ˆOverloadï¼‰å’Œé‡å†™ï¼ˆOverrideï¼‰çš„åŒºåˆ«ã€‚é‡è½½çš„æ–¹æ³•èƒ½å¦æ ¹æ®è¿”å›ç±»å‹è¿›è¡ŒåŒºåˆ†ï¼Ÿ</h4><p>æ–¹æ³•çš„é‡è½½å’Œé‡å†™éƒ½æ˜¯å®ç°å¤šæ€çš„æ–¹å¼ï¼ŒåŒºåˆ«åœ¨äºé‡è½½å®ç°çš„æ˜¯<strong>ç¼–è¯‘æ—¶çš„å¤šæ€æ€§</strong>ï¼Œè€Œé‡å†™å®ç°çš„æ˜¯<strong>è¿è¡Œæ—¶çš„å¤šæ€æ€§</strong>ã€‚</p>\n<p>é‡è½½ï¼šå‘ç”Ÿåœ¨<strong>åŒä¸€ä¸ªç±»</strong>ä¸­ï¼Œ<strong>æ–¹æ³•åç›¸åŒ å‚æ•°åˆ—è¡¨ä¸åŒ</strong>ï¼ˆå‚æ•°ç±»å‹ä¸åŒã€ä¸ªæ•°ä¸åŒã€é¡ºåºä¸åŒï¼‰ï¼Œä¸æ–¹æ³•è¿”å›å€¼å’Œè®¿é—®ä¿®é¥°ç¬¦æ— å…³</p>\n<p>é‡å†™ï¼šå‘ç”Ÿåœ¨<strong>çˆ¶å­ç±»</strong>ä¸­ï¼Œæ–¹æ³•åã€å‚æ•°åˆ—è¡¨å¿…é¡»ç›¸åŒï¼Œè¿”å›å€¼ç±»å‹å°äºç­‰äºçˆ¶ç±»ï¼ŒæŠ›å‡ºçš„å¼‚å¸¸å°äºç­‰äºçˆ¶ç±»ï¼Œ<strong>è®¿é—®ä¿®é¥°ç¬¦å¤§äºç­‰äºçˆ¶ç±»</strong>ï¼ˆé‡Œæ°ä»£æ¢åŸåˆ™ï¼‰</p>\n<h3 id=\"å¯¹è±¡ç›¸ç­‰åˆ¤æ–­\"><a href=\"#å¯¹è±¡ç›¸ç­‰åˆ¤æ–­\" class=\"headerlink\" title=\"å¯¹è±¡ç›¸ç­‰åˆ¤æ–­\"></a>å¯¹è±¡ç›¸ç­‰åˆ¤æ–­</h3><h4 id=\"x3D-x3D-å’Œ-equals-çš„åŒºåˆ«æ˜¯ä»€ä¹ˆ\"><a href=\"#x3D-x3D-å’Œ-equals-çš„åŒºåˆ«æ˜¯ä»€ä¹ˆ\" class=\"headerlink\" title=\"&#x3D;&#x3D; å’Œ equals çš„åŒºåˆ«æ˜¯ä»€ä¹ˆ\"></a>&#x3D;&#x3D; å’Œ equals çš„åŒºåˆ«æ˜¯ä»€ä¹ˆ</h4><p><strong>&#x3D;&#x3D;</strong> : å®ƒçš„ä½œç”¨æ˜¯åˆ¤æ–­ä¸¤ä¸ªå¯¹è±¡çš„åœ°å€æ˜¯ä¸æ˜¯ç›¸ç­‰ã€‚å³ï¼Œåˆ¤æ–­ä¸¤ä¸ªå¯¹è±¡æ˜¯ä¸æ˜¯åŒä¸€ä¸ªå¯¹è±¡ã€‚<br>(åŸºæœ¬æ•°æ®ç±»å‹ &#x3D;&#x3D; æ¯”è¾ƒçš„æ˜¯å€¼ï¼Œå¼•ç”¨æ•°æ®ç±»å‹ &#x3D;&#x3D; æ¯”è¾ƒçš„æ˜¯å†…å­˜åœ°å€)</p>\n<p><strong>equals()</strong> : å®ƒçš„ä½œç”¨ä¹Ÿæ˜¯åˆ¤æ–­ä¸¤ä¸ªå¯¹è±¡æ˜¯å¦ç›¸ç­‰ã€‚ä½†å®ƒä¸€èˆ¬æœ‰ä¸¤ç§ä½¿ç”¨æƒ…å†µï¼š</p>\n<p>æƒ…å†µ1ï¼šç±»æ²¡æœ‰é‡å†™ equals() æ–¹æ³•ã€‚åˆ™é€šè¿‡ equals() æ¯”è¾ƒè¯¥ç±»çš„ä¸¤ä¸ªå¯¹è±¡æ—¶ï¼Œç­‰ä»·äºé€šè¿‡â€œ&#x3D;&#x3D;â€æ¯”è¾ƒè¿™ä¸¤ä¸ªå¯¹è±¡ã€‚</p>\n<p>æƒ…å†µ2ï¼šç±»é‡å†™äº† equals() æ–¹æ³•ã€‚ä¸€èˆ¬ï¼Œæˆ‘ä»¬éƒ½é‡å†™ equals() æ–¹æ³•æ¥ä¸¤ä¸ªå¯¹è±¡çš„å†…å®¹ç›¸ç­‰ï¼›è‹¥å®ƒä»¬çš„å†…å®¹ç›¸ç­‰ï¼Œåˆ™è¿”å› true (å³ï¼Œè®¤ä¸ºè¿™ä¸¤ä¸ªå¯¹è±¡ç›¸ç­‰)ã€‚</p>\n<h4 id=\"hashCode-ä¸-equals\"><a href=\"#hashCode-ä¸-equals\" class=\"headerlink\" title=\"hashCode ä¸ equals\"></a>hashCode ä¸ equals</h4><p><strong>hashCode()ä»‹ç»</strong></p>\n<p>hashCode() çš„ä½œç”¨æ˜¯è·å–å“ˆå¸Œç ï¼ˆæœ¬åœ°æ–¹æ³•ï¼‰ï¼Œä¹Ÿç§°ä¸ºæ•£åˆ—ç ï¼›å®ƒå®é™…ä¸Šæ˜¯è¿”å›ä¸€ä¸ªintæ•´æ•°ã€‚hashCode() å®šä¹‰åœ¨JDKçš„Objectç±»ä¸­ï¼Œè¿™å°±æ„å‘³ç€Javaä¸­çš„ä»»ä½•ç±»éƒ½æœ‰hashCode()æ–¹æ³•ã€‚</p>\n<p><strong>ä¸ºä»€ä¹ˆè¦æœ‰ hashCode</strong></p>\n<p><strong>æˆ‘ä»¬ä»¥â€œhashSet å¦‚ä½•æ£€æŸ¥é‡å¤â€ä¸ºä¾‹å­æ¥è¯´æ˜ä¸ºä»€ä¹ˆè¦æœ‰ hashCode</strong>ï¼š</p>\n<p>å½“ä½ æŠŠå¯¹è±¡åŠ å…¥ hashSet æ—¶ï¼ŒhashSet ä¼šå…ˆè®¡ç®—å¯¹è±¡çš„ hashcode å€¼æ¥åˆ¤æ–­å¯¹è±¡åŠ å…¥çš„ä½ç½®ï¼Œå¦‚æœæ²¡æœ‰ç›¸ç¬¦çš„hashcodeï¼ŒhashSet ä¼šå‡è®¾å¯¹è±¡æ²¡æœ‰é‡å¤å‡ºç°ã€‚ä½†æ˜¯å¦‚æœå‘ç°æœ‰ç›¸åŒ hashcode å€¼çš„å¯¹è±¡ï¼Œè¿™æ—¶ä¼šè°ƒç”¨ equals()æ–¹æ³•æ¥æ£€æŸ¥ hashcode ç›¸ç­‰çš„å¯¹è±¡æ˜¯å¦çœŸçš„ç›¸åŒã€‚å¦‚æœä¸¤è€…ç›¸åŒï¼Œè¡¨æ˜å·²ç»æœ‰äº†ç›¸åŒçš„å¯¹è±¡äº†ï¼ŒhashSet å°±ä¸ä¼šè®©å…¶åŠ å…¥æ“ä½œæˆåŠŸã€‚å¦‚æœä¸åŒçš„è¯ï¼Œå°±ä¼šé‡æ–°æ•£åˆ—åˆ°å…¶ä»–ä½ç½®ã€‚</p>\n<p><strong>hashCode()ä¸equals()çš„ç›¸å…³è§„å®š</strong></p>\n<ul>\n<li>å¦‚æœä¸¤ä¸ªå¯¹è±¡çš„hashCodeå€¼ç›¸ç­‰ï¼Œé‚£è¿™ä¸¤ä¸ªå¯¹è±¡ä¸ä¸€å®šç›¸ç­‰ï¼ˆå“ˆå¸Œç¢°æ’ï¼‰ã€‚</li>\n<li>å¦‚æœä¸¤ä¸ªå¯¹è±¡çš„hashCodeå€¼ç›¸ç­‰å¹¶ä¸”equals()æ–¹æ³•ä¹Ÿè¿”å› trueï¼Œæˆ‘ä»¬æ‰è®¤ä¸ºè¿™ä¸¤ä¸ªå¯¹è±¡ç›¸ç­‰ã€‚</li>\n<li>å¦‚æœä¸¤ä¸ªå¯¹è±¡çš„hashCodeå€¼ä¸ç›¸ç­‰ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç›´æ¥è®¤ä¸ºè¿™ä¸¤ä¸ªå¯¹è±¡ä¸ç›¸ç­‰ã€‚</li>\n</ul>\n<h4 id=\"åªé‡å†™-hashCode-å¯ä»¥å—ï¼Ÿ\"><a href=\"#åªé‡å†™-hashCode-å¯ä»¥å—ï¼Ÿ\" class=\"headerlink\" title=\"åªé‡å†™ hashCode å¯ä»¥å—ï¼Ÿ\"></a>åªé‡å†™ hashCode å¯ä»¥å—ï¼Ÿ</h4><p>å¦‚æœåªé‡å†™ hashCodeï¼Œä¸é‡å†™ equalsï¼Œé‚£ä¹ˆå¦‚æœä¸¤ä¸ªå¯¹è±¡åˆ¤æ–­ hashCode ç›¸åŒäº†ï¼Œä»¥ä¸ºè¿™ä¿©å¯¹è±¡ç›¸åŒï¼Œé‚£ä¹ˆåªä¼šæ’å…¥ä¸€æ¬¡åˆ° set é‡Œé¢ï¼Œè€Œå®é™…ä¸Šè¿™ä¸¤ä¸ªä¸ä¸€æ ·ä¸€ä¸ªæ˜¯ A ä¸€ä¸ªæ˜¯ Bï¼Œéƒ½éœ€è¦æ’å…¥ã€‚</p>\n<blockquote>\n<p>ä¸¤ä¸ªå¯¹è±¡çš„ hashCode ç›¸åŒï¼Œä½†æ˜¯å†…å®¹å¯èƒ½ä¸åŒï¼Œåœ¨ set ä¸­æ˜æ˜åº”è¯¥æ˜¯ä¸¤ä¸ªä¸åŒçš„å¯¹è±¡ï¼Œè¿™æ—¶å€™åªé€šè¿‡ hashCode åˆ¤æ–­ä»–ä¿©ç›¸åŒä¼šå¯¼è‡´åªæ’å…¥ä¸€ä¸ªå…ƒç´ ã€‚</p>\n</blockquote>\n<h4 id=\"åªé‡å†™-equalså¯ä»¥å—ï¼Ÿ\"><a href=\"#åªé‡å†™-equalså¯ä»¥å—ï¼Ÿ\" class=\"headerlink\" title=\"åªé‡å†™ equalså¯ä»¥å—ï¼Ÿ\"></a>åªé‡å†™ equalså¯ä»¥å—ï¼Ÿ</h4><p>å¦‚æœåœ¨é‡å†™ equals æ—¶ï¼Œä¸é‡å†™ hashCodeï¼Œå°±ä¼šå¼•èµ·æ¯”å¦‚è¯´å°†ä¸¤ä¸ªç›¸ç­‰çš„è‡ªå®šä¹‰å¯¹è±¡å­˜å‚¨åœ¨ Set é›†åˆæ—¶ï¼Œä¼šå°†è¿™ä¸¤ä¸ªå¯¹è±¡éƒ½è¿›è¡Œæ’å…¥ã€‚ï¼ˆæ— æ³•å»é‡ï¼‰</p>\n<blockquote>\n<p>å¦‚æœå®šä¹‰ä¸€ä¸ªseté‡Œé¢å­˜æ”¾Personå¯¹è±¡ï¼ŒPersonåªé‡å†™äº†equalsæ–¹æ³•å³å¯ä»¥åˆ¤æ–­å¯¹è±¡å†…å®¹æ˜¯å¦ç›¸åŒã€‚</p>\n<p>å¦‚æœåªé‡å†™äº† equals æ–¹æ³•ï¼Œé‚£ä¹ˆé»˜è®¤æƒ…å†µä¸‹ï¼ŒSet è¿›è¡Œå»é‡æ“ä½œæ—¶ï¼Œä¼šå…ˆåˆ¤æ–­ä¸¤ä¸ªå¯¹è±¡çš„ hashCode æ˜¯å¦ç›¸åŒï¼Œæ­¤æ—¶å› ä¸ºæ²¡æœ‰é‡å†™ hashCode æ–¹æ³•ï¼Œæ‰€ä»¥ä¼šç›´æ¥æ‰§è¡Œ Object ä¸­çš„ hashCode æ–¹æ³•ï¼Œè€Œ Object ä¸­çš„ hashCode æ–¹æ³•å¯¹æ¯”çš„æ˜¯ä¸¤ä¸ªä¸åŒå¼•ç”¨åœ°å€çš„å¯¹è±¡ï¼Œæ‰€ä»¥ç»“æœæ˜¯ falseï¼Œé‚£ä¹ˆ equals æ–¹æ³•å°±ä¸ç”¨æ‰§è¡Œäº†ï¼Œç›´æ¥è¿”å›çš„ç»“æœå°±æ˜¯ falseï¼šä¸¤ä¸ªå¯¹è±¡ä¸æ˜¯ç›¸ç­‰çš„ï¼Œäºæ˜¯å°±åœ¨ Set é›†åˆä¸­æ’å…¥äº†ä¸¤ä¸ªç›¸åŒçš„å¯¹è±¡ã€‚</p>\n<p>ä½†æ˜¯ï¼Œå¦‚æœåœ¨é‡å†™ equals æ–¹æ³•æ—¶ï¼Œä¹Ÿé‡å†™äº† hashCode æ–¹æ³•ï¼Œé‚£ä¹ˆåœ¨æ‰§è¡Œåˆ¤æ–­æ—¶ä¼šå»æ‰§è¡Œé‡å†™çš„ hashCode æ–¹æ³•ï¼Œæ­¤æ—¶å¯¹æ¯”çš„æ˜¯ä¸¤ä¸ªå¯¹è±¡çš„æ‰€æœ‰å±æ€§çš„ hashCode æ˜¯å¦ç›¸åŒï¼Œäºæ˜¯è°ƒç”¨ hashCode è¿”å›çš„ç»“æœå°±æ˜¯ trueï¼Œå†å»è°ƒç”¨ equals æ–¹æ³•ï¼Œå‘ç°ä¸¤ä¸ªå¯¹è±¡ç¡®å®æ˜¯ç›¸ç­‰çš„ï¼Œäºæ˜¯å°±è¿”å› true äº†ï¼Œå› æ­¤ Set é›†åˆå°±ä¸ä¼šå­˜å‚¨ä¸¤ä¸ªä¸€æ¨¡ä¸€æ ·çš„æ•°æ®äº†ï¼Œäºæ˜¯æ•´ä¸ªç¨‹åºçš„æ‰§è¡Œå°±æ­£å¸¸äº†ã€‚</p>\n</blockquote>\n<h3 id=\"å€¼ä¼ é€’\"><a href=\"#å€¼ä¼ é€’\" class=\"headerlink\" title=\"å€¼ä¼ é€’\"></a>å€¼ä¼ é€’</h3><h4 id=\"ä¸ºä»€ä¹ˆ-Java-ä¸­åªæœ‰å€¼ä¼ é€’\"><a href=\"#ä¸ºä»€ä¹ˆ-Java-ä¸­åªæœ‰å€¼ä¼ é€’\" class=\"headerlink\" title=\"ä¸ºä»€ä¹ˆ Java ä¸­åªæœ‰å€¼ä¼ é€’\"></a>ä¸ºä»€ä¹ˆ Java ä¸­åªæœ‰å€¼ä¼ é€’</h4><p>Javaé‡‡ç”¨æŒ‰å€¼è°ƒç”¨ï¼Œæ–¹æ³•å¾—åˆ°çš„æ˜¯æ‰€æœ‰å‚æ•°å€¼çš„ä¸€ä¸ªæ‹·è´ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ–¹æ³•ä¸èƒ½ä¿®æ”¹ä¼ é€’ç»™å®ƒçš„ä»»ä½•å‚æ•°å˜é‡çš„å†…å®¹ã€‚</p>\n<p>example 1</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> &#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> <span class=\"variable\">num1</span> <span class=\"operator\">=</span> <span class=\"number\">10</span>;</span><br><span class=\"line\">    <span class=\"type\">int</span> <span class=\"variable\">num2</span> <span class=\"operator\">=</span> <span class=\"number\">20</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    swap(num1, num2);</span><br><span class=\"line\"></span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;num1 = &quot;</span> + num1);</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;num2 = &quot;</span> + num2);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">swap</span><span class=\"params\">(<span class=\"type\">int</span> a, <span class=\"type\">int</span> b)</span> &#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> <span class=\"variable\">temp</span> <span class=\"operator\">=</span> a;</span><br><span class=\"line\">    a = b;</span><br><span class=\"line\">    b = temp;</span><br><span class=\"line\"></span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;a = &quot;</span> + a);</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;b = &quot;</span> + b);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><strong>ç»“æœ</strong>ï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">a = <span class=\"number\">20</span></span><br><span class=\"line\">b = <span class=\"number\">10</span></span><br><span class=\"line\">num1 = <span class=\"number\">10</span></span><br><span class=\"line\">num2 = <span class=\"number\">20</span></span><br></pre></td></tr></table></figure>\n\n<p><strong>è§£æ</strong>ï¼š</p>\n<p><img src=\"https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/TyporaNotesaHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy8xNDAyMzk3Mi00ZWQyZjQ0NTlmN2MyYzkwLmpwZw.png\" alt=\"swap(int a, int b)\"></p>\n<p>åœ¨swapæ–¹æ³•ä¸­ï¼Œaã€bçš„å€¼è¿›è¡Œäº¤æ¢ï¼Œå¹¶ä¸ä¼šå½±å“åˆ° num1ã€num2ã€‚å› ä¸ºaã€bä¸­çš„å€¼ï¼Œåªæ˜¯ä» num1ã€num2 çš„å¤åˆ¶è¿‡æ¥çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œaã€bç›¸å½“äºnum1ã€num2 çš„å‰¯æœ¬ï¼Œå‰¯æœ¬çš„å†…å®¹æ— è®ºæ€ä¹ˆä¿®æ”¹ï¼Œéƒ½ä¸ä¼šå½±å“åˆ°åŸä»¶æœ¬èº«ã€‚</p>\n<p><strong>é€šè¿‡ä¸Šé¢ä¾‹å­ï¼Œæˆ‘ä»¬å·²ç»çŸ¥é“äº†ä¸€ä¸ªæ–¹æ³•ä¸èƒ½ä¿®æ”¹ä¸€ä¸ªåŸºæœ¬æ•°æ®ç±»å‹çš„å‚æ•°ï¼Œè€Œå¯¹è±¡å¼•ç”¨ä½œä¸ºå‚æ•°å°±ä¸ä¸€æ ·ï¼Œè¯·çœ‹ example2.</strong></p>\n<p>example 2</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> &#123;</span><br><span class=\"line\">    <span class=\"type\">int</span>[] arr = &#123; <span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>, <span class=\"number\">5</span> &#125;;</span><br><span class=\"line\">    System.out.println(arr[<span class=\"number\">0</span>]);</span><br><span class=\"line\">    change(arr);</span><br><span class=\"line\">    System.out.println(arr[<span class=\"number\">0</span>]);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">change</span><span class=\"params\">(<span class=\"type\">int</span>[] array)</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// å°†æ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ å˜ä¸º0</span></span><br><span class=\"line\">    array[<span class=\"number\">0</span>] = <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><strong>ç»“æœ</strong>ï¼š</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1</span><br><span class=\"line\">0</span><br></pre></td></tr></table></figure>\n\n<p><strong>è§£æ</strong>ï¼š</p>\n<p><img src=\"https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/TyporaNotesaHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy8xNDAyMzk3Mi1kYWI5Mzg5ZWRmMjIxNmIzLmpwZw.png\" alt=\"change(int[] array)\"></p>\n<p>array è¢«åˆå§‹åŒ– arr çš„æ‹·è´ä¹Ÿå°±æ˜¯ä¸€ä¸ªå¯¹è±¡çš„å¼•ç”¨ï¼Œä¹Ÿå°±æ˜¯è¯´ array å’Œ arr æŒ‡å‘çš„æ—¶åŒä¸€ä¸ªæ•°ç»„å¯¹è±¡ã€‚ å› æ­¤ï¼Œå¤–éƒ¨å¯¹å¼•ç”¨å¯¹è±¡çš„æ”¹å˜ä¼šåæ˜ åˆ°æ‰€å¯¹åº”çš„å¯¹è±¡ä¸Šã€‚</p>\n<p><strong>é€šè¿‡ example2 æˆ‘ä»¬å·²ç»çœ‹åˆ°ï¼Œå®ç°ä¸€ä¸ªæ”¹å˜å¯¹è±¡å‚æ•°çŠ¶æ€çš„æ–¹æ³•å¹¶ä¸æ˜¯ä¸€ä»¶éš¾äº‹ã€‚ç†ç”±å¾ˆç®€å•ï¼Œæ–¹æ³•å¾—åˆ°çš„æ˜¯å¯¹è±¡å¼•ç”¨çš„æ‹·è´ï¼Œå¯¹è±¡å¼•ç”¨åŠå…¶ä»–çš„æ‹·è´åŒæ—¶å¼•ç”¨åŒä¸€ä¸ªå¯¹è±¡ã€‚</strong></p>\n<p>example 3</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">Test</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> &#123;</span><br><span class=\"line\">        <span class=\"type\">Student</span> <span class=\"variable\">s1</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Student</span>(<span class=\"string\">&quot;å°å¼ &quot;</span>);</span><br><span class=\"line\">        <span class=\"type\">Student</span> <span class=\"variable\">s2</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Student</span>(<span class=\"string\">&quot;å°æ&quot;</span>);</span><br><span class=\"line\">        Test.swap(s1, s2);</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;s1:&quot;</span> + s1.getName());</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;s2:&quot;</span> + s2.getName());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">swap</span><span class=\"params\">(Student x, Student y)</span> &#123;</span><br><span class=\"line\">        <span class=\"type\">Student</span> <span class=\"variable\">temp</span> <span class=\"operator\">=</span> x;</span><br><span class=\"line\">        x = y;</span><br><span class=\"line\">        y = temp;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;x:&quot;</span> + x.getName());</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;y:&quot;</span> + y.getName());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><strong>ç»“æœ</strong>ï¼š</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">x:å°æ</span><br><span class=\"line\">y:å°å¼ </span><br><span class=\"line\">s1:å°å¼ </span><br><span class=\"line\">s2:å°æ</span><br></pre></td></tr></table></figure>\n\n<p><strong>è§£æ</strong>ï¼š</p>\n<p>äº¤æ¢ä¹‹å‰ï¼š</p>\n<p><img src=\"https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/TyporaNotesaHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy8xNDAyMzk3Mi03MmIwYzFmYjlmM2IwNzc2LmpwZw.png\" alt=\"before swap(Student x, Student y)\"></p>\n<p>äº¤æ¢ä¹‹åï¼š</p>\n<p><img src=\"https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/TyporaNotesaHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy8xNDAyMzk3Mi0zYWUzNzY4NGNiMzg2Njc4LmpwZw.png\" alt=\"after swap(Student x, Student y)\"></p>\n<p>é€šè¿‡ä¸Šé¢ä¸¤å¼ å›¾å¯ä»¥å¾ˆæ¸…æ™°çš„çœ‹å‡ºï¼š <strong>æ–¹æ³•å¹¶æ²¡æœ‰æ”¹å˜å­˜å‚¨åœ¨å˜é‡ s1 å’Œ s2 ä¸­çš„å¯¹è±¡å¼•ç”¨ã€‚swapæ–¹æ³•çš„å‚æ•°xå’Œyè¢«åˆå§‹åŒ–ä¸ºä¸¤ä¸ªå¯¹è±¡å¼•ç”¨çš„æ‹·è´ï¼Œè¿™ä¸ªæ–¹æ³•äº¤æ¢çš„æ˜¯è¿™ä¸¤ä¸ªæ‹·è´</strong></p>\n<h4 id=\"å€¼ä¼ é€’å’Œå¼•ç”¨ä¼ é€’æœ‰ä»€ä¹ˆåŒºåˆ«\"><a href=\"#å€¼ä¼ é€’å’Œå¼•ç”¨ä¼ é€’æœ‰ä»€ä¹ˆåŒºåˆ«\" class=\"headerlink\" title=\"å€¼ä¼ é€’å’Œå¼•ç”¨ä¼ é€’æœ‰ä»€ä¹ˆåŒºåˆ«\"></a>å€¼ä¼ é€’å’Œå¼•ç”¨ä¼ é€’æœ‰ä»€ä¹ˆåŒºåˆ«</h4><p>å€¼ä¼ é€’ï¼šæŒ‡çš„æ˜¯åœ¨æ–¹æ³•è°ƒç”¨æ—¶ï¼Œä¼ é€’çš„å‚æ•°æ˜¯æŒ‰å€¼çš„æ‹·è´ä¼ é€’ï¼Œä¼ é€’çš„æ˜¯å€¼çš„æ‹·è´ï¼Œä¹Ÿå°±æ˜¯è¯´ä¼ é€’åå°±äº’ä¸ç›¸å…³äº†ã€‚</p>\n<p>å¼•ç”¨ä¼ é€’ï¼šæŒ‡çš„æ˜¯åœ¨æ–¹æ³•è°ƒç”¨æ—¶ï¼Œä¼ é€’çš„å‚æ•°æ˜¯æŒ‰å¼•ç”¨è¿›è¡Œä¼ é€’ï¼Œå…¶å®ä¼ é€’çš„å¼•ç”¨çš„åœ°å€ï¼Œä¹Ÿå°±æ˜¯å˜é‡æ‰€å¯¹åº”çš„å†…å­˜ç©ºé—´çš„åœ°å€ã€‚ä¼ é€’çš„æ˜¯å€¼çš„å¼•ç”¨ï¼Œä¹Ÿå°±æ˜¯è¯´ä¼ é€’å‰å’Œä¼ é€’åéƒ½æŒ‡å‘åŒä¸€ä¸ªå¼•ç”¨ï¼ˆä¹Ÿå°±æ˜¯åŒä¸€ä¸ªå†…å­˜ç©ºé—´ï¼‰ã€‚</p>\n<h2 id=\"IOæµ\"><a href=\"#IOæµ\" class=\"headerlink\" title=\"IOæµ\"></a>IOæµ</h2><blockquote>\n<p>å‚è€ƒï¼š<a href=\"https://blog.csdn.net/weixin_44579258/article/details/90758359\">https://blog.csdn.net/weixin_44579258/article/details/90758359</a></p>\n</blockquote>\n<p>é˜»å¡å’Œéé˜»å¡æ˜¯æŒ‡è¿›ç¨‹è®¿é—®çš„æ•°æ®å¦‚æœå°šæœªå‡†å¤‡å°±ç»ªï¼Œè¿›ç¨‹æ˜¯å¦éœ€è¦ç­‰å¾…<br>åŒæ­¥å’Œå¼‚æ­¥æ˜¯æŒ‡è®¿é—®æ•°æ®çš„æœºåˆ¶ï¼ŒåŒæ­¥ä¸€èˆ¬ä¸»åŠ¨è¯·æ±‚ç­‰å¾…IOæ“ä½œå®Œæ¯•çš„æ–¹å¼ã€‚å½“æ•°æ®å°±ç»ªåï¼Œå†è¯»å†™çš„æ—¶å€™å¿…é¡»é˜»å¡ï¼Œå¼‚æ­¥åˆ™ä¸»åŠ¨è¯·æ±‚æ•°æ®åä¾¿å¯ä»¥ç»§ç»­å¤„ç†å…¶ä»–ä»»åŠ¡ï¼Œéšåç­‰å¾…IOå®Œæ¯•é€šçŸ¥ï¼Œè¿™å¯ä»¥ä½¿è¿›ç¨‹åœ¨æ•°æ®è¯»å†™æ—¶ä¹Ÿä¸é˜»å¡</p>\n<p>å‡†å¤‡æ•°æ®ï¼šç½‘å¡ â†’ å†…æ ¸<br>æ•°æ®å°±ç»ªï¼šæ•°æ®æ‹·è´åˆ°äº†å†…æ ¸<br>æ‹·è´æ•°æ®ï¼šå°†å†…æ ¸æ•°æ®æ‹·è´åˆ°ç”¨æˆ·ç©ºé—´</p>\n<h3 id=\"Blocking-I-x2F-O\"><a href=\"#Blocking-I-x2F-O\" class=\"headerlink\" title=\"Blocking I&#x2F;O\"></a>Blocking I&#x2F;O</h3><p><strong>BIO å±äºåŒæ­¥é˜»å¡ IO æ¨¡å‹</strong> ã€‚</p>\n<p>åŒæ­¥é˜»å¡ IO æ¨¡å‹ä¸­ï¼Œåº”ç”¨ç¨‹åº<strong>å‘èµ· read è°ƒç”¨</strong>åï¼Œä¼šä¸€ç›´é˜»å¡ï¼Œç›´åˆ°å†…æ ¸å‡†å¤‡æ•°æ®ã€æ•°æ®å°±ç»ªï¼Œæ•°æ®ä»å†…æ ¸æ‹·è´åˆ°ç”¨æˆ·ç©ºé—´ã€‚</p>\n<p><img src=\"https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/TyporaNotes20190603201109632.png\" alt=\"BIO\"></p>\n<h3 id=\"NIO-Non-blocking-I-x2F-O\"><a href=\"#NIO-Non-blocking-I-x2F-O\" class=\"headerlink\" title=\"NIO (Non-blocking I&#x2F;O)\"></a>NIO (Non-blocking I&#x2F;O)</h3><p>åŒæ­¥éé˜»å¡ IO æ¨¡å‹ä¸­ï¼Œç”¨æˆ·è¿›ç¨‹ä¼š<strong>ä¸€ç›´å‘èµ· read è°ƒç”¨</strong>ï¼ˆå¦‚æœå†…æ ¸è¿”å›erroråˆ™è¯´æ˜æ•°æ®æœªå‡†å¤‡å°±ç»ªï¼‰ï¼Œç›´åˆ°æ•°æ®å‡†å¤‡å°±ç»ªï¼Œç”¨æˆ·å‘èµ· read è°ƒç”¨æ—¶ï¼Œæ•°æ®ä»å†…æ ¸ç©ºé—´æ‹·è´åˆ°ç”¨æˆ·ç©ºé—´ï¼ˆç”¨æˆ·è¿›ç¨‹æ˜¯é˜»å¡çš„ï¼‰ã€‚</p>\n<blockquote>\n<p>ç›¸æ¯”äºåŒæ­¥é˜»å¡ IO æ¨¡å‹ï¼ŒåŒæ­¥éé˜»å¡ IO æ¨¡å‹ç¡®å®æœ‰äº†å¾ˆå¤§æ”¹è¿›ã€‚é€šè¿‡è½®è¯¢æ“ä½œï¼Œé¿å…äº†ä¸€ç›´é˜»å¡ã€‚</p>\n</blockquote>\n<p><img src=\"https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/TyporaNotes20190603201218527.png\" alt=\"NIO\"></p>\n<h3 id=\"IOå¤šè·¯å¤ç”¨ï¼ˆNIOï¼‰\"><a href=\"#IOå¤šè·¯å¤ç”¨ï¼ˆNIOï¼‰\" class=\"headerlink\" title=\"IOå¤šè·¯å¤ç”¨ï¼ˆNIOï¼‰\"></a>IOå¤šè·¯å¤ç”¨ï¼ˆNIOï¼‰</h3><p>select&#x2F;epollçš„å¥½å¤„å°±åœ¨äºå•ä¸ªprocesså°±å¯ä»¥åŒæ—¶å¤„ç†å¤šä¸ªç½‘ç»œè¿æ¥çš„IOã€‚</p>\n<p><img src=\"https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/TyporaNotes2019060320125821.png\" alt=\"NIO\"></p>\n<p>IOå¤ç”¨å’ŒåŒæ­¥é˜»å¡æœ¬è´¨ä¸€æ ·ï¼Œåœ¨NIOä¸­ï¼Œæ¯æ¬¡ç”¨æˆ·è¿›ç¨‹è¿›è¡Œreadè½®è¯¢æ•°æ®æ˜¯å¦å‡†å¤‡å°±ç»ªï¼Œè€Œåœ¨IOå¤šè·¯å¤ç”¨ä¸­ï¼Œåˆ©ç”¨äº†æ–°çš„selectç³»ç»Ÿè°ƒç”¨ï¼Œç”±å†…æ ¸æ¥è´Ÿè´£æœ¬æ¥æ˜¯è¯·æ±‚è¿›ç¨‹è¯¥åšçš„è½®è¯¢æ“ä½œã€‚</p>\n<p>å½“ç”¨æˆ·çº¿ç¨‹è°ƒç”¨selectï¼Œé‚£ä¹ˆæ•´ä¸ªè¿›ç¨‹ä¼šè¢«é˜»å¡ï¼Œè€ŒåŒæ—¶ï¼Œkernelå†…æ ¸ä¼šâ€œç›‘è§†â€æ‰€æœ‰selectè´Ÿè´£çš„socketï¼Œå½“ä»»ä½•ä¸€ä¸ªsocketä¸­çš„æ•°æ®å‡†å¤‡å¥½äº†ï¼Œselectå°±ä¼šè¿”å›å¯è¯»æ¡ä»¶è®©ç”¨æˆ·è¿›ç¨‹å‘èµ·readè°ƒç”¨ï¼Œç”¨æˆ·è¿›ç¨‹å‘èµ·è°ƒç”¨readæ“ä½œï¼Œå°†æ•°æ®ä»å†…æ ¸ç©ºé—´æ‹·è´åˆ°ç”¨æˆ·ç©ºé—´ã€‚</p>\n<h3 id=\"Asynchronous-I-x2F-O\"><a href=\"#Asynchronous-I-x2F-O\" class=\"headerlink\" title=\"Asynchronous I&#x2F;O\"></a>Asynchronous I&#x2F;O</h3><p>å¼‚æ­¥ IO æ˜¯åŸºäºäº‹ä»¶å’Œå›è°ƒæœºåˆ¶å®ç°çš„ï¼Œä¹Ÿå°±æ˜¯åº”ç”¨æ“ä½œä¹‹åä¼šç›´æ¥è¿”å›ï¼Œä¸ä¼šå µå¡åœ¨é‚£é‡Œï¼Œå½“åå°å¤„ç†å®Œæˆï¼Œæ“ä½œç³»ç»Ÿä¼šé€šçŸ¥ç›¸åº”çš„çº¿ç¨‹è¿›è¡Œåç»­çš„æ“ä½œã€‚</p>\n<p>ç”¨æˆ·å‘èµ·readè°ƒç”¨ï¼Œæ­¤æ—¶ç”¨æˆ·è¿›ç¨‹ä¸ä¼šé˜»å¡ã€‚å†…æ ¸å°†æ•°æ®å‡†å¤‡å°±ç»ªå¹¶å°†å…¶ä»å†…æ ¸æ‹·è´åˆ°ç”¨æˆ·ç©ºé—´åï¼Œå†…æ ¸ç»™ç”¨æˆ·è¿›ç¨‹å‘é€ä¸€ä¸ªä¿¡å·ç»™ä¹‹å‰è°ƒç”¨readçš„è¿›ç¨‹ï¼Œæ•°æ®å·²ç»æ‹·è´åˆ°ç”¨æˆ·ç©ºé—´äº†ã€‚</p>\n<p><img src=\"https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/TyporaNotes2019060320135956.png\" alt=\"AIO\"></p>\n<h2 id=\"åå°„\"><a href=\"#åå°„\" class=\"headerlink\" title=\"åå°„\"></a>åå°„</h2><h3 id=\"ä»€ä¹ˆæ˜¯åå°„æœºåˆ¶ï¼Ÿ\"><a href=\"#ä»€ä¹ˆæ˜¯åå°„æœºåˆ¶ï¼Ÿ\" class=\"headerlink\" title=\"ä»€ä¹ˆæ˜¯åå°„æœºåˆ¶ï¼Ÿ\"></a>ä»€ä¹ˆæ˜¯åå°„æœºåˆ¶ï¼Ÿ</h3><p>JAVAåå°„æœºåˆ¶æ˜¯åœ¨è¿è¡ŒçŠ¶æ€ä¸­ï¼Œå¯¹äºä»»æ„ä¸€ä¸ªç±»ï¼Œéƒ½èƒ½å¤ŸçŸ¥é“è¿™ä¸ªç±»çš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•ï¼›å¯¹äºä»»æ„ä¸€ä¸ªå¯¹è±¡ï¼Œéƒ½èƒ½å¤Ÿè°ƒç”¨å®ƒçš„ä»»æ„ä¸€ä¸ªæ–¹æ³•å’Œå±æ€§ï¼›è¿™ç§åŠ¨æ€è·å–çš„ä¿¡æ¯ä»¥åŠåŠ¨æ€è°ƒç”¨å¯¹è±¡çš„æ–¹æ³•çš„åŠŸèƒ½ç§°ä¸ºJavaè¯­è¨€çš„åå°„æœºåˆ¶ã€‚</p>\n<h3 id=\"åå°„æœºåˆ¶ä¼˜ç¼ºç‚¹\"><a href=\"#åå°„æœºåˆ¶ä¼˜ç¼ºç‚¹\" class=\"headerlink\" title=\"åå°„æœºåˆ¶ä¼˜ç¼ºç‚¹\"></a>åå°„æœºåˆ¶ä¼˜ç¼ºç‚¹</h3><ul>\n<li><strong>ä¼˜ç‚¹ï¼š</strong> è¿è¡ŒæœŸç±»å‹çš„åˆ¤æ–­ï¼ŒåŠ¨æ€åŠ è½½ç±»ï¼Œæé«˜ä»£ç çµæ´»åº¦ã€‚</li>\n<li><strong>ç¼ºç‚¹ï¼š</strong> æ€§èƒ½ç“¶é¢ˆï¼šåå°„ç›¸å½“äºä¸€ç³»åˆ—è§£é‡Šæ“ä½œï¼Œé€šçŸ¥ JVM è¦åšçš„äº‹æƒ…ï¼Œæ€§èƒ½æ¯”ç›´æ¥çš„Javaä»£ç è¦æ…¢å¾ˆå¤šã€‚</li>\n</ul>\n<h3 id=\"åå°„æœºåˆ¶çš„åº”ç”¨åœºæ™¯æœ‰å“ªäº›ï¼Ÿ\"><a href=\"#åå°„æœºåˆ¶çš„åº”ç”¨åœºæ™¯æœ‰å“ªäº›ï¼Ÿ\" class=\"headerlink\" title=\"åå°„æœºåˆ¶çš„åº”ç”¨åœºæ™¯æœ‰å“ªäº›ï¼Ÿ\"></a>åå°„æœºåˆ¶çš„åº”ç”¨åœºæ™¯æœ‰å“ªäº›ï¼Ÿ</h3><p>â‘ æˆ‘ä»¬åœ¨ä½¿ç”¨JDBCè¿æ¥æ•°æ®åº“æ—¶ä½¿ç”¨Class.forName()é€šè¿‡åå°„åŠ è½½æ•°æ®åº“çš„é©±åŠ¨ç¨‹åºï¼›</p>\n<p>â‘¡Spring é€šè¿‡ XML é…ç½®æ¨¡å¼è£…è½½ Bean çš„è¿‡ç¨‹</p>\n<ol>\n<li>åŠ è½½é…ç½®æ–‡ä»¶ï¼Œè§£ææˆ BeanDefinition æ”¾åœ¨ Map é‡Œï¼Œmapä¸­å­˜æ”¾<code>&lt;BeanNameï¼ŒClasså¯¹è±¡&gt;</code>çš„æ˜ å°„</li>\n<li>è°ƒç”¨ getBean çš„æ—¶å€™ï¼Œä» BeanDefinition æ‰€å±çš„ Map é‡Œï¼Œæ‹¿å‡º Class å¯¹è±¡ä½¿ç”¨åå°„è¿›è¡Œå®ä¾‹åŒ–ï¼ŒåŒæ—¶ï¼Œå¦‚æœæœ‰ä¾èµ–å…³ç³»ï¼Œå°†é€’å½’è°ƒç”¨ getBean æ–¹æ³• â€”â€” å®Œæˆä¾èµ–æ³¨å…¥</li>\n</ol>\n<h3 id=\"Javaè·å–åå°„çš„ä¸‰ç§æ–¹æ³•\"><a href=\"#Javaè·å–åå°„çš„ä¸‰ç§æ–¹æ³•\" class=\"headerlink\" title=\"Javaè·å–åå°„çš„ä¸‰ç§æ–¹æ³•\"></a>Javaè·å–åå°„çš„ä¸‰ç§æ–¹æ³•</h3><p>1.é€šè¿‡newå¯¹è±¡å®ç°åå°„æœºåˆ¶ 2.é€šè¿‡è·¯å¾„å®ç°åå°„æœºåˆ¶ 3.é€šè¿‡ç±»åå®ç°åå°„æœºåˆ¶</p>\n<h2 id=\"åŒ…è£…ç±»\"><a href=\"#åŒ…è£…ç±»\" class=\"headerlink\" title=\"åŒ…è£…ç±»\"></a>åŒ…è£…ç±»</h2><h4 id=\"è‡ªåŠ¨è£…ç®±ä¸æ‹†ç®±\"><a href=\"#è‡ªåŠ¨è£…ç®±ä¸æ‹†ç®±\" class=\"headerlink\" title=\"è‡ªåŠ¨è£…ç®±ä¸æ‹†ç®±\"></a>è‡ªåŠ¨è£…ç®±ä¸æ‹†ç®±</h4><p><strong>è£…ç®±</strong>ï¼šå°†åŸºæœ¬ç±»å‹ç”¨å®ƒä»¬å¯¹åº”çš„å¼•ç”¨ç±»å‹åŒ…è£…èµ·æ¥ï¼›<code>Integer a = 1;</code></p>\n<p><strong>æ‹†ç®±</strong>ï¼šå°†åŒ…è£…ç±»å‹è½¬æ¢ä¸ºåŸºæœ¬æ•°æ®ç±»å‹ï¼›<code>int b = a;</code></p>\n<h4 id=\"int-å’Œ-Integer-æœ‰ä»€ä¹ˆåŒºåˆ«\"><a href=\"#int-å’Œ-Integer-æœ‰ä»€ä¹ˆåŒºåˆ«\" class=\"headerlink\" title=\"int å’Œ Integer æœ‰ä»€ä¹ˆåŒºåˆ«\"></a>int å’Œ Integer æœ‰ä»€ä¹ˆåŒºåˆ«</h4><p>å¼•å…¥åŒ…è£…ç±»æ˜¯ä¸ºäº†èƒ½å¤Ÿå°†è¿™äº›<strong>åŸºæœ¬æ•°æ®ç±»å‹å½“æˆå¯¹è±¡æ“ä½œ</strong></p>\n<p>Java ä¸ºæ¯ä¸ªåŸå§‹ç±»å‹æä¾›äº†åŒ…è£…ç±»å‹ï¼š</p>\n<p>åŸå§‹ç±»å‹: booleanï¼Œcharï¼Œbyteï¼Œshortï¼Œintï¼Œlongï¼Œfloatï¼Œdouble</p>\n<p>åŒ…è£…ç±»å‹ï¼šBooleanï¼ŒCharacterï¼ŒByteï¼ŒShortï¼ŒIntegerï¼ŒLongï¼ŒFloatï¼ŒDouble</p>\n<h4 id=\"Integer-a-x3D-127-ä¸-Integer-b-x3D-127ç›¸ç­‰å—\"><a href=\"#Integer-a-x3D-127-ä¸-Integer-b-x3D-127ç›¸ç­‰å—\" class=\"headerlink\" title=\"Integer a &#x3D; 127 ä¸ Integer b &#x3D; 127ç›¸ç­‰å—\"></a>Integer a &#x3D; 127 ä¸ Integer b &#x3D; 127ç›¸ç­‰å—</h4><blockquote>\n<p>åŒ…è£…ç±»å’ŒåŸºæœ¬æ•°æ®ç±»å‹æ¯”è¾ƒï¼Œä¼šå°†åŒ…è£…ç±»æ‹†ç®±æˆåŸºæœ¬æ•°æ®ç±»å‹ç„¶åæ¯”è¾ƒï¼Œ</p>\n<p>åªæœ‰å½“åŒ…è£…ç±»æ˜¯è‡ªåŠ¨è£…ç®±ï¼Œå¹¶ä¸”æ•°å€¼èŒƒå›´åœ¨ [-128, 127] æ—¶ï¼Œæ‰ä¼šä½¿ç”¨ cache ä¸­çš„å¯¹è±¡ã€‚</p>\n</blockquote>\n<p>å¯¹äºå¯¹è±¡å¼•ç”¨ç±»å‹ï¼š&#x3D;&#x3D;æ¯”è¾ƒçš„æ˜¯å¯¹è±¡çš„å†…å­˜åœ°å€ã€‚<br>å¯¹äºåŸºæœ¬æ•°æ®ç±»å‹ï¼š&#x3D;&#x3D;æ¯”è¾ƒçš„æ˜¯å€¼ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> &#123;</span><br><span class=\"line\">    <span class=\"type\">Integer</span> <span class=\"variable\">a</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Integer</span>(<span class=\"number\">3</span>);</span><br><span class=\"line\">  \t<span class=\"type\">Integer</span> <span class=\"variable\">b</span> <span class=\"operator\">=</span> <span class=\"number\">3</span>;</span><br><span class=\"line\">    <span class=\"type\">int</span> <span class=\"variable\">c</span> <span class=\"operator\">=</span> <span class=\"number\">3</span>;</span><br><span class=\"line\">    <span class=\"type\">Integer</span> <span class=\"variable\">d</span> <span class=\"operator\">=</span> <span class=\"number\">3</span>;</span><br><span class=\"line\">    System.out.println(a == b); <span class=\"comment\">// falseï¼Œä¸¤ä¸ªå¯¹è±¡æ¯”è¾ƒ</span></span><br><span class=\"line\">    System.out.println(a == c); <span class=\"comment\">// trueï¼Œaè‡ªåŠ¨æ‹†ç®±</span></span><br><span class=\"line\">    System.out.println(b == c); <span class=\"comment\">// trueï¼Œbè‡ªåŠ¨æ‹†ç®±</span></span><br><span class=\"line\">    System.out.println(b == d); <span class=\"comment\">// trueï¼ŒåŒ…è£…ç±»è‡ªåŠ¨è£…ç®±ä¸”æ•°å€¼èŒƒå›´åœ¨cacheèŒƒå›´å†…</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"type\">Integer</span> <span class=\"variable\">a</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Integer</span>(<span class=\"number\">128</span>);</span><br><span class=\"line\">    <span class=\"type\">Integer</span> <span class=\"variable\">b</span> <span class=\"operator\">=</span> <span class=\"number\">128</span>;</span><br><span class=\"line\">    <span class=\"type\">int</span> <span class=\"variable\">c</span> <span class=\"operator\">=</span> <span class=\"number\">128</span>;</span><br><span class=\"line\">    <span class=\"type\">Integer</span> <span class=\"variable\">d</span> <span class=\"operator\">=</span> <span class=\"number\">128</span>;</span><br><span class=\"line\">    System.out.println(a == b); <span class=\"comment\">// falseï¼Œä¸¤ä¸ªå¯¹è±¡æ¯”è¾ƒ</span></span><br><span class=\"line\">    System.out.println(a == c); <span class=\"comment\">// trueï¼Œaè‡ªåŠ¨æ‹†ç®±</span></span><br><span class=\"line\">    System.out.println(b == c); <span class=\"comment\">// trueï¼Œbè‡ªåŠ¨æ‹†ç®±</span></span><br><span class=\"line\">    System.out.println(b == d); <span class=\"comment\">// falseï¼ŒåŒ…è£…ç±»è‡ªåŠ¨è£…ç®±ä½†æ˜¯æ•°å€¼èŒƒå›´ä¸åœ¨cacheèŒƒå›´å†…</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n","site":{"data":{}},"length":10743,"excerpt":"<blockquote>\n<p>æ•´ç†çš„JavaåŸºç¡€ç›¸å…³çŸ¥è¯†ç‚¹å’Œé¢è¯•é¢˜ï¼Œéƒ¨åˆ†å†…å®¹æ‘˜è‡ªç½‘ç»œï¼Œå¦‚æœ‰ä¾µæƒè¯·è”ç³»æˆ‘ï½","more":"</p>\n</blockquote>\n<h2 id=\"Javaæ¦‚è¿°\"><a href=\"#Javaæ¦‚è¿°\" class=\"headerlink\" title=\"Javaæ¦‚è¿°\"></a>Javaæ¦‚è¿°</h2><h3 id=\"JVMã€JREå’ŒJDKçš„å…³ç³»\"><a href=\"#JVMã€JREå’ŒJDKçš„å…³ç³»\" class=\"headerlink\" title=\"JVMã€JREå’ŒJDKçš„å…³ç³»\"></a>JVMã€JREå’ŒJDKçš„å…³ç³»</h3><p>JVMï¼šJava Virtual Machineï¼ŒJavaè™šæ‹Ÿæœºï¼ŒJavaç¨‹åºéœ€è¦è¿è¡Œåœ¨è™šæ‹Ÿæœºä¸Šï¼Œä¸åŒçš„å¹³å°æœ‰è‡ªå·±çš„è™šæ‹Ÿæœºï¼Œå› æ­¤Javaè¯­è¨€å¯ä»¥å®ç°è·¨å¹³å°ã€‚</p>\n<p>JREï¼šJava Runtime Environmentï¼ŒJavaè¿è¡Œç¯å¢ƒï¼ŒåŒ…æ‹¬Javaè™šæ‹Ÿæœºå’ŒJavaç¨‹åºæ‰€éœ€çš„æ ¸å¿ƒç±»åº“ç­‰ã€‚</p>\n<p>JDKï¼šJava Development Kitï¼ŒJavaå¼€å‘å·¥å…·åŒ…ï¼ŒåŒ…æ‹¬äº†JREå’Œå¼€å‘å·¥å…·ã€‚</p>\n<h3 id=\"ä»€ä¹ˆæ˜¯è·¨å¹³å°æ€§ï¼ŸåŸç†æ˜¯ä»€ä¹ˆ\"><a href=\"#ä»€ä¹ˆæ˜¯è·¨å¹³å°æ€§ï¼ŸåŸç†æ˜¯ä»€ä¹ˆ\" class=\"headerlink\" title=\"ä»€ä¹ˆæ˜¯è·¨å¹³å°æ€§ï¼ŸåŸç†æ˜¯ä»€ä¹ˆ\"></a>ä»€ä¹ˆæ˜¯è·¨å¹³å°æ€§ï¼ŸåŸç†æ˜¯ä»€ä¹ˆ</h3><p>æ‰€è°“è·¨å¹³å°æ€§ï¼Œæ˜¯æŒ‡Javaè¯­è¨€ç¼–å†™çš„ç¨‹åºï¼Œä¸€æ¬¡ç¼–è¯‘ï¼Œåˆ°å¤„è¿è¡Œã€‚</p>\n<p>å®ç°åŸç†ï¼šJavaç¨‹åºæ˜¯é€šè¿‡Javaè™šæ‹Ÿæœºåœ¨ç³»ç»Ÿå¹³å°ä¸Šè¿è¡Œçš„ï¼Œåªè¦è¯¥ç³»ç»Ÿå¯ä»¥å®‰è£…ç›¸åº”çš„Javaè™šæ‹Ÿæœºï¼Œè¯¥ç³»ç»Ÿå°±å¯ä»¥è¿è¡ŒJavaç¨‹åºã€‚</p>\n<h3 id=\"Javaè¯­è¨€æœ‰å“ªäº›ç‰¹ç‚¹\"><a href=\"#Javaè¯­è¨€æœ‰å“ªäº›ç‰¹ç‚¹\" class=\"headerlink\" title=\"Javaè¯­è¨€æœ‰å“ªäº›ç‰¹ç‚¹\"></a>Javaè¯­è¨€æœ‰å“ªäº›ç‰¹ç‚¹</h3><p>é¢å‘å¯¹è±¡ï¼ˆå°è£…ï¼Œç»§æ‰¿ï¼Œå¤šæ€ï¼‰</p>\n<p>å¹³å°æ— å…³æ€§ï¼ˆJavaè™šæ‹Ÿæœºå®ç°å¹³å°æ— å…³æ€§ï¼‰</p>\n<h3 id=\"ä»€ä¹ˆæ˜¯å­—èŠ‚ç ï¼Ÿé‡‡ç”¨å­—èŠ‚ç çš„æœ€å¤§å¥½å¤„æ˜¯ä»€ä¹ˆ\"><a href=\"#ä»€ä¹ˆæ˜¯å­—èŠ‚ç ï¼Ÿé‡‡ç”¨å­—èŠ‚ç çš„æœ€å¤§å¥½å¤„æ˜¯ä»€ä¹ˆ\" class=\"headerlink\" title=\"ä»€ä¹ˆæ˜¯å­—èŠ‚ç ï¼Ÿé‡‡ç”¨å­—èŠ‚ç çš„æœ€å¤§å¥½å¤„æ˜¯ä»€ä¹ˆ\"></a>ä»€ä¹ˆæ˜¯å­—èŠ‚ç ï¼Ÿé‡‡ç”¨å­—èŠ‚ç çš„æœ€å¤§å¥½å¤„æ˜¯ä»€ä¹ˆ</h3><p><strong>å­—èŠ‚ç </strong>ï¼šJavaæºä»£ç ç»è¿‡è™šæ‹Ÿæœºç¼–è¯‘å™¨ç¼–è¯‘åäº§ç”Ÿçš„æ–‡ä»¶ï¼ˆå³æ‰©å±•ä¸º.classçš„æ–‡ä»¶ï¼‰ï¼Œå®ƒä¸é¢å‘ä»»ä½•ç‰¹å®šçš„å¤„ç†å™¨ï¼Œåªé¢å‘è™šæ‹Ÿæœºã€‚ï¼ˆjavac HelloWorld.Java â†’ HelloWorld.class â†’ Java HelloWorldæ‰§è¡Œç¨‹åºï¼‰</p>\n<p><strong>ç¼–è¯‘ä¸è§£é‡Šå¹¶å­˜</strong></p>\n<p>Javaæºä»£ç (.Javaæ–‡ä»¶)â€”-&gt;ç¼–è¯‘å™¨â€”-&gt;jvmå¯æ‰§è¡Œçš„Javaå­—èŠ‚ç (.classæ–‡ä»¶)â€”-&gt;jvmâ€”-&gt;jvmä¸­è§£é‡Šå™¨â€”â€“&gt;æœºå™¨å¯æ‰§è¡Œçš„äºŒè¿›åˆ¶æœºå™¨ç â€”-&gt;ç¨‹åºè¿è¡Œ</p>\n<h3 id=\"ä»€ä¹ˆæ˜¯Javaç¨‹åºçš„ä¸»ç±»ï¼Ÿ\"><a href=\"#ä»€ä¹ˆæ˜¯Javaç¨‹åºçš„ä¸»ç±»ï¼Ÿ\" class=\"headerlink\" title=\"ä»€ä¹ˆæ˜¯Javaç¨‹åºçš„ä¸»ç±»ï¼Ÿ\"></a>ä»€ä¹ˆæ˜¯Javaç¨‹åºçš„ä¸»ç±»ï¼Ÿ</h3><p>ä¸€ä¸ªç¨‹åºä¸­å¯ä»¥æœ‰å¤šä¸ªç±»ï¼Œä½†åªèƒ½æœ‰ä¸€ä¸ªç±»æ˜¯ä¸»ç±»ã€‚åœ¨Javaåº”ç”¨ç¨‹åºä¸­ï¼Œè¿™ä¸ªä¸»ç±»æ˜¯æŒ‡åŒ…å«main()æ–¹æ³•çš„ç±»ã€‚<br>ä¸»ç±»æ˜¯Javaç¨‹åºæ‰§è¡Œçš„å…¥å£ã€‚ï¼ˆmainæ–¹æ³•é™¤äº†æ˜¯ä¸ªä¸»æ–¹æ³•ä»¥å¤–ï¼Œå’Œæ™®é€šçš„é™æ€æ–¹æ³•æ²¡æœ‰åŒºåˆ«ï¼Œéƒ½å¯ä»¥é‡è½½ã€è°ƒç”¨ã€ç»§æ‰¿ï¼‰</p>\n<h3 id=\"Javaå’ŒC-çš„åŒºåˆ«\"><a href=\"#Javaå’ŒC-çš„åŒºåˆ«\" class=\"headerlink\" title=\"Javaå’ŒC++çš„åŒºåˆ«\"></a>Javaå’ŒC++çš„åŒºåˆ«</h3><p>ç›¸åŒç‚¹ï¼šéƒ½æ˜¯<strong>é¢å‘å¯¹è±¡</strong>çš„è¯­è¨€ï¼Œéƒ½æ”¯æŒ<strong>å°è£…ã€ç»§æ‰¿å’Œå¤šæ€</strong></p>\n<p>ä¸åŒç‚¹ï¼š</p>\n<ul>\n<li><p><strong>Javaä¸æä¾›æŒ‡é’ˆ</strong>æ¥ç›´æ¥è®¿é—®å†…å­˜ï¼Œç¨‹åºå†…å­˜æ›´åŠ å®‰å…¨ï¼Œæœ‰è‡ªåŠ¨å†…å­˜ç®¡ç†ï¼›C++ç”¨æŒ‡é’ˆç®¡ç†å†…å­˜</p>\n</li>\n<li><p>Javaçš„<strong>ç±»æ˜¯å•ç»§æ‰¿</strong>çš„ï¼ŒC++æ”¯æŒå¤šé‡ç»§æ‰¿ï¼›è™½ç„¶Javaçš„ç±»ä¸å¯ä»¥å¤šç»§æ‰¿ï¼Œä½†æ˜¯æ¥å£å¯ä»¥å¤šç»§æ‰¿ã€‚</p>\n<p>  ä¸ºä»€ä¹ˆJavaä¸­ç±»ä¸æ”¯æŒå¤šç»§æ‰¿ï¼Ÿâ€”â€”å¤šé‡ç»§æ‰¿çš„é’»çŸ³é—®é¢˜</p>\n<p>  <img src=\"https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/TyporaNotes20190622142003813.png\" alt=\"å¤šé‡ç»§æ‰¿çš„é’»çŸ³é—®é¢˜\"><br>  ç±» B å’Œç±» C ç»§æ‰¿è‡ªç±» Aï¼Œä¸”éƒ½é‡å†™äº†ç±» A ä¸­çš„åŒä¸€ä¸ªæ–¹æ³•ï¼Œè€Œç±» D åŒæ—¶ç»§æ‰¿äº†ç±» B å’Œç±» Cï¼ˆå¤šç»§æ‰¿)ï¼Œé‚£ä¹ˆæ­¤æ—¶ç±» D ä¼šç»§æ‰¿ Bã€C çš„æ–¹æ³•ï¼Œé‚£å¯¹äº Bã€C é‡å†™çš„ A ä¸­çš„æ–¹æ³•ï¼Œç±» D ä¼šç»§æ‰¿å“ªä¸€ä¸ªå‘¢ï¼Ÿ</p>\n</li>\n<li><p>Javaæœ‰<strong>è‡ªåŠ¨å†…å­˜ç®¡ç†</strong>æœºåˆ¶ï¼Œä¸éœ€è¦ç¨‹åºå‘˜æ‰‹åŠ¨é‡Šæ”¾æ— ç”¨å†…å­˜</p>\n</li>\n</ul>\n<h2 id=\"åŸºç¡€è¯­æ³•\"><a href=\"#åŸºç¡€è¯­æ³•\" class=\"headerlink\" title=\"åŸºç¡€è¯­æ³•\"></a>åŸºç¡€è¯­æ³•</h2><h3 id=\"æ•°æ®ç±»å‹\"><a href=\"#æ•°æ®ç±»å‹\" class=\"headerlink\" title=\"æ•°æ®ç±»å‹\"></a>æ•°æ®ç±»å‹</h3><p><strong>å®šä¹‰</strong>ï¼šJavaè¯­è¨€æ˜¯å¼ºç±»å‹è¯­è¨€ï¼Œå¯¹äºæ¯ä¸€ç§æ•°æ®éƒ½å®šä¹‰äº†æ˜ç¡®çš„å…·ä½“çš„æ•°æ®ç±»å‹ï¼Œåœ¨å†…å­˜ä¸­åˆ†é…äº†ä¸åŒå¤§å°çš„å†…å­˜ç©ºé—´ã€‚</p>\n<p><strong>åˆ†ç±»</strong></p>\n<ul>\n<li>åŸºæœ¬æ•°æ®ç±»å‹<ul>\n<li>æ•°å€¼å‹<ul>\n<li>æ•´æ•°ç±»å‹(byte,short,int,long)</li>\n<li>æµ®ç‚¹ç±»å‹(float,double)</li>\n</ul>\n</li>\n<li>å­—ç¬¦å‹(char)</li>\n<li>å¸ƒå°”å‹(boolean)</li>\n</ul>\n</li>\n<li>å¼•ç”¨æ•°æ®ç±»å‹<ul>\n<li>ç±»(class)</li>\n<li>æ¥å£(interface)</li>\n<li>æ•°ç»„([])</li>\n</ul>\n</li>\n</ul>\n<p><strong>JavaåŸºæœ¬æ•°æ®ç±»å‹å›¾</strong></p>\n<p><img src=\"https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/TyporaNotesaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL0pvdXJXb24vaW1hZ2UvbWFzdGVyL0phdmElRTUlOUYlQkElRTclQTElODAlRTglQUYlQUQlRTYlQjMlOTUvSmF2YSVFNSU5RiVCQSVFNiU5QyVBQyVFNiU5NSVCMCVFNiU4RCVBRSVFNyVCMSVCQiVFNSU5RSU4Qi5wbmc.png\" alt=\"JavaåŸºæœ¬æ•°æ®ç±»å‹å›¾\"></p>\n<h3 id=\"ç±»å‹è½¬æ¢\"><a href=\"#ç±»å‹è½¬æ¢\" class=\"headerlink\" title=\"ç±»å‹è½¬æ¢\"></a>ç±»å‹è½¬æ¢</h3><p>è‡ªåŠ¨ç±»å‹è½¬æ¢</p>\n<blockquote>\n<p>ä¸¤ç§æ•°æ®ç±»å‹å½¼æ­¤å…¼å®¹</p>\n<p>ä½çº§ç±»å‹æ•°æ®è½¬æ¢æˆé«˜çº§ç±»å‹æ•°æ®</p>\n</blockquote>\n<ul>\n<li>æ•°å€¼å‹æ•°æ®çš„è½¬æ¢ï¼šbyteâ†’shortâ†’intâ†’longâ†’floatâ†’double</li>\n<li>å­—ç¬¦å‹è½¬æ¢ä¸ºæ•´å‹ï¼šcharâ†’intã€‚</li>\n</ul>\n<p>å¼ºåˆ¶ç±»å‹è½¬æ¢</p>\n<blockquote>\n<p>å½“ä¸¤ç§æ•°æ®ç±»å‹ä¸å…¼å®¹ï¼Œæˆ–é«˜çº§ç±»å‹æ•°æ®è½¬æ¢æˆä½çº§ç±»å‹æ•°æ®æ—¶ï¼Œè‡ªåŠ¨è½¬æ¢å°†æ— æ³•è¿›è¡Œï¼ˆç¼–è¯‘é”™è¯¯ï¼‰ï¼Œè¿™æ—¶å°±éœ€è¦è¿›è¡Œå¼ºåˆ¶ç±»å‹è½¬æ¢</p>\n</blockquote>\n<h3 id=\"è®¿é—®ä¿®é¥°ç¬¦\"><a href=\"#è®¿é—®ä¿®é¥°ç¬¦\" class=\"headerlink\" title=\"è®¿é—®ä¿®é¥°ç¬¦\"></a>è®¿é—®ä¿®é¥°ç¬¦</h3><p><img src=\"https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/TyporaNotesaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL0pvdXJXb24vaW1hZ2UvbWFzdGVyL0phdmElRTUlOUYlQkElRTclQTElODAlRTglQUYlQUQlRTYlQjMlOTUvSmF2YSVFOCVBRSVCRiVFOSU5NyVBRSVFNCVCRiVBRSVFOSVBNSVCMCVFNyVBQyVBNi5wbmc.png\" alt=\"è®¿é—®ä¿®é¥°ç¬¦\"></p>\n<h3 id=\"å…³é”®å­—\"><a href=\"#å…³é”®å­—\" class=\"headerlink\" title=\"å…³é”®å­—\"></a>å…³é”®å­—</h3><h4 id=\"final-æœ‰ä»€ä¹ˆç”¨ï¼Ÿ\"><a href=\"#final-æœ‰ä»€ä¹ˆç”¨ï¼Ÿ\" class=\"headerlink\" title=\"final æœ‰ä»€ä¹ˆç”¨ï¼Ÿ\"></a>final æœ‰ä»€ä¹ˆç”¨ï¼Ÿ</h4><p>ç”¨äºä¿®é¥°ç±»ã€æ–¹æ³•å’Œå˜é‡ï¼›</p>\n<ul>\n<li><p>è¢«finalä¿®é¥°çš„ç±»ä¸å¯ä»¥è¢«ç»§æ‰¿</p>\n</li>\n<li><p>è¢«finalä¿®é¥°çš„æ–¹æ³•ä¸å¯ä»¥è¢«é‡å†™</p>\n</li>\n<li><p>è¢«finalä¿®é¥°çš„å˜é‡ä¸å¯ä»¥è¢«æ”¹å˜ï¼Œè¢«finalä¿®é¥°<strong>ä¸å¯å˜çš„æ˜¯å˜é‡çš„å¼•ç”¨ï¼Œè€Œä¸æ˜¯å¼•ç”¨æŒ‡å‘çš„å†…å®¹</strong>ï¼Œå¼•ç”¨æŒ‡å‘çš„å†…å®¹æ˜¯å¯ä»¥æ”¹å˜</p>\n  <figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">final</span> <span class=\"type\">int</span>[] nums = <span class=\"keyword\">new</span> <span class=\"title class_\">int</span>[]&#123;<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>&#125;;</span><br><span class=\"line\">nums[<span class=\"number\">0</span>] = <span class=\"number\">11</span>;</span><br><span class=\"line\">System.out.println(Arrays.toString(nums));\t<span class=\"comment\">// [11, 2, 3]</span></span><br></pre></td></tr></table></figure></li>\n</ul>\n<h4 id=\"finalã€finallyã€finalizeåŒºåˆ«\"><a href=\"#finalã€finallyã€finalizeåŒºåˆ«\" class=\"headerlink\" title=\"finalã€finallyã€finalizeåŒºåˆ«\"></a>finalã€finallyã€finalizeåŒºåˆ«</h4><ul>\n<li>finalæ˜¯Javaä¿®é¥°ç¬¦ï¼Œå¯ä»¥ä¿®é¥°ç±»ã€æ–¹æ³•ã€å˜é‡ï¼Œä¿®é¥°ç±»è¡¨ç¤ºè¯¥ç±»ä¸èƒ½è¢«ç»§æ‰¿ã€ä¿®é¥°æ–¹æ³•è¡¨ç¤ºè¯¥æ–¹æ³•ä¸èƒ½è¢«é‡å†™ã€ä¿®é¥°å˜é‡è¡¨ç¤ºè¯¥å˜é‡ä¸å¯ä»¥è¢«æ”¹å˜ã€‚</li>\n<li>finallyä¸€èˆ¬ä½œç”¨åœ¨try-catchä»£ç å—ä¸­ï¼Œåœ¨å¤„ç†å¼‚å¸¸çš„æ—¶å€™ï¼Œé€šå¸¸æˆ‘ä»¬å°†ä¸€å®šè¦æ‰§è¡Œçš„ä»£ç æ–¹æ³•finallyä»£ç å—<br>  ä¸­ï¼Œè¡¨ç¤ºä¸ç®¡æ˜¯å¦å‡ºç°å¼‚å¸¸ï¼Œè¯¥ä»£ç å—éƒ½ä¼šæ‰§è¡Œï¼Œä¸€èˆ¬ç”¨æ¥å­˜æ”¾ä¸€äº›å…³é—­èµ„æºçš„ä»£ç ã€‚</li>\n<li>finalizeæ˜¯Objectç±»çš„ä¸€ä¸ªæ–¹æ³•ï¼Œè¯¥æ–¹æ³•ä¸€èˆ¬ç”±åƒåœ¾å›æ”¶å™¨æ¥è°ƒç”¨ï¼Œåœ¨æ‰§è¡Œåƒåœ¾å›æ”¶å‰ï¼Œç”±åƒåœ¾å›æ”¶å™¨è°ƒç”¨å¯¹è±¡çš„finalize()æ–¹æ³•ï¼Œå¹¶ä¸”åœ¨è¯¥æ–¹æ³•ä¸­å¯¹è±¡å¯èƒ½å¯ä»¥å¤æ´»ã€‚</li>\n</ul>\n<h4 id=\"thiså…³é”®å­—çš„ç”¨æ³•\"><a href=\"#thiså…³é”®å­—çš„ç”¨æ³•\" class=\"headerlink\" title=\"thiså…³é”®å­—çš„ç”¨æ³•\"></a>thiså…³é”®å­—çš„ç”¨æ³•</h4><p>æŒ‡å‘å¯¹è±¡æœ¬èº«çš„ä¸€ä¸ªæŒ‡é’ˆã€‚</p>\n<h4 id=\"superå…³é”®å­—çš„ç”¨æ³•\"><a href=\"#superå…³é”®å­—çš„ç”¨æ³•\" class=\"headerlink\" title=\"superå…³é”®å­—çš„ç”¨æ³•\"></a>superå…³é”®å­—çš„ç”¨æ³•</h4><p>æŒ‡å‘è‡ªå·±çˆ¶ç±»å¯¹è±¡ï¼ˆæœ€è¿‘çš„çˆ¶ç±»ï¼‰çš„ä¸€ä¸ªæŒ‡é’ˆã€‚</p>\n<h4 id=\"staticå­˜åœ¨çš„ä¸»è¦æ„ä¹‰\"><a href=\"#staticå­˜åœ¨çš„ä¸»è¦æ„ä¹‰\" class=\"headerlink\" title=\"staticå­˜åœ¨çš„ä¸»è¦æ„ä¹‰\"></a>staticå­˜åœ¨çš„ä¸»è¦æ„ä¹‰</h4><p>static<strong>é™æ€å˜é‡</strong>ï¼šå’Œç±»ä¸€èµ·åŠ è½½ï¼Œ<strong>ä»¥è‡´äºå³ä½¿æ²¡æœ‰åˆ›å»ºå¯¹è±¡ï¼Œä¹Ÿèƒ½ä½¿ç”¨å±æ€§å’Œè°ƒç”¨æ–¹æ³•ã€‚</strong></p>\n<p>static<strong>é™æ€ä»£ç å—</strong>ï¼šåœ¨ç±»åˆæ¬¡è¢«åŠ è½½çš„æ—¶å€™ï¼Œä¼šæŒ‰ç…§staticå—çš„é¡ºåºæ¥æ‰§è¡Œæ¯ä¸ªstaticå—ï¼Œå¹¶ä¸”åªä¼šæ‰§è¡Œä¸€æ¬¡ã€‚<br>åŠ è½½ â†’ é“¾æ¥ï¼ˆéªŒè¯ã€å‡†å¤‡ã€è§£æï¼‰ â†’ åˆå§‹åŒ–</p>\n<p>staticç±»å‹çš„å˜é‡åœ¨å‡†å¤‡é˜¶æ®µè¿›è¡Œé»˜è®¤åˆå§‹åŒ–ï¼Œä½†æ˜¯æœ‰static finalä¿®é¥°çš„ä¼šåœ¨å‡†å¤‡é˜¶æ®µç›´æ¥èµ‹å€¼ï¼Œ åœ¨åˆå§‹åŒ–é˜¶æ®µè¿›è¡Œæ˜¾å¼åˆå§‹åŒ–ã€‚</p>\n<h4 id=\"staticæ³¨æ„äº‹é¡¹\"><a href=\"#staticæ³¨æ„äº‹é¡¹\" class=\"headerlink\" title=\"staticæ³¨æ„äº‹é¡¹\"></a>staticæ³¨æ„äº‹é¡¹</h4><p>1ã€é™æ€åªèƒ½è®¿é—®é™æ€ã€‚ 2ã€éé™æ€æ—¢å¯ä»¥è®¿é—®éé™æ€çš„ï¼Œä¹Ÿå¯ä»¥è®¿é—®é™æ€çš„ã€‚</p>\n<h3 id=\"åˆå§‹åŒ–é¡ºåº\"><a href=\"#åˆå§‹åŒ–é¡ºåº\" class=\"headerlink\" title=\"åˆå§‹åŒ–é¡ºåº\"></a>åˆå§‹åŒ–é¡ºåº</h3><p>é™æ€å±æ€§ â†’ é™æ€æ–¹æ³•å— â†’ æ™®é€šå±æ€§ â†’ æ™®é€šæ–¹æ³•å— â†’ æ„é€ å‡½æ•°</p>\n<h3 id=\"æµç¨‹æ§åˆ¶è¯­å¥\"><a href=\"#æµç¨‹æ§åˆ¶è¯­å¥\" class=\"headerlink\" title=\"æµç¨‹æ§åˆ¶è¯­å¥\"></a>æµç¨‹æ§åˆ¶è¯­å¥</h3><h4 id=\"break-ã€continueã€return-çš„åŒºåˆ«åŠä½œç”¨\"><a href=\"#break-ã€continueã€return-çš„åŒºåˆ«åŠä½œç”¨\" class=\"headerlink\" title=\"break ã€continueã€return çš„åŒºåˆ«åŠä½œç”¨\"></a>break ã€continueã€return çš„åŒºåˆ«åŠä½œç”¨</h4><p>break ç»“æŸå½“å‰çš„å¾ªç¯ä½“</p>\n<p>continue ç»“æŸæ­£åœ¨æ‰§è¡Œçš„å¾ªç¯ï¼Œè¿›å…¥ä¸‹ä¸€ä¸ªå¾ªç¯æ¡ä»¶</p>\n<p>return ç»“æŸå½“å‰çš„æ–¹æ³•ï¼Œç›´æ¥è¿”å›</p>\n<h4 id=\"è·³å‡ºå½“å‰çš„å¤šé‡åµŒå¥—å¾ªç¯\"><a href=\"#è·³å‡ºå½“å‰çš„å¤šé‡åµŒå¥—å¾ªç¯\" class=\"headerlink\" title=\"è·³å‡ºå½“å‰çš„å¤šé‡åµŒå¥—å¾ªç¯\"></a>è·³å‡ºå½“å‰çš„å¤šé‡åµŒå¥—å¾ªç¯</h4><p>åœ¨Javaä¸­ï¼Œè¦æƒ³è·³å‡ºå¤šé‡å¾ªç¯ï¼Œå¯ä»¥åœ¨å¤–é¢çš„å¾ªç¯è¯­å¥å‰å®šä¹‰ä¸€ä¸ªæ ‡å·ï¼Œç„¶ååœ¨é‡Œå±‚å¾ªç¯ä½“çš„ä»£ç ä¸­ä½¿ç”¨å¸¦æœ‰æ ‡å·çš„break è¯­å¥ï¼Œå³å¯è·³å‡ºå¤–å±‚å¾ªç¯ã€‚ä¾‹å¦‚ï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> &#123;</span><br><span class=\"line\">    ok:</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>; i &lt; <span class=\"number\">10</span>; i++) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">j</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>; j &lt; <span class=\"number\">10</span>; j++) &#123;</span><br><span class=\"line\">            System.out.println(<span class=\"string\">&quot;i=&quot;</span> + i + <span class=\"string\">&quot;,j=&quot;</span> + j);</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (j == <span class=\"number\">5</span>) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">break</span> ok;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"é¢å‘å¯¹è±¡\"><a href=\"#é¢å‘å¯¹è±¡\" class=\"headerlink\" title=\"é¢å‘å¯¹è±¡\"></a>é¢å‘å¯¹è±¡</h2><h3 id=\"é¢å‘å¯¹è±¡ä¸‰å¤§ç‰¹æ€§\"><a href=\"#é¢å‘å¯¹è±¡ä¸‰å¤§ç‰¹æ€§\" class=\"headerlink\" title=\"é¢å‘å¯¹è±¡ä¸‰å¤§ç‰¹æ€§\"></a>é¢å‘å¯¹è±¡ä¸‰å¤§ç‰¹æ€§</h3><h4 id=\"é¢å‘å¯¹è±¡çš„ç‰¹å¾æœ‰å“ªäº›æ–¹é¢\"><a href=\"#é¢å‘å¯¹è±¡çš„ç‰¹å¾æœ‰å“ªäº›æ–¹é¢\" class=\"headerlink\" title=\"é¢å‘å¯¹è±¡çš„ç‰¹å¾æœ‰å“ªäº›æ–¹é¢\"></a>é¢å‘å¯¹è±¡çš„ç‰¹å¾æœ‰å“ªäº›æ–¹é¢</h4><p><strong>æŠ½è±¡</strong>ï¼šæŠ½è±¡æ˜¯å°†ä¸€ç±»å¯¹è±¡çš„å…±åŒç‰¹å¾æ€»ç»“å‡ºæ¥æ„é€ ç±»çš„è¿‡ç¨‹ï¼ŒåŒ…æ‹¬æ•°æ®æŠ½è±¡å’Œè¡Œä¸ºæŠ½è±¡ä¸¤æ–¹é¢ã€‚æŠ½è±¡åªå…³æ³¨å¯¹è±¡æœ‰å“ªäº›å±æ€§å’Œè¡Œä¸ºï¼Œå¹¶ä¸å…³æ³¨è¿™äº›è¡Œä¸ºçš„ç»†èŠ‚æ˜¯ä»€ä¹ˆã€‚</p>\n<p><strong>å°è£…</strong></p>\n<p>å°è£…æŠŠä¸€ä¸ªå¯¹è±¡çš„å±æ€§ç§æœ‰åŒ–ï¼ŒåŒæ—¶æä¾›ä¸€äº›å¯ä»¥è¢«å¤–ç•Œè®¿é—®çš„å±æ€§çš„æ–¹æ³•ï¼Œå¦‚æœå±æ€§ä¸æƒ³è¢«å¤–ç•Œè®¿é—®ï¼Œæˆ‘ä»¬å¤§å¯ä¸å¿…æä¾›æ–¹æ³•ç»™å¤–ç•Œè®¿é—®ã€‚</p>\n<p><strong>ç»§æ‰¿</strong></p>\n<p>ç»§æ‰¿æ˜¯<strong>ä½¿ç”¨å·²å­˜åœ¨çš„ç±»ä½œä¸ºåŸºç¡€å»ºç«‹æ–°ç±»</strong>çš„æŠ€æœ¯ï¼Œæ–°ç±»çš„å®šä¹‰å¯ä»¥å¢åŠ æ–°çš„æ•°æ®æˆ–æ–°çš„åŠŸèƒ½ï¼Œä¹Ÿå¯ä»¥ç”¨çˆ¶ç±»çš„åŠŸèƒ½ã€‚é€šè¿‡ä½¿ç”¨ç»§æ‰¿æˆ‘ä»¬èƒ½å¤Ÿéå¸¸æ–¹ä¾¿åœ°å¤ç”¨ä»¥å‰çš„ä»£ç ã€‚</p>\n<p>å…³äºç»§æ‰¿å¦‚ä¸‹ 3 ç‚¹è¯·è®°ä½ï¼š</p>\n<ol>\n<li>å­ç±»æ‹¥æœ‰çˆ¶ç±»é private çš„å±æ€§å’Œæ–¹æ³•ã€‚</li>\n<li>å­ç±»å¯ä»¥æ‹¥æœ‰è‡ªå·±å±æ€§å’Œæ–¹æ³•ï¼Œå³å­ç±»å¯ä»¥å¯¹çˆ¶ç±»è¿›è¡Œæ‰©å±•ã€‚</li>\n<li>å­ç±»å¯ä»¥ç”¨è‡ªå·±çš„æ–¹å¼å®ç°çˆ¶ç±»çš„æ–¹æ³•ï¼Œoverrideé‡å†™ã€‚</li>\n</ol>\n<p><strong>å¤šæ€</strong></p>\n<p>æ‰€è°“å¤šæ€å°±æ˜¯æŒ‡ä¸€ä¸ªå¼•ç”¨å˜é‡åˆ°åº•ä¼šæŒ‡å‘å“ªä¸ªç±»çš„å®ä¾‹å¯¹è±¡ï¼Œè¯¥å¼•ç”¨å˜é‡è°ƒç”¨çš„æ–¹æ³•åˆ°åº•æ˜¯å“ªä¸ªç±»ä¸­å®ç°çš„æ–¹æ³•ï¼Œå¿…é¡»åœ¨ç¨‹åºè¿è¡ŒæœŸé—´æ‰èƒ½ç¡®å®šï¼Œç¼–è¯‘æœŸæ— æ³•ç¡®å®šã€‚</p>\n<p>çˆ¶ç±»çš„å¼•ç”¨æŒ‡å‘å­ç±»å®ä¾‹å¯¹è±¡ã€æ¥å£æŒ‡å‘å®ç°ç±»å®ä¾‹å¯¹è±¡ã€‚æé«˜äº†ç¨‹åºçš„æ‹“å±•æ€§ã€‚</p>\n<p>åœ¨Javaä¸­æœ‰ä¸¤ç§å½¢å¼å¯ä»¥å®ç°å¤šæ€ï¼šç»§æ‰¿ï¼ˆå¤šä¸ªå­ç±»å¯¹åŒä¸€æ–¹æ³•çš„é‡å†™ï¼‰å’Œæ¥å£ï¼ˆå®ç°æ¥å£å¹¶è¦†ç›–æ¥å£ä¸­åŒä¸€æ–¹æ³•ï¼‰ã€‚</p>\n<p>æ–¹æ³•é‡è½½ï¼ˆoverloadï¼‰å®ç°ç¼–è¯‘æ—¶çš„å¤šæ€æ€§ï¼ˆä¹Ÿç§°ä¸ºå‰ç»‘å®šï¼‰ï¼Œæ–¹æ³•é‡å†™ï¼ˆoverrideï¼‰å®ç°è¿è¡Œæ—¶çš„å¤šæ€æ€§ï¼ˆä¹Ÿç§°ä¸ºåç»‘å®šï¼‰ã€‚</p>\n<p>Javaå®ç°å¤šæ€æœ‰ä¸‰ä¸ªå¿…è¦æ¡ä»¶ï¼šç»§æ‰¿ã€é‡å†™ã€å‘ä¸Šè½¬å‹ã€‚</p>\n<blockquote>\n<p>ç»§æ‰¿ï¼šåœ¨å¤šæ€ä¸­å¿…é¡»å­˜åœ¨æœ‰ç»§æ‰¿å…³ç³»çš„å­ç±»å’Œçˆ¶ç±»ã€‚</p>\n<p>é‡å†™ï¼šå­ç±»å¯¹çˆ¶ç±»ä¸­æŸäº›æ–¹æ³•è¿›è¡Œé‡æ–°å®šä¹‰ï¼Œåœ¨è°ƒç”¨è¿™äº›æ–¹æ³•æ—¶å°±ä¼šè°ƒç”¨å­ç±»çš„æ–¹æ³•ã€‚</p>\n<p>å‘ä¸Šè½¬å‹ï¼šåœ¨å¤šæ€ä¸­éœ€è¦å°†å­ç±»çš„å¼•ç”¨èµ‹ç»™çˆ¶ç±»å¯¹è±¡ï¼Œåªæœ‰è¿™æ ·è¯¥å¼•ç”¨æ‰èƒ½å¤Ÿå…·å¤‡æŠ€èƒ½è°ƒç”¨çˆ¶ç±»çš„æ–¹æ³•å’Œå­ç±»çš„æ–¹æ³•ã€‚</p>\n</blockquote>\n<p>åªæœ‰æ»¡è¶³äº†ä¸Šè¿°ä¸‰ä¸ªæ¡ä»¶ï¼Œæˆ‘ä»¬æ‰èƒ½å¤Ÿåœ¨åŒä¸€ä¸ªç»§æ‰¿ç»“æ„ä¸­ä½¿ç”¨ç»Ÿä¸€çš„é€»è¾‘å®ç°ä»£ç å¤„ç†ä¸åŒçš„å¯¹è±¡ï¼Œä»è€Œè¾¾åˆ°æ‰§è¡Œä¸åŒçš„è¡Œä¸ºã€‚</p>\n<h4 id=\"æŠ½è±¡ç±»å’Œæ¥å£çš„å¯¹æ¯”\"><a href=\"#æŠ½è±¡ç±»å’Œæ¥å£çš„å¯¹æ¯”\" class=\"headerlink\" title=\"æŠ½è±¡ç±»å’Œæ¥å£çš„å¯¹æ¯”\"></a>æŠ½è±¡ç±»å’Œæ¥å£çš„å¯¹æ¯”</h4><p>æŠ½è±¡ç±»æ˜¯å¯¹ç±»çš„æŠ½è±¡ï¼Œç”¨æ¥<strong>æ•æ‰é€šç”¨ç‰¹æ€§</strong>ã€‚æ¥å£æ˜¯<strong>è¡Œä¸ºçš„æŠ½è±¡</strong>ï¼ŒæŠ½è±¡æ–¹æ³•çš„é›†åˆã€‚</p>\n<p><strong>ç›¸åŒç‚¹</strong></p>\n<ul>\n<li>æ¥å£å’ŒæŠ½è±¡ç±»éƒ½ä¸èƒ½å®ä¾‹åŒ–</li>\n<li>éƒ½ä½äºç»§æ‰¿çš„é¡¶ç«¯ï¼Œç”¨äºè¢«å…¶ä»–ç±»å®ç°æˆ–ç»§æ‰¿</li>\n<li>éƒ½åŒ…å«æŠ½è±¡æ–¹æ³•ï¼Œå…¶å­ç±»éƒ½å¿…é¡»é‡å†™è¿™äº›æŠ½è±¡æ–¹æ³•</li>\n</ul>\n<p><strong>ä¸åŒç‚¹</strong></p>\n<table>\n<thead>\n<tr>\n<th>å‚æ•°</th>\n<th>æŠ½è±¡ç±»</th>\n<th>æ¥å£</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>å£°æ˜</td>\n<td>æŠ½è±¡ç±»ä½¿ç”¨abstractå…³é”®å­—å£°æ˜</td>\n<td>æ¥å£ä½¿ç”¨interfaceå…³é”®å­—å£°æ˜</td>\n</tr>\n<tr>\n<td>å®ç°</td>\n<td>å­ç±»ä½¿ç”¨extendså…³é”®å­—æ¥ç»§æ‰¿æŠ½è±¡ç±»</td>\n<td>å­ç±»ä½¿ç”¨implementså…³é”®å­—æ¥å®ç°æ¥å£</td>\n</tr>\n<tr>\n<td>æ„é€ å™¨</td>\n<td>æŠ½è±¡ç±»å¯ä»¥æœ‰æ„é€ å™¨</td>\n<td>æ¥å£ä¸èƒ½æœ‰æ„é€ å™¨</td>\n</tr>\n<tr>\n<td>è®¿é—®ä¿®é¥°ç¬¦</td>\n<td>æŠ½è±¡ç±»ä¸­çš„æ–¹æ³•å¯ä»¥æ˜¯ä»»æ„è®¿é—®ä¿®é¥°ç¬¦</td>\n<td>æ¥å£æ–¹æ³•é»˜è®¤ä¿®é¥°ç¬¦æ˜¯publicï¼Œä¹Ÿå¯ä»¥ä¸åŠ è®¿é—®ä¿®é¥°ç¬¦</td>\n</tr>\n<tr>\n<td>å¤šç»§æ‰¿</td>\n<td>ä¸€ä¸ªç±»æœ€å¤šåªèƒ½ç»§æ‰¿ä¸€ä¸ªæŠ½è±¡ç±»</td>\n<td>ä¸€ä¸ªç±»å¯ä»¥å®ç°å¤šä¸ªæ¥å£</td>\n</tr>\n</tbody></table>\n<h4 id=\"æ™®é€šç±»å’ŒæŠ½è±¡ç±»æœ‰å“ªäº›åŒºåˆ«ï¼Ÿ\"><a href=\"#æ™®é€šç±»å’ŒæŠ½è±¡ç±»æœ‰å“ªäº›åŒºåˆ«ï¼Ÿ\" class=\"headerlink\" title=\"æ™®é€šç±»å’ŒæŠ½è±¡ç±»æœ‰å“ªäº›åŒºåˆ«ï¼Ÿ\"></a>æ™®é€šç±»å’ŒæŠ½è±¡ç±»æœ‰å“ªäº›åŒºåˆ«ï¼Ÿ</h4><ul>\n<li>æ™®é€šç±»ä¸èƒ½åŒ…å«æŠ½è±¡æ–¹æ³•ï¼ŒæŠ½è±¡ç±»å¯ä»¥åŒ…å«æŠ½è±¡æ–¹æ³•ã€‚</li>\n<li>æŠ½è±¡ç±»ä¸èƒ½ç›´æ¥å®ä¾‹åŒ–ï¼Œæ™®é€šç±»å¯ä»¥ç›´æ¥å®ä¾‹åŒ–ã€‚</li>\n</ul>\n<h4 id=\"æˆå‘˜å˜é‡å’Œå±€éƒ¨å˜é‡çš„åŒºåˆ«\"><a href=\"#æˆå‘˜å˜é‡å’Œå±€éƒ¨å˜é‡çš„åŒºåˆ«\" class=\"headerlink\" title=\"æˆå‘˜å˜é‡å’Œå±€éƒ¨å˜é‡çš„åŒºåˆ«\"></a>æˆå‘˜å˜é‡å’Œå±€éƒ¨å˜é‡çš„åŒºåˆ«</h4><table>\n<thead>\n<tr>\n<th></th>\n<th>æˆå‘˜å˜é‡</th>\n<th>å±€éƒ¨å˜é‡</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><strong>ä½œç”¨åŸŸ</strong></td>\n<td>æ•´ä¸ªç±»å¯ä½¿ç”¨</td>\n<td>æ–¹æ³•ä½“å†…ä½¿ç”¨</td>\n</tr>\n<tr>\n<td><strong>å­˜å‚¨ä½ç½®</strong></td>\n<td>å±äºå¯¹è±¡ï¼Œå­˜åœ¨å †å†…å­˜ä¸­</td>\n<td>å±äºæ–¹æ³•ï¼Œå­˜åœ¨æ ˆå¸§ä¸­</td>\n</tr>\n<tr>\n<td><strong>ç”Ÿå‘½å‘¨æœŸ</strong></td>\n<td>å’Œå¯¹è±¡åŒç”Ÿå‘½å‘¨æœŸ</td>\n<td>å’Œæ–¹æ³•åŒç”Ÿå‘½å‘¨æœŸ</td>\n</tr>\n<tr>\n<td><strong>åˆå§‹å€¼</strong></td>\n<td>ä¸æŒ‡å®šçš„è¯æœ‰é»˜è®¤åˆå§‹å€¼</td>\n<td>å¿…é¡»æ‰‹åŠ¨åˆå§‹åŒ–å¦åˆ™<br />ä¸èƒ½ä½¿ç”¨ï¼ˆç¼–è¯‘é”™è¯¯ï¼‰</td>\n</tr>\n</tbody></table>\n<p><strong>ä½¿ç”¨åŸåˆ™</strong></p>\n<p>åœ¨ä½¿ç”¨å˜é‡æ—¶éœ€è¦éµå¾ªçš„åŸåˆ™ä¸ºï¼šå°±è¿‘åŸåˆ™<br>é¦–å…ˆåœ¨å±€éƒ¨èŒƒå›´æ‰¾ï¼Œæœ‰å°±ä½¿ç”¨ï¼›æ¥ç€åœ¨æˆå‘˜ä½ç½®æ‰¾ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">Main</span> &#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> <span class=\"variable\">a</span> <span class=\"operator\">=</span> <span class=\"number\">2</span>;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> &#123;</span><br><span class=\"line\">        <span class=\"type\">int</span> <span class=\"variable\">a</span> <span class=\"operator\">=</span> <span class=\"number\">1</span>;</span><br><span class=\"line\">        System.out.println(a);\t<span class=\"comment\">// 1</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"å†…éƒ¨ç±»\"><a href=\"#å†…éƒ¨ç±»\" class=\"headerlink\" title=\"å†…éƒ¨ç±»\"></a>å†…éƒ¨ç±»</h3><h4 id=\"ä»€ä¹ˆæ˜¯å†…éƒ¨ç±»ï¼Ÿ\"><a href=\"#ä»€ä¹ˆæ˜¯å†…éƒ¨ç±»ï¼Ÿ\" class=\"headerlink\" title=\"ä»€ä¹ˆæ˜¯å†…éƒ¨ç±»ï¼Ÿ\"></a>ä»€ä¹ˆæ˜¯å†…éƒ¨ç±»ï¼Ÿ</h4><p>åœ¨Javaä¸­ï¼Œå¯ä»¥å°†ä¸€ä¸ªç±»çš„å®šä¹‰æ”¾åœ¨å¦å¤–ä¸€ä¸ªç±»çš„å®šä¹‰å†…éƒ¨ï¼Œè¿™å°±æ˜¯<strong>å†…éƒ¨ç±»</strong>ã€‚</p>\n<h4 id=\"å†…éƒ¨ç±»çš„åˆ†ç±»æœ‰å“ªäº›\"><a href=\"#å†…éƒ¨ç±»çš„åˆ†ç±»æœ‰å“ªäº›\" class=\"headerlink\" title=\"å†…éƒ¨ç±»çš„åˆ†ç±»æœ‰å“ªäº›\"></a>å†…éƒ¨ç±»çš„åˆ†ç±»æœ‰å“ªäº›</h4><p>å†…éƒ¨ç±»å¯ä»¥åˆ†ä¸ºå››ç§ï¼š<strong>é™æ€å†…éƒ¨ç±»ã€æˆå‘˜å†…éƒ¨ç±»ã€å±€éƒ¨å†…éƒ¨ç±»ã€åŒ¿åå†…éƒ¨ç±»</strong>ã€‚</p>\n<h5 id=\"é™æ€å†…éƒ¨ç±»\"><a href=\"#é™æ€å†…éƒ¨ç±»\" class=\"headerlink\" title=\"é™æ€å†…éƒ¨ç±»\"></a>é™æ€å†…éƒ¨ç±»</h5><p>å®šä¹‰åœ¨ç±»å†…éƒ¨çš„é™æ€ç±»ï¼Œå°±æ˜¯é™æ€å†…éƒ¨ç±»ã€‚</p>\n<p>é™æ€å†…éƒ¨ç±»å¯ä»¥è®¿é—®å¤–éƒ¨ç±»æ‰€æœ‰çš„é™æ€å˜é‡ï¼Œè€Œä¸å¯è®¿é—®å¤–éƒ¨ç±»çš„éé™æ€å˜é‡</p>\n<h5 id=\"æˆå‘˜å†…éƒ¨ç±»\"><a href=\"#æˆå‘˜å†…éƒ¨ç±»\" class=\"headerlink\" title=\"æˆå‘˜å†…éƒ¨ç±»\"></a>æˆå‘˜å†…éƒ¨ç±»</h5><p>å®šä¹‰åœ¨ç±»å†…éƒ¨ï¼Œæˆå‘˜ä½ç½®ä¸Šçš„éé™æ€ç±»ï¼Œå°±æ˜¯æˆå‘˜å†…éƒ¨ç±»ã€‚</p>\n<p>æˆå‘˜å†…éƒ¨ç±»å¯ä»¥è®¿é—®å¤–éƒ¨ç±»æ‰€æœ‰çš„å˜é‡å’Œæ–¹æ³•ï¼ŒåŒ…æ‹¬é™æ€å’Œéé™æ€ï¼Œç§æœ‰å’Œå…¬æœ‰ã€‚</p>\n<h5 id=\"å±€éƒ¨å†…éƒ¨ç±»\"><a href=\"#å±€éƒ¨å†…éƒ¨ç±»\" class=\"headerlink\" title=\"å±€éƒ¨å†…éƒ¨ç±»\"></a>å±€éƒ¨å†…éƒ¨ç±»</h5><p>å®šä¹‰åœ¨æ–¹æ³•ä¸­çš„å†…éƒ¨ç±»ï¼Œå°±æ˜¯å±€éƒ¨å†…éƒ¨ç±»ã€‚</p>\n<p>å®šä¹‰åœ¨å®ä¾‹æ–¹æ³•ä¸­çš„å±€éƒ¨ç±»å¯ä»¥è®¿é—®å¤–éƒ¨ç±»çš„æ‰€æœ‰å˜é‡å’Œæ–¹æ³•ï¼Œå®šä¹‰åœ¨é™æ€æ–¹æ³•ä¸­çš„å±€éƒ¨ç±»åªèƒ½è®¿é—®å¤–éƒ¨ç±»çš„é™æ€å˜é‡å’Œæ–¹æ³•</p>\n<h5 id=\"åŒ¿åå†…éƒ¨ç±»\"><a href=\"#åŒ¿åå†…éƒ¨ç±»\" class=\"headerlink\" title=\"åŒ¿åå†…éƒ¨ç±»\"></a>åŒ¿åå†…éƒ¨ç±»</h5><p>åŒ¿åå†…éƒ¨ç±»å°±æ˜¯æ²¡æœ‰åå­—çš„å†…éƒ¨ç±»ï¼Œæ—¥å¸¸å¼€å‘ä¸­ä½¿ç”¨çš„æ¯”è¾ƒå¤šã€‚åŒ¿åå†…éƒ¨ç±»å¿…é¡»ç»§æ‰¿æˆ–å®ç°ä¸€ä¸ªå·²æœ‰çš„æ¥å£ ï¼ŒåŒ¿åå†…éƒ¨ç±»ä¸èƒ½å®šä¹‰ä»»ä½•é™æ€æˆå‘˜å’Œé™æ€æ–¹æ³•</p>\n<h4 id=\"å±€éƒ¨å†…éƒ¨ç±»å’ŒåŒ¿åå†…éƒ¨ç±»è®¿é—®å±€éƒ¨å˜é‡çš„æ—¶å€™ï¼Œä¸ºä»€ä¹ˆå˜é‡å¿…é¡»è¦åŠ ä¸Šfinalï¼Ÿ\"><a href=\"#å±€éƒ¨å†…éƒ¨ç±»å’ŒåŒ¿åå†…éƒ¨ç±»è®¿é—®å±€éƒ¨å˜é‡çš„æ—¶å€™ï¼Œä¸ºä»€ä¹ˆå˜é‡å¿…é¡»è¦åŠ ä¸Šfinalï¼Ÿ\" class=\"headerlink\" title=\"å±€éƒ¨å†…éƒ¨ç±»å’ŒåŒ¿åå†…éƒ¨ç±»è®¿é—®å±€éƒ¨å˜é‡çš„æ—¶å€™ï¼Œä¸ºä»€ä¹ˆå˜é‡å¿…é¡»è¦åŠ ä¸Šfinalï¼Ÿ\"></a>å±€éƒ¨å†…éƒ¨ç±»å’ŒåŒ¿åå†…éƒ¨ç±»è®¿é—®å±€éƒ¨å˜é‡çš„æ—¶å€™ï¼Œä¸ºä»€ä¹ˆå˜é‡å¿…é¡»è¦åŠ ä¸Šfinalï¼Ÿ</h4><p>å±€éƒ¨å†…éƒ¨ç±»å’ŒåŒ¿åå†…éƒ¨ç±»è®¿é—®å±€éƒ¨å˜é‡çš„æ—¶å€™ï¼Œä¸ºä»€ä¹ˆå˜é‡å¿…é¡»è¦åŠ ä¸Šfinalå‘¢ï¼Ÿå®ƒå†…éƒ¨åŸç†æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ</p>\n<p>å…ˆçœ‹è¿™æ®µä»£ç ï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">Outer</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">void</span> <span class=\"title function_\">outMethod</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">final</span> <span class=\"type\">int</span> <span class=\"variable\">a</span> <span class=\"operator\">=</span><span class=\"number\">10</span>;</span><br><span class=\"line\">        <span class=\"keyword\">class</span> <span class=\"title class_\">Inner</span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">void</span> <span class=\"title function_\">innerMethod</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">                System.out.println(a);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ä»¥ä¸Šä¾‹å­ï¼Œä¸ºä»€ä¹ˆè¦åŠ finalå‘¢ï¼Ÿæ˜¯å› ä¸º<strong>ç”Ÿå‘½å‘¨æœŸä¸ä¸€è‡´</strong></p>\n<p>å±€éƒ¨å˜é‡å­˜å‚¨åœ¨æ ˆä¸­ï¼Œå½“æ–¹æ³•æ‰§è¡Œç»“æŸåï¼Œå¦‚æœä¸ç”¨finalä¿®é¥°é‚£ä¹ˆè¯¥å±€éƒ¨å˜é‡å°±è¢«é”€æ¯ã€‚è€Œå±€éƒ¨å†…éƒ¨ç±»å¯¹å±€éƒ¨å˜é‡çš„å¼•ç”¨ä¾ç„¶å­˜åœ¨ï¼Œå¦‚æœå±€éƒ¨å†…éƒ¨ç±»è¦è°ƒç”¨å±€éƒ¨å˜é‡æ—¶ï¼Œå°±ä¼šå‡ºé”™ã€‚<br>åŠ äº†finalï¼Œå¯ä»¥ç¡®ä¿å±€éƒ¨å†…éƒ¨ç±»ä½¿ç”¨çš„å˜é‡ä¸å¤–å±‚çš„å±€éƒ¨å˜é‡åŒºåˆ†å¼€ï¼Œè§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚</p>\n<h3 id=\"é‡å†™ä¸é‡è½½\"><a href=\"#é‡å†™ä¸é‡è½½\" class=\"headerlink\" title=\"é‡å†™ä¸é‡è½½\"></a>é‡å†™ä¸é‡è½½</h3><h4 id=\"æ„é€ å™¨ï¼ˆconstructorï¼‰æ˜¯å¦å¯è¢«é‡å†™ï¼ˆoverrideï¼‰\"><a href=\"#æ„é€ å™¨ï¼ˆconstructorï¼‰æ˜¯å¦å¯è¢«é‡å†™ï¼ˆoverrideï¼‰\" class=\"headerlink\" title=\"æ„é€ å™¨ï¼ˆconstructorï¼‰æ˜¯å¦å¯è¢«é‡å†™ï¼ˆoverrideï¼‰\"></a>æ„é€ å™¨ï¼ˆconstructorï¼‰æ˜¯å¦å¯è¢«é‡å†™ï¼ˆoverrideï¼‰</h4><p>æ„é€ å™¨ä¸èƒ½è¢«ç»§æ‰¿ï¼Œå› æ­¤ä¸èƒ½è¢«é‡å†™ï¼Œä½†å¯ä»¥è¢«é‡è½½ã€‚</p>\n<h4 id=\"é‡è½½ï¼ˆOverloadï¼‰å’Œé‡å†™ï¼ˆOverrideï¼‰çš„åŒºåˆ«ã€‚é‡è½½çš„æ–¹æ³•èƒ½å¦æ ¹æ®è¿”å›ç±»å‹è¿›è¡ŒåŒºåˆ†ï¼Ÿ\"><a href=\"#é‡è½½ï¼ˆOverloadï¼‰å’Œé‡å†™ï¼ˆOverrideï¼‰çš„åŒºåˆ«ã€‚é‡è½½çš„æ–¹æ³•èƒ½å¦æ ¹æ®è¿”å›ç±»å‹è¿›è¡ŒåŒºåˆ†ï¼Ÿ\" class=\"headerlink\" title=\"é‡è½½ï¼ˆOverloadï¼‰å’Œé‡å†™ï¼ˆOverrideï¼‰çš„åŒºåˆ«ã€‚é‡è½½çš„æ–¹æ³•èƒ½å¦æ ¹æ®è¿”å›ç±»å‹è¿›è¡ŒåŒºåˆ†ï¼Ÿ\"></a>é‡è½½ï¼ˆOverloadï¼‰å’Œé‡å†™ï¼ˆOverrideï¼‰çš„åŒºåˆ«ã€‚é‡è½½çš„æ–¹æ³•èƒ½å¦æ ¹æ®è¿”å›ç±»å‹è¿›è¡ŒåŒºåˆ†ï¼Ÿ</h4><p>æ–¹æ³•çš„é‡è½½å’Œé‡å†™éƒ½æ˜¯å®ç°å¤šæ€çš„æ–¹å¼ï¼ŒåŒºåˆ«åœ¨äºé‡è½½å®ç°çš„æ˜¯<strong>ç¼–è¯‘æ—¶çš„å¤šæ€æ€§</strong>ï¼Œè€Œé‡å†™å®ç°çš„æ˜¯<strong>è¿è¡Œæ—¶çš„å¤šæ€æ€§</strong>ã€‚</p>\n<p>é‡è½½ï¼šå‘ç”Ÿåœ¨<strong>åŒä¸€ä¸ªç±»</strong>ä¸­ï¼Œ<strong>æ–¹æ³•åç›¸åŒ å‚æ•°åˆ—è¡¨ä¸åŒ</strong>ï¼ˆå‚æ•°ç±»å‹ä¸åŒã€ä¸ªæ•°ä¸åŒã€é¡ºåºä¸åŒï¼‰ï¼Œä¸æ–¹æ³•è¿”å›å€¼å’Œè®¿é—®ä¿®é¥°ç¬¦æ— å…³</p>\n<p>é‡å†™ï¼šå‘ç”Ÿåœ¨<strong>çˆ¶å­ç±»</strong>ä¸­ï¼Œæ–¹æ³•åã€å‚æ•°åˆ—è¡¨å¿…é¡»ç›¸åŒï¼Œè¿”å›å€¼ç±»å‹å°äºç­‰äºçˆ¶ç±»ï¼ŒæŠ›å‡ºçš„å¼‚å¸¸å°äºç­‰äºçˆ¶ç±»ï¼Œ<strong>è®¿é—®ä¿®é¥°ç¬¦å¤§äºç­‰äºçˆ¶ç±»</strong>ï¼ˆé‡Œæ°ä»£æ¢åŸåˆ™ï¼‰</p>\n<h3 id=\"å¯¹è±¡ç›¸ç­‰åˆ¤æ–­\"><a href=\"#å¯¹è±¡ç›¸ç­‰åˆ¤æ–­\" class=\"headerlink\" title=\"å¯¹è±¡ç›¸ç­‰åˆ¤æ–­\"></a>å¯¹è±¡ç›¸ç­‰åˆ¤æ–­</h3><h4 id=\"x3D-x3D-å’Œ-equals-çš„åŒºåˆ«æ˜¯ä»€ä¹ˆ\"><a href=\"#x3D-x3D-å’Œ-equals-çš„åŒºåˆ«æ˜¯ä»€ä¹ˆ\" class=\"headerlink\" title=\"&#x3D;&#x3D; å’Œ equals çš„åŒºåˆ«æ˜¯ä»€ä¹ˆ\"></a>&#x3D;&#x3D; å’Œ equals çš„åŒºåˆ«æ˜¯ä»€ä¹ˆ</h4><p><strong>&#x3D;&#x3D;</strong> : å®ƒçš„ä½œç”¨æ˜¯åˆ¤æ–­ä¸¤ä¸ªå¯¹è±¡çš„åœ°å€æ˜¯ä¸æ˜¯ç›¸ç­‰ã€‚å³ï¼Œåˆ¤æ–­ä¸¤ä¸ªå¯¹è±¡æ˜¯ä¸æ˜¯åŒä¸€ä¸ªå¯¹è±¡ã€‚<br>(åŸºæœ¬æ•°æ®ç±»å‹ &#x3D;&#x3D; æ¯”è¾ƒçš„æ˜¯å€¼ï¼Œå¼•ç”¨æ•°æ®ç±»å‹ &#x3D;&#x3D; æ¯”è¾ƒçš„æ˜¯å†…å­˜åœ°å€)</p>\n<p><strong>equals()</strong> : å®ƒçš„ä½œç”¨ä¹Ÿæ˜¯åˆ¤æ–­ä¸¤ä¸ªå¯¹è±¡æ˜¯å¦ç›¸ç­‰ã€‚ä½†å®ƒä¸€èˆ¬æœ‰ä¸¤ç§ä½¿ç”¨æƒ…å†µï¼š</p>\n<p>æƒ…å†µ1ï¼šç±»æ²¡æœ‰é‡å†™ equals() æ–¹æ³•ã€‚åˆ™é€šè¿‡ equals() æ¯”è¾ƒè¯¥ç±»çš„ä¸¤ä¸ªå¯¹è±¡æ—¶ï¼Œç­‰ä»·äºé€šè¿‡â€œ&#x3D;&#x3D;â€æ¯”è¾ƒè¿™ä¸¤ä¸ªå¯¹è±¡ã€‚</p>\n<p>æƒ…å†µ2ï¼šç±»é‡å†™äº† equals() æ–¹æ³•ã€‚ä¸€èˆ¬ï¼Œæˆ‘ä»¬éƒ½é‡å†™ equals() æ–¹æ³•æ¥ä¸¤ä¸ªå¯¹è±¡çš„å†…å®¹ç›¸ç­‰ï¼›è‹¥å®ƒä»¬çš„å†…å®¹ç›¸ç­‰ï¼Œåˆ™è¿”å› true (å³ï¼Œè®¤ä¸ºè¿™ä¸¤ä¸ªå¯¹è±¡ç›¸ç­‰)ã€‚</p>\n<h4 id=\"hashCode-ä¸-equals\"><a href=\"#hashCode-ä¸-equals\" class=\"headerlink\" title=\"hashCode ä¸ equals\"></a>hashCode ä¸ equals</h4><p><strong>hashCode()ä»‹ç»</strong></p>\n<p>hashCode() çš„ä½œç”¨æ˜¯è·å–å“ˆå¸Œç ï¼ˆæœ¬åœ°æ–¹æ³•ï¼‰ï¼Œä¹Ÿç§°ä¸ºæ•£åˆ—ç ï¼›å®ƒå®é™…ä¸Šæ˜¯è¿”å›ä¸€ä¸ªintæ•´æ•°ã€‚hashCode() å®šä¹‰åœ¨JDKçš„Objectç±»ä¸­ï¼Œè¿™å°±æ„å‘³ç€Javaä¸­çš„ä»»ä½•ç±»éƒ½æœ‰hashCode()æ–¹æ³•ã€‚</p>\n<p><strong>ä¸ºä»€ä¹ˆè¦æœ‰ hashCode</strong></p>\n<p><strong>æˆ‘ä»¬ä»¥â€œhashSet å¦‚ä½•æ£€æŸ¥é‡å¤â€ä¸ºä¾‹å­æ¥è¯´æ˜ä¸ºä»€ä¹ˆè¦æœ‰ hashCode</strong>ï¼š</p>\n<p>å½“ä½ æŠŠå¯¹è±¡åŠ å…¥ hashSet æ—¶ï¼ŒhashSet ä¼šå…ˆè®¡ç®—å¯¹è±¡çš„ hashcode å€¼æ¥åˆ¤æ–­å¯¹è±¡åŠ å…¥çš„ä½ç½®ï¼Œå¦‚æœæ²¡æœ‰ç›¸ç¬¦çš„hashcodeï¼ŒhashSet ä¼šå‡è®¾å¯¹è±¡æ²¡æœ‰é‡å¤å‡ºç°ã€‚ä½†æ˜¯å¦‚æœå‘ç°æœ‰ç›¸åŒ hashcode å€¼çš„å¯¹è±¡ï¼Œè¿™æ—¶ä¼šè°ƒç”¨ equals()æ–¹æ³•æ¥æ£€æŸ¥ hashcode ç›¸ç­‰çš„å¯¹è±¡æ˜¯å¦çœŸçš„ç›¸åŒã€‚å¦‚æœä¸¤è€…ç›¸åŒï¼Œè¡¨æ˜å·²ç»æœ‰äº†ç›¸åŒçš„å¯¹è±¡äº†ï¼ŒhashSet å°±ä¸ä¼šè®©å…¶åŠ å…¥æ“ä½œæˆåŠŸã€‚å¦‚æœä¸åŒçš„è¯ï¼Œå°±ä¼šé‡æ–°æ•£åˆ—åˆ°å…¶ä»–ä½ç½®ã€‚</p>\n<p><strong>hashCode()ä¸equals()çš„ç›¸å…³è§„å®š</strong></p>\n<ul>\n<li>å¦‚æœä¸¤ä¸ªå¯¹è±¡çš„hashCodeå€¼ç›¸ç­‰ï¼Œé‚£è¿™ä¸¤ä¸ªå¯¹è±¡ä¸ä¸€å®šç›¸ç­‰ï¼ˆå“ˆå¸Œç¢°æ’ï¼‰ã€‚</li>\n<li>å¦‚æœä¸¤ä¸ªå¯¹è±¡çš„hashCodeå€¼ç›¸ç­‰å¹¶ä¸”equals()æ–¹æ³•ä¹Ÿè¿”å› trueï¼Œæˆ‘ä»¬æ‰è®¤ä¸ºè¿™ä¸¤ä¸ªå¯¹è±¡ç›¸ç­‰ã€‚</li>\n<li>å¦‚æœä¸¤ä¸ªå¯¹è±¡çš„hashCodeå€¼ä¸ç›¸ç­‰ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç›´æ¥è®¤ä¸ºè¿™ä¸¤ä¸ªå¯¹è±¡ä¸ç›¸ç­‰ã€‚</li>\n</ul>\n<h4 id=\"åªé‡å†™-hashCode-å¯ä»¥å—ï¼Ÿ\"><a href=\"#åªé‡å†™-hashCode-å¯ä»¥å—ï¼Ÿ\" class=\"headerlink\" title=\"åªé‡å†™ hashCode å¯ä»¥å—ï¼Ÿ\"></a>åªé‡å†™ hashCode å¯ä»¥å—ï¼Ÿ</h4><p>å¦‚æœåªé‡å†™ hashCodeï¼Œä¸é‡å†™ equalsï¼Œé‚£ä¹ˆå¦‚æœä¸¤ä¸ªå¯¹è±¡åˆ¤æ–­ hashCode ç›¸åŒäº†ï¼Œä»¥ä¸ºè¿™ä¿©å¯¹è±¡ç›¸åŒï¼Œé‚£ä¹ˆåªä¼šæ’å…¥ä¸€æ¬¡åˆ° set é‡Œé¢ï¼Œè€Œå®é™…ä¸Šè¿™ä¸¤ä¸ªä¸ä¸€æ ·ä¸€ä¸ªæ˜¯ A ä¸€ä¸ªæ˜¯ Bï¼Œéƒ½éœ€è¦æ’å…¥ã€‚</p>\n<blockquote>\n<p>ä¸¤ä¸ªå¯¹è±¡çš„ hashCode ç›¸åŒï¼Œä½†æ˜¯å†…å®¹å¯èƒ½ä¸åŒï¼Œåœ¨ set ä¸­æ˜æ˜åº”è¯¥æ˜¯ä¸¤ä¸ªä¸åŒçš„å¯¹è±¡ï¼Œè¿™æ—¶å€™åªé€šè¿‡ hashCode åˆ¤æ–­ä»–ä¿©ç›¸åŒä¼šå¯¼è‡´åªæ’å…¥ä¸€ä¸ªå…ƒç´ ã€‚</p>\n</blockquote>\n<h4 id=\"åªé‡å†™-equalså¯ä»¥å—ï¼Ÿ\"><a href=\"#åªé‡å†™-equalså¯ä»¥å—ï¼Ÿ\" class=\"headerlink\" title=\"åªé‡å†™ equalså¯ä»¥å—ï¼Ÿ\"></a>åªé‡å†™ equalså¯ä»¥å—ï¼Ÿ</h4><p>å¦‚æœåœ¨é‡å†™ equals æ—¶ï¼Œä¸é‡å†™ hashCodeï¼Œå°±ä¼šå¼•èµ·æ¯”å¦‚è¯´å°†ä¸¤ä¸ªç›¸ç­‰çš„è‡ªå®šä¹‰å¯¹è±¡å­˜å‚¨åœ¨ Set é›†åˆæ—¶ï¼Œä¼šå°†è¿™ä¸¤ä¸ªå¯¹è±¡éƒ½è¿›è¡Œæ’å…¥ã€‚ï¼ˆæ— æ³•å»é‡ï¼‰</p>\n<blockquote>\n<p>å¦‚æœå®šä¹‰ä¸€ä¸ªseté‡Œé¢å­˜æ”¾Personå¯¹è±¡ï¼ŒPersonåªé‡å†™äº†equalsæ–¹æ³•å³å¯ä»¥åˆ¤æ–­å¯¹è±¡å†…å®¹æ˜¯å¦ç›¸åŒã€‚</p>\n<p>å¦‚æœåªé‡å†™äº† equals æ–¹æ³•ï¼Œé‚£ä¹ˆé»˜è®¤æƒ…å†µä¸‹ï¼ŒSet è¿›è¡Œå»é‡æ“ä½œæ—¶ï¼Œä¼šå…ˆåˆ¤æ–­ä¸¤ä¸ªå¯¹è±¡çš„ hashCode æ˜¯å¦ç›¸åŒï¼Œæ­¤æ—¶å› ä¸ºæ²¡æœ‰é‡å†™ hashCode æ–¹æ³•ï¼Œæ‰€ä»¥ä¼šç›´æ¥æ‰§è¡Œ Object ä¸­çš„ hashCode æ–¹æ³•ï¼Œè€Œ Object ä¸­çš„ hashCode æ–¹æ³•å¯¹æ¯”çš„æ˜¯ä¸¤ä¸ªä¸åŒå¼•ç”¨åœ°å€çš„å¯¹è±¡ï¼Œæ‰€ä»¥ç»“æœæ˜¯ falseï¼Œé‚£ä¹ˆ equals æ–¹æ³•å°±ä¸ç”¨æ‰§è¡Œäº†ï¼Œç›´æ¥è¿”å›çš„ç»“æœå°±æ˜¯ falseï¼šä¸¤ä¸ªå¯¹è±¡ä¸æ˜¯ç›¸ç­‰çš„ï¼Œäºæ˜¯å°±åœ¨ Set é›†åˆä¸­æ’å…¥äº†ä¸¤ä¸ªç›¸åŒçš„å¯¹è±¡ã€‚</p>\n<p>ä½†æ˜¯ï¼Œå¦‚æœåœ¨é‡å†™ equals æ–¹æ³•æ—¶ï¼Œä¹Ÿé‡å†™äº† hashCode æ–¹æ³•ï¼Œé‚£ä¹ˆåœ¨æ‰§è¡Œåˆ¤æ–­æ—¶ä¼šå»æ‰§è¡Œé‡å†™çš„ hashCode æ–¹æ³•ï¼Œæ­¤æ—¶å¯¹æ¯”çš„æ˜¯ä¸¤ä¸ªå¯¹è±¡çš„æ‰€æœ‰å±æ€§çš„ hashCode æ˜¯å¦ç›¸åŒï¼Œäºæ˜¯è°ƒç”¨ hashCode è¿”å›çš„ç»“æœå°±æ˜¯ trueï¼Œå†å»è°ƒç”¨ equals æ–¹æ³•ï¼Œå‘ç°ä¸¤ä¸ªå¯¹è±¡ç¡®å®æ˜¯ç›¸ç­‰çš„ï¼Œäºæ˜¯å°±è¿”å› true äº†ï¼Œå› æ­¤ Set é›†åˆå°±ä¸ä¼šå­˜å‚¨ä¸¤ä¸ªä¸€æ¨¡ä¸€æ ·çš„æ•°æ®äº†ï¼Œäºæ˜¯æ•´ä¸ªç¨‹åºçš„æ‰§è¡Œå°±æ­£å¸¸äº†ã€‚</p>\n</blockquote>\n<h3 id=\"å€¼ä¼ é€’\"><a href=\"#å€¼ä¼ é€’\" class=\"headerlink\" title=\"å€¼ä¼ é€’\"></a>å€¼ä¼ é€’</h3><h4 id=\"ä¸ºä»€ä¹ˆ-Java-ä¸­åªæœ‰å€¼ä¼ é€’\"><a href=\"#ä¸ºä»€ä¹ˆ-Java-ä¸­åªæœ‰å€¼ä¼ é€’\" class=\"headerlink\" title=\"ä¸ºä»€ä¹ˆ Java ä¸­åªæœ‰å€¼ä¼ é€’\"></a>ä¸ºä»€ä¹ˆ Java ä¸­åªæœ‰å€¼ä¼ é€’</h4><p>Javaé‡‡ç”¨æŒ‰å€¼è°ƒç”¨ï¼Œæ–¹æ³•å¾—åˆ°çš„æ˜¯æ‰€æœ‰å‚æ•°å€¼çš„ä¸€ä¸ªæ‹·è´ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ–¹æ³•ä¸èƒ½ä¿®æ”¹ä¼ é€’ç»™å®ƒçš„ä»»ä½•å‚æ•°å˜é‡çš„å†…å®¹ã€‚</p>\n<p>example 1</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> &#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> <span class=\"variable\">num1</span> <span class=\"operator\">=</span> <span class=\"number\">10</span>;</span><br><span class=\"line\">    <span class=\"type\">int</span> <span class=\"variable\">num2</span> <span class=\"operator\">=</span> <span class=\"number\">20</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    swap(num1, num2);</span><br><span class=\"line\"></span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;num1 = &quot;</span> + num1);</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;num2 = &quot;</span> + num2);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">swap</span><span class=\"params\">(<span class=\"type\">int</span> a, <span class=\"type\">int</span> b)</span> &#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> <span class=\"variable\">temp</span> <span class=\"operator\">=</span> a;</span><br><span class=\"line\">    a = b;</span><br><span class=\"line\">    b = temp;</span><br><span class=\"line\"></span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;a = &quot;</span> + a);</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;b = &quot;</span> + b);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><strong>ç»“æœ</strong>ï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">a = <span class=\"number\">20</span></span><br><span class=\"line\">b = <span class=\"number\">10</span></span><br><span class=\"line\">num1 = <span class=\"number\">10</span></span><br><span class=\"line\">num2 = <span class=\"number\">20</span></span><br></pre></td></tr></table></figure>\n\n<p><strong>è§£æ</strong>ï¼š</p>\n<p><img src=\"https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/TyporaNotesaHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy8xNDAyMzk3Mi00ZWQyZjQ0NTlmN2MyYzkwLmpwZw.png\" alt=\"swap(int a, int b)\"></p>\n<p>åœ¨swapæ–¹æ³•ä¸­ï¼Œaã€bçš„å€¼è¿›è¡Œäº¤æ¢ï¼Œå¹¶ä¸ä¼šå½±å“åˆ° num1ã€num2ã€‚å› ä¸ºaã€bä¸­çš„å€¼ï¼Œåªæ˜¯ä» num1ã€num2 çš„å¤åˆ¶è¿‡æ¥çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œaã€bç›¸å½“äºnum1ã€num2 çš„å‰¯æœ¬ï¼Œå‰¯æœ¬çš„å†…å®¹æ— è®ºæ€ä¹ˆä¿®æ”¹ï¼Œéƒ½ä¸ä¼šå½±å“åˆ°åŸä»¶æœ¬èº«ã€‚</p>\n<p><strong>é€šè¿‡ä¸Šé¢ä¾‹å­ï¼Œæˆ‘ä»¬å·²ç»çŸ¥é“äº†ä¸€ä¸ªæ–¹æ³•ä¸èƒ½ä¿®æ”¹ä¸€ä¸ªåŸºæœ¬æ•°æ®ç±»å‹çš„å‚æ•°ï¼Œè€Œå¯¹è±¡å¼•ç”¨ä½œä¸ºå‚æ•°å°±ä¸ä¸€æ ·ï¼Œè¯·çœ‹ example2.</strong></p>\n<p>example 2</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> &#123;</span><br><span class=\"line\">    <span class=\"type\">int</span>[] arr = &#123; <span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>, <span class=\"number\">5</span> &#125;;</span><br><span class=\"line\">    System.out.println(arr[<span class=\"number\">0</span>]);</span><br><span class=\"line\">    change(arr);</span><br><span class=\"line\">    System.out.println(arr[<span class=\"number\">0</span>]);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">change</span><span class=\"params\">(<span class=\"type\">int</span>[] array)</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// å°†æ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ å˜ä¸º0</span></span><br><span class=\"line\">    array[<span class=\"number\">0</span>] = <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><strong>ç»“æœ</strong>ï¼š</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1</span><br><span class=\"line\">0</span><br></pre></td></tr></table></figure>\n\n<p><strong>è§£æ</strong>ï¼š</p>\n<p><img src=\"https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/TyporaNotesaHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy8xNDAyMzk3Mi1kYWI5Mzg5ZWRmMjIxNmIzLmpwZw.png\" alt=\"change(int[] array)\"></p>\n<p>array è¢«åˆå§‹åŒ– arr çš„æ‹·è´ä¹Ÿå°±æ˜¯ä¸€ä¸ªå¯¹è±¡çš„å¼•ç”¨ï¼Œä¹Ÿå°±æ˜¯è¯´ array å’Œ arr æŒ‡å‘çš„æ—¶åŒä¸€ä¸ªæ•°ç»„å¯¹è±¡ã€‚ å› æ­¤ï¼Œå¤–éƒ¨å¯¹å¼•ç”¨å¯¹è±¡çš„æ”¹å˜ä¼šåæ˜ åˆ°æ‰€å¯¹åº”çš„å¯¹è±¡ä¸Šã€‚</p>\n<p><strong>é€šè¿‡ example2 æˆ‘ä»¬å·²ç»çœ‹åˆ°ï¼Œå®ç°ä¸€ä¸ªæ”¹å˜å¯¹è±¡å‚æ•°çŠ¶æ€çš„æ–¹æ³•å¹¶ä¸æ˜¯ä¸€ä»¶éš¾äº‹ã€‚ç†ç”±å¾ˆç®€å•ï¼Œæ–¹æ³•å¾—åˆ°çš„æ˜¯å¯¹è±¡å¼•ç”¨çš„æ‹·è´ï¼Œå¯¹è±¡å¼•ç”¨åŠå…¶ä»–çš„æ‹·è´åŒæ—¶å¼•ç”¨åŒä¸€ä¸ªå¯¹è±¡ã€‚</strong></p>\n<p>example 3</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">Test</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> &#123;</span><br><span class=\"line\">        <span class=\"type\">Student</span> <span class=\"variable\">s1</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Student</span>(<span class=\"string\">&quot;å°å¼ &quot;</span>);</span><br><span class=\"line\">        <span class=\"type\">Student</span> <span class=\"variable\">s2</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Student</span>(<span class=\"string\">&quot;å°æ&quot;</span>);</span><br><span class=\"line\">        Test.swap(s1, s2);</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;s1:&quot;</span> + s1.getName());</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;s2:&quot;</span> + s2.getName());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">swap</span><span class=\"params\">(Student x, Student y)</span> &#123;</span><br><span class=\"line\">        <span class=\"type\">Student</span> <span class=\"variable\">temp</span> <span class=\"operator\">=</span> x;</span><br><span class=\"line\">        x = y;</span><br><span class=\"line\">        y = temp;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;x:&quot;</span> + x.getName());</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;y:&quot;</span> + y.getName());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><strong>ç»“æœ</strong>ï¼š</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">x:å°æ</span><br><span class=\"line\">y:å°å¼ </span><br><span class=\"line\">s1:å°å¼ </span><br><span class=\"line\">s2:å°æ</span><br></pre></td></tr></table></figure>\n\n<p><strong>è§£æ</strong>ï¼š</p>\n<p>äº¤æ¢ä¹‹å‰ï¼š</p>\n<p><img src=\"https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/TyporaNotesaHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy8xNDAyMzk3Mi03MmIwYzFmYjlmM2IwNzc2LmpwZw.png\" alt=\"before swap(Student x, Student y)\"></p>\n<p>äº¤æ¢ä¹‹åï¼š</p>\n<p><img src=\"https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/TyporaNotesaHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy8xNDAyMzk3Mi0zYWUzNzY4NGNiMzg2Njc4LmpwZw.png\" alt=\"after swap(Student x, Student y)\"></p>\n<p>é€šè¿‡ä¸Šé¢ä¸¤å¼ å›¾å¯ä»¥å¾ˆæ¸…æ™°çš„çœ‹å‡ºï¼š <strong>æ–¹æ³•å¹¶æ²¡æœ‰æ”¹å˜å­˜å‚¨åœ¨å˜é‡ s1 å’Œ s2 ä¸­çš„å¯¹è±¡å¼•ç”¨ã€‚swapæ–¹æ³•çš„å‚æ•°xå’Œyè¢«åˆå§‹åŒ–ä¸ºä¸¤ä¸ªå¯¹è±¡å¼•ç”¨çš„æ‹·è´ï¼Œè¿™ä¸ªæ–¹æ³•äº¤æ¢çš„æ˜¯è¿™ä¸¤ä¸ªæ‹·è´</strong></p>\n<h4 id=\"å€¼ä¼ é€’å’Œå¼•ç”¨ä¼ é€’æœ‰ä»€ä¹ˆåŒºåˆ«\"><a href=\"#å€¼ä¼ é€’å’Œå¼•ç”¨ä¼ é€’æœ‰ä»€ä¹ˆåŒºåˆ«\" class=\"headerlink\" title=\"å€¼ä¼ é€’å’Œå¼•ç”¨ä¼ é€’æœ‰ä»€ä¹ˆåŒºåˆ«\"></a>å€¼ä¼ é€’å’Œå¼•ç”¨ä¼ é€’æœ‰ä»€ä¹ˆåŒºåˆ«</h4><p>å€¼ä¼ é€’ï¼šæŒ‡çš„æ˜¯åœ¨æ–¹æ³•è°ƒç”¨æ—¶ï¼Œä¼ é€’çš„å‚æ•°æ˜¯æŒ‰å€¼çš„æ‹·è´ä¼ é€’ï¼Œä¼ é€’çš„æ˜¯å€¼çš„æ‹·è´ï¼Œä¹Ÿå°±æ˜¯è¯´ä¼ é€’åå°±äº’ä¸ç›¸å…³äº†ã€‚</p>\n<p>å¼•ç”¨ä¼ é€’ï¼šæŒ‡çš„æ˜¯åœ¨æ–¹æ³•è°ƒç”¨æ—¶ï¼Œä¼ é€’çš„å‚æ•°æ˜¯æŒ‰å¼•ç”¨è¿›è¡Œä¼ é€’ï¼Œå…¶å®ä¼ é€’çš„å¼•ç”¨çš„åœ°å€ï¼Œä¹Ÿå°±æ˜¯å˜é‡æ‰€å¯¹åº”çš„å†…å­˜ç©ºé—´çš„åœ°å€ã€‚ä¼ é€’çš„æ˜¯å€¼çš„å¼•ç”¨ï¼Œä¹Ÿå°±æ˜¯è¯´ä¼ é€’å‰å’Œä¼ é€’åéƒ½æŒ‡å‘åŒä¸€ä¸ªå¼•ç”¨ï¼ˆä¹Ÿå°±æ˜¯åŒä¸€ä¸ªå†…å­˜ç©ºé—´ï¼‰ã€‚</p>\n<h2 id=\"IOæµ\"><a href=\"#IOæµ\" class=\"headerlink\" title=\"IOæµ\"></a>IOæµ</h2><blockquote>\n<p>å‚è€ƒï¼š<a href=\"https://blog.csdn.net/weixin_44579258/article/details/90758359\">https://blog.csdn.net/weixin_44579258/article/details/90758359</a></p>\n</blockquote>\n<p>é˜»å¡å’Œéé˜»å¡æ˜¯æŒ‡è¿›ç¨‹è®¿é—®çš„æ•°æ®å¦‚æœå°šæœªå‡†å¤‡å°±ç»ªï¼Œè¿›ç¨‹æ˜¯å¦éœ€è¦ç­‰å¾…<br>åŒæ­¥å’Œå¼‚æ­¥æ˜¯æŒ‡è®¿é—®æ•°æ®çš„æœºåˆ¶ï¼ŒåŒæ­¥ä¸€èˆ¬ä¸»åŠ¨è¯·æ±‚ç­‰å¾…IOæ“ä½œå®Œæ¯•çš„æ–¹å¼ã€‚å½“æ•°æ®å°±ç»ªåï¼Œå†è¯»å†™çš„æ—¶å€™å¿…é¡»é˜»å¡ï¼Œå¼‚æ­¥åˆ™ä¸»åŠ¨è¯·æ±‚æ•°æ®åä¾¿å¯ä»¥ç»§ç»­å¤„ç†å…¶ä»–ä»»åŠ¡ï¼Œéšåç­‰å¾…IOå®Œæ¯•é€šçŸ¥ï¼Œè¿™å¯ä»¥ä½¿è¿›ç¨‹åœ¨æ•°æ®è¯»å†™æ—¶ä¹Ÿä¸é˜»å¡</p>\n<p>å‡†å¤‡æ•°æ®ï¼šç½‘å¡ â†’ å†…æ ¸<br>æ•°æ®å°±ç»ªï¼šæ•°æ®æ‹·è´åˆ°äº†å†…æ ¸<br>æ‹·è´æ•°æ®ï¼šå°†å†…æ ¸æ•°æ®æ‹·è´åˆ°ç”¨æˆ·ç©ºé—´</p>\n<h3 id=\"Blocking-I-x2F-O\"><a href=\"#Blocking-I-x2F-O\" class=\"headerlink\" title=\"Blocking I&#x2F;O\"></a>Blocking I&#x2F;O</h3><p><strong>BIO å±äºåŒæ­¥é˜»å¡ IO æ¨¡å‹</strong> ã€‚</p>\n<p>åŒæ­¥é˜»å¡ IO æ¨¡å‹ä¸­ï¼Œåº”ç”¨ç¨‹åº<strong>å‘èµ· read è°ƒç”¨</strong>åï¼Œä¼šä¸€ç›´é˜»å¡ï¼Œç›´åˆ°å†…æ ¸å‡†å¤‡æ•°æ®ã€æ•°æ®å°±ç»ªï¼Œæ•°æ®ä»å†…æ ¸æ‹·è´åˆ°ç”¨æˆ·ç©ºé—´ã€‚</p>\n<p><img src=\"https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/TyporaNotes20190603201109632.png\" alt=\"BIO\"></p>\n<h3 id=\"NIO-Non-blocking-I-x2F-O\"><a href=\"#NIO-Non-blocking-I-x2F-O\" class=\"headerlink\" title=\"NIO (Non-blocking I&#x2F;O)\"></a>NIO (Non-blocking I&#x2F;O)</h3><p>åŒæ­¥éé˜»å¡ IO æ¨¡å‹ä¸­ï¼Œç”¨æˆ·è¿›ç¨‹ä¼š<strong>ä¸€ç›´å‘èµ· read è°ƒç”¨</strong>ï¼ˆå¦‚æœå†…æ ¸è¿”å›erroråˆ™è¯´æ˜æ•°æ®æœªå‡†å¤‡å°±ç»ªï¼‰ï¼Œç›´åˆ°æ•°æ®å‡†å¤‡å°±ç»ªï¼Œç”¨æˆ·å‘èµ· read è°ƒç”¨æ—¶ï¼Œæ•°æ®ä»å†…æ ¸ç©ºé—´æ‹·è´åˆ°ç”¨æˆ·ç©ºé—´ï¼ˆç”¨æˆ·è¿›ç¨‹æ˜¯é˜»å¡çš„ï¼‰ã€‚</p>\n<blockquote>\n<p>ç›¸æ¯”äºåŒæ­¥é˜»å¡ IO æ¨¡å‹ï¼ŒåŒæ­¥éé˜»å¡ IO æ¨¡å‹ç¡®å®æœ‰äº†å¾ˆå¤§æ”¹è¿›ã€‚é€šè¿‡è½®è¯¢æ“ä½œï¼Œé¿å…äº†ä¸€ç›´é˜»å¡ã€‚</p>\n</blockquote>\n<p><img src=\"https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/TyporaNotes20190603201218527.png\" alt=\"NIO\"></p>\n<h3 id=\"IOå¤šè·¯å¤ç”¨ï¼ˆNIOï¼‰\"><a href=\"#IOå¤šè·¯å¤ç”¨ï¼ˆNIOï¼‰\" class=\"headerlink\" title=\"IOå¤šè·¯å¤ç”¨ï¼ˆNIOï¼‰\"></a>IOå¤šè·¯å¤ç”¨ï¼ˆNIOï¼‰</h3><p>select&#x2F;epollçš„å¥½å¤„å°±åœ¨äºå•ä¸ªprocesså°±å¯ä»¥åŒæ—¶å¤„ç†å¤šä¸ªç½‘ç»œè¿æ¥çš„IOã€‚</p>\n<p><img src=\"https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/TyporaNotes2019060320125821.png\" alt=\"NIO\"></p>\n<p>IOå¤ç”¨å’ŒåŒæ­¥é˜»å¡æœ¬è´¨ä¸€æ ·ï¼Œåœ¨NIOä¸­ï¼Œæ¯æ¬¡ç”¨æˆ·è¿›ç¨‹è¿›è¡Œreadè½®è¯¢æ•°æ®æ˜¯å¦å‡†å¤‡å°±ç»ªï¼Œè€Œåœ¨IOå¤šè·¯å¤ç”¨ä¸­ï¼Œåˆ©ç”¨äº†æ–°çš„selectç³»ç»Ÿè°ƒç”¨ï¼Œç”±å†…æ ¸æ¥è´Ÿè´£æœ¬æ¥æ˜¯è¯·æ±‚è¿›ç¨‹è¯¥åšçš„è½®è¯¢æ“ä½œã€‚</p>\n<p>å½“ç”¨æˆ·çº¿ç¨‹è°ƒç”¨selectï¼Œé‚£ä¹ˆæ•´ä¸ªè¿›ç¨‹ä¼šè¢«é˜»å¡ï¼Œè€ŒåŒæ—¶ï¼Œkernelå†…æ ¸ä¼šâ€œç›‘è§†â€æ‰€æœ‰selectè´Ÿè´£çš„socketï¼Œå½“ä»»ä½•ä¸€ä¸ªsocketä¸­çš„æ•°æ®å‡†å¤‡å¥½äº†ï¼Œselectå°±ä¼šè¿”å›å¯è¯»æ¡ä»¶è®©ç”¨æˆ·è¿›ç¨‹å‘èµ·readè°ƒç”¨ï¼Œç”¨æˆ·è¿›ç¨‹å‘èµ·è°ƒç”¨readæ“ä½œï¼Œå°†æ•°æ®ä»å†…æ ¸ç©ºé—´æ‹·è´åˆ°ç”¨æˆ·ç©ºé—´ã€‚</p>\n<h3 id=\"Asynchronous-I-x2F-O\"><a href=\"#Asynchronous-I-x2F-O\" class=\"headerlink\" title=\"Asynchronous I&#x2F;O\"></a>Asynchronous I&#x2F;O</h3><p>å¼‚æ­¥ IO æ˜¯åŸºäºäº‹ä»¶å’Œå›è°ƒæœºåˆ¶å®ç°çš„ï¼Œä¹Ÿå°±æ˜¯åº”ç”¨æ“ä½œä¹‹åä¼šç›´æ¥è¿”å›ï¼Œä¸ä¼šå µå¡åœ¨é‚£é‡Œï¼Œå½“åå°å¤„ç†å®Œæˆï¼Œæ“ä½œç³»ç»Ÿä¼šé€šçŸ¥ç›¸åº”çš„çº¿ç¨‹è¿›è¡Œåç»­çš„æ“ä½œã€‚</p>\n<p>ç”¨æˆ·å‘èµ·readè°ƒç”¨ï¼Œæ­¤æ—¶ç”¨æˆ·è¿›ç¨‹ä¸ä¼šé˜»å¡ã€‚å†…æ ¸å°†æ•°æ®å‡†å¤‡å°±ç»ªå¹¶å°†å…¶ä»å†…æ ¸æ‹·è´åˆ°ç”¨æˆ·ç©ºé—´åï¼Œå†…æ ¸ç»™ç”¨æˆ·è¿›ç¨‹å‘é€ä¸€ä¸ªä¿¡å·ç»™ä¹‹å‰è°ƒç”¨readçš„è¿›ç¨‹ï¼Œæ•°æ®å·²ç»æ‹·è´åˆ°ç”¨æˆ·ç©ºé—´äº†ã€‚</p>\n<p><img src=\"https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/TyporaNotes2019060320135956.png\" alt=\"AIO\"></p>\n<h2 id=\"åå°„\"><a href=\"#åå°„\" class=\"headerlink\" title=\"åå°„\"></a>åå°„</h2><h3 id=\"ä»€ä¹ˆæ˜¯åå°„æœºåˆ¶ï¼Ÿ\"><a href=\"#ä»€ä¹ˆæ˜¯åå°„æœºåˆ¶ï¼Ÿ\" class=\"headerlink\" title=\"ä»€ä¹ˆæ˜¯åå°„æœºåˆ¶ï¼Ÿ\"></a>ä»€ä¹ˆæ˜¯åå°„æœºåˆ¶ï¼Ÿ</h3><p>JAVAåå°„æœºåˆ¶æ˜¯åœ¨è¿è¡ŒçŠ¶æ€ä¸­ï¼Œå¯¹äºä»»æ„ä¸€ä¸ªç±»ï¼Œéƒ½èƒ½å¤ŸçŸ¥é“è¿™ä¸ªç±»çš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•ï¼›å¯¹äºä»»æ„ä¸€ä¸ªå¯¹è±¡ï¼Œéƒ½èƒ½å¤Ÿè°ƒç”¨å®ƒçš„ä»»æ„ä¸€ä¸ªæ–¹æ³•å’Œå±æ€§ï¼›è¿™ç§åŠ¨æ€è·å–çš„ä¿¡æ¯ä»¥åŠåŠ¨æ€è°ƒç”¨å¯¹è±¡çš„æ–¹æ³•çš„åŠŸèƒ½ç§°ä¸ºJavaè¯­è¨€çš„åå°„æœºåˆ¶ã€‚</p>\n<h3 id=\"åå°„æœºåˆ¶ä¼˜ç¼ºç‚¹\"><a href=\"#åå°„æœºåˆ¶ä¼˜ç¼ºç‚¹\" class=\"headerlink\" title=\"åå°„æœºåˆ¶ä¼˜ç¼ºç‚¹\"></a>åå°„æœºåˆ¶ä¼˜ç¼ºç‚¹</h3><ul>\n<li><strong>ä¼˜ç‚¹ï¼š</strong> è¿è¡ŒæœŸç±»å‹çš„åˆ¤æ–­ï¼ŒåŠ¨æ€åŠ è½½ç±»ï¼Œæé«˜ä»£ç çµæ´»åº¦ã€‚</li>\n<li><strong>ç¼ºç‚¹ï¼š</strong> æ€§èƒ½ç“¶é¢ˆï¼šåå°„ç›¸å½“äºä¸€ç³»åˆ—è§£é‡Šæ“ä½œï¼Œé€šçŸ¥ JVM è¦åšçš„äº‹æƒ…ï¼Œæ€§èƒ½æ¯”ç›´æ¥çš„Javaä»£ç è¦æ…¢å¾ˆå¤šã€‚</li>\n</ul>\n<h3 id=\"åå°„æœºåˆ¶çš„åº”ç”¨åœºæ™¯æœ‰å“ªäº›ï¼Ÿ\"><a href=\"#åå°„æœºåˆ¶çš„åº”ç”¨åœºæ™¯æœ‰å“ªäº›ï¼Ÿ\" class=\"headerlink\" title=\"åå°„æœºåˆ¶çš„åº”ç”¨åœºæ™¯æœ‰å“ªäº›ï¼Ÿ\"></a>åå°„æœºåˆ¶çš„åº”ç”¨åœºæ™¯æœ‰å“ªäº›ï¼Ÿ</h3><p>â‘ æˆ‘ä»¬åœ¨ä½¿ç”¨JDBCè¿æ¥æ•°æ®åº“æ—¶ä½¿ç”¨Class.forName()é€šè¿‡åå°„åŠ è½½æ•°æ®åº“çš„é©±åŠ¨ç¨‹åºï¼›</p>\n<p>â‘¡Spring é€šè¿‡ XML é…ç½®æ¨¡å¼è£…è½½ Bean çš„è¿‡ç¨‹</p>\n<ol>\n<li>åŠ è½½é…ç½®æ–‡ä»¶ï¼Œè§£ææˆ BeanDefinition æ”¾åœ¨ Map é‡Œï¼Œmapä¸­å­˜æ”¾<code>&lt;BeanNameï¼ŒClasså¯¹è±¡&gt;</code>çš„æ˜ å°„</li>\n<li>è°ƒç”¨ getBean çš„æ—¶å€™ï¼Œä» BeanDefinition æ‰€å±çš„ Map é‡Œï¼Œæ‹¿å‡º Class å¯¹è±¡ä½¿ç”¨åå°„è¿›è¡Œå®ä¾‹åŒ–ï¼ŒåŒæ—¶ï¼Œå¦‚æœæœ‰ä¾èµ–å…³ç³»ï¼Œå°†é€’å½’è°ƒç”¨ getBean æ–¹æ³• â€”â€” å®Œæˆä¾èµ–æ³¨å…¥</li>\n</ol>\n<h3 id=\"Javaè·å–åå°„çš„ä¸‰ç§æ–¹æ³•\"><a href=\"#Javaè·å–åå°„çš„ä¸‰ç§æ–¹æ³•\" class=\"headerlink\" title=\"Javaè·å–åå°„çš„ä¸‰ç§æ–¹æ³•\"></a>Javaè·å–åå°„çš„ä¸‰ç§æ–¹æ³•</h3><p>1.é€šè¿‡newå¯¹è±¡å®ç°åå°„æœºåˆ¶ 2.é€šè¿‡è·¯å¾„å®ç°åå°„æœºåˆ¶ 3.é€šè¿‡ç±»åå®ç°åå°„æœºåˆ¶</p>\n<h2 id=\"åŒ…è£…ç±»\"><a href=\"#åŒ…è£…ç±»\" class=\"headerlink\" title=\"åŒ…è£…ç±»\"></a>åŒ…è£…ç±»</h2><h4 id=\"è‡ªåŠ¨è£…ç®±ä¸æ‹†ç®±\"><a href=\"#è‡ªåŠ¨è£…ç®±ä¸æ‹†ç®±\" class=\"headerlink\" title=\"è‡ªåŠ¨è£…ç®±ä¸æ‹†ç®±\"></a>è‡ªåŠ¨è£…ç®±ä¸æ‹†ç®±</h4><p><strong>è£…ç®±</strong>ï¼šå°†åŸºæœ¬ç±»å‹ç”¨å®ƒä»¬å¯¹åº”çš„å¼•ç”¨ç±»å‹åŒ…è£…èµ·æ¥ï¼›<code>Integer a = 1;</code></p>\n<p><strong>æ‹†ç®±</strong>ï¼šå°†åŒ…è£…ç±»å‹è½¬æ¢ä¸ºåŸºæœ¬æ•°æ®ç±»å‹ï¼›<code>int b = a;</code></p>\n<h4 id=\"int-å’Œ-Integer-æœ‰ä»€ä¹ˆåŒºåˆ«\"><a href=\"#int-å’Œ-Integer-æœ‰ä»€ä¹ˆåŒºåˆ«\" class=\"headerlink\" title=\"int å’Œ Integer æœ‰ä»€ä¹ˆåŒºåˆ«\"></a>int å’Œ Integer æœ‰ä»€ä¹ˆåŒºåˆ«</h4><p>å¼•å…¥åŒ…è£…ç±»æ˜¯ä¸ºäº†èƒ½å¤Ÿå°†è¿™äº›<strong>åŸºæœ¬æ•°æ®ç±»å‹å½“æˆå¯¹è±¡æ“ä½œ</strong></p>\n<p>Java ä¸ºæ¯ä¸ªåŸå§‹ç±»å‹æä¾›äº†åŒ…è£…ç±»å‹ï¼š</p>\n<p>åŸå§‹ç±»å‹: booleanï¼Œcharï¼Œbyteï¼Œshortï¼Œintï¼Œlongï¼Œfloatï¼Œdouble</p>\n<p>åŒ…è£…ç±»å‹ï¼šBooleanï¼ŒCharacterï¼ŒByteï¼ŒShortï¼ŒIntegerï¼ŒLongï¼ŒFloatï¼ŒDouble</p>\n<h4 id=\"Integer-a-x3D-127-ä¸-Integer-b-x3D-127ç›¸ç­‰å—\"><a href=\"#Integer-a-x3D-127-ä¸-Integer-b-x3D-127ç›¸ç­‰å—\" class=\"headerlink\" title=\"Integer a &#x3D; 127 ä¸ Integer b &#x3D; 127ç›¸ç­‰å—\"></a>Integer a &#x3D; 127 ä¸ Integer b &#x3D; 127ç›¸ç­‰å—</h4><blockquote>\n<p>åŒ…è£…ç±»å’ŒåŸºæœ¬æ•°æ®ç±»å‹æ¯”è¾ƒï¼Œä¼šå°†åŒ…è£…ç±»æ‹†ç®±æˆåŸºæœ¬æ•°æ®ç±»å‹ç„¶åæ¯”è¾ƒï¼Œ</p>\n<p>åªæœ‰å½“åŒ…è£…ç±»æ˜¯è‡ªåŠ¨è£…ç®±ï¼Œå¹¶ä¸”æ•°å€¼èŒƒå›´åœ¨ [-128, 127] æ—¶ï¼Œæ‰ä¼šä½¿ç”¨ cache ä¸­çš„å¯¹è±¡ã€‚</p>\n</blockquote>\n<p>å¯¹äºå¯¹è±¡å¼•ç”¨ç±»å‹ï¼š&#x3D;&#x3D;æ¯”è¾ƒçš„æ˜¯å¯¹è±¡çš„å†…å­˜åœ°å€ã€‚<br>å¯¹äºåŸºæœ¬æ•°æ®ç±»å‹ï¼š&#x3D;&#x3D;æ¯”è¾ƒçš„æ˜¯å€¼ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> &#123;</span><br><span class=\"line\">    <span class=\"type\">Integer</span> <span class=\"variable\">a</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Integer</span>(<span class=\"number\">3</span>);</span><br><span class=\"line\">  \t<span class=\"type\">Integer</span> <span class=\"variable\">b</span> <span class=\"operator\">=</span> <span class=\"number\">3</span>;</span><br><span class=\"line\">    <span class=\"type\">int</span> <span class=\"variable\">c</span> <span class=\"operator\">=</span> <span class=\"number\">3</span>;</span><br><span class=\"line\">    <span class=\"type\">Integer</span> <span class=\"variable\">d</span> <span class=\"operator\">=</span> <span class=\"number\">3</span>;</span><br><span class=\"line\">    System.out.println(a == b); <span class=\"comment\">// falseï¼Œä¸¤ä¸ªå¯¹è±¡æ¯”è¾ƒ</span></span><br><span class=\"line\">    System.out.println(a == c); <span class=\"comment\">// trueï¼Œaè‡ªåŠ¨æ‹†ç®±</span></span><br><span class=\"line\">    System.out.println(b == c); <span class=\"comment\">// trueï¼Œbè‡ªåŠ¨æ‹†ç®±</span></span><br><span class=\"line\">    System.out.println(b == d); <span class=\"comment\">// trueï¼ŒåŒ…è£…ç±»è‡ªåŠ¨è£…ç®±ä¸”æ•°å€¼èŒƒå›´åœ¨cacheèŒƒå›´å†…</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"type\">Integer</span> <span class=\"variable\">a</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Integer</span>(<span class=\"number\">128</span>);</span><br><span class=\"line\">    <span class=\"type\">Integer</span> <span class=\"variable\">b</span> <span class=\"operator\">=</span> <span class=\"number\">128</span>;</span><br><span class=\"line\">    <span class=\"type\">int</span> <span class=\"variable\">c</span> <span class=\"operator\">=</span> <span class=\"number\">128</span>;</span><br><span class=\"line\">    <span class=\"type\">Integer</span> <span class=\"variable\">d</span> <span class=\"operator\">=</span> <span class=\"number\">128</span>;</span><br><span class=\"line\">    System.out.println(a == b); <span class=\"comment\">// falseï¼Œä¸¤ä¸ªå¯¹è±¡æ¯”è¾ƒ</span></span><br><span class=\"line\">    System.out.println(a == c); <span class=\"comment\">// trueï¼Œaè‡ªåŠ¨æ‹†ç®±</span></span><br><span class=\"line\">    System.out.println(b == c); <span class=\"comment\">// trueï¼Œbè‡ªåŠ¨æ‹†ç®±</span></span><br><span class=\"line\">    System.out.println(b == d); <span class=\"comment\">// falseï¼ŒåŒ…è£…ç±»è‡ªåŠ¨è£…ç®±ä½†æ˜¯æ•°å€¼èŒƒå›´ä¸åœ¨cacheèŒƒå›´å†…</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>"},{"title":"Javaå…«è‚¡æ–‡ - Javaå¼‚å¸¸","copyright":true,"mathjax":false,"date":"2023-01-23T02:06:31.000Z","toc":true,"urlname":"java-exception-error","_content":"\n> æ•´ç†çš„Javaå¼‚å¸¸ç›¸å…³çŸ¥è¯†ç‚¹å’Œé¢è¯•é¢˜ï¼Œéƒ¨åˆ†å†…å®¹æ‘˜è‡ªç½‘ç»œï¼Œå¦‚æœ‰ä¾µæƒè¯·è”ç³»æˆ‘ï½\t<!--more-->\n\n## Javaå¼‚å¸¸æ¶æ„\n\n![Javaå¼‚å¸¸æ¶æ„](https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/TyporaNotes20200314173417278.png)\n\n### 1. Throwable\n\nThrowable æ˜¯ Java è¯­è¨€ä¸­æ‰€æœ‰é”™è¯¯ä¸å¼‚å¸¸çš„è¶…ç±»ã€‚\n\nThrowable åŒ…å«ä¸¤ä¸ªå­ç±»ï¼šErrorï¼ˆé”™è¯¯ï¼‰å’Œ Exceptionï¼ˆå¼‚å¸¸ï¼‰ï¼Œå®ƒä»¬é€šå¸¸ç”¨äºæŒ‡ç¤ºå‘ç”Ÿäº†å¼‚å¸¸æƒ…å†µã€‚\n\n### 2. Errorï¼ˆé”™è¯¯ï¼‰\n\nError ç±»åŠå…¶å­ç±»ã€‚ç¨‹åºä¸­æ— æ³•å¤„ç†çš„é”™è¯¯ï¼Œè¡¨ç¤ºè¿è¡Œåº”ç”¨ç¨‹åºä¸­å‡ºç°äº†ä¸¥é‡çš„é”™è¯¯ã€‚\n\néå—æ£€å¼‚å¸¸ï¼Œä¸€èˆ¬è¡¨ç¤ºä»£ç è¿è¡Œæ—¶ JVM å‡ºç°é—®é¢˜ã€‚æ¯”å¦‚ OutOfMemoryErrorï¼šå†…å­˜ä¸è¶³é”™è¯¯ï¼›StackOverflowErrorï¼šæ ˆæº¢å‡ºé”™è¯¯ã€‚æ­¤ç±»é”™è¯¯å‘ç”Ÿæ—¶ï¼ŒJVM å°†ç»ˆæ­¢çº¿ç¨‹ã€‚\n\n### 3. Exceptionï¼ˆå¼‚å¸¸ï¼‰\n\nç¨‹åºæœ¬èº«å¯ä»¥æ•è·å¹¶ä¸”å¯ä»¥å¤„ç†çš„å¼‚å¸¸ã€‚Exception è¿™ç§å¼‚å¸¸åˆåˆ†ä¸ºä¸¤ç±»ï¼šè¿è¡Œæ—¶å¼‚å¸¸å’Œç¼–è¯‘æ—¶å¼‚å¸¸ã€‚\n\n#### è¿è¡Œæ—¶å¼‚å¸¸\n\nException ä¸­ RuntimeException ç±»åŠå…¶å­ç±»ï¼Œè¡¨ç¤º JVM åœ¨è¿è¡ŒæœŸé—´å¯èƒ½å‡ºç°çš„å¼‚å¸¸ã€‚ï¼ˆéå—æ£€å¼‚å¸¸ï¼Œç¼–è¯‘æ—¶ä¸ä¼šæ£€æŸ¥å‡ºå¼‚å¸¸ï¼Œè¿è¡Œæ—¶ä¼šå‘ç”Ÿå¼‚å¸¸ï¼Œéœ€è¦å¯¹å¼‚å¸¸è¿›è¡Œç‰¹æ®Šå¤„ç†ï¼Œå¦åˆ™ä¼šå‘ç”Ÿé€»è¾‘é”™è¯¯ï¼‰\n\n#### ç¼–è¯‘æ—¶å¼‚å¸¸\n\nException ä¸­é™¤ RuntimeException åŠå…¶å­ç±»ä¹‹å¤–çš„å¼‚å¸¸ã€‚ï¼ˆå—æ£€å¼‚å¸¸ï¼Œç¼–è¯‘æ—¶ä¼šæ£€æŸ¥åˆ°è¯¥å¼‚å¸¸ ï¼‰\n\n## Javaå¼‚å¸¸å…³é”®å­—\n\nâ€¢ **try** â€“ ç”¨äºç›‘å¬ã€‚å°†è¦è¢«ç›‘å¬çš„ä»£ï¼ˆå¯èƒ½æŠ›å‡ºå¼‚å¸¸çš„ä»£ç ï¼‰æ”¾åœ¨tryè¯­å¥å—ä¹‹å†…ï¼Œå½“tryè¯­å¥å—å†…å‘ç”Ÿå¼‚å¸¸æ—¶ï¼Œå¼‚å¸¸å°±è¢«æŠ›å‡ºã€‚\nâ€¢ **catch** â€“ ç”¨äºæ•è·å¼‚å¸¸ã€‚catchç”¨æ¥æ•è·tryè¯­å¥å—ä¸­å‘ç”Ÿçš„å¼‚å¸¸ã€‚\nâ€¢ **finally** â€“ finallyè¯­å¥å—æ€»æ˜¯ä¼šè¢«æ‰§è¡Œã€‚å®ƒä¸»è¦ç”¨äºå›æ”¶åœ¨tryå—é‡Œæ‰“å¼€çš„èµ„æº(å¦‚æ•°æ®åº“è¿æ¥ã€ç½‘ç»œè¿æ¥å’Œç£ç›˜æ–‡ä»¶)ã€‚\nâ€¢ **throw** â€“ ç”¨äºæ‰‹åŠ¨æŠ›å‡ºcatchåˆ°çš„å¼‚å¸¸ã€‚\nâ€¢ **throws** â€“ ç”¨åœ¨æ–¹æ³•ç­¾åä¸­ï¼Œç”¨äºå£°æ˜è¯¥æ–¹æ³•å¯èƒ½æŠ›å‡ºçš„å¼‚å¸¸ï¼Œè°ƒç”¨è¯¥æ–¹æ³•çš„æ–¹æ³•éœ€è¦æ³¨æ„catchè¿™ä¸ªå¯èƒ½è·‘å‡ºçš„å¼‚å¸¸ã€‚\n\n## Javaå¼‚å¸¸å¤„ç†\n\n### ç›´æ¥æŠ›å‡ºå¼‚å¸¸\n\né€šå¸¸ï¼Œåº”è¯¥æ•è·é‚£äº›çŸ¥é“å¦‚ä½•å¤„ç†çš„å¼‚å¸¸ï¼Œå°†ä¸çŸ¥é“å¦‚ä½•å¤„ç†çš„å¼‚å¸¸ç»§ç»­ä¼ é€’ä¸‹å»ã€‚ä¼ é€’å¼‚å¸¸å¯ä»¥åœ¨æ–¹æ³•ç­¾åå¤„ä½¿ç”¨ **throws** å…³é”®å­—å£°æ˜å¯èƒ½ä¼šæŠ›å‡ºçš„å¼‚å¸¸ã€‚è°ƒç”¨è¯¥æ–¹æ³•çš„æ–¹æ³•éœ€è¦æ³¨æ„catchè¿™ä¸ªå¯èƒ½è·‘å‡ºçš„å¼‚å¸¸ã€‚\n\n```java\nprivate static void readFile(String filePath) throws IOException {\n    File file = new File(filePath);\n    String result;\n    BufferedReader reader = new BufferedReader(new FileReader(file));\n    while((result = reader.readLine())!=null) {\n        System.out.println(result);\n    }\n    reader.close();\n}\n```\n\n### å°è£…å¼‚å¸¸å†æŠ›å‡º\n\næœ‰æ—¶æˆ‘ä»¬ä¼šä» catch ä¸­æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ï¼Œç›®çš„æ˜¯ä¸ºäº†æ”¹å˜å¼‚å¸¸çš„ç±»å‹ã€‚å¤šç”¨äºåœ¨å¤šç³»ç»Ÿé›†æˆæ—¶ï¼Œå½“æŸä¸ªå­ç³»ç»Ÿæ•…éšœï¼Œå¼‚å¸¸ç±»å‹å¯èƒ½æœ‰å¤šç§ï¼Œå¯ä»¥ç”¨ç»Ÿä¸€çš„å¼‚å¸¸ç±»å‹å‘å¤–æš´éœ²ï¼Œä¸éœ€æš´éœ²å¤ªå¤šå†…éƒ¨å¼‚å¸¸ç»†èŠ‚ã€‚\n\n```java\nprivate static void readFile(String filePath) throws MyException {    \n    try {\n        // code\n    } catch (IOException e) {\n        MyException ex = new MyException(\"read file failed.\");\n        ex.initCause(e);\n        throw ex;\n    }\n}\n```\n\n### æ•è·å¼‚å¸¸\n\nåœ¨ä¸€ä¸ª try-catch è¯­å¥å—ä¸­å¯ä»¥æ•è·å¤šä¸ªå¼‚å¸¸ç±»å‹ï¼Œå¹¶å¯¹ä¸åŒç±»å‹çš„å¼‚å¸¸åšå‡ºä¸åŒçš„å¤„ç†\n\n```java\nprivate static void readFile(String filePath) {\n    try {\n        // code\n    } catch (FileNotFoundException e) {\n        // handle FileNotFoundException\n    } catch (IOException e){\n        // handle IOException\n    }\n}\n```\n\nåŒä¸€ä¸ª catch ä¹Ÿå¯ä»¥æ•è·å¤šç§ç±»å‹å¼‚å¸¸ï¼Œç”¨ | éš”å¼€\n\n```java\nprivate static void readFile(String filePath) {\n    try {\n        // code\n    } catch (FileNotFoundException | UnknownHostException e) {\n        // handle FileNotFoundException or UnknownHostException\n    } catch (IOException e){\n        // handle IOException\n    }\n}\n```\n\n### è‡ªå®šä¹‰å¼‚å¸¸\n\nä¹ æƒ¯ä¸Šï¼Œå®šä¹‰ä¸€ä¸ªå¼‚å¸¸ç±»åº”åŒ…å«ä¸¤ä¸ªæ„é€ å‡½æ•°ï¼Œä¸€ä¸ªæ— å‚æ„é€ å‡½æ•°å’Œä¸€ä¸ªå¸¦æœ‰è¯¦ç»†æè¿°ä¿¡æ¯çš„æ„é€ å‡½æ•°ï¼ˆThrowable çš„ toString æ–¹æ³•ä¼šæ‰“å°è¿™äº›è¯¦ç»†ä¿¡æ¯ï¼Œè°ƒè¯•æ—¶å¾ˆæœ‰ç”¨ï¼‰\n\n```java\npublic class MyException extends Exception {\n    public MyException(){ }\n    public MyException(String msg){\n        super(msg);\n    }\n    // ...\n}\n```\n\n## Javaå¼‚å¸¸å¸¸è§é¢è¯•é¢˜\n\n### 1. Error å’Œ Exception åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ\n\nError ç±»å‹çš„é”™è¯¯é€šå¸¸ä¸ºè™šæ‹Ÿæœºç›¸å…³é”™è¯¯ï¼Œå¦‚ç³»ç»Ÿå´©æºƒï¼Œå†…å­˜ä¸è¶³ï¼Œå †æ ˆæº¢å‡ºç­‰ï¼Œç¼–è¯‘å™¨ä¸ä¼šå¯¹è¿™ç±»é”™è¯¯è¿›è¡Œæ£€æµ‹ï¼ŒJava åº”ç”¨ç¨‹åºä¹Ÿä¸åº”å¯¹è¿™ç±»é”™è¯¯è¿›è¡Œæ•è·ï¼Œä¸€æ—¦è¿™ç±»é”™è¯¯å‘ç”Ÿï¼Œé€šå¸¸åº”ç”¨ç¨‹åºä¼šè¢«ç»ˆæ­¢ï¼Œä»…é åº”ç”¨ç¨‹åºæœ¬èº«æ— æ³•æ¢å¤ï¼›\n\nException ç±»çš„é”™è¯¯æ˜¯å¯ä»¥åœ¨åº”ç”¨ç¨‹åºä¸­è¿›è¡Œæ•è·å¹¶å¤„ç†çš„ï¼Œé€šå¸¸é‡åˆ°è¿™ç§é”™è¯¯ï¼Œåº”å¯¹å…¶è¿›è¡Œå¤„ç†ï¼Œä½¿åº”ç”¨ç¨‹åºå¯ä»¥ç»§ç»­æ­£å¸¸è¿è¡Œã€‚\n\n### 2. è¿è¡Œæ—¶å¼‚å¸¸å’Œä¸€èˆ¬å¼‚å¸¸(å—æ£€å¼‚å¸¸)åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ\n\nè¿è¡Œæ—¶å¼‚å¸¸åŒ…æ‹¬ RuntimeException ç±»åŠå…¶å­ç±»ï¼Œè¡¨ç¤º JVM åœ¨è¿è¡ŒæœŸé—´å¯èƒ½å‡ºç°çš„å¼‚å¸¸ã€‚ Java ç¼–è¯‘å™¨ä¸ä¼šæ£€æŸ¥è¿è¡Œæ—¶å¼‚å¸¸ã€‚\n\nå—æ£€å¼‚å¸¸æ˜¯Exception ä¸­é™¤ RuntimeException åŠå…¶å­ç±»ä¹‹å¤–çš„å¼‚å¸¸ã€‚ Java ç¼–è¯‘å™¨ä¼šæ£€æŸ¥å—æ£€å¼‚å¸¸ã€‚\n\n**RuntimeExceptionå¼‚å¸¸å’Œå—æ£€å¼‚å¸¸ä¹‹é—´çš„åŒºåˆ«**ï¼šæ˜¯å¦å¼ºåˆ¶è¦æ±‚è°ƒç”¨è€…å¿…é¡»å¤„ç†æ­¤å¼‚å¸¸ï¼Œå¦‚æœå¼ºåˆ¶è¦æ±‚è°ƒç”¨è€…å¿…é¡»è¿›è¡Œå¤„ç†ï¼Œé‚£ä¹ˆå°±ä½¿ç”¨å—æ£€å¼‚å¸¸ï¼Œå¦åˆ™å°±é€‰æ‹©éå—æ£€å¼‚å¸¸(RuntimeException)ã€‚ä¸€èˆ¬æ¥è®²ï¼Œå¦‚æœæ²¡æœ‰ç‰¹æ®Šçš„è¦æ±‚ï¼Œæˆ‘ä»¬å»ºè®®ä½¿ç”¨RuntimeExceptionå¼‚å¸¸ã€‚\n\n### 3. JVM æ˜¯å¦‚ä½•å¤„ç†å¼‚å¸¸çš„ï¼Ÿ\n\nåœ¨ä¸€ä¸ªæ–¹æ³•ä¸­å¦‚æœå‘ç”Ÿå¼‚å¸¸ï¼Œè¿™ä¸ªæ–¹æ³•ä¼šåˆ›å»ºä¸€ä¸ªå¼‚å¸¸å¯¹è±¡ï¼Œå¹¶è½¬äº¤ç»™ JVMï¼Œè¯¥å¼‚å¸¸å¯¹è±¡åŒ…å«å¼‚å¸¸åç§°ï¼Œå¼‚å¸¸æè¿°ä»¥åŠå¼‚å¸¸å‘ç”Ÿæ—¶åº”ç”¨ç¨‹åºçš„çŠ¶æ€ã€‚åˆ›å»ºå¼‚å¸¸å¯¹è±¡å¹¶è½¬äº¤ç»™ JVM çš„è¿‡ç¨‹ç§°ä¸ºæŠ›å‡ºå¼‚å¸¸ã€‚å¯èƒ½æœ‰ä¸€ç³»åˆ—çš„æ–¹æ³•è°ƒç”¨ï¼Œæœ€ç»ˆæ‰è¿›å…¥æŠ›å‡ºå¼‚å¸¸çš„æ–¹æ³•ï¼Œè¿™ä¸€ç³»åˆ—æ–¹æ³•è°ƒç”¨çš„æœ‰åºåˆ—è¡¨å«åšè°ƒç”¨æ ˆã€‚\n\nJVM ä¼šé¡ºç€è°ƒç”¨æ ˆå»æŸ¥æ‰¾çœ‹æ˜¯å¦æœ‰å¯ä»¥å¤„ç†å¼‚å¸¸çš„ä»£ç ï¼Œå¦‚æœæœ‰ï¼Œåˆ™è°ƒç”¨å¼‚å¸¸å¤„ç†ä»£ç ã€‚å½“ JVM å‘ç°å¯ä»¥å¤„ç†å¼‚å¸¸çš„ä»£ç æ—¶ï¼Œä¼šæŠŠå‘ç”Ÿçš„å¼‚å¸¸ä¼ é€’ç»™å®ƒã€‚å¦‚æœ JVM æ²¡æœ‰æ‰¾åˆ°å¯ä»¥å¤„ç†è¯¥å¼‚å¸¸çš„ä»£ç å—ï¼ŒJVM å°±ä¼šå°†è¯¥å¼‚å¸¸è½¬äº¤ç»™é»˜è®¤çš„å¼‚å¸¸å¤„ç†å™¨ï¼ˆé»˜è®¤å¤„ç†å™¨ä¸º JVM çš„ä¸€éƒ¨åˆ†ï¼‰ï¼Œé»˜è®¤å¼‚å¸¸å¤„ç†å™¨æ‰“å°å‡ºå¼‚å¸¸ä¿¡æ¯å¹¶ç»ˆæ­¢åº”ç”¨ç¨‹åºã€‚\n\n### 4. throw å’Œ throws çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ\n\nJava ä¸­çš„å¼‚å¸¸å¤„ç†é™¤äº†åŒ…æ‹¬æ•è·å¼‚å¸¸å’Œå¤„ç†å¼‚å¸¸ä¹‹å¤–ï¼Œè¿˜åŒ…æ‹¬å£°æ˜å¼‚å¸¸å’Œæ‹‹å‡ºå¼‚å¸¸ï¼Œå¯ä»¥é€šè¿‡ throws å…³é”®å­—åœ¨æ–¹æ³•ä¸Šå£°æ˜è¯¥æ–¹æ³•è¦æ‹‹å‡ºçš„å¼‚å¸¸ï¼Œæˆ–è€…åœ¨æ–¹æ³•å†…éƒ¨é€šè¿‡ throw æ‹‹å‡ºå¼‚å¸¸å¯¹è±¡ã€‚\n\n**throws å…³é”®å­—å’Œ throw å…³é”®å­—åœ¨ä½¿ç”¨ä¸Šçš„å‡ ç‚¹åŒºåˆ«å¦‚ä¸‹**ï¼š\n\n- throw å…³é”®å­—ç”¨åœ¨æ–¹æ³•å†…éƒ¨ï¼Œåªèƒ½ç”¨äºæŠ›å‡ºä¸€ç§å¼‚å¸¸ï¼Œç”¨æ¥æŠ›å‡ºæ–¹æ³•æˆ–ä»£ç å—ä¸­çš„å¼‚å¸¸ï¼Œå—æŸ¥å¼‚å¸¸å’Œéå—æŸ¥å¼‚å¸¸éƒ½å¯ä»¥è¢«æŠ›å‡ºã€‚\n- throws å…³é”®å­—ç”¨åœ¨æ–¹æ³•å£°æ˜ä¸Šï¼Œå¯ä»¥æŠ›å‡ºå¤šä¸ªå¼‚å¸¸ï¼Œç”¨æ¥æ ‡è¯†è¯¥æ–¹æ³•å¯èƒ½æŠ›å‡ºçš„å¼‚å¸¸åˆ—è¡¨ã€‚ä¸€ä¸ªæ–¹æ³•ç”¨ throws æ ‡è¯†äº†å¯èƒ½æŠ›å‡ºçš„å¼‚å¸¸åˆ—è¡¨ï¼Œè°ƒç”¨è¯¥æ–¹æ³•çš„æ–¹æ³•ä¸­å¿…é¡»åŒ…å«å¯å¤„ç†å¼‚å¸¸çš„ä»£ç ï¼Œå¦åˆ™ä¹Ÿè¦åœ¨æ–¹æ³•ç­¾åä¸­ç”¨ throws å…³é”®å­—å£°æ˜ç›¸åº”çš„å¼‚å¸¸ã€‚\n\n### 5. try-catch-finally ä¸­ï¼Œå¦‚æœ catch ä¸­ return äº†ï¼Œfinally è¿˜ä¼šæ‰§è¡Œå—ï¼Ÿ\n\n**ç­”ï¼šä¼šæ‰§è¡Œï¼Œåœ¨ return å‰æ‰§è¡Œã€‚**\n\n**ä»£ç ç¤ºä¾‹1ï¼š**\n\n```java\npublic static int getInt() {\n    int a = 10;\n    try {\n        System.out.println(a / 0);\n        a = 20;\n    } catch (ArithmeticException e) {\n        a = 30;\n        return a;\t// ä¸ä¼šç›´æ¥returnï¼Œå…ˆæ‰§è¡Œfinallyï¼Œfinallyæ‰§è¡Œè¿‡åå›æ¥æ‰§è¡Œreturn a\n    } finally {\n        a = 40;\n    }\n\treturn a;\n}\n```\n\næ‰§è¡Œç»“æœï¼š30\n\n**ä»£ç ç¤ºä¾‹2ï¼š**\n\n```java\npublic static int getInt() {\n    int a = 10;\n    try {\n        System.out.println(a / 0);\n        a = 20;\n    } catch (ArithmeticException e) {\n        a = 30;\n        return a;\t// ä¸ä¼šç›´æ¥returnï¼Œå…ˆæ‰§è¡Œfinally\n    } finally {\n        a = 40;\n        return a;\t// finallyä¸­æœ‰returnå°±ç›´æ¥returnäº†\n    }\n}\n```\n\næ‰§è¡Œç»“æœï¼š40\n\n### 6. ç±» ExampleA ç»§æ‰¿ Exceptionï¼Œç±» ExampleB ç»§æ‰¿ExampleAã€‚\n\n```java\npublic class ExceptionA extends Exception {\n    public ExceptionA(String message) {\n        super(message);\n    }\n}\npublic class ExceptionB extends ExceptionA {\n    public ExceptionB(String message) {\n        super(message);\n    }\n}\n\ntry {\n  throw new ExceptionB(\"a\");\n} catch (ExceptionA ea) {\n  System.out.println(\"ExceptionA\");\n} catch (Exception e) {\n  System.out.println(\"Exception\");\n}\n```\n\nè¾“å‡ºï¼šExampleAã€‚ï¼ˆæ ¹æ®é‡Œæ°ä»£æ¢åŸåˆ™[èƒ½ä½¿ç”¨çˆ¶ç±»å‹çš„åœ°æ–¹ä¸€å®šèƒ½ä½¿ç”¨å­ç±»å‹]ï¼ŒæŠ“å– ExceptionA ç±»å‹å¼‚å¸¸çš„ catch å—èƒ½å¤ŸæŠ“ä½ try å—ä¸­æŠ›å‡ºçš„ ExceptionB ç±»å‹çš„å¼‚å¸¸ï¼‰\n\n```java\ntry {\n  throw new ExceptionB(\"b\");\n} catch (Exception e) {\n  System.out.println(\"Exception: \" + e);\n}\n```\n\nè¾“å‡ºï¼šException: com.yaxing.demo.exceptiondemo.ExceptionB: bï¼Œä»ä¼šä½¿ç”¨å­ç±»å‹ã€‚\n\né¢è¯•é¢˜ - è¯´å‡ºä¸‹é¢ä»£ç çš„è¿è¡Œç»“æœã€‚ï¼ˆæ­¤é¢˜çš„å‡ºå¤„æ˜¯ã€ŠJava ç¼–ç¨‹æ€æƒ³ã€‹ä¸€ä¹¦ï¼‰\n\n```java\nclass Annoyance extends Exception {\n}\nclass Sneeze extends Annoyance {\n}\nclass Human {\n\tpublic static void main(String[] args) throws Exception {\n\t\ttry {\n\t\t\ttry {\n\t\t\t\tthrow new Sneeze();\n\t\t\t} catch ( Annoyance a ) {\n\t\t\t\tSystem.out.println(\"Caught Annoyance\");\n\t\t\t\tthrow a;\n\t\t\t}\n\t\t} catch ( Sneeze s ) {\n\t\t\tSystem.out.println(\"Caught Sneeze\");\n\t\t\treturn ;\n\t\t} finally {\n\t\t\tSystem.out.println(\"Hello World!\");\n\t\t}\n\t}\n}\n```\n\nç»“æœ\n\n```java\nCaught Annoyance\nCaught Sneeze\nHello World!\n```\n\n","source":"_posts/Javaå…«è‚¡æ–‡ - Javaå¼‚å¸¸.md","raw":"---\ntitle: Javaå…«è‚¡æ–‡ - Javaå¼‚å¸¸\ncopyright: true\nmathjax: false\ncategories:\n  - Javaå…«è‚¡æ–‡\ndate: 2023-01-23 10:06:31\ntags:\ntoc: true\nurlname: java-exception-error\n---\n\n> æ•´ç†çš„Javaå¼‚å¸¸ç›¸å…³çŸ¥è¯†ç‚¹å’Œé¢è¯•é¢˜ï¼Œéƒ¨åˆ†å†…å®¹æ‘˜è‡ªç½‘ç»œï¼Œå¦‚æœ‰ä¾µæƒè¯·è”ç³»æˆ‘ï½\t<!--more-->\n\n## Javaå¼‚å¸¸æ¶æ„\n\n![Javaå¼‚å¸¸æ¶æ„](https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/TyporaNotes20200314173417278.png)\n\n### 1. Throwable\n\nThrowable æ˜¯ Java è¯­è¨€ä¸­æ‰€æœ‰é”™è¯¯ä¸å¼‚å¸¸çš„è¶…ç±»ã€‚\n\nThrowable åŒ…å«ä¸¤ä¸ªå­ç±»ï¼šErrorï¼ˆé”™è¯¯ï¼‰å’Œ Exceptionï¼ˆå¼‚å¸¸ï¼‰ï¼Œå®ƒä»¬é€šå¸¸ç”¨äºæŒ‡ç¤ºå‘ç”Ÿäº†å¼‚å¸¸æƒ…å†µã€‚\n\n### 2. Errorï¼ˆé”™è¯¯ï¼‰\n\nError ç±»åŠå…¶å­ç±»ã€‚ç¨‹åºä¸­æ— æ³•å¤„ç†çš„é”™è¯¯ï¼Œè¡¨ç¤ºè¿è¡Œåº”ç”¨ç¨‹åºä¸­å‡ºç°äº†ä¸¥é‡çš„é”™è¯¯ã€‚\n\néå—æ£€å¼‚å¸¸ï¼Œä¸€èˆ¬è¡¨ç¤ºä»£ç è¿è¡Œæ—¶ JVM å‡ºç°é—®é¢˜ã€‚æ¯”å¦‚ OutOfMemoryErrorï¼šå†…å­˜ä¸è¶³é”™è¯¯ï¼›StackOverflowErrorï¼šæ ˆæº¢å‡ºé”™è¯¯ã€‚æ­¤ç±»é”™è¯¯å‘ç”Ÿæ—¶ï¼ŒJVM å°†ç»ˆæ­¢çº¿ç¨‹ã€‚\n\n### 3. Exceptionï¼ˆå¼‚å¸¸ï¼‰\n\nç¨‹åºæœ¬èº«å¯ä»¥æ•è·å¹¶ä¸”å¯ä»¥å¤„ç†çš„å¼‚å¸¸ã€‚Exception è¿™ç§å¼‚å¸¸åˆåˆ†ä¸ºä¸¤ç±»ï¼šè¿è¡Œæ—¶å¼‚å¸¸å’Œç¼–è¯‘æ—¶å¼‚å¸¸ã€‚\n\n#### è¿è¡Œæ—¶å¼‚å¸¸\n\nException ä¸­ RuntimeException ç±»åŠå…¶å­ç±»ï¼Œè¡¨ç¤º JVM åœ¨è¿è¡ŒæœŸé—´å¯èƒ½å‡ºç°çš„å¼‚å¸¸ã€‚ï¼ˆéå—æ£€å¼‚å¸¸ï¼Œç¼–è¯‘æ—¶ä¸ä¼šæ£€æŸ¥å‡ºå¼‚å¸¸ï¼Œè¿è¡Œæ—¶ä¼šå‘ç”Ÿå¼‚å¸¸ï¼Œéœ€è¦å¯¹å¼‚å¸¸è¿›è¡Œç‰¹æ®Šå¤„ç†ï¼Œå¦åˆ™ä¼šå‘ç”Ÿé€»è¾‘é”™è¯¯ï¼‰\n\n#### ç¼–è¯‘æ—¶å¼‚å¸¸\n\nException ä¸­é™¤ RuntimeException åŠå…¶å­ç±»ä¹‹å¤–çš„å¼‚å¸¸ã€‚ï¼ˆå—æ£€å¼‚å¸¸ï¼Œç¼–è¯‘æ—¶ä¼šæ£€æŸ¥åˆ°è¯¥å¼‚å¸¸ ï¼‰\n\n## Javaå¼‚å¸¸å…³é”®å­—\n\nâ€¢ **try** â€“ ç”¨äºç›‘å¬ã€‚å°†è¦è¢«ç›‘å¬çš„ä»£ï¼ˆå¯èƒ½æŠ›å‡ºå¼‚å¸¸çš„ä»£ç ï¼‰æ”¾åœ¨tryè¯­å¥å—ä¹‹å†…ï¼Œå½“tryè¯­å¥å—å†…å‘ç”Ÿå¼‚å¸¸æ—¶ï¼Œå¼‚å¸¸å°±è¢«æŠ›å‡ºã€‚\nâ€¢ **catch** â€“ ç”¨äºæ•è·å¼‚å¸¸ã€‚catchç”¨æ¥æ•è·tryè¯­å¥å—ä¸­å‘ç”Ÿçš„å¼‚å¸¸ã€‚\nâ€¢ **finally** â€“ finallyè¯­å¥å—æ€»æ˜¯ä¼šè¢«æ‰§è¡Œã€‚å®ƒä¸»è¦ç”¨äºå›æ”¶åœ¨tryå—é‡Œæ‰“å¼€çš„èµ„æº(å¦‚æ•°æ®åº“è¿æ¥ã€ç½‘ç»œè¿æ¥å’Œç£ç›˜æ–‡ä»¶)ã€‚\nâ€¢ **throw** â€“ ç”¨äºæ‰‹åŠ¨æŠ›å‡ºcatchåˆ°çš„å¼‚å¸¸ã€‚\nâ€¢ **throws** â€“ ç”¨åœ¨æ–¹æ³•ç­¾åä¸­ï¼Œç”¨äºå£°æ˜è¯¥æ–¹æ³•å¯èƒ½æŠ›å‡ºçš„å¼‚å¸¸ï¼Œè°ƒç”¨è¯¥æ–¹æ³•çš„æ–¹æ³•éœ€è¦æ³¨æ„catchè¿™ä¸ªå¯èƒ½è·‘å‡ºçš„å¼‚å¸¸ã€‚\n\n## Javaå¼‚å¸¸å¤„ç†\n\n### ç›´æ¥æŠ›å‡ºå¼‚å¸¸\n\né€šå¸¸ï¼Œåº”è¯¥æ•è·é‚£äº›çŸ¥é“å¦‚ä½•å¤„ç†çš„å¼‚å¸¸ï¼Œå°†ä¸çŸ¥é“å¦‚ä½•å¤„ç†çš„å¼‚å¸¸ç»§ç»­ä¼ é€’ä¸‹å»ã€‚ä¼ é€’å¼‚å¸¸å¯ä»¥åœ¨æ–¹æ³•ç­¾åå¤„ä½¿ç”¨ **throws** å…³é”®å­—å£°æ˜å¯èƒ½ä¼šæŠ›å‡ºçš„å¼‚å¸¸ã€‚è°ƒç”¨è¯¥æ–¹æ³•çš„æ–¹æ³•éœ€è¦æ³¨æ„catchè¿™ä¸ªå¯èƒ½è·‘å‡ºçš„å¼‚å¸¸ã€‚\n\n```java\nprivate static void readFile(String filePath) throws IOException {\n    File file = new File(filePath);\n    String result;\n    BufferedReader reader = new BufferedReader(new FileReader(file));\n    while((result = reader.readLine())!=null) {\n        System.out.println(result);\n    }\n    reader.close();\n}\n```\n\n### å°è£…å¼‚å¸¸å†æŠ›å‡º\n\næœ‰æ—¶æˆ‘ä»¬ä¼šä» catch ä¸­æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ï¼Œç›®çš„æ˜¯ä¸ºäº†æ”¹å˜å¼‚å¸¸çš„ç±»å‹ã€‚å¤šç”¨äºåœ¨å¤šç³»ç»Ÿé›†æˆæ—¶ï¼Œå½“æŸä¸ªå­ç³»ç»Ÿæ•…éšœï¼Œå¼‚å¸¸ç±»å‹å¯èƒ½æœ‰å¤šç§ï¼Œå¯ä»¥ç”¨ç»Ÿä¸€çš„å¼‚å¸¸ç±»å‹å‘å¤–æš´éœ²ï¼Œä¸éœ€æš´éœ²å¤ªå¤šå†…éƒ¨å¼‚å¸¸ç»†èŠ‚ã€‚\n\n```java\nprivate static void readFile(String filePath) throws MyException {    \n    try {\n        // code\n    } catch (IOException e) {\n        MyException ex = new MyException(\"read file failed.\");\n        ex.initCause(e);\n        throw ex;\n    }\n}\n```\n\n### æ•è·å¼‚å¸¸\n\nåœ¨ä¸€ä¸ª try-catch è¯­å¥å—ä¸­å¯ä»¥æ•è·å¤šä¸ªå¼‚å¸¸ç±»å‹ï¼Œå¹¶å¯¹ä¸åŒç±»å‹çš„å¼‚å¸¸åšå‡ºä¸åŒçš„å¤„ç†\n\n```java\nprivate static void readFile(String filePath) {\n    try {\n        // code\n    } catch (FileNotFoundException e) {\n        // handle FileNotFoundException\n    } catch (IOException e){\n        // handle IOException\n    }\n}\n```\n\nåŒä¸€ä¸ª catch ä¹Ÿå¯ä»¥æ•è·å¤šç§ç±»å‹å¼‚å¸¸ï¼Œç”¨ | éš”å¼€\n\n```java\nprivate static void readFile(String filePath) {\n    try {\n        // code\n    } catch (FileNotFoundException | UnknownHostException e) {\n        // handle FileNotFoundException or UnknownHostException\n    } catch (IOException e){\n        // handle IOException\n    }\n}\n```\n\n### è‡ªå®šä¹‰å¼‚å¸¸\n\nä¹ æƒ¯ä¸Šï¼Œå®šä¹‰ä¸€ä¸ªå¼‚å¸¸ç±»åº”åŒ…å«ä¸¤ä¸ªæ„é€ å‡½æ•°ï¼Œä¸€ä¸ªæ— å‚æ„é€ å‡½æ•°å’Œä¸€ä¸ªå¸¦æœ‰è¯¦ç»†æè¿°ä¿¡æ¯çš„æ„é€ å‡½æ•°ï¼ˆThrowable çš„ toString æ–¹æ³•ä¼šæ‰“å°è¿™äº›è¯¦ç»†ä¿¡æ¯ï¼Œè°ƒè¯•æ—¶å¾ˆæœ‰ç”¨ï¼‰\n\n```java\npublic class MyException extends Exception {\n    public MyException(){ }\n    public MyException(String msg){\n        super(msg);\n    }\n    // ...\n}\n```\n\n## Javaå¼‚å¸¸å¸¸è§é¢è¯•é¢˜\n\n### 1. Error å’Œ Exception åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ\n\nError ç±»å‹çš„é”™è¯¯é€šå¸¸ä¸ºè™šæ‹Ÿæœºç›¸å…³é”™è¯¯ï¼Œå¦‚ç³»ç»Ÿå´©æºƒï¼Œå†…å­˜ä¸è¶³ï¼Œå †æ ˆæº¢å‡ºç­‰ï¼Œç¼–è¯‘å™¨ä¸ä¼šå¯¹è¿™ç±»é”™è¯¯è¿›è¡Œæ£€æµ‹ï¼ŒJava åº”ç”¨ç¨‹åºä¹Ÿä¸åº”å¯¹è¿™ç±»é”™è¯¯è¿›è¡Œæ•è·ï¼Œä¸€æ—¦è¿™ç±»é”™è¯¯å‘ç”Ÿï¼Œé€šå¸¸åº”ç”¨ç¨‹åºä¼šè¢«ç»ˆæ­¢ï¼Œä»…é åº”ç”¨ç¨‹åºæœ¬èº«æ— æ³•æ¢å¤ï¼›\n\nException ç±»çš„é”™è¯¯æ˜¯å¯ä»¥åœ¨åº”ç”¨ç¨‹åºä¸­è¿›è¡Œæ•è·å¹¶å¤„ç†çš„ï¼Œé€šå¸¸é‡åˆ°è¿™ç§é”™è¯¯ï¼Œåº”å¯¹å…¶è¿›è¡Œå¤„ç†ï¼Œä½¿åº”ç”¨ç¨‹åºå¯ä»¥ç»§ç»­æ­£å¸¸è¿è¡Œã€‚\n\n### 2. è¿è¡Œæ—¶å¼‚å¸¸å’Œä¸€èˆ¬å¼‚å¸¸(å—æ£€å¼‚å¸¸)åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ\n\nè¿è¡Œæ—¶å¼‚å¸¸åŒ…æ‹¬ RuntimeException ç±»åŠå…¶å­ç±»ï¼Œè¡¨ç¤º JVM åœ¨è¿è¡ŒæœŸé—´å¯èƒ½å‡ºç°çš„å¼‚å¸¸ã€‚ Java ç¼–è¯‘å™¨ä¸ä¼šæ£€æŸ¥è¿è¡Œæ—¶å¼‚å¸¸ã€‚\n\nå—æ£€å¼‚å¸¸æ˜¯Exception ä¸­é™¤ RuntimeException åŠå…¶å­ç±»ä¹‹å¤–çš„å¼‚å¸¸ã€‚ Java ç¼–è¯‘å™¨ä¼šæ£€æŸ¥å—æ£€å¼‚å¸¸ã€‚\n\n**RuntimeExceptionå¼‚å¸¸å’Œå—æ£€å¼‚å¸¸ä¹‹é—´çš„åŒºåˆ«**ï¼šæ˜¯å¦å¼ºåˆ¶è¦æ±‚è°ƒç”¨è€…å¿…é¡»å¤„ç†æ­¤å¼‚å¸¸ï¼Œå¦‚æœå¼ºåˆ¶è¦æ±‚è°ƒç”¨è€…å¿…é¡»è¿›è¡Œå¤„ç†ï¼Œé‚£ä¹ˆå°±ä½¿ç”¨å—æ£€å¼‚å¸¸ï¼Œå¦åˆ™å°±é€‰æ‹©éå—æ£€å¼‚å¸¸(RuntimeException)ã€‚ä¸€èˆ¬æ¥è®²ï¼Œå¦‚æœæ²¡æœ‰ç‰¹æ®Šçš„è¦æ±‚ï¼Œæˆ‘ä»¬å»ºè®®ä½¿ç”¨RuntimeExceptionå¼‚å¸¸ã€‚\n\n### 3. JVM æ˜¯å¦‚ä½•å¤„ç†å¼‚å¸¸çš„ï¼Ÿ\n\nåœ¨ä¸€ä¸ªæ–¹æ³•ä¸­å¦‚æœå‘ç”Ÿå¼‚å¸¸ï¼Œè¿™ä¸ªæ–¹æ³•ä¼šåˆ›å»ºä¸€ä¸ªå¼‚å¸¸å¯¹è±¡ï¼Œå¹¶è½¬äº¤ç»™ JVMï¼Œè¯¥å¼‚å¸¸å¯¹è±¡åŒ…å«å¼‚å¸¸åç§°ï¼Œå¼‚å¸¸æè¿°ä»¥åŠå¼‚å¸¸å‘ç”Ÿæ—¶åº”ç”¨ç¨‹åºçš„çŠ¶æ€ã€‚åˆ›å»ºå¼‚å¸¸å¯¹è±¡å¹¶è½¬äº¤ç»™ JVM çš„è¿‡ç¨‹ç§°ä¸ºæŠ›å‡ºå¼‚å¸¸ã€‚å¯èƒ½æœ‰ä¸€ç³»åˆ—çš„æ–¹æ³•è°ƒç”¨ï¼Œæœ€ç»ˆæ‰è¿›å…¥æŠ›å‡ºå¼‚å¸¸çš„æ–¹æ³•ï¼Œè¿™ä¸€ç³»åˆ—æ–¹æ³•è°ƒç”¨çš„æœ‰åºåˆ—è¡¨å«åšè°ƒç”¨æ ˆã€‚\n\nJVM ä¼šé¡ºç€è°ƒç”¨æ ˆå»æŸ¥æ‰¾çœ‹æ˜¯å¦æœ‰å¯ä»¥å¤„ç†å¼‚å¸¸çš„ä»£ç ï¼Œå¦‚æœæœ‰ï¼Œåˆ™è°ƒç”¨å¼‚å¸¸å¤„ç†ä»£ç ã€‚å½“ JVM å‘ç°å¯ä»¥å¤„ç†å¼‚å¸¸çš„ä»£ç æ—¶ï¼Œä¼šæŠŠå‘ç”Ÿçš„å¼‚å¸¸ä¼ é€’ç»™å®ƒã€‚å¦‚æœ JVM æ²¡æœ‰æ‰¾åˆ°å¯ä»¥å¤„ç†è¯¥å¼‚å¸¸çš„ä»£ç å—ï¼ŒJVM å°±ä¼šå°†è¯¥å¼‚å¸¸è½¬äº¤ç»™é»˜è®¤çš„å¼‚å¸¸å¤„ç†å™¨ï¼ˆé»˜è®¤å¤„ç†å™¨ä¸º JVM çš„ä¸€éƒ¨åˆ†ï¼‰ï¼Œé»˜è®¤å¼‚å¸¸å¤„ç†å™¨æ‰“å°å‡ºå¼‚å¸¸ä¿¡æ¯å¹¶ç»ˆæ­¢åº”ç”¨ç¨‹åºã€‚\n\n### 4. throw å’Œ throws çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ\n\nJava ä¸­çš„å¼‚å¸¸å¤„ç†é™¤äº†åŒ…æ‹¬æ•è·å¼‚å¸¸å’Œå¤„ç†å¼‚å¸¸ä¹‹å¤–ï¼Œè¿˜åŒ…æ‹¬å£°æ˜å¼‚å¸¸å’Œæ‹‹å‡ºå¼‚å¸¸ï¼Œå¯ä»¥é€šè¿‡ throws å…³é”®å­—åœ¨æ–¹æ³•ä¸Šå£°æ˜è¯¥æ–¹æ³•è¦æ‹‹å‡ºçš„å¼‚å¸¸ï¼Œæˆ–è€…åœ¨æ–¹æ³•å†…éƒ¨é€šè¿‡ throw æ‹‹å‡ºå¼‚å¸¸å¯¹è±¡ã€‚\n\n**throws å…³é”®å­—å’Œ throw å…³é”®å­—åœ¨ä½¿ç”¨ä¸Šçš„å‡ ç‚¹åŒºåˆ«å¦‚ä¸‹**ï¼š\n\n- throw å…³é”®å­—ç”¨åœ¨æ–¹æ³•å†…éƒ¨ï¼Œåªèƒ½ç”¨äºæŠ›å‡ºä¸€ç§å¼‚å¸¸ï¼Œç”¨æ¥æŠ›å‡ºæ–¹æ³•æˆ–ä»£ç å—ä¸­çš„å¼‚å¸¸ï¼Œå—æŸ¥å¼‚å¸¸å’Œéå—æŸ¥å¼‚å¸¸éƒ½å¯ä»¥è¢«æŠ›å‡ºã€‚\n- throws å…³é”®å­—ç”¨åœ¨æ–¹æ³•å£°æ˜ä¸Šï¼Œå¯ä»¥æŠ›å‡ºå¤šä¸ªå¼‚å¸¸ï¼Œç”¨æ¥æ ‡è¯†è¯¥æ–¹æ³•å¯èƒ½æŠ›å‡ºçš„å¼‚å¸¸åˆ—è¡¨ã€‚ä¸€ä¸ªæ–¹æ³•ç”¨ throws æ ‡è¯†äº†å¯èƒ½æŠ›å‡ºçš„å¼‚å¸¸åˆ—è¡¨ï¼Œè°ƒç”¨è¯¥æ–¹æ³•çš„æ–¹æ³•ä¸­å¿…é¡»åŒ…å«å¯å¤„ç†å¼‚å¸¸çš„ä»£ç ï¼Œå¦åˆ™ä¹Ÿè¦åœ¨æ–¹æ³•ç­¾åä¸­ç”¨ throws å…³é”®å­—å£°æ˜ç›¸åº”çš„å¼‚å¸¸ã€‚\n\n### 5. try-catch-finally ä¸­ï¼Œå¦‚æœ catch ä¸­ return äº†ï¼Œfinally è¿˜ä¼šæ‰§è¡Œå—ï¼Ÿ\n\n**ç­”ï¼šä¼šæ‰§è¡Œï¼Œåœ¨ return å‰æ‰§è¡Œã€‚**\n\n**ä»£ç ç¤ºä¾‹1ï¼š**\n\n```java\npublic static int getInt() {\n    int a = 10;\n    try {\n        System.out.println(a / 0);\n        a = 20;\n    } catch (ArithmeticException e) {\n        a = 30;\n        return a;\t// ä¸ä¼šç›´æ¥returnï¼Œå…ˆæ‰§è¡Œfinallyï¼Œfinallyæ‰§è¡Œè¿‡åå›æ¥æ‰§è¡Œreturn a\n    } finally {\n        a = 40;\n    }\n\treturn a;\n}\n```\n\næ‰§è¡Œç»“æœï¼š30\n\n**ä»£ç ç¤ºä¾‹2ï¼š**\n\n```java\npublic static int getInt() {\n    int a = 10;\n    try {\n        System.out.println(a / 0);\n        a = 20;\n    } catch (ArithmeticException e) {\n        a = 30;\n        return a;\t// ä¸ä¼šç›´æ¥returnï¼Œå…ˆæ‰§è¡Œfinally\n    } finally {\n        a = 40;\n        return a;\t// finallyä¸­æœ‰returnå°±ç›´æ¥returnäº†\n    }\n}\n```\n\næ‰§è¡Œç»“æœï¼š40\n\n### 6. ç±» ExampleA ç»§æ‰¿ Exceptionï¼Œç±» ExampleB ç»§æ‰¿ExampleAã€‚\n\n```java\npublic class ExceptionA extends Exception {\n    public ExceptionA(String message) {\n        super(message);\n    }\n}\npublic class ExceptionB extends ExceptionA {\n    public ExceptionB(String message) {\n        super(message);\n    }\n}\n\ntry {\n  throw new ExceptionB(\"a\");\n} catch (ExceptionA ea) {\n  System.out.println(\"ExceptionA\");\n} catch (Exception e) {\n  System.out.println(\"Exception\");\n}\n```\n\nè¾“å‡ºï¼šExampleAã€‚ï¼ˆæ ¹æ®é‡Œæ°ä»£æ¢åŸåˆ™[èƒ½ä½¿ç”¨çˆ¶ç±»å‹çš„åœ°æ–¹ä¸€å®šèƒ½ä½¿ç”¨å­ç±»å‹]ï¼ŒæŠ“å– ExceptionA ç±»å‹å¼‚å¸¸çš„ catch å—èƒ½å¤ŸæŠ“ä½ try å—ä¸­æŠ›å‡ºçš„ ExceptionB ç±»å‹çš„å¼‚å¸¸ï¼‰\n\n```java\ntry {\n  throw new ExceptionB(\"b\");\n} catch (Exception e) {\n  System.out.println(\"Exception: \" + e);\n}\n```\n\nè¾“å‡ºï¼šException: com.yaxing.demo.exceptiondemo.ExceptionB: bï¼Œä»ä¼šä½¿ç”¨å­ç±»å‹ã€‚\n\né¢è¯•é¢˜ - è¯´å‡ºä¸‹é¢ä»£ç çš„è¿è¡Œç»“æœã€‚ï¼ˆæ­¤é¢˜çš„å‡ºå¤„æ˜¯ã€ŠJava ç¼–ç¨‹æ€æƒ³ã€‹ä¸€ä¹¦ï¼‰\n\n```java\nclass Annoyance extends Exception {\n}\nclass Sneeze extends Annoyance {\n}\nclass Human {\n\tpublic static void main(String[] args) throws Exception {\n\t\ttry {\n\t\t\ttry {\n\t\t\t\tthrow new Sneeze();\n\t\t\t} catch ( Annoyance a ) {\n\t\t\t\tSystem.out.println(\"Caught Annoyance\");\n\t\t\t\tthrow a;\n\t\t\t}\n\t\t} catch ( Sneeze s ) {\n\t\t\tSystem.out.println(\"Caught Sneeze\");\n\t\t\treturn ;\n\t\t} finally {\n\t\t\tSystem.out.println(\"Hello World!\");\n\t\t}\n\t}\n}\n```\n\nç»“æœ\n\n```java\nCaught Annoyance\nCaught Sneeze\nHello World!\n```\n\n","slug":"Javaå…«è‚¡æ–‡ - Javaå¼‚å¸¸","published":1,"updated":"2023-01-23T08:46:28.846Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cld8kfsis0008zvt89obi96oc","content":"<blockquote>\n<p>æ•´ç†çš„Javaå¼‚å¸¸ç›¸å…³çŸ¥è¯†ç‚¹å’Œé¢è¯•é¢˜ï¼Œéƒ¨åˆ†å†…å®¹æ‘˜è‡ªç½‘ç»œï¼Œå¦‚æœ‰ä¾µæƒè¯·è”ç³»æˆ‘ï½\t<span id=\"more\"></span></p>\n</blockquote>\n<h2 id=\"Javaå¼‚å¸¸æ¶æ„\"><a href=\"#Javaå¼‚å¸¸æ¶æ„\" class=\"headerlink\" title=\"Javaå¼‚å¸¸æ¶æ„\"></a>Javaå¼‚å¸¸æ¶æ„</h2><p><img src=\"https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/TyporaNotes20200314173417278.png\" alt=\"Javaå¼‚å¸¸æ¶æ„\"></p>\n<h3 id=\"1-Throwable\"><a href=\"#1-Throwable\" class=\"headerlink\" title=\"1. Throwable\"></a>1. Throwable</h3><p>Throwable æ˜¯ Java è¯­è¨€ä¸­æ‰€æœ‰é”™è¯¯ä¸å¼‚å¸¸çš„è¶…ç±»ã€‚</p>\n<p>Throwable åŒ…å«ä¸¤ä¸ªå­ç±»ï¼šErrorï¼ˆé”™è¯¯ï¼‰å’Œ Exceptionï¼ˆå¼‚å¸¸ï¼‰ï¼Œå®ƒä»¬é€šå¸¸ç”¨äºæŒ‡ç¤ºå‘ç”Ÿäº†å¼‚å¸¸æƒ…å†µã€‚</p>\n<h3 id=\"2-Errorï¼ˆé”™è¯¯ï¼‰\"><a href=\"#2-Errorï¼ˆé”™è¯¯ï¼‰\" class=\"headerlink\" title=\"2. Errorï¼ˆé”™è¯¯ï¼‰\"></a>2. Errorï¼ˆé”™è¯¯ï¼‰</h3><p>Error ç±»åŠå…¶å­ç±»ã€‚ç¨‹åºä¸­æ— æ³•å¤„ç†çš„é”™è¯¯ï¼Œè¡¨ç¤ºè¿è¡Œåº”ç”¨ç¨‹åºä¸­å‡ºç°äº†ä¸¥é‡çš„é”™è¯¯ã€‚</p>\n<p>éå—æ£€å¼‚å¸¸ï¼Œä¸€èˆ¬è¡¨ç¤ºä»£ç è¿è¡Œæ—¶ JVM å‡ºç°é—®é¢˜ã€‚æ¯”å¦‚ OutOfMemoryErrorï¼šå†…å­˜ä¸è¶³é”™è¯¯ï¼›StackOverflowErrorï¼šæ ˆæº¢å‡ºé”™è¯¯ã€‚æ­¤ç±»é”™è¯¯å‘ç”Ÿæ—¶ï¼ŒJVM å°†ç»ˆæ­¢çº¿ç¨‹ã€‚</p>\n<h3 id=\"3-Exceptionï¼ˆå¼‚å¸¸ï¼‰\"><a href=\"#3-Exceptionï¼ˆå¼‚å¸¸ï¼‰\" class=\"headerlink\" title=\"3. Exceptionï¼ˆå¼‚å¸¸ï¼‰\"></a>3. Exceptionï¼ˆå¼‚å¸¸ï¼‰</h3><p>ç¨‹åºæœ¬èº«å¯ä»¥æ•è·å¹¶ä¸”å¯ä»¥å¤„ç†çš„å¼‚å¸¸ã€‚Exception è¿™ç§å¼‚å¸¸åˆåˆ†ä¸ºä¸¤ç±»ï¼šè¿è¡Œæ—¶å¼‚å¸¸å’Œç¼–è¯‘æ—¶å¼‚å¸¸ã€‚</p>\n<h4 id=\"è¿è¡Œæ—¶å¼‚å¸¸\"><a href=\"#è¿è¡Œæ—¶å¼‚å¸¸\" class=\"headerlink\" title=\"è¿è¡Œæ—¶å¼‚å¸¸\"></a>è¿è¡Œæ—¶å¼‚å¸¸</h4><p>Exception ä¸­ RuntimeException ç±»åŠå…¶å­ç±»ï¼Œè¡¨ç¤º JVM åœ¨è¿è¡ŒæœŸé—´å¯èƒ½å‡ºç°çš„å¼‚å¸¸ã€‚ï¼ˆéå—æ£€å¼‚å¸¸ï¼Œç¼–è¯‘æ—¶ä¸ä¼šæ£€æŸ¥å‡ºå¼‚å¸¸ï¼Œè¿è¡Œæ—¶ä¼šå‘ç”Ÿå¼‚å¸¸ï¼Œéœ€è¦å¯¹å¼‚å¸¸è¿›è¡Œç‰¹æ®Šå¤„ç†ï¼Œå¦åˆ™ä¼šå‘ç”Ÿé€»è¾‘é”™è¯¯ï¼‰</p>\n<h4 id=\"ç¼–è¯‘æ—¶å¼‚å¸¸\"><a href=\"#ç¼–è¯‘æ—¶å¼‚å¸¸\" class=\"headerlink\" title=\"ç¼–è¯‘æ—¶å¼‚å¸¸\"></a>ç¼–è¯‘æ—¶å¼‚å¸¸</h4><p>Exception ä¸­é™¤ RuntimeException åŠå…¶å­ç±»ä¹‹å¤–çš„å¼‚å¸¸ã€‚ï¼ˆå—æ£€å¼‚å¸¸ï¼Œç¼–è¯‘æ—¶ä¼šæ£€æŸ¥åˆ°è¯¥å¼‚å¸¸ ï¼‰</p>\n<h2 id=\"Javaå¼‚å¸¸å…³é”®å­—\"><a href=\"#Javaå¼‚å¸¸å…³é”®å­—\" class=\"headerlink\" title=\"Javaå¼‚å¸¸å…³é”®å­—\"></a>Javaå¼‚å¸¸å…³é”®å­—</h2><p>â€¢ <strong>try</strong> â€“ ç”¨äºç›‘å¬ã€‚å°†è¦è¢«ç›‘å¬çš„ä»£ï¼ˆå¯èƒ½æŠ›å‡ºå¼‚å¸¸çš„ä»£ç ï¼‰æ”¾åœ¨tryè¯­å¥å—ä¹‹å†…ï¼Œå½“tryè¯­å¥å—å†…å‘ç”Ÿå¼‚å¸¸æ—¶ï¼Œå¼‚å¸¸å°±è¢«æŠ›å‡ºã€‚<br>â€¢ <strong>catch</strong> â€“ ç”¨äºæ•è·å¼‚å¸¸ã€‚catchç”¨æ¥æ•è·tryè¯­å¥å—ä¸­å‘ç”Ÿçš„å¼‚å¸¸ã€‚<br>â€¢ <strong>finally</strong> â€“ finallyè¯­å¥å—æ€»æ˜¯ä¼šè¢«æ‰§è¡Œã€‚å®ƒä¸»è¦ç”¨äºå›æ”¶åœ¨tryå—é‡Œæ‰“å¼€çš„èµ„æº(å¦‚æ•°æ®åº“è¿æ¥ã€ç½‘ç»œè¿æ¥å’Œç£ç›˜æ–‡ä»¶)ã€‚<br>â€¢ <strong>throw</strong> â€“ ç”¨äºæ‰‹åŠ¨æŠ›å‡ºcatchåˆ°çš„å¼‚å¸¸ã€‚<br>â€¢ <strong>throws</strong> â€“ ç”¨åœ¨æ–¹æ³•ç­¾åä¸­ï¼Œç”¨äºå£°æ˜è¯¥æ–¹æ³•å¯èƒ½æŠ›å‡ºçš„å¼‚å¸¸ï¼Œè°ƒç”¨è¯¥æ–¹æ³•çš„æ–¹æ³•éœ€è¦æ³¨æ„catchè¿™ä¸ªå¯èƒ½è·‘å‡ºçš„å¼‚å¸¸ã€‚</p>\n<h2 id=\"Javaå¼‚å¸¸å¤„ç†\"><a href=\"#Javaå¼‚å¸¸å¤„ç†\" class=\"headerlink\" title=\"Javaå¼‚å¸¸å¤„ç†\"></a>Javaå¼‚å¸¸å¤„ç†</h2><h3 id=\"ç›´æ¥æŠ›å‡ºå¼‚å¸¸\"><a href=\"#ç›´æ¥æŠ›å‡ºå¼‚å¸¸\" class=\"headerlink\" title=\"ç›´æ¥æŠ›å‡ºå¼‚å¸¸\"></a>ç›´æ¥æŠ›å‡ºå¼‚å¸¸</h3><p>é€šå¸¸ï¼Œåº”è¯¥æ•è·é‚£äº›çŸ¥é“å¦‚ä½•å¤„ç†çš„å¼‚å¸¸ï¼Œå°†ä¸çŸ¥é“å¦‚ä½•å¤„ç†çš„å¼‚å¸¸ç»§ç»­ä¼ é€’ä¸‹å»ã€‚ä¼ é€’å¼‚å¸¸å¯ä»¥åœ¨æ–¹æ³•ç­¾åå¤„ä½¿ç”¨ <strong>throws</strong> å…³é”®å­—å£°æ˜å¯èƒ½ä¼šæŠ›å‡ºçš„å¼‚å¸¸ã€‚è°ƒç”¨è¯¥æ–¹æ³•çš„æ–¹æ³•éœ€è¦æ³¨æ„catchè¿™ä¸ªå¯èƒ½è·‘å‡ºçš„å¼‚å¸¸ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">readFile</span><span class=\"params\">(String filePath)</span> <span class=\"keyword\">throws</span> IOException &#123;</span><br><span class=\"line\">    <span class=\"type\">File</span> <span class=\"variable\">file</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">File</span>(filePath);</span><br><span class=\"line\">    String result;</span><br><span class=\"line\">    <span class=\"type\">BufferedReader</span> <span class=\"variable\">reader</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">BufferedReader</span>(<span class=\"keyword\">new</span> <span class=\"title class_\">FileReader</span>(file));</span><br><span class=\"line\">    <span class=\"keyword\">while</span>((result = reader.readLine())!=<span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">        System.out.println(result);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    reader.close();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"å°è£…å¼‚å¸¸å†æŠ›å‡º\"><a href=\"#å°è£…å¼‚å¸¸å†æŠ›å‡º\" class=\"headerlink\" title=\"å°è£…å¼‚å¸¸å†æŠ›å‡º\"></a>å°è£…å¼‚å¸¸å†æŠ›å‡º</h3><p>æœ‰æ—¶æˆ‘ä»¬ä¼šä» catch ä¸­æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ï¼Œç›®çš„æ˜¯ä¸ºäº†æ”¹å˜å¼‚å¸¸çš„ç±»å‹ã€‚å¤šç”¨äºåœ¨å¤šç³»ç»Ÿé›†æˆæ—¶ï¼Œå½“æŸä¸ªå­ç³»ç»Ÿæ•…éšœï¼Œå¼‚å¸¸ç±»å‹å¯èƒ½æœ‰å¤šç§ï¼Œå¯ä»¥ç”¨ç»Ÿä¸€çš„å¼‚å¸¸ç±»å‹å‘å¤–æš´éœ²ï¼Œä¸éœ€æš´éœ²å¤ªå¤šå†…éƒ¨å¼‚å¸¸ç»†èŠ‚ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">readFile</span><span class=\"params\">(String filePath)</span> <span class=\"keyword\">throws</span> MyException &#123;    </span><br><span class=\"line\">    <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// code</span></span><br><span class=\"line\">    &#125; <span class=\"keyword\">catch</span> (IOException e) &#123;</span><br><span class=\"line\">        <span class=\"type\">MyException</span> <span class=\"variable\">ex</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">MyException</span>(<span class=\"string\">&quot;read file failed.&quot;</span>);</span><br><span class=\"line\">        ex.initCause(e);</span><br><span class=\"line\">        <span class=\"keyword\">throw</span> ex;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"æ•è·å¼‚å¸¸\"><a href=\"#æ•è·å¼‚å¸¸\" class=\"headerlink\" title=\"æ•è·å¼‚å¸¸\"></a>æ•è·å¼‚å¸¸</h3><p>åœ¨ä¸€ä¸ª try-catch è¯­å¥å—ä¸­å¯ä»¥æ•è·å¤šä¸ªå¼‚å¸¸ç±»å‹ï¼Œå¹¶å¯¹ä¸åŒç±»å‹çš„å¼‚å¸¸åšå‡ºä¸åŒçš„å¤„ç†</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">readFile</span><span class=\"params\">(String filePath)</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// code</span></span><br><span class=\"line\">    &#125; <span class=\"keyword\">catch</span> (FileNotFoundException e) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// handle FileNotFoundException</span></span><br><span class=\"line\">    &#125; <span class=\"keyword\">catch</span> (IOException e)&#123;</span><br><span class=\"line\">        <span class=\"comment\">// handle IOException</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>åŒä¸€ä¸ª catch ä¹Ÿå¯ä»¥æ•è·å¤šç§ç±»å‹å¼‚å¸¸ï¼Œç”¨ | éš”å¼€</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">readFile</span><span class=\"params\">(String filePath)</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// code</span></span><br><span class=\"line\">    &#125; <span class=\"keyword\">catch</span> (FileNotFoundException | UnknownHostException e) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// handle FileNotFoundException or UnknownHostException</span></span><br><span class=\"line\">    &#125; <span class=\"keyword\">catch</span> (IOException e)&#123;</span><br><span class=\"line\">        <span class=\"comment\">// handle IOException</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"è‡ªå®šä¹‰å¼‚å¸¸\"><a href=\"#è‡ªå®šä¹‰å¼‚å¸¸\" class=\"headerlink\" title=\"è‡ªå®šä¹‰å¼‚å¸¸\"></a>è‡ªå®šä¹‰å¼‚å¸¸</h3><p>ä¹ æƒ¯ä¸Šï¼Œå®šä¹‰ä¸€ä¸ªå¼‚å¸¸ç±»åº”åŒ…å«ä¸¤ä¸ªæ„é€ å‡½æ•°ï¼Œä¸€ä¸ªæ— å‚æ„é€ å‡½æ•°å’Œä¸€ä¸ªå¸¦æœ‰è¯¦ç»†æè¿°ä¿¡æ¯çš„æ„é€ å‡½æ•°ï¼ˆThrowable çš„ toString æ–¹æ³•ä¼šæ‰“å°è¿™äº›è¯¦ç»†ä¿¡æ¯ï¼Œè°ƒè¯•æ—¶å¾ˆæœ‰ç”¨ï¼‰</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">MyException</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">Exception</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"title function_\">MyException</span><span class=\"params\">()</span>&#123; &#125;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"title function_\">MyException</span><span class=\"params\">(String msg)</span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">super</span>(msg);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// ...</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Javaå¼‚å¸¸å¸¸è§é¢è¯•é¢˜\"><a href=\"#Javaå¼‚å¸¸å¸¸è§é¢è¯•é¢˜\" class=\"headerlink\" title=\"Javaå¼‚å¸¸å¸¸è§é¢è¯•é¢˜\"></a>Javaå¼‚å¸¸å¸¸è§é¢è¯•é¢˜</h2><h3 id=\"1-Error-å’Œ-Exception-åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ\"><a href=\"#1-Error-å’Œ-Exception-åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ\" class=\"headerlink\" title=\"1. Error å’Œ Exception åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ\"></a>1. Error å’Œ Exception åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</h3><p>Error ç±»å‹çš„é”™è¯¯é€šå¸¸ä¸ºè™šæ‹Ÿæœºç›¸å…³é”™è¯¯ï¼Œå¦‚ç³»ç»Ÿå´©æºƒï¼Œå†…å­˜ä¸è¶³ï¼Œå †æ ˆæº¢å‡ºç­‰ï¼Œç¼–è¯‘å™¨ä¸ä¼šå¯¹è¿™ç±»é”™è¯¯è¿›è¡Œæ£€æµ‹ï¼ŒJava åº”ç”¨ç¨‹åºä¹Ÿä¸åº”å¯¹è¿™ç±»é”™è¯¯è¿›è¡Œæ•è·ï¼Œä¸€æ—¦è¿™ç±»é”™è¯¯å‘ç”Ÿï¼Œé€šå¸¸åº”ç”¨ç¨‹åºä¼šè¢«ç»ˆæ­¢ï¼Œä»…é åº”ç”¨ç¨‹åºæœ¬èº«æ— æ³•æ¢å¤ï¼›</p>\n<p>Exception ç±»çš„é”™è¯¯æ˜¯å¯ä»¥åœ¨åº”ç”¨ç¨‹åºä¸­è¿›è¡Œæ•è·å¹¶å¤„ç†çš„ï¼Œé€šå¸¸é‡åˆ°è¿™ç§é”™è¯¯ï¼Œåº”å¯¹å…¶è¿›è¡Œå¤„ç†ï¼Œä½¿åº”ç”¨ç¨‹åºå¯ä»¥ç»§ç»­æ­£å¸¸è¿è¡Œã€‚</p>\n<h3 id=\"2-è¿è¡Œæ—¶å¼‚å¸¸å’Œä¸€èˆ¬å¼‚å¸¸-å—æ£€å¼‚å¸¸-åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ\"><a href=\"#2-è¿è¡Œæ—¶å¼‚å¸¸å’Œä¸€èˆ¬å¼‚å¸¸-å—æ£€å¼‚å¸¸-åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ\" class=\"headerlink\" title=\"2. è¿è¡Œæ—¶å¼‚å¸¸å’Œä¸€èˆ¬å¼‚å¸¸(å—æ£€å¼‚å¸¸)åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ\"></a>2. è¿è¡Œæ—¶å¼‚å¸¸å’Œä¸€èˆ¬å¼‚å¸¸(å—æ£€å¼‚å¸¸)åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</h3><p>è¿è¡Œæ—¶å¼‚å¸¸åŒ…æ‹¬ RuntimeException ç±»åŠå…¶å­ç±»ï¼Œè¡¨ç¤º JVM åœ¨è¿è¡ŒæœŸé—´å¯èƒ½å‡ºç°çš„å¼‚å¸¸ã€‚ Java ç¼–è¯‘å™¨ä¸ä¼šæ£€æŸ¥è¿è¡Œæ—¶å¼‚å¸¸ã€‚</p>\n<p>å—æ£€å¼‚å¸¸æ˜¯Exception ä¸­é™¤ RuntimeException åŠå…¶å­ç±»ä¹‹å¤–çš„å¼‚å¸¸ã€‚ Java ç¼–è¯‘å™¨ä¼šæ£€æŸ¥å—æ£€å¼‚å¸¸ã€‚</p>\n<p><strong>RuntimeExceptionå¼‚å¸¸å’Œå—æ£€å¼‚å¸¸ä¹‹é—´çš„åŒºåˆ«</strong>ï¼šæ˜¯å¦å¼ºåˆ¶è¦æ±‚è°ƒç”¨è€…å¿…é¡»å¤„ç†æ­¤å¼‚å¸¸ï¼Œå¦‚æœå¼ºåˆ¶è¦æ±‚è°ƒç”¨è€…å¿…é¡»è¿›è¡Œå¤„ç†ï¼Œé‚£ä¹ˆå°±ä½¿ç”¨å—æ£€å¼‚å¸¸ï¼Œå¦åˆ™å°±é€‰æ‹©éå—æ£€å¼‚å¸¸(RuntimeException)ã€‚ä¸€èˆ¬æ¥è®²ï¼Œå¦‚æœæ²¡æœ‰ç‰¹æ®Šçš„è¦æ±‚ï¼Œæˆ‘ä»¬å»ºè®®ä½¿ç”¨RuntimeExceptionå¼‚å¸¸ã€‚</p>\n<h3 id=\"3-JVM-æ˜¯å¦‚ä½•å¤„ç†å¼‚å¸¸çš„ï¼Ÿ\"><a href=\"#3-JVM-æ˜¯å¦‚ä½•å¤„ç†å¼‚å¸¸çš„ï¼Ÿ\" class=\"headerlink\" title=\"3. JVM æ˜¯å¦‚ä½•å¤„ç†å¼‚å¸¸çš„ï¼Ÿ\"></a>3. JVM æ˜¯å¦‚ä½•å¤„ç†å¼‚å¸¸çš„ï¼Ÿ</h3><p>åœ¨ä¸€ä¸ªæ–¹æ³•ä¸­å¦‚æœå‘ç”Ÿå¼‚å¸¸ï¼Œè¿™ä¸ªæ–¹æ³•ä¼šåˆ›å»ºä¸€ä¸ªå¼‚å¸¸å¯¹è±¡ï¼Œå¹¶è½¬äº¤ç»™ JVMï¼Œè¯¥å¼‚å¸¸å¯¹è±¡åŒ…å«å¼‚å¸¸åç§°ï¼Œå¼‚å¸¸æè¿°ä»¥åŠå¼‚å¸¸å‘ç”Ÿæ—¶åº”ç”¨ç¨‹åºçš„çŠ¶æ€ã€‚åˆ›å»ºå¼‚å¸¸å¯¹è±¡å¹¶è½¬äº¤ç»™ JVM çš„è¿‡ç¨‹ç§°ä¸ºæŠ›å‡ºå¼‚å¸¸ã€‚å¯èƒ½æœ‰ä¸€ç³»åˆ—çš„æ–¹æ³•è°ƒç”¨ï¼Œæœ€ç»ˆæ‰è¿›å…¥æŠ›å‡ºå¼‚å¸¸çš„æ–¹æ³•ï¼Œè¿™ä¸€ç³»åˆ—æ–¹æ³•è°ƒç”¨çš„æœ‰åºåˆ—è¡¨å«åšè°ƒç”¨æ ˆã€‚</p>\n<p>JVM ä¼šé¡ºç€è°ƒç”¨æ ˆå»æŸ¥æ‰¾çœ‹æ˜¯å¦æœ‰å¯ä»¥å¤„ç†å¼‚å¸¸çš„ä»£ç ï¼Œå¦‚æœæœ‰ï¼Œåˆ™è°ƒç”¨å¼‚å¸¸å¤„ç†ä»£ç ã€‚å½“ JVM å‘ç°å¯ä»¥å¤„ç†å¼‚å¸¸çš„ä»£ç æ—¶ï¼Œä¼šæŠŠå‘ç”Ÿçš„å¼‚å¸¸ä¼ é€’ç»™å®ƒã€‚å¦‚æœ JVM æ²¡æœ‰æ‰¾åˆ°å¯ä»¥å¤„ç†è¯¥å¼‚å¸¸çš„ä»£ç å—ï¼ŒJVM å°±ä¼šå°†è¯¥å¼‚å¸¸è½¬äº¤ç»™é»˜è®¤çš„å¼‚å¸¸å¤„ç†å™¨ï¼ˆé»˜è®¤å¤„ç†å™¨ä¸º JVM çš„ä¸€éƒ¨åˆ†ï¼‰ï¼Œé»˜è®¤å¼‚å¸¸å¤„ç†å™¨æ‰“å°å‡ºå¼‚å¸¸ä¿¡æ¯å¹¶ç»ˆæ­¢åº”ç”¨ç¨‹åºã€‚</p>\n<h3 id=\"4-throw-å’Œ-throws-çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ\"><a href=\"#4-throw-å’Œ-throws-çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ\" class=\"headerlink\" title=\"4. throw å’Œ throws çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ\"></a>4. throw å’Œ throws çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</h3><p>Java ä¸­çš„å¼‚å¸¸å¤„ç†é™¤äº†åŒ…æ‹¬æ•è·å¼‚å¸¸å’Œå¤„ç†å¼‚å¸¸ä¹‹å¤–ï¼Œè¿˜åŒ…æ‹¬å£°æ˜å¼‚å¸¸å’Œæ‹‹å‡ºå¼‚å¸¸ï¼Œå¯ä»¥é€šè¿‡ throws å…³é”®å­—åœ¨æ–¹æ³•ä¸Šå£°æ˜è¯¥æ–¹æ³•è¦æ‹‹å‡ºçš„å¼‚å¸¸ï¼Œæˆ–è€…åœ¨æ–¹æ³•å†…éƒ¨é€šè¿‡ throw æ‹‹å‡ºå¼‚å¸¸å¯¹è±¡ã€‚</p>\n<p><strong>throws å…³é”®å­—å’Œ throw å…³é”®å­—åœ¨ä½¿ç”¨ä¸Šçš„å‡ ç‚¹åŒºåˆ«å¦‚ä¸‹</strong>ï¼š</p>\n<ul>\n<li>throw å…³é”®å­—ç”¨åœ¨æ–¹æ³•å†…éƒ¨ï¼Œåªèƒ½ç”¨äºæŠ›å‡ºä¸€ç§å¼‚å¸¸ï¼Œç”¨æ¥æŠ›å‡ºæ–¹æ³•æˆ–ä»£ç å—ä¸­çš„å¼‚å¸¸ï¼Œå—æŸ¥å¼‚å¸¸å’Œéå—æŸ¥å¼‚å¸¸éƒ½å¯ä»¥è¢«æŠ›å‡ºã€‚</li>\n<li>throws å…³é”®å­—ç”¨åœ¨æ–¹æ³•å£°æ˜ä¸Šï¼Œå¯ä»¥æŠ›å‡ºå¤šä¸ªå¼‚å¸¸ï¼Œç”¨æ¥æ ‡è¯†è¯¥æ–¹æ³•å¯èƒ½æŠ›å‡ºçš„å¼‚å¸¸åˆ—è¡¨ã€‚ä¸€ä¸ªæ–¹æ³•ç”¨ throws æ ‡è¯†äº†å¯èƒ½æŠ›å‡ºçš„å¼‚å¸¸åˆ—è¡¨ï¼Œè°ƒç”¨è¯¥æ–¹æ³•çš„æ–¹æ³•ä¸­å¿…é¡»åŒ…å«å¯å¤„ç†å¼‚å¸¸çš„ä»£ç ï¼Œå¦åˆ™ä¹Ÿè¦åœ¨æ–¹æ³•ç­¾åä¸­ç”¨ throws å…³é”®å­—å£°æ˜ç›¸åº”çš„å¼‚å¸¸ã€‚</li>\n</ul>\n<h3 id=\"5-try-catch-finally-ä¸­ï¼Œå¦‚æœ-catch-ä¸­-return-äº†ï¼Œfinally-è¿˜ä¼šæ‰§è¡Œå—ï¼Ÿ\"><a href=\"#5-try-catch-finally-ä¸­ï¼Œå¦‚æœ-catch-ä¸­-return-äº†ï¼Œfinally-è¿˜ä¼šæ‰§è¡Œå—ï¼Ÿ\" class=\"headerlink\" title=\"5. try-catch-finally ä¸­ï¼Œå¦‚æœ catch ä¸­ return äº†ï¼Œfinally è¿˜ä¼šæ‰§è¡Œå—ï¼Ÿ\"></a>5. try-catch-finally ä¸­ï¼Œå¦‚æœ catch ä¸­ return äº†ï¼Œfinally è¿˜ä¼šæ‰§è¡Œå—ï¼Ÿ</h3><p><strong>ç­”ï¼šä¼šæ‰§è¡Œï¼Œåœ¨ return å‰æ‰§è¡Œã€‚</strong></p>\n<p><strong>ä»£ç ç¤ºä¾‹1ï¼š</strong></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"type\">int</span> <span class=\"title function_\">getInt</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> <span class=\"variable\">a</span> <span class=\"operator\">=</span> <span class=\"number\">10</span>;</span><br><span class=\"line\">    <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">        System.out.println(a / <span class=\"number\">0</span>);</span><br><span class=\"line\">        a = <span class=\"number\">20</span>;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">catch</span> (ArithmeticException e) &#123;</span><br><span class=\"line\">        a = <span class=\"number\">30</span>;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> a;\t<span class=\"comment\">// ä¸ä¼šç›´æ¥returnï¼Œå…ˆæ‰§è¡Œfinallyï¼Œfinallyæ‰§è¡Œè¿‡åå›æ¥æ‰§è¡Œreturn a</span></span><br><span class=\"line\">    &#125; <span class=\"keyword\">finally</span> &#123;</span><br><span class=\"line\">        a = <span class=\"number\">40</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> a;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>æ‰§è¡Œç»“æœï¼š30</p>\n<p><strong>ä»£ç ç¤ºä¾‹2ï¼š</strong></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"type\">int</span> <span class=\"title function_\">getInt</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> <span class=\"variable\">a</span> <span class=\"operator\">=</span> <span class=\"number\">10</span>;</span><br><span class=\"line\">    <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">        System.out.println(a / <span class=\"number\">0</span>);</span><br><span class=\"line\">        a = <span class=\"number\">20</span>;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">catch</span> (ArithmeticException e) &#123;</span><br><span class=\"line\">        a = <span class=\"number\">30</span>;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> a;\t<span class=\"comment\">// ä¸ä¼šç›´æ¥returnï¼Œå…ˆæ‰§è¡Œfinally</span></span><br><span class=\"line\">    &#125; <span class=\"keyword\">finally</span> &#123;</span><br><span class=\"line\">        a = <span class=\"number\">40</span>;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> a;\t<span class=\"comment\">// finallyä¸­æœ‰returnå°±ç›´æ¥returnäº†</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>æ‰§è¡Œç»“æœï¼š40</p>\n<h3 id=\"6-ç±»-ExampleA-ç»§æ‰¿-Exceptionï¼Œç±»-ExampleB-ç»§æ‰¿ExampleAã€‚\"><a href=\"#6-ç±»-ExampleA-ç»§æ‰¿-Exceptionï¼Œç±»-ExampleB-ç»§æ‰¿ExampleAã€‚\" class=\"headerlink\" title=\"6. ç±» ExampleA ç»§æ‰¿ Exceptionï¼Œç±» ExampleB ç»§æ‰¿ExampleAã€‚\"></a>6. ç±» ExampleA ç»§æ‰¿ Exceptionï¼Œç±» ExampleB ç»§æ‰¿ExampleAã€‚</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">ExceptionA</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">Exception</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"title function_\">ExceptionA</span><span class=\"params\">(String message)</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">super</span>(message);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">ExceptionB</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">ExceptionA</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"title function_\">ExceptionB</span><span class=\"params\">(String message)</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">super</span>(message);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"title class_\">ExceptionB</span>(<span class=\"string\">&quot;a&quot;</span>);</span><br><span class=\"line\">&#125; <span class=\"keyword\">catch</span> (ExceptionA ea) &#123;</span><br><span class=\"line\">  System.out.println(<span class=\"string\">&quot;ExceptionA&quot;</span>);</span><br><span class=\"line\">&#125; <span class=\"keyword\">catch</span> (Exception e) &#123;</span><br><span class=\"line\">  System.out.println(<span class=\"string\">&quot;Exception&quot;</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>è¾“å‡ºï¼šExampleAã€‚ï¼ˆæ ¹æ®é‡Œæ°ä»£æ¢åŸåˆ™[èƒ½ä½¿ç”¨çˆ¶ç±»å‹çš„åœ°æ–¹ä¸€å®šèƒ½ä½¿ç”¨å­ç±»å‹]ï¼ŒæŠ“å– ExceptionA ç±»å‹å¼‚å¸¸çš„ catch å—èƒ½å¤ŸæŠ“ä½ try å—ä¸­æŠ›å‡ºçš„ ExceptionB ç±»å‹çš„å¼‚å¸¸ï¼‰</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"title class_\">ExceptionB</span>(<span class=\"string\">&quot;b&quot;</span>);</span><br><span class=\"line\">&#125; <span class=\"keyword\">catch</span> (Exception e) &#123;</span><br><span class=\"line\">  System.out.println(<span class=\"string\">&quot;Exception: &quot;</span> + e);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>è¾“å‡ºï¼šException: com.yaxing.demo.exceptiondemo.ExceptionB: bï¼Œä»ä¼šä½¿ç”¨å­ç±»å‹ã€‚</p>\n<p>é¢è¯•é¢˜ - è¯´å‡ºä¸‹é¢ä»£ç çš„è¿è¡Œç»“æœã€‚ï¼ˆæ­¤é¢˜çš„å‡ºå¤„æ˜¯ã€ŠJava ç¼–ç¨‹æ€æƒ³ã€‹ä¸€ä¹¦ï¼‰</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Annoyance</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">Exception</span> &#123;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Sneeze</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">Annoyance</span> &#123;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Human</span> &#123;</span><br><span class=\"line\">\t<span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> <span class=\"keyword\">throws</span> Exception &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Sneeze</span>();</span><br><span class=\"line\">\t\t\t&#125; <span class=\"keyword\">catch</span> ( Annoyance a ) &#123;</span><br><span class=\"line\">\t\t\t\tSystem.out.println(<span class=\"string\">&quot;Caught Annoyance&quot;</span>);</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">throw</span> a;</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t&#125; <span class=\"keyword\">catch</span> ( Sneeze s ) &#123;</span><br><span class=\"line\">\t\t\tSystem.out.println(<span class=\"string\">&quot;Caught Sneeze&quot;</span>);</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">return</span> ;</span><br><span class=\"line\">\t\t&#125; <span class=\"keyword\">finally</span> &#123;</span><br><span class=\"line\">\t\t\tSystem.out.println(<span class=\"string\">&quot;Hello World!&quot;</span>);</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ç»“æœ</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Caught Annoyance</span><br><span class=\"line\">Caught Sneeze</span><br><span class=\"line\">Hello World!</span><br></pre></td></tr></table></figure>\n\n","site":{"data":{}},"length":5179,"excerpt":"<blockquote>\n<p>æ•´ç†çš„Javaå¼‚å¸¸ç›¸å…³çŸ¥è¯†ç‚¹å’Œé¢è¯•é¢˜ï¼Œéƒ¨åˆ†å†…å®¹æ‘˜è‡ªç½‘ç»œï¼Œå¦‚æœ‰ä¾µæƒè¯·è”ç³»æˆ‘ï½","more":"</p>\n</blockquote>\n<h2 id=\"Javaå¼‚å¸¸æ¶æ„\"><a href=\"#Javaå¼‚å¸¸æ¶æ„\" class=\"headerlink\" title=\"Javaå¼‚å¸¸æ¶æ„\"></a>Javaå¼‚å¸¸æ¶æ„</h2><p><img src=\"https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/TyporaNotes20200314173417278.png\" alt=\"Javaå¼‚å¸¸æ¶æ„\"></p>\n<h3 id=\"1-Throwable\"><a href=\"#1-Throwable\" class=\"headerlink\" title=\"1. Throwable\"></a>1. Throwable</h3><p>Throwable æ˜¯ Java è¯­è¨€ä¸­æ‰€æœ‰é”™è¯¯ä¸å¼‚å¸¸çš„è¶…ç±»ã€‚</p>\n<p>Throwable åŒ…å«ä¸¤ä¸ªå­ç±»ï¼šErrorï¼ˆé”™è¯¯ï¼‰å’Œ Exceptionï¼ˆå¼‚å¸¸ï¼‰ï¼Œå®ƒä»¬é€šå¸¸ç”¨äºæŒ‡ç¤ºå‘ç”Ÿäº†å¼‚å¸¸æƒ…å†µã€‚</p>\n<h3 id=\"2-Errorï¼ˆé”™è¯¯ï¼‰\"><a href=\"#2-Errorï¼ˆé”™è¯¯ï¼‰\" class=\"headerlink\" title=\"2. Errorï¼ˆé”™è¯¯ï¼‰\"></a>2. Errorï¼ˆé”™è¯¯ï¼‰</h3><p>Error ç±»åŠå…¶å­ç±»ã€‚ç¨‹åºä¸­æ— æ³•å¤„ç†çš„é”™è¯¯ï¼Œè¡¨ç¤ºè¿è¡Œåº”ç”¨ç¨‹åºä¸­å‡ºç°äº†ä¸¥é‡çš„é”™è¯¯ã€‚</p>\n<p>éå—æ£€å¼‚å¸¸ï¼Œä¸€èˆ¬è¡¨ç¤ºä»£ç è¿è¡Œæ—¶ JVM å‡ºç°é—®é¢˜ã€‚æ¯”å¦‚ OutOfMemoryErrorï¼šå†…å­˜ä¸è¶³é”™è¯¯ï¼›StackOverflowErrorï¼šæ ˆæº¢å‡ºé”™è¯¯ã€‚æ­¤ç±»é”™è¯¯å‘ç”Ÿæ—¶ï¼ŒJVM å°†ç»ˆæ­¢çº¿ç¨‹ã€‚</p>\n<h3 id=\"3-Exceptionï¼ˆå¼‚å¸¸ï¼‰\"><a href=\"#3-Exceptionï¼ˆå¼‚å¸¸ï¼‰\" class=\"headerlink\" title=\"3. Exceptionï¼ˆå¼‚å¸¸ï¼‰\"></a>3. Exceptionï¼ˆå¼‚å¸¸ï¼‰</h3><p>ç¨‹åºæœ¬èº«å¯ä»¥æ•è·å¹¶ä¸”å¯ä»¥å¤„ç†çš„å¼‚å¸¸ã€‚Exception è¿™ç§å¼‚å¸¸åˆåˆ†ä¸ºä¸¤ç±»ï¼šè¿è¡Œæ—¶å¼‚å¸¸å’Œç¼–è¯‘æ—¶å¼‚å¸¸ã€‚</p>\n<h4 id=\"è¿è¡Œæ—¶å¼‚å¸¸\"><a href=\"#è¿è¡Œæ—¶å¼‚å¸¸\" class=\"headerlink\" title=\"è¿è¡Œæ—¶å¼‚å¸¸\"></a>è¿è¡Œæ—¶å¼‚å¸¸</h4><p>Exception ä¸­ RuntimeException ç±»åŠå…¶å­ç±»ï¼Œè¡¨ç¤º JVM åœ¨è¿è¡ŒæœŸé—´å¯èƒ½å‡ºç°çš„å¼‚å¸¸ã€‚ï¼ˆéå—æ£€å¼‚å¸¸ï¼Œç¼–è¯‘æ—¶ä¸ä¼šæ£€æŸ¥å‡ºå¼‚å¸¸ï¼Œè¿è¡Œæ—¶ä¼šå‘ç”Ÿå¼‚å¸¸ï¼Œéœ€è¦å¯¹å¼‚å¸¸è¿›è¡Œç‰¹æ®Šå¤„ç†ï¼Œå¦åˆ™ä¼šå‘ç”Ÿé€»è¾‘é”™è¯¯ï¼‰</p>\n<h4 id=\"ç¼–è¯‘æ—¶å¼‚å¸¸\"><a href=\"#ç¼–è¯‘æ—¶å¼‚å¸¸\" class=\"headerlink\" title=\"ç¼–è¯‘æ—¶å¼‚å¸¸\"></a>ç¼–è¯‘æ—¶å¼‚å¸¸</h4><p>Exception ä¸­é™¤ RuntimeException åŠå…¶å­ç±»ä¹‹å¤–çš„å¼‚å¸¸ã€‚ï¼ˆå—æ£€å¼‚å¸¸ï¼Œç¼–è¯‘æ—¶ä¼šæ£€æŸ¥åˆ°è¯¥å¼‚å¸¸ ï¼‰</p>\n<h2 id=\"Javaå¼‚å¸¸å…³é”®å­—\"><a href=\"#Javaå¼‚å¸¸å…³é”®å­—\" class=\"headerlink\" title=\"Javaå¼‚å¸¸å…³é”®å­—\"></a>Javaå¼‚å¸¸å…³é”®å­—</h2><p>â€¢ <strong>try</strong> â€“ ç”¨äºç›‘å¬ã€‚å°†è¦è¢«ç›‘å¬çš„ä»£ï¼ˆå¯èƒ½æŠ›å‡ºå¼‚å¸¸çš„ä»£ç ï¼‰æ”¾åœ¨tryè¯­å¥å—ä¹‹å†…ï¼Œå½“tryè¯­å¥å—å†…å‘ç”Ÿå¼‚å¸¸æ—¶ï¼Œå¼‚å¸¸å°±è¢«æŠ›å‡ºã€‚<br>â€¢ <strong>catch</strong> â€“ ç”¨äºæ•è·å¼‚å¸¸ã€‚catchç”¨æ¥æ•è·tryè¯­å¥å—ä¸­å‘ç”Ÿçš„å¼‚å¸¸ã€‚<br>â€¢ <strong>finally</strong> â€“ finallyè¯­å¥å—æ€»æ˜¯ä¼šè¢«æ‰§è¡Œã€‚å®ƒä¸»è¦ç”¨äºå›æ”¶åœ¨tryå—é‡Œæ‰“å¼€çš„èµ„æº(å¦‚æ•°æ®åº“è¿æ¥ã€ç½‘ç»œè¿æ¥å’Œç£ç›˜æ–‡ä»¶)ã€‚<br>â€¢ <strong>throw</strong> â€“ ç”¨äºæ‰‹åŠ¨æŠ›å‡ºcatchåˆ°çš„å¼‚å¸¸ã€‚<br>â€¢ <strong>throws</strong> â€“ ç”¨åœ¨æ–¹æ³•ç­¾åä¸­ï¼Œç”¨äºå£°æ˜è¯¥æ–¹æ³•å¯èƒ½æŠ›å‡ºçš„å¼‚å¸¸ï¼Œè°ƒç”¨è¯¥æ–¹æ³•çš„æ–¹æ³•éœ€è¦æ³¨æ„catchè¿™ä¸ªå¯èƒ½è·‘å‡ºçš„å¼‚å¸¸ã€‚</p>\n<h2 id=\"Javaå¼‚å¸¸å¤„ç†\"><a href=\"#Javaå¼‚å¸¸å¤„ç†\" class=\"headerlink\" title=\"Javaå¼‚å¸¸å¤„ç†\"></a>Javaå¼‚å¸¸å¤„ç†</h2><h3 id=\"ç›´æ¥æŠ›å‡ºå¼‚å¸¸\"><a href=\"#ç›´æ¥æŠ›å‡ºå¼‚å¸¸\" class=\"headerlink\" title=\"ç›´æ¥æŠ›å‡ºå¼‚å¸¸\"></a>ç›´æ¥æŠ›å‡ºå¼‚å¸¸</h3><p>é€šå¸¸ï¼Œåº”è¯¥æ•è·é‚£äº›çŸ¥é“å¦‚ä½•å¤„ç†çš„å¼‚å¸¸ï¼Œå°†ä¸çŸ¥é“å¦‚ä½•å¤„ç†çš„å¼‚å¸¸ç»§ç»­ä¼ é€’ä¸‹å»ã€‚ä¼ é€’å¼‚å¸¸å¯ä»¥åœ¨æ–¹æ³•ç­¾åå¤„ä½¿ç”¨ <strong>throws</strong> å…³é”®å­—å£°æ˜å¯èƒ½ä¼šæŠ›å‡ºçš„å¼‚å¸¸ã€‚è°ƒç”¨è¯¥æ–¹æ³•çš„æ–¹æ³•éœ€è¦æ³¨æ„catchè¿™ä¸ªå¯èƒ½è·‘å‡ºçš„å¼‚å¸¸ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">readFile</span><span class=\"params\">(String filePath)</span> <span class=\"keyword\">throws</span> IOException &#123;</span><br><span class=\"line\">    <span class=\"type\">File</span> <span class=\"variable\">file</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">File</span>(filePath);</span><br><span class=\"line\">    String result;</span><br><span class=\"line\">    <span class=\"type\">BufferedReader</span> <span class=\"variable\">reader</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">BufferedReader</span>(<span class=\"keyword\">new</span> <span class=\"title class_\">FileReader</span>(file));</span><br><span class=\"line\">    <span class=\"keyword\">while</span>((result = reader.readLine())!=<span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">        System.out.println(result);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    reader.close();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"å°è£…å¼‚å¸¸å†æŠ›å‡º\"><a href=\"#å°è£…å¼‚å¸¸å†æŠ›å‡º\" class=\"headerlink\" title=\"å°è£…å¼‚å¸¸å†æŠ›å‡º\"></a>å°è£…å¼‚å¸¸å†æŠ›å‡º</h3><p>æœ‰æ—¶æˆ‘ä»¬ä¼šä» catch ä¸­æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ï¼Œç›®çš„æ˜¯ä¸ºäº†æ”¹å˜å¼‚å¸¸çš„ç±»å‹ã€‚å¤šç”¨äºåœ¨å¤šç³»ç»Ÿé›†æˆæ—¶ï¼Œå½“æŸä¸ªå­ç³»ç»Ÿæ•…éšœï¼Œå¼‚å¸¸ç±»å‹å¯èƒ½æœ‰å¤šç§ï¼Œå¯ä»¥ç”¨ç»Ÿä¸€çš„å¼‚å¸¸ç±»å‹å‘å¤–æš´éœ²ï¼Œä¸éœ€æš´éœ²å¤ªå¤šå†…éƒ¨å¼‚å¸¸ç»†èŠ‚ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">readFile</span><span class=\"params\">(String filePath)</span> <span class=\"keyword\">throws</span> MyException &#123;    </span><br><span class=\"line\">    <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// code</span></span><br><span class=\"line\">    &#125; <span class=\"keyword\">catch</span> (IOException e) &#123;</span><br><span class=\"line\">        <span class=\"type\">MyException</span> <span class=\"variable\">ex</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">MyException</span>(<span class=\"string\">&quot;read file failed.&quot;</span>);</span><br><span class=\"line\">        ex.initCause(e);</span><br><span class=\"line\">        <span class=\"keyword\">throw</span> ex;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"æ•è·å¼‚å¸¸\"><a href=\"#æ•è·å¼‚å¸¸\" class=\"headerlink\" title=\"æ•è·å¼‚å¸¸\"></a>æ•è·å¼‚å¸¸</h3><p>åœ¨ä¸€ä¸ª try-catch è¯­å¥å—ä¸­å¯ä»¥æ•è·å¤šä¸ªå¼‚å¸¸ç±»å‹ï¼Œå¹¶å¯¹ä¸åŒç±»å‹çš„å¼‚å¸¸åšå‡ºä¸åŒçš„å¤„ç†</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">readFile</span><span class=\"params\">(String filePath)</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// code</span></span><br><span class=\"line\">    &#125; <span class=\"keyword\">catch</span> (FileNotFoundException e) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// handle FileNotFoundException</span></span><br><span class=\"line\">    &#125; <span class=\"keyword\">catch</span> (IOException e)&#123;</span><br><span class=\"line\">        <span class=\"comment\">// handle IOException</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>åŒä¸€ä¸ª catch ä¹Ÿå¯ä»¥æ•è·å¤šç§ç±»å‹å¼‚å¸¸ï¼Œç”¨ | éš”å¼€</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">readFile</span><span class=\"params\">(String filePath)</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// code</span></span><br><span class=\"line\">    &#125; <span class=\"keyword\">catch</span> (FileNotFoundException | UnknownHostException e) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// handle FileNotFoundException or UnknownHostException</span></span><br><span class=\"line\">    &#125; <span class=\"keyword\">catch</span> (IOException e)&#123;</span><br><span class=\"line\">        <span class=\"comment\">// handle IOException</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"è‡ªå®šä¹‰å¼‚å¸¸\"><a href=\"#è‡ªå®šä¹‰å¼‚å¸¸\" class=\"headerlink\" title=\"è‡ªå®šä¹‰å¼‚å¸¸\"></a>è‡ªå®šä¹‰å¼‚å¸¸</h3><p>ä¹ æƒ¯ä¸Šï¼Œå®šä¹‰ä¸€ä¸ªå¼‚å¸¸ç±»åº”åŒ…å«ä¸¤ä¸ªæ„é€ å‡½æ•°ï¼Œä¸€ä¸ªæ— å‚æ„é€ å‡½æ•°å’Œä¸€ä¸ªå¸¦æœ‰è¯¦ç»†æè¿°ä¿¡æ¯çš„æ„é€ å‡½æ•°ï¼ˆThrowable çš„ toString æ–¹æ³•ä¼šæ‰“å°è¿™äº›è¯¦ç»†ä¿¡æ¯ï¼Œè°ƒè¯•æ—¶å¾ˆæœ‰ç”¨ï¼‰</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">MyException</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">Exception</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"title function_\">MyException</span><span class=\"params\">()</span>&#123; &#125;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"title function_\">MyException</span><span class=\"params\">(String msg)</span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">super</span>(msg);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// ...</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Javaå¼‚å¸¸å¸¸è§é¢è¯•é¢˜\"><a href=\"#Javaå¼‚å¸¸å¸¸è§é¢è¯•é¢˜\" class=\"headerlink\" title=\"Javaå¼‚å¸¸å¸¸è§é¢è¯•é¢˜\"></a>Javaå¼‚å¸¸å¸¸è§é¢è¯•é¢˜</h2><h3 id=\"1-Error-å’Œ-Exception-åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ\"><a href=\"#1-Error-å’Œ-Exception-åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ\" class=\"headerlink\" title=\"1. Error å’Œ Exception åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ\"></a>1. Error å’Œ Exception åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</h3><p>Error ç±»å‹çš„é”™è¯¯é€šå¸¸ä¸ºè™šæ‹Ÿæœºç›¸å…³é”™è¯¯ï¼Œå¦‚ç³»ç»Ÿå´©æºƒï¼Œå†…å­˜ä¸è¶³ï¼Œå †æ ˆæº¢å‡ºç­‰ï¼Œç¼–è¯‘å™¨ä¸ä¼šå¯¹è¿™ç±»é”™è¯¯è¿›è¡Œæ£€æµ‹ï¼ŒJava åº”ç”¨ç¨‹åºä¹Ÿä¸åº”å¯¹è¿™ç±»é”™è¯¯è¿›è¡Œæ•è·ï¼Œä¸€æ—¦è¿™ç±»é”™è¯¯å‘ç”Ÿï¼Œé€šå¸¸åº”ç”¨ç¨‹åºä¼šè¢«ç»ˆæ­¢ï¼Œä»…é åº”ç”¨ç¨‹åºæœ¬èº«æ— æ³•æ¢å¤ï¼›</p>\n<p>Exception ç±»çš„é”™è¯¯æ˜¯å¯ä»¥åœ¨åº”ç”¨ç¨‹åºä¸­è¿›è¡Œæ•è·å¹¶å¤„ç†çš„ï¼Œé€šå¸¸é‡åˆ°è¿™ç§é”™è¯¯ï¼Œåº”å¯¹å…¶è¿›è¡Œå¤„ç†ï¼Œä½¿åº”ç”¨ç¨‹åºå¯ä»¥ç»§ç»­æ­£å¸¸è¿è¡Œã€‚</p>\n<h3 id=\"2-è¿è¡Œæ—¶å¼‚å¸¸å’Œä¸€èˆ¬å¼‚å¸¸-å—æ£€å¼‚å¸¸-åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ\"><a href=\"#2-è¿è¡Œæ—¶å¼‚å¸¸å’Œä¸€èˆ¬å¼‚å¸¸-å—æ£€å¼‚å¸¸-åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ\" class=\"headerlink\" title=\"2. è¿è¡Œæ—¶å¼‚å¸¸å’Œä¸€èˆ¬å¼‚å¸¸(å—æ£€å¼‚å¸¸)åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ\"></a>2. è¿è¡Œæ—¶å¼‚å¸¸å’Œä¸€èˆ¬å¼‚å¸¸(å—æ£€å¼‚å¸¸)åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</h3><p>è¿è¡Œæ—¶å¼‚å¸¸åŒ…æ‹¬ RuntimeException ç±»åŠå…¶å­ç±»ï¼Œè¡¨ç¤º JVM åœ¨è¿è¡ŒæœŸé—´å¯èƒ½å‡ºç°çš„å¼‚å¸¸ã€‚ Java ç¼–è¯‘å™¨ä¸ä¼šæ£€æŸ¥è¿è¡Œæ—¶å¼‚å¸¸ã€‚</p>\n<p>å—æ£€å¼‚å¸¸æ˜¯Exception ä¸­é™¤ RuntimeException åŠå…¶å­ç±»ä¹‹å¤–çš„å¼‚å¸¸ã€‚ Java ç¼–è¯‘å™¨ä¼šæ£€æŸ¥å—æ£€å¼‚å¸¸ã€‚</p>\n<p><strong>RuntimeExceptionå¼‚å¸¸å’Œå—æ£€å¼‚å¸¸ä¹‹é—´çš„åŒºåˆ«</strong>ï¼šæ˜¯å¦å¼ºåˆ¶è¦æ±‚è°ƒç”¨è€…å¿…é¡»å¤„ç†æ­¤å¼‚å¸¸ï¼Œå¦‚æœå¼ºåˆ¶è¦æ±‚è°ƒç”¨è€…å¿…é¡»è¿›è¡Œå¤„ç†ï¼Œé‚£ä¹ˆå°±ä½¿ç”¨å—æ£€å¼‚å¸¸ï¼Œå¦åˆ™å°±é€‰æ‹©éå—æ£€å¼‚å¸¸(RuntimeException)ã€‚ä¸€èˆ¬æ¥è®²ï¼Œå¦‚æœæ²¡æœ‰ç‰¹æ®Šçš„è¦æ±‚ï¼Œæˆ‘ä»¬å»ºè®®ä½¿ç”¨RuntimeExceptionå¼‚å¸¸ã€‚</p>\n<h3 id=\"3-JVM-æ˜¯å¦‚ä½•å¤„ç†å¼‚å¸¸çš„ï¼Ÿ\"><a href=\"#3-JVM-æ˜¯å¦‚ä½•å¤„ç†å¼‚å¸¸çš„ï¼Ÿ\" class=\"headerlink\" title=\"3. JVM æ˜¯å¦‚ä½•å¤„ç†å¼‚å¸¸çš„ï¼Ÿ\"></a>3. JVM æ˜¯å¦‚ä½•å¤„ç†å¼‚å¸¸çš„ï¼Ÿ</h3><p>åœ¨ä¸€ä¸ªæ–¹æ³•ä¸­å¦‚æœå‘ç”Ÿå¼‚å¸¸ï¼Œè¿™ä¸ªæ–¹æ³•ä¼šåˆ›å»ºä¸€ä¸ªå¼‚å¸¸å¯¹è±¡ï¼Œå¹¶è½¬äº¤ç»™ JVMï¼Œè¯¥å¼‚å¸¸å¯¹è±¡åŒ…å«å¼‚å¸¸åç§°ï¼Œå¼‚å¸¸æè¿°ä»¥åŠå¼‚å¸¸å‘ç”Ÿæ—¶åº”ç”¨ç¨‹åºçš„çŠ¶æ€ã€‚åˆ›å»ºå¼‚å¸¸å¯¹è±¡å¹¶è½¬äº¤ç»™ JVM çš„è¿‡ç¨‹ç§°ä¸ºæŠ›å‡ºå¼‚å¸¸ã€‚å¯èƒ½æœ‰ä¸€ç³»åˆ—çš„æ–¹æ³•è°ƒç”¨ï¼Œæœ€ç»ˆæ‰è¿›å…¥æŠ›å‡ºå¼‚å¸¸çš„æ–¹æ³•ï¼Œè¿™ä¸€ç³»åˆ—æ–¹æ³•è°ƒç”¨çš„æœ‰åºåˆ—è¡¨å«åšè°ƒç”¨æ ˆã€‚</p>\n<p>JVM ä¼šé¡ºç€è°ƒç”¨æ ˆå»æŸ¥æ‰¾çœ‹æ˜¯å¦æœ‰å¯ä»¥å¤„ç†å¼‚å¸¸çš„ä»£ç ï¼Œå¦‚æœæœ‰ï¼Œåˆ™è°ƒç”¨å¼‚å¸¸å¤„ç†ä»£ç ã€‚å½“ JVM å‘ç°å¯ä»¥å¤„ç†å¼‚å¸¸çš„ä»£ç æ—¶ï¼Œä¼šæŠŠå‘ç”Ÿçš„å¼‚å¸¸ä¼ é€’ç»™å®ƒã€‚å¦‚æœ JVM æ²¡æœ‰æ‰¾åˆ°å¯ä»¥å¤„ç†è¯¥å¼‚å¸¸çš„ä»£ç å—ï¼ŒJVM å°±ä¼šå°†è¯¥å¼‚å¸¸è½¬äº¤ç»™é»˜è®¤çš„å¼‚å¸¸å¤„ç†å™¨ï¼ˆé»˜è®¤å¤„ç†å™¨ä¸º JVM çš„ä¸€éƒ¨åˆ†ï¼‰ï¼Œé»˜è®¤å¼‚å¸¸å¤„ç†å™¨æ‰“å°å‡ºå¼‚å¸¸ä¿¡æ¯å¹¶ç»ˆæ­¢åº”ç”¨ç¨‹åºã€‚</p>\n<h3 id=\"4-throw-å’Œ-throws-çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ\"><a href=\"#4-throw-å’Œ-throws-çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ\" class=\"headerlink\" title=\"4. throw å’Œ throws çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ\"></a>4. throw å’Œ throws çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</h3><p>Java ä¸­çš„å¼‚å¸¸å¤„ç†é™¤äº†åŒ…æ‹¬æ•è·å¼‚å¸¸å’Œå¤„ç†å¼‚å¸¸ä¹‹å¤–ï¼Œè¿˜åŒ…æ‹¬å£°æ˜å¼‚å¸¸å’Œæ‹‹å‡ºå¼‚å¸¸ï¼Œå¯ä»¥é€šè¿‡ throws å…³é”®å­—åœ¨æ–¹æ³•ä¸Šå£°æ˜è¯¥æ–¹æ³•è¦æ‹‹å‡ºçš„å¼‚å¸¸ï¼Œæˆ–è€…åœ¨æ–¹æ³•å†…éƒ¨é€šè¿‡ throw æ‹‹å‡ºå¼‚å¸¸å¯¹è±¡ã€‚</p>\n<p><strong>throws å…³é”®å­—å’Œ throw å…³é”®å­—åœ¨ä½¿ç”¨ä¸Šçš„å‡ ç‚¹åŒºåˆ«å¦‚ä¸‹</strong>ï¼š</p>\n<ul>\n<li>throw å…³é”®å­—ç”¨åœ¨æ–¹æ³•å†…éƒ¨ï¼Œåªèƒ½ç”¨äºæŠ›å‡ºä¸€ç§å¼‚å¸¸ï¼Œç”¨æ¥æŠ›å‡ºæ–¹æ³•æˆ–ä»£ç å—ä¸­çš„å¼‚å¸¸ï¼Œå—æŸ¥å¼‚å¸¸å’Œéå—æŸ¥å¼‚å¸¸éƒ½å¯ä»¥è¢«æŠ›å‡ºã€‚</li>\n<li>throws å…³é”®å­—ç”¨åœ¨æ–¹æ³•å£°æ˜ä¸Šï¼Œå¯ä»¥æŠ›å‡ºå¤šä¸ªå¼‚å¸¸ï¼Œç”¨æ¥æ ‡è¯†è¯¥æ–¹æ³•å¯èƒ½æŠ›å‡ºçš„å¼‚å¸¸åˆ—è¡¨ã€‚ä¸€ä¸ªæ–¹æ³•ç”¨ throws æ ‡è¯†äº†å¯èƒ½æŠ›å‡ºçš„å¼‚å¸¸åˆ—è¡¨ï¼Œè°ƒç”¨è¯¥æ–¹æ³•çš„æ–¹æ³•ä¸­å¿…é¡»åŒ…å«å¯å¤„ç†å¼‚å¸¸çš„ä»£ç ï¼Œå¦åˆ™ä¹Ÿè¦åœ¨æ–¹æ³•ç­¾åä¸­ç”¨ throws å…³é”®å­—å£°æ˜ç›¸åº”çš„å¼‚å¸¸ã€‚</li>\n</ul>\n<h3 id=\"5-try-catch-finally-ä¸­ï¼Œå¦‚æœ-catch-ä¸­-return-äº†ï¼Œfinally-è¿˜ä¼šæ‰§è¡Œå—ï¼Ÿ\"><a href=\"#5-try-catch-finally-ä¸­ï¼Œå¦‚æœ-catch-ä¸­-return-äº†ï¼Œfinally-è¿˜ä¼šæ‰§è¡Œå—ï¼Ÿ\" class=\"headerlink\" title=\"5. try-catch-finally ä¸­ï¼Œå¦‚æœ catch ä¸­ return äº†ï¼Œfinally è¿˜ä¼šæ‰§è¡Œå—ï¼Ÿ\"></a>5. try-catch-finally ä¸­ï¼Œå¦‚æœ catch ä¸­ return äº†ï¼Œfinally è¿˜ä¼šæ‰§è¡Œå—ï¼Ÿ</h3><p><strong>ç­”ï¼šä¼šæ‰§è¡Œï¼Œåœ¨ return å‰æ‰§è¡Œã€‚</strong></p>\n<p><strong>ä»£ç ç¤ºä¾‹1ï¼š</strong></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"type\">int</span> <span class=\"title function_\">getInt</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> <span class=\"variable\">a</span> <span class=\"operator\">=</span> <span class=\"number\">10</span>;</span><br><span class=\"line\">    <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">        System.out.println(a / <span class=\"number\">0</span>);</span><br><span class=\"line\">        a = <span class=\"number\">20</span>;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">catch</span> (ArithmeticException e) &#123;</span><br><span class=\"line\">        a = <span class=\"number\">30</span>;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> a;\t<span class=\"comment\">// ä¸ä¼šç›´æ¥returnï¼Œå…ˆæ‰§è¡Œfinallyï¼Œfinallyæ‰§è¡Œè¿‡åå›æ¥æ‰§è¡Œreturn a</span></span><br><span class=\"line\">    &#125; <span class=\"keyword\">finally</span> &#123;</span><br><span class=\"line\">        a = <span class=\"number\">40</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> a;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>æ‰§è¡Œç»“æœï¼š30</p>\n<p><strong>ä»£ç ç¤ºä¾‹2ï¼š</strong></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"type\">int</span> <span class=\"title function_\">getInt</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> <span class=\"variable\">a</span> <span class=\"operator\">=</span> <span class=\"number\">10</span>;</span><br><span class=\"line\">    <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">        System.out.println(a / <span class=\"number\">0</span>);</span><br><span class=\"line\">        a = <span class=\"number\">20</span>;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">catch</span> (ArithmeticException e) &#123;</span><br><span class=\"line\">        a = <span class=\"number\">30</span>;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> a;\t<span class=\"comment\">// ä¸ä¼šç›´æ¥returnï¼Œå…ˆæ‰§è¡Œfinally</span></span><br><span class=\"line\">    &#125; <span class=\"keyword\">finally</span> &#123;</span><br><span class=\"line\">        a = <span class=\"number\">40</span>;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> a;\t<span class=\"comment\">// finallyä¸­æœ‰returnå°±ç›´æ¥returnäº†</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>æ‰§è¡Œç»“æœï¼š40</p>\n<h3 id=\"6-ç±»-ExampleA-ç»§æ‰¿-Exceptionï¼Œç±»-ExampleB-ç»§æ‰¿ExampleAã€‚\"><a href=\"#6-ç±»-ExampleA-ç»§æ‰¿-Exceptionï¼Œç±»-ExampleB-ç»§æ‰¿ExampleAã€‚\" class=\"headerlink\" title=\"6. ç±» ExampleA ç»§æ‰¿ Exceptionï¼Œç±» ExampleB ç»§æ‰¿ExampleAã€‚\"></a>6. ç±» ExampleA ç»§æ‰¿ Exceptionï¼Œç±» ExampleB ç»§æ‰¿ExampleAã€‚</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">ExceptionA</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">Exception</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"title function_\">ExceptionA</span><span class=\"params\">(String message)</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">super</span>(message);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">ExceptionB</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">ExceptionA</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"title function_\">ExceptionB</span><span class=\"params\">(String message)</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">super</span>(message);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"title class_\">ExceptionB</span>(<span class=\"string\">&quot;a&quot;</span>);</span><br><span class=\"line\">&#125; <span class=\"keyword\">catch</span> (ExceptionA ea) &#123;</span><br><span class=\"line\">  System.out.println(<span class=\"string\">&quot;ExceptionA&quot;</span>);</span><br><span class=\"line\">&#125; <span class=\"keyword\">catch</span> (Exception e) &#123;</span><br><span class=\"line\">  System.out.println(<span class=\"string\">&quot;Exception&quot;</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>è¾“å‡ºï¼šExampleAã€‚ï¼ˆæ ¹æ®é‡Œæ°ä»£æ¢åŸåˆ™[èƒ½ä½¿ç”¨çˆ¶ç±»å‹çš„åœ°æ–¹ä¸€å®šèƒ½ä½¿ç”¨å­ç±»å‹]ï¼ŒæŠ“å– ExceptionA ç±»å‹å¼‚å¸¸çš„ catch å—èƒ½å¤ŸæŠ“ä½ try å—ä¸­æŠ›å‡ºçš„ ExceptionB ç±»å‹çš„å¼‚å¸¸ï¼‰</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"title class_\">ExceptionB</span>(<span class=\"string\">&quot;b&quot;</span>);</span><br><span class=\"line\">&#125; <span class=\"keyword\">catch</span> (Exception e) &#123;</span><br><span class=\"line\">  System.out.println(<span class=\"string\">&quot;Exception: &quot;</span> + e);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>è¾“å‡ºï¼šException: com.yaxing.demo.exceptiondemo.ExceptionB: bï¼Œä»ä¼šä½¿ç”¨å­ç±»å‹ã€‚</p>\n<p>é¢è¯•é¢˜ - è¯´å‡ºä¸‹é¢ä»£ç çš„è¿è¡Œç»“æœã€‚ï¼ˆæ­¤é¢˜çš„å‡ºå¤„æ˜¯ã€ŠJava ç¼–ç¨‹æ€æƒ³ã€‹ä¸€ä¹¦ï¼‰</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Annoyance</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">Exception</span> &#123;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Sneeze</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">Annoyance</span> &#123;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Human</span> &#123;</span><br><span class=\"line\">\t<span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> <span class=\"keyword\">throws</span> Exception &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Sneeze</span>();</span><br><span class=\"line\">\t\t\t&#125; <span class=\"keyword\">catch</span> ( Annoyance a ) &#123;</span><br><span class=\"line\">\t\t\t\tSystem.out.println(<span class=\"string\">&quot;Caught Annoyance&quot;</span>);</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">throw</span> a;</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t&#125; <span class=\"keyword\">catch</span> ( Sneeze s ) &#123;</span><br><span class=\"line\">\t\t\tSystem.out.println(<span class=\"string\">&quot;Caught Sneeze&quot;</span>);</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">return</span> ;</span><br><span class=\"line\">\t\t&#125; <span class=\"keyword\">finally</span> &#123;</span><br><span class=\"line\">\t\t\tSystem.out.println(<span class=\"string\">&quot;Hello World!&quot;</span>);</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ç»“æœ</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Caught Annoyance</span><br><span class=\"line\">Caught Sneeze</span><br><span class=\"line\">Hello World!</span><br></pre></td></tr></table></figure>"},{"title":"Javaå…«è‚¡æ–‡ - Javaå¹¶å‘","copyright":true,"mathjax":false,"date":"2023-01-23T07:29:48.000Z","toc":true,"urlname":"java-concurrent-programming","_content":"\n> æ•´ç†çš„Javaå¹¶å‘ç›¸å…³çŸ¥è¯†ç‚¹å’Œé¢è¯•é¢˜ï¼Œéƒ¨åˆ†å†…å®¹æ‘˜è‡ªç½‘ç»œï¼Œå¦‚æœ‰ä¾µæƒè¯·è”ç³»æˆ‘ï½\t<!--more-->\n\n## åŸºç¡€çŸ¥è¯†\n\n### å¹¶å‘ç¼–ç¨‹çš„ä¼˜ç¼ºç‚¹\n\nä¼˜ç‚¹ï¼šä¸ºäº†èƒ½æé«˜ç¨‹åºçš„æ‰§è¡Œæ•ˆç‡ï¼Œæé«˜ç¨‹åºè¿è¡Œé€Ÿåº¦ï¼›\n\nç¼ºç‚¹ï¼šå­˜åœ¨å†…å­˜æ³„æ¼ã€ä¸Šä¸‹æ–‡åˆ‡æ¢ã€çº¿ç¨‹å®‰å…¨ã€æ­»é”ç­‰é—®é¢˜ã€‚\n\n#### å¹¶å‘ç¼–ç¨‹ä¸‰è¦ç´ æ˜¯ä»€ä¹ˆï¼Ÿåœ¨ Java ç¨‹åºä¸­æ€ä¹ˆä¿è¯å¤šçº¿ç¨‹çš„è¿è¡Œå®‰å…¨ï¼Ÿ\n\nå¹¶å‘ç¼–ç¨‹ä¸‰è¦ç´ ï¼ˆçº¿ç¨‹çš„å®‰å…¨æ€§é—®é¢˜ä½“ç°åœ¨ï¼‰ï¼š\n\n**åŸå­æ€§**ï¼šåŸå­ï¼Œå³ä¸€ä¸ªä¸å¯å†è¢«åˆ†å‰²çš„é¢—ç²’ã€‚åŸå­æ€§æŒ‡çš„æ˜¯ä¸€ä¸ªæˆ–å¤šä¸ªæ“ä½œè¦ä¹ˆå…¨éƒ¨æ‰§è¡ŒæˆåŠŸè¦ä¹ˆå…¨éƒ¨æ‰§è¡Œå¤±è´¥ã€‚ï¼ˆsynchronizedï¼ŒLockï¼‰ï¼ˆçº¿ç¨‹åˆ‡æ¢å¼•èµ·çš„åŸå­æ€§é—®é¢˜ï¼‰\n\n**å¯è§æ€§**ï¼šä¸€ä¸ªçº¿ç¨‹å¯¹å…±äº«å˜é‡çš„ä¿®æ”¹ï¼Œå¦ä¸€ä¸ªçº¿ç¨‹èƒ½å¤Ÿç«‹åˆ»çœ‹åˆ°ã€‚ï¼ˆsynchronizedï¼ŒLockï¼Œvolatileï¼‰ï¼ˆJMM å†…å­˜æ¨¡å‹å¯¼è‡´çš„å¯è§æ€§é—®é¢˜ï¼‰\n\n**æœ‰åºæ€§**ï¼šç¨‹åºæ‰§è¡Œçš„é¡ºåºæŒ‰ç…§ä»£ç çš„å…ˆåé¡ºåºæ‰§è¡Œã€‚ï¼ˆsynchronizedï¼ŒLockï¼Œvolatileï¼‰ï¼ˆæŒ‡ä»¤é‡æ’åºå¸¦æ¥çš„æœ‰åºæ€§é—®é¢˜ï¼‰\n\n> volatileä¸èƒ½ä¿è¯å¹¶å‘å®‰å…¨ï¼Œæ¯”å¦‚å¤šçº¿ç¨‹å¯¹ä¸€ä¸ªvolatileçš„intå˜é‡è¿›è¡ŒåŠ 1æ“ä½œï¼Œæœ€ç»ˆå¾—åˆ°çš„æ•°å­—å¯èƒ½æ¯”é¢„æœŸå°ï¼Œå°±æ˜¯å› ä¸º++æ“ä½œä¸æ˜¯åŸå­æ€§çš„ï¼Œè€Œvolatileä¹Ÿä¸èƒ½ä¿è¯åŸå­æ€§ï¼Œæ‰€ä»¥å°±ä¼šæœ‰è¿™ä¸ªé—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨`atomicInteger.getAndSet()`åŸå­æ“ä½œã€‚\n\n### çº¿ç¨‹å’Œè¿›ç¨‹\n\n#### è¿›ç¨‹é—´çš„é€šä¿¡æ–¹å¼\n\n1. **ç®¡é“/åŒ¿åç®¡é“(Pipes)** ï¼šç”¨äºå…·æœ‰äº²ç¼˜å…³ç³»çš„çˆ¶å­è¿›ç¨‹é—´æˆ–è€…å…„å¼Ÿè¿›ç¨‹ä¹‹é—´çš„é€šä¿¡ï¼›\n2. **æœ‰åç®¡é“(Names Pipes)**ï¼šåŒ¿åç®¡é“ç”±äºæ²¡æœ‰åå­—ï¼Œåªèƒ½ç”¨äºäº²ç¼˜å…³ç³»çš„è¿›ç¨‹é—´é€šä¿¡ã€‚ä¸ºäº†å…‹æœè¿™ä¸ªç¼ºç‚¹ï¼Œæå‡ºäº†æœ‰åç®¡é“ã€‚æœ‰åç®¡é“ä¸¥æ ¼éµå¾ª**å…ˆè¿›å…ˆå‡º(first in first out)**ã€‚æœ‰åç®¡é“ä»¥ç£ç›˜æ–‡ä»¶çš„æ–¹å¼å­˜åœ¨ï¼Œå¯ä»¥å®ç°æœ¬æœºä»»æ„ä¸¤ä¸ªè¿›ç¨‹é€šä¿¡ï¼›\n3. **ä¿¡å·(Signal)** ï¼šä¿¡å·æ˜¯ä¸€ç§æ¯”è¾ƒå¤æ‚çš„é€šä¿¡æ–¹å¼ï¼Œç”¨äºé€šçŸ¥æ¥æ”¶è¿›ç¨‹æŸä¸ªäº‹ä»¶å·²ç»å‘ç”Ÿï¼›\n4. **æ¶ˆæ¯é˜Ÿåˆ—(Message Queuing)** ï¼šæ¶ˆæ¯é˜Ÿåˆ—æ˜¯æ¶ˆæ¯çš„é“¾è¡¨ï¼Œå…·æœ‰ç‰¹å®šçš„æ ¼å¼ï¼Œå­˜æ”¾åœ¨å†…å­˜ä¸­å¹¶ç”±æ¶ˆæ¯é˜Ÿåˆ—æ ‡è¯†ç¬¦æ ‡è¯†ã€‚**æ¶ˆæ¯é˜Ÿåˆ—å…‹æœäº†ä¿¡å·æ‰¿è½½ä¿¡æ¯é‡å°‘ï¼Œç®¡é“åªèƒ½æ‰¿è½½æ— æ ¼å¼å­—èŠ‚æµä»¥åŠç¼“å†²åŒºå¤§å°å—é™ç­‰ç¼ºç‚¹**ï¼›\n5. **ä¿¡å·é‡(Semaphores)** ï¼šä¿¡å·é‡æ˜¯ä¸€ä¸ªè®¡æ•°å™¨ï¼Œç”¨äºå¤šè¿›ç¨‹å¯¹å…±äº«æ•°æ®çš„è®¿é—®ï¼Œä¿¡å·é‡çš„æ„å›¾åœ¨äºè¿›ç¨‹é—´åŒæ­¥ã€‚è¿™ç§é€šä¿¡æ–¹å¼ä¸»è¦ç”¨äºè§£å†³ä¸åŒæ­¥ç›¸å…³çš„é—®é¢˜å¹¶é¿å…ç«äº‰æ¡ä»¶ã€‚  \n6. **å…±äº«å†…å­˜(Shared memory)** ï¼šä½¿å¾—å¤šä¸ªè¿›ç¨‹å¯ä»¥è®¿é—®åŒä¸€å—å†…å­˜ç©ºé—´ï¼Œä¸åŒè¿›ç¨‹å¯ä»¥åŠæ—¶çœ‹åˆ°å¯¹æ–¹è¿›ç¨‹ä¸­å¯¹å…±äº«å†…å­˜ä¸­æ•°æ®çš„æ›´æ–°ã€‚è¿™ç§æ–¹å¼éœ€è¦ä¾é æŸç§åŒæ­¥æ“ä½œï¼Œå¦‚äº’æ–¥é”å’Œä¿¡å·é‡ç­‰ã€‚å¯ä»¥è¯´è¿™æ˜¯æœ€æœ‰ç”¨çš„è¿›ç¨‹é—´é€šä¿¡æ–¹å¼ã€‚\n7. **å¥—æ¥å­—(Sockets)**ï¼šæ­¤æ–¹æ³•ä¸»è¦ç”¨äºåœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´é€šè¿‡ç½‘ç»œè¿›è¡Œé€šä¿¡ã€‚å¥—æ¥å­—æ˜¯æ”¯æŒ TCP/IP çš„ç½‘ç»œé€šä¿¡çš„åŸºæœ¬æ“ä½œå•å…ƒï¼Œå¯ä»¥çœ‹åšæ˜¯ä¸åŒä¸»æœºä¹‹é—´çš„è¿›ç¨‹è¿›è¡ŒåŒå‘é€šä¿¡çš„ç«¯ç‚¹ï¼Œç®€å•çš„è¯´å°±æ˜¯é€šä¿¡çš„ä¸¤æ–¹çš„ä¸€ç§çº¦å®šï¼Œç”¨å¥—æ¥å­—ä¸­çš„ç›¸å…³å‡½æ•°æ¥å®Œæˆé€šä¿¡è¿‡ç¨‹ã€‚\n\n#### çº¿ç¨‹é—´çš„åŒæ­¥æ–¹å¼\n\nçº¿ç¨‹åŒæ­¥æ˜¯ä¸¤ä¸ªæˆ–å¤šä¸ªå…±äº«å…³é”®èµ„æºçš„çº¿ç¨‹çš„å¹¶å‘æ‰§è¡Œã€‚åº”è¯¥åŒæ­¥çº¿ç¨‹ä»¥é¿å…å…³é”®çš„èµ„æºä½¿ç”¨å†²çªã€‚\n\n1. **äº’æ–¥é‡(Mutex)**ï¼šé‡‡ç”¨äº’æ–¥å¯¹è±¡æœºåˆ¶ï¼Œåªæœ‰æ‹¥æœ‰äº’æ–¥å¯¹è±¡çš„çº¿ç¨‹æ‰æœ‰è®¿é—®å…¬å…±èµ„æºçš„æƒé™ã€‚å› ä¸ºäº’æ–¥å¯¹è±¡åªæœ‰ä¸€ä¸ªï¼Œæ‰€ä»¥å¯ä»¥ä¿è¯å…¬å…±èµ„æºä¸ä¼šè¢«å¤šä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®ï¼Œæ¯”å¦‚ Java ä¸­çš„ synchronized å…³é”®è¯å’Œå„ç§ Lock éƒ½æ˜¯è¿™ç§æœºåˆ¶ï¼›\n2. **ä¿¡å·é‡(Semphares)** ï¼šå®ƒå…è®¸åŒä¸€æ—¶åˆ»å¤šä¸ªçº¿ç¨‹è®¿é—®åŒä¸€èµ„æºï¼Œä½†æ˜¯éœ€è¦æ§åˆ¶åŒä¸€æ—¶åˆ»è®¿é—®æ­¤èµ„æºçš„æœ€å¤§çº¿ç¨‹æ•°é‡ï¼›\n3. **äº‹ä»¶(Event)** ï¼šwait/notifyï¼šé€šè¿‡é€šçŸ¥æ“ä½œçš„æ–¹å¼æ¥ä¿æŒå¤šçº¿ç¨‹åŒæ­¥ï¼Œè¿˜å¯ä»¥æ–¹ä¾¿çš„å®ç°å¤šçº¿ç¨‹ä¼˜å…ˆçº§çš„æ¯”è¾ƒæ“ä½œã€‚\n\n#### ä»€ä¹ˆæ˜¯çº¿ç¨‹å’Œè¿›ç¨‹?\n\n**è¿›ç¨‹**ï¼šè¿›ç¨‹æ˜¯åº”ç”¨ç¨‹åºçš„ä¸€æ¬¡è¿è¡Œï¼Œæ¯ä¸ªè¿›ç¨‹éƒ½æœ‰è‡ªå·±ç‹¬ç«‹çš„å†…å­˜ç©ºé—´ï¼›æ˜¯æ“ä½œç³»ç»Ÿèµ„æºåˆ†é…çš„åŸºæœ¬å•ä½ï¼›\n\n**çº¿ç¨‹**ï¼šçº¿ç¨‹æ˜¯å¤„ç†å™¨è°ƒåº¦å’Œæ‰§è¡Œçš„åŸºæœ¬å•ä½ï¼Œä¸€ä¸ªè¿›ç¨‹ä¸­å¯ä»¥æœ‰å¤šä¸ªçº¿ç¨‹ï¼Œçº¿ç¨‹å…±äº«è¿›ç¨‹çš„å†…å­˜ç©ºé—´å’Œèµ„æºã€‚\n\n#### ä»€ä¹ˆæ˜¯ä¸Šä¸‹æ–‡åˆ‡æ¢?\n\nå¤šçº¿ç¨‹ç¼–ç¨‹ä¸­ä¸€èˆ¬çº¿ç¨‹çš„ä¸ªæ•°éƒ½å¤§äº CPU æ ¸å¿ƒçš„ä¸ªæ•°ï¼Œè€Œä¸€ä¸ª CPU æ ¸å¿ƒåœ¨ä»»æ„æ—¶åˆ»åªèƒ½è¢«ä¸€ä¸ªçº¿ç¨‹ä½¿ç”¨ï¼Œä¸ºäº†è®©è¿™äº›çº¿ç¨‹éƒ½èƒ½å¾—åˆ°æœ‰æ•ˆæ‰§è¡Œï¼ŒCPU é‡‡å–çš„ç­–ç•¥æ˜¯ä¸ºæ¯ä¸ªçº¿ç¨‹åˆ†é…æ—¶é—´ç‰‡å¹¶è½®è½¬çš„å½¢å¼ã€‚\n\nå½“å‰ä»»åŠ¡åœ¨æ‰§è¡Œå®Œ CPU æ—¶é—´ç‰‡åˆ‡æ¢åˆ°å¦ä¸€ä¸ªä»»åŠ¡ä¹‹å‰ä¼šå…ˆä¿å­˜è‡ªå·±çš„çŠ¶æ€ï¼Œä»¥ä¾¿ä¸‹æ¬¡å†åˆ‡æ¢å›è¿™ä¸ªä»»åŠ¡æ—¶ï¼Œå¯ä»¥å†åŠ è½½è¿™ä¸ªä»»åŠ¡çš„çŠ¶æ€ã€‚**ä»»åŠ¡ä»ä¿å­˜åˆ°å†åŠ è½½çš„è¿‡ç¨‹å°±æ˜¯ä¸€æ¬¡ä¸Šä¸‹æ–‡åˆ‡æ¢**ã€‚\n\nä¸Šä¸‹æ–‡åˆ‡æ¢å¯¹ç³»ç»Ÿæ¥è¯´æ„å‘³ç€æ¶ˆè€—å¤§é‡çš„ CPU æ—¶é—´ï¼Œäº‹å®ä¸Šï¼Œå¯èƒ½æ˜¯æ“ä½œç³»ç»Ÿä¸­æ—¶é—´æ¶ˆè€—æœ€å¤§çš„æ“ä½œã€‚\n\n#### å®ˆæŠ¤çº¿ç¨‹å’Œç”¨æˆ·çº¿ç¨‹æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿ\n\n- **ç”¨æˆ· (User) çº¿ç¨‹**ï¼šè¿è¡Œåœ¨å‰å°ï¼Œæ‰§è¡Œå…·ä½“çš„ä»»åŠ¡\n- **å®ˆæŠ¤ (Daemon) çº¿ç¨‹**ï¼šè¿è¡Œåœ¨åå°ï¼Œä¸ºå…¶ä»–å‰å°çº¿ç¨‹æœåŠ¡ã€‚ä¸€æ—¦æ‰€æœ‰ç”¨æˆ·çº¿ç¨‹éƒ½ç»“æŸè¿è¡Œï¼Œå®ˆæŠ¤çº¿ç¨‹ä¼šéš JVM ä¸€èµ·ç»“æŸå·¥ä½œ\n\n**æ³¨æ„äº‹é¡¹ï¼š**\n\n1. `setDaemon(true)`å¿…é¡»åœ¨`start()`æ–¹æ³•å‰æ‰§è¡Œï¼Œå¦åˆ™ä¼šæŠ›å‡º `IllegalThreadStateException` å¼‚å¸¸\n2. åœ¨å®ˆæŠ¤çº¿ç¨‹ä¸­äº§ç”Ÿçš„æ–°çº¿ç¨‹ä¹Ÿæ˜¯å®ˆæŠ¤çº¿ç¨‹\n3. ä¸æ˜¯æ‰€æœ‰çš„ä»»åŠ¡éƒ½å¯ä»¥åˆ†é…ç»™å®ˆæŠ¤çº¿ç¨‹æ¥æ‰§è¡Œï¼Œæ¯”å¦‚è¯»å†™æ“ä½œæˆ–è€…è®¡ç®—é€»è¾‘\n4. å®ˆæŠ¤ (Daemon) çº¿ç¨‹ä¸­ä¸èƒ½ä¾é  finally å—çš„å†…å®¹æ¥ç¡®ä¿æ‰§è¡Œå…³é—­æˆ–æ¸…ç†èµ„æºçš„é€»è¾‘ã€‚å› ä¸ºæˆ‘ä»¬ä¸Šé¢ä¹Ÿè¯´è¿‡äº†ä¸€æ—¦æ‰€æœ‰ç”¨æˆ·çº¿ç¨‹éƒ½ç»“æŸè¿è¡Œï¼Œå®ˆæŠ¤çº¿ç¨‹ä¼šéš JVM ä¸€èµ·ç»“æŸå·¥ä½œï¼Œæ‰€ä»¥å®ˆæŠ¤ (Daemon) çº¿ç¨‹ä¸­çš„ finally è¯­å¥å—å¯èƒ½æ— æ³•è¢«æ‰§è¡Œã€‚\n\n#### å¦‚ä½•åœ¨ Windows å’Œ Linux ä¸ŠæŸ¥æ‰¾å“ªä¸ªçº¿ç¨‹cpuåˆ©ç”¨ç‡æœ€é«˜ï¼Ÿ\n\nWindowsä¸Šé¢ç”¨ä»»åŠ¡ç®¡ç†å™¨çœ‹ï¼ŒLinuxä¸‹å¯ä»¥ç”¨ top è¿™ä¸ªå‘½ä»¤çœ‹ã€‚\n\n#### ä»€ä¹ˆæ˜¯çº¿ç¨‹æ­»é”\n\næ­»é”æ˜¯æŒ‡ä¸¤ä¸ªæˆ–ä¸¤ä¸ªä»¥ä¸Šçš„è¿›ç¨‹ï¼ˆçº¿ç¨‹ï¼‰åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œç”±äºç«äº‰èµ„æºé€ æˆçš„ä¸€ç§é˜»å¡çš„ç°è±¡ï¼Œè‹¥æ— å¤–åŠ›ä½œç”¨ï¼Œå®ƒä»¬éƒ½å°†æ— æ³•æ¨è¿›ä¸‹å»ã€‚\n\nå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œçº¿ç¨‹ A æŒæœ‰èµ„æº 2ï¼Œçº¿ç¨‹ B æŒæœ‰èµ„æº 1ï¼Œä»–ä»¬åŒæ—¶éƒ½æƒ³ç”³è¯·å¯¹æ–¹çš„èµ„æºï¼Œæ‰€ä»¥è¿™ä¸¤ä¸ªçº¿ç¨‹å°±ä¼šäº’ç›¸ç­‰å¾…è€Œè¿›å…¥æ­»é”çŠ¶æ€ã€‚\n\n![çº¿ç¨‹æ­»é”](https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/202206152131355.png)\n\nä¸‹é¢é€šè¿‡ä¸€ä¸ªä¾‹å­æ¥è¯´æ˜çº¿ç¨‹æ­»é”ï¼Œä»£ç æ¨¡æ‹Ÿäº†ä¸Šå›¾çš„æ­»é”çš„æƒ…å†µ (ä»£ç æ¥æºäºã€Šå¹¶å‘ç¼–ç¨‹ä¹‹ç¾ã€‹)ï¼š\n\n```java\npublic class DeadLockDemo {\n    private static Object resource1 = new Object();\t//èµ„æº 1\n    private static Object resource2 = new Object();\t//èµ„æº 2\n\n    public static void main(String[] args) {\n        new Thread(() -> {\n            synchronized (resource1) {\n                System.out.println(Thread.currentThread() + \"get resource1\");\n                try {\n                    Thread.sleep(1000);\n                } catch (InterruptedException e) {\n                    e.printStackTrace();\n                }\n                System.out.println(Thread.currentThread() + \"waiting get resource2\");\n                synchronized (resource2) {\n                    System.out.println(Thread.currentThread() + \"get resource2\");\n                }\n            }\n        }, \"çº¿ç¨‹ 1\").start();\n\n        new Thread(() -> {\n            synchronized (resource2) {\n                System.out.println(Thread.currentThread() + \"get resource2\");\n                try {\n                    Thread.sleep(1000);\n                } catch (InterruptedException e) {\n                    e.printStackTrace();\n                }\n                System.out.println(Thread.currentThread() + \"waiting get resource1\");\n                synchronized (resource1) {\n                    System.out.println(Thread.currentThread() + \"get resource1\");\n                }\n            }\n        }, \"çº¿ç¨‹ 2\").start();\n    }\n}\n```\n\nè¾“å‡ºç»“æœ\n\n```java\nThread[çº¿ç¨‹ 1,5,main]get resource1\nThread[çº¿ç¨‹ 2,5,main]get resource2\nThread[çº¿ç¨‹ 1,5,main]waiting get resource2\nThread[çº¿ç¨‹ 2,5,main]waiting get resource1\n```\n\nçº¿ç¨‹ A é€šè¿‡ synchronized (resource1) è·å¾— resource1 çš„ç›‘è§†å™¨é”ï¼Œç„¶åé€šè¿‡`Thread.sleep(1000)`ï¼›è®©çº¿ç¨‹ A ä¼‘çœ  1s ä¸ºçš„æ˜¯è®©çº¿ç¨‹ B å¾—åˆ°CPUæ‰§è¡Œæƒï¼Œç„¶åè·å–åˆ° resource2 çš„ç›‘è§†å™¨é”ã€‚çº¿ç¨‹ A å’Œçº¿ç¨‹ B ä¼‘çœ ç»“æŸäº†éƒ½å¼€å§‹ä¼å›¾è¯·æ±‚è·å–å¯¹æ–¹çš„èµ„æºï¼Œç„¶åè¿™ä¸¤ä¸ªçº¿ç¨‹å°±ä¼šé™·å…¥äº’ç›¸ç­‰å¾…çš„çŠ¶æ€ï¼Œè¿™ä¹Ÿå°±äº§ç”Ÿäº†æ­»é”ã€‚ä¸Šé¢çš„ä¾‹å­ç¬¦åˆäº§ç”Ÿæ­»é”çš„å››ä¸ªå¿…è¦æ¡ä»¶ã€‚\n\n#### å½¢æˆæ­»é”çš„å››ä¸ªå¿…è¦æ¡ä»¶æ˜¯ä»€ä¹ˆ\n\n1. äº’æ–¥æ¡ä»¶ï¼šä¸€ä¸ªèµ„æºåªèƒ½è¢«ä¸€ä¸ªçº¿ç¨‹å ç”¨ï¼Œç›´åˆ°è¢«è¯¥çº¿ç¨‹é‡Šæ”¾ï¼›\n2. è¯·æ±‚ä¸ä¿æŒæ¡ä»¶ï¼šä¸€ä¸ªçº¿ç¨‹å› è¯·æ±‚è¢«å ç”¨èµ„æºè€Œå‘ç”Ÿé˜»å¡æ—¶ï¼Œå¯¹å·²è·å¾—çš„èµ„æºä¿æŒä¸æ”¾ï¼›\n3. ä¸å‰¥å¤ºæ¡ä»¶ï¼šçº¿ç¨‹ï¼›å·²è·å¾—çš„èµ„æºåœ¨æœ«ä½¿ç”¨å®Œä¹‹å‰ä¸èƒ½è¢«å…¶ä»–çº¿ç¨‹å¼ºè¡Œå‰¥å¤ºï¼Œåªæœ‰è‡ªå·±ä½¿ç”¨å®Œæ¯•åæ‰é‡Šæ”¾èµ„æºï¼›\n4. å¾ªç¯ç­‰å¾…æ¡ä»¶ï¼šå½“å‘ç”Ÿæ­»é”æ—¶ï¼Œæ‰€ç­‰å¾…çš„çº¿ç¨‹å¿…å®šä¼šå½¢æˆä¸€ä¸ªç¯è·¯ï¼ˆç±»ä¼¼äºæ­»å¾ªç¯ï¼‰ï¼Œé€ æˆæ°¸ä¹…é˜»å¡\n\n#### å¦‚ä½•é¿å…çº¿ç¨‹æ­»é”\n\næˆ‘ä»¬åªè¦ç ´åäº§ç”Ÿæ­»é”çš„å››ä¸ªæ¡ä»¶ä¸­çš„å…¶ä¸­ä¸€ä¸ªå°±å¯ä»¥äº†ã€‚\n\n**ç ´åäº’æ–¥æ¡ä»¶**ï¼šæ— æ³•ç ´åï¼Œå› ä¸ºæˆ‘ä»¬ç”¨é”æœ¬æ¥å°±æ˜¯æƒ³å®ç°äº’æ–¥è®¿é—®ä¸´ç•Œèµ„æºï¼›\n\n**ç ´åè¯·æ±‚ä¸ä¿æŒæ¡ä»¶**ï¼šä¸€æ¬¡æ€§ç”³è¯·æ‰€æœ‰çš„èµ„æºï¼›\n\n**ç ´åä¸å‰¥å¤ºæ¡ä»¶**ï¼šå ç”¨éƒ¨åˆ†èµ„æºçš„çº¿ç¨‹è¿›ä¸€æ­¥ç”³è¯·å…¶ä»–èµ„æºæ—¶ï¼Œ**å¦‚æœç”³è¯·ä¸åˆ°ï¼Œå¯ä»¥ä¸»åŠ¨é‡Šæ”¾å®ƒå æœ‰çš„èµ„æº**ï¼›\n\n**ç ´åå¾ªç¯ç­‰å¾…æ¡ä»¶**ï¼šé **æŒ‰åºç”³è¯·**èµ„æºæ¥é¢„é˜²ã€‚æŒ‰æŸä¸€é¡ºåºç”³è¯·èµ„æºï¼Œé‡Šæ”¾èµ„æºåˆ™ååºé‡Šæ”¾ã€‚ç ´åå¾ªç¯ç­‰å¾…æ¡ä»¶ã€‚\n\næˆ‘ä»¬å¯¹çº¿ç¨‹ 2 çš„ä»£ç ä¿®æ”¹æˆä¸‹é¢è¿™æ ·å°±ä¸ä¼šäº§ç”Ÿæ­»é”äº†ã€‚\n\n```java\nnew Thread(() -> {\n    synchronized (resource1) {\n        System.out.println(Thread.currentThread() + \"get resource1\");\n        try {\n            Thread.sleep(1000);\n        } catch (InterruptedException e) {\n            e.printStackTrace();\n        }\n        System.out.println(Thread.currentThread() + \"waiting get resource2\");\n        synchronized (resource2) {\n            System.out.println(Thread.currentThread() + \"get resource2\");\n        }\n    }\n}, \"çº¿ç¨‹ 2\").start();\n```\n\nè¾“å‡ºç»“æœ\n\n```java\nThread[çº¿ç¨‹ 1,5,main]get resource1\nThread[çº¿ç¨‹ 1,5,main]waiting get resource2\nThread[çº¿ç¨‹ 1,5,main]get resource2\nThread[çº¿ç¨‹ 2,5,main]get resource1\nThread[çº¿ç¨‹ 2,5,main]waiting get resource2\nThread[çº¿ç¨‹ 2,5,main]get resource2\n```\n\næˆ‘ä»¬åˆ†æä¸€ä¸‹ä¸Šé¢çš„ä»£ç ä¸ºä»€ä¹ˆé¿å…äº†æ­»é”çš„å‘ç”Ÿ?\n\nçº¿ç¨‹ 1 é¦–å…ˆè·å¾—åˆ° resource1 çš„ç›‘è§†å™¨é”ï¼Œè¿™æ—¶å€™çº¿ç¨‹ 2 å°±è·å–ä¸åˆ°äº†ã€‚ç„¶åçº¿ç¨‹ 1 å†å»è·å– resource2 çš„ç›‘è§†å™¨é”ï¼Œå¯ä»¥è·å–åˆ°ã€‚ç„¶åçº¿ç¨‹ 1 é‡Šæ”¾äº†å¯¹ resource1ã€resource2 çš„ç›‘è§†å™¨é”çš„å ç”¨ï¼Œçº¿ç¨‹ 2 è·å–åˆ°å°±å¯ä»¥æ‰§è¡Œäº†ã€‚è¿™æ ·å°±ç ´åäº†ç ´åå¾ªç¯ç­‰å¾…æ¡ä»¶ï¼Œå› æ­¤é¿å…äº†æ­»é”ã€‚\n\n#### åˆ›å»ºçº¿ç¨‹æœ‰å“ªå‡ ç§æ–¹å¼ï¼Ÿ\n\nåˆ›å»ºçº¿ç¨‹æœ‰å››ç§æ–¹å¼ï¼š\n\n- ç»§æ‰¿ Thread ç±»ï¼›\n- å®ç° Runnable æ¥å£ï¼›\n- å®ç° Callable æ¥å£ï¼›\n- ä½¿ç”¨ Executors å·¥å…·ç±»åˆ›å»ºçº¿ç¨‹æ± \n\n**ç»§æ‰¿ Thread ç±»**\n\n1. å®šä¹‰ä¸€ä¸ª Thread ç±»çš„å­ç±»ï¼Œé‡å†™ run æ–¹æ³•\n2. åˆ›å»ºè‡ªå®šä¹‰çš„çº¿ç¨‹å­ç±»å¯¹è±¡\n3. è°ƒç”¨å­ç±»å®ä¾‹çš„ start() æ–¹æ³•æ¥å¯åŠ¨çº¿ç¨‹\n\n```java\npublic class Main {\n    static class MyThread extends Thread {\n\n        @Override\n        public void run() {\n            System.out.println(Thread.currentThread().getName() + \" run()æ–¹æ³•æ­£åœ¨æ‰§è¡Œ...\");\n        }\n\n    }\n    public static void main(String[] args) {\n        new MyThread().start();\n        try {\n            Thread.sleep(10);\n        } catch (InterruptedException e) {\n            e.printStackTrace();\n        }\n        System.out.println(Thread.currentThread().getName() + \" main()æ–¹æ³•æ‰§è¡Œç»“æŸ\");\n    }\n}\n```\n\n**å®ç° Runnable æ¥å£**\n\n1. å®šä¹‰ Runnable æ¥å£å®ç°ç±» MyRunnableï¼Œå¹¶é‡å†™ run() æ–¹æ³•\n2. åˆ›å»º MyRunnable å®ä¾‹ myRunnableï¼Œä»¥ myRunnable ä½œä¸º target åˆ›å»º Thread å¯¹è±¡ï¼Œ**è¯¥Threadå¯¹è±¡æ‰æ˜¯çœŸæ­£çš„çº¿ç¨‹å¯¹è±¡**\n3. è°ƒç”¨çº¿ç¨‹å¯¹è±¡çš„ start() æ–¹æ³•\n\n```java\npublic class Main {\n    static class MyRunnable implements Runnable {\n\n        @Override\n        public void run() {\n            System.out.println(Thread.currentThread().getName() + \" run()æ–¹æ³•æ­£åœ¨æ‰§è¡Œ...\");\n        }\n\n    }\n    public static void main(String[] args) {\n        new Thread(new MyRunnable()).start();\n        try {\n            Thread.sleep(10);\n        } catch (InterruptedException e) {\n            e.printStackTrace();\n        }\n        System.out.println(Thread.currentThread().getName() + \" main()æ–¹æ³•æ‰§è¡Œç»“æŸ\");\n    }\n}\n```\n\n**å®ç° Callable æ¥å£**\n\n1. åˆ›å»ºå®ç° Callable æ¥å£çš„ç±» myCallable\n2. â­ä»¥ myCallable ä¸ºå‚æ•°åˆ›å»º FutureTask å¯¹è±¡\n3. å°† FutureTask ä½œä¸ºå‚æ•°åˆ›å»º Thread å¯¹è±¡\n4. è°ƒç”¨çº¿ç¨‹å¯¹è±¡çš„ start() æ–¹æ³•\n\n```java\npublic class Main {\n    static class MyCallable implements Callable<Integer> {\n\n        @Override\n        public Integer call() throws Exception {\n            System.out.println(Thread.currentThread().getName() + \" call()æ–¹æ³•æ‰§è¡Œä¸­...\");\n            return 1;\n        }\n    }\n\n    public static void main(String[] args) {\n        FutureTask<Integer> futureTask = new FutureTask<>(new MyCallable());\n        new Thread(futureTask).start();\n        try {\n            Thread.sleep(10);\n            System.out.println(futureTask.get());\n        } catch (InterruptedException | ExecutionException e) {\n            e.printStackTrace();\n        }\n        System.out.println(Thread.currentThread().getName() + \" main()æ–¹æ³•æ‰§è¡Œå®Œæˆ\");\n    }\n}\n```\n\n**ä½¿ç”¨ Executors å·¥å…·ç±»åˆ›å»ºçº¿ç¨‹æ± **\n\nExecutors æä¾›äº†ä¸€ç³»åˆ—å·¥å‚æ–¹æ³•ç”¨äºåˆ›å»ºçº¿ç¨‹æ± ï¼Œè¿”å›çš„çº¿ç¨‹æ± éƒ½å®ç°äº† ExecutorService æ¥å£ã€‚\n\nä¸»è¦æœ‰ new[Single/Fixed/Cached/Scheduled]ThreadPool è¿™å››ç§çº¿ç¨‹æ± \n\n```java\npublic class MyRunnable implements Runnable {\n    @Override\n    public void run() {\n        System.out.println(Thread.currentThread().getName() + \" run()æ–¹æ³•æ‰§è¡Œä¸­...\");\n    }\n}\n\npublic class SingleThreadExecutorTest {n\n    public static void main(String[] args) {\n        ExecutorService executorService = Executors.newSingleThreadExecutor();\n        MyRunnable myRunnable = new MyRunnable();\n        for (int i = 0; i < 5; i++) {\n            executorService.execute(myRunnable);\n        }\n\n        System.out.println(\"çº¿ç¨‹ä»»åŠ¡å¼€å§‹æ‰§è¡Œ\");\n        executorService.shutdown();\n    }\n}\n```\n\n#### è¯´ä¸€ä¸‹ runnable å’Œ callable æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\n\nç›¸åŒç‚¹\n\n- éƒ½æ˜¯æ¥å£\n- éƒ½å¯ä»¥ç”¨æ¥å®ç°å¤šçº¿ç¨‹\n- éƒ½é‡‡ç”¨ Thread.start() å¯åŠ¨çº¿ç¨‹\n\n**ä¸»è¦åŒºåˆ«**\n\n- Runnable æ¥å£ run æ–¹æ³•æ— è¿”å›å€¼ï¼›Callable æ¥å£ call æ–¹æ³•æœ‰è¿”å›å€¼ï¼Œå’Œ FutureTask é…åˆå¯ä»¥ç”¨æ¥è·å–å¼‚æ­¥æ‰§è¡Œçš„ç»“æœ\n- Runnable æ¥å£ run æ–¹æ³•æ— æ³•æ•è·å¹¶å¤„ç†å¼‚å¸¸ï¼›Callable æ¥å£ call æ–¹æ³•å¯ä»¥æ•è·å¹¶å¤„ç†å¼‚å¸¸\n\n#### çº¿ç¨‹çš„ run()å’Œ start()æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\n\n> start() æ–¹æ³•æ¥å¯åŠ¨ä¸€ä¸ªçº¿ç¨‹ï¼ŒçœŸæ­£å®ç°äº†å¤šçº¿ç¨‹è¿è¡Œã€‚è°ƒç”¨ start() æ–¹æ³•æ— éœ€ç­‰å¾…runæ–¹æ³•ä½“ä»£ç æ‰§è¡Œå®Œæ¯•ï¼Œå¯ä»¥ç›´æ¥ç»§ç»­æ‰§è¡Œå…¶ä»–çš„ä»£ç ï¼› æ­¤æ—¶çº¿ç¨‹æ˜¯å¤„äºå°±ç»ªçŠ¶æ€ï¼Œå¹¶æ²¡æœ‰è¿è¡Œã€‚ ç„¶åé€šè¿‡æ­¤ Thread ç±»è°ƒç”¨æ–¹æ³• run() æ¥å®Œæˆå…¶è¿è¡ŒçŠ¶æ€ï¼Œ run() æ–¹æ³•è¿è¡Œç»“æŸï¼Œ æ­¤çº¿ç¨‹ç»ˆæ­¢ã€‚ç„¶å CPU å†è°ƒåº¦å…¶å®ƒçº¿ç¨‹ã€‚\n\nstart() æ–¹æ³•ç”¨äºå¯åŠ¨çº¿ç¨‹ï¼Œrun() æ–¹æ³•ç”¨äºæ‰§è¡Œçº¿ç¨‹çš„è¿è¡Œæ—¶ä»£ç ï¼Œç›´æ¥è°ƒç”¨run()ï¼Œå…¶å®å°±ç›¸å½“äºæ˜¯è°ƒç”¨äº†ä¸€ä¸ªæ™®é€šå‡½æ•°è€Œå·²ã€‚\nstart() åªèƒ½è°ƒç”¨ä¸€æ¬¡ï¼Œrun() å¯ä»¥é‡å¤è°ƒç”¨ã€‚\n\n#### ä»€ä¹ˆæ˜¯ Callable å’Œ Future?\n\n```java\nFutureTask<Integer> futureTask = new FutureTask<>(new MyCallable());\nnew Thread(futureTask).start();\n```\n\nå°† callable å®ä¾‹ä¼ å…¥ futureï¼Œç„¶åå°† future å®ä¾‹ä¼ å…¥ Thread åˆ›å»ºçº¿ç¨‹ï¼Œ\nä¹‹åå¯ä»¥ç”¨ future æ¥è·å– callable  ä¸­ call() çš„è¿”å›ç»“æœã€‚\n\n#### çº¿ç¨‹çš„çŠ¶æ€å’ŒåŸºæœ¬æ“ä½œ\n\n<img src=\"https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/TyporaNotes1650518197279.png\" alt=\"çº¿ç¨‹çš„çŠ¶æ€\" style=\"zoom:67%;\" />\n\n#### Java ä¸­ç”¨åˆ°çš„çº¿ç¨‹è°ƒåº¦ç®—æ³•æ˜¯ä»€ä¹ˆï¼Ÿ\n\nçº¿ç¨‹è°ƒåº¦æ˜¯æŒ‡æŒ‰ç…§ç‰¹å®šæœºåˆ¶ä¸ºå¤šä¸ªçº¿ç¨‹åˆ†é… CPU çš„ä½¿ç”¨æƒã€‚\n\næœ‰ä¸¤ç§è°ƒåº¦æ¨¡å‹ï¼š**æ—¶é—´ç‰‡è½®è½¬**æ¨¡å‹å’Œ**ä¼˜å…ˆçº§è°ƒåº¦**æ¨¡å‹ã€‚\n\n**Javaè™šæ‹Ÿæœºé‡‡ç”¨ä¼˜å…ˆçº§è°ƒåº¦æ¨¡å‹**ï¼Œæ˜¯æŒ‡ä¼˜å…ˆè®©å¯è¿è¡Œæ± ä¸­ä¼˜å…ˆçº§é«˜çš„çº¿ç¨‹å ç”¨CPUï¼Œå¦‚æœå¯è¿è¡Œæ± ä¸­çš„çº¿ç¨‹ä¼˜å…ˆçº§ç›¸åŒï¼Œé‚£ä¹ˆå°±éšæœºé€‰æ‹©ä¸€ä¸ªçº¿ç¨‹ï¼Œä½¿å…¶å ç”¨CPUã€‚å¤„äºè¿è¡ŒçŠ¶æ€çš„çº¿ç¨‹ä¼šä¸€ç›´è¿è¡Œï¼Œç›´è‡³å®ƒä¸å¾—ä¸æ”¾å¼ƒ CPUã€‚\n\n#### è¯·è¯´å‡ºä¸çº¿ç¨‹åŒæ­¥ä»¥åŠçº¿ç¨‹è°ƒåº¦ç›¸å…³çš„æ–¹æ³•ã€‚\n\nï¼ˆ1ï¼‰wait()ï¼šä½¿ä¸€ä¸ªçº¿ç¨‹å¤„äºç­‰å¾…çŠ¶æ€ï¼Œå¹¶ä¸”é‡Šæ”¾æ‰€æŒæœ‰çš„å¯¹è±¡çš„é”ï¼›\n\nï¼ˆ2ï¼‰sleep()ï¼šä½¿ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„çº¿ç¨‹å¤„äºç¡çœ çŠ¶æ€ï¼Œæ˜¯ä¸€ä¸ªé™æ€æ–¹æ³•ï¼›\n\nï¼ˆ3ï¼‰notify()ï¼šå”¤é†’ä¸€ä¸ªå¤„äºç­‰å¾…çŠ¶æ€çš„çº¿ç¨‹ï¼Œå½“ç„¶åœ¨è°ƒç”¨æ­¤æ–¹æ³•çš„æ—¶å€™ï¼Œå¹¶ä¸èƒ½ç¡®åˆ‡çš„å”¤é†’æŸä¸€ä¸ªç­‰å¾…çŠ¶æ€çš„çº¿ç¨‹ï¼Œè€Œæ˜¯ç”± JVM ç¡®å®šå”¤é†’å“ªä¸ªçº¿ç¨‹ï¼Œè€Œä¸”ä¸ä¼˜å…ˆçº§æ— å…³ï¼›\n\nï¼ˆ4ï¼‰notityAll()ï¼šå”¤é†’æ‰€æœ‰å¤„äºç­‰å¾…çŠ¶æ€çš„çº¿ç¨‹ï¼Œè¯¥æ–¹æ³•å¹¶ä¸æ˜¯å°†å¯¹è±¡çš„é”ç»™æ‰€æœ‰çº¿ç¨‹ï¼Œè€Œæ˜¯è®©å®ƒä»¬ç«äº‰ï¼Œåªæœ‰è·å¾—é”çš„çº¿ç¨‹æ‰èƒ½è¿›å…¥å°±ç»ªçŠ¶æ€ï¼›\n\n#### wait() å’Œ sleep() æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\n\nä¸¤è€…éƒ½å¯ä»¥æš‚åœçº¿ç¨‹çš„æ‰§è¡Œ\n\n- ç±»çš„ä¸åŒï¼šwait() æ˜¯ Object ç±»çš„æ–¹æ³•ï¼Œsleep() æ˜¯ Thread çº¿ç¨‹ç±»çš„é™æ€æ–¹æ³•ã€‚\n- é‡Šæ”¾é”ï¼šwait() é‡Šæ”¾é”ï¼Œsleep() ä¸é‡Šæ”¾é”ã€‚\n- ç”¨é€”ä¸åŒï¼šwait é€šå¸¸è¢«ç”¨äºçº¿ç¨‹é—´äº¤äº’/é€šä¿¡ï¼Œsleep é€šå¸¸è¢«ç”¨äºæš‚åœæ‰§è¡Œã€‚\n- è‡ªåŠ¨è‹é†’ï¼šwait() æ–¹æ³•è¢«è°ƒç”¨åï¼Œçº¿ç¨‹ä¸ä¼šè‡ªåŠ¨è‹é†’ï¼Œéœ€è¦åˆ«çš„çº¿ç¨‹è°ƒç”¨åŒä¸€ä¸ªå¯¹è±¡ä¸Šçš„ notify() æˆ–è€… notifyAll() æ–¹æ³•ã€‚sleep() æ–¹æ³•æ‰§è¡Œå®Œæˆåï¼Œçº¿ç¨‹ä¼šè‡ªåŠ¨è‹é†’ã€‚æˆ–è€…å¯ä»¥ä½¿ç”¨wait(long timeout)è¶…æ—¶åçº¿ç¨‹ä¼šè‡ªåŠ¨è‹é†’ã€‚\n\n#### ä½ æ˜¯å¦‚ä½•è°ƒç”¨ wait() æ–¹æ³•çš„ï¼Ÿä½¿ç”¨ if å—è¿˜æ˜¯å¾ªç¯ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ\n\n> ä½¿ç”¨ while åˆ¤æ–­æ¡ä»¶æ˜¯å¦å¾—åˆ°æ»¡è¶³\n\nä½¿ç”¨ if æ¥åˆ¤æ–­ä¼šå­˜åœ¨ä»¥ä¸‹é—®é¢˜ï¼š\n\n1. å¦ä¸€ä¸ªçº¿ç¨‹å¯èƒ½å·²ç»è¢«å”¤é†’å¹¶æ”¹å˜äº†æ¡ä»¶çŠ¶æ€ã€‚ä¾‹å¦‚ notifyAll ä¼šå”¤é†’å¤šä¸ªç­‰å¾…çš„çº¿ç¨‹ã€‚\n\n2. å­˜åœ¨â€œä¼ªå”¤é†’â€çš„æƒ…å†µï¼Œå³åœ¨æ²¡æœ‰é€šçŸ¥çš„æƒ…å†µä¸‹ï¼Œçº¿ç¨‹ä¹Ÿå¯èƒ½ä¼šè‹é†’è¿‡æ¥ï¼Œè€Œæ­¤æ—¶æ˜¯ä¸åº”è¯¥å”¤é†’çš„ã€‚\n\n\t```java\n\tsynchronized (monitor) {\n\t    //  åˆ¤æ–­æ¡ä»¶è°“è¯æ˜¯å¦å¾—åˆ°æ»¡è¶³\n\t    while(!locked) {\n\t        //  ç­‰å¾…å”¤é†’\n\t        monitor.wait();\n\t    }\n\t    //  å¤„ç†å…¶ä»–çš„ä¸šåŠ¡é€»è¾‘\n\t}\n\t```\n\n#### ä¸ºä»€ä¹ˆçº¿ç¨‹é€šä¿¡çš„æ–¹æ³• wait()ï¼Œnotify() å’Œ notifyAll() è¢«å®šä¹‰åœ¨ Object ç±»é‡Œï¼Ÿ\n\nJava ä¸­ï¼Œä»»ä½•å¯¹è±¡éƒ½å¯ä»¥ä½œä¸ºé”ï¼Œå¹¶ä¸”çº¿ç¨‹é€šä¿¡çš„æ–¹æ³• wait()ï¼Œnotify() ç­‰æ–¹æ³•ç”¨äºç­‰å¾…å¯¹è±¡çš„é”æˆ–è€…æ˜¯å”¤é†’çº¿ç¨‹ï¼Œé‚£ä¹ˆè¦æ‰¾ä¸€ä¸ªå¯ä¾›ä»»ä½•å¯¹è±¡ä½¿ç”¨çš„é”ï¼Œå› æ­¤å°†è¿™äº›æ–¹æ³•å®šä¹‰åœ¨ Object ä¸­ï¼ŒObject æ˜¯æ‰€æœ‰ç±»çš„çˆ¶ç±»ã€‚\n\n#### Thread ç±»ä¸­çš„ yield æ–¹æ³•æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ\n\nä½¿å½“å‰çº¿ç¨‹ä»è¿è¡ŒçŠ¶æ€å˜ä¸ºå°±ç»ªçŠ¶æ€ã€‚\n\n#### çº¿ç¨‹çš„ sleep()æ–¹æ³•å’Œ yield()æ–¹æ³•æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\n\n1. sleep() æ–¹æ³•ç»™å…¶ä»–çº¿ç¨‹è¿è¡Œæœºä¼šæ—¶ä¸è€ƒè™‘çº¿ç¨‹çš„ä¼˜å…ˆçº§ï¼Œå› æ­¤ä¼šç»™ä½ä¼˜å…ˆçº§çš„çº¿ç¨‹ä»¥è¿è¡Œçš„æœºä¼šï¼›\n\n\tyield()æ–¹æ³•åªä¼šç»™**ç›¸åŒæˆ–æ›´é«˜ä¼˜å…ˆçº§**çš„çº¿ç¨‹ä»¥è¿è¡Œçš„æœºä¼šï¼›\n\n2. çº¿ç¨‹æ‰§è¡Œ sleep() æ–¹æ³•åè½¬å…¥ç­‰å¾…ï¼ˆwaitingï¼‰çŠ¶æ€ï¼Œè€Œæ‰§è¡Œ yield() æ–¹æ³•åè½¬å…¥å°±ç»ªï¼ˆreadyï¼‰çŠ¶æ€ï¼›\n\n#### å¦‚ä½•åœæ­¢ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„çº¿ç¨‹ï¼Ÿ\n\n1. å½“ run æ–¹æ³•å®Œæˆåçº¿ç¨‹ç»ˆæ­¢ï¼›\n2. ä½¿ç”¨ interrupt æ–¹æ³•ä¸­æ–­çº¿ç¨‹ã€‚\n\n#### notify() å’Œ notifyAll() æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\n\nå¦‚æœçº¿ç¨‹è°ƒç”¨äº†å¯¹è±¡çš„ wait() æ–¹æ³•ï¼Œé‚£ä¹ˆçº¿ç¨‹ä¾¿ä¼šå¤„äºè¯¥å¯¹è±¡çš„ç­‰å¾…æ± ä¸­ï¼Œç­‰å¾…æ± ä¸­çš„çº¿ç¨‹ä¸ä¼šå»ç«äº‰è¯¥å¯¹è±¡çš„é”ã€‚\n\nnotifyAll() ä¼šå”¤é†’æ‰€æœ‰çš„çº¿ç¨‹ï¼Œnotify() åªä¼šå”¤é†’ä¸€ä¸ªçº¿ç¨‹ã€‚\n\nnotifyAll() è°ƒç”¨åï¼Œä¼šå°†å…¨éƒ¨çº¿ç¨‹ç”±ç­‰å¾…æ± ç§»åˆ°é”æ± ï¼Œç„¶åå‚ä¸é”çš„ç«äº‰ï¼Œç«äº‰æˆåŠŸåˆ™ç»§ç»­æ‰§è¡Œï¼Œå¦‚æœä¸æˆåŠŸåˆ™ç•™åœ¨é”æ± ç­‰å¾…é”è¢«é‡Šæ”¾åå†æ¬¡å‚ä¸ç«äº‰ã€‚è€Œ notify()åªä¼šå”¤é†’ä¸€ä¸ªçº¿ç¨‹ï¼Œå…·ä½“å”¤é†’å“ªä¸€ä¸ªçº¿ç¨‹ç”±è™šæ‹Ÿæœºæ§åˆ¶ã€‚\n\n#### å¦‚ä½•åœ¨ä¸¤ä¸ªçº¿ç¨‹é—´å…±äº«æ•°æ®ï¼Ÿ\n\nJava çº¿ç¨‹ä¹‹é—´çš„é€šä¿¡ç”± Java å†…å­˜æ¨¡å‹ï¼ˆç®€ç§°JMMï¼‰æ§åˆ¶ï¼š\n\n1. æ‰€æœ‰çš„å…±äº«å˜é‡éƒ½å­˜åœ¨ä¸»å†…å­˜ä¸­\n2. æ¯ä¸ªçº¿ç¨‹éƒ½ä¿å­˜äº†ä¸€ä»½è¯¥çº¿ç¨‹ä½¿ç”¨åˆ°çš„å…±äº«å˜é‡çš„å‰¯æœ¬\n3. å¦‚æœçº¿ç¨‹Aä¸çº¿ç¨‹Bä¹‹é—´è¦é€šä¿¡ï¼š\n\t1. çº¿ç¨‹Aå°†æœ¬åœ°å†…å­˜Aä¸­æ›´æ–°è¿‡çš„å…±äº«å˜é‡åˆ·æ–°åˆ°ä¸»å†…å­˜ä¸­å»\n\t2. çº¿ç¨‹Båˆ°ä¸»å†…å­˜ä¸­å»è¯»å–çº¿ç¨‹Aä¹‹å‰å·²ç»æ›´æ–°è¿‡çš„å…±äº«å˜é‡ã€‚\n\n#### Java å¦‚ä½•å®ç°å¤šçº¿ç¨‹ä¹‹é—´çš„é€šè®¯å’Œåä½œï¼Ÿ\n\nJavaä¸­çº¿ç¨‹é€šä¿¡åä½œçš„æœ€å¸¸è§çš„ä¸¤ç§æ–¹å¼ï¼š\n\n1. synchronized åŠ é”çš„çº¿ç¨‹ + Object ç±»çš„ wait()/notify()/notifyAll()\n\n2. ReentrantLock ç±»åŠ é”çš„çº¿ç¨‹ + Condition ç±»çš„ await()/signal()/signalAll()\n\n#### åŒæ­¥æ–¹æ³•å’ŒåŒæ­¥å—ï¼Œå“ªä¸ªæ˜¯æ›´å¥½çš„é€‰æ‹©ï¼Ÿ\n\nåŒæ­¥çš„èŒƒå›´è¶Šå°è¶Šå¥½ã€‚\n\nå› æ­¤ï¼ŒåŒæ­¥å—æ˜¯æ›´å¥½çš„é€‰æ‹©ï¼Œå› ä¸ºå®ƒä¸ä¼šé”ä½æ•´ä¸ªå¯¹è±¡ï¼Œè€ŒåŒæ­¥æ–¹æ³•ä¼šé”ä½æ•´ä¸ªå¯¹è±¡ã€‚\n\n#### ä»€ä¹ˆæ˜¯çº¿ç¨‹åŒæ­¥å’Œçº¿ç¨‹äº’æ–¥ï¼Œæœ‰å“ªå‡ ç§å®ç°æ–¹å¼ï¼Ÿ\n\nçº¿ç¨‹åŒæ­¥æ˜¯ä¸¤ä¸ªæˆ–å¤šä¸ªå…±äº«å…³é”®èµ„æºçš„çº¿ç¨‹çš„å¹¶å‘æ‰§è¡Œã€‚åº”è¯¥åŒæ­¥çº¿ç¨‹ä»¥é¿å…å…³é”®çš„èµ„æºä½¿ç”¨å†²çªã€‚\n\nçº¿ç¨‹äº’æ–¥æ˜¯å¯¹æŸä¸€å…±äº«èµ„æºè€Œè¨€ï¼Œä»»ä½•æ—¶åˆ»æœ€å¤šåªå…è®¸ä¸€ä¸ªçº¿ç¨‹å»ä½¿ç”¨ï¼Œå…¶å®ƒè¦ä½¿ç”¨è¯¥èµ„æºçš„çº¿ç¨‹å¿…é¡»ç­‰å¾…ï¼Œç›´åˆ°å ç”¨èµ„æºè€…é‡Šæ”¾è¯¥èµ„æºã€‚\n\nå®ç°çº¿ç¨‹åŒæ­¥çš„æ–¹æ³•\n\n- åŒæ­¥ä»£ç æ–¹æ³• / æ–¹æ³•å—ï¼šsychronized å…³é”®å­—ä¿®é¥°çš„æ–¹æ³• / ä»£ç å—\n- ä½¿ç”¨ç‰¹æ®Šå˜é‡åŸŸ volatile å®ç°çº¿ç¨‹åŒæ­¥ï¼švolatileå…³é”®å­—ä¸ºåŸŸå˜é‡çš„è®¿é—®æä¾›äº†ä¸€ç§å…é”æœºåˆ¶\n- ä½¿ç”¨é‡å…¥é”å®ç°çº¿ç¨‹åŒæ­¥ï¼šreentrantlock ç±»æ˜¯å¯é‡å…¥ã€äº’æ–¥ã€å®ç°äº† lock æ¥å£çš„é”ï¼Œä¸ sychronized æ–¹æ³•å…·æœ‰ç›¸åŒçš„åŸºæœ¬è¡Œä¸ºå’Œè¯­ä¹‰\n\n#### åœ¨ç›‘è§†å™¨(Monitor)å†…éƒ¨ï¼Œæ˜¯å¦‚ä½•åšçº¿ç¨‹åŒæ­¥çš„ï¼Ÿ\n\nåœ¨ Java è™šæ‹Ÿæœºä¸­ï¼Œæ¯ä¸ªå¯¹è±¡å…³è”ä¸€ä¸ª**ç›‘è§†å™¨**ï¼Œä¸ºäº†å®ç°ç›‘è§†å™¨çš„äº’æ–¥åŠŸèƒ½ï¼Œ**æ¯ä¸ªå¯¹è±¡éƒ½å…³è”ç€ä¸€æŠŠé”**ã€‚\n\nä¸€æ—¦æ–¹æ³•æˆ–è€…ä»£ç å—è¢« **synchronized** ä¿®é¥°ï¼Œé‚£ä¹ˆè¿™ä¸ªéƒ¨åˆ†å°±æ”¾å…¥äº†ç›‘è§†å™¨çš„ç›‘è§†åŒºåŸŸï¼Œ**ç¡®ä¿ä¸€æ¬¡åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œè¯¥éƒ¨åˆ†çš„ä»£ç **ï¼Œçº¿ç¨‹åœ¨è·å–é”ä¹‹å‰ä¸å…è®¸æ‰§è¡Œè¯¥éƒ¨åˆ†çš„ä»£ç \n\nå¦å¤– Java è¿˜æä¾›äº†æ˜¾å¼ç›‘è§†å™¨( Lock )å’Œéšå¼ç›‘è§†å™¨( synchronized )ä¸¤ç§é”æ–¹æ¡ˆ\n\n#### Java çº¿ç¨‹æ•°è¿‡å¤šä¼šé€ æˆä»€ä¹ˆé—®é¢˜ï¼Ÿ\n\n- æ¶ˆè€—è¿‡å¤šçš„ CPU èµ„æº\n\n\tå¦‚æœå¯è¿è¡Œçš„çº¿ç¨‹æ•°é‡å¤šäºå¯ç”¨å¤„ç†å™¨çš„æ•°é‡ï¼Œé‚£ä¹ˆæœ‰çº¿ç¨‹å°†ä¼šè¢«é—²ç½®ã€‚å¤§é‡ç©ºé—²çš„çº¿ç¨‹ä¼šå ç”¨è®¸å¤šå†…å­˜ï¼Œç»™åƒåœ¾å›æ”¶å™¨å¸¦æ¥å‹åŠ›ã€‚\n\n- é™ä½ JVM ç¨³å®šæ€§\n\n\tåœ¨å¯åˆ›å»ºçº¿ç¨‹çš„æ•°é‡ä¸Šå­˜åœ¨ä¸€ä¸ªé™åˆ¶ï¼Œè¿™ä¸ªé™åˆ¶å€¼å°†éšç€å¹³å°çš„ä¸åŒè€Œä¸åŒï¼Œå¹¶ä¸”æ‰¿å—ç€å¤šä¸ªå› ç´ åˆ¶çº¦ï¼ŒåŒ…æ‹¬ JVM çš„å¯åŠ¨å‚æ•°ã€Thread æ„é€ å‡½æ•°ä¸­è¯·æ±‚æ ˆçš„å¤§å°ï¼Œä»¥åŠåº•å±‚æ“ä½œç³»ç»Ÿå¯¹çº¿ç¨‹çš„é™åˆ¶ç­‰ã€‚å¦‚æœç ´åäº†è¿™äº›é™åˆ¶ï¼Œé‚£ä¹ˆå¯èƒ½æŠ›å‡º OutOfMemoryError å¼‚å¸¸ã€‚\n\n## å¹¶å‘å…³é”®å­—\n\n### synchronized\n\n#### synchronized çš„ä½œç”¨ï¼Ÿ\n\nåœ¨ Java ä¸­ï¼Œsynchronized å…³é”®å­—æ˜¯ç”¨æ¥æ§åˆ¶çº¿ç¨‹åŒæ­¥çš„ï¼Œå°±æ˜¯åœ¨å¤šçº¿ç¨‹çš„ç¯å¢ƒä¸‹ï¼Œæ§åˆ¶ synchronized ä»£ç æ®µä¸è¢«å¤šä¸ªçº¿ç¨‹åŒæ—¶æ‰§è¡Œã€‚synchronized å¯ä»¥ä¿®é¥°é™æ€æ–¹æ³•ã€å®ä¾‹æ–¹æ³•ã€ä»£ç å—ã€‚\n\n#### æ€ä¹ˆä½¿ç”¨ synchronized å…³é”®å­—\n\n**synchronizedå…³é”®å­—æœ€ä¸»è¦çš„ä¸‰ç§ä½¿ç”¨æ–¹å¼ï¼š**\n\n- **ä¿®é¥°å®ä¾‹æ–¹æ³•ï¼š** ç»™å½“å‰å¯¹è±¡å®ä¾‹åŠ é”ï¼›\n- **ä¿®é¥°é™æ€æ–¹æ³•ï¼š** ç»™å½“å‰ç±»åŠ é”ï¼›\n- **ä¿®é¥°ä»£ç å—ï¼š**ç»™æŒ‡å®šå¯¹è±¡åŠ é”ï¼Œè¿›å…¥åŒæ­¥ä»£ç å—å‰è¦è·å¾—æŒ‡å®šå¯¹è±¡çš„é”ã€‚\n\n**æ€»ç»“ï¼š** synchronized å…³é”®å­—åŠ åˆ° static é™æ€æ–¹æ³•å’Œ synchronized(xxx.class) ä»£ç å—ä¸Šéƒ½æ˜¯æ˜¯ç»™ Class ç±»ä¸Šé”ã€‚synchronized å…³é”®å­—åŠ åˆ°å®ä¾‹æ–¹æ³•ä¸Šæ˜¯ç»™å¯¹è±¡å®ä¾‹ä¸Šé”ã€‚\n\n#### åŒé‡æ ¡éªŒé”å®ç°å¯¹è±¡å•ä¾‹ï¼ˆçº¿ç¨‹å®‰å…¨ï¼‰\n\n```java\npublic class Singleton {\n    private volatile static Singleton uniqueInstance;\n\n    private Singleton() {}\n\n    public static Singleton getInstance() {\n        // ç¬¬ä¸€æ¬¡å‡å¦‚çº¿ç¨‹1ï¼Œçº¿ç¨‹2ï¼Œçº¿ç¨‹3åˆ°è¾¾è¿™ï¼Œéƒ½åˆ¤æ–­åˆ°nullæœªå®ä¾‹åŒ–ï¼ŒåŠ è¿™ä¸ªåˆ¤æ–­æ˜¯ä¸ºäº†è®©é™¤äº†ç¬¬ä¸€æ¬¡å®ä¾‹åŒ–ä¹‹åçš„å…¶ä»–çº¿ç¨‹åˆ¤æ–­åˆ°éç©ºè¡¨æ˜å·²ç»å®ä¾‹åŒ–è¿‡äº†ï¼Œç›´æ¥è¿”å›å•ä¾‹\n        if (uniqueInstance == null) {\t// çº¿ç¨‹1ã€2ã€3æœ‰å¯èƒ½éƒ½è¿›æ¥äº†\n            //ç±»å¯¹è±¡åŠ é”\n            synchronized (Singleton.class) {\t// å¦‚æœå¤šä¸ªçº¿ç¨‹éƒ½åˆ¤æ–­åˆ°æœªå®ä¾‹åŒ–ï¼Œé‚£ä¹ˆåªä¼šæœ‰ä¸€ä¸ªçº¿ç¨‹é”ä½ç±»å¹¶è¿›è¡Œå®ä¾‹åŒ–\n                if (uniqueInstance == null) {\t// å¦‚æœä¸åŠ è¿™ä¸ªåˆ¤æ–­ï¼Œçº¿ç¨‹1æ‹¿åˆ°é”è¿›è¡Œå®ä¾‹åŒ–ä¹‹åï¼Œçº¿ç¨‹2æ‹¿åˆ°é”ï¼Œè¿›æ¥ç›´æ¥è¿›è¡Œå®ä¾‹åŒ–ï¼Œè¿™å°±äº§ç”Ÿå¤šæ¬¡å®ä¾‹åŒ–æ“ä½œã€‚å¦‚æœåŠ è¿™ä¸ªåˆ¤æ–­ï¼Œçº¿ç¨‹2æ‹¿åˆ°é”ä¹‹åï¼Œåˆ¤æ–­åˆ°å·²ç»å®ä¾‹åŒ–äº†ï¼Œå°±ä¸ä¼šå†è¿›è¡Œå®ä¾‹åŒ–äº†ã€‚\n                    uniqueInstance = new Singleton();\n                }\n            }\n        }\n        return uniqueInstance;\n    }\n\n}\n```\n\nå¦å¤–ï¼Œéœ€è¦æ³¨æ„ instanceé‡‡ç”¨ volatile å…³é”®å­—ä¿®é¥°ä¹Ÿæ˜¯å¾ˆæœ‰å¿…è¦ã€‚\n\ninstance é‡‡ç”¨ volatile å…³é”®å­—ä¿®é¥°ä¹Ÿæ˜¯å¾ˆæœ‰å¿…è¦çš„ï¼Œinstance = new Singleton() è¿™æ®µä»£ç å…¶å®æ˜¯åˆ†ä¸ºä¸‰æ­¥æ‰§è¡Œï¼š\n\n1. ä¸º instance åˆ†é…å†…å­˜ç©ºé—´\n2. åˆå§‹åŒ– instance\n3. å°† instance æŒ‡å‘åˆ†é…çš„å†…å­˜åœ°å€\n\nä½†æ˜¯ç”±äº JVM å…·æœ‰æŒ‡ä»¤é‡æ’çš„ç‰¹æ€§ï¼Œæ‰§è¡Œé¡ºåºæœ‰å¯èƒ½å˜æˆ 1->3->2ã€‚æŒ‡ä»¤é‡æ’åœ¨å•çº¿ç¨‹ç¯å¢ƒä¸‹ä¸ä¼šå‡ºç°é—®é¢˜ï¼Œä½†æ˜¯åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ä¼šå¯¼è‡´ä¸€ä¸ªçº¿ç¨‹è·å¾—è¿˜æ²¡æœ‰åˆå§‹åŒ–çš„å®ä¾‹ã€‚ä¾‹å¦‚ï¼Œçº¿ç¨‹ T1 æ‰§è¡Œäº† 1 å’Œ 3ï¼Œæ­¤æ—¶ T2 è°ƒç”¨ getInstance() åå‘ç° instanceä¸ä¸ºç©ºï¼Œå› æ­¤**è¿”å› T1 å®ä¾‹åŒ–ä½†æœªåˆå§‹åŒ–**çš„ instanceã€‚\n\n#### synchronized åº•å±‚å®ç°åŸç†ï¼Ÿï¼ˆç›‘è§†å™¨monitorï¼‰\n\nsynchronized æ˜¯ Java ä¸­çš„ä¸€ä¸ªå…³é”®å­—ï¼Œé€šè¿‡ javap å‘½ä»¤ï¼ŒæŸ¥çœ‹ç›¸åº”çš„å­—èŠ‚ç æ–‡ä»¶ã€‚\n\nsynchronized åŒæ­¥è¯­å¥å—çš„æƒ…å†µ\n\n```java\npublic class SynchronizedDemo {\n    public void method() {\n        synchronized (this) {\n            System.out.println(\"synchronized ä»£ç å—\");\n        }\n    }\n}\n```\n\né€šè¿‡JDK åæ±‡ç¼–æŒ‡ä»¤ javap -c -v SynchronizedDemo\n\n<img src=\"https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/image-20220912212554623.png\" alt=\"monitorenter&monitorexit\" style=\"zoom:50%;\" />\n\nå¯ä»¥çœ‹å‡ºåœ¨æ‰§è¡ŒåŒæ­¥ä»£ç å—ä¹‹å‰ä¹‹åéƒ½æœ‰ä¸€ä¸ª monitor å­—æ ·ï¼Œå…¶ä¸­å‰é¢çš„æ˜¯ monitorenterï¼Œåé¢çš„æ˜¯ç¦»å¼€monitorexitï¼Œä¸éš¾æƒ³è±¡ä¸€ä¸ªçº¿ç¨‹æ‰§è¡ŒåŒæ­¥ä»£ç å—ï¼Œé¦–å…ˆè¦è·å–é”ï¼Œè€Œè·å–é”çš„è¿‡ç¨‹å°±æ˜¯ monitorenter ï¼Œåœ¨æ‰§è¡Œå®Œä»£ç å—ä¹‹åï¼Œè¦é‡Šæ”¾é”ï¼Œé‡Šæ”¾é”å°±æ˜¯æ‰§è¡Œ monitorexit æŒ‡ä»¤ã€‚\n\nä¸ºä»€ä¹ˆä¼šæœ‰ä¸¤ä¸ªmonitorexitå‘¢ï¼Ÿï¼ˆline 19ï¼‰\n\nè¿™ä¸ªä¸»è¦æ˜¯é˜²æ­¢åœ¨åŒæ­¥ä»£ç å—ä¸­çº¿ç¨‹å› å¼‚å¸¸é€€å‡ºï¼Œè€Œé”æ²¡æœ‰å¾—åˆ°é‡Šæ”¾ï¼Œè¿™å¿…ç„¶ä¼šé€ æˆæ­»é”ï¼ˆç­‰å¾…çš„çº¿ç¨‹æ°¸è¿œè·å–ä¸åˆ°é”ï¼‰ã€‚**å› æ­¤æœ€åä¸€ä¸ªmonitorexitæ˜¯ä¿è¯åœ¨å¼‚å¸¸æƒ…å†µä¸‹ï¼Œé”ä¹Ÿå¯ä»¥å¾—åˆ°é‡Šæ”¾ï¼Œé¿å…æ­»é”ã€‚**\n\n#### synchronized å¯é‡å…¥çš„åŸç†\n\né‡å…¥é”æ˜¯æŒ‡ä¸€ä¸ªçº¿ç¨‹è·å–åˆ°è¯¥é”ä¹‹åï¼Œè¯¥çº¿ç¨‹å¯ä»¥ç»§ç»­è·å¾—è¯¥é”ã€‚\nåº•å±‚åŸç†ç»´æŠ¤ä¸€ä¸ª**è®¡æ•°å™¨**ï¼Œå½“çº¿ç¨‹è·å–è¯¥é”æ—¶ï¼Œè®¡æ•°å™¨åŠ ä¸€ï¼Œå†æ¬¡è·å¾—è¯¥é”æ—¶ç»§ç»­åŠ ä¸€ï¼Œé‡Šæ”¾é”æ—¶ï¼Œè®¡æ•°å™¨å‡ä¸€ï¼Œå½“è®¡æ•°å™¨å€¼ä¸º0æ—¶ï¼Œè¡¨æ˜è¯¥é”æœªè¢«ä»»ä½•çº¿ç¨‹æ‰€æŒæœ‰ï¼Œå…¶å®ƒçº¿ç¨‹å¯ä»¥ç«äº‰è·å–é”ã€‚\n\n#### ä»€ä¹ˆæ˜¯è‡ªæ—‹\n\n> ä¸è¦é‡åˆ° synchronized å°±è®©ç­‰å¾…é”çš„çº¿ç¨‹è¿›å…¥é˜»å¡çŠ¶æ€ï¼Œè€Œæ˜¯è®©è¿™ä¸ªçº¿ç¨‹åœ¨ synchronized è¾¹ç•Œåšå¿™å¾ªç¯\n\nå¾ˆå¤š synchronized é‡Œé¢çš„ä»£ç åªæ˜¯ä¸€äº›å¾ˆç®€å•çš„ä»£ç ï¼Œæ‰§è¡Œæ—¶é—´éå¸¸å¿«ï¼Œæ—¢ç„¶ synchronized é‡Œé¢çš„ä»£ç æ‰§è¡Œå¾—éå¸¸å¿«ï¼Œä¸å¦¨è®©ç­‰å¾…é”çš„çº¿ç¨‹ä¸è¦è¢«é˜»å¡ï¼Œå› ä¸º**çº¿ç¨‹é˜»å¡æ¶‰åŠåˆ°ç”¨æˆ·æ€å’Œå†…æ ¸æ€åˆ‡æ¢çš„é—®é¢˜å¼€é”€å¾ˆå¤§**ï¼Œè€Œæ˜¯**åœ¨ synchronized çš„è¾¹ç•Œåšå¿™å¾ªç¯**ï¼Œè¿™å°±æ˜¯è‡ªæ—‹ã€‚å¦‚æœåšäº†å¤šæ¬¡å¾ªç¯å‘ç°è¿˜æ²¡æœ‰è·å¾—é”ï¼Œå†é˜»å¡ï¼Œè¿™æ ·å¯èƒ½æ˜¯ä¸€ç§æ›´å¥½çš„ç­–ç•¥ã€‚\n\n#### å¤šçº¿ç¨‹ä¸­ synchronized é”å‡çº§çš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ\n\n> ç›®çš„ï¼šé”å‡çº§æ˜¯ä¸ºäº†å‡ä½äº†é”å¸¦æ¥çš„æ€§èƒ½æ¶ˆè€—ã€‚\n\nJava çš„é”éƒ½æ˜¯åŸºäºå¯¹è±¡çš„ï¼ŒJava å¯¹è±¡æœ‰å¯¹è±¡å¤´ï¼Œå†…å®¹åŒ…æ‹¬ï¼š\n\n1. Mark Wordï¼Œå­˜å‚¨å¯¹è±¡çš„ hashCodeã€é”ä¿¡æ¯ç­‰ï¼›\n2. Class Metadata Addressï¼Œå­˜å‚¨åˆ°å¯¹è±¡ç±»å‹æ•°æ®çš„æŒ‡é’ˆï¼›\n3. æ•°ç»„çš„é•¿åº¦ï¼ˆå¦‚æœæ˜¯æ•°ç»„ï¼‰\n\næ¯ä¸€ä¸ªçº¿ç¨‹åœ¨å‡†å¤‡è·å–å…±äº«èµ„æºæ—¶ï¼š \n\nç¬¬ä¸€æ­¥ï¼Œæ£€æŸ¥é”çš„ MarkWord é‡Œé¢æ˜¯ä¸æ˜¯æ”¾çš„è‡ªå·±çš„ ThreadIdï¼Œå¦‚æœæ˜¯ï¼Œè¡¨ç¤ºå½“å‰çº¿ç¨‹æ˜¯å¤„äº â€œ**åå‘é”**â€ ï¼›\n\nç¬¬äºŒæ­¥ï¼Œå¦‚æœé”çš„ MarkWord å­˜æ”¾çš„ä¸æ˜¯è‡ªå·±çš„ ThreadIdï¼Œè¿™ä¸ªæ—¶å€™ä¼šå°è¯•ä½¿ç”¨ CAS æ¥æ›¿æ¢ Mark Word é‡Œé¢çš„çº¿ç¨‹ ID ä¸ºæ–°çº¿ç¨‹çš„ IDï¼Œè¿™ä¸ªæ—¶å€™è¦åˆ†ä¸¤ç§æƒ…å†µï¼š\n\n- CAS æ›¿æ¢æˆåŠŸï¼Œè¡¨ç¤ºä¹‹å‰çš„çº¿ç¨‹ä¸å­˜åœ¨äº†ï¼Œ Mark Word é‡Œé¢çš„çº¿ç¨‹ ID ä¸ºæ–°çº¿ç¨‹çš„ IDï¼Œé”ä¸ä¼šå‡çº§ï¼Œä»ç„¶ä¸ºåå‘é”ï¼›\n- CAS æ›¿æ¢å¤±è´¥ï¼Œè¡¨ç¤ºä¹‹å‰çš„çº¿ç¨‹ä»ç„¶å­˜åœ¨ï¼Œæ ¹æ®é”çš„ MarkWord é‡Œé¢çš„ ThreadIdï¼Œé€šçŸ¥è¯¥ ThreadId çš„çº¿ç¨‹æš‚åœï¼Œä¹‹å‰çº¿ç¨‹å°† Markword çš„å†…å®¹ç½®ä¸ºç©ºï¼Œå‡çº§ä¸ºè½»é‡çº§é”ï¼Œä¼šæŒ‰ç…§è½»é‡çº§é”çš„æ–¹å¼è¿›è¡Œç«äº‰é”ã€‚\n\nç¬¬ä¸‰æ­¥ï¼Œä¸¤ä¸ªçº¿ç¨‹éƒ½æŠŠé”å¯¹è±¡çš„ hashCode å¤åˆ¶åˆ°è‡ªå·±æ–°å»ºçš„ç”¨äºå­˜å‚¨é”çš„è®°å½•ç©ºé—´ï¼Œæ¥ç€å¼€å§‹é€šè¿‡ CAS æ“ä½œï¼Œ æŠŠé”å¯¹è±¡çš„ MarkWord çš„å†…å®¹ä¿®æ”¹ä¸ºè‡ªå·±æ–°å»ºçš„è®°å½•ç©ºé—´çš„åœ°å€çš„æ–¹å¼ç«äº‰ MarkWordï¼›\n\nç¬¬å››æ­¥ï¼Œç¬¬ä¸‰æ­¥ä¸­æˆåŠŸæ‰§è¡Œ CAS çš„è·å¾—èµ„æºï¼Œå¤±è´¥çš„åˆ™è¿›å…¥è‡ªæ—‹ ï¼›\n\nç¬¬äº”æ­¥ï¼Œè‡ªæ—‹çš„çº¿ç¨‹åœ¨è‡ªæ—‹è¿‡ç¨‹ä¸­ï¼Œå¦‚æœæˆåŠŸè·å¾—èµ„æºï¼ˆå³ä¹‹å‰è·çš„èµ„æºçš„çº¿ç¨‹æ‰§è¡Œå®Œæˆå¹¶é‡Šæ”¾äº†å…±äº«èµ„æºï¼‰ï¼Œåˆ™æ•´ä¸ªçŠ¶æ€ä¾ç„¶å¤„äº **è½»é‡çº§é”**çš„çŠ¶æ€ï¼›å¦‚æœè‡ªæ—‹å¤±è´¥ ï¼ˆè¿™è¾¹çš„è‡ªæ—‹æ–¹å¼å¯ä»¥é‡‡ç”¨é€‚åº”æ€§è‡ªæ—‹ï¼Œç®€å•æ¥è¯´å°±æ˜¯çº¿ç¨‹å¦‚æœè‡ªæ—‹æˆåŠŸäº†ï¼Œåˆ™ä¸‹æ¬¡è‡ªæ—‹çš„æ¬¡æ•°ä¼šæ›´å¤šï¼Œå¦‚æœè‡ªæ—‹å¤±è´¥äº†ï¼Œåˆ™è‡ªæ—‹çš„æ¬¡æ•°å°±ä¼šå‡å°‘ï¼‰ï¼›\n\nç¬¬å…­æ­¥ï¼Œè¿›å…¥**é‡é‡çº§é”**çš„çŠ¶æ€ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œè‡ªæ—‹çš„çº¿ç¨‹è¿›å…¥é˜»å¡ï¼Œç­‰å¾…ç«äº‰çº¿ç¨‹æ‰§è¡Œå®Œæˆå¹¶å”¤é†’è‡ªå·±ã€‚\n\n#### çº¿ç¨‹ B æ€ä¹ˆçŸ¥é“çº¿ç¨‹ A ä¿®æ”¹äº†å˜é‡\n\n* volatile ä¿®é¥°å˜é‡\n\n* synchronized ä¿®é¥°ä¿®æ”¹å˜é‡çš„æ–¹æ³•\n* lock å¯¹ä¿®æ”¹å˜é‡çš„ä»£ç å—åŠ é”\n\n#### synchronized å’Œ Lock æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\n\n- synchronized æ˜¯ Java å…³é”®å­—ï¼Œè€ŒLock æ˜¯ä¸ªæ¥å£ï¼›\n- synchronized å¯ä»¥ç»™é™æ€æ–¹æ³•ã€å®ä¾‹æ–¹æ³•ã€ä»£ç å—åŠ é”ï¼Œè€Œ lock åªèƒ½ç»™ä»£ç å—åŠ é”ï¼›\n- synchronized ä¸éœ€è¦æ‰‹åŠ¨è·å–é”å’Œé‡Šæ”¾é”ï¼Œè€Œ lock éœ€è¦è‡ªå·±åŠ é”å’Œé‡Šæ”¾é”ï¼›\n- é€šè¿‡ Lock å¯ä»¥çŸ¥é“æœ‰æ²¡æœ‰æˆåŠŸè·å–é”ï¼Œè€Œ synchronized å´æ— æ³•åŠåˆ°ã€‚\n\n#### synchronized å’Œ ReentrantLock åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ\n\n**ç›¸åŒç‚¹ï¼š**\n\nä¸¤è€…éƒ½æ˜¯å¯é‡å…¥é”\n\nâ€œå¯é‡å…¥é”â€æ¦‚å¿µæ˜¯ï¼šè‡ªå·±å¯ä»¥å†æ¬¡è·å–è‡ªå·±çš„å†…éƒ¨é”ã€‚æ¯”å¦‚ä¸€ä¸ªçº¿ç¨‹è·å¾—äº†æŸä¸ªå¯¹è±¡çš„é”ï¼Œæ­¤æ—¶è¿™ä¸ªå¯¹è±¡é”è¿˜æ²¡æœ‰é‡Šæ”¾ï¼Œå½“å…¶å†æ¬¡æƒ³è¦è·å–è¿™ä¸ªå¯¹è±¡çš„é”çš„æ—¶å€™è¿˜æ˜¯å¯ä»¥è·å–çš„ï¼Œ**å¦‚æœä¸å¯é”é‡å…¥çš„è¯ï¼Œå°±ä¼šé€ æˆæ­»é”**ã€‚åŒä¸€ä¸ªçº¿ç¨‹æ¯æ¬¡è·å–é”ï¼Œé”çš„è®¡æ•°å™¨éƒ½è‡ªå¢1ï¼Œæ‰€ä»¥è¦ç­‰åˆ°é”çš„è®¡æ•°å™¨ä¸‹é™ä¸º0æ—¶æ‰èƒ½é‡Šæ”¾é”ã€‚\n\n**ä¸åŒç‚¹ï¼š**\n\n* synchronized æ˜¯å…³é”®å­—ï¼ŒReentrantLock æ˜¯ç±»ï¼›\n* ReentrantLock åªé€‚ç”¨äºä»£ç å—é”ï¼Œè€Œ synchronized å¯ä»¥ä¿®é¥°ç±»ã€æ–¹æ³•ã€å˜é‡ç­‰ï¼›\n\n- ReentrantLock å¿…é¡»æ‰‹åŠ¨è·å–ä¸é‡Šæ”¾é”ï¼Œè€Œ synchronized ä¸éœ€è¦æ‰‹åŠ¨é‡Šæ”¾å’Œå¼€å¯é”ï¼›\n- äºŒè€…çš„é”æœºåˆ¶å…¶å®ä¹Ÿæ˜¯ä¸ä¸€æ ·çš„ï¼š\n\tReentrantLock åº•å±‚è°ƒç”¨çš„æ˜¯ Unsafe çš„park æ–¹æ³•åŠ é”ï¼Œsynchronized æ“ä½œçš„åº”è¯¥æ˜¯å¯¹è±¡å¤´ä¸­ mark word\n\n### volatile\n\n#### ä¸ºä»€ä¹ˆä»£ç ä¼šé‡æ’åºï¼Ÿ\n\nåœ¨æ‰§è¡Œç¨‹åºæ—¶ï¼Œä¸ºäº†**æé«˜æ€§èƒ½**ï¼Œå¤„ç†å™¨å’Œç¼–è¯‘å™¨å¸¸å¸¸ä¼šå¯¹æŒ‡ä»¤è¿›è¡Œé‡æ’åºï¼Œä½†æ˜¯ä¸èƒ½éšæ„é‡æ’åºï¼Œä¸æ˜¯ä½ æƒ³æ€ä¹ˆæ’åºå°±æ€ä¹ˆæ’åºï¼Œå®ƒéœ€è¦æ»¡è¶³ä»¥ä¸‹ä¸¤ä¸ªæ¡ä»¶ï¼š\n\n- **åœ¨å•çº¿ç¨‹ç¯å¢ƒä¸‹ä¸èƒ½æ”¹å˜ç¨‹åºè¿è¡Œçš„ç»“æœï¼›**\n- **å­˜åœ¨æ•°æ®ä¾èµ–å…³ç³»çš„ä¸å…è®¸é‡æ’åº**\n\néœ€è¦æ³¨æ„çš„æ˜¯ï¼šé‡æ’åºä¸ä¼šå½±å“å•çº¿ç¨‹ç¯å¢ƒçš„æ‰§è¡Œç»“æœï¼Œä½†æ˜¯ä¼šç ´åå¤šçº¿ç¨‹çš„æ‰§è¡Œè¯­ä¹‰ã€‚\n\n#### as-if-serial è§„åˆ™å’Œ happens-before è§„åˆ™çš„åŒºåˆ«\n\n- as-if-serial è§„åˆ™ä¿è¯ **å•çº¿ç¨‹** å†…ç¨‹åºçš„æ‰§è¡Œç»“æœä¸è¢«æ”¹å˜ï¼Œhappens-before è§„åˆ™ä¿è¯ **æ­£ç¡®åŒæ­¥çš„å¤šçº¿ç¨‹** ç¨‹åºçš„æ‰§è¡Œç»“æœä¸è¢«æ”¹å˜ã€‚\n- as-if-serial è¯­ä¹‰å’Œ happens-before è¿™ä¹ˆåšçš„ç›®çš„ï¼Œéƒ½æ˜¯ä¸ºäº†åœ¨ä¸æ”¹å˜ç¨‹åºæ‰§è¡Œç»“æœçš„å‰æä¸‹ï¼Œå°½å¯èƒ½åœ°æé«˜ç¨‹åºæ‰§è¡Œçš„å¹¶è¡Œåº¦ã€‚\n\n#### volatile å…³é”®å­—çš„ä½œç”¨\n\nå¯¹äºå¯è§æ€§ï¼ŒJava æä¾›äº† volatile å…³é”®å­—æ¥ä¿è¯å¯è§æ€§å’Œæœ‰åºæ€§ï¼ˆç¦æ­¢æŒ‡ä»¤é‡æ’ï¼‰ï¼Œä½†ä¸èƒ½ä¿è¯åŸå­æ€§ã€‚ volatile æä¾› happens-before çš„ä¿è¯ï¼Œç¡®ä¿ä¸€ä¸ªçº¿ç¨‹çš„ä¿®æ”¹èƒ½å¯¹å…¶ä»–çº¿ç¨‹æ˜¯å¯è§çš„ã€‚å½“ä¸€ä¸ªå…±äº«å˜é‡è¢« volatile ä¿®é¥°æ—¶ï¼Œå®ƒä¼šä¿è¯ä¿®æ”¹çš„å€¼ä¼šç«‹å³è¢«æ›´æ–°åˆ°ä¸»å­˜ï¼Œå½“æœ‰å…¶ä»–çº¿ç¨‹éœ€è¦è¯»å–æ—¶ï¼Œå®ƒä¼šå»å†…å­˜ä¸­è¯»å–æ–°å€¼ã€‚\n\n#### JMMå†…å­˜å±éšœæ’å…¥ç­–ç•¥\n\n**æ’å…¥å±éšœ**\n\nStoreStoreå±éšœ - volatile å†™ - StoreLoadå±éšœ\n\nvolatileè¯» - LoadLoadå±éšœ - LoadStoreå±éšœ\n\n**volatile ä¸æ™®é€šå˜é‡çš„é‡æ’åºè§„åˆ™**\n\n1. å¦‚æœç¬¬ä¸€ä¸ªæ“ä½œæ˜¯ volatile è¯»ï¼Œé‚£æ— è®ºç¬¬äºŒä¸ªæ“ä½œæ˜¯ä»€ä¹ˆï¼Œéƒ½ä¸èƒ½é‡æ’åºï¼›\n2. å¦‚æœç¬¬äºŒä¸ªæ“ä½œæ˜¯ volatile å†™ï¼Œé‚£æ— è®ºç¬¬ä¸€ä¸ªæ“ä½œæ˜¯ä»€ä¹ˆï¼Œéƒ½ä¸èƒ½é‡æ’åºï¼›\n3. å¦‚æœç¬¬ä¸€ä¸ªæ“ä½œæ˜¯ volatile å†™ï¼Œç¬¬äºŒä¸ªæ“ä½œæ˜¯ volatile è¯»ï¼Œé‚£ä¸èƒ½é‡æ’åºã€‚\n\n#### volatile èƒ½ä½¿å¾—ä¸€ä¸ªéåŸå­æ“ä½œå˜æˆåŸå­æ“ä½œå—ï¼Ÿ\n\nvolatile åªèƒ½ä¿è¯å¯è§æ€§å’Œæœ‰åºæ€§è€Œä¸èƒ½ä¿è¯åŸå­æ€§ï¼Œä½†ç”¨ volatile ä¿®é¥° long å’Œ double å¯ä»¥ä¿è¯å…¶æ“ä½œåŸå­æ€§ã€‚\n\n#### volatile ä¿®é¥°ç¬¦çš„æœ‰è¿‡ä»€ä¹ˆå®è·µï¼Ÿ\n\nå•ä¾‹æ¨¡å¼-åŒé‡é”æ£€éªŒé‡Œé¢ç”¨ volatile ä¿®é¥°å®ä¾‹å˜é‡ã€‚\n\n#### volatile å’Œ synchronized çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ\n\n- volatile æ˜¯å˜é‡ä¿®é¥°ç¬¦ï¼›synchronized å¯ä»¥ä¿®é¥°ç±»ã€æ–¹æ³•ã€ä»£ç å—ï¼›\n- volatile ä»…èƒ½å®ç°å˜é‡çš„ä¿®æ”¹å¯è§æ€§å’Œæœ‰åºæ€§ï¼Œä¸èƒ½ä¿è¯åŸå­æ€§ï¼Œ\n\tè€Œ synchronized åˆ™å¯ä»¥ä¿è¯å˜é‡çš„ä¿®æ”¹åŸå­æ€§å’Œå¯è§æ€§ï¼›\n- volatile ä¸ä¼šé€ æˆçº¿ç¨‹çš„é˜»å¡ï¼›synchronized å¯èƒ½ä¼šé€ æˆçº¿ç¨‹çš„é˜»å¡ï¼›\n- **volatileå…³é”®å­—**æ˜¯çº¿ç¨‹åŒæ­¥çš„**è½»é‡çº§å®ç°**ï¼Œæ‰€ä»¥**volatileæ€§èƒ½è‚¯å®šæ¯”synchronizedå…³é”®å­—è¦å¥½**ã€‚synchronizedå…³é”®å­—åœ¨JavaSE1.6ä¹‹åè¿›è¡Œäº†ä¸»è¦åŒ…æ‹¬ä¸ºäº†**å‡å°‘è·å¾—é”å’Œé‡Šæ”¾é”å¸¦æ¥çš„æ€§èƒ½æ¶ˆè€—**è€Œå¼•å…¥çš„åå‘é”å’Œè½»é‡çº§é”ä»¥åŠå…¶å®ƒå„ç§ä¼˜åŒ–ä¹‹åæ‰§è¡Œæ•ˆç‡æœ‰äº†æ˜¾è‘—æå‡ï¼Œ**å®é™…å¼€å‘ä¸­ä½¿ç”¨ synchronized å…³é”®å­—çš„åœºæ™¯è¿˜æ˜¯æ›´å¤šä¸€äº›**ã€‚\n\n## Lock ä½“ç³»\n\n### Lock ç®€ä»‹\n\n#### Lock æ¥å£æ˜¯ä»€ä¹ˆï¼Ÿå¯¹æ¯”åŒæ­¥å®ƒæœ‰ä»€ä¹ˆä¼˜åŠ¿ï¼Ÿ\n\nLock æ¥å£æ¯”åŒæ­¥æ–¹æ³•å’ŒåŒæ­¥å—æä¾›äº†æ›´å…·æ‰©å±•æ€§çš„é”æ“ä½œã€‚\n\nï¼ˆ1ï¼‰å¯ä»¥ä½¿é”æ›´**å…¬å¹³**\n\nï¼ˆ2ï¼‰å¯ä»¥ä½¿çº¿ç¨‹åœ¨**ç­‰å¾…é”çš„æ—¶å€™å“åº”ä¸­æ–­**\n\nï¼ˆ3ï¼‰å¯ä»¥**è®©çº¿ç¨‹å°è¯•è·å–é”ï¼Œå¹¶åœ¨æ— æ³•è·å–é”çš„æ—¶å€™ç«‹å³è¿”å›æˆ–è€…ç­‰å¾…ä¸€æ®µæ—¶é—´**\n\n#### ä¹è§‚é”å’Œæ‚²è§‚é”çš„ç†è§£åŠå¦‚ä½•å®ç°ï¼Œæœ‰å“ªäº›å®ç°æ–¹å¼ï¼Ÿ\n\næ‚²è§‚é”ï¼šæ€»æ˜¯å‡è®¾æœ€åçš„æƒ…å†µï¼Œæ¯æ¬¡å»æ‹¿æ•°æ®çš„æ—¶å€™éƒ½è®¤ä¸ºåˆ«äººä¼šä¿®æ”¹ï¼Œæ‰€ä»¥æ¯æ¬¡åœ¨æ‹¿æ•°æ®çš„æ—¶å€™éƒ½ä¼šä¸Šé”ï¼Œè¿™æ ·åˆ«äººæƒ³æ‹¿è¿™ä¸ªæ•°æ®å°±ä¼šé˜»å¡ç›´åˆ°å®ƒæ‹¿åˆ°é”ã€‚\n\tä¼ ç»Ÿçš„å…³ç³»å‹æ•°æ®åº“é‡Œè¾¹å°±ç”¨åˆ°äº†å¾ˆå¤šè¿™ç§é”æœºåˆ¶ï¼Œæ¯”å¦‚è¡Œé”ï¼Œè¡¨é”ç­‰ï¼Œè¯»é”ï¼Œå†™é”ç­‰ï¼Œéƒ½æ˜¯åœ¨åšæ“ä½œä¹‹å‰å…ˆä¸Šé”ã€‚å†æ¯”å¦‚ Java é‡Œé¢çš„åŒæ­¥åŸè¯­ synchronized å…³é”®å­—çš„å®ç°ä¹Ÿæ˜¯æ‚²è§‚é”ã€‚\n\nä¹è§‚é”ï¼šé¡¾åæ€ä¹‰ï¼Œå°±æ˜¯å¾ˆä¹è§‚ï¼Œæ¯æ¬¡å»æ‹¿æ•°æ®çš„æ—¶å€™éƒ½è®¤ä¸ºåˆ«äººä¸ä¼šä¿®æ”¹ï¼Œæ‰€ä»¥ä¸ä¼šä¸Šé”ï¼Œä½†æ˜¯åœ¨æ›´æ–°çš„æ—¶å€™ä¼šåˆ¤æ–­ä¸€ä¸‹åœ¨æ­¤æœŸé—´åˆ«äººæœ‰æ²¡æœ‰å»æ›´æ–°è¿™ä¸ªæ•°æ®ï¼Œå¯ä»¥ä½¿ç”¨ç‰ˆæœ¬å·ç­‰æœºåˆ¶ã€‚\n\tä¹è§‚é”é€‚ç”¨äºå¤šè¯»çš„åº”ç”¨ç±»å‹ï¼Œè¿™æ ·å¯ä»¥æé«˜ååé‡ï¼Œæ¯”å¦‚ atomic åŒ…ä¸‹é¢çš„åŸå­å˜é‡ç±»å°±æ˜¯ä½¿ç”¨äº†ä¹è§‚é”çš„ä¸€ç§å®ç°æ–¹å¼ CAS å®ç°çš„ã€‚\n\n#### ä»€ä¹ˆæ˜¯ CAS\n\nCAS æ˜¯ compare and swap çš„ç¼©å†™ï¼Œå³æˆ‘ä»¬æ‰€è¯´çš„æ¯”è¾ƒäº¤æ¢ï¼Œæ˜¯ä¸€ç§ä¹è§‚é”æ“ä½œã€‚\n\nCAS æ“ä½œåŒ…å«ä¸‰ä¸ªæ“ä½œæ•° â€”â€” å†…å­˜ä½ç½®ï¼ˆVï¼‰ã€é¢„æœŸåŸå€¼ï¼ˆAï¼‰å’Œæ–°å€¼ï¼ˆBï¼‰ã€‚\n\nå¦‚æœå†…å­˜åœ°å€ V é‡Œé¢çš„å€¼å’Œ A çš„å€¼æ˜¯ä¸€æ ·çš„ï¼Œé‚£ä¹ˆå°±å°†å†…å­˜é‡Œé¢çš„å€¼æ›´æ–°æˆ Bã€‚\n\n####  Javaå®ç°CASçš„åŸç† - Unsafeç±»\n\nåœ¨Javaä¸­ï¼Œæœ‰ä¸€ä¸ª`Unsafe`ç±»ï¼Œå®ƒåœ¨`sun.misc`åŒ…ä¸­ã€‚å®ƒé‡Œé¢æ˜¯ä¸€äº›`native`æ–¹æ³•ï¼ˆç”±åº•å±‚çš„JVMä½¿ç”¨Cæˆ–è€…C++å»å®ç°ï¼‰ï¼Œå…¶ä¸­å°±æœ‰å‡ ä¸ªå…³äºCASçš„ï¼š\n\n```java\nboolean compareAndSwapObject(Object o, long offset,Object expected, Object x);\nboolean compareAndSwapInt(Object o, long offset,int expected,int x);\nboolean compareAndSwapLong(Object o, long offset,long expected,long x);\n```\n\nå½“ç„¶ï¼Œä»–ä»¬éƒ½æ˜¯`public native`çš„ã€‚\n\nUnsafe ä¸­å¯¹ CAS çš„å®ç°æ˜¯ C++ å†™çš„ï¼Œå®ƒçš„å…·ä½“å®ç°å’Œæ“ä½œç³»ç»Ÿã€CPU éƒ½æœ‰å…³ç³»ã€‚\n\nLinux çš„ X86 ä¸‹ä¸»è¦æ˜¯é€šè¿‡`cmpxchgl`è¿™ä¸ªæŒ‡ä»¤åœ¨ CPU çº§å®Œæˆ CAS æ“ä½œçš„ï¼Œä½†åœ¨å¤šå¤„ç†å™¨æƒ…å†µä¸‹å¿…é¡»ä½¿ç”¨`lock`æŒ‡ä»¤åŠ é”æ¥å®Œæˆã€‚å½“ç„¶ä¸åŒçš„æ“ä½œç³»ç»Ÿå’Œå¤„ç†å™¨çš„å®ç°ä¼šæœ‰æ‰€ä¸åŒï¼Œå¤§å®¶å¯ä»¥è‡ªè¡Œäº†è§£ã€‚\n\nå½“ç„¶ï¼ŒUnsafeç±»é‡Œé¢è¿˜æœ‰å…¶å®ƒæ–¹æ³•ç”¨äºä¸åŒçš„ç”¨é€”ã€‚æ¯”å¦‚æ”¯æŒçº¿ç¨‹æŒ‚èµ·å’Œæ¢å¤çš„`park`å’Œ`unpark`ï¼Œ LockSupportç±»åº•å±‚å°±æ˜¯è°ƒç”¨äº†è¿™ä¸¤ä¸ªæ–¹æ³•ã€‚è¿˜æœ‰æ”¯æŒåå°„æ“ä½œçš„`allocateInstance()`æ–¹æ³•ã€‚\n\n#### CAS ä¼šäº§ç”Ÿä»€ä¹ˆé—®é¢˜ï¼Ÿ\n\n1ã€**ABA é—®é¢˜**ï¼š\n\næ¯”å¦‚è¯´ä¸€ä¸ªçº¿ç¨‹ one ä»å†…å­˜ä½ç½® V ä¸­å–å‡º Aï¼Œè¿™æ—¶å€™å¦ä¸€ä¸ªçº¿ç¨‹ two ä¹Ÿä»å†…å­˜ä¸­å–å‡º Aï¼Œå¹¶ä¸” two è¿›è¡Œäº†ä¸€äº›æ“ä½œå˜æˆäº† Bï¼Œç„¶å two åˆå°† V ä½ç½®çš„æ•°æ®å˜æˆ Aï¼Œè¿™æ—¶å€™çº¿ç¨‹ one è¿›è¡Œ CAS æ“ä½œå‘ç°å†…å­˜ä¸­ä»ç„¶æ˜¯ Aï¼Œç„¶å one æ“ä½œæˆåŠŸã€‚å°½ç®¡çº¿ç¨‹ one çš„ CAS æ“ä½œæˆåŠŸï¼Œä½†å¯èƒ½å­˜åœ¨æ½œè—çš„é—®é¢˜ã€‚å¯ä»¥åœ¨å˜é‡ä¸ŠåŠ ä¸€ä¸ªç‰ˆæœ¬æˆ³ã€‚ä» Java1.5 å¼€å§‹ JDK çš„ atomic åŒ…é‡Œæä¾›äº†ä¸€ä¸ªç±» AtomicStampedReference æ¥è§£å†³ ABA é—®é¢˜ã€‚\n\n2ã€**å¾ªç¯æ—¶é—´é•¿å¼€é”€å¤§**ï¼š\n\nå¯¹äºèµ„æºç«äº‰ä¸¥é‡ï¼ˆçº¿ç¨‹å†²çªä¸¥é‡ï¼‰çš„æƒ…å†µï¼ŒCAS è‡ªæ—‹çš„æ¦‚ç‡ä¼šæ¯”è¾ƒå¤§ï¼Œä»è€Œæµªè´¹æ›´å¤šçš„ CPU èµ„æºï¼Œæ•ˆç‡ä½äº synchronizedã€‚\n\n3ã€**åªèƒ½ä¿è¯ä¸€ä¸ªå…±äº«å˜é‡çš„åŸå­æ“ä½œ**ï¼š\n\nå½“å¯¹ä¸€ä¸ªå…±äº«å˜é‡æ‰§è¡Œæ“ä½œæ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¾ªç¯ CAS çš„æ–¹å¼æ¥ä¿è¯åŸå­æ“ä½œï¼Œä½†æ˜¯**å¯¹å¤šä¸ªå…±äº«å˜é‡æ“ä½œæ—¶ï¼Œå¾ªç¯ CAS å°±æ— æ³•ä¿è¯æ“ä½œçš„åŸå­æ€§ï¼Œè¿™ä¸ªæ—¶å€™å°±å¯ä»¥ç”¨é”**ã€‚\n\n#### æ­»é”ä¸æ´»é”çš„åŒºåˆ«ï¼Œæ­»é”ä¸é¥¥é¥¿çš„åŒºåˆ«ï¼Ÿ\n\n> åŒºåˆ«ï¼šæ­»é”åŠ¨ä¸äº†äº†ï¼›æ´»é”ä¸€ç›´é‡å¤å°è¯•ã€å¤±è´¥ã€å°è¯•ã€å¤±è´¥ã€‚\n\næ­»é”ï¼šæ˜¯æŒ‡ä¸¤ä¸ªæˆ–ä¸¤ä¸ªä»¥ä¸Šçš„è¿›ç¨‹ï¼ˆæˆ–çº¿ç¨‹ï¼‰åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œå› äº‰å¤ºèµ„æºè€Œé€ æˆçš„ä¸€ç§äº’ç›¸ç­‰å¾…çš„ç°è±¡ï¼Œè‹¥æ— å¤–åŠ›ä½œç”¨ï¼Œå®ƒä»¬éƒ½å°†æ— æ³•æ¨è¿›ä¸‹å»ã€‚\n\næ´»é”ï¼šä»»åŠ¡æˆ–è€…æ‰§è¡Œè€…æ²¡æœ‰è¢«é˜»å¡ï¼Œç”±äºæŸäº›æ¡ä»¶æ²¡æœ‰æ»¡è¶³ï¼Œå¯¼è‡´**ä¸€ç›´é‡å¤å°è¯•ï¼Œå¤±è´¥ï¼Œå°è¯•ï¼Œå¤±è´¥**ã€‚\n\næ´»é”å’Œæ­»é”çš„åŒºåˆ«åœ¨äºï¼Œå¤„äºæ´»é”çš„å®ä½“æ˜¯åœ¨ä¸æ–­çš„æ”¹å˜çŠ¶æ€ï¼Œè¿™å°±æ˜¯æ‰€è°“çš„â€œæ´»â€ï¼Œ è€Œå¤„äºæ­»é”çš„å®ä½“è¡¨ç°ä¸ºç­‰å¾…ï¼›æ´»é”æœ‰å¯èƒ½è‡ªè¡Œè§£å¼€ï¼Œæ­»é”åˆ™ä¸èƒ½ã€‚\n\né¥¥é¥¿ï¼šä¸€ä¸ªæˆ–è€…å¤šä¸ªçº¿ç¨‹å› ä¸ºç§ç§åŸå› æ— æ³•è·å¾—æ‰€éœ€è¦çš„èµ„æºï¼Œå¯¼è‡´ä¸€ç›´æ— æ³•æ‰§è¡Œçš„çŠ¶æ€ã€‚\n\nJava ä¸­å¯¼è‡´é¥¥é¥¿çš„åŸå› ï¼šé«˜ä¼˜å…ˆçº§çº¿ç¨‹åå™¬æ‰€æœ‰çš„ä½ä¼˜å…ˆçº§çº¿ç¨‹çš„ CPU æ—¶é—´ã€‚\n\n### AQSè¯¦è§£\n\n#### AQS ä»‹ç»\n\nAQS çš„å…¨ç§°ä¸ºï¼ˆAbstractQueuedSynchronizerï¼‰ï¼ŒæŠ½è±¡é˜Ÿåˆ—åŒæ­¥å™¨ã€‚\n\nä½¿ç”¨ AQS èƒ½ç®€å•ä¸”é«˜æ•ˆåœ°æ„é€ å‡ºåº”ç”¨å¹¿æ³›çš„å¤§é‡çš„åŒæ­¥å™¨ï¼Œæ¯”å¦‚æˆ‘ä»¬æåˆ°çš„ReentrantLockï¼ŒSemaphoreï¼Œå…¶ä»–çš„è¯¸å¦‚ ReentrantReadWriteLockï¼ŒSynchronousQueueï¼ŒFutureTask ç­‰ç­‰çš†æ˜¯åŸºäº AQS çš„ã€‚å½“ç„¶ï¼Œæˆ‘ä»¬è‡ªå·±ä¹Ÿèƒ½åˆ©ç”¨ AQS éå¸¸è½»æ¾å®¹æ˜“åœ°æ„é€ å‡ºç¬¦åˆæˆ‘ä»¬è‡ªå·±éœ€æ±‚çš„åŒæ­¥å™¨ã€‚\n\n#### AQS åŸç†åˆ†æ\n\n**å¦‚æœè¢«è¯·æ±‚çš„å…±äº«èµ„æºç©ºé—²ï¼Œåˆ™å°†å½“å‰è¯·æ±‚èµ„æºçš„çº¿ç¨‹è®¾ç½®ä¸ºæœ‰æ•ˆçš„å·¥ä½œçº¿ç¨‹ï¼Œå¹¶ä¸”å°†å…±äº«èµ„æºè®¾ç½®ä¸ºé”å®šçŠ¶æ€ã€‚\nå¦‚æœè¢«è¯·æ±‚çš„å…±äº«èµ„æºè¢«å ç”¨ï¼Œé‚£ä¹ˆå°±ä½¿ç”¨ CLH é˜Ÿåˆ—ï¼Œå°†æš‚æ—¶è·å–ä¸åˆ°é”çš„çº¿ç¨‹åŠ å…¥åˆ°é˜Ÿåˆ—ä¸­ã€‚**\n\n> CLH(Craig,Landin,and Hagersten)é˜Ÿåˆ—æ˜¯ä¸€ä¸ªè™šæ‹Ÿçš„åŒå‘é˜Ÿåˆ—ï¼ˆè™šæ‹Ÿçš„åŒå‘é˜Ÿåˆ—å³ä¸å­˜åœ¨é˜Ÿåˆ—å®ä¾‹ï¼Œä»…å­˜åœ¨ç»“ç‚¹ä¹‹é—´çš„å…³è”å…³ç³»ï¼‰ã€‚AQS æ˜¯å°†æ¯æ¡è¯·æ±‚å…±äº«èµ„æºçš„çº¿ç¨‹å°è£…æˆä¸€ä¸ª CLH é˜Ÿåˆ—çš„ä¸€ä¸ªç»“ç‚¹ï¼ˆNodeï¼‰æ¥å®ç°é”çš„åˆ†é…ã€‚\n\nçœ‹ä¸ªAQS(AbstractQueuedSynchronizer)åŸç†å›¾ï¼š\n\n![AQSåŸç†å›¾](https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/TyporaNotes11474088-c906e727d699fa9c.png)\n\nAQSä½¿ç”¨ä¸€ä¸ª volatile int ç±»å‹çš„æˆå‘˜å˜é‡ state æ¥è¡¨ç¤ºåŒæ­¥çŠ¶æ€ï¼Œé€šè¿‡å†…ç½®çš„ CLH é˜Ÿåˆ—æ¥å®Œæˆè·å–èµ„æºçº¿ç¨‹çš„æ’é˜Ÿå·¥ä½œã€‚AQSä½¿ç”¨ CAS å¯¹è¯¥åŒæ­¥çŠ¶æ€è¿›è¡ŒåŸå­æ“ä½œå®ç°å¯¹å…¶å€¼çš„ä¿®æ”¹ã€‚\n\n```java\nprivate volatile int state;\t// å…±äº«å˜é‡ï¼Œä½¿ç”¨volatileä¿®é¥°ä¿è¯çº¿ç¨‹å¯è§æ€§\n```\n\nçŠ¶æ€ä¿¡æ¯é€šè¿‡ protected ç±»å‹çš„ getStateï¼ŒsetStateï¼ŒcompareAndSetStateè¿›è¡Œæ“ä½œ\n\n```java\n// è¿”å›åŒæ­¥çŠ¶æ€çš„å½“å‰å€¼\nprotected final int getState() {  \n    return state;\n}\n// è®¾ç½®åŒæ­¥çŠ¶æ€çš„å€¼\nprotected final void setState(int newState) { \n    state = newState;\n}\n// åŸå­åœ°ï¼ˆCASæ“ä½œï¼‰å°†åŒæ­¥çŠ¶æ€å€¼è®¾ç½®ä¸ºç»™å®šå€¼updateå¦‚æœå½“å‰åŒæ­¥çŠ¶æ€çš„å€¼ç­‰äºexpectï¼ˆæœŸæœ›å€¼ï¼‰\nprotected final boolean compareAndSetState(int expect, int update) {\n    return unsafe.compareAndSwapInt(this, stateOffset, expect, update);\n}\n```\n\n**AQS å¯¹èµ„æºçš„å…±äº«æ–¹å¼**\n\nAQSå®šä¹‰ä¸¤ç§èµ„æºå…±äº«æ–¹å¼\n\n- **Exclusive**ï¼ˆç‹¬å ï¼‰ï¼šåªæœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½æ‰§è¡Œï¼Œå¦‚ ReentrantLockã€‚åˆå¯åˆ†ä¸ºå…¬å¹³é”å’Œéå…¬å¹³é”ï¼š\n\t- å…¬å¹³é”ï¼šæŒ‰ç…§çº¿ç¨‹åœ¨é˜Ÿåˆ—ä¸­çš„æ’é˜Ÿé¡ºåºï¼Œå…ˆåˆ°è€…å…ˆæ‹¿åˆ°é”\n\t- éå…¬å¹³é”ï¼šå½“çº¿ç¨‹è¦è·å–é”æ—¶ï¼Œæ— è§†é˜Ÿåˆ—é¡ºåºç›´æ¥å»æŠ¢é”ï¼Œè°æŠ¢åˆ°å°±æ˜¯è°çš„\n- **Share**ï¼ˆå…±äº«ï¼‰ï¼šå¤šä¸ªçº¿ç¨‹å¯åŒæ—¶æ‰§è¡Œï¼Œå¦‚ Semaphore/CountDownLatchã€‚Semaphoreã€CountDownLatchã€ CyclicBarrierã€ReadWriteLock æˆ‘ä»¬éƒ½ä¼šåœ¨åé¢è®²åˆ°ã€‚\n\n**AQSåº•å±‚ä½¿ç”¨äº†æ¨¡æ¿æ–¹æ³•æ¨¡å¼**\n\nåŒæ­¥å™¨çš„è®¾è®¡æ˜¯åŸºäºæ¨¡æ¿æ–¹æ³•æ¨¡å¼çš„ï¼Œå¦‚æœéœ€è¦è‡ªå®šä¹‰åŒæ­¥å™¨ï¼ˆ**æ¨¡æ¿æ–¹æ³•æ¨¡å¼**å¾ˆç»å…¸çš„ä¸€ä¸ªåº”ç”¨ï¼‰ï¼š\n\n1. ä½¿ç”¨è€…ç»§æ‰¿ AQS å¹¶é‡å†™æŒ‡å®šçš„æ–¹æ³•ã€‚ï¼ˆå¯¹å…±äº«èµ„æº state çš„è·å–å’Œé‡Šæ”¾ï¼‰\n2. è°ƒç”¨ AQS çš„æ¨¡æ¿æ–¹æ³•ï¼Œä¼šè¿›ä¸€æ­¥è°ƒç”¨ä½¿ç”¨è€…é‡å†™çš„æ–¹æ³•ã€‚\n\n**AQSä½¿ç”¨äº†æ¨¡æ¿æ–¹æ³•æ¨¡å¼ï¼Œè‡ªå®šä¹‰åŒæ­¥å™¨æ—¶éœ€è¦é‡å†™ä¸‹é¢å‡ ä¸ªAQSæä¾›çš„æ¨¡æ¿æ–¹æ³•ï¼š**\n\n```java\nisHeldExclusively()\t// è¯¥çº¿ç¨‹æ˜¯å¦æ­£åœ¨ç‹¬å èµ„æºã€‚åªæœ‰ç”¨åˆ°conditionæ‰éœ€è¦å»å®ç°å®ƒã€‚\ntryAcquire(int)\t// ç‹¬å æ–¹å¼ã€‚å°è¯•è·å–èµ„æºï¼ŒæˆåŠŸåˆ™è¿”å›trueï¼Œå¤±è´¥åˆ™è¿”å›falseã€‚\ntryRelease(int)\t// ç‹¬å æ–¹å¼ã€‚å°è¯•é‡Šæ”¾èµ„æºï¼ŒæˆåŠŸåˆ™è¿”å›trueï¼Œå¤±è´¥åˆ™è¿”å›falseã€‚\ntryAcquireShared(int)\t// å…±äº«æ–¹å¼ã€‚å°è¯•è·å–èµ„æºã€‚è´Ÿæ•°è¡¨ç¤ºå¤±è´¥ï¼›0è¡¨ç¤ºæˆåŠŸï¼Œä½†æ²¡æœ‰å‰©ä½™å¯ç”¨èµ„æºï¼›æ­£æ•°è¡¨ç¤ºæˆåŠŸï¼Œä¸”æœ‰å‰©ä½™èµ„æºã€‚\ntryReleaseShared(int)\t// å…±äº«æ–¹å¼ã€‚å°è¯•é‡Šæ”¾èµ„æºï¼ŒæˆåŠŸåˆ™è¿”å›trueï¼Œå¤±è´¥åˆ™è¿”å›falseã€‚\n```\n\nä»¥ ReentrantLock ä¸ºä¾‹ï¼Œstate åˆå§‹åŒ–ä¸º0ï¼Œè¡¨ç¤ºæœªé”å®šçŠ¶æ€ã€‚A çº¿ç¨‹ lock() æ—¶ï¼Œä¼šè°ƒç”¨ tryAcquire() ç‹¬å è¯¥é”å¹¶å°† state+1ã€‚æ­¤åï¼Œå…¶ä»–çº¿ç¨‹å† tryAcquire() æ—¶å°±ä¼šå¤±è´¥ï¼Œç›´åˆ° A çº¿ç¨‹ unlock( )åˆ° state=0ï¼ˆå³é‡Šæ”¾é”ï¼‰ä¸ºæ­¢ï¼Œå…¶å®ƒçº¿ç¨‹æ‰æœ‰æœºä¼šè·å–è¯¥é”ã€‚å½“ç„¶ï¼Œé‡Šæ”¾é”ä¹‹å‰ï¼ŒA çº¿ç¨‹è‡ªå·±æ˜¯å¯ä»¥é‡å¤è·å–æ­¤é”çš„ï¼ˆstateä¼šç´¯åŠ ï¼‰ï¼Œè¿™å°±æ˜¯å¯é‡å…¥çš„æ¦‚å¿µã€‚\n\nä»¥ CountDownLatch ä»¥ä¾‹ï¼Œä»»åŠ¡åˆ†ä¸º N ä¸ªå­çº¿ç¨‹å»æ‰§è¡Œï¼Œstate ä¹Ÿåˆå§‹åŒ–ä¸º Nï¼ˆæ³¨æ„Nè¦ä¸çº¿ç¨‹ä¸ªæ•°ä¸€è‡´ï¼‰ã€‚è¿™ N ä¸ªå­çº¿ç¨‹æ˜¯å¹¶è¡Œæ‰§è¡Œçš„ï¼Œæ¯ä¸ªå­çº¿ç¨‹æ‰§è¡Œå®Œå countDown() ä¸€æ¬¡ï¼Œstate ä¼š CAS å‡ 1ã€‚ç­‰åˆ°æ‰€æœ‰å­çº¿ç¨‹éƒ½æ‰§è¡Œå®Œåï¼ˆå³state=0ï¼‰ï¼Œä¼š unpark() ä¸»è°ƒç”¨çº¿ç¨‹ï¼Œç„¶åä¸»è°ƒç”¨çº¿ç¨‹å°±ä¼šä» await() å‡½æ•°è¿”å›ï¼Œç»§ç»­åç»­åŠ¨ä½œã€‚\n\nä¸€èˆ¬æ¥è¯´ï¼Œè‡ªå®šä¹‰åŒæ­¥å™¨è¦ä¹ˆæ˜¯ç‹¬å æ–¹æ³•ï¼Œè¦ä¹ˆæ˜¯å…±äº«æ–¹å¼ï¼Œä»–ä»¬ä¹Ÿåªéœ€å®ç°`tryAcquire-tryRelease`ã€`tryAcquireShared-tryReleaseShared`ä¸­çš„ä¸€ç§å³å¯ã€‚ä½†AQSä¹Ÿæ”¯æŒè‡ªå®šä¹‰åŒæ­¥å™¨åŒæ—¶å®ç°ç‹¬å å’Œå…±äº«ä¸¤ç§æ–¹å¼ï¼Œå¦‚`ReentrantReadWriteLock`ã€‚\n\n### è¯»å†™é”\n\né¦–å…ˆæ˜ç¡®ä¸€ä¸‹ï¼Œä¸æ˜¯è¯´ ReentrantLock ä¸å¥½ï¼Œåªæ˜¯ ReentrantLock æŸäº›æ—¶å€™æœ‰å±€é™ã€‚å¦‚æœä½¿ç”¨ ReentrantLockï¼Œå¯èƒ½æœ¬èº«æ˜¯ä¸ºäº†é˜²æ­¢çº¿ç¨‹ A åœ¨å†™æ•°æ®ã€çº¿ç¨‹ B åœ¨è¯»æ•°æ®é€ æˆçš„æ•°æ®ä¸ä¸€è‡´ï¼Œä½†è¿™æ ·ï¼Œå¦‚æœçº¿ç¨‹ C åœ¨è¯»æ•°æ®ã€çº¿ç¨‹ D ä¹Ÿåœ¨è¯»æ•°æ®ï¼Œè¯»æ•°æ®æ˜¯ä¸ä¼šæ”¹å˜æ•°æ®çš„ï¼Œæ²¡æœ‰å¿…è¦åŠ é”ï¼Œä½†æ˜¯è¿˜æ˜¯åŠ é”äº†ï¼Œé™ä½äº†ç¨‹åºçš„æ€§èƒ½ã€‚å› ä¸ºè¿™ä¸ªï¼Œæ‰è¯ç”Ÿäº†è¯»å†™é” ReadWriteLockã€‚\n\nReadWriteLock æ˜¯ä¸€ä¸ªè¯»å†™é”æ¥å£ï¼Œè¯»å†™é”æ˜¯ç”¨æ¥æå‡å¹¶å‘ç¨‹åºæ€§èƒ½çš„é”åˆ†ç¦»æŠ€æœ¯ï¼ŒReentrantReadWriteLock æ˜¯ ReadWriteLock æ¥å£çš„ä¸€ä¸ªå…·ä½“å®ç°ï¼Œ**å®ç°äº†è¯»å†™çš„åˆ†ç¦»ï¼Œè¯»é”æ˜¯å…±äº«çš„ï¼Œå†™é”æ˜¯ç‹¬å çš„**ï¼Œè¯»å’Œè¯»ä¹‹é—´ä¸ä¼šäº’æ–¥ï¼Œè¯»å’Œå†™ã€å†™å’Œè¯»ã€å†™å’Œå†™ä¹‹é—´æ‰ä¼šäº’æ–¥ï¼Œæå‡äº†è¯»å†™çš„æ€§èƒ½ã€‚\n\n## å¹¶å‘å®¹å™¨\n\n### ConcurrentHashMap\n\n#### ä»€ä¹ˆæ˜¯ConcurrentHashMapï¼Ÿ\n\nConcurrentHashMapæ˜¯Javaä¸­çš„ä¸€ä¸ª**çº¿ç¨‹å®‰å…¨ä¸”é«˜æ•ˆçš„HashMapå®ç°**ã€‚\n\né‚£ä¹ˆå®ƒåˆ°åº•æ˜¯å¦‚ä½•å®ç°çº¿ç¨‹å®‰å…¨çš„ï¼Ÿ\n\nJDK 1.6ç‰ˆæœ¬å…³é”®è¦ç´ ï¼š\n\n- segment ç»§æ‰¿äº† ReentrantLock å……å½“é”çš„è§’è‰²ï¼Œä¸ºæ¯ä¸€ä¸ª segment æä¾›äº†çº¿ç¨‹å®‰å…¨çš„ä¿éšœï¼›\n- segment ç»´æŠ¤äº†å“ˆå¸Œæ•£åˆ—è¡¨çš„è‹¥å¹²ä¸ªæ¡¶ï¼Œæ¯ä¸ªæ¡¶ç”± HashEntry æ„æˆçš„é“¾è¡¨ã€‚\n\nJDK1.8åï¼ŒConcurrentHashMapæŠ›å¼ƒäº†åŸæœ‰çš„ Segment åˆ†æ®µé”ï¼Œè€Œ**é‡‡ç”¨äº† CAS + synchronized æ¥ä¿è¯å¹¶å‘å®‰å…¨æ€§**ã€‚\n\næ’å…¥å…ƒç´ è¿‡ç¨‹ï¼š\n\nå¦‚æœç›¸åº”ä½ç½®çš„Nodeè¿˜æ²¡æœ‰åˆå§‹åŒ–ï¼Œåˆ™è°ƒç”¨CASæ’å…¥ç›¸åº”çš„æ•°æ®ï¼›\n\nå¦‚æœç›¸åº”ä½ç½®çš„Nodeä¸ä¸ºç©ºï¼Œåˆ™å¯¹è¯¥èŠ‚ç‚¹åŠ synchronizedé”è¿›è¡Œæ’å…¥æˆ–æ›´æ–°æ“ä½œã€‚\n\n### CopyOnWriteArrayList\n\nCopyOnWriteå®¹å™¨å³**å†™æ—¶å¤åˆ¶çš„å®¹å™¨**ï¼Œå½“æˆ‘ä»¬å¾€ä¸€ä¸ªå®¹å™¨ä¸­æ·»åŠ å…ƒç´ çš„æ—¶å€™ï¼Œä¸ç›´æ¥å¾€å®¹å™¨ä¸­æ·»åŠ ï¼Œè€Œæ˜¯å°†å½“å‰å®¹å™¨è¿›è¡Œ copyï¼Œå¤åˆ¶å‡ºæ¥ä¸€ä¸ªæ–°çš„å®¹å™¨ï¼Œç„¶åå‘æ–°å®¹å™¨ä¸­æ·»åŠ æˆ‘ä»¬éœ€è¦çš„å…ƒç´ ï¼Œæœ€åå°†åŸå®¹å™¨çš„å¼•ç”¨æŒ‡å‘æ–°å®¹å™¨ã€‚\n\n**CopyOnWriteArrayList çš„ä½¿ç”¨åœºæ™¯**\n\né€šè¿‡æºç åˆ†æï¼Œæˆ‘ä»¬çœ‹å‡ºå®ƒçš„ä¼˜ç¼ºç‚¹æ¯”è¾ƒæ˜æ˜¾ï¼Œæ‰€ä»¥ä½¿ç”¨åœºæ™¯ä¹Ÿå°±æ¯”è¾ƒæ˜æ˜¾ã€‚å°±æ˜¯åˆé€‚è¯»å¤šå†™å°‘çš„åœºæ™¯ã€‚\n\n**CopyOnWriteArrayList çš„ç¼ºç‚¹**\n\n1. ç”±äºå†™æ“ä½œçš„æ—¶å€™ï¼Œéœ€è¦æ‹·è´æ•°ç»„ï¼Œä¼šæ¶ˆè€—å†…å­˜ï¼Œå¦‚æœåŸæ•°ç»„çš„å†…å®¹æ¯”è¾ƒå¤šçš„æƒ…å†µä¸‹ï¼Œå¯èƒ½å¯¼è‡´ young gc æˆ–è€… full gcã€‚\n2. **ä¸èƒ½ç”¨äºå®æ—¶è¯»çš„åœºæ™¯**ï¼Œåƒæ‹·è´æ•°ç»„ã€æ–°å¢å…ƒç´ éƒ½éœ€è¦æ—¶é—´ï¼Œæ‰€ä»¥è°ƒç”¨ä¸€ä¸ª set æ“ä½œåï¼Œ**è¯»å–åˆ°æ•°æ®å¯èƒ½è¿˜æ˜¯æ—§çš„**ï¼Œè™½ç„¶ CopyOnWriteArrayList èƒ½åšåˆ°æœ€ç»ˆä¸€è‡´æ€§,ä½†æ˜¯è¿˜æ˜¯æ²¡æ³•æ»¡è¶³å®æ—¶æ€§è¦æ±‚ã€‚\n\n### ThreadLocal\n\n#### ThreadLocalçš„æ•°æ®ç»“æ„\n\n<img src=\"https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/TyporaNotesthreadlocal%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84.a0bfadf8.png\" alt=\"ThreadLocalæ•°æ®ç»“æ„\" style=\"zoom: 67%;\" />\n\næ¯ä¸ªçº¿ç¨‹ Thread ä¸­æœ‰ä¸€ä¸ªç±»å‹ä¸º ThreadLocal.ThreadLocalMap çš„å®ä¾‹å˜é‡ threadLocalsï¼Œè¯¥å®ä¾‹å˜é‡ä¸­æ¯ä¸ª entryä¸º <threadLocalçš„å¼±å¼•ç”¨ï¼Œvalueä¸ºå¼ºå¼•ç”¨> çš„æ˜ å°„ï¼Œæ¯ä¸ªçº¿ç¨‹å¾€ threadLocal ä¸­å¯¹ value è¿›è¡Œæ“ä½œæ—¶ï¼Œéƒ½æ˜¯åœ¨è‡ªå·±çº¿ç¨‹ç§æœ‰çš„ threadLocalMap ä¸­è¿›è¡Œæ“ä½œï¼Œä»è€Œè¾¾åˆ°çº¿ç¨‹éš”ç¦»ã€‚\n\n```java\npublic class ThreadLocalDemo {\n    // private static final ThreadLocal<Integer> threadLocal = new ThreadLocal<Integer>(){\n    //     @Override\n    //     protected Integer initialValue() {\n    //         return 0;\n    //     }\n    // };\n\n    private static final ThreadLocal<Integer> threadLocal = ThreadLocal.withInitial(() -> 0);\n\n    public static void main(String[] args) {\n        for (int i = 0; i < 2; i++) {\n            new Thread(() -> {\n                for (int j = 0; j < 5; j++) {\n                    Integer val = threadLocal.get();\n                    threadLocal.set(++val);\n                    System.out.println(Thread.currentThread().getName() + \" ---- \" + val);\n                }\n            }, \"Thread-\" + i).start();\n        }\n\n        try {\n            Thread.sleep(10);\n        } catch (InterruptedException e) {\n            e.printStackTrace();\n        }\n\n        System.out.println(Thread.currentThread().getName() + \" ---- \" + threadLocal.get());\n    }\n}\n```\n\næ‰“å°ç»“æœï¼šå¯åŠ¨äº† 2 ä¸ªçº¿ç¨‹ï¼Œæ¯ä¸ªçº¿ç¨‹æœ€åéƒ½æ‰“å°åˆ° 5ï¼Œ æœ€åthreadLocal.getä»ç„¶æ˜¯0\n\n```java\nThread-1 ---- 1\nThread-0 ---- 1\nThread-1 ---- 2\nThread-0 ---- 2\nThread-1 ---- 3\nThread-1 ---- 4\nThread-1 ---- 5\nThread-0 ---- 3\nThread-0 ---- 4\nThread-0 ---- 5\nmain ---- 0\n```\n\n### ThreadLocalå†…å­˜æ³„æ¼\n\n#### ThreadLocalé€ æˆå†…å­˜æ³„æ¼çš„åŸå› ï¼Ÿ\n\nThreadLocalMap ä¸­ä½¿ç”¨çš„ key ä¸º ThreadLocal çš„å¼±å¼•ç”¨,è€Œ value æ˜¯å¼ºå¼•ç”¨ã€‚æ‰€ä»¥ï¼Œå¦‚æœ ThreadLocal æ²¡æœ‰è¢«å¤–éƒ¨å¼ºå¼•ç”¨çš„æƒ…å†µä¸‹ï¼Œåœ¨åƒåœ¾å›æ”¶çš„æ—¶å€™ï¼Œkey ä¼šè¢«æ¸…ç†æ‰ï¼Œè€Œ value ä¸ä¼šè¢«æ¸…ç†æ‰ã€‚è¿™æ ·ä¸€æ¥ï¼ŒThreadLocalMap ä¸­å°±ä¼šå‡ºç° key ä¸º null çš„ Entryã€‚å‡å¦‚æˆ‘ä»¬ä¸åšä»»ä½•æªæ–½çš„è¯ï¼Œvalue æ°¸è¿œæ— æ³•è¢« GC å›æ”¶ï¼Œè¿™ä¸ªæ—¶å€™å°±å¯èƒ½ä¼šäº§ç”Ÿå†…å­˜æ³„éœ²ã€‚ThreadLocalMap å®ç°ä¸­å·²ç»è€ƒè™‘äº†è¿™ç§æƒ…å†µï¼Œæ¯æ¬¡ä½¿ç”¨å®Œ ThreadLocal åï¼Œéƒ½è°ƒç”¨å®ƒçš„remove()æ–¹æ³•ï¼Œæ¸…ç†æ‰ key ä¸º null çš„è®°å½•ã€‚\n\n### BlockingQueue\n\né˜»å¡é˜Ÿåˆ—ï¼ˆBlockingQueueï¼‰æ˜¯ä¸€ä¸ªæ”¯æŒä¸¤ä¸ªé™„åŠ æ“ä½œçš„é˜Ÿåˆ—ã€‚\n\nåœ¨é˜Ÿåˆ—ä¸ºç©ºæ—¶ï¼Œè·å–å…ƒç´ çš„çº¿ç¨‹ä¼šç­‰å¾…é˜Ÿåˆ—å˜ä¸ºéç©ºã€‚å½“é˜Ÿåˆ—æ»¡æ—¶ï¼Œå­˜å‚¨å…ƒç´ çš„çº¿ç¨‹ä¼šç­‰å¾…é˜Ÿåˆ—å¯ç”¨ã€‚\n\né˜»å¡é˜Ÿåˆ—å¸¸ç”¨äºç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…çš„åœºæ™¯ï¼Œç”Ÿäº§è€…æ˜¯å¾€é˜Ÿåˆ—é‡Œæ·»åŠ å…ƒç´ çš„çº¿ç¨‹ï¼Œæ¶ˆè´¹è€…æ˜¯ä»é˜Ÿåˆ—é‡Œæ‹¿å…ƒç´ çš„çº¿ç¨‹ã€‚é˜»å¡é˜Ÿåˆ—å°±æ˜¯ç”Ÿäº§è€…å­˜æ”¾å…ƒç´ çš„å®¹å™¨ï¼Œè€Œæ¶ˆè´¹è€…ä¹Ÿåªä»å®¹å™¨é‡Œæ‹¿å…ƒç´ ã€‚\n\nJDK7 æä¾›äº† 7 ä¸ªé˜»å¡é˜Ÿåˆ—ã€‚åˆ†åˆ«æ˜¯ï¼š\n\n> ArrayBlockingQueue ï¼šä¸€ä¸ªç”±æ•°ç»„ç»“æ„ç»„æˆçš„æœ‰ç•Œé˜»å¡é˜Ÿåˆ—ã€‚\n> LinkedBlockingQueue ï¼šä¸€ä¸ªç”±é“¾è¡¨ç»“æ„ç»„æˆçš„æœ‰ç•Œé˜»å¡é˜Ÿåˆ—ã€‚\n> PriorityBlockingQueue ï¼šä¸€ä¸ªæ”¯æŒä¼˜å…ˆçº§æ’åºçš„æ— ç•Œé˜»å¡é˜Ÿåˆ—ã€‚\n> DelayQueueï¼šä¸€ä¸ªä½¿ç”¨ä¼˜å…ˆçº§é˜Ÿåˆ—å®ç°çš„æ— ç•Œé˜»å¡é˜Ÿåˆ—ã€‚\n> SynchronousQueueï¼šä¸€ä¸ªä¸å­˜å‚¨å…ƒç´ çš„é˜»å¡é˜Ÿåˆ—ã€‚\n> LinkedTransferQueueï¼šä¸€ä¸ªç”±é“¾è¡¨ç»“æ„ç»„æˆçš„æ— ç•Œé˜»å¡é˜Ÿåˆ—ã€‚\n> LinkedBlockingDequeï¼šä¸€ä¸ªç”±é“¾è¡¨ç»“æ„ç»„æˆçš„åŒå‘é˜»å¡é˜Ÿåˆ—ã€‚\n\nJava 5 ä¹‹å‰å®ç°åŒæ­¥å­˜å–æ—¶ï¼Œå¯ä»¥ä½¿ç”¨æ™®é€šçš„ä¸€ä¸ªé›†åˆï¼Œç„¶ååœ¨ä½¿ç”¨çº¿ç¨‹çš„åä½œå’Œçº¿ç¨‹åŒæ­¥å¯ä»¥å®ç°ç”Ÿäº§è€…ï¼Œæ¶ˆè´¹è€…æ¨¡å¼ï¼Œä¸»è¦çš„æŠ€æœ¯å°±æ˜¯ç”¨å¥½ waitï¼Œnotifyï¼ŒnotifyAllï¼Œsynchronized è¿™äº›å…³é”®å­—ã€‚è€Œåœ¨ Java 5 ä¹‹åï¼Œå¯ä»¥ä½¿ç”¨é˜»å¡é˜Ÿåˆ—æ¥å®ç°ï¼Œæ­¤æ–¹å¼å¤§å¤§ç®€å°‘äº†ä»£ç é‡ï¼Œä½¿å¾—å¤šçº¿ç¨‹ç¼–ç¨‹æ›´åŠ å®¹æ˜“ï¼Œå®‰å…¨æ–¹é¢ä¹Ÿæœ‰ä¿éšœã€‚\n\nBlockingQueue æ¥å£æ˜¯ Queue çš„å­æ¥å£ï¼Œå®ƒçš„ä¸»è¦ç”¨é€”å¹¶ä¸æ˜¯ä½œä¸ºå®¹å™¨ï¼Œè€Œæ˜¯ä½œä¸ºçº¿ç¨‹åŒæ­¥çš„çš„å·¥å…·ï¼Œå› æ­¤ä»–å…·æœ‰ä¸€ä¸ªå¾ˆæ˜æ˜¾çš„ç‰¹æ€§ï¼Œ**å½“ç”Ÿäº§è€…çº¿ç¨‹è¯•å›¾å‘ BlockingQueue æ”¾å…¥å…ƒç´ æ—¶ï¼Œå¦‚æœé˜Ÿåˆ—å·²æ»¡ï¼Œåˆ™çº¿ç¨‹è¢«é˜»å¡ï¼Œå½“æ¶ˆè´¹è€…çº¿ç¨‹è¯•å›¾ä»ä¸­å–å‡ºä¸€ä¸ªå…ƒç´ æ—¶ï¼Œå¦‚æœé˜Ÿåˆ—ä¸ºç©ºï¼Œåˆ™è¯¥çº¿ç¨‹ä¼šè¢«é˜»å¡**ï¼Œæ­£æ˜¯å› ä¸ºå®ƒæ‰€å…·æœ‰è¿™ä¸ªç‰¹æ€§ï¼Œæ‰€ä»¥åœ¨ç¨‹åºä¸­å¤šä¸ªçº¿ç¨‹äº¤æ›¿å‘ BlockingQueue ä¸­æ”¾å…¥å…ƒç´ ï¼Œå–å‡ºå…ƒç´ ï¼Œå®ƒå¯ä»¥å¾ˆå¥½çš„æ§åˆ¶çº¿ç¨‹ä¹‹é—´çš„é€šä¿¡ã€‚\n\n## çº¿ç¨‹æ± \n\n### Executors åˆ›å»ºå››ç§å¸¸è§çº¿ç¨‹æ± \n\n#### ä»€ä¹ˆæ˜¯çº¿ç¨‹æ± ï¼Ÿæœ‰å“ªå‡ ç§åˆ›å»ºæ–¹å¼ï¼Ÿ\n\n> æ± åŒ–æŠ€æœ¯çš„æ€æƒ³ä¸»è¦æ˜¯ä¸ºäº†å‡å°‘æ¯æ¬¡è·å–èµ„æºçš„æ¶ˆè€—ï¼Œæé«˜å¯¹èµ„æºçš„åˆ©ç”¨ç‡ã€‚\n\nåœ¨é¢å‘å¯¹è±¡ç¼–ç¨‹ä¸­ï¼Œåˆ›å»ºå’Œé”€æ¯å¯¹è±¡æ˜¯å¾ˆè´¹æ—¶é—´çš„ï¼Œå› ä¸ºåˆ›å»ºä¸€ä¸ªå¯¹è±¡è¦è·å–å†…å­˜èµ„æºæˆ–è€…å…¶å®ƒæ›´å¤šèµ„æºã€‚åœ¨ Java ä¸­æ›´æ˜¯å¦‚æ­¤ï¼Œè™šæ‹Ÿæœºå°†è¯•å›¾è·Ÿè¸ªæ¯ä¸€ä¸ªå¯¹è±¡ï¼Œä»¥ä¾¿èƒ½å¤Ÿåœ¨å¯¹è±¡é”€æ¯åè¿›è¡Œåƒåœ¾å›æ”¶ã€‚æ‰€ä»¥æé«˜æœåŠ¡ç¨‹åºæ•ˆç‡çš„ä¸€ä¸ªæ‰‹æ®µå°±æ˜¯**å°½å¯èƒ½å‡å°‘åˆ›å»ºå’Œé”€æ¯å¯¹è±¡çš„æ¬¡æ•°**ï¼Œç‰¹åˆ«æ˜¯ä¸€äº›å¾ˆè€—èµ„æºçš„å¯¹è±¡åˆ›å»ºå’Œé”€æ¯ï¼Œè¿™å°±æ˜¯â€æ± åŒ–èµ„æºâ€æŠ€æœ¯äº§ç”Ÿçš„åŸå› ã€‚\n\nçº¿ç¨‹æ± é¡¾åæ€ä¹‰å°±æ˜¯äº‹å…ˆåˆ›å»ºè‹¥å¹²ä¸ªå¯æ‰§è¡Œçš„çº¿ç¨‹æ”¾å…¥ä¸€ä¸ªæ± ï¼ˆå®¹å™¨ï¼‰ä¸­ï¼Œéœ€è¦çš„æ—¶å€™ä»æ± ä¸­è·å–çº¿ç¨‹ä¸ç”¨è‡ªè¡Œåˆ›å»ºï¼Œä½¿ç”¨å®Œæ¯•ä¸éœ€è¦é”€æ¯çº¿ç¨‹è€Œæ˜¯æ”¾å›æ± ä¸­ï¼Œä»è€Œå‡å°‘åˆ›å»ºå’Œé”€æ¯çº¿ç¨‹å¯¹è±¡çš„å¼€é”€ã€‚Java 5+ä¸­çš„ Executor æ¥å£å®šä¹‰ä¸€ä¸ªæ‰§è¡Œçº¿ç¨‹çš„å·¥å…·ã€‚å®ƒçš„å­ç±»å‹å³çº¿ç¨‹æ± æ¥å£æ˜¯ ExecutorServiceã€‚è¦é…ç½®ä¸€ä¸ªçº¿ç¨‹æ± æ˜¯æ¯”è¾ƒå¤æ‚çš„ï¼Œå°¤å…¶æ˜¯å¯¹äºçº¿ç¨‹æ± çš„åŸç†ä¸æ˜¯å¾ˆæ¸…æ¥šçš„æƒ…å†µä¸‹ï¼Œå› æ­¤åœ¨å·¥å…·ç±» Executors é¢æä¾›äº†ä¸€äº›é™æ€å·¥å‚æ–¹æ³•ï¼Œç”Ÿæˆä¸€äº›å¸¸ç”¨çš„çº¿ç¨‹æ± ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š\n\nï¼ˆ1ï¼‰Executors.newSingleThreadExecutorï¼š`1, 1, new LinkedBlockingQueue`ã€‚æ‰€æœ‰ä»»åŠ¡æŒ‰ç…§**å…ˆæ¥å…ˆæ‰§è¡Œ**çš„é¡ºåºæ‰§è¡Œã€‚å¦‚æœè¿™ä¸ªå”¯ä¸€çš„çº¿ç¨‹ä¸ç©ºé—²ï¼Œé‚£ä¹ˆæ–°æ¥çš„ä»»åŠ¡ä¼šå­˜å‚¨åœ¨ä»»åŠ¡é˜Ÿåˆ—é‡Œç­‰å¾…æ‰§è¡Œã€‚ï¼ˆç”±äºé˜»å¡é˜Ÿåˆ—é»˜è®¤å¤§å°ä¸ºInteger.MAX_VALUEï¼Œå› æ­¤å¯èƒ½OOMï¼‰\n\nï¼ˆ2ï¼‰Executors.newFixedThreadPoolï¼š`nCoreThreads, nCoreThreads, new LinkedBlockingQueue`ï¼Œæ‰€ä»¥åªèƒ½åˆ›å»ºæ ¸å¿ƒçº¿ç¨‹ï¼Œä¸èƒ½åˆ›å»ºéæ ¸å¿ƒçº¿ç¨‹ã€‚å› ä¸º LinkedBlockingQueue çš„é»˜è®¤å¤§å°æ˜¯ Integer.MAX_VALUEï¼Œæ•…å¦‚æœæ ¸å¿ƒçº¿ç¨‹ç©ºé—²ï¼Œåˆ™äº¤ç»™æ ¸å¿ƒçº¿ç¨‹å¤„ç†ï¼›å¦‚æœæ ¸å¿ƒçº¿ç¨‹ä¸ç©ºé—²ï¼Œåˆ™å…¥åˆ—ç­‰å¾…ï¼Œç›´åˆ°æ ¸å¿ƒçº¿ç¨‹ç©ºé—²ã€‚ï¼ˆç”±äºé˜»å¡é˜Ÿåˆ—é»˜è®¤å¤§å°ä¸ºInteger.MAX_VALUEï¼Œå› æ­¤å¯èƒ½OOMï¼‰\n\nï¼ˆ3ï¼‰ Executors.newCachedThreadPoolï¼š`0, Integer.MAX_VALUE`ï¼Œä¸åˆ›å»ºæ ¸å¿ƒçº¿ç¨‹ï¼Œçº¿ç¨‹æ± æœ€å¤§ä¸ºInteger.MAX_VALUEã€‚ï¼ˆçº¿ç¨‹æ± å¤ªå¤§å¯¼è‡´OOMï¼‰\n\nnewCachedThreadPool å’Œ newFixedThreadPool éƒ½å‡ ä¹ä¸ä¼šè§¦å‘æ‹’ç»ç­–ç•¥ï¼Œä½†æ˜¯åŸç†ä¸åŒã€‚\nFixedThreadPool æ˜¯å› ä¸ºé˜»å¡é˜Ÿåˆ—å¯ä»¥å¾ˆå¤§ï¼ˆæœ€å¤§ä¸ºIntegeræœ€å¤§å€¼ï¼‰ï¼Œæ•…å‡ ä¹ä¸ä¼šè§¦å‘æ‹’ç»ç­–ç•¥ï¼›CachedThreadPool æ˜¯å› ä¸ºçº¿ç¨‹æ± å¾ˆå¤§ï¼ˆæœ€å¤§ä¸ºIntegeræœ€å¤§å€¼ï¼‰ï¼Œå‡ ä¹ä¸ä¼šå¯¼è‡´çº¿ç¨‹æ•°é‡å¤§äºæœ€å¤§çº¿ç¨‹æ•°ï¼Œæ•…å‡ ä¹ä¸ä¼šè§¦å‘æ‹’ç»ç­–ç•¥ã€‚\n\nï¼ˆ4ï¼‰Executors.newScheduledThreadPoolï¼š`nCoreThreads, Integer.MAX_VALUE`åˆ›å»ºä¸€ä¸ªå¤§å°æ— é™çš„çº¿ç¨‹æ± ã€‚æ­¤çº¿ç¨‹æ± æ”¯æŒå®šæ—¶ä»¥åŠå‘¨æœŸæ€§æ‰§è¡Œä»»åŠ¡çš„éœ€æ±‚ã€‚\n\n#### çº¿ç¨‹æ± æœ‰ä»€ä¹ˆä¼˜ç‚¹ï¼Ÿ\n\n- é™ä½èµ„æºæ¶ˆè€—ï¼šé‡ç”¨å­˜åœ¨çš„çº¿ç¨‹ï¼Œå‡å°‘å¯¹è±¡åˆ›å»ºé”€æ¯çš„å¼€é”€ï¼›\n- æé«˜å“åº”é€Ÿåº¦ï¼šå½“ä»»åŠ¡åˆ°è¾¾æ—¶ï¼Œä»»åŠ¡å¯ä»¥ä¸éœ€è¦çš„ç­‰åˆ°çº¿ç¨‹åˆ›å»ºå°±èƒ½ç«‹å³æ‰§è¡Œï¼›\n- æé«˜çº¿ç¨‹çš„å¯ç®¡ç†æ€§ï¼šä½¿ç”¨çº¿ç¨‹æ± å¯ä»¥è¿›è¡Œç»Ÿä¸€çš„åˆ†é…ï¼Œè°ƒä¼˜å’Œç›‘æ§ã€‚\n\n#### çº¿ç¨‹æ± éƒ½æœ‰å“ªäº›çŠ¶æ€ï¼Ÿ\n\n- RUNNINGï¼šæ¥å—æ–°çš„ä»»åŠ¡æäº¤ï¼Œå¤„ç†ç­‰å¾…é˜Ÿåˆ—ä¸­çš„ä»»åŠ¡ï¼›\n- SHUTDOWNï¼šä¸æ¥å—æ–°çš„ä»»åŠ¡æäº¤ï¼Œä½†æ˜¯ä¼šç»§ç»­å¤„ç†ç­‰å¾…é˜Ÿåˆ—ä¸­çš„ä»»åŠ¡ï¼›\n- STOPï¼šä¸æ¥å—æ–°çš„ä»»åŠ¡æäº¤ï¼Œä¸å†å¤„ç†ç­‰å¾…é˜Ÿåˆ—ä¸­çš„ä»»åŠ¡ï¼Œä¸­æ–­æ­£åœ¨æ‰§è¡Œä»»åŠ¡çš„çº¿ç¨‹ï¼›\n- TIDYINGï¼šæ‰€æœ‰çš„ä»»åŠ¡éƒ½é”€æ¯äº†ï¼ŒworkCount ä¸º 0ï¼Œçº¿ç¨‹æ± çš„çŠ¶æ€åœ¨è½¬æ¢ä¸º TIDYING çŠ¶æ€æ—¶ï¼Œä¼šæ‰§è¡Œé’©å­æ–¹æ³• terminated()ï¼›\n- TERMINATEDï¼šterminated()æ–¹æ³•ç»“æŸåï¼Œçº¿ç¨‹æ± çš„çŠ¶æ€å°±ä¼šå˜æˆè¿™ä¸ªã€‚\n\n#### åœ¨ Java ä¸­ Executor å’Œ Executors çš„åŒºåˆ«ï¼Ÿ\n\n- **Executors å·¥å…·ç±»**çš„ä¸åŒæ–¹æ³•æŒ‰ç…§æˆ‘ä»¬çš„éœ€æ±‚**åˆ›å»ºäº†ä¸åŒçš„çº¿ç¨‹æ± **ï¼Œæ¥æ»¡è¶³ä¸šåŠ¡çš„éœ€æ±‚ï¼›\n- **Executor æ¥å£å¯¹è±¡æ‰§è¡Œæˆ‘ä»¬çš„çº¿ç¨‹ä»»åŠ¡**ï¼ŒExecutorService æ¥å£ç»§æ‰¿äº† Executor æ¥å£å¹¶è¿›è¡Œäº†æ‰©å±•ï¼Œæä¾›äº†æ›´å¤šçš„æ–¹æ³•æˆ‘ä»¬èƒ½è·å¾—ä»»åŠ¡æ‰§è¡Œçš„çŠ¶æ€å¹¶ä¸”å¯ä»¥è·å–ä»»åŠ¡çš„è¿”å›å€¼ã€‚\n\n#### çº¿ç¨‹æ± ä¸­ submit() å’Œ execute() æ–¹æ³•æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\n\næ¥æ”¶å‚æ•°ï¼šsubmit() å¯ä»¥æ‰§è¡Œ Runnable å’Œ Callable ç±»å‹çš„ä»»åŠ¡ï¼Œè€Œexecute()åªèƒ½æ‰§è¡Œ Runnable ç±»å‹çš„ä»»åŠ¡ï¼›\n\nè¿”å›å€¼ï¼šsubmit() æ–¹æ³•å¯ä»¥è¿”å›æŒæœ‰è®¡ç®—ç»“æœçš„ Future å¯¹è±¡ï¼Œè€Œ execute() æ²¡æœ‰ï¼›\n\nå¼‚å¸¸å¤„ç†ï¼šsubmit() æ–¹ä¾¿ Exception å¤„ç†ã€‚\n\n### ThreadPoolExecutor è‡ªå®šä¹‰çº¿ç¨‹æ± \n\n#### Executors\n\nã€Šé˜¿é‡Œå·´å·´Javaå¼€å‘æ‰‹å†Œã€‹ä¸­å¼ºåˆ¶çº¿ç¨‹æ± ä¸å…è®¸ä½¿ç”¨ Executors å»åˆ›å»ºï¼Œè€Œæ˜¯**é€šè¿‡ ThreadPoolExecutor çš„æ–¹å¼**ï¼Œè¿™æ ·çš„å¤„ç†æ–¹å¼è®©å†™çš„åŒå­¦**æ›´åŠ æ˜ç¡®çº¿ç¨‹æ± çš„è¿è¡Œè§„åˆ™ï¼Œè§„é¿èµ„æºè€—å°½çš„é£é™©**\n\nExecutors å„ä¸ªæ–¹æ³•çš„å¼Šç«¯ï¼š\n\n- newSingleThreadExecutor å’Œ newFixedThreadPool :\n\t`0, 0`å’Œ `n, n` ï¼Œä½†æ˜¯ä½¿ç”¨ LinkedBlockingQueueï¼Œæœ€å¤§å¯ä»¥ä¸º Integer.MAX_VALUE\n\n\tä¸»è¦é—®é¢˜æ˜¯å †ç§¯çš„è¯·æ±‚å¤„ç†é˜Ÿåˆ—å¯èƒ½ä¼šè€—è´¹éå¸¸å¤§çš„å†…å­˜ï¼Œç”šè‡³ OOMã€‚\n\n- newCachedThreadPool å’Œ newScheduledThreadPool:\n\t`0, Integer.MAX_VALUE` å’Œ `n, Integer.MAX_VALUE`\n\n\tä¸»è¦é—®é¢˜æ˜¯çº¿ç¨‹æ•°æœ€å¤§æ•°æ˜¯ Integer.MAX_VALUEï¼Œå¯èƒ½ä¼šåˆ›å»ºæ•°é‡éå¸¸å¤šçš„çº¿ç¨‹ï¼Œç”šè‡³ OOM\n\nThreaPoolExecutoråˆ›å»ºçº¿ç¨‹æ± æ–¹å¼åªæœ‰ä¸€ç§ï¼Œå°±æ˜¯èµ°å®ƒçš„æ„é€ å‡½æ•°ï¼Œå‚æ•°è‡ªå·±æŒ‡å®š\n\n#### ThreaPoolExecutor \n\nåˆ›å»ºçº¿ç¨‹æ± çš„æ–¹å¼æœ‰å¤šç§ï¼Œè¿™é‡Œä½ åªéœ€è¦ç­” ThreadPoolExecutor å³å¯ã€‚\n\nThreadPoolExecutor() æ˜¯æœ€åŸå§‹çš„çº¿ç¨‹æ± åˆ›å»ºï¼Œä¹Ÿæ˜¯é˜¿é‡Œå·´å·´ Java å¼€å‘æ‰‹å†Œä¸­æ˜ç¡®è§„èŒƒçš„åˆ›å»ºçº¿ç¨‹æ± çš„æ–¹å¼ã€‚\n\n#### ThreadPoolExecutoræ„é€ å‡½æ•°é‡è¦å‚æ•°åˆ†æ\n\n**`ThreadPoolExecutor`** **3 ä¸ªæœ€é‡è¦çš„å‚æ•°ï¼š**\n\n- **`corePoolSize`** ï¼šæ ¸å¿ƒçº¿ç¨‹æ•°ï¼Œçº¿ç¨‹æ•°å®šä¹‰äº†æœ€å°å¯ä»¥åŒæ—¶è¿è¡Œçš„çº¿ç¨‹æ•°é‡\n- **`maximumPoolSize`** ï¼šçº¿ç¨‹æ± ä¸­å…è®¸å­˜åœ¨çš„å·¥ä½œçº¿ç¨‹çš„æœ€å¤§æ•°é‡\n- **`workQueue`**ï¼šå½“æ–°ä»»åŠ¡æ¥çš„æ—¶å€™ä¼šå…ˆåˆ¤æ–­å½“å‰è¿è¡Œçš„çº¿ç¨‹æ•°é‡æ˜¯å¦è¾¾åˆ°æ ¸å¿ƒçº¿ç¨‹æ•°ï¼Œå¦‚æœè¾¾åˆ°çš„è¯ï¼Œä»»åŠ¡å°±ä¼šè¢«å­˜æ”¾åœ¨ç­‰å¾…é˜Ÿåˆ—ä¸­\n\n`ThreadPoolExecutor`å…¶ä»–å¸¸è§å‚æ•°:\n\n1. **`keepAliveTime`**ï¼šéæ ¸å¿ƒçº¿ç¨‹å¦‚æœå¤„äºé—²ç½®çŠ¶æ€è¶…è¿‡è¯¥å€¼ï¼Œå°±ä¼šè¢«é”€æ¯ã€‚\n2. **`unit`** ï¼š`keepAliveTime` é—²ç½®é”€æ¯æ—¶é•¿çš„æ—¶é—´å•ä½\n3. **`threadFactory`**ï¼šä¸ºçº¿ç¨‹æ± æä¾›åˆ›å»ºæ–°çº¿ç¨‹çš„çº¿ç¨‹å·¥å‚\n4. **`handler`** ï¼šçº¿ç¨‹æ± ä»»åŠ¡é˜Ÿåˆ—è¶…è¿‡ maxinumPoolSize ä¹‹åçš„æ‹’ç»ç­–ç•¥\n\n#### ThreadPoolExecutoræ‹’ç»ç­–ç•¥\n\n**`ThreadPoolExecutor`** **æ‹’ç»ç­–ç•¥å®šä¹‰:**\n\nå¦‚æœå½“å‰åŒæ—¶è¿è¡Œçš„çº¿ç¨‹æ•°é‡è¾¾åˆ°æœ€å¤§çº¿ç¨‹æ•°é‡å¹¶ä¸”ç­‰å¾…é˜Ÿåˆ—ä¹Ÿå·²ç»è¢«æ”¾æ»¡æ—¶ï¼Œ`ThreadPoolTaskExecutor` å®šä¹‰ä¸€äº›ç­–ç•¥:\n\n- **`ThreadPoolExecutor.AbortPolicy`**ï¼šæŠ›å‡º `RejectedExecutionException`æ¥æ‹’ç»æ–°ä»»åŠ¡çš„å¤„ç†ã€‚\n- **`ThreadPoolExecutor.CallerRunsPolicy`**ï¼šè°ƒç”¨æ‰§è¡Œè‡ªå·±çš„çº¿ç¨‹è¿è¡Œä»»åŠ¡ã€‚\n- **`ThreadPoolExecutor.DiscardPolicy`**ï¼šä¸å¤„ç†æ–°ä»»åŠ¡ï¼Œç›´æ¥ä¸¢å¼ƒæ‰ã€‚\n- **`ThreadPoolExecutor.DiscardOldestPolicy`**ï¼š æ­¤ç­–ç•¥å°†ä¸¢å¼ƒæœ€æ—©çš„æœªå¤„ç†çš„ä»»åŠ¡è¯·æ±‚ã€‚\n\n#### ä¸€ä¸ªç®€å•çš„çº¿ç¨‹æ± Demo:`Runnable` + `ThreadPoolExecutor`\n\nçº¿ç¨‹æ± å®ç°åŸç†\n\n![çº¿ç¨‹æ± å®ç°åŸç†](https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/TyporaNotesaHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAxOS8xMS8yNS8xNmVhMDQ3NjEyOTVlNzY2.png)\n\n**æ€»ç»“ä¸€ä¸‹å¤„ç†æµç¨‹**\n\n1. çº¿ç¨‹æ€»æ•°é‡ < corePoolSizeï¼Œæ— è®ºçº¿ç¨‹æ˜¯å¦ç©ºé—²ï¼Œéƒ½ä¼šæ–°å»ºä¸€ä¸ªæ ¸å¿ƒçº¿ç¨‹æ‰§è¡Œä»»åŠ¡ï¼ˆè®©æ ¸å¿ƒçº¿ç¨‹æ•°é‡å¿«é€Ÿè¾¾åˆ°corePoolSizeï¼Œåœ¨æ ¸å¿ƒçº¿ç¨‹æ•°é‡ < corePoolSizeæ—¶ï¼‰ã€‚**æ³¨æ„ï¼Œè¿™ä¸€æ­¥éœ€è¦è·å¾—å…¨å±€é”ã€‚**\n2. çº¿ç¨‹æ€»æ•°é‡ >= corePoolSizeæ—¶ï¼Œæ–°æ¥çš„çº¿ç¨‹ä»»åŠ¡ä¼šè¿›å…¥ç­‰å¾…é˜Ÿåˆ—ä¸­ç­‰å¾…ï¼Œç„¶åç©ºé—²çš„æ ¸å¿ƒçº¿ç¨‹ä¼šä¾æ¬¡å»ç¼“å­˜é˜Ÿåˆ—ä¸­å–ä»»åŠ¡æ¥æ‰§è¡Œï¼ˆä½“ç°äº†**çº¿ç¨‹å¤ç”¨**ï¼‰ã€‚ \n3. å½“ç­‰å¾…é˜Ÿåˆ—æ»¡äº†ï¼Œè¯´æ˜è¿™ä¸ªæ—¶å€™ä»»åŠ¡å·²ç»å¤šåˆ°çˆ†æ£šï¼Œéœ€è¦ä¸€äº›â€œä¸´æ—¶å·¥â€æ¥æ‰§è¡Œè¿™äº›ä»»åŠ¡äº†ã€‚äºæ˜¯ä¼šåˆ›å»ºéæ ¸å¿ƒçº¿ç¨‹å»æ‰§è¡Œè¿™ä¸ªä»»åŠ¡ã€‚**æ³¨æ„ï¼Œè¿™ä¸€æ­¥éœ€è¦è·å¾—å…¨å±€é”ã€‚**\n4. ç¼“å­˜é˜Ÿåˆ—ä¹‹å‰æ»¡äº†ï¼Œ ç°åœ¨åŠ éæ ¸å¿ƒçº¿ç¨‹ä¸”æ€»çº¿ç¨‹æ•°è¾¾åˆ°äº†maximumPoolSizeï¼Œåˆ™ä¼šé‡‡å–ä¸Šé¢æåˆ°çš„æ‹’ç»ç­–ç•¥è¿›è¡Œå¤„ç†ã€‚\n\næ•´ä¸ªè¿‡ç¨‹å¦‚å›¾æ‰€ç¤ºï¼š\n\nä¸ºäº†è®©å¤§å®¶æ›´æ¸…æ¥šä¸Šé¢çš„é¢è¯•é¢˜ä¸­çš„ä¸€äº›æ¦‚å¿µï¼Œæˆ‘å†™äº†ä¸€ä¸ªç®€å•çš„çº¿ç¨‹æ±  Demoã€‚\n\né¦–å…ˆåˆ›å»ºä¸€ä¸ª `Runnable` æ¥å£çš„å®ç°ç±»ï¼ˆå½“ç„¶ä¹Ÿå¯ä»¥æ˜¯ `Callable` æ¥å£ï¼Œæˆ‘ä»¬ä¸Šé¢ä¹Ÿè¯´äº†ä¸¤è€…çš„åŒºåˆ«ã€‚ï¼‰\n\n```java\nimport Java.util.Date;\n\n/**\n * è¿™æ˜¯ä¸€ä¸ªç®€å•çš„Runnableç±»ï¼Œéœ€è¦å¤§çº¦5ç§’é’Ÿæ¥æ‰§è¡Œå…¶ä»»åŠ¡ã€‚\n */\npublic class MyRunnable implements Runnable {\n\n    private String command;\n\n    public MyRunnable(String s) {\n        this.command = s;\n    }\n\n    @Override\n    public void run() {\n        System.out.println(Thread.currentThread().getName() + \" Start. Time = \" + new Date());\n        processCommand();\n        System.out.println(Thread.currentThread().getName() + \" End. Time = \" + new Date());\n    }\n\n    private void processCommand() {\n        try {\n            Thread.sleep(5000);\n        } catch (InterruptedException e) {\n            e.printStackTrace();\n        }\n    }\n\n    @Override\n    public String toString() {\n        return this.command;\n    }\n}\n```\n\nç¼–å†™æµ‹è¯•ç¨‹åºï¼Œæˆ‘ä»¬è¿™é‡Œä»¥é˜¿é‡Œå·´å·´æ¨èçš„ä½¿ç”¨ `ThreadPoolExecutor` æ„é€ å‡½æ•°è‡ªå®šä¹‰å‚æ•°çš„æ–¹å¼æ¥åˆ›å»ºçº¿ç¨‹æ± ã€‚\n\n```java\nimport Java.util.concurrent.ArrayBlockingQueue;\nimport Java.util.concurrent.ThreadPoolExecutor;\nimport Java.util.concurrent.TimeUnit;\n\npublic class ThreadPoolExecutorDemo {\n\n    private static final int CORE_POOL_SIZE = 5;\n    private static final int MAX_POOL_SIZE = 10;\n    private static final int QUEUE_CAPACITY = 100;\n    private static final Long KEEP_ALIVE_TIME = 1L;\n    public static void main(String[] args) {\n\n        //ä½¿ç”¨é˜¿é‡Œå·´å·´æ¨èçš„åˆ›å»ºçº¿ç¨‹æ± çš„æ–¹å¼\n        //é€šè¿‡ThreadPoolExecutoræ„é€ å‡½æ•°è‡ªå®šä¹‰å‚æ•°åˆ›å»º\n        ThreadPoolExecutor executor = new ThreadPoolExecutor(\n                CORE_POOL_SIZE,\n                MAX_POOL_SIZE,\n                KEEP_ALIVE_TIME,\n                TimeUnit.SECONDS,\n                new ArrayBlockingQueue<>(QUEUE_CAPACITY),\n                new ThreadPoolExecutor.CallerRunsPolicy());\n\n        for (int i = 0; i < 10; i++) {\n            //åˆ›å»ºWorkerThreadå¯¹è±¡ï¼ˆWorkerThreadç±»å®ç°äº†Runnable æ¥å£ï¼‰\n            Runnable worker = new MyRunnable(\"\" + i);\n            //æ‰§è¡ŒRunnable\n            executor.execute(worker);\n        }\n        //ç»ˆæ­¢çº¿ç¨‹æ± \n        executor.shutdown();\n        while (!executor.isTerminated()) {\n        }\n        System.out.println(\"Finished all threads\");\n    }\n}\n```\n\nå¯ä»¥çœ‹åˆ°æˆ‘ä»¬ä¸Šé¢çš„ä»£ç æŒ‡å®šäº†ï¼š\n\n1. `corePoolSize`: æ ¸å¿ƒçº¿ç¨‹æ•°ä¸º 5ã€‚\n2. `maximumPoolSize` ï¼šæœ€å¤§çº¿ç¨‹æ•° 10\n3. `keepAliveTime` : ç­‰å¾…æ—¶é—´ä¸º 1Lã€‚\n4. `unit`: ç­‰å¾…æ—¶é—´çš„å•ä½ä¸º TimeUnit.SECONDSã€‚\n5. `workQueue`ï¼šä»»åŠ¡é˜Ÿåˆ—ä¸º `ArrayBlockingQueue`ï¼Œå¹¶ä¸”å®¹é‡ä¸º 100;\n6. `handler`:é¥±å’Œç­–ç•¥ä¸º `CallerRunsPolicy`ã€‚\n\n**Outputï¼š**\n\n```java\npool-1-thread-2 Start. Time = Tue Nov 12 20:59:44 CST 2019\npool-1-thread-5 Start. Time = Tue Nov 12 20:59:44 CST 2019\npool-1-thread-4 Start. Time = Tue Nov 12 20:59:44 CST 2019\npool-1-thread-1 Start. Time = Tue Nov 12 20:59:44 CST 2019\npool-1-thread-3 Start. Time = Tue Nov 12 20:59:44 CST 2019\npool-1-thread-5 End. Time = Tue Nov 12 20:59:49 CST 2019\npool-1-thread-3 End. Time = Tue Nov 12 20:59:49 CST 2019\npool-1-thread-2 End. Time = Tue Nov 12 20:59:49 CST 2019\npool-1-thread-4 End. Time = Tue Nov 12 20:59:49 CST 2019\npool-1-thread-1 End. Time = Tue Nov 12 20:59:49 CST 2019\npool-1-thread-2 Start. Time = Tue Nov 12 20:59:49 CST 2019\npool-1-thread-1 Start. Time = Tue Nov 12 20:59:49 CST 2019\npool-1-thread-4 Start. Time = Tue Nov 12 20:59:49 CST 2019\npool-1-thread-3 Start. Time = Tue Nov 12 20:59:49 CST 2019\npool-1-thread-5 Start. Time = Tue Nov 12 20:59:49 CST 2019\npool-1-thread-2 End. Time = Tue Nov 12 20:59:54 CST 2019\npool-1-thread-3 End. Time = Tue Nov 12 20:59:54 CST 2019\npool-1-thread-4 End. Time = Tue Nov 12 20:59:54 CST 2019\npool-1-thread-5 End. Time = Tue Nov 12 20:59:54 CST 2019\npool-1-thread-1 End. Time = Tue Nov 12 20:59:54 CST 2019\n```\n\n## å¹¶å‘å·¥å…·\n\n### CountDownLatch ä¸ CyclicBarrier\n\nCountDownLatch ä¸ CyclicBarrier éƒ½æ˜¯ç”¨äºæ§åˆ¶å¹¶å‘çš„å·¥å…·ç±»ï¼Œéƒ½å¯ä»¥ç†è§£æˆç»´æŠ¤çš„å°±æ˜¯ä¸€ä¸ªè®¡æ•°å™¨ï¼Œä½†æ˜¯è¿™ä¸¤è€…è¿˜æ˜¯å„æœ‰ä¸åŒä¾§é‡ç‚¹çš„ï¼š\n\n- CountDownLatch å¼ºè°ƒä¸€ä¸ªçº¿ç¨‹ç­‰å¤šä¸ªçº¿ç¨‹å®ŒæˆæŸä»¶äº‹æƒ…ã€‚CyclicBarrier æ˜¯å¤šä¸ªçº¿ç¨‹äº’ç­‰ï¼Œç­‰å¤§å®¶éƒ½å®Œæˆï¼Œå†æºæ‰‹å…±è¿›ï¼›\n- è°ƒç”¨ CountDownLatch çš„ countDown æ–¹æ³•åï¼Œå½“å‰çº¿ç¨‹å¹¶ä¸ä¼šé˜»å¡ï¼Œä¼šç»§ç»­å¾€ä¸‹æ‰§è¡Œï¼›è€Œè°ƒç”¨CyclicBarrier çš„ await æ–¹æ³•ï¼Œä¼šé˜»å¡å½“å‰çº¿ç¨‹ï¼Œç›´åˆ° CyclicBarrier æŒ‡å®šçš„çº¿ç¨‹å…¨éƒ¨éƒ½åˆ°è¾¾äº†æŒ‡å®šç‚¹çš„æ—¶å€™ï¼Œæ‰èƒ½ç»§ç»­å¾€ä¸‹æ‰§è¡Œï¼›\n- CountDownLatch æ˜¯ä¸èƒ½å¤ç”¨çš„ï¼Œè€Œ CyclicBarrier æ˜¯å¯ä»¥å¤ç”¨çš„ã€‚\n\n### Semaphore\n\n**Semaphore(ä¿¡å·é‡)-å…è®¸å¤šä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®ï¼š** synchronized å’Œ ReentrantLock éƒ½æ˜¯ä¸€æ¬¡åªå…è®¸ä¸€ä¸ªçº¿ç¨‹è®¿é—®æŸä¸ªèµ„æºï¼ŒSemaphore(ä¿¡å·é‡)å¯ä»¥æŒ‡å®šå¤šä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®æŸä¸ªèµ„æºã€‚\n\nSemaphore å°±æ˜¯ä¸€ä¸ªä¿¡å·é‡ï¼Œå®ƒçš„ä½œç”¨æ˜¯é™åˆ¶æŸæ®µä»£ç å—çš„å¹¶å‘æ•°ã€‚Semaphoreæœ‰ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œå¯ä»¥ä¼ å…¥ä¸€ä¸ª int å‹æ•´æ•° nï¼Œè¡¨ç¤ºæŸæ®µä»£ç æœ€å¤šåªæœ‰ n ä¸ªçº¿ç¨‹å¯ä»¥è®¿é—®ï¼Œå¦‚æœè¶…å‡ºäº† nï¼Œé‚£ä¹ˆè¯·ç­‰å¾…ï¼Œç­‰åˆ°æŸä¸ªçº¿ç¨‹æ‰§è¡Œå®Œæ¯•è¿™æ®µä»£ç å—ï¼Œä¸‹ä¸€ä¸ªçº¿ç¨‹å†è¿›å…¥ã€‚ç”±æ­¤å¯ä»¥çœ‹å‡ºå¦‚æœ Semaphore æ„é€ å‡½æ•°ä¸­ä¼ å…¥çš„ int å‹æ•´æ•° n=1ï¼Œç›¸å½“äºå˜æˆäº†ä¸€ä¸ª synchronized äº†ã€‚\n\n## æ¨¡æ‹Ÿ\n\n### æ­»é”\n\n```java\npublic class DeadLock {\n    private static Object A = new Object();\n    private static Object B = new Object();\n\n    public static void main(String[] args) {\n        new Thread(() -> {\n            synchronized (A) {\n                System.out.println(Thread.currentThread().getName() + \" å·²è·å¾—èµ„æºA\");\n                try {\n                    Thread.sleep(1000);\n                } catch (InterruptedException e) {\n                    e.printStackTrace();\n                }\n                System.out.println(Thread.currentThread().getName() + \" ç­‰å¾…è·å¾—èµ„æºB\");\n                synchronized (B) {\n                    System.out.println(Thread.currentThread().getName() + \" å·²è·å¾—èµ„æºB\");\n                }\n            }\n        }, \"çº¿ç¨‹1\").start();\n\n        new Thread(() -> {\n            synchronized (B) {\n                System.out.println(Thread.currentThread().getName() + \" å·²è·å¾—èµ„æºB\");\n                try {\n                    Thread.sleep(1000);\n                } catch (InterruptedException e) {\n                    e.printStackTrace();\n                }\n                System.out.println(Thread.currentThread().getName() + \" ç­‰å¾…è·å¾—èµ„æºA\");\n                synchronized (A) {\n                    System.out.println(Thread.currentThread().getName() + \" å·²è·å¾—èµ„æºA\");\n                }\n            }\n        }, \"çº¿ç¨‹2\").start();\n    }\n}\n```\n\n> çº¿ç¨‹1 å·²è·å¾—èµ„æºA\n> çº¿ç¨‹2 å·²è·å¾—èµ„æºB\n> çº¿ç¨‹1 ç­‰å¾…è·å¾—èµ„æºB\n> çº¿ç¨‹2 ç­‰å¾…è·å¾—èµ„æºA\n\n### runæ–¹æ³•å’Œstartæ–¹æ³•\n\n```java\npublic class DiffStartRun {\n    public static void main(String[] args) {\n        new Thread(() -> {\n            System.out.println(Thread.currentThread().getName());\n        }, \"çº¿ç¨‹A\").run();\n\n        new Thread(() -> {\n            System.out.println(Thread.currentThread().getName());\n        }, \"çº¿ç¨‹B\").start();\n    }\n}\n```\n\n> main\n> çº¿ç¨‹B\n>\n> new ä¸€ä¸ª Threadï¼Œçº¿ç¨‹è¿›å…¥äº†æ–°å»ºçŠ¶æ€ã€‚è°ƒç”¨ `start()`æ–¹æ³•ï¼Œä¼šå¯åŠ¨ä¸€ä¸ªçº¿ç¨‹å¹¶ä½¿çº¿ç¨‹è¿›å…¥äº†å°±ç»ªçŠ¶æ€ï¼Œå½“åˆ†é…åˆ°æ—¶é—´ç‰‡åå°±å¯ä»¥å¼€å§‹è¿è¡Œäº†ã€‚ `start()` ä¼šæ‰§è¡Œçº¿ç¨‹çš„ç›¸åº”å‡†å¤‡å·¥ä½œï¼Œç„¶åè‡ªåŠ¨æ‰§è¡Œ `run()` æ–¹æ³•çš„å†…å®¹ï¼Œè¿™æ˜¯çœŸæ­£çš„å¤šçº¿ç¨‹å·¥ä½œã€‚ ä½†æ˜¯ï¼Œç›´æ¥æ‰§è¡Œ `run()` æ–¹æ³•ï¼Œä¼šæŠŠ `run()` æ–¹æ³•å½“æˆä¸€ä¸ª main çº¿ç¨‹ä¸‹çš„æ™®é€šæ–¹æ³•å»æ‰§è¡Œï¼Œå¹¶ä¸ä¼šåœ¨æŸä¸ªçº¿ç¨‹ä¸­æ‰§è¡Œå®ƒï¼Œç¬¬ä¸€ä¸ªæ‰€è°“çš„çº¿ç¨‹Aåªæ˜¯ main çº¿ç¨‹çš„ä¸€ä¸ªæ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯è¯´å…¶æ‰€åœ¨çº¿ç¨‹è¿˜æ˜¯ main çº¿ç¨‹ï¼Œæ‰€ä»¥è¿™å¹¶ä¸æ˜¯å¤šçº¿ç¨‹å·¥ä½œã€‚\n>\n> **æ€»ç»“ï¼š è°ƒç”¨ start() æ–¹æ³•æ–¹å¯å¯åŠ¨çº¿ç¨‹å¹¶ä½¿çº¿ç¨‹è¿›å…¥å°±ç»ªçŠ¶æ€ï¼Œç›´æ¥æ‰§è¡Œ run() æ–¹æ³•çš„è¯ä¸ä¼šä»¥å¤šçº¿ç¨‹çš„æ–¹å¼æ‰§è¡Œã€‚**\n\n### ä¸¤ä¸ªçº¿ç¨‹ï¼Œäº¤æ›¿åŠ å‡\n\n1. synchronized\n\n\t```java\n\t/**\n\t * @author fangyaxing\n\t * @date 2022/9/12\n\t */\n\tpublic class TwoThreadWithSync {\n\t    private static int value = 0;\n\t\n\t    private static final Object lock = new Object();\n\t\n\t    public static void main(String[] args) {\n\t        new Thread(() -> {\n\t            for (int i = 0; i < 5; i++) {\n\t                synchronized (lock) {\n\t                    while (value != 0) {\n\t                        try {\n\t                            lock.wait();\n\t                        } catch (InterruptedException e) {\n\t                            e.printStackTrace();\n\t                        }\n\t                    }\n\t                    value++;\n\t                    System.out.println(Thread.currentThread().getName() + \" ---- \" + value);\n\t                    lock.notifyAll();\n\t                }\n\t            }\n\t        }, \"Thread-A\").start();\n\t\n\t        new Thread(() -> {\n\t            for (int i = 0; i < 5; i++) {\n\t                synchronized (lock) {\n\t                    while (value != 1) {\n\t                        try {\n\t                            lock.wait();\n\t                        } catch (InterruptedException e) {\n\t                            e.printStackTrace();\n\t                        }\n\t                    }\n\t                    value--;\n\t                    System.out.println(Thread.currentThread().getName() + \" ---- \" + value);\n\t                    lock.notifyAll();\n\t                }\n\t            }\n\t        }, \"Thread-B\").start();\n\t    }\n\t\n\t}\n\t```\n\n2. lock + condition\n\n\t```java\n\t/**\n\t * @author fangyaxing\n\t * @date 2022/9/12\n\t */\n\tpublic class TwoThreadWithLock {\n\t    private static int value = 0;\n\t\n\t    private static final Lock lock = new ReentrantLock();\n\t\n\t    static Condition a = lock.newCondition();\n\t\n\t    static Condition b = lock.newCondition();\n\t\n\t    public static void main(String[] args) {\n\t        new Thread(() -> {\n\t            for (int i = 0; i < 5; i++) {\n\t                try {\n\t                    lock.lock();\n\t                    while (value != 0) {\n\t                        a.await();\n\t                    }\n\t                    value++;\n\t                    System.out.println(Thread.currentThread().getName() + \" ---- \" + value);\n\t                    b.signal();\n\t                } catch (InterruptedException e) {\n\t                    e.printStackTrace();\n\t                } finally {\n\t                    lock.unlock();\n\t                }\n\t            }\n\t        }, \"Thread-A\").start();\n\t\n\t        new Thread(() -> {\n\t            for (int i = 0; i < 5; i++) {\n\t                try {\n\t                    lock.lock();\n\t                    while (value != 1) {\n\t                        b.await();\n\t                    }\n\t                    value--;\n\t                    System.out.println(Thread.currentThread().getName() + \" ---- \" + value);\n\t                    a.signal();\n\t                } catch (InterruptedException e) {\n\t                    e.printStackTrace();\n\t                } finally {\n\t                    lock.unlock();\n\t                }\n\t            }\n\t        }, \"Thread-B\").start();\n\t    }\n\t}\n\t```\n\n### ä¸‰ä¸ªçº¿ç¨‹ï¼Œå¾ªç¯æ‰“å°\n\n```java\npublic class Demo5 {\n    private int value = 0;\n    private Lock lock = new ReentrantLock();\n    private Condition a = lock.newCondition();\n    private Condition b = lock.newCondition();\n    private Condition c = lock.newCondition();\n\n    public void outputA(int round) {\n        try {\n            lock.lock();\n            while (value != 0) {\n                a.await();\n            }\n            value = 1;\n            System.out.println(\"ç¬¬\" + round + \"è½®ï¼Œ\" + Thread.currentThread().getName() + \"è¾“å‡ºA\");\n            b.signal();\n        } catch (Exception e) {\n            e.printStackTrace();\n        } finally {\n            lock.unlock();\n        }\n    }\n\n    public void outputB(int round) {\n        try {\n            lock.lock();\n            while (value != 1) {\n                b.await();\n            }\n            value = 2;\n            System.out.println(\"ç¬¬\" + round + \"è½®ï¼Œ\" + Thread.currentThread().getName() + \"è¾“å‡ºB\");\n            c.signal();\n        } catch (Exception e) {\n            e.printStackTrace();\n        } finally {\n            lock.unlock();\n        }\n    }\n\n    public void outputC(int round) {\n        try {\n            lock.lock();\n            while (value != 2) {\n                c.await();\n            }\n            value = 0;\n            System.out.println(\"ç¬¬\" + round + \"è½®ï¼Œ\" + Thread.currentThread().getName() + \"è¾“å‡ºC\");\n            a.signal();\n        } catch (Exception e) {\n            e.printStackTrace();\n        } finally {\n            lock.unlock();\n        }\n    }\n\n    public static void main(String[] args) {\n        Demo5 s = new Demo5();\n\n        new Thread(() -> {\n            for (int i = 0; i < 3; i++) {\n                s.outputA(i);\n            }\n        }, \"Thread-A\").start();\n\n        new Thread(() -> {\n            for (int i = 0; i < 3; i++) {\n                s.outputB(i);\n            }\n        }, \"Thread-B\").start();\n\n        new Thread(() -> {\n            for (int i = 0; i < 3; i++) {\n                s.outputC(i);\n            }\n        }, \"Thread-C\").start();\n\n    }\n}\n```\n","source":"_posts/Javaå…«è‚¡æ–‡ - Javaå¹¶å‘.md","raw":"---\ntitle: Javaå…«è‚¡æ–‡ - Javaå¹¶å‘\ncopyright: true\nmathjax: false\ncategories:\n  - Javaå…«è‚¡æ–‡\ndate: 2023-01-23 15:29:48\ntags:\ntoc: true\nurlname: java-concurrent-programming\n---\n\n> æ•´ç†çš„Javaå¹¶å‘ç›¸å…³çŸ¥è¯†ç‚¹å’Œé¢è¯•é¢˜ï¼Œéƒ¨åˆ†å†…å®¹æ‘˜è‡ªç½‘ç»œï¼Œå¦‚æœ‰ä¾µæƒè¯·è”ç³»æˆ‘ï½\t<!--more-->\n\n## åŸºç¡€çŸ¥è¯†\n\n### å¹¶å‘ç¼–ç¨‹çš„ä¼˜ç¼ºç‚¹\n\nä¼˜ç‚¹ï¼šä¸ºäº†èƒ½æé«˜ç¨‹åºçš„æ‰§è¡Œæ•ˆç‡ï¼Œæé«˜ç¨‹åºè¿è¡Œé€Ÿåº¦ï¼›\n\nç¼ºç‚¹ï¼šå­˜åœ¨å†…å­˜æ³„æ¼ã€ä¸Šä¸‹æ–‡åˆ‡æ¢ã€çº¿ç¨‹å®‰å…¨ã€æ­»é”ç­‰é—®é¢˜ã€‚\n\n#### å¹¶å‘ç¼–ç¨‹ä¸‰è¦ç´ æ˜¯ä»€ä¹ˆï¼Ÿåœ¨ Java ç¨‹åºä¸­æ€ä¹ˆä¿è¯å¤šçº¿ç¨‹çš„è¿è¡Œå®‰å…¨ï¼Ÿ\n\nå¹¶å‘ç¼–ç¨‹ä¸‰è¦ç´ ï¼ˆçº¿ç¨‹çš„å®‰å…¨æ€§é—®é¢˜ä½“ç°åœ¨ï¼‰ï¼š\n\n**åŸå­æ€§**ï¼šåŸå­ï¼Œå³ä¸€ä¸ªä¸å¯å†è¢«åˆ†å‰²çš„é¢—ç²’ã€‚åŸå­æ€§æŒ‡çš„æ˜¯ä¸€ä¸ªæˆ–å¤šä¸ªæ“ä½œè¦ä¹ˆå…¨éƒ¨æ‰§è¡ŒæˆåŠŸè¦ä¹ˆå…¨éƒ¨æ‰§è¡Œå¤±è´¥ã€‚ï¼ˆsynchronizedï¼ŒLockï¼‰ï¼ˆçº¿ç¨‹åˆ‡æ¢å¼•èµ·çš„åŸå­æ€§é—®é¢˜ï¼‰\n\n**å¯è§æ€§**ï¼šä¸€ä¸ªçº¿ç¨‹å¯¹å…±äº«å˜é‡çš„ä¿®æ”¹ï¼Œå¦ä¸€ä¸ªçº¿ç¨‹èƒ½å¤Ÿç«‹åˆ»çœ‹åˆ°ã€‚ï¼ˆsynchronizedï¼ŒLockï¼Œvolatileï¼‰ï¼ˆJMM å†…å­˜æ¨¡å‹å¯¼è‡´çš„å¯è§æ€§é—®é¢˜ï¼‰\n\n**æœ‰åºæ€§**ï¼šç¨‹åºæ‰§è¡Œçš„é¡ºåºæŒ‰ç…§ä»£ç çš„å…ˆåé¡ºåºæ‰§è¡Œã€‚ï¼ˆsynchronizedï¼ŒLockï¼Œvolatileï¼‰ï¼ˆæŒ‡ä»¤é‡æ’åºå¸¦æ¥çš„æœ‰åºæ€§é—®é¢˜ï¼‰\n\n> volatileä¸èƒ½ä¿è¯å¹¶å‘å®‰å…¨ï¼Œæ¯”å¦‚å¤šçº¿ç¨‹å¯¹ä¸€ä¸ªvolatileçš„intå˜é‡è¿›è¡ŒåŠ 1æ“ä½œï¼Œæœ€ç»ˆå¾—åˆ°çš„æ•°å­—å¯èƒ½æ¯”é¢„æœŸå°ï¼Œå°±æ˜¯å› ä¸º++æ“ä½œä¸æ˜¯åŸå­æ€§çš„ï¼Œè€Œvolatileä¹Ÿä¸èƒ½ä¿è¯åŸå­æ€§ï¼Œæ‰€ä»¥å°±ä¼šæœ‰è¿™ä¸ªé—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨`atomicInteger.getAndSet()`åŸå­æ“ä½œã€‚\n\n### çº¿ç¨‹å’Œè¿›ç¨‹\n\n#### è¿›ç¨‹é—´çš„é€šä¿¡æ–¹å¼\n\n1. **ç®¡é“/åŒ¿åç®¡é“(Pipes)** ï¼šç”¨äºå…·æœ‰äº²ç¼˜å…³ç³»çš„çˆ¶å­è¿›ç¨‹é—´æˆ–è€…å…„å¼Ÿè¿›ç¨‹ä¹‹é—´çš„é€šä¿¡ï¼›\n2. **æœ‰åç®¡é“(Names Pipes)**ï¼šåŒ¿åç®¡é“ç”±äºæ²¡æœ‰åå­—ï¼Œåªèƒ½ç”¨äºäº²ç¼˜å…³ç³»çš„è¿›ç¨‹é—´é€šä¿¡ã€‚ä¸ºäº†å…‹æœè¿™ä¸ªç¼ºç‚¹ï¼Œæå‡ºäº†æœ‰åç®¡é“ã€‚æœ‰åç®¡é“ä¸¥æ ¼éµå¾ª**å…ˆè¿›å…ˆå‡º(first in first out)**ã€‚æœ‰åç®¡é“ä»¥ç£ç›˜æ–‡ä»¶çš„æ–¹å¼å­˜åœ¨ï¼Œå¯ä»¥å®ç°æœ¬æœºä»»æ„ä¸¤ä¸ªè¿›ç¨‹é€šä¿¡ï¼›\n3. **ä¿¡å·(Signal)** ï¼šä¿¡å·æ˜¯ä¸€ç§æ¯”è¾ƒå¤æ‚çš„é€šä¿¡æ–¹å¼ï¼Œç”¨äºé€šçŸ¥æ¥æ”¶è¿›ç¨‹æŸä¸ªäº‹ä»¶å·²ç»å‘ç”Ÿï¼›\n4. **æ¶ˆæ¯é˜Ÿåˆ—(Message Queuing)** ï¼šæ¶ˆæ¯é˜Ÿåˆ—æ˜¯æ¶ˆæ¯çš„é“¾è¡¨ï¼Œå…·æœ‰ç‰¹å®šçš„æ ¼å¼ï¼Œå­˜æ”¾åœ¨å†…å­˜ä¸­å¹¶ç”±æ¶ˆæ¯é˜Ÿåˆ—æ ‡è¯†ç¬¦æ ‡è¯†ã€‚**æ¶ˆæ¯é˜Ÿåˆ—å…‹æœäº†ä¿¡å·æ‰¿è½½ä¿¡æ¯é‡å°‘ï¼Œç®¡é“åªèƒ½æ‰¿è½½æ— æ ¼å¼å­—èŠ‚æµä»¥åŠç¼“å†²åŒºå¤§å°å—é™ç­‰ç¼ºç‚¹**ï¼›\n5. **ä¿¡å·é‡(Semaphores)** ï¼šä¿¡å·é‡æ˜¯ä¸€ä¸ªè®¡æ•°å™¨ï¼Œç”¨äºå¤šè¿›ç¨‹å¯¹å…±äº«æ•°æ®çš„è®¿é—®ï¼Œä¿¡å·é‡çš„æ„å›¾åœ¨äºè¿›ç¨‹é—´åŒæ­¥ã€‚è¿™ç§é€šä¿¡æ–¹å¼ä¸»è¦ç”¨äºè§£å†³ä¸åŒæ­¥ç›¸å…³çš„é—®é¢˜å¹¶é¿å…ç«äº‰æ¡ä»¶ã€‚  \n6. **å…±äº«å†…å­˜(Shared memory)** ï¼šä½¿å¾—å¤šä¸ªè¿›ç¨‹å¯ä»¥è®¿é—®åŒä¸€å—å†…å­˜ç©ºé—´ï¼Œä¸åŒè¿›ç¨‹å¯ä»¥åŠæ—¶çœ‹åˆ°å¯¹æ–¹è¿›ç¨‹ä¸­å¯¹å…±äº«å†…å­˜ä¸­æ•°æ®çš„æ›´æ–°ã€‚è¿™ç§æ–¹å¼éœ€è¦ä¾é æŸç§åŒæ­¥æ“ä½œï¼Œå¦‚äº’æ–¥é”å’Œä¿¡å·é‡ç­‰ã€‚å¯ä»¥è¯´è¿™æ˜¯æœ€æœ‰ç”¨çš„è¿›ç¨‹é—´é€šä¿¡æ–¹å¼ã€‚\n7. **å¥—æ¥å­—(Sockets)**ï¼šæ­¤æ–¹æ³•ä¸»è¦ç”¨äºåœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´é€šè¿‡ç½‘ç»œè¿›è¡Œé€šä¿¡ã€‚å¥—æ¥å­—æ˜¯æ”¯æŒ TCP/IP çš„ç½‘ç»œé€šä¿¡çš„åŸºæœ¬æ“ä½œå•å…ƒï¼Œå¯ä»¥çœ‹åšæ˜¯ä¸åŒä¸»æœºä¹‹é—´çš„è¿›ç¨‹è¿›è¡ŒåŒå‘é€šä¿¡çš„ç«¯ç‚¹ï¼Œç®€å•çš„è¯´å°±æ˜¯é€šä¿¡çš„ä¸¤æ–¹çš„ä¸€ç§çº¦å®šï¼Œç”¨å¥—æ¥å­—ä¸­çš„ç›¸å…³å‡½æ•°æ¥å®Œæˆé€šä¿¡è¿‡ç¨‹ã€‚\n\n#### çº¿ç¨‹é—´çš„åŒæ­¥æ–¹å¼\n\nçº¿ç¨‹åŒæ­¥æ˜¯ä¸¤ä¸ªæˆ–å¤šä¸ªå…±äº«å…³é”®èµ„æºçš„çº¿ç¨‹çš„å¹¶å‘æ‰§è¡Œã€‚åº”è¯¥åŒæ­¥çº¿ç¨‹ä»¥é¿å…å…³é”®çš„èµ„æºä½¿ç”¨å†²çªã€‚\n\n1. **äº’æ–¥é‡(Mutex)**ï¼šé‡‡ç”¨äº’æ–¥å¯¹è±¡æœºåˆ¶ï¼Œåªæœ‰æ‹¥æœ‰äº’æ–¥å¯¹è±¡çš„çº¿ç¨‹æ‰æœ‰è®¿é—®å…¬å…±èµ„æºçš„æƒé™ã€‚å› ä¸ºäº’æ–¥å¯¹è±¡åªæœ‰ä¸€ä¸ªï¼Œæ‰€ä»¥å¯ä»¥ä¿è¯å…¬å…±èµ„æºä¸ä¼šè¢«å¤šä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®ï¼Œæ¯”å¦‚ Java ä¸­çš„ synchronized å…³é”®è¯å’Œå„ç§ Lock éƒ½æ˜¯è¿™ç§æœºåˆ¶ï¼›\n2. **ä¿¡å·é‡(Semphares)** ï¼šå®ƒå…è®¸åŒä¸€æ—¶åˆ»å¤šä¸ªçº¿ç¨‹è®¿é—®åŒä¸€èµ„æºï¼Œä½†æ˜¯éœ€è¦æ§åˆ¶åŒä¸€æ—¶åˆ»è®¿é—®æ­¤èµ„æºçš„æœ€å¤§çº¿ç¨‹æ•°é‡ï¼›\n3. **äº‹ä»¶(Event)** ï¼šwait/notifyï¼šé€šè¿‡é€šçŸ¥æ“ä½œçš„æ–¹å¼æ¥ä¿æŒå¤šçº¿ç¨‹åŒæ­¥ï¼Œè¿˜å¯ä»¥æ–¹ä¾¿çš„å®ç°å¤šçº¿ç¨‹ä¼˜å…ˆçº§çš„æ¯”è¾ƒæ“ä½œã€‚\n\n#### ä»€ä¹ˆæ˜¯çº¿ç¨‹å’Œè¿›ç¨‹?\n\n**è¿›ç¨‹**ï¼šè¿›ç¨‹æ˜¯åº”ç”¨ç¨‹åºçš„ä¸€æ¬¡è¿è¡Œï¼Œæ¯ä¸ªè¿›ç¨‹éƒ½æœ‰è‡ªå·±ç‹¬ç«‹çš„å†…å­˜ç©ºé—´ï¼›æ˜¯æ“ä½œç³»ç»Ÿèµ„æºåˆ†é…çš„åŸºæœ¬å•ä½ï¼›\n\n**çº¿ç¨‹**ï¼šçº¿ç¨‹æ˜¯å¤„ç†å™¨è°ƒåº¦å’Œæ‰§è¡Œçš„åŸºæœ¬å•ä½ï¼Œä¸€ä¸ªè¿›ç¨‹ä¸­å¯ä»¥æœ‰å¤šä¸ªçº¿ç¨‹ï¼Œçº¿ç¨‹å…±äº«è¿›ç¨‹çš„å†…å­˜ç©ºé—´å’Œèµ„æºã€‚\n\n#### ä»€ä¹ˆæ˜¯ä¸Šä¸‹æ–‡åˆ‡æ¢?\n\nå¤šçº¿ç¨‹ç¼–ç¨‹ä¸­ä¸€èˆ¬çº¿ç¨‹çš„ä¸ªæ•°éƒ½å¤§äº CPU æ ¸å¿ƒçš„ä¸ªæ•°ï¼Œè€Œä¸€ä¸ª CPU æ ¸å¿ƒåœ¨ä»»æ„æ—¶åˆ»åªèƒ½è¢«ä¸€ä¸ªçº¿ç¨‹ä½¿ç”¨ï¼Œä¸ºäº†è®©è¿™äº›çº¿ç¨‹éƒ½èƒ½å¾—åˆ°æœ‰æ•ˆæ‰§è¡Œï¼ŒCPU é‡‡å–çš„ç­–ç•¥æ˜¯ä¸ºæ¯ä¸ªçº¿ç¨‹åˆ†é…æ—¶é—´ç‰‡å¹¶è½®è½¬çš„å½¢å¼ã€‚\n\nå½“å‰ä»»åŠ¡åœ¨æ‰§è¡Œå®Œ CPU æ—¶é—´ç‰‡åˆ‡æ¢åˆ°å¦ä¸€ä¸ªä»»åŠ¡ä¹‹å‰ä¼šå…ˆä¿å­˜è‡ªå·±çš„çŠ¶æ€ï¼Œä»¥ä¾¿ä¸‹æ¬¡å†åˆ‡æ¢å›è¿™ä¸ªä»»åŠ¡æ—¶ï¼Œå¯ä»¥å†åŠ è½½è¿™ä¸ªä»»åŠ¡çš„çŠ¶æ€ã€‚**ä»»åŠ¡ä»ä¿å­˜åˆ°å†åŠ è½½çš„è¿‡ç¨‹å°±æ˜¯ä¸€æ¬¡ä¸Šä¸‹æ–‡åˆ‡æ¢**ã€‚\n\nä¸Šä¸‹æ–‡åˆ‡æ¢å¯¹ç³»ç»Ÿæ¥è¯´æ„å‘³ç€æ¶ˆè€—å¤§é‡çš„ CPU æ—¶é—´ï¼Œäº‹å®ä¸Šï¼Œå¯èƒ½æ˜¯æ“ä½œç³»ç»Ÿä¸­æ—¶é—´æ¶ˆè€—æœ€å¤§çš„æ“ä½œã€‚\n\n#### å®ˆæŠ¤çº¿ç¨‹å’Œç”¨æˆ·çº¿ç¨‹æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿ\n\n- **ç”¨æˆ· (User) çº¿ç¨‹**ï¼šè¿è¡Œåœ¨å‰å°ï¼Œæ‰§è¡Œå…·ä½“çš„ä»»åŠ¡\n- **å®ˆæŠ¤ (Daemon) çº¿ç¨‹**ï¼šè¿è¡Œåœ¨åå°ï¼Œä¸ºå…¶ä»–å‰å°çº¿ç¨‹æœåŠ¡ã€‚ä¸€æ—¦æ‰€æœ‰ç”¨æˆ·çº¿ç¨‹éƒ½ç»“æŸè¿è¡Œï¼Œå®ˆæŠ¤çº¿ç¨‹ä¼šéš JVM ä¸€èµ·ç»“æŸå·¥ä½œ\n\n**æ³¨æ„äº‹é¡¹ï¼š**\n\n1. `setDaemon(true)`å¿…é¡»åœ¨`start()`æ–¹æ³•å‰æ‰§è¡Œï¼Œå¦åˆ™ä¼šæŠ›å‡º `IllegalThreadStateException` å¼‚å¸¸\n2. åœ¨å®ˆæŠ¤çº¿ç¨‹ä¸­äº§ç”Ÿçš„æ–°çº¿ç¨‹ä¹Ÿæ˜¯å®ˆæŠ¤çº¿ç¨‹\n3. ä¸æ˜¯æ‰€æœ‰çš„ä»»åŠ¡éƒ½å¯ä»¥åˆ†é…ç»™å®ˆæŠ¤çº¿ç¨‹æ¥æ‰§è¡Œï¼Œæ¯”å¦‚è¯»å†™æ“ä½œæˆ–è€…è®¡ç®—é€»è¾‘\n4. å®ˆæŠ¤ (Daemon) çº¿ç¨‹ä¸­ä¸èƒ½ä¾é  finally å—çš„å†…å®¹æ¥ç¡®ä¿æ‰§è¡Œå…³é—­æˆ–æ¸…ç†èµ„æºçš„é€»è¾‘ã€‚å› ä¸ºæˆ‘ä»¬ä¸Šé¢ä¹Ÿè¯´è¿‡äº†ä¸€æ—¦æ‰€æœ‰ç”¨æˆ·çº¿ç¨‹éƒ½ç»“æŸè¿è¡Œï¼Œå®ˆæŠ¤çº¿ç¨‹ä¼šéš JVM ä¸€èµ·ç»“æŸå·¥ä½œï¼Œæ‰€ä»¥å®ˆæŠ¤ (Daemon) çº¿ç¨‹ä¸­çš„ finally è¯­å¥å—å¯èƒ½æ— æ³•è¢«æ‰§è¡Œã€‚\n\n#### å¦‚ä½•åœ¨ Windows å’Œ Linux ä¸ŠæŸ¥æ‰¾å“ªä¸ªçº¿ç¨‹cpuåˆ©ç”¨ç‡æœ€é«˜ï¼Ÿ\n\nWindowsä¸Šé¢ç”¨ä»»åŠ¡ç®¡ç†å™¨çœ‹ï¼ŒLinuxä¸‹å¯ä»¥ç”¨ top è¿™ä¸ªå‘½ä»¤çœ‹ã€‚\n\n#### ä»€ä¹ˆæ˜¯çº¿ç¨‹æ­»é”\n\næ­»é”æ˜¯æŒ‡ä¸¤ä¸ªæˆ–ä¸¤ä¸ªä»¥ä¸Šçš„è¿›ç¨‹ï¼ˆçº¿ç¨‹ï¼‰åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œç”±äºç«äº‰èµ„æºé€ æˆçš„ä¸€ç§é˜»å¡çš„ç°è±¡ï¼Œè‹¥æ— å¤–åŠ›ä½œç”¨ï¼Œå®ƒä»¬éƒ½å°†æ— æ³•æ¨è¿›ä¸‹å»ã€‚\n\nå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œçº¿ç¨‹ A æŒæœ‰èµ„æº 2ï¼Œçº¿ç¨‹ B æŒæœ‰èµ„æº 1ï¼Œä»–ä»¬åŒæ—¶éƒ½æƒ³ç”³è¯·å¯¹æ–¹çš„èµ„æºï¼Œæ‰€ä»¥è¿™ä¸¤ä¸ªçº¿ç¨‹å°±ä¼šäº’ç›¸ç­‰å¾…è€Œè¿›å…¥æ­»é”çŠ¶æ€ã€‚\n\n![çº¿ç¨‹æ­»é”](https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/202206152131355.png)\n\nä¸‹é¢é€šè¿‡ä¸€ä¸ªä¾‹å­æ¥è¯´æ˜çº¿ç¨‹æ­»é”ï¼Œä»£ç æ¨¡æ‹Ÿäº†ä¸Šå›¾çš„æ­»é”çš„æƒ…å†µ (ä»£ç æ¥æºäºã€Šå¹¶å‘ç¼–ç¨‹ä¹‹ç¾ã€‹)ï¼š\n\n```java\npublic class DeadLockDemo {\n    private static Object resource1 = new Object();\t//èµ„æº 1\n    private static Object resource2 = new Object();\t//èµ„æº 2\n\n    public static void main(String[] args) {\n        new Thread(() -> {\n            synchronized (resource1) {\n                System.out.println(Thread.currentThread() + \"get resource1\");\n                try {\n                    Thread.sleep(1000);\n                } catch (InterruptedException e) {\n                    e.printStackTrace();\n                }\n                System.out.println(Thread.currentThread() + \"waiting get resource2\");\n                synchronized (resource2) {\n                    System.out.println(Thread.currentThread() + \"get resource2\");\n                }\n            }\n        }, \"çº¿ç¨‹ 1\").start();\n\n        new Thread(() -> {\n            synchronized (resource2) {\n                System.out.println(Thread.currentThread() + \"get resource2\");\n                try {\n                    Thread.sleep(1000);\n                } catch (InterruptedException e) {\n                    e.printStackTrace();\n                }\n                System.out.println(Thread.currentThread() + \"waiting get resource1\");\n                synchronized (resource1) {\n                    System.out.println(Thread.currentThread() + \"get resource1\");\n                }\n            }\n        }, \"çº¿ç¨‹ 2\").start();\n    }\n}\n```\n\nè¾“å‡ºç»“æœ\n\n```java\nThread[çº¿ç¨‹ 1,5,main]get resource1\nThread[çº¿ç¨‹ 2,5,main]get resource2\nThread[çº¿ç¨‹ 1,5,main]waiting get resource2\nThread[çº¿ç¨‹ 2,5,main]waiting get resource1\n```\n\nçº¿ç¨‹ A é€šè¿‡ synchronized (resource1) è·å¾— resource1 çš„ç›‘è§†å™¨é”ï¼Œç„¶åé€šè¿‡`Thread.sleep(1000)`ï¼›è®©çº¿ç¨‹ A ä¼‘çœ  1s ä¸ºçš„æ˜¯è®©çº¿ç¨‹ B å¾—åˆ°CPUæ‰§è¡Œæƒï¼Œç„¶åè·å–åˆ° resource2 çš„ç›‘è§†å™¨é”ã€‚çº¿ç¨‹ A å’Œçº¿ç¨‹ B ä¼‘çœ ç»“æŸäº†éƒ½å¼€å§‹ä¼å›¾è¯·æ±‚è·å–å¯¹æ–¹çš„èµ„æºï¼Œç„¶åè¿™ä¸¤ä¸ªçº¿ç¨‹å°±ä¼šé™·å…¥äº’ç›¸ç­‰å¾…çš„çŠ¶æ€ï¼Œè¿™ä¹Ÿå°±äº§ç”Ÿäº†æ­»é”ã€‚ä¸Šé¢çš„ä¾‹å­ç¬¦åˆäº§ç”Ÿæ­»é”çš„å››ä¸ªå¿…è¦æ¡ä»¶ã€‚\n\n#### å½¢æˆæ­»é”çš„å››ä¸ªå¿…è¦æ¡ä»¶æ˜¯ä»€ä¹ˆ\n\n1. äº’æ–¥æ¡ä»¶ï¼šä¸€ä¸ªèµ„æºåªèƒ½è¢«ä¸€ä¸ªçº¿ç¨‹å ç”¨ï¼Œç›´åˆ°è¢«è¯¥çº¿ç¨‹é‡Šæ”¾ï¼›\n2. è¯·æ±‚ä¸ä¿æŒæ¡ä»¶ï¼šä¸€ä¸ªçº¿ç¨‹å› è¯·æ±‚è¢«å ç”¨èµ„æºè€Œå‘ç”Ÿé˜»å¡æ—¶ï¼Œå¯¹å·²è·å¾—çš„èµ„æºä¿æŒä¸æ”¾ï¼›\n3. ä¸å‰¥å¤ºæ¡ä»¶ï¼šçº¿ç¨‹ï¼›å·²è·å¾—çš„èµ„æºåœ¨æœ«ä½¿ç”¨å®Œä¹‹å‰ä¸èƒ½è¢«å…¶ä»–çº¿ç¨‹å¼ºè¡Œå‰¥å¤ºï¼Œåªæœ‰è‡ªå·±ä½¿ç”¨å®Œæ¯•åæ‰é‡Šæ”¾èµ„æºï¼›\n4. å¾ªç¯ç­‰å¾…æ¡ä»¶ï¼šå½“å‘ç”Ÿæ­»é”æ—¶ï¼Œæ‰€ç­‰å¾…çš„çº¿ç¨‹å¿…å®šä¼šå½¢æˆä¸€ä¸ªç¯è·¯ï¼ˆç±»ä¼¼äºæ­»å¾ªç¯ï¼‰ï¼Œé€ æˆæ°¸ä¹…é˜»å¡\n\n#### å¦‚ä½•é¿å…çº¿ç¨‹æ­»é”\n\næˆ‘ä»¬åªè¦ç ´åäº§ç”Ÿæ­»é”çš„å››ä¸ªæ¡ä»¶ä¸­çš„å…¶ä¸­ä¸€ä¸ªå°±å¯ä»¥äº†ã€‚\n\n**ç ´åäº’æ–¥æ¡ä»¶**ï¼šæ— æ³•ç ´åï¼Œå› ä¸ºæˆ‘ä»¬ç”¨é”æœ¬æ¥å°±æ˜¯æƒ³å®ç°äº’æ–¥è®¿é—®ä¸´ç•Œèµ„æºï¼›\n\n**ç ´åè¯·æ±‚ä¸ä¿æŒæ¡ä»¶**ï¼šä¸€æ¬¡æ€§ç”³è¯·æ‰€æœ‰çš„èµ„æºï¼›\n\n**ç ´åä¸å‰¥å¤ºæ¡ä»¶**ï¼šå ç”¨éƒ¨åˆ†èµ„æºçš„çº¿ç¨‹è¿›ä¸€æ­¥ç”³è¯·å…¶ä»–èµ„æºæ—¶ï¼Œ**å¦‚æœç”³è¯·ä¸åˆ°ï¼Œå¯ä»¥ä¸»åŠ¨é‡Šæ”¾å®ƒå æœ‰çš„èµ„æº**ï¼›\n\n**ç ´åå¾ªç¯ç­‰å¾…æ¡ä»¶**ï¼šé **æŒ‰åºç”³è¯·**èµ„æºæ¥é¢„é˜²ã€‚æŒ‰æŸä¸€é¡ºåºç”³è¯·èµ„æºï¼Œé‡Šæ”¾èµ„æºåˆ™ååºé‡Šæ”¾ã€‚ç ´åå¾ªç¯ç­‰å¾…æ¡ä»¶ã€‚\n\næˆ‘ä»¬å¯¹çº¿ç¨‹ 2 çš„ä»£ç ä¿®æ”¹æˆä¸‹é¢è¿™æ ·å°±ä¸ä¼šäº§ç”Ÿæ­»é”äº†ã€‚\n\n```java\nnew Thread(() -> {\n    synchronized (resource1) {\n        System.out.println(Thread.currentThread() + \"get resource1\");\n        try {\n            Thread.sleep(1000);\n        } catch (InterruptedException e) {\n            e.printStackTrace();\n        }\n        System.out.println(Thread.currentThread() + \"waiting get resource2\");\n        synchronized (resource2) {\n            System.out.println(Thread.currentThread() + \"get resource2\");\n        }\n    }\n}, \"çº¿ç¨‹ 2\").start();\n```\n\nè¾“å‡ºç»“æœ\n\n```java\nThread[çº¿ç¨‹ 1,5,main]get resource1\nThread[çº¿ç¨‹ 1,5,main]waiting get resource2\nThread[çº¿ç¨‹ 1,5,main]get resource2\nThread[çº¿ç¨‹ 2,5,main]get resource1\nThread[çº¿ç¨‹ 2,5,main]waiting get resource2\nThread[çº¿ç¨‹ 2,5,main]get resource2\n```\n\næˆ‘ä»¬åˆ†æä¸€ä¸‹ä¸Šé¢çš„ä»£ç ä¸ºä»€ä¹ˆé¿å…äº†æ­»é”çš„å‘ç”Ÿ?\n\nçº¿ç¨‹ 1 é¦–å…ˆè·å¾—åˆ° resource1 çš„ç›‘è§†å™¨é”ï¼Œè¿™æ—¶å€™çº¿ç¨‹ 2 å°±è·å–ä¸åˆ°äº†ã€‚ç„¶åçº¿ç¨‹ 1 å†å»è·å– resource2 çš„ç›‘è§†å™¨é”ï¼Œå¯ä»¥è·å–åˆ°ã€‚ç„¶åçº¿ç¨‹ 1 é‡Šæ”¾äº†å¯¹ resource1ã€resource2 çš„ç›‘è§†å™¨é”çš„å ç”¨ï¼Œçº¿ç¨‹ 2 è·å–åˆ°å°±å¯ä»¥æ‰§è¡Œäº†ã€‚è¿™æ ·å°±ç ´åäº†ç ´åå¾ªç¯ç­‰å¾…æ¡ä»¶ï¼Œå› æ­¤é¿å…äº†æ­»é”ã€‚\n\n#### åˆ›å»ºçº¿ç¨‹æœ‰å“ªå‡ ç§æ–¹å¼ï¼Ÿ\n\nåˆ›å»ºçº¿ç¨‹æœ‰å››ç§æ–¹å¼ï¼š\n\n- ç»§æ‰¿ Thread ç±»ï¼›\n- å®ç° Runnable æ¥å£ï¼›\n- å®ç° Callable æ¥å£ï¼›\n- ä½¿ç”¨ Executors å·¥å…·ç±»åˆ›å»ºçº¿ç¨‹æ± \n\n**ç»§æ‰¿ Thread ç±»**\n\n1. å®šä¹‰ä¸€ä¸ª Thread ç±»çš„å­ç±»ï¼Œé‡å†™ run æ–¹æ³•\n2. åˆ›å»ºè‡ªå®šä¹‰çš„çº¿ç¨‹å­ç±»å¯¹è±¡\n3. è°ƒç”¨å­ç±»å®ä¾‹çš„ start() æ–¹æ³•æ¥å¯åŠ¨çº¿ç¨‹\n\n```java\npublic class Main {\n    static class MyThread extends Thread {\n\n        @Override\n        public void run() {\n            System.out.println(Thread.currentThread().getName() + \" run()æ–¹æ³•æ­£åœ¨æ‰§è¡Œ...\");\n        }\n\n    }\n    public static void main(String[] args) {\n        new MyThread().start();\n        try {\n            Thread.sleep(10);\n        } catch (InterruptedException e) {\n            e.printStackTrace();\n        }\n        System.out.println(Thread.currentThread().getName() + \" main()æ–¹æ³•æ‰§è¡Œç»“æŸ\");\n    }\n}\n```\n\n**å®ç° Runnable æ¥å£**\n\n1. å®šä¹‰ Runnable æ¥å£å®ç°ç±» MyRunnableï¼Œå¹¶é‡å†™ run() æ–¹æ³•\n2. åˆ›å»º MyRunnable å®ä¾‹ myRunnableï¼Œä»¥ myRunnable ä½œä¸º target åˆ›å»º Thread å¯¹è±¡ï¼Œ**è¯¥Threadå¯¹è±¡æ‰æ˜¯çœŸæ­£çš„çº¿ç¨‹å¯¹è±¡**\n3. è°ƒç”¨çº¿ç¨‹å¯¹è±¡çš„ start() æ–¹æ³•\n\n```java\npublic class Main {\n    static class MyRunnable implements Runnable {\n\n        @Override\n        public void run() {\n            System.out.println(Thread.currentThread().getName() + \" run()æ–¹æ³•æ­£åœ¨æ‰§è¡Œ...\");\n        }\n\n    }\n    public static void main(String[] args) {\n        new Thread(new MyRunnable()).start();\n        try {\n            Thread.sleep(10);\n        } catch (InterruptedException e) {\n            e.printStackTrace();\n        }\n        System.out.println(Thread.currentThread().getName() + \" main()æ–¹æ³•æ‰§è¡Œç»“æŸ\");\n    }\n}\n```\n\n**å®ç° Callable æ¥å£**\n\n1. åˆ›å»ºå®ç° Callable æ¥å£çš„ç±» myCallable\n2. â­ä»¥ myCallable ä¸ºå‚æ•°åˆ›å»º FutureTask å¯¹è±¡\n3. å°† FutureTask ä½œä¸ºå‚æ•°åˆ›å»º Thread å¯¹è±¡\n4. è°ƒç”¨çº¿ç¨‹å¯¹è±¡çš„ start() æ–¹æ³•\n\n```java\npublic class Main {\n    static class MyCallable implements Callable<Integer> {\n\n        @Override\n        public Integer call() throws Exception {\n            System.out.println(Thread.currentThread().getName() + \" call()æ–¹æ³•æ‰§è¡Œä¸­...\");\n            return 1;\n        }\n    }\n\n    public static void main(String[] args) {\n        FutureTask<Integer> futureTask = new FutureTask<>(new MyCallable());\n        new Thread(futureTask).start();\n        try {\n            Thread.sleep(10);\n            System.out.println(futureTask.get());\n        } catch (InterruptedException | ExecutionException e) {\n            e.printStackTrace();\n        }\n        System.out.println(Thread.currentThread().getName() + \" main()æ–¹æ³•æ‰§è¡Œå®Œæˆ\");\n    }\n}\n```\n\n**ä½¿ç”¨ Executors å·¥å…·ç±»åˆ›å»ºçº¿ç¨‹æ± **\n\nExecutors æä¾›äº†ä¸€ç³»åˆ—å·¥å‚æ–¹æ³•ç”¨äºåˆ›å»ºçº¿ç¨‹æ± ï¼Œè¿”å›çš„çº¿ç¨‹æ± éƒ½å®ç°äº† ExecutorService æ¥å£ã€‚\n\nä¸»è¦æœ‰ new[Single/Fixed/Cached/Scheduled]ThreadPool è¿™å››ç§çº¿ç¨‹æ± \n\n```java\npublic class MyRunnable implements Runnable {\n    @Override\n    public void run() {\n        System.out.println(Thread.currentThread().getName() + \" run()æ–¹æ³•æ‰§è¡Œä¸­...\");\n    }\n}\n\npublic class SingleThreadExecutorTest {n\n    public static void main(String[] args) {\n        ExecutorService executorService = Executors.newSingleThreadExecutor();\n        MyRunnable myRunnable = new MyRunnable();\n        for (int i = 0; i < 5; i++) {\n            executorService.execute(myRunnable);\n        }\n\n        System.out.println(\"çº¿ç¨‹ä»»åŠ¡å¼€å§‹æ‰§è¡Œ\");\n        executorService.shutdown();\n    }\n}\n```\n\n#### è¯´ä¸€ä¸‹ runnable å’Œ callable æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\n\nç›¸åŒç‚¹\n\n- éƒ½æ˜¯æ¥å£\n- éƒ½å¯ä»¥ç”¨æ¥å®ç°å¤šçº¿ç¨‹\n- éƒ½é‡‡ç”¨ Thread.start() å¯åŠ¨çº¿ç¨‹\n\n**ä¸»è¦åŒºåˆ«**\n\n- Runnable æ¥å£ run æ–¹æ³•æ— è¿”å›å€¼ï¼›Callable æ¥å£ call æ–¹æ³•æœ‰è¿”å›å€¼ï¼Œå’Œ FutureTask é…åˆå¯ä»¥ç”¨æ¥è·å–å¼‚æ­¥æ‰§è¡Œçš„ç»“æœ\n- Runnable æ¥å£ run æ–¹æ³•æ— æ³•æ•è·å¹¶å¤„ç†å¼‚å¸¸ï¼›Callable æ¥å£ call æ–¹æ³•å¯ä»¥æ•è·å¹¶å¤„ç†å¼‚å¸¸\n\n#### çº¿ç¨‹çš„ run()å’Œ start()æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\n\n> start() æ–¹æ³•æ¥å¯åŠ¨ä¸€ä¸ªçº¿ç¨‹ï¼ŒçœŸæ­£å®ç°äº†å¤šçº¿ç¨‹è¿è¡Œã€‚è°ƒç”¨ start() æ–¹æ³•æ— éœ€ç­‰å¾…runæ–¹æ³•ä½“ä»£ç æ‰§è¡Œå®Œæ¯•ï¼Œå¯ä»¥ç›´æ¥ç»§ç»­æ‰§è¡Œå…¶ä»–çš„ä»£ç ï¼› æ­¤æ—¶çº¿ç¨‹æ˜¯å¤„äºå°±ç»ªçŠ¶æ€ï¼Œå¹¶æ²¡æœ‰è¿è¡Œã€‚ ç„¶åé€šè¿‡æ­¤ Thread ç±»è°ƒç”¨æ–¹æ³• run() æ¥å®Œæˆå…¶è¿è¡ŒçŠ¶æ€ï¼Œ run() æ–¹æ³•è¿è¡Œç»“æŸï¼Œ æ­¤çº¿ç¨‹ç»ˆæ­¢ã€‚ç„¶å CPU å†è°ƒåº¦å…¶å®ƒçº¿ç¨‹ã€‚\n\nstart() æ–¹æ³•ç”¨äºå¯åŠ¨çº¿ç¨‹ï¼Œrun() æ–¹æ³•ç”¨äºæ‰§è¡Œçº¿ç¨‹çš„è¿è¡Œæ—¶ä»£ç ï¼Œç›´æ¥è°ƒç”¨run()ï¼Œå…¶å®å°±ç›¸å½“äºæ˜¯è°ƒç”¨äº†ä¸€ä¸ªæ™®é€šå‡½æ•°è€Œå·²ã€‚\nstart() åªèƒ½è°ƒç”¨ä¸€æ¬¡ï¼Œrun() å¯ä»¥é‡å¤è°ƒç”¨ã€‚\n\n#### ä»€ä¹ˆæ˜¯ Callable å’Œ Future?\n\n```java\nFutureTask<Integer> futureTask = new FutureTask<>(new MyCallable());\nnew Thread(futureTask).start();\n```\n\nå°† callable å®ä¾‹ä¼ å…¥ futureï¼Œç„¶åå°† future å®ä¾‹ä¼ å…¥ Thread åˆ›å»ºçº¿ç¨‹ï¼Œ\nä¹‹åå¯ä»¥ç”¨ future æ¥è·å– callable  ä¸­ call() çš„è¿”å›ç»“æœã€‚\n\n#### çº¿ç¨‹çš„çŠ¶æ€å’ŒåŸºæœ¬æ“ä½œ\n\n<img src=\"https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/TyporaNotes1650518197279.png\" alt=\"çº¿ç¨‹çš„çŠ¶æ€\" style=\"zoom:67%;\" />\n\n#### Java ä¸­ç”¨åˆ°çš„çº¿ç¨‹è°ƒåº¦ç®—æ³•æ˜¯ä»€ä¹ˆï¼Ÿ\n\nçº¿ç¨‹è°ƒåº¦æ˜¯æŒ‡æŒ‰ç…§ç‰¹å®šæœºåˆ¶ä¸ºå¤šä¸ªçº¿ç¨‹åˆ†é… CPU çš„ä½¿ç”¨æƒã€‚\n\næœ‰ä¸¤ç§è°ƒåº¦æ¨¡å‹ï¼š**æ—¶é—´ç‰‡è½®è½¬**æ¨¡å‹å’Œ**ä¼˜å…ˆçº§è°ƒåº¦**æ¨¡å‹ã€‚\n\n**Javaè™šæ‹Ÿæœºé‡‡ç”¨ä¼˜å…ˆçº§è°ƒåº¦æ¨¡å‹**ï¼Œæ˜¯æŒ‡ä¼˜å…ˆè®©å¯è¿è¡Œæ± ä¸­ä¼˜å…ˆçº§é«˜çš„çº¿ç¨‹å ç”¨CPUï¼Œå¦‚æœå¯è¿è¡Œæ± ä¸­çš„çº¿ç¨‹ä¼˜å…ˆçº§ç›¸åŒï¼Œé‚£ä¹ˆå°±éšæœºé€‰æ‹©ä¸€ä¸ªçº¿ç¨‹ï¼Œä½¿å…¶å ç”¨CPUã€‚å¤„äºè¿è¡ŒçŠ¶æ€çš„çº¿ç¨‹ä¼šä¸€ç›´è¿è¡Œï¼Œç›´è‡³å®ƒä¸å¾—ä¸æ”¾å¼ƒ CPUã€‚\n\n#### è¯·è¯´å‡ºä¸çº¿ç¨‹åŒæ­¥ä»¥åŠçº¿ç¨‹è°ƒåº¦ç›¸å…³çš„æ–¹æ³•ã€‚\n\nï¼ˆ1ï¼‰wait()ï¼šä½¿ä¸€ä¸ªçº¿ç¨‹å¤„äºç­‰å¾…çŠ¶æ€ï¼Œå¹¶ä¸”é‡Šæ”¾æ‰€æŒæœ‰çš„å¯¹è±¡çš„é”ï¼›\n\nï¼ˆ2ï¼‰sleep()ï¼šä½¿ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„çº¿ç¨‹å¤„äºç¡çœ çŠ¶æ€ï¼Œæ˜¯ä¸€ä¸ªé™æ€æ–¹æ³•ï¼›\n\nï¼ˆ3ï¼‰notify()ï¼šå”¤é†’ä¸€ä¸ªå¤„äºç­‰å¾…çŠ¶æ€çš„çº¿ç¨‹ï¼Œå½“ç„¶åœ¨è°ƒç”¨æ­¤æ–¹æ³•çš„æ—¶å€™ï¼Œå¹¶ä¸èƒ½ç¡®åˆ‡çš„å”¤é†’æŸä¸€ä¸ªç­‰å¾…çŠ¶æ€çš„çº¿ç¨‹ï¼Œè€Œæ˜¯ç”± JVM ç¡®å®šå”¤é†’å“ªä¸ªçº¿ç¨‹ï¼Œè€Œä¸”ä¸ä¼˜å…ˆçº§æ— å…³ï¼›\n\nï¼ˆ4ï¼‰notityAll()ï¼šå”¤é†’æ‰€æœ‰å¤„äºç­‰å¾…çŠ¶æ€çš„çº¿ç¨‹ï¼Œè¯¥æ–¹æ³•å¹¶ä¸æ˜¯å°†å¯¹è±¡çš„é”ç»™æ‰€æœ‰çº¿ç¨‹ï¼Œè€Œæ˜¯è®©å®ƒä»¬ç«äº‰ï¼Œåªæœ‰è·å¾—é”çš„çº¿ç¨‹æ‰èƒ½è¿›å…¥å°±ç»ªçŠ¶æ€ï¼›\n\n#### wait() å’Œ sleep() æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\n\nä¸¤è€…éƒ½å¯ä»¥æš‚åœçº¿ç¨‹çš„æ‰§è¡Œ\n\n- ç±»çš„ä¸åŒï¼šwait() æ˜¯ Object ç±»çš„æ–¹æ³•ï¼Œsleep() æ˜¯ Thread çº¿ç¨‹ç±»çš„é™æ€æ–¹æ³•ã€‚\n- é‡Šæ”¾é”ï¼šwait() é‡Šæ”¾é”ï¼Œsleep() ä¸é‡Šæ”¾é”ã€‚\n- ç”¨é€”ä¸åŒï¼šwait é€šå¸¸è¢«ç”¨äºçº¿ç¨‹é—´äº¤äº’/é€šä¿¡ï¼Œsleep é€šå¸¸è¢«ç”¨äºæš‚åœæ‰§è¡Œã€‚\n- è‡ªåŠ¨è‹é†’ï¼šwait() æ–¹æ³•è¢«è°ƒç”¨åï¼Œçº¿ç¨‹ä¸ä¼šè‡ªåŠ¨è‹é†’ï¼Œéœ€è¦åˆ«çš„çº¿ç¨‹è°ƒç”¨åŒä¸€ä¸ªå¯¹è±¡ä¸Šçš„ notify() æˆ–è€… notifyAll() æ–¹æ³•ã€‚sleep() æ–¹æ³•æ‰§è¡Œå®Œæˆåï¼Œçº¿ç¨‹ä¼šè‡ªåŠ¨è‹é†’ã€‚æˆ–è€…å¯ä»¥ä½¿ç”¨wait(long timeout)è¶…æ—¶åçº¿ç¨‹ä¼šè‡ªåŠ¨è‹é†’ã€‚\n\n#### ä½ æ˜¯å¦‚ä½•è°ƒç”¨ wait() æ–¹æ³•çš„ï¼Ÿä½¿ç”¨ if å—è¿˜æ˜¯å¾ªç¯ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ\n\n> ä½¿ç”¨ while åˆ¤æ–­æ¡ä»¶æ˜¯å¦å¾—åˆ°æ»¡è¶³\n\nä½¿ç”¨ if æ¥åˆ¤æ–­ä¼šå­˜åœ¨ä»¥ä¸‹é—®é¢˜ï¼š\n\n1. å¦ä¸€ä¸ªçº¿ç¨‹å¯èƒ½å·²ç»è¢«å”¤é†’å¹¶æ”¹å˜äº†æ¡ä»¶çŠ¶æ€ã€‚ä¾‹å¦‚ notifyAll ä¼šå”¤é†’å¤šä¸ªç­‰å¾…çš„çº¿ç¨‹ã€‚\n\n2. å­˜åœ¨â€œä¼ªå”¤é†’â€çš„æƒ…å†µï¼Œå³åœ¨æ²¡æœ‰é€šçŸ¥çš„æƒ…å†µä¸‹ï¼Œçº¿ç¨‹ä¹Ÿå¯èƒ½ä¼šè‹é†’è¿‡æ¥ï¼Œè€Œæ­¤æ—¶æ˜¯ä¸åº”è¯¥å”¤é†’çš„ã€‚\n\n\t```java\n\tsynchronized (monitor) {\n\t    //  åˆ¤æ–­æ¡ä»¶è°“è¯æ˜¯å¦å¾—åˆ°æ»¡è¶³\n\t    while(!locked) {\n\t        //  ç­‰å¾…å”¤é†’\n\t        monitor.wait();\n\t    }\n\t    //  å¤„ç†å…¶ä»–çš„ä¸šåŠ¡é€»è¾‘\n\t}\n\t```\n\n#### ä¸ºä»€ä¹ˆçº¿ç¨‹é€šä¿¡çš„æ–¹æ³• wait()ï¼Œnotify() å’Œ notifyAll() è¢«å®šä¹‰åœ¨ Object ç±»é‡Œï¼Ÿ\n\nJava ä¸­ï¼Œä»»ä½•å¯¹è±¡éƒ½å¯ä»¥ä½œä¸ºé”ï¼Œå¹¶ä¸”çº¿ç¨‹é€šä¿¡çš„æ–¹æ³• wait()ï¼Œnotify() ç­‰æ–¹æ³•ç”¨äºç­‰å¾…å¯¹è±¡çš„é”æˆ–è€…æ˜¯å”¤é†’çº¿ç¨‹ï¼Œé‚£ä¹ˆè¦æ‰¾ä¸€ä¸ªå¯ä¾›ä»»ä½•å¯¹è±¡ä½¿ç”¨çš„é”ï¼Œå› æ­¤å°†è¿™äº›æ–¹æ³•å®šä¹‰åœ¨ Object ä¸­ï¼ŒObject æ˜¯æ‰€æœ‰ç±»çš„çˆ¶ç±»ã€‚\n\n#### Thread ç±»ä¸­çš„ yield æ–¹æ³•æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ\n\nä½¿å½“å‰çº¿ç¨‹ä»è¿è¡ŒçŠ¶æ€å˜ä¸ºå°±ç»ªçŠ¶æ€ã€‚\n\n#### çº¿ç¨‹çš„ sleep()æ–¹æ³•å’Œ yield()æ–¹æ³•æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\n\n1. sleep() æ–¹æ³•ç»™å…¶ä»–çº¿ç¨‹è¿è¡Œæœºä¼šæ—¶ä¸è€ƒè™‘çº¿ç¨‹çš„ä¼˜å…ˆçº§ï¼Œå› æ­¤ä¼šç»™ä½ä¼˜å…ˆçº§çš„çº¿ç¨‹ä»¥è¿è¡Œçš„æœºä¼šï¼›\n\n\tyield()æ–¹æ³•åªä¼šç»™**ç›¸åŒæˆ–æ›´é«˜ä¼˜å…ˆçº§**çš„çº¿ç¨‹ä»¥è¿è¡Œçš„æœºä¼šï¼›\n\n2. çº¿ç¨‹æ‰§è¡Œ sleep() æ–¹æ³•åè½¬å…¥ç­‰å¾…ï¼ˆwaitingï¼‰çŠ¶æ€ï¼Œè€Œæ‰§è¡Œ yield() æ–¹æ³•åè½¬å…¥å°±ç»ªï¼ˆreadyï¼‰çŠ¶æ€ï¼›\n\n#### å¦‚ä½•åœæ­¢ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„çº¿ç¨‹ï¼Ÿ\n\n1. å½“ run æ–¹æ³•å®Œæˆåçº¿ç¨‹ç»ˆæ­¢ï¼›\n2. ä½¿ç”¨ interrupt æ–¹æ³•ä¸­æ–­çº¿ç¨‹ã€‚\n\n#### notify() å’Œ notifyAll() æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\n\nå¦‚æœçº¿ç¨‹è°ƒç”¨äº†å¯¹è±¡çš„ wait() æ–¹æ³•ï¼Œé‚£ä¹ˆçº¿ç¨‹ä¾¿ä¼šå¤„äºè¯¥å¯¹è±¡çš„ç­‰å¾…æ± ä¸­ï¼Œç­‰å¾…æ± ä¸­çš„çº¿ç¨‹ä¸ä¼šå»ç«äº‰è¯¥å¯¹è±¡çš„é”ã€‚\n\nnotifyAll() ä¼šå”¤é†’æ‰€æœ‰çš„çº¿ç¨‹ï¼Œnotify() åªä¼šå”¤é†’ä¸€ä¸ªçº¿ç¨‹ã€‚\n\nnotifyAll() è°ƒç”¨åï¼Œä¼šå°†å…¨éƒ¨çº¿ç¨‹ç”±ç­‰å¾…æ± ç§»åˆ°é”æ± ï¼Œç„¶åå‚ä¸é”çš„ç«äº‰ï¼Œç«äº‰æˆåŠŸåˆ™ç»§ç»­æ‰§è¡Œï¼Œå¦‚æœä¸æˆåŠŸåˆ™ç•™åœ¨é”æ± ç­‰å¾…é”è¢«é‡Šæ”¾åå†æ¬¡å‚ä¸ç«äº‰ã€‚è€Œ notify()åªä¼šå”¤é†’ä¸€ä¸ªçº¿ç¨‹ï¼Œå…·ä½“å”¤é†’å“ªä¸€ä¸ªçº¿ç¨‹ç”±è™šæ‹Ÿæœºæ§åˆ¶ã€‚\n\n#### å¦‚ä½•åœ¨ä¸¤ä¸ªçº¿ç¨‹é—´å…±äº«æ•°æ®ï¼Ÿ\n\nJava çº¿ç¨‹ä¹‹é—´çš„é€šä¿¡ç”± Java å†…å­˜æ¨¡å‹ï¼ˆç®€ç§°JMMï¼‰æ§åˆ¶ï¼š\n\n1. æ‰€æœ‰çš„å…±äº«å˜é‡éƒ½å­˜åœ¨ä¸»å†…å­˜ä¸­\n2. æ¯ä¸ªçº¿ç¨‹éƒ½ä¿å­˜äº†ä¸€ä»½è¯¥çº¿ç¨‹ä½¿ç”¨åˆ°çš„å…±äº«å˜é‡çš„å‰¯æœ¬\n3. å¦‚æœçº¿ç¨‹Aä¸çº¿ç¨‹Bä¹‹é—´è¦é€šä¿¡ï¼š\n\t1. çº¿ç¨‹Aå°†æœ¬åœ°å†…å­˜Aä¸­æ›´æ–°è¿‡çš„å…±äº«å˜é‡åˆ·æ–°åˆ°ä¸»å†…å­˜ä¸­å»\n\t2. çº¿ç¨‹Båˆ°ä¸»å†…å­˜ä¸­å»è¯»å–çº¿ç¨‹Aä¹‹å‰å·²ç»æ›´æ–°è¿‡çš„å…±äº«å˜é‡ã€‚\n\n#### Java å¦‚ä½•å®ç°å¤šçº¿ç¨‹ä¹‹é—´çš„é€šè®¯å’Œåä½œï¼Ÿ\n\nJavaä¸­çº¿ç¨‹é€šä¿¡åä½œçš„æœ€å¸¸è§çš„ä¸¤ç§æ–¹å¼ï¼š\n\n1. synchronized åŠ é”çš„çº¿ç¨‹ + Object ç±»çš„ wait()/notify()/notifyAll()\n\n2. ReentrantLock ç±»åŠ é”çš„çº¿ç¨‹ + Condition ç±»çš„ await()/signal()/signalAll()\n\n#### åŒæ­¥æ–¹æ³•å’ŒåŒæ­¥å—ï¼Œå“ªä¸ªæ˜¯æ›´å¥½çš„é€‰æ‹©ï¼Ÿ\n\nåŒæ­¥çš„èŒƒå›´è¶Šå°è¶Šå¥½ã€‚\n\nå› æ­¤ï¼ŒåŒæ­¥å—æ˜¯æ›´å¥½çš„é€‰æ‹©ï¼Œå› ä¸ºå®ƒä¸ä¼šé”ä½æ•´ä¸ªå¯¹è±¡ï¼Œè€ŒåŒæ­¥æ–¹æ³•ä¼šé”ä½æ•´ä¸ªå¯¹è±¡ã€‚\n\n#### ä»€ä¹ˆæ˜¯çº¿ç¨‹åŒæ­¥å’Œçº¿ç¨‹äº’æ–¥ï¼Œæœ‰å“ªå‡ ç§å®ç°æ–¹å¼ï¼Ÿ\n\nçº¿ç¨‹åŒæ­¥æ˜¯ä¸¤ä¸ªæˆ–å¤šä¸ªå…±äº«å…³é”®èµ„æºçš„çº¿ç¨‹çš„å¹¶å‘æ‰§è¡Œã€‚åº”è¯¥åŒæ­¥çº¿ç¨‹ä»¥é¿å…å…³é”®çš„èµ„æºä½¿ç”¨å†²çªã€‚\n\nçº¿ç¨‹äº’æ–¥æ˜¯å¯¹æŸä¸€å…±äº«èµ„æºè€Œè¨€ï¼Œä»»ä½•æ—¶åˆ»æœ€å¤šåªå…è®¸ä¸€ä¸ªçº¿ç¨‹å»ä½¿ç”¨ï¼Œå…¶å®ƒè¦ä½¿ç”¨è¯¥èµ„æºçš„çº¿ç¨‹å¿…é¡»ç­‰å¾…ï¼Œç›´åˆ°å ç”¨èµ„æºè€…é‡Šæ”¾è¯¥èµ„æºã€‚\n\nå®ç°çº¿ç¨‹åŒæ­¥çš„æ–¹æ³•\n\n- åŒæ­¥ä»£ç æ–¹æ³• / æ–¹æ³•å—ï¼šsychronized å…³é”®å­—ä¿®é¥°çš„æ–¹æ³• / ä»£ç å—\n- ä½¿ç”¨ç‰¹æ®Šå˜é‡åŸŸ volatile å®ç°çº¿ç¨‹åŒæ­¥ï¼švolatileå…³é”®å­—ä¸ºåŸŸå˜é‡çš„è®¿é—®æä¾›äº†ä¸€ç§å…é”æœºåˆ¶\n- ä½¿ç”¨é‡å…¥é”å®ç°çº¿ç¨‹åŒæ­¥ï¼šreentrantlock ç±»æ˜¯å¯é‡å…¥ã€äº’æ–¥ã€å®ç°äº† lock æ¥å£çš„é”ï¼Œä¸ sychronized æ–¹æ³•å…·æœ‰ç›¸åŒçš„åŸºæœ¬è¡Œä¸ºå’Œè¯­ä¹‰\n\n#### åœ¨ç›‘è§†å™¨(Monitor)å†…éƒ¨ï¼Œæ˜¯å¦‚ä½•åšçº¿ç¨‹åŒæ­¥çš„ï¼Ÿ\n\nåœ¨ Java è™šæ‹Ÿæœºä¸­ï¼Œæ¯ä¸ªå¯¹è±¡å…³è”ä¸€ä¸ª**ç›‘è§†å™¨**ï¼Œä¸ºäº†å®ç°ç›‘è§†å™¨çš„äº’æ–¥åŠŸèƒ½ï¼Œ**æ¯ä¸ªå¯¹è±¡éƒ½å…³è”ç€ä¸€æŠŠé”**ã€‚\n\nä¸€æ—¦æ–¹æ³•æˆ–è€…ä»£ç å—è¢« **synchronized** ä¿®é¥°ï¼Œé‚£ä¹ˆè¿™ä¸ªéƒ¨åˆ†å°±æ”¾å…¥äº†ç›‘è§†å™¨çš„ç›‘è§†åŒºåŸŸï¼Œ**ç¡®ä¿ä¸€æ¬¡åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œè¯¥éƒ¨åˆ†çš„ä»£ç **ï¼Œçº¿ç¨‹åœ¨è·å–é”ä¹‹å‰ä¸å…è®¸æ‰§è¡Œè¯¥éƒ¨åˆ†çš„ä»£ç \n\nå¦å¤– Java è¿˜æä¾›äº†æ˜¾å¼ç›‘è§†å™¨( Lock )å’Œéšå¼ç›‘è§†å™¨( synchronized )ä¸¤ç§é”æ–¹æ¡ˆ\n\n#### Java çº¿ç¨‹æ•°è¿‡å¤šä¼šé€ æˆä»€ä¹ˆé—®é¢˜ï¼Ÿ\n\n- æ¶ˆè€—è¿‡å¤šçš„ CPU èµ„æº\n\n\tå¦‚æœå¯è¿è¡Œçš„çº¿ç¨‹æ•°é‡å¤šäºå¯ç”¨å¤„ç†å™¨çš„æ•°é‡ï¼Œé‚£ä¹ˆæœ‰çº¿ç¨‹å°†ä¼šè¢«é—²ç½®ã€‚å¤§é‡ç©ºé—²çš„çº¿ç¨‹ä¼šå ç”¨è®¸å¤šå†…å­˜ï¼Œç»™åƒåœ¾å›æ”¶å™¨å¸¦æ¥å‹åŠ›ã€‚\n\n- é™ä½ JVM ç¨³å®šæ€§\n\n\tåœ¨å¯åˆ›å»ºçº¿ç¨‹çš„æ•°é‡ä¸Šå­˜åœ¨ä¸€ä¸ªé™åˆ¶ï¼Œè¿™ä¸ªé™åˆ¶å€¼å°†éšç€å¹³å°çš„ä¸åŒè€Œä¸åŒï¼Œå¹¶ä¸”æ‰¿å—ç€å¤šä¸ªå› ç´ åˆ¶çº¦ï¼ŒåŒ…æ‹¬ JVM çš„å¯åŠ¨å‚æ•°ã€Thread æ„é€ å‡½æ•°ä¸­è¯·æ±‚æ ˆçš„å¤§å°ï¼Œä»¥åŠåº•å±‚æ“ä½œç³»ç»Ÿå¯¹çº¿ç¨‹çš„é™åˆ¶ç­‰ã€‚å¦‚æœç ´åäº†è¿™äº›é™åˆ¶ï¼Œé‚£ä¹ˆå¯èƒ½æŠ›å‡º OutOfMemoryError å¼‚å¸¸ã€‚\n\n## å¹¶å‘å…³é”®å­—\n\n### synchronized\n\n#### synchronized çš„ä½œç”¨ï¼Ÿ\n\nåœ¨ Java ä¸­ï¼Œsynchronized å…³é”®å­—æ˜¯ç”¨æ¥æ§åˆ¶çº¿ç¨‹åŒæ­¥çš„ï¼Œå°±æ˜¯åœ¨å¤šçº¿ç¨‹çš„ç¯å¢ƒä¸‹ï¼Œæ§åˆ¶ synchronized ä»£ç æ®µä¸è¢«å¤šä¸ªçº¿ç¨‹åŒæ—¶æ‰§è¡Œã€‚synchronized å¯ä»¥ä¿®é¥°é™æ€æ–¹æ³•ã€å®ä¾‹æ–¹æ³•ã€ä»£ç å—ã€‚\n\n#### æ€ä¹ˆä½¿ç”¨ synchronized å…³é”®å­—\n\n**synchronizedå…³é”®å­—æœ€ä¸»è¦çš„ä¸‰ç§ä½¿ç”¨æ–¹å¼ï¼š**\n\n- **ä¿®é¥°å®ä¾‹æ–¹æ³•ï¼š** ç»™å½“å‰å¯¹è±¡å®ä¾‹åŠ é”ï¼›\n- **ä¿®é¥°é™æ€æ–¹æ³•ï¼š** ç»™å½“å‰ç±»åŠ é”ï¼›\n- **ä¿®é¥°ä»£ç å—ï¼š**ç»™æŒ‡å®šå¯¹è±¡åŠ é”ï¼Œè¿›å…¥åŒæ­¥ä»£ç å—å‰è¦è·å¾—æŒ‡å®šå¯¹è±¡çš„é”ã€‚\n\n**æ€»ç»“ï¼š** synchronized å…³é”®å­—åŠ åˆ° static é™æ€æ–¹æ³•å’Œ synchronized(xxx.class) ä»£ç å—ä¸Šéƒ½æ˜¯æ˜¯ç»™ Class ç±»ä¸Šé”ã€‚synchronized å…³é”®å­—åŠ åˆ°å®ä¾‹æ–¹æ³•ä¸Šæ˜¯ç»™å¯¹è±¡å®ä¾‹ä¸Šé”ã€‚\n\n#### åŒé‡æ ¡éªŒé”å®ç°å¯¹è±¡å•ä¾‹ï¼ˆçº¿ç¨‹å®‰å…¨ï¼‰\n\n```java\npublic class Singleton {\n    private volatile static Singleton uniqueInstance;\n\n    private Singleton() {}\n\n    public static Singleton getInstance() {\n        // ç¬¬ä¸€æ¬¡å‡å¦‚çº¿ç¨‹1ï¼Œçº¿ç¨‹2ï¼Œçº¿ç¨‹3åˆ°è¾¾è¿™ï¼Œéƒ½åˆ¤æ–­åˆ°nullæœªå®ä¾‹åŒ–ï¼ŒåŠ è¿™ä¸ªåˆ¤æ–­æ˜¯ä¸ºäº†è®©é™¤äº†ç¬¬ä¸€æ¬¡å®ä¾‹åŒ–ä¹‹åçš„å…¶ä»–çº¿ç¨‹åˆ¤æ–­åˆ°éç©ºè¡¨æ˜å·²ç»å®ä¾‹åŒ–è¿‡äº†ï¼Œç›´æ¥è¿”å›å•ä¾‹\n        if (uniqueInstance == null) {\t// çº¿ç¨‹1ã€2ã€3æœ‰å¯èƒ½éƒ½è¿›æ¥äº†\n            //ç±»å¯¹è±¡åŠ é”\n            synchronized (Singleton.class) {\t// å¦‚æœå¤šä¸ªçº¿ç¨‹éƒ½åˆ¤æ–­åˆ°æœªå®ä¾‹åŒ–ï¼Œé‚£ä¹ˆåªä¼šæœ‰ä¸€ä¸ªçº¿ç¨‹é”ä½ç±»å¹¶è¿›è¡Œå®ä¾‹åŒ–\n                if (uniqueInstance == null) {\t// å¦‚æœä¸åŠ è¿™ä¸ªåˆ¤æ–­ï¼Œçº¿ç¨‹1æ‹¿åˆ°é”è¿›è¡Œå®ä¾‹åŒ–ä¹‹åï¼Œçº¿ç¨‹2æ‹¿åˆ°é”ï¼Œè¿›æ¥ç›´æ¥è¿›è¡Œå®ä¾‹åŒ–ï¼Œè¿™å°±äº§ç”Ÿå¤šæ¬¡å®ä¾‹åŒ–æ“ä½œã€‚å¦‚æœåŠ è¿™ä¸ªåˆ¤æ–­ï¼Œçº¿ç¨‹2æ‹¿åˆ°é”ä¹‹åï¼Œåˆ¤æ–­åˆ°å·²ç»å®ä¾‹åŒ–äº†ï¼Œå°±ä¸ä¼šå†è¿›è¡Œå®ä¾‹åŒ–äº†ã€‚\n                    uniqueInstance = new Singleton();\n                }\n            }\n        }\n        return uniqueInstance;\n    }\n\n}\n```\n\nå¦å¤–ï¼Œéœ€è¦æ³¨æ„ instanceé‡‡ç”¨ volatile å…³é”®å­—ä¿®é¥°ä¹Ÿæ˜¯å¾ˆæœ‰å¿…è¦ã€‚\n\ninstance é‡‡ç”¨ volatile å…³é”®å­—ä¿®é¥°ä¹Ÿæ˜¯å¾ˆæœ‰å¿…è¦çš„ï¼Œinstance = new Singleton() è¿™æ®µä»£ç å…¶å®æ˜¯åˆ†ä¸ºä¸‰æ­¥æ‰§è¡Œï¼š\n\n1. ä¸º instance åˆ†é…å†…å­˜ç©ºé—´\n2. åˆå§‹åŒ– instance\n3. å°† instance æŒ‡å‘åˆ†é…çš„å†…å­˜åœ°å€\n\nä½†æ˜¯ç”±äº JVM å…·æœ‰æŒ‡ä»¤é‡æ’çš„ç‰¹æ€§ï¼Œæ‰§è¡Œé¡ºåºæœ‰å¯èƒ½å˜æˆ 1->3->2ã€‚æŒ‡ä»¤é‡æ’åœ¨å•çº¿ç¨‹ç¯å¢ƒä¸‹ä¸ä¼šå‡ºç°é—®é¢˜ï¼Œä½†æ˜¯åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ä¼šå¯¼è‡´ä¸€ä¸ªçº¿ç¨‹è·å¾—è¿˜æ²¡æœ‰åˆå§‹åŒ–çš„å®ä¾‹ã€‚ä¾‹å¦‚ï¼Œçº¿ç¨‹ T1 æ‰§è¡Œäº† 1 å’Œ 3ï¼Œæ­¤æ—¶ T2 è°ƒç”¨ getInstance() åå‘ç° instanceä¸ä¸ºç©ºï¼Œå› æ­¤**è¿”å› T1 å®ä¾‹åŒ–ä½†æœªåˆå§‹åŒ–**çš„ instanceã€‚\n\n#### synchronized åº•å±‚å®ç°åŸç†ï¼Ÿï¼ˆç›‘è§†å™¨monitorï¼‰\n\nsynchronized æ˜¯ Java ä¸­çš„ä¸€ä¸ªå…³é”®å­—ï¼Œé€šè¿‡ javap å‘½ä»¤ï¼ŒæŸ¥çœ‹ç›¸åº”çš„å­—èŠ‚ç æ–‡ä»¶ã€‚\n\nsynchronized åŒæ­¥è¯­å¥å—çš„æƒ…å†µ\n\n```java\npublic class SynchronizedDemo {\n    public void method() {\n        synchronized (this) {\n            System.out.println(\"synchronized ä»£ç å—\");\n        }\n    }\n}\n```\n\né€šè¿‡JDK åæ±‡ç¼–æŒ‡ä»¤ javap -c -v SynchronizedDemo\n\n<img src=\"https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/image-20220912212554623.png\" alt=\"monitorenter&monitorexit\" style=\"zoom:50%;\" />\n\nå¯ä»¥çœ‹å‡ºåœ¨æ‰§è¡ŒåŒæ­¥ä»£ç å—ä¹‹å‰ä¹‹åéƒ½æœ‰ä¸€ä¸ª monitor å­—æ ·ï¼Œå…¶ä¸­å‰é¢çš„æ˜¯ monitorenterï¼Œåé¢çš„æ˜¯ç¦»å¼€monitorexitï¼Œä¸éš¾æƒ³è±¡ä¸€ä¸ªçº¿ç¨‹æ‰§è¡ŒåŒæ­¥ä»£ç å—ï¼Œé¦–å…ˆè¦è·å–é”ï¼Œè€Œè·å–é”çš„è¿‡ç¨‹å°±æ˜¯ monitorenter ï¼Œåœ¨æ‰§è¡Œå®Œä»£ç å—ä¹‹åï¼Œè¦é‡Šæ”¾é”ï¼Œé‡Šæ”¾é”å°±æ˜¯æ‰§è¡Œ monitorexit æŒ‡ä»¤ã€‚\n\nä¸ºä»€ä¹ˆä¼šæœ‰ä¸¤ä¸ªmonitorexitå‘¢ï¼Ÿï¼ˆline 19ï¼‰\n\nè¿™ä¸ªä¸»è¦æ˜¯é˜²æ­¢åœ¨åŒæ­¥ä»£ç å—ä¸­çº¿ç¨‹å› å¼‚å¸¸é€€å‡ºï¼Œè€Œé”æ²¡æœ‰å¾—åˆ°é‡Šæ”¾ï¼Œè¿™å¿…ç„¶ä¼šé€ æˆæ­»é”ï¼ˆç­‰å¾…çš„çº¿ç¨‹æ°¸è¿œè·å–ä¸åˆ°é”ï¼‰ã€‚**å› æ­¤æœ€åä¸€ä¸ªmonitorexitæ˜¯ä¿è¯åœ¨å¼‚å¸¸æƒ…å†µä¸‹ï¼Œé”ä¹Ÿå¯ä»¥å¾—åˆ°é‡Šæ”¾ï¼Œé¿å…æ­»é”ã€‚**\n\n#### synchronized å¯é‡å…¥çš„åŸç†\n\né‡å…¥é”æ˜¯æŒ‡ä¸€ä¸ªçº¿ç¨‹è·å–åˆ°è¯¥é”ä¹‹åï¼Œè¯¥çº¿ç¨‹å¯ä»¥ç»§ç»­è·å¾—è¯¥é”ã€‚\nåº•å±‚åŸç†ç»´æŠ¤ä¸€ä¸ª**è®¡æ•°å™¨**ï¼Œå½“çº¿ç¨‹è·å–è¯¥é”æ—¶ï¼Œè®¡æ•°å™¨åŠ ä¸€ï¼Œå†æ¬¡è·å¾—è¯¥é”æ—¶ç»§ç»­åŠ ä¸€ï¼Œé‡Šæ”¾é”æ—¶ï¼Œè®¡æ•°å™¨å‡ä¸€ï¼Œå½“è®¡æ•°å™¨å€¼ä¸º0æ—¶ï¼Œè¡¨æ˜è¯¥é”æœªè¢«ä»»ä½•çº¿ç¨‹æ‰€æŒæœ‰ï¼Œå…¶å®ƒçº¿ç¨‹å¯ä»¥ç«äº‰è·å–é”ã€‚\n\n#### ä»€ä¹ˆæ˜¯è‡ªæ—‹\n\n> ä¸è¦é‡åˆ° synchronized å°±è®©ç­‰å¾…é”çš„çº¿ç¨‹è¿›å…¥é˜»å¡çŠ¶æ€ï¼Œè€Œæ˜¯è®©è¿™ä¸ªçº¿ç¨‹åœ¨ synchronized è¾¹ç•Œåšå¿™å¾ªç¯\n\nå¾ˆå¤š synchronized é‡Œé¢çš„ä»£ç åªæ˜¯ä¸€äº›å¾ˆç®€å•çš„ä»£ç ï¼Œæ‰§è¡Œæ—¶é—´éå¸¸å¿«ï¼Œæ—¢ç„¶ synchronized é‡Œé¢çš„ä»£ç æ‰§è¡Œå¾—éå¸¸å¿«ï¼Œä¸å¦¨è®©ç­‰å¾…é”çš„çº¿ç¨‹ä¸è¦è¢«é˜»å¡ï¼Œå› ä¸º**çº¿ç¨‹é˜»å¡æ¶‰åŠåˆ°ç”¨æˆ·æ€å’Œå†…æ ¸æ€åˆ‡æ¢çš„é—®é¢˜å¼€é”€å¾ˆå¤§**ï¼Œè€Œæ˜¯**åœ¨ synchronized çš„è¾¹ç•Œåšå¿™å¾ªç¯**ï¼Œè¿™å°±æ˜¯è‡ªæ—‹ã€‚å¦‚æœåšäº†å¤šæ¬¡å¾ªç¯å‘ç°è¿˜æ²¡æœ‰è·å¾—é”ï¼Œå†é˜»å¡ï¼Œè¿™æ ·å¯èƒ½æ˜¯ä¸€ç§æ›´å¥½çš„ç­–ç•¥ã€‚\n\n#### å¤šçº¿ç¨‹ä¸­ synchronized é”å‡çº§çš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ\n\n> ç›®çš„ï¼šé”å‡çº§æ˜¯ä¸ºäº†å‡ä½äº†é”å¸¦æ¥çš„æ€§èƒ½æ¶ˆè€—ã€‚\n\nJava çš„é”éƒ½æ˜¯åŸºäºå¯¹è±¡çš„ï¼ŒJava å¯¹è±¡æœ‰å¯¹è±¡å¤´ï¼Œå†…å®¹åŒ…æ‹¬ï¼š\n\n1. Mark Wordï¼Œå­˜å‚¨å¯¹è±¡çš„ hashCodeã€é”ä¿¡æ¯ç­‰ï¼›\n2. Class Metadata Addressï¼Œå­˜å‚¨åˆ°å¯¹è±¡ç±»å‹æ•°æ®çš„æŒ‡é’ˆï¼›\n3. æ•°ç»„çš„é•¿åº¦ï¼ˆå¦‚æœæ˜¯æ•°ç»„ï¼‰\n\næ¯ä¸€ä¸ªçº¿ç¨‹åœ¨å‡†å¤‡è·å–å…±äº«èµ„æºæ—¶ï¼š \n\nç¬¬ä¸€æ­¥ï¼Œæ£€æŸ¥é”çš„ MarkWord é‡Œé¢æ˜¯ä¸æ˜¯æ”¾çš„è‡ªå·±çš„ ThreadIdï¼Œå¦‚æœæ˜¯ï¼Œè¡¨ç¤ºå½“å‰çº¿ç¨‹æ˜¯å¤„äº â€œ**åå‘é”**â€ ï¼›\n\nç¬¬äºŒæ­¥ï¼Œå¦‚æœé”çš„ MarkWord å­˜æ”¾çš„ä¸æ˜¯è‡ªå·±çš„ ThreadIdï¼Œè¿™ä¸ªæ—¶å€™ä¼šå°è¯•ä½¿ç”¨ CAS æ¥æ›¿æ¢ Mark Word é‡Œé¢çš„çº¿ç¨‹ ID ä¸ºæ–°çº¿ç¨‹çš„ IDï¼Œè¿™ä¸ªæ—¶å€™è¦åˆ†ä¸¤ç§æƒ…å†µï¼š\n\n- CAS æ›¿æ¢æˆåŠŸï¼Œè¡¨ç¤ºä¹‹å‰çš„çº¿ç¨‹ä¸å­˜åœ¨äº†ï¼Œ Mark Word é‡Œé¢çš„çº¿ç¨‹ ID ä¸ºæ–°çº¿ç¨‹çš„ IDï¼Œé”ä¸ä¼šå‡çº§ï¼Œä»ç„¶ä¸ºåå‘é”ï¼›\n- CAS æ›¿æ¢å¤±è´¥ï¼Œè¡¨ç¤ºä¹‹å‰çš„çº¿ç¨‹ä»ç„¶å­˜åœ¨ï¼Œæ ¹æ®é”çš„ MarkWord é‡Œé¢çš„ ThreadIdï¼Œé€šçŸ¥è¯¥ ThreadId çš„çº¿ç¨‹æš‚åœï¼Œä¹‹å‰çº¿ç¨‹å°† Markword çš„å†…å®¹ç½®ä¸ºç©ºï¼Œå‡çº§ä¸ºè½»é‡çº§é”ï¼Œä¼šæŒ‰ç…§è½»é‡çº§é”çš„æ–¹å¼è¿›è¡Œç«äº‰é”ã€‚\n\nç¬¬ä¸‰æ­¥ï¼Œä¸¤ä¸ªçº¿ç¨‹éƒ½æŠŠé”å¯¹è±¡çš„ hashCode å¤åˆ¶åˆ°è‡ªå·±æ–°å»ºçš„ç”¨äºå­˜å‚¨é”çš„è®°å½•ç©ºé—´ï¼Œæ¥ç€å¼€å§‹é€šè¿‡ CAS æ“ä½œï¼Œ æŠŠé”å¯¹è±¡çš„ MarkWord çš„å†…å®¹ä¿®æ”¹ä¸ºè‡ªå·±æ–°å»ºçš„è®°å½•ç©ºé—´çš„åœ°å€çš„æ–¹å¼ç«äº‰ MarkWordï¼›\n\nç¬¬å››æ­¥ï¼Œç¬¬ä¸‰æ­¥ä¸­æˆåŠŸæ‰§è¡Œ CAS çš„è·å¾—èµ„æºï¼Œå¤±è´¥çš„åˆ™è¿›å…¥è‡ªæ—‹ ï¼›\n\nç¬¬äº”æ­¥ï¼Œè‡ªæ—‹çš„çº¿ç¨‹åœ¨è‡ªæ—‹è¿‡ç¨‹ä¸­ï¼Œå¦‚æœæˆåŠŸè·å¾—èµ„æºï¼ˆå³ä¹‹å‰è·çš„èµ„æºçš„çº¿ç¨‹æ‰§è¡Œå®Œæˆå¹¶é‡Šæ”¾äº†å…±äº«èµ„æºï¼‰ï¼Œåˆ™æ•´ä¸ªçŠ¶æ€ä¾ç„¶å¤„äº **è½»é‡çº§é”**çš„çŠ¶æ€ï¼›å¦‚æœè‡ªæ—‹å¤±è´¥ ï¼ˆè¿™è¾¹çš„è‡ªæ—‹æ–¹å¼å¯ä»¥é‡‡ç”¨é€‚åº”æ€§è‡ªæ—‹ï¼Œç®€å•æ¥è¯´å°±æ˜¯çº¿ç¨‹å¦‚æœè‡ªæ—‹æˆåŠŸäº†ï¼Œåˆ™ä¸‹æ¬¡è‡ªæ—‹çš„æ¬¡æ•°ä¼šæ›´å¤šï¼Œå¦‚æœè‡ªæ—‹å¤±è´¥äº†ï¼Œåˆ™è‡ªæ—‹çš„æ¬¡æ•°å°±ä¼šå‡å°‘ï¼‰ï¼›\n\nç¬¬å…­æ­¥ï¼Œè¿›å…¥**é‡é‡çº§é”**çš„çŠ¶æ€ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œè‡ªæ—‹çš„çº¿ç¨‹è¿›å…¥é˜»å¡ï¼Œç­‰å¾…ç«äº‰çº¿ç¨‹æ‰§è¡Œå®Œæˆå¹¶å”¤é†’è‡ªå·±ã€‚\n\n#### çº¿ç¨‹ B æ€ä¹ˆçŸ¥é“çº¿ç¨‹ A ä¿®æ”¹äº†å˜é‡\n\n* volatile ä¿®é¥°å˜é‡\n\n* synchronized ä¿®é¥°ä¿®æ”¹å˜é‡çš„æ–¹æ³•\n* lock å¯¹ä¿®æ”¹å˜é‡çš„ä»£ç å—åŠ é”\n\n#### synchronized å’Œ Lock æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\n\n- synchronized æ˜¯ Java å…³é”®å­—ï¼Œè€ŒLock æ˜¯ä¸ªæ¥å£ï¼›\n- synchronized å¯ä»¥ç»™é™æ€æ–¹æ³•ã€å®ä¾‹æ–¹æ³•ã€ä»£ç å—åŠ é”ï¼Œè€Œ lock åªèƒ½ç»™ä»£ç å—åŠ é”ï¼›\n- synchronized ä¸éœ€è¦æ‰‹åŠ¨è·å–é”å’Œé‡Šæ”¾é”ï¼Œè€Œ lock éœ€è¦è‡ªå·±åŠ é”å’Œé‡Šæ”¾é”ï¼›\n- é€šè¿‡ Lock å¯ä»¥çŸ¥é“æœ‰æ²¡æœ‰æˆåŠŸè·å–é”ï¼Œè€Œ synchronized å´æ— æ³•åŠåˆ°ã€‚\n\n#### synchronized å’Œ ReentrantLock åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ\n\n**ç›¸åŒç‚¹ï¼š**\n\nä¸¤è€…éƒ½æ˜¯å¯é‡å…¥é”\n\nâ€œå¯é‡å…¥é”â€æ¦‚å¿µæ˜¯ï¼šè‡ªå·±å¯ä»¥å†æ¬¡è·å–è‡ªå·±çš„å†…éƒ¨é”ã€‚æ¯”å¦‚ä¸€ä¸ªçº¿ç¨‹è·å¾—äº†æŸä¸ªå¯¹è±¡çš„é”ï¼Œæ­¤æ—¶è¿™ä¸ªå¯¹è±¡é”è¿˜æ²¡æœ‰é‡Šæ”¾ï¼Œå½“å…¶å†æ¬¡æƒ³è¦è·å–è¿™ä¸ªå¯¹è±¡çš„é”çš„æ—¶å€™è¿˜æ˜¯å¯ä»¥è·å–çš„ï¼Œ**å¦‚æœä¸å¯é”é‡å…¥çš„è¯ï¼Œå°±ä¼šé€ æˆæ­»é”**ã€‚åŒä¸€ä¸ªçº¿ç¨‹æ¯æ¬¡è·å–é”ï¼Œé”çš„è®¡æ•°å™¨éƒ½è‡ªå¢1ï¼Œæ‰€ä»¥è¦ç­‰åˆ°é”çš„è®¡æ•°å™¨ä¸‹é™ä¸º0æ—¶æ‰èƒ½é‡Šæ”¾é”ã€‚\n\n**ä¸åŒç‚¹ï¼š**\n\n* synchronized æ˜¯å…³é”®å­—ï¼ŒReentrantLock æ˜¯ç±»ï¼›\n* ReentrantLock åªé€‚ç”¨äºä»£ç å—é”ï¼Œè€Œ synchronized å¯ä»¥ä¿®é¥°ç±»ã€æ–¹æ³•ã€å˜é‡ç­‰ï¼›\n\n- ReentrantLock å¿…é¡»æ‰‹åŠ¨è·å–ä¸é‡Šæ”¾é”ï¼Œè€Œ synchronized ä¸éœ€è¦æ‰‹åŠ¨é‡Šæ”¾å’Œå¼€å¯é”ï¼›\n- äºŒè€…çš„é”æœºåˆ¶å…¶å®ä¹Ÿæ˜¯ä¸ä¸€æ ·çš„ï¼š\n\tReentrantLock åº•å±‚è°ƒç”¨çš„æ˜¯ Unsafe çš„park æ–¹æ³•åŠ é”ï¼Œsynchronized æ“ä½œçš„åº”è¯¥æ˜¯å¯¹è±¡å¤´ä¸­ mark word\n\n### volatile\n\n#### ä¸ºä»€ä¹ˆä»£ç ä¼šé‡æ’åºï¼Ÿ\n\nåœ¨æ‰§è¡Œç¨‹åºæ—¶ï¼Œä¸ºäº†**æé«˜æ€§èƒ½**ï¼Œå¤„ç†å™¨å’Œç¼–è¯‘å™¨å¸¸å¸¸ä¼šå¯¹æŒ‡ä»¤è¿›è¡Œé‡æ’åºï¼Œä½†æ˜¯ä¸èƒ½éšæ„é‡æ’åºï¼Œä¸æ˜¯ä½ æƒ³æ€ä¹ˆæ’åºå°±æ€ä¹ˆæ’åºï¼Œå®ƒéœ€è¦æ»¡è¶³ä»¥ä¸‹ä¸¤ä¸ªæ¡ä»¶ï¼š\n\n- **åœ¨å•çº¿ç¨‹ç¯å¢ƒä¸‹ä¸èƒ½æ”¹å˜ç¨‹åºè¿è¡Œçš„ç»“æœï¼›**\n- **å­˜åœ¨æ•°æ®ä¾èµ–å…³ç³»çš„ä¸å…è®¸é‡æ’åº**\n\néœ€è¦æ³¨æ„çš„æ˜¯ï¼šé‡æ’åºä¸ä¼šå½±å“å•çº¿ç¨‹ç¯å¢ƒçš„æ‰§è¡Œç»“æœï¼Œä½†æ˜¯ä¼šç ´åå¤šçº¿ç¨‹çš„æ‰§è¡Œè¯­ä¹‰ã€‚\n\n#### as-if-serial è§„åˆ™å’Œ happens-before è§„åˆ™çš„åŒºåˆ«\n\n- as-if-serial è§„åˆ™ä¿è¯ **å•çº¿ç¨‹** å†…ç¨‹åºçš„æ‰§è¡Œç»“æœä¸è¢«æ”¹å˜ï¼Œhappens-before è§„åˆ™ä¿è¯ **æ­£ç¡®åŒæ­¥çš„å¤šçº¿ç¨‹** ç¨‹åºçš„æ‰§è¡Œç»“æœä¸è¢«æ”¹å˜ã€‚\n- as-if-serial è¯­ä¹‰å’Œ happens-before è¿™ä¹ˆåšçš„ç›®çš„ï¼Œéƒ½æ˜¯ä¸ºäº†åœ¨ä¸æ”¹å˜ç¨‹åºæ‰§è¡Œç»“æœçš„å‰æä¸‹ï¼Œå°½å¯èƒ½åœ°æé«˜ç¨‹åºæ‰§è¡Œçš„å¹¶è¡Œåº¦ã€‚\n\n#### volatile å…³é”®å­—çš„ä½œç”¨\n\nå¯¹äºå¯è§æ€§ï¼ŒJava æä¾›äº† volatile å…³é”®å­—æ¥ä¿è¯å¯è§æ€§å’Œæœ‰åºæ€§ï¼ˆç¦æ­¢æŒ‡ä»¤é‡æ’ï¼‰ï¼Œä½†ä¸èƒ½ä¿è¯åŸå­æ€§ã€‚ volatile æä¾› happens-before çš„ä¿è¯ï¼Œç¡®ä¿ä¸€ä¸ªçº¿ç¨‹çš„ä¿®æ”¹èƒ½å¯¹å…¶ä»–çº¿ç¨‹æ˜¯å¯è§çš„ã€‚å½“ä¸€ä¸ªå…±äº«å˜é‡è¢« volatile ä¿®é¥°æ—¶ï¼Œå®ƒä¼šä¿è¯ä¿®æ”¹çš„å€¼ä¼šç«‹å³è¢«æ›´æ–°åˆ°ä¸»å­˜ï¼Œå½“æœ‰å…¶ä»–çº¿ç¨‹éœ€è¦è¯»å–æ—¶ï¼Œå®ƒä¼šå»å†…å­˜ä¸­è¯»å–æ–°å€¼ã€‚\n\n#### JMMå†…å­˜å±éšœæ’å…¥ç­–ç•¥\n\n**æ’å…¥å±éšœ**\n\nStoreStoreå±éšœ - volatile å†™ - StoreLoadå±éšœ\n\nvolatileè¯» - LoadLoadå±éšœ - LoadStoreå±éšœ\n\n**volatile ä¸æ™®é€šå˜é‡çš„é‡æ’åºè§„åˆ™**\n\n1. å¦‚æœç¬¬ä¸€ä¸ªæ“ä½œæ˜¯ volatile è¯»ï¼Œé‚£æ— è®ºç¬¬äºŒä¸ªæ“ä½œæ˜¯ä»€ä¹ˆï¼Œéƒ½ä¸èƒ½é‡æ’åºï¼›\n2. å¦‚æœç¬¬äºŒä¸ªæ“ä½œæ˜¯ volatile å†™ï¼Œé‚£æ— è®ºç¬¬ä¸€ä¸ªæ“ä½œæ˜¯ä»€ä¹ˆï¼Œéƒ½ä¸èƒ½é‡æ’åºï¼›\n3. å¦‚æœç¬¬ä¸€ä¸ªæ“ä½œæ˜¯ volatile å†™ï¼Œç¬¬äºŒä¸ªæ“ä½œæ˜¯ volatile è¯»ï¼Œé‚£ä¸èƒ½é‡æ’åºã€‚\n\n#### volatile èƒ½ä½¿å¾—ä¸€ä¸ªéåŸå­æ“ä½œå˜æˆåŸå­æ“ä½œå—ï¼Ÿ\n\nvolatile åªèƒ½ä¿è¯å¯è§æ€§å’Œæœ‰åºæ€§è€Œä¸èƒ½ä¿è¯åŸå­æ€§ï¼Œä½†ç”¨ volatile ä¿®é¥° long å’Œ double å¯ä»¥ä¿è¯å…¶æ“ä½œåŸå­æ€§ã€‚\n\n#### volatile ä¿®é¥°ç¬¦çš„æœ‰è¿‡ä»€ä¹ˆå®è·µï¼Ÿ\n\nå•ä¾‹æ¨¡å¼-åŒé‡é”æ£€éªŒé‡Œé¢ç”¨ volatile ä¿®é¥°å®ä¾‹å˜é‡ã€‚\n\n#### volatile å’Œ synchronized çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ\n\n- volatile æ˜¯å˜é‡ä¿®é¥°ç¬¦ï¼›synchronized å¯ä»¥ä¿®é¥°ç±»ã€æ–¹æ³•ã€ä»£ç å—ï¼›\n- volatile ä»…èƒ½å®ç°å˜é‡çš„ä¿®æ”¹å¯è§æ€§å’Œæœ‰åºæ€§ï¼Œä¸èƒ½ä¿è¯åŸå­æ€§ï¼Œ\n\tè€Œ synchronized åˆ™å¯ä»¥ä¿è¯å˜é‡çš„ä¿®æ”¹åŸå­æ€§å’Œå¯è§æ€§ï¼›\n- volatile ä¸ä¼šé€ æˆçº¿ç¨‹çš„é˜»å¡ï¼›synchronized å¯èƒ½ä¼šé€ æˆçº¿ç¨‹çš„é˜»å¡ï¼›\n- **volatileå…³é”®å­—**æ˜¯çº¿ç¨‹åŒæ­¥çš„**è½»é‡çº§å®ç°**ï¼Œæ‰€ä»¥**volatileæ€§èƒ½è‚¯å®šæ¯”synchronizedå…³é”®å­—è¦å¥½**ã€‚synchronizedå…³é”®å­—åœ¨JavaSE1.6ä¹‹åè¿›è¡Œäº†ä¸»è¦åŒ…æ‹¬ä¸ºäº†**å‡å°‘è·å¾—é”å’Œé‡Šæ”¾é”å¸¦æ¥çš„æ€§èƒ½æ¶ˆè€—**è€Œå¼•å…¥çš„åå‘é”å’Œè½»é‡çº§é”ä»¥åŠå…¶å®ƒå„ç§ä¼˜åŒ–ä¹‹åæ‰§è¡Œæ•ˆç‡æœ‰äº†æ˜¾è‘—æå‡ï¼Œ**å®é™…å¼€å‘ä¸­ä½¿ç”¨ synchronized å…³é”®å­—çš„åœºæ™¯è¿˜æ˜¯æ›´å¤šä¸€äº›**ã€‚\n\n## Lock ä½“ç³»\n\n### Lock ç®€ä»‹\n\n#### Lock æ¥å£æ˜¯ä»€ä¹ˆï¼Ÿå¯¹æ¯”åŒæ­¥å®ƒæœ‰ä»€ä¹ˆä¼˜åŠ¿ï¼Ÿ\n\nLock æ¥å£æ¯”åŒæ­¥æ–¹æ³•å’ŒåŒæ­¥å—æä¾›äº†æ›´å…·æ‰©å±•æ€§çš„é”æ“ä½œã€‚\n\nï¼ˆ1ï¼‰å¯ä»¥ä½¿é”æ›´**å…¬å¹³**\n\nï¼ˆ2ï¼‰å¯ä»¥ä½¿çº¿ç¨‹åœ¨**ç­‰å¾…é”çš„æ—¶å€™å“åº”ä¸­æ–­**\n\nï¼ˆ3ï¼‰å¯ä»¥**è®©çº¿ç¨‹å°è¯•è·å–é”ï¼Œå¹¶åœ¨æ— æ³•è·å–é”çš„æ—¶å€™ç«‹å³è¿”å›æˆ–è€…ç­‰å¾…ä¸€æ®µæ—¶é—´**\n\n#### ä¹è§‚é”å’Œæ‚²è§‚é”çš„ç†è§£åŠå¦‚ä½•å®ç°ï¼Œæœ‰å“ªäº›å®ç°æ–¹å¼ï¼Ÿ\n\næ‚²è§‚é”ï¼šæ€»æ˜¯å‡è®¾æœ€åçš„æƒ…å†µï¼Œæ¯æ¬¡å»æ‹¿æ•°æ®çš„æ—¶å€™éƒ½è®¤ä¸ºåˆ«äººä¼šä¿®æ”¹ï¼Œæ‰€ä»¥æ¯æ¬¡åœ¨æ‹¿æ•°æ®çš„æ—¶å€™éƒ½ä¼šä¸Šé”ï¼Œè¿™æ ·åˆ«äººæƒ³æ‹¿è¿™ä¸ªæ•°æ®å°±ä¼šé˜»å¡ç›´åˆ°å®ƒæ‹¿åˆ°é”ã€‚\n\tä¼ ç»Ÿçš„å…³ç³»å‹æ•°æ®åº“é‡Œè¾¹å°±ç”¨åˆ°äº†å¾ˆå¤šè¿™ç§é”æœºåˆ¶ï¼Œæ¯”å¦‚è¡Œé”ï¼Œè¡¨é”ç­‰ï¼Œè¯»é”ï¼Œå†™é”ç­‰ï¼Œéƒ½æ˜¯åœ¨åšæ“ä½œä¹‹å‰å…ˆä¸Šé”ã€‚å†æ¯”å¦‚ Java é‡Œé¢çš„åŒæ­¥åŸè¯­ synchronized å…³é”®å­—çš„å®ç°ä¹Ÿæ˜¯æ‚²è§‚é”ã€‚\n\nä¹è§‚é”ï¼šé¡¾åæ€ä¹‰ï¼Œå°±æ˜¯å¾ˆä¹è§‚ï¼Œæ¯æ¬¡å»æ‹¿æ•°æ®çš„æ—¶å€™éƒ½è®¤ä¸ºåˆ«äººä¸ä¼šä¿®æ”¹ï¼Œæ‰€ä»¥ä¸ä¼šä¸Šé”ï¼Œä½†æ˜¯åœ¨æ›´æ–°çš„æ—¶å€™ä¼šåˆ¤æ–­ä¸€ä¸‹åœ¨æ­¤æœŸé—´åˆ«äººæœ‰æ²¡æœ‰å»æ›´æ–°è¿™ä¸ªæ•°æ®ï¼Œå¯ä»¥ä½¿ç”¨ç‰ˆæœ¬å·ç­‰æœºåˆ¶ã€‚\n\tä¹è§‚é”é€‚ç”¨äºå¤šè¯»çš„åº”ç”¨ç±»å‹ï¼Œè¿™æ ·å¯ä»¥æé«˜ååé‡ï¼Œæ¯”å¦‚ atomic åŒ…ä¸‹é¢çš„åŸå­å˜é‡ç±»å°±æ˜¯ä½¿ç”¨äº†ä¹è§‚é”çš„ä¸€ç§å®ç°æ–¹å¼ CAS å®ç°çš„ã€‚\n\n#### ä»€ä¹ˆæ˜¯ CAS\n\nCAS æ˜¯ compare and swap çš„ç¼©å†™ï¼Œå³æˆ‘ä»¬æ‰€è¯´çš„æ¯”è¾ƒäº¤æ¢ï¼Œæ˜¯ä¸€ç§ä¹è§‚é”æ“ä½œã€‚\n\nCAS æ“ä½œåŒ…å«ä¸‰ä¸ªæ“ä½œæ•° â€”â€” å†…å­˜ä½ç½®ï¼ˆVï¼‰ã€é¢„æœŸåŸå€¼ï¼ˆAï¼‰å’Œæ–°å€¼ï¼ˆBï¼‰ã€‚\n\nå¦‚æœå†…å­˜åœ°å€ V é‡Œé¢çš„å€¼å’Œ A çš„å€¼æ˜¯ä¸€æ ·çš„ï¼Œé‚£ä¹ˆå°±å°†å†…å­˜é‡Œé¢çš„å€¼æ›´æ–°æˆ Bã€‚\n\n####  Javaå®ç°CASçš„åŸç† - Unsafeç±»\n\nåœ¨Javaä¸­ï¼Œæœ‰ä¸€ä¸ª`Unsafe`ç±»ï¼Œå®ƒåœ¨`sun.misc`åŒ…ä¸­ã€‚å®ƒé‡Œé¢æ˜¯ä¸€äº›`native`æ–¹æ³•ï¼ˆç”±åº•å±‚çš„JVMä½¿ç”¨Cæˆ–è€…C++å»å®ç°ï¼‰ï¼Œå…¶ä¸­å°±æœ‰å‡ ä¸ªå…³äºCASçš„ï¼š\n\n```java\nboolean compareAndSwapObject(Object o, long offset,Object expected, Object x);\nboolean compareAndSwapInt(Object o, long offset,int expected,int x);\nboolean compareAndSwapLong(Object o, long offset,long expected,long x);\n```\n\nå½“ç„¶ï¼Œä»–ä»¬éƒ½æ˜¯`public native`çš„ã€‚\n\nUnsafe ä¸­å¯¹ CAS çš„å®ç°æ˜¯ C++ å†™çš„ï¼Œå®ƒçš„å…·ä½“å®ç°å’Œæ“ä½œç³»ç»Ÿã€CPU éƒ½æœ‰å…³ç³»ã€‚\n\nLinux çš„ X86 ä¸‹ä¸»è¦æ˜¯é€šè¿‡`cmpxchgl`è¿™ä¸ªæŒ‡ä»¤åœ¨ CPU çº§å®Œæˆ CAS æ“ä½œçš„ï¼Œä½†åœ¨å¤šå¤„ç†å™¨æƒ…å†µä¸‹å¿…é¡»ä½¿ç”¨`lock`æŒ‡ä»¤åŠ é”æ¥å®Œæˆã€‚å½“ç„¶ä¸åŒçš„æ“ä½œç³»ç»Ÿå’Œå¤„ç†å™¨çš„å®ç°ä¼šæœ‰æ‰€ä¸åŒï¼Œå¤§å®¶å¯ä»¥è‡ªè¡Œäº†è§£ã€‚\n\nå½“ç„¶ï¼ŒUnsafeç±»é‡Œé¢è¿˜æœ‰å…¶å®ƒæ–¹æ³•ç”¨äºä¸åŒçš„ç”¨é€”ã€‚æ¯”å¦‚æ”¯æŒçº¿ç¨‹æŒ‚èµ·å’Œæ¢å¤çš„`park`å’Œ`unpark`ï¼Œ LockSupportç±»åº•å±‚å°±æ˜¯è°ƒç”¨äº†è¿™ä¸¤ä¸ªæ–¹æ³•ã€‚è¿˜æœ‰æ”¯æŒåå°„æ“ä½œçš„`allocateInstance()`æ–¹æ³•ã€‚\n\n#### CAS ä¼šäº§ç”Ÿä»€ä¹ˆé—®é¢˜ï¼Ÿ\n\n1ã€**ABA é—®é¢˜**ï¼š\n\næ¯”å¦‚è¯´ä¸€ä¸ªçº¿ç¨‹ one ä»å†…å­˜ä½ç½® V ä¸­å–å‡º Aï¼Œè¿™æ—¶å€™å¦ä¸€ä¸ªçº¿ç¨‹ two ä¹Ÿä»å†…å­˜ä¸­å–å‡º Aï¼Œå¹¶ä¸” two è¿›è¡Œäº†ä¸€äº›æ“ä½œå˜æˆäº† Bï¼Œç„¶å two åˆå°† V ä½ç½®çš„æ•°æ®å˜æˆ Aï¼Œè¿™æ—¶å€™çº¿ç¨‹ one è¿›è¡Œ CAS æ“ä½œå‘ç°å†…å­˜ä¸­ä»ç„¶æ˜¯ Aï¼Œç„¶å one æ“ä½œæˆåŠŸã€‚å°½ç®¡çº¿ç¨‹ one çš„ CAS æ“ä½œæˆåŠŸï¼Œä½†å¯èƒ½å­˜åœ¨æ½œè—çš„é—®é¢˜ã€‚å¯ä»¥åœ¨å˜é‡ä¸ŠåŠ ä¸€ä¸ªç‰ˆæœ¬æˆ³ã€‚ä» Java1.5 å¼€å§‹ JDK çš„ atomic åŒ…é‡Œæä¾›äº†ä¸€ä¸ªç±» AtomicStampedReference æ¥è§£å†³ ABA é—®é¢˜ã€‚\n\n2ã€**å¾ªç¯æ—¶é—´é•¿å¼€é”€å¤§**ï¼š\n\nå¯¹äºèµ„æºç«äº‰ä¸¥é‡ï¼ˆçº¿ç¨‹å†²çªä¸¥é‡ï¼‰çš„æƒ…å†µï¼ŒCAS è‡ªæ—‹çš„æ¦‚ç‡ä¼šæ¯”è¾ƒå¤§ï¼Œä»è€Œæµªè´¹æ›´å¤šçš„ CPU èµ„æºï¼Œæ•ˆç‡ä½äº synchronizedã€‚\n\n3ã€**åªèƒ½ä¿è¯ä¸€ä¸ªå…±äº«å˜é‡çš„åŸå­æ“ä½œ**ï¼š\n\nå½“å¯¹ä¸€ä¸ªå…±äº«å˜é‡æ‰§è¡Œæ“ä½œæ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¾ªç¯ CAS çš„æ–¹å¼æ¥ä¿è¯åŸå­æ“ä½œï¼Œä½†æ˜¯**å¯¹å¤šä¸ªå…±äº«å˜é‡æ“ä½œæ—¶ï¼Œå¾ªç¯ CAS å°±æ— æ³•ä¿è¯æ“ä½œçš„åŸå­æ€§ï¼Œè¿™ä¸ªæ—¶å€™å°±å¯ä»¥ç”¨é”**ã€‚\n\n#### æ­»é”ä¸æ´»é”çš„åŒºåˆ«ï¼Œæ­»é”ä¸é¥¥é¥¿çš„åŒºåˆ«ï¼Ÿ\n\n> åŒºåˆ«ï¼šæ­»é”åŠ¨ä¸äº†äº†ï¼›æ´»é”ä¸€ç›´é‡å¤å°è¯•ã€å¤±è´¥ã€å°è¯•ã€å¤±è´¥ã€‚\n\næ­»é”ï¼šæ˜¯æŒ‡ä¸¤ä¸ªæˆ–ä¸¤ä¸ªä»¥ä¸Šçš„è¿›ç¨‹ï¼ˆæˆ–çº¿ç¨‹ï¼‰åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œå› äº‰å¤ºèµ„æºè€Œé€ æˆçš„ä¸€ç§äº’ç›¸ç­‰å¾…çš„ç°è±¡ï¼Œè‹¥æ— å¤–åŠ›ä½œç”¨ï¼Œå®ƒä»¬éƒ½å°†æ— æ³•æ¨è¿›ä¸‹å»ã€‚\n\næ´»é”ï¼šä»»åŠ¡æˆ–è€…æ‰§è¡Œè€…æ²¡æœ‰è¢«é˜»å¡ï¼Œç”±äºæŸäº›æ¡ä»¶æ²¡æœ‰æ»¡è¶³ï¼Œå¯¼è‡´**ä¸€ç›´é‡å¤å°è¯•ï¼Œå¤±è´¥ï¼Œå°è¯•ï¼Œå¤±è´¥**ã€‚\n\næ´»é”å’Œæ­»é”çš„åŒºåˆ«åœ¨äºï¼Œå¤„äºæ´»é”çš„å®ä½“æ˜¯åœ¨ä¸æ–­çš„æ”¹å˜çŠ¶æ€ï¼Œè¿™å°±æ˜¯æ‰€è°“çš„â€œæ´»â€ï¼Œ è€Œå¤„äºæ­»é”çš„å®ä½“è¡¨ç°ä¸ºç­‰å¾…ï¼›æ´»é”æœ‰å¯èƒ½è‡ªè¡Œè§£å¼€ï¼Œæ­»é”åˆ™ä¸èƒ½ã€‚\n\né¥¥é¥¿ï¼šä¸€ä¸ªæˆ–è€…å¤šä¸ªçº¿ç¨‹å› ä¸ºç§ç§åŸå› æ— æ³•è·å¾—æ‰€éœ€è¦çš„èµ„æºï¼Œå¯¼è‡´ä¸€ç›´æ— æ³•æ‰§è¡Œçš„çŠ¶æ€ã€‚\n\nJava ä¸­å¯¼è‡´é¥¥é¥¿çš„åŸå› ï¼šé«˜ä¼˜å…ˆçº§çº¿ç¨‹åå™¬æ‰€æœ‰çš„ä½ä¼˜å…ˆçº§çº¿ç¨‹çš„ CPU æ—¶é—´ã€‚\n\n### AQSè¯¦è§£\n\n#### AQS ä»‹ç»\n\nAQS çš„å…¨ç§°ä¸ºï¼ˆAbstractQueuedSynchronizerï¼‰ï¼ŒæŠ½è±¡é˜Ÿåˆ—åŒæ­¥å™¨ã€‚\n\nä½¿ç”¨ AQS èƒ½ç®€å•ä¸”é«˜æ•ˆåœ°æ„é€ å‡ºåº”ç”¨å¹¿æ³›çš„å¤§é‡çš„åŒæ­¥å™¨ï¼Œæ¯”å¦‚æˆ‘ä»¬æåˆ°çš„ReentrantLockï¼ŒSemaphoreï¼Œå…¶ä»–çš„è¯¸å¦‚ ReentrantReadWriteLockï¼ŒSynchronousQueueï¼ŒFutureTask ç­‰ç­‰çš†æ˜¯åŸºäº AQS çš„ã€‚å½“ç„¶ï¼Œæˆ‘ä»¬è‡ªå·±ä¹Ÿèƒ½åˆ©ç”¨ AQS éå¸¸è½»æ¾å®¹æ˜“åœ°æ„é€ å‡ºç¬¦åˆæˆ‘ä»¬è‡ªå·±éœ€æ±‚çš„åŒæ­¥å™¨ã€‚\n\n#### AQS åŸç†åˆ†æ\n\n**å¦‚æœè¢«è¯·æ±‚çš„å…±äº«èµ„æºç©ºé—²ï¼Œåˆ™å°†å½“å‰è¯·æ±‚èµ„æºçš„çº¿ç¨‹è®¾ç½®ä¸ºæœ‰æ•ˆçš„å·¥ä½œçº¿ç¨‹ï¼Œå¹¶ä¸”å°†å…±äº«èµ„æºè®¾ç½®ä¸ºé”å®šçŠ¶æ€ã€‚\nå¦‚æœè¢«è¯·æ±‚çš„å…±äº«èµ„æºè¢«å ç”¨ï¼Œé‚£ä¹ˆå°±ä½¿ç”¨ CLH é˜Ÿåˆ—ï¼Œå°†æš‚æ—¶è·å–ä¸åˆ°é”çš„çº¿ç¨‹åŠ å…¥åˆ°é˜Ÿåˆ—ä¸­ã€‚**\n\n> CLH(Craig,Landin,and Hagersten)é˜Ÿåˆ—æ˜¯ä¸€ä¸ªè™šæ‹Ÿçš„åŒå‘é˜Ÿåˆ—ï¼ˆè™šæ‹Ÿçš„åŒå‘é˜Ÿåˆ—å³ä¸å­˜åœ¨é˜Ÿåˆ—å®ä¾‹ï¼Œä»…å­˜åœ¨ç»“ç‚¹ä¹‹é—´çš„å…³è”å…³ç³»ï¼‰ã€‚AQS æ˜¯å°†æ¯æ¡è¯·æ±‚å…±äº«èµ„æºçš„çº¿ç¨‹å°è£…æˆä¸€ä¸ª CLH é˜Ÿåˆ—çš„ä¸€ä¸ªç»“ç‚¹ï¼ˆNodeï¼‰æ¥å®ç°é”çš„åˆ†é…ã€‚\n\nçœ‹ä¸ªAQS(AbstractQueuedSynchronizer)åŸç†å›¾ï¼š\n\n![AQSåŸç†å›¾](https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/TyporaNotes11474088-c906e727d699fa9c.png)\n\nAQSä½¿ç”¨ä¸€ä¸ª volatile int ç±»å‹çš„æˆå‘˜å˜é‡ state æ¥è¡¨ç¤ºåŒæ­¥çŠ¶æ€ï¼Œé€šè¿‡å†…ç½®çš„ CLH é˜Ÿåˆ—æ¥å®Œæˆè·å–èµ„æºçº¿ç¨‹çš„æ’é˜Ÿå·¥ä½œã€‚AQSä½¿ç”¨ CAS å¯¹è¯¥åŒæ­¥çŠ¶æ€è¿›è¡ŒåŸå­æ“ä½œå®ç°å¯¹å…¶å€¼çš„ä¿®æ”¹ã€‚\n\n```java\nprivate volatile int state;\t// å…±äº«å˜é‡ï¼Œä½¿ç”¨volatileä¿®é¥°ä¿è¯çº¿ç¨‹å¯è§æ€§\n```\n\nçŠ¶æ€ä¿¡æ¯é€šè¿‡ protected ç±»å‹çš„ getStateï¼ŒsetStateï¼ŒcompareAndSetStateè¿›è¡Œæ“ä½œ\n\n```java\n// è¿”å›åŒæ­¥çŠ¶æ€çš„å½“å‰å€¼\nprotected final int getState() {  \n    return state;\n}\n// è®¾ç½®åŒæ­¥çŠ¶æ€çš„å€¼\nprotected final void setState(int newState) { \n    state = newState;\n}\n// åŸå­åœ°ï¼ˆCASæ“ä½œï¼‰å°†åŒæ­¥çŠ¶æ€å€¼è®¾ç½®ä¸ºç»™å®šå€¼updateå¦‚æœå½“å‰åŒæ­¥çŠ¶æ€çš„å€¼ç­‰äºexpectï¼ˆæœŸæœ›å€¼ï¼‰\nprotected final boolean compareAndSetState(int expect, int update) {\n    return unsafe.compareAndSwapInt(this, stateOffset, expect, update);\n}\n```\n\n**AQS å¯¹èµ„æºçš„å…±äº«æ–¹å¼**\n\nAQSå®šä¹‰ä¸¤ç§èµ„æºå…±äº«æ–¹å¼\n\n- **Exclusive**ï¼ˆç‹¬å ï¼‰ï¼šåªæœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½æ‰§è¡Œï¼Œå¦‚ ReentrantLockã€‚åˆå¯åˆ†ä¸ºå…¬å¹³é”å’Œéå…¬å¹³é”ï¼š\n\t- å…¬å¹³é”ï¼šæŒ‰ç…§çº¿ç¨‹åœ¨é˜Ÿåˆ—ä¸­çš„æ’é˜Ÿé¡ºåºï¼Œå…ˆåˆ°è€…å…ˆæ‹¿åˆ°é”\n\t- éå…¬å¹³é”ï¼šå½“çº¿ç¨‹è¦è·å–é”æ—¶ï¼Œæ— è§†é˜Ÿåˆ—é¡ºåºç›´æ¥å»æŠ¢é”ï¼Œè°æŠ¢åˆ°å°±æ˜¯è°çš„\n- **Share**ï¼ˆå…±äº«ï¼‰ï¼šå¤šä¸ªçº¿ç¨‹å¯åŒæ—¶æ‰§è¡Œï¼Œå¦‚ Semaphore/CountDownLatchã€‚Semaphoreã€CountDownLatchã€ CyclicBarrierã€ReadWriteLock æˆ‘ä»¬éƒ½ä¼šåœ¨åé¢è®²åˆ°ã€‚\n\n**AQSåº•å±‚ä½¿ç”¨äº†æ¨¡æ¿æ–¹æ³•æ¨¡å¼**\n\nåŒæ­¥å™¨çš„è®¾è®¡æ˜¯åŸºäºæ¨¡æ¿æ–¹æ³•æ¨¡å¼çš„ï¼Œå¦‚æœéœ€è¦è‡ªå®šä¹‰åŒæ­¥å™¨ï¼ˆ**æ¨¡æ¿æ–¹æ³•æ¨¡å¼**å¾ˆç»å…¸çš„ä¸€ä¸ªåº”ç”¨ï¼‰ï¼š\n\n1. ä½¿ç”¨è€…ç»§æ‰¿ AQS å¹¶é‡å†™æŒ‡å®šçš„æ–¹æ³•ã€‚ï¼ˆå¯¹å…±äº«èµ„æº state çš„è·å–å’Œé‡Šæ”¾ï¼‰\n2. è°ƒç”¨ AQS çš„æ¨¡æ¿æ–¹æ³•ï¼Œä¼šè¿›ä¸€æ­¥è°ƒç”¨ä½¿ç”¨è€…é‡å†™çš„æ–¹æ³•ã€‚\n\n**AQSä½¿ç”¨äº†æ¨¡æ¿æ–¹æ³•æ¨¡å¼ï¼Œè‡ªå®šä¹‰åŒæ­¥å™¨æ—¶éœ€è¦é‡å†™ä¸‹é¢å‡ ä¸ªAQSæä¾›çš„æ¨¡æ¿æ–¹æ³•ï¼š**\n\n```java\nisHeldExclusively()\t// è¯¥çº¿ç¨‹æ˜¯å¦æ­£åœ¨ç‹¬å èµ„æºã€‚åªæœ‰ç”¨åˆ°conditionæ‰éœ€è¦å»å®ç°å®ƒã€‚\ntryAcquire(int)\t// ç‹¬å æ–¹å¼ã€‚å°è¯•è·å–èµ„æºï¼ŒæˆåŠŸåˆ™è¿”å›trueï¼Œå¤±è´¥åˆ™è¿”å›falseã€‚\ntryRelease(int)\t// ç‹¬å æ–¹å¼ã€‚å°è¯•é‡Šæ”¾èµ„æºï¼ŒæˆåŠŸåˆ™è¿”å›trueï¼Œå¤±è´¥åˆ™è¿”å›falseã€‚\ntryAcquireShared(int)\t// å…±äº«æ–¹å¼ã€‚å°è¯•è·å–èµ„æºã€‚è´Ÿæ•°è¡¨ç¤ºå¤±è´¥ï¼›0è¡¨ç¤ºæˆåŠŸï¼Œä½†æ²¡æœ‰å‰©ä½™å¯ç”¨èµ„æºï¼›æ­£æ•°è¡¨ç¤ºæˆåŠŸï¼Œä¸”æœ‰å‰©ä½™èµ„æºã€‚\ntryReleaseShared(int)\t// å…±äº«æ–¹å¼ã€‚å°è¯•é‡Šæ”¾èµ„æºï¼ŒæˆåŠŸåˆ™è¿”å›trueï¼Œå¤±è´¥åˆ™è¿”å›falseã€‚\n```\n\nä»¥ ReentrantLock ä¸ºä¾‹ï¼Œstate åˆå§‹åŒ–ä¸º0ï¼Œè¡¨ç¤ºæœªé”å®šçŠ¶æ€ã€‚A çº¿ç¨‹ lock() æ—¶ï¼Œä¼šè°ƒç”¨ tryAcquire() ç‹¬å è¯¥é”å¹¶å°† state+1ã€‚æ­¤åï¼Œå…¶ä»–çº¿ç¨‹å† tryAcquire() æ—¶å°±ä¼šå¤±è´¥ï¼Œç›´åˆ° A çº¿ç¨‹ unlock( )åˆ° state=0ï¼ˆå³é‡Šæ”¾é”ï¼‰ä¸ºæ­¢ï¼Œå…¶å®ƒçº¿ç¨‹æ‰æœ‰æœºä¼šè·å–è¯¥é”ã€‚å½“ç„¶ï¼Œé‡Šæ”¾é”ä¹‹å‰ï¼ŒA çº¿ç¨‹è‡ªå·±æ˜¯å¯ä»¥é‡å¤è·å–æ­¤é”çš„ï¼ˆstateä¼šç´¯åŠ ï¼‰ï¼Œè¿™å°±æ˜¯å¯é‡å…¥çš„æ¦‚å¿µã€‚\n\nä»¥ CountDownLatch ä»¥ä¾‹ï¼Œä»»åŠ¡åˆ†ä¸º N ä¸ªå­çº¿ç¨‹å»æ‰§è¡Œï¼Œstate ä¹Ÿåˆå§‹åŒ–ä¸º Nï¼ˆæ³¨æ„Nè¦ä¸çº¿ç¨‹ä¸ªæ•°ä¸€è‡´ï¼‰ã€‚è¿™ N ä¸ªå­çº¿ç¨‹æ˜¯å¹¶è¡Œæ‰§è¡Œçš„ï¼Œæ¯ä¸ªå­çº¿ç¨‹æ‰§è¡Œå®Œå countDown() ä¸€æ¬¡ï¼Œstate ä¼š CAS å‡ 1ã€‚ç­‰åˆ°æ‰€æœ‰å­çº¿ç¨‹éƒ½æ‰§è¡Œå®Œåï¼ˆå³state=0ï¼‰ï¼Œä¼š unpark() ä¸»è°ƒç”¨çº¿ç¨‹ï¼Œç„¶åä¸»è°ƒç”¨çº¿ç¨‹å°±ä¼šä» await() å‡½æ•°è¿”å›ï¼Œç»§ç»­åç»­åŠ¨ä½œã€‚\n\nä¸€èˆ¬æ¥è¯´ï¼Œè‡ªå®šä¹‰åŒæ­¥å™¨è¦ä¹ˆæ˜¯ç‹¬å æ–¹æ³•ï¼Œè¦ä¹ˆæ˜¯å…±äº«æ–¹å¼ï¼Œä»–ä»¬ä¹Ÿåªéœ€å®ç°`tryAcquire-tryRelease`ã€`tryAcquireShared-tryReleaseShared`ä¸­çš„ä¸€ç§å³å¯ã€‚ä½†AQSä¹Ÿæ”¯æŒè‡ªå®šä¹‰åŒæ­¥å™¨åŒæ—¶å®ç°ç‹¬å å’Œå…±äº«ä¸¤ç§æ–¹å¼ï¼Œå¦‚`ReentrantReadWriteLock`ã€‚\n\n### è¯»å†™é”\n\né¦–å…ˆæ˜ç¡®ä¸€ä¸‹ï¼Œä¸æ˜¯è¯´ ReentrantLock ä¸å¥½ï¼Œåªæ˜¯ ReentrantLock æŸäº›æ—¶å€™æœ‰å±€é™ã€‚å¦‚æœä½¿ç”¨ ReentrantLockï¼Œå¯èƒ½æœ¬èº«æ˜¯ä¸ºäº†é˜²æ­¢çº¿ç¨‹ A åœ¨å†™æ•°æ®ã€çº¿ç¨‹ B åœ¨è¯»æ•°æ®é€ æˆçš„æ•°æ®ä¸ä¸€è‡´ï¼Œä½†è¿™æ ·ï¼Œå¦‚æœçº¿ç¨‹ C åœ¨è¯»æ•°æ®ã€çº¿ç¨‹ D ä¹Ÿåœ¨è¯»æ•°æ®ï¼Œè¯»æ•°æ®æ˜¯ä¸ä¼šæ”¹å˜æ•°æ®çš„ï¼Œæ²¡æœ‰å¿…è¦åŠ é”ï¼Œä½†æ˜¯è¿˜æ˜¯åŠ é”äº†ï¼Œé™ä½äº†ç¨‹åºçš„æ€§èƒ½ã€‚å› ä¸ºè¿™ä¸ªï¼Œæ‰è¯ç”Ÿäº†è¯»å†™é” ReadWriteLockã€‚\n\nReadWriteLock æ˜¯ä¸€ä¸ªè¯»å†™é”æ¥å£ï¼Œè¯»å†™é”æ˜¯ç”¨æ¥æå‡å¹¶å‘ç¨‹åºæ€§èƒ½çš„é”åˆ†ç¦»æŠ€æœ¯ï¼ŒReentrantReadWriteLock æ˜¯ ReadWriteLock æ¥å£çš„ä¸€ä¸ªå…·ä½“å®ç°ï¼Œ**å®ç°äº†è¯»å†™çš„åˆ†ç¦»ï¼Œè¯»é”æ˜¯å…±äº«çš„ï¼Œå†™é”æ˜¯ç‹¬å çš„**ï¼Œè¯»å’Œè¯»ä¹‹é—´ä¸ä¼šäº’æ–¥ï¼Œè¯»å’Œå†™ã€å†™å’Œè¯»ã€å†™å’Œå†™ä¹‹é—´æ‰ä¼šäº’æ–¥ï¼Œæå‡äº†è¯»å†™çš„æ€§èƒ½ã€‚\n\n## å¹¶å‘å®¹å™¨\n\n### ConcurrentHashMap\n\n#### ä»€ä¹ˆæ˜¯ConcurrentHashMapï¼Ÿ\n\nConcurrentHashMapæ˜¯Javaä¸­çš„ä¸€ä¸ª**çº¿ç¨‹å®‰å…¨ä¸”é«˜æ•ˆçš„HashMapå®ç°**ã€‚\n\né‚£ä¹ˆå®ƒåˆ°åº•æ˜¯å¦‚ä½•å®ç°çº¿ç¨‹å®‰å…¨çš„ï¼Ÿ\n\nJDK 1.6ç‰ˆæœ¬å…³é”®è¦ç´ ï¼š\n\n- segment ç»§æ‰¿äº† ReentrantLock å……å½“é”çš„è§’è‰²ï¼Œä¸ºæ¯ä¸€ä¸ª segment æä¾›äº†çº¿ç¨‹å®‰å…¨çš„ä¿éšœï¼›\n- segment ç»´æŠ¤äº†å“ˆå¸Œæ•£åˆ—è¡¨çš„è‹¥å¹²ä¸ªæ¡¶ï¼Œæ¯ä¸ªæ¡¶ç”± HashEntry æ„æˆçš„é“¾è¡¨ã€‚\n\nJDK1.8åï¼ŒConcurrentHashMapæŠ›å¼ƒäº†åŸæœ‰çš„ Segment åˆ†æ®µé”ï¼Œè€Œ**é‡‡ç”¨äº† CAS + synchronized æ¥ä¿è¯å¹¶å‘å®‰å…¨æ€§**ã€‚\n\næ’å…¥å…ƒç´ è¿‡ç¨‹ï¼š\n\nå¦‚æœç›¸åº”ä½ç½®çš„Nodeè¿˜æ²¡æœ‰åˆå§‹åŒ–ï¼Œåˆ™è°ƒç”¨CASæ’å…¥ç›¸åº”çš„æ•°æ®ï¼›\n\nå¦‚æœç›¸åº”ä½ç½®çš„Nodeä¸ä¸ºç©ºï¼Œåˆ™å¯¹è¯¥èŠ‚ç‚¹åŠ synchronizedé”è¿›è¡Œæ’å…¥æˆ–æ›´æ–°æ“ä½œã€‚\n\n### CopyOnWriteArrayList\n\nCopyOnWriteå®¹å™¨å³**å†™æ—¶å¤åˆ¶çš„å®¹å™¨**ï¼Œå½“æˆ‘ä»¬å¾€ä¸€ä¸ªå®¹å™¨ä¸­æ·»åŠ å…ƒç´ çš„æ—¶å€™ï¼Œä¸ç›´æ¥å¾€å®¹å™¨ä¸­æ·»åŠ ï¼Œè€Œæ˜¯å°†å½“å‰å®¹å™¨è¿›è¡Œ copyï¼Œå¤åˆ¶å‡ºæ¥ä¸€ä¸ªæ–°çš„å®¹å™¨ï¼Œç„¶åå‘æ–°å®¹å™¨ä¸­æ·»åŠ æˆ‘ä»¬éœ€è¦çš„å…ƒç´ ï¼Œæœ€åå°†åŸå®¹å™¨çš„å¼•ç”¨æŒ‡å‘æ–°å®¹å™¨ã€‚\n\n**CopyOnWriteArrayList çš„ä½¿ç”¨åœºæ™¯**\n\né€šè¿‡æºç åˆ†æï¼Œæˆ‘ä»¬çœ‹å‡ºå®ƒçš„ä¼˜ç¼ºç‚¹æ¯”è¾ƒæ˜æ˜¾ï¼Œæ‰€ä»¥ä½¿ç”¨åœºæ™¯ä¹Ÿå°±æ¯”è¾ƒæ˜æ˜¾ã€‚å°±æ˜¯åˆé€‚è¯»å¤šå†™å°‘çš„åœºæ™¯ã€‚\n\n**CopyOnWriteArrayList çš„ç¼ºç‚¹**\n\n1. ç”±äºå†™æ“ä½œçš„æ—¶å€™ï¼Œéœ€è¦æ‹·è´æ•°ç»„ï¼Œä¼šæ¶ˆè€—å†…å­˜ï¼Œå¦‚æœåŸæ•°ç»„çš„å†…å®¹æ¯”è¾ƒå¤šçš„æƒ…å†µä¸‹ï¼Œå¯èƒ½å¯¼è‡´ young gc æˆ–è€… full gcã€‚\n2. **ä¸èƒ½ç”¨äºå®æ—¶è¯»çš„åœºæ™¯**ï¼Œåƒæ‹·è´æ•°ç»„ã€æ–°å¢å…ƒç´ éƒ½éœ€è¦æ—¶é—´ï¼Œæ‰€ä»¥è°ƒç”¨ä¸€ä¸ª set æ“ä½œåï¼Œ**è¯»å–åˆ°æ•°æ®å¯èƒ½è¿˜æ˜¯æ—§çš„**ï¼Œè™½ç„¶ CopyOnWriteArrayList èƒ½åšåˆ°æœ€ç»ˆä¸€è‡´æ€§,ä½†æ˜¯è¿˜æ˜¯æ²¡æ³•æ»¡è¶³å®æ—¶æ€§è¦æ±‚ã€‚\n\n### ThreadLocal\n\n#### ThreadLocalçš„æ•°æ®ç»“æ„\n\n<img src=\"https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/TyporaNotesthreadlocal%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84.a0bfadf8.png\" alt=\"ThreadLocalæ•°æ®ç»“æ„\" style=\"zoom: 67%;\" />\n\næ¯ä¸ªçº¿ç¨‹ Thread ä¸­æœ‰ä¸€ä¸ªç±»å‹ä¸º ThreadLocal.ThreadLocalMap çš„å®ä¾‹å˜é‡ threadLocalsï¼Œè¯¥å®ä¾‹å˜é‡ä¸­æ¯ä¸ª entryä¸º <threadLocalçš„å¼±å¼•ç”¨ï¼Œvalueä¸ºå¼ºå¼•ç”¨> çš„æ˜ å°„ï¼Œæ¯ä¸ªçº¿ç¨‹å¾€ threadLocal ä¸­å¯¹ value è¿›è¡Œæ“ä½œæ—¶ï¼Œéƒ½æ˜¯åœ¨è‡ªå·±çº¿ç¨‹ç§æœ‰çš„ threadLocalMap ä¸­è¿›è¡Œæ“ä½œï¼Œä»è€Œè¾¾åˆ°çº¿ç¨‹éš”ç¦»ã€‚\n\n```java\npublic class ThreadLocalDemo {\n    // private static final ThreadLocal<Integer> threadLocal = new ThreadLocal<Integer>(){\n    //     @Override\n    //     protected Integer initialValue() {\n    //         return 0;\n    //     }\n    // };\n\n    private static final ThreadLocal<Integer> threadLocal = ThreadLocal.withInitial(() -> 0);\n\n    public static void main(String[] args) {\n        for (int i = 0; i < 2; i++) {\n            new Thread(() -> {\n                for (int j = 0; j < 5; j++) {\n                    Integer val = threadLocal.get();\n                    threadLocal.set(++val);\n                    System.out.println(Thread.currentThread().getName() + \" ---- \" + val);\n                }\n            }, \"Thread-\" + i).start();\n        }\n\n        try {\n            Thread.sleep(10);\n        } catch (InterruptedException e) {\n            e.printStackTrace();\n        }\n\n        System.out.println(Thread.currentThread().getName() + \" ---- \" + threadLocal.get());\n    }\n}\n```\n\næ‰“å°ç»“æœï¼šå¯åŠ¨äº† 2 ä¸ªçº¿ç¨‹ï¼Œæ¯ä¸ªçº¿ç¨‹æœ€åéƒ½æ‰“å°åˆ° 5ï¼Œ æœ€åthreadLocal.getä»ç„¶æ˜¯0\n\n```java\nThread-1 ---- 1\nThread-0 ---- 1\nThread-1 ---- 2\nThread-0 ---- 2\nThread-1 ---- 3\nThread-1 ---- 4\nThread-1 ---- 5\nThread-0 ---- 3\nThread-0 ---- 4\nThread-0 ---- 5\nmain ---- 0\n```\n\n### ThreadLocalå†…å­˜æ³„æ¼\n\n#### ThreadLocalé€ æˆå†…å­˜æ³„æ¼çš„åŸå› ï¼Ÿ\n\nThreadLocalMap ä¸­ä½¿ç”¨çš„ key ä¸º ThreadLocal çš„å¼±å¼•ç”¨,è€Œ value æ˜¯å¼ºå¼•ç”¨ã€‚æ‰€ä»¥ï¼Œå¦‚æœ ThreadLocal æ²¡æœ‰è¢«å¤–éƒ¨å¼ºå¼•ç”¨çš„æƒ…å†µä¸‹ï¼Œåœ¨åƒåœ¾å›æ”¶çš„æ—¶å€™ï¼Œkey ä¼šè¢«æ¸…ç†æ‰ï¼Œè€Œ value ä¸ä¼šè¢«æ¸…ç†æ‰ã€‚è¿™æ ·ä¸€æ¥ï¼ŒThreadLocalMap ä¸­å°±ä¼šå‡ºç° key ä¸º null çš„ Entryã€‚å‡å¦‚æˆ‘ä»¬ä¸åšä»»ä½•æªæ–½çš„è¯ï¼Œvalue æ°¸è¿œæ— æ³•è¢« GC å›æ”¶ï¼Œè¿™ä¸ªæ—¶å€™å°±å¯èƒ½ä¼šäº§ç”Ÿå†…å­˜æ³„éœ²ã€‚ThreadLocalMap å®ç°ä¸­å·²ç»è€ƒè™‘äº†è¿™ç§æƒ…å†µï¼Œæ¯æ¬¡ä½¿ç”¨å®Œ ThreadLocal åï¼Œéƒ½è°ƒç”¨å®ƒçš„remove()æ–¹æ³•ï¼Œæ¸…ç†æ‰ key ä¸º null çš„è®°å½•ã€‚\n\n### BlockingQueue\n\né˜»å¡é˜Ÿåˆ—ï¼ˆBlockingQueueï¼‰æ˜¯ä¸€ä¸ªæ”¯æŒä¸¤ä¸ªé™„åŠ æ“ä½œçš„é˜Ÿåˆ—ã€‚\n\nåœ¨é˜Ÿåˆ—ä¸ºç©ºæ—¶ï¼Œè·å–å…ƒç´ çš„çº¿ç¨‹ä¼šç­‰å¾…é˜Ÿåˆ—å˜ä¸ºéç©ºã€‚å½“é˜Ÿåˆ—æ»¡æ—¶ï¼Œå­˜å‚¨å…ƒç´ çš„çº¿ç¨‹ä¼šç­‰å¾…é˜Ÿåˆ—å¯ç”¨ã€‚\n\né˜»å¡é˜Ÿåˆ—å¸¸ç”¨äºç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…çš„åœºæ™¯ï¼Œç”Ÿäº§è€…æ˜¯å¾€é˜Ÿåˆ—é‡Œæ·»åŠ å…ƒç´ çš„çº¿ç¨‹ï¼Œæ¶ˆè´¹è€…æ˜¯ä»é˜Ÿåˆ—é‡Œæ‹¿å…ƒç´ çš„çº¿ç¨‹ã€‚é˜»å¡é˜Ÿåˆ—å°±æ˜¯ç”Ÿäº§è€…å­˜æ”¾å…ƒç´ çš„å®¹å™¨ï¼Œè€Œæ¶ˆè´¹è€…ä¹Ÿåªä»å®¹å™¨é‡Œæ‹¿å…ƒç´ ã€‚\n\nJDK7 æä¾›äº† 7 ä¸ªé˜»å¡é˜Ÿåˆ—ã€‚åˆ†åˆ«æ˜¯ï¼š\n\n> ArrayBlockingQueue ï¼šä¸€ä¸ªç”±æ•°ç»„ç»“æ„ç»„æˆçš„æœ‰ç•Œé˜»å¡é˜Ÿåˆ—ã€‚\n> LinkedBlockingQueue ï¼šä¸€ä¸ªç”±é“¾è¡¨ç»“æ„ç»„æˆçš„æœ‰ç•Œé˜»å¡é˜Ÿåˆ—ã€‚\n> PriorityBlockingQueue ï¼šä¸€ä¸ªæ”¯æŒä¼˜å…ˆçº§æ’åºçš„æ— ç•Œé˜»å¡é˜Ÿåˆ—ã€‚\n> DelayQueueï¼šä¸€ä¸ªä½¿ç”¨ä¼˜å…ˆçº§é˜Ÿåˆ—å®ç°çš„æ— ç•Œé˜»å¡é˜Ÿåˆ—ã€‚\n> SynchronousQueueï¼šä¸€ä¸ªä¸å­˜å‚¨å…ƒç´ çš„é˜»å¡é˜Ÿåˆ—ã€‚\n> LinkedTransferQueueï¼šä¸€ä¸ªç”±é“¾è¡¨ç»“æ„ç»„æˆçš„æ— ç•Œé˜»å¡é˜Ÿåˆ—ã€‚\n> LinkedBlockingDequeï¼šä¸€ä¸ªç”±é“¾è¡¨ç»“æ„ç»„æˆçš„åŒå‘é˜»å¡é˜Ÿåˆ—ã€‚\n\nJava 5 ä¹‹å‰å®ç°åŒæ­¥å­˜å–æ—¶ï¼Œå¯ä»¥ä½¿ç”¨æ™®é€šçš„ä¸€ä¸ªé›†åˆï¼Œç„¶ååœ¨ä½¿ç”¨çº¿ç¨‹çš„åä½œå’Œçº¿ç¨‹åŒæ­¥å¯ä»¥å®ç°ç”Ÿäº§è€…ï¼Œæ¶ˆè´¹è€…æ¨¡å¼ï¼Œä¸»è¦çš„æŠ€æœ¯å°±æ˜¯ç”¨å¥½ waitï¼Œnotifyï¼ŒnotifyAllï¼Œsynchronized è¿™äº›å…³é”®å­—ã€‚è€Œåœ¨ Java 5 ä¹‹åï¼Œå¯ä»¥ä½¿ç”¨é˜»å¡é˜Ÿåˆ—æ¥å®ç°ï¼Œæ­¤æ–¹å¼å¤§å¤§ç®€å°‘äº†ä»£ç é‡ï¼Œä½¿å¾—å¤šçº¿ç¨‹ç¼–ç¨‹æ›´åŠ å®¹æ˜“ï¼Œå®‰å…¨æ–¹é¢ä¹Ÿæœ‰ä¿éšœã€‚\n\nBlockingQueue æ¥å£æ˜¯ Queue çš„å­æ¥å£ï¼Œå®ƒçš„ä¸»è¦ç”¨é€”å¹¶ä¸æ˜¯ä½œä¸ºå®¹å™¨ï¼Œè€Œæ˜¯ä½œä¸ºçº¿ç¨‹åŒæ­¥çš„çš„å·¥å…·ï¼Œå› æ­¤ä»–å…·æœ‰ä¸€ä¸ªå¾ˆæ˜æ˜¾çš„ç‰¹æ€§ï¼Œ**å½“ç”Ÿäº§è€…çº¿ç¨‹è¯•å›¾å‘ BlockingQueue æ”¾å…¥å…ƒç´ æ—¶ï¼Œå¦‚æœé˜Ÿåˆ—å·²æ»¡ï¼Œåˆ™çº¿ç¨‹è¢«é˜»å¡ï¼Œå½“æ¶ˆè´¹è€…çº¿ç¨‹è¯•å›¾ä»ä¸­å–å‡ºä¸€ä¸ªå…ƒç´ æ—¶ï¼Œå¦‚æœé˜Ÿåˆ—ä¸ºç©ºï¼Œåˆ™è¯¥çº¿ç¨‹ä¼šè¢«é˜»å¡**ï¼Œæ­£æ˜¯å› ä¸ºå®ƒæ‰€å…·æœ‰è¿™ä¸ªç‰¹æ€§ï¼Œæ‰€ä»¥åœ¨ç¨‹åºä¸­å¤šä¸ªçº¿ç¨‹äº¤æ›¿å‘ BlockingQueue ä¸­æ”¾å…¥å…ƒç´ ï¼Œå–å‡ºå…ƒç´ ï¼Œå®ƒå¯ä»¥å¾ˆå¥½çš„æ§åˆ¶çº¿ç¨‹ä¹‹é—´çš„é€šä¿¡ã€‚\n\n## çº¿ç¨‹æ± \n\n### Executors åˆ›å»ºå››ç§å¸¸è§çº¿ç¨‹æ± \n\n#### ä»€ä¹ˆæ˜¯çº¿ç¨‹æ± ï¼Ÿæœ‰å“ªå‡ ç§åˆ›å»ºæ–¹å¼ï¼Ÿ\n\n> æ± åŒ–æŠ€æœ¯çš„æ€æƒ³ä¸»è¦æ˜¯ä¸ºäº†å‡å°‘æ¯æ¬¡è·å–èµ„æºçš„æ¶ˆè€—ï¼Œæé«˜å¯¹èµ„æºçš„åˆ©ç”¨ç‡ã€‚\n\nåœ¨é¢å‘å¯¹è±¡ç¼–ç¨‹ä¸­ï¼Œåˆ›å»ºå’Œé”€æ¯å¯¹è±¡æ˜¯å¾ˆè´¹æ—¶é—´çš„ï¼Œå› ä¸ºåˆ›å»ºä¸€ä¸ªå¯¹è±¡è¦è·å–å†…å­˜èµ„æºæˆ–è€…å…¶å®ƒæ›´å¤šèµ„æºã€‚åœ¨ Java ä¸­æ›´æ˜¯å¦‚æ­¤ï¼Œè™šæ‹Ÿæœºå°†è¯•å›¾è·Ÿè¸ªæ¯ä¸€ä¸ªå¯¹è±¡ï¼Œä»¥ä¾¿èƒ½å¤Ÿåœ¨å¯¹è±¡é”€æ¯åè¿›è¡Œåƒåœ¾å›æ”¶ã€‚æ‰€ä»¥æé«˜æœåŠ¡ç¨‹åºæ•ˆç‡çš„ä¸€ä¸ªæ‰‹æ®µå°±æ˜¯**å°½å¯èƒ½å‡å°‘åˆ›å»ºå’Œé”€æ¯å¯¹è±¡çš„æ¬¡æ•°**ï¼Œç‰¹åˆ«æ˜¯ä¸€äº›å¾ˆè€—èµ„æºçš„å¯¹è±¡åˆ›å»ºå’Œé”€æ¯ï¼Œè¿™å°±æ˜¯â€æ± åŒ–èµ„æºâ€æŠ€æœ¯äº§ç”Ÿçš„åŸå› ã€‚\n\nçº¿ç¨‹æ± é¡¾åæ€ä¹‰å°±æ˜¯äº‹å…ˆåˆ›å»ºè‹¥å¹²ä¸ªå¯æ‰§è¡Œçš„çº¿ç¨‹æ”¾å…¥ä¸€ä¸ªæ± ï¼ˆå®¹å™¨ï¼‰ä¸­ï¼Œéœ€è¦çš„æ—¶å€™ä»æ± ä¸­è·å–çº¿ç¨‹ä¸ç”¨è‡ªè¡Œåˆ›å»ºï¼Œä½¿ç”¨å®Œæ¯•ä¸éœ€è¦é”€æ¯çº¿ç¨‹è€Œæ˜¯æ”¾å›æ± ä¸­ï¼Œä»è€Œå‡å°‘åˆ›å»ºå’Œé”€æ¯çº¿ç¨‹å¯¹è±¡çš„å¼€é”€ã€‚Java 5+ä¸­çš„ Executor æ¥å£å®šä¹‰ä¸€ä¸ªæ‰§è¡Œçº¿ç¨‹çš„å·¥å…·ã€‚å®ƒçš„å­ç±»å‹å³çº¿ç¨‹æ± æ¥å£æ˜¯ ExecutorServiceã€‚è¦é…ç½®ä¸€ä¸ªçº¿ç¨‹æ± æ˜¯æ¯”è¾ƒå¤æ‚çš„ï¼Œå°¤å…¶æ˜¯å¯¹äºçº¿ç¨‹æ± çš„åŸç†ä¸æ˜¯å¾ˆæ¸…æ¥šçš„æƒ…å†µä¸‹ï¼Œå› æ­¤åœ¨å·¥å…·ç±» Executors é¢æä¾›äº†ä¸€äº›é™æ€å·¥å‚æ–¹æ³•ï¼Œç”Ÿæˆä¸€äº›å¸¸ç”¨çš„çº¿ç¨‹æ± ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š\n\nï¼ˆ1ï¼‰Executors.newSingleThreadExecutorï¼š`1, 1, new LinkedBlockingQueue`ã€‚æ‰€æœ‰ä»»åŠ¡æŒ‰ç…§**å…ˆæ¥å…ˆæ‰§è¡Œ**çš„é¡ºåºæ‰§è¡Œã€‚å¦‚æœè¿™ä¸ªå”¯ä¸€çš„çº¿ç¨‹ä¸ç©ºé—²ï¼Œé‚£ä¹ˆæ–°æ¥çš„ä»»åŠ¡ä¼šå­˜å‚¨åœ¨ä»»åŠ¡é˜Ÿåˆ—é‡Œç­‰å¾…æ‰§è¡Œã€‚ï¼ˆç”±äºé˜»å¡é˜Ÿåˆ—é»˜è®¤å¤§å°ä¸ºInteger.MAX_VALUEï¼Œå› æ­¤å¯èƒ½OOMï¼‰\n\nï¼ˆ2ï¼‰Executors.newFixedThreadPoolï¼š`nCoreThreads, nCoreThreads, new LinkedBlockingQueue`ï¼Œæ‰€ä»¥åªèƒ½åˆ›å»ºæ ¸å¿ƒçº¿ç¨‹ï¼Œä¸èƒ½åˆ›å»ºéæ ¸å¿ƒçº¿ç¨‹ã€‚å› ä¸º LinkedBlockingQueue çš„é»˜è®¤å¤§å°æ˜¯ Integer.MAX_VALUEï¼Œæ•…å¦‚æœæ ¸å¿ƒçº¿ç¨‹ç©ºé—²ï¼Œåˆ™äº¤ç»™æ ¸å¿ƒçº¿ç¨‹å¤„ç†ï¼›å¦‚æœæ ¸å¿ƒçº¿ç¨‹ä¸ç©ºé—²ï¼Œåˆ™å…¥åˆ—ç­‰å¾…ï¼Œç›´åˆ°æ ¸å¿ƒçº¿ç¨‹ç©ºé—²ã€‚ï¼ˆç”±äºé˜»å¡é˜Ÿåˆ—é»˜è®¤å¤§å°ä¸ºInteger.MAX_VALUEï¼Œå› æ­¤å¯èƒ½OOMï¼‰\n\nï¼ˆ3ï¼‰ Executors.newCachedThreadPoolï¼š`0, Integer.MAX_VALUE`ï¼Œä¸åˆ›å»ºæ ¸å¿ƒçº¿ç¨‹ï¼Œçº¿ç¨‹æ± æœ€å¤§ä¸ºInteger.MAX_VALUEã€‚ï¼ˆçº¿ç¨‹æ± å¤ªå¤§å¯¼è‡´OOMï¼‰\n\nnewCachedThreadPool å’Œ newFixedThreadPool éƒ½å‡ ä¹ä¸ä¼šè§¦å‘æ‹’ç»ç­–ç•¥ï¼Œä½†æ˜¯åŸç†ä¸åŒã€‚\nFixedThreadPool æ˜¯å› ä¸ºé˜»å¡é˜Ÿåˆ—å¯ä»¥å¾ˆå¤§ï¼ˆæœ€å¤§ä¸ºIntegeræœ€å¤§å€¼ï¼‰ï¼Œæ•…å‡ ä¹ä¸ä¼šè§¦å‘æ‹’ç»ç­–ç•¥ï¼›CachedThreadPool æ˜¯å› ä¸ºçº¿ç¨‹æ± å¾ˆå¤§ï¼ˆæœ€å¤§ä¸ºIntegeræœ€å¤§å€¼ï¼‰ï¼Œå‡ ä¹ä¸ä¼šå¯¼è‡´çº¿ç¨‹æ•°é‡å¤§äºæœ€å¤§çº¿ç¨‹æ•°ï¼Œæ•…å‡ ä¹ä¸ä¼šè§¦å‘æ‹’ç»ç­–ç•¥ã€‚\n\nï¼ˆ4ï¼‰Executors.newScheduledThreadPoolï¼š`nCoreThreads, Integer.MAX_VALUE`åˆ›å»ºä¸€ä¸ªå¤§å°æ— é™çš„çº¿ç¨‹æ± ã€‚æ­¤çº¿ç¨‹æ± æ”¯æŒå®šæ—¶ä»¥åŠå‘¨æœŸæ€§æ‰§è¡Œä»»åŠ¡çš„éœ€æ±‚ã€‚\n\n#### çº¿ç¨‹æ± æœ‰ä»€ä¹ˆä¼˜ç‚¹ï¼Ÿ\n\n- é™ä½èµ„æºæ¶ˆè€—ï¼šé‡ç”¨å­˜åœ¨çš„çº¿ç¨‹ï¼Œå‡å°‘å¯¹è±¡åˆ›å»ºé”€æ¯çš„å¼€é”€ï¼›\n- æé«˜å“åº”é€Ÿåº¦ï¼šå½“ä»»åŠ¡åˆ°è¾¾æ—¶ï¼Œä»»åŠ¡å¯ä»¥ä¸éœ€è¦çš„ç­‰åˆ°çº¿ç¨‹åˆ›å»ºå°±èƒ½ç«‹å³æ‰§è¡Œï¼›\n- æé«˜çº¿ç¨‹çš„å¯ç®¡ç†æ€§ï¼šä½¿ç”¨çº¿ç¨‹æ± å¯ä»¥è¿›è¡Œç»Ÿä¸€çš„åˆ†é…ï¼Œè°ƒä¼˜å’Œç›‘æ§ã€‚\n\n#### çº¿ç¨‹æ± éƒ½æœ‰å“ªäº›çŠ¶æ€ï¼Ÿ\n\n- RUNNINGï¼šæ¥å—æ–°çš„ä»»åŠ¡æäº¤ï¼Œå¤„ç†ç­‰å¾…é˜Ÿåˆ—ä¸­çš„ä»»åŠ¡ï¼›\n- SHUTDOWNï¼šä¸æ¥å—æ–°çš„ä»»åŠ¡æäº¤ï¼Œä½†æ˜¯ä¼šç»§ç»­å¤„ç†ç­‰å¾…é˜Ÿåˆ—ä¸­çš„ä»»åŠ¡ï¼›\n- STOPï¼šä¸æ¥å—æ–°çš„ä»»åŠ¡æäº¤ï¼Œä¸å†å¤„ç†ç­‰å¾…é˜Ÿåˆ—ä¸­çš„ä»»åŠ¡ï¼Œä¸­æ–­æ­£åœ¨æ‰§è¡Œä»»åŠ¡çš„çº¿ç¨‹ï¼›\n- TIDYINGï¼šæ‰€æœ‰çš„ä»»åŠ¡éƒ½é”€æ¯äº†ï¼ŒworkCount ä¸º 0ï¼Œçº¿ç¨‹æ± çš„çŠ¶æ€åœ¨è½¬æ¢ä¸º TIDYING çŠ¶æ€æ—¶ï¼Œä¼šæ‰§è¡Œé’©å­æ–¹æ³• terminated()ï¼›\n- TERMINATEDï¼šterminated()æ–¹æ³•ç»“æŸåï¼Œçº¿ç¨‹æ± çš„çŠ¶æ€å°±ä¼šå˜æˆè¿™ä¸ªã€‚\n\n#### åœ¨ Java ä¸­ Executor å’Œ Executors çš„åŒºåˆ«ï¼Ÿ\n\n- **Executors å·¥å…·ç±»**çš„ä¸åŒæ–¹æ³•æŒ‰ç…§æˆ‘ä»¬çš„éœ€æ±‚**åˆ›å»ºäº†ä¸åŒçš„çº¿ç¨‹æ± **ï¼Œæ¥æ»¡è¶³ä¸šåŠ¡çš„éœ€æ±‚ï¼›\n- **Executor æ¥å£å¯¹è±¡æ‰§è¡Œæˆ‘ä»¬çš„çº¿ç¨‹ä»»åŠ¡**ï¼ŒExecutorService æ¥å£ç»§æ‰¿äº† Executor æ¥å£å¹¶è¿›è¡Œäº†æ‰©å±•ï¼Œæä¾›äº†æ›´å¤šçš„æ–¹æ³•æˆ‘ä»¬èƒ½è·å¾—ä»»åŠ¡æ‰§è¡Œçš„çŠ¶æ€å¹¶ä¸”å¯ä»¥è·å–ä»»åŠ¡çš„è¿”å›å€¼ã€‚\n\n#### çº¿ç¨‹æ± ä¸­ submit() å’Œ execute() æ–¹æ³•æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\n\næ¥æ”¶å‚æ•°ï¼šsubmit() å¯ä»¥æ‰§è¡Œ Runnable å’Œ Callable ç±»å‹çš„ä»»åŠ¡ï¼Œè€Œexecute()åªèƒ½æ‰§è¡Œ Runnable ç±»å‹çš„ä»»åŠ¡ï¼›\n\nè¿”å›å€¼ï¼šsubmit() æ–¹æ³•å¯ä»¥è¿”å›æŒæœ‰è®¡ç®—ç»“æœçš„ Future å¯¹è±¡ï¼Œè€Œ execute() æ²¡æœ‰ï¼›\n\nå¼‚å¸¸å¤„ç†ï¼šsubmit() æ–¹ä¾¿ Exception å¤„ç†ã€‚\n\n### ThreadPoolExecutor è‡ªå®šä¹‰çº¿ç¨‹æ± \n\n#### Executors\n\nã€Šé˜¿é‡Œå·´å·´Javaå¼€å‘æ‰‹å†Œã€‹ä¸­å¼ºåˆ¶çº¿ç¨‹æ± ä¸å…è®¸ä½¿ç”¨ Executors å»åˆ›å»ºï¼Œè€Œæ˜¯**é€šè¿‡ ThreadPoolExecutor çš„æ–¹å¼**ï¼Œè¿™æ ·çš„å¤„ç†æ–¹å¼è®©å†™çš„åŒå­¦**æ›´åŠ æ˜ç¡®çº¿ç¨‹æ± çš„è¿è¡Œè§„åˆ™ï¼Œè§„é¿èµ„æºè€—å°½çš„é£é™©**\n\nExecutors å„ä¸ªæ–¹æ³•çš„å¼Šç«¯ï¼š\n\n- newSingleThreadExecutor å’Œ newFixedThreadPool :\n\t`0, 0`å’Œ `n, n` ï¼Œä½†æ˜¯ä½¿ç”¨ LinkedBlockingQueueï¼Œæœ€å¤§å¯ä»¥ä¸º Integer.MAX_VALUE\n\n\tä¸»è¦é—®é¢˜æ˜¯å †ç§¯çš„è¯·æ±‚å¤„ç†é˜Ÿåˆ—å¯èƒ½ä¼šè€—è´¹éå¸¸å¤§çš„å†…å­˜ï¼Œç”šè‡³ OOMã€‚\n\n- newCachedThreadPool å’Œ newScheduledThreadPool:\n\t`0, Integer.MAX_VALUE` å’Œ `n, Integer.MAX_VALUE`\n\n\tä¸»è¦é—®é¢˜æ˜¯çº¿ç¨‹æ•°æœ€å¤§æ•°æ˜¯ Integer.MAX_VALUEï¼Œå¯èƒ½ä¼šåˆ›å»ºæ•°é‡éå¸¸å¤šçš„çº¿ç¨‹ï¼Œç”šè‡³ OOM\n\nThreaPoolExecutoråˆ›å»ºçº¿ç¨‹æ± æ–¹å¼åªæœ‰ä¸€ç§ï¼Œå°±æ˜¯èµ°å®ƒçš„æ„é€ å‡½æ•°ï¼Œå‚æ•°è‡ªå·±æŒ‡å®š\n\n#### ThreaPoolExecutor \n\nåˆ›å»ºçº¿ç¨‹æ± çš„æ–¹å¼æœ‰å¤šç§ï¼Œè¿™é‡Œä½ åªéœ€è¦ç­” ThreadPoolExecutor å³å¯ã€‚\n\nThreadPoolExecutor() æ˜¯æœ€åŸå§‹çš„çº¿ç¨‹æ± åˆ›å»ºï¼Œä¹Ÿæ˜¯é˜¿é‡Œå·´å·´ Java å¼€å‘æ‰‹å†Œä¸­æ˜ç¡®è§„èŒƒçš„åˆ›å»ºçº¿ç¨‹æ± çš„æ–¹å¼ã€‚\n\n#### ThreadPoolExecutoræ„é€ å‡½æ•°é‡è¦å‚æ•°åˆ†æ\n\n**`ThreadPoolExecutor`** **3 ä¸ªæœ€é‡è¦çš„å‚æ•°ï¼š**\n\n- **`corePoolSize`** ï¼šæ ¸å¿ƒçº¿ç¨‹æ•°ï¼Œçº¿ç¨‹æ•°å®šä¹‰äº†æœ€å°å¯ä»¥åŒæ—¶è¿è¡Œçš„çº¿ç¨‹æ•°é‡\n- **`maximumPoolSize`** ï¼šçº¿ç¨‹æ± ä¸­å…è®¸å­˜åœ¨çš„å·¥ä½œçº¿ç¨‹çš„æœ€å¤§æ•°é‡\n- **`workQueue`**ï¼šå½“æ–°ä»»åŠ¡æ¥çš„æ—¶å€™ä¼šå…ˆåˆ¤æ–­å½“å‰è¿è¡Œçš„çº¿ç¨‹æ•°é‡æ˜¯å¦è¾¾åˆ°æ ¸å¿ƒçº¿ç¨‹æ•°ï¼Œå¦‚æœè¾¾åˆ°çš„è¯ï¼Œä»»åŠ¡å°±ä¼šè¢«å­˜æ”¾åœ¨ç­‰å¾…é˜Ÿåˆ—ä¸­\n\n`ThreadPoolExecutor`å…¶ä»–å¸¸è§å‚æ•°:\n\n1. **`keepAliveTime`**ï¼šéæ ¸å¿ƒçº¿ç¨‹å¦‚æœå¤„äºé—²ç½®çŠ¶æ€è¶…è¿‡è¯¥å€¼ï¼Œå°±ä¼šè¢«é”€æ¯ã€‚\n2. **`unit`** ï¼š`keepAliveTime` é—²ç½®é”€æ¯æ—¶é•¿çš„æ—¶é—´å•ä½\n3. **`threadFactory`**ï¼šä¸ºçº¿ç¨‹æ± æä¾›åˆ›å»ºæ–°çº¿ç¨‹çš„çº¿ç¨‹å·¥å‚\n4. **`handler`** ï¼šçº¿ç¨‹æ± ä»»åŠ¡é˜Ÿåˆ—è¶…è¿‡ maxinumPoolSize ä¹‹åçš„æ‹’ç»ç­–ç•¥\n\n#### ThreadPoolExecutoræ‹’ç»ç­–ç•¥\n\n**`ThreadPoolExecutor`** **æ‹’ç»ç­–ç•¥å®šä¹‰:**\n\nå¦‚æœå½“å‰åŒæ—¶è¿è¡Œçš„çº¿ç¨‹æ•°é‡è¾¾åˆ°æœ€å¤§çº¿ç¨‹æ•°é‡å¹¶ä¸”ç­‰å¾…é˜Ÿåˆ—ä¹Ÿå·²ç»è¢«æ”¾æ»¡æ—¶ï¼Œ`ThreadPoolTaskExecutor` å®šä¹‰ä¸€äº›ç­–ç•¥:\n\n- **`ThreadPoolExecutor.AbortPolicy`**ï¼šæŠ›å‡º `RejectedExecutionException`æ¥æ‹’ç»æ–°ä»»åŠ¡çš„å¤„ç†ã€‚\n- **`ThreadPoolExecutor.CallerRunsPolicy`**ï¼šè°ƒç”¨æ‰§è¡Œè‡ªå·±çš„çº¿ç¨‹è¿è¡Œä»»åŠ¡ã€‚\n- **`ThreadPoolExecutor.DiscardPolicy`**ï¼šä¸å¤„ç†æ–°ä»»åŠ¡ï¼Œç›´æ¥ä¸¢å¼ƒæ‰ã€‚\n- **`ThreadPoolExecutor.DiscardOldestPolicy`**ï¼š æ­¤ç­–ç•¥å°†ä¸¢å¼ƒæœ€æ—©çš„æœªå¤„ç†çš„ä»»åŠ¡è¯·æ±‚ã€‚\n\n#### ä¸€ä¸ªç®€å•çš„çº¿ç¨‹æ± Demo:`Runnable` + `ThreadPoolExecutor`\n\nçº¿ç¨‹æ± å®ç°åŸç†\n\n![çº¿ç¨‹æ± å®ç°åŸç†](https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/TyporaNotesaHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAxOS8xMS8yNS8xNmVhMDQ3NjEyOTVlNzY2.png)\n\n**æ€»ç»“ä¸€ä¸‹å¤„ç†æµç¨‹**\n\n1. çº¿ç¨‹æ€»æ•°é‡ < corePoolSizeï¼Œæ— è®ºçº¿ç¨‹æ˜¯å¦ç©ºé—²ï¼Œéƒ½ä¼šæ–°å»ºä¸€ä¸ªæ ¸å¿ƒçº¿ç¨‹æ‰§è¡Œä»»åŠ¡ï¼ˆè®©æ ¸å¿ƒçº¿ç¨‹æ•°é‡å¿«é€Ÿè¾¾åˆ°corePoolSizeï¼Œåœ¨æ ¸å¿ƒçº¿ç¨‹æ•°é‡ < corePoolSizeæ—¶ï¼‰ã€‚**æ³¨æ„ï¼Œè¿™ä¸€æ­¥éœ€è¦è·å¾—å…¨å±€é”ã€‚**\n2. çº¿ç¨‹æ€»æ•°é‡ >= corePoolSizeæ—¶ï¼Œæ–°æ¥çš„çº¿ç¨‹ä»»åŠ¡ä¼šè¿›å…¥ç­‰å¾…é˜Ÿåˆ—ä¸­ç­‰å¾…ï¼Œç„¶åç©ºé—²çš„æ ¸å¿ƒçº¿ç¨‹ä¼šä¾æ¬¡å»ç¼“å­˜é˜Ÿåˆ—ä¸­å–ä»»åŠ¡æ¥æ‰§è¡Œï¼ˆä½“ç°äº†**çº¿ç¨‹å¤ç”¨**ï¼‰ã€‚ \n3. å½“ç­‰å¾…é˜Ÿåˆ—æ»¡äº†ï¼Œè¯´æ˜è¿™ä¸ªæ—¶å€™ä»»åŠ¡å·²ç»å¤šåˆ°çˆ†æ£šï¼Œéœ€è¦ä¸€äº›â€œä¸´æ—¶å·¥â€æ¥æ‰§è¡Œè¿™äº›ä»»åŠ¡äº†ã€‚äºæ˜¯ä¼šåˆ›å»ºéæ ¸å¿ƒçº¿ç¨‹å»æ‰§è¡Œè¿™ä¸ªä»»åŠ¡ã€‚**æ³¨æ„ï¼Œè¿™ä¸€æ­¥éœ€è¦è·å¾—å…¨å±€é”ã€‚**\n4. ç¼“å­˜é˜Ÿåˆ—ä¹‹å‰æ»¡äº†ï¼Œ ç°åœ¨åŠ éæ ¸å¿ƒçº¿ç¨‹ä¸”æ€»çº¿ç¨‹æ•°è¾¾åˆ°äº†maximumPoolSizeï¼Œåˆ™ä¼šé‡‡å–ä¸Šé¢æåˆ°çš„æ‹’ç»ç­–ç•¥è¿›è¡Œå¤„ç†ã€‚\n\næ•´ä¸ªè¿‡ç¨‹å¦‚å›¾æ‰€ç¤ºï¼š\n\nä¸ºäº†è®©å¤§å®¶æ›´æ¸…æ¥šä¸Šé¢çš„é¢è¯•é¢˜ä¸­çš„ä¸€äº›æ¦‚å¿µï¼Œæˆ‘å†™äº†ä¸€ä¸ªç®€å•çš„çº¿ç¨‹æ±  Demoã€‚\n\né¦–å…ˆåˆ›å»ºä¸€ä¸ª `Runnable` æ¥å£çš„å®ç°ç±»ï¼ˆå½“ç„¶ä¹Ÿå¯ä»¥æ˜¯ `Callable` æ¥å£ï¼Œæˆ‘ä»¬ä¸Šé¢ä¹Ÿè¯´äº†ä¸¤è€…çš„åŒºåˆ«ã€‚ï¼‰\n\n```java\nimport Java.util.Date;\n\n/**\n * è¿™æ˜¯ä¸€ä¸ªç®€å•çš„Runnableç±»ï¼Œéœ€è¦å¤§çº¦5ç§’é’Ÿæ¥æ‰§è¡Œå…¶ä»»åŠ¡ã€‚\n */\npublic class MyRunnable implements Runnable {\n\n    private String command;\n\n    public MyRunnable(String s) {\n        this.command = s;\n    }\n\n    @Override\n    public void run() {\n        System.out.println(Thread.currentThread().getName() + \" Start. Time = \" + new Date());\n        processCommand();\n        System.out.println(Thread.currentThread().getName() + \" End. Time = \" + new Date());\n    }\n\n    private void processCommand() {\n        try {\n            Thread.sleep(5000);\n        } catch (InterruptedException e) {\n            e.printStackTrace();\n        }\n    }\n\n    @Override\n    public String toString() {\n        return this.command;\n    }\n}\n```\n\nç¼–å†™æµ‹è¯•ç¨‹åºï¼Œæˆ‘ä»¬è¿™é‡Œä»¥é˜¿é‡Œå·´å·´æ¨èçš„ä½¿ç”¨ `ThreadPoolExecutor` æ„é€ å‡½æ•°è‡ªå®šä¹‰å‚æ•°çš„æ–¹å¼æ¥åˆ›å»ºçº¿ç¨‹æ± ã€‚\n\n```java\nimport Java.util.concurrent.ArrayBlockingQueue;\nimport Java.util.concurrent.ThreadPoolExecutor;\nimport Java.util.concurrent.TimeUnit;\n\npublic class ThreadPoolExecutorDemo {\n\n    private static final int CORE_POOL_SIZE = 5;\n    private static final int MAX_POOL_SIZE = 10;\n    private static final int QUEUE_CAPACITY = 100;\n    private static final Long KEEP_ALIVE_TIME = 1L;\n    public static void main(String[] args) {\n\n        //ä½¿ç”¨é˜¿é‡Œå·´å·´æ¨èçš„åˆ›å»ºçº¿ç¨‹æ± çš„æ–¹å¼\n        //é€šè¿‡ThreadPoolExecutoræ„é€ å‡½æ•°è‡ªå®šä¹‰å‚æ•°åˆ›å»º\n        ThreadPoolExecutor executor = new ThreadPoolExecutor(\n                CORE_POOL_SIZE,\n                MAX_POOL_SIZE,\n                KEEP_ALIVE_TIME,\n                TimeUnit.SECONDS,\n                new ArrayBlockingQueue<>(QUEUE_CAPACITY),\n                new ThreadPoolExecutor.CallerRunsPolicy());\n\n        for (int i = 0; i < 10; i++) {\n            //åˆ›å»ºWorkerThreadå¯¹è±¡ï¼ˆWorkerThreadç±»å®ç°äº†Runnable æ¥å£ï¼‰\n            Runnable worker = new MyRunnable(\"\" + i);\n            //æ‰§è¡ŒRunnable\n            executor.execute(worker);\n        }\n        //ç»ˆæ­¢çº¿ç¨‹æ± \n        executor.shutdown();\n        while (!executor.isTerminated()) {\n        }\n        System.out.println(\"Finished all threads\");\n    }\n}\n```\n\nå¯ä»¥çœ‹åˆ°æˆ‘ä»¬ä¸Šé¢çš„ä»£ç æŒ‡å®šäº†ï¼š\n\n1. `corePoolSize`: æ ¸å¿ƒçº¿ç¨‹æ•°ä¸º 5ã€‚\n2. `maximumPoolSize` ï¼šæœ€å¤§çº¿ç¨‹æ•° 10\n3. `keepAliveTime` : ç­‰å¾…æ—¶é—´ä¸º 1Lã€‚\n4. `unit`: ç­‰å¾…æ—¶é—´çš„å•ä½ä¸º TimeUnit.SECONDSã€‚\n5. `workQueue`ï¼šä»»åŠ¡é˜Ÿåˆ—ä¸º `ArrayBlockingQueue`ï¼Œå¹¶ä¸”å®¹é‡ä¸º 100;\n6. `handler`:é¥±å’Œç­–ç•¥ä¸º `CallerRunsPolicy`ã€‚\n\n**Outputï¼š**\n\n```java\npool-1-thread-2 Start. Time = Tue Nov 12 20:59:44 CST 2019\npool-1-thread-5 Start. Time = Tue Nov 12 20:59:44 CST 2019\npool-1-thread-4 Start. Time = Tue Nov 12 20:59:44 CST 2019\npool-1-thread-1 Start. Time = Tue Nov 12 20:59:44 CST 2019\npool-1-thread-3 Start. Time = Tue Nov 12 20:59:44 CST 2019\npool-1-thread-5 End. Time = Tue Nov 12 20:59:49 CST 2019\npool-1-thread-3 End. Time = Tue Nov 12 20:59:49 CST 2019\npool-1-thread-2 End. Time = Tue Nov 12 20:59:49 CST 2019\npool-1-thread-4 End. Time = Tue Nov 12 20:59:49 CST 2019\npool-1-thread-1 End. Time = Tue Nov 12 20:59:49 CST 2019\npool-1-thread-2 Start. Time = Tue Nov 12 20:59:49 CST 2019\npool-1-thread-1 Start. Time = Tue Nov 12 20:59:49 CST 2019\npool-1-thread-4 Start. Time = Tue Nov 12 20:59:49 CST 2019\npool-1-thread-3 Start. Time = Tue Nov 12 20:59:49 CST 2019\npool-1-thread-5 Start. Time = Tue Nov 12 20:59:49 CST 2019\npool-1-thread-2 End. Time = Tue Nov 12 20:59:54 CST 2019\npool-1-thread-3 End. Time = Tue Nov 12 20:59:54 CST 2019\npool-1-thread-4 End. Time = Tue Nov 12 20:59:54 CST 2019\npool-1-thread-5 End. Time = Tue Nov 12 20:59:54 CST 2019\npool-1-thread-1 End. Time = Tue Nov 12 20:59:54 CST 2019\n```\n\n## å¹¶å‘å·¥å…·\n\n### CountDownLatch ä¸ CyclicBarrier\n\nCountDownLatch ä¸ CyclicBarrier éƒ½æ˜¯ç”¨äºæ§åˆ¶å¹¶å‘çš„å·¥å…·ç±»ï¼Œéƒ½å¯ä»¥ç†è§£æˆç»´æŠ¤çš„å°±æ˜¯ä¸€ä¸ªè®¡æ•°å™¨ï¼Œä½†æ˜¯è¿™ä¸¤è€…è¿˜æ˜¯å„æœ‰ä¸åŒä¾§é‡ç‚¹çš„ï¼š\n\n- CountDownLatch å¼ºè°ƒä¸€ä¸ªçº¿ç¨‹ç­‰å¤šä¸ªçº¿ç¨‹å®ŒæˆæŸä»¶äº‹æƒ…ã€‚CyclicBarrier æ˜¯å¤šä¸ªçº¿ç¨‹äº’ç­‰ï¼Œç­‰å¤§å®¶éƒ½å®Œæˆï¼Œå†æºæ‰‹å…±è¿›ï¼›\n- è°ƒç”¨ CountDownLatch çš„ countDown æ–¹æ³•åï¼Œå½“å‰çº¿ç¨‹å¹¶ä¸ä¼šé˜»å¡ï¼Œä¼šç»§ç»­å¾€ä¸‹æ‰§è¡Œï¼›è€Œè°ƒç”¨CyclicBarrier çš„ await æ–¹æ³•ï¼Œä¼šé˜»å¡å½“å‰çº¿ç¨‹ï¼Œç›´åˆ° CyclicBarrier æŒ‡å®šçš„çº¿ç¨‹å…¨éƒ¨éƒ½åˆ°è¾¾äº†æŒ‡å®šç‚¹çš„æ—¶å€™ï¼Œæ‰èƒ½ç»§ç»­å¾€ä¸‹æ‰§è¡Œï¼›\n- CountDownLatch æ˜¯ä¸èƒ½å¤ç”¨çš„ï¼Œè€Œ CyclicBarrier æ˜¯å¯ä»¥å¤ç”¨çš„ã€‚\n\n### Semaphore\n\n**Semaphore(ä¿¡å·é‡)-å…è®¸å¤šä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®ï¼š** synchronized å’Œ ReentrantLock éƒ½æ˜¯ä¸€æ¬¡åªå…è®¸ä¸€ä¸ªçº¿ç¨‹è®¿é—®æŸä¸ªèµ„æºï¼ŒSemaphore(ä¿¡å·é‡)å¯ä»¥æŒ‡å®šå¤šä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®æŸä¸ªèµ„æºã€‚\n\nSemaphore å°±æ˜¯ä¸€ä¸ªä¿¡å·é‡ï¼Œå®ƒçš„ä½œç”¨æ˜¯é™åˆ¶æŸæ®µä»£ç å—çš„å¹¶å‘æ•°ã€‚Semaphoreæœ‰ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œå¯ä»¥ä¼ å…¥ä¸€ä¸ª int å‹æ•´æ•° nï¼Œè¡¨ç¤ºæŸæ®µä»£ç æœ€å¤šåªæœ‰ n ä¸ªçº¿ç¨‹å¯ä»¥è®¿é—®ï¼Œå¦‚æœè¶…å‡ºäº† nï¼Œé‚£ä¹ˆè¯·ç­‰å¾…ï¼Œç­‰åˆ°æŸä¸ªçº¿ç¨‹æ‰§è¡Œå®Œæ¯•è¿™æ®µä»£ç å—ï¼Œä¸‹ä¸€ä¸ªçº¿ç¨‹å†è¿›å…¥ã€‚ç”±æ­¤å¯ä»¥çœ‹å‡ºå¦‚æœ Semaphore æ„é€ å‡½æ•°ä¸­ä¼ å…¥çš„ int å‹æ•´æ•° n=1ï¼Œç›¸å½“äºå˜æˆäº†ä¸€ä¸ª synchronized äº†ã€‚\n\n## æ¨¡æ‹Ÿ\n\n### æ­»é”\n\n```java\npublic class DeadLock {\n    private static Object A = new Object();\n    private static Object B = new Object();\n\n    public static void main(String[] args) {\n        new Thread(() -> {\n            synchronized (A) {\n                System.out.println(Thread.currentThread().getName() + \" å·²è·å¾—èµ„æºA\");\n                try {\n                    Thread.sleep(1000);\n                } catch (InterruptedException e) {\n                    e.printStackTrace();\n                }\n                System.out.println(Thread.currentThread().getName() + \" ç­‰å¾…è·å¾—èµ„æºB\");\n                synchronized (B) {\n                    System.out.println(Thread.currentThread().getName() + \" å·²è·å¾—èµ„æºB\");\n                }\n            }\n        }, \"çº¿ç¨‹1\").start();\n\n        new Thread(() -> {\n            synchronized (B) {\n                System.out.println(Thread.currentThread().getName() + \" å·²è·å¾—èµ„æºB\");\n                try {\n                    Thread.sleep(1000);\n                } catch (InterruptedException e) {\n                    e.printStackTrace();\n                }\n                System.out.println(Thread.currentThread().getName() + \" ç­‰å¾…è·å¾—èµ„æºA\");\n                synchronized (A) {\n                    System.out.println(Thread.currentThread().getName() + \" å·²è·å¾—èµ„æºA\");\n                }\n            }\n        }, \"çº¿ç¨‹2\").start();\n    }\n}\n```\n\n> çº¿ç¨‹1 å·²è·å¾—èµ„æºA\n> çº¿ç¨‹2 å·²è·å¾—èµ„æºB\n> çº¿ç¨‹1 ç­‰å¾…è·å¾—èµ„æºB\n> çº¿ç¨‹2 ç­‰å¾…è·å¾—èµ„æºA\n\n### runæ–¹æ³•å’Œstartæ–¹æ³•\n\n```java\npublic class DiffStartRun {\n    public static void main(String[] args) {\n        new Thread(() -> {\n            System.out.println(Thread.currentThread().getName());\n        }, \"çº¿ç¨‹A\").run();\n\n        new Thread(() -> {\n            System.out.println(Thread.currentThread().getName());\n        }, \"çº¿ç¨‹B\").start();\n    }\n}\n```\n\n> main\n> çº¿ç¨‹B\n>\n> new ä¸€ä¸ª Threadï¼Œçº¿ç¨‹è¿›å…¥äº†æ–°å»ºçŠ¶æ€ã€‚è°ƒç”¨ `start()`æ–¹æ³•ï¼Œä¼šå¯åŠ¨ä¸€ä¸ªçº¿ç¨‹å¹¶ä½¿çº¿ç¨‹è¿›å…¥äº†å°±ç»ªçŠ¶æ€ï¼Œå½“åˆ†é…åˆ°æ—¶é—´ç‰‡åå°±å¯ä»¥å¼€å§‹è¿è¡Œäº†ã€‚ `start()` ä¼šæ‰§è¡Œçº¿ç¨‹çš„ç›¸åº”å‡†å¤‡å·¥ä½œï¼Œç„¶åè‡ªåŠ¨æ‰§è¡Œ `run()` æ–¹æ³•çš„å†…å®¹ï¼Œè¿™æ˜¯çœŸæ­£çš„å¤šçº¿ç¨‹å·¥ä½œã€‚ ä½†æ˜¯ï¼Œç›´æ¥æ‰§è¡Œ `run()` æ–¹æ³•ï¼Œä¼šæŠŠ `run()` æ–¹æ³•å½“æˆä¸€ä¸ª main çº¿ç¨‹ä¸‹çš„æ™®é€šæ–¹æ³•å»æ‰§è¡Œï¼Œå¹¶ä¸ä¼šåœ¨æŸä¸ªçº¿ç¨‹ä¸­æ‰§è¡Œå®ƒï¼Œç¬¬ä¸€ä¸ªæ‰€è°“çš„çº¿ç¨‹Aåªæ˜¯ main çº¿ç¨‹çš„ä¸€ä¸ªæ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯è¯´å…¶æ‰€åœ¨çº¿ç¨‹è¿˜æ˜¯ main çº¿ç¨‹ï¼Œæ‰€ä»¥è¿™å¹¶ä¸æ˜¯å¤šçº¿ç¨‹å·¥ä½œã€‚\n>\n> **æ€»ç»“ï¼š è°ƒç”¨ start() æ–¹æ³•æ–¹å¯å¯åŠ¨çº¿ç¨‹å¹¶ä½¿çº¿ç¨‹è¿›å…¥å°±ç»ªçŠ¶æ€ï¼Œç›´æ¥æ‰§è¡Œ run() æ–¹æ³•çš„è¯ä¸ä¼šä»¥å¤šçº¿ç¨‹çš„æ–¹å¼æ‰§è¡Œã€‚**\n\n### ä¸¤ä¸ªçº¿ç¨‹ï¼Œäº¤æ›¿åŠ å‡\n\n1. synchronized\n\n\t```java\n\t/**\n\t * @author fangyaxing\n\t * @date 2022/9/12\n\t */\n\tpublic class TwoThreadWithSync {\n\t    private static int value = 0;\n\t\n\t    private static final Object lock = new Object();\n\t\n\t    public static void main(String[] args) {\n\t        new Thread(() -> {\n\t            for (int i = 0; i < 5; i++) {\n\t                synchronized (lock) {\n\t                    while (value != 0) {\n\t                        try {\n\t                            lock.wait();\n\t                        } catch (InterruptedException e) {\n\t                            e.printStackTrace();\n\t                        }\n\t                    }\n\t                    value++;\n\t                    System.out.println(Thread.currentThread().getName() + \" ---- \" + value);\n\t                    lock.notifyAll();\n\t                }\n\t            }\n\t        }, \"Thread-A\").start();\n\t\n\t        new Thread(() -> {\n\t            for (int i = 0; i < 5; i++) {\n\t                synchronized (lock) {\n\t                    while (value != 1) {\n\t                        try {\n\t                            lock.wait();\n\t                        } catch (InterruptedException e) {\n\t                            e.printStackTrace();\n\t                        }\n\t                    }\n\t                    value--;\n\t                    System.out.println(Thread.currentThread().getName() + \" ---- \" + value);\n\t                    lock.notifyAll();\n\t                }\n\t            }\n\t        }, \"Thread-B\").start();\n\t    }\n\t\n\t}\n\t```\n\n2. lock + condition\n\n\t```java\n\t/**\n\t * @author fangyaxing\n\t * @date 2022/9/12\n\t */\n\tpublic class TwoThreadWithLock {\n\t    private static int value = 0;\n\t\n\t    private static final Lock lock = new ReentrantLock();\n\t\n\t    static Condition a = lock.newCondition();\n\t\n\t    static Condition b = lock.newCondition();\n\t\n\t    public static void main(String[] args) {\n\t        new Thread(() -> {\n\t            for (int i = 0; i < 5; i++) {\n\t                try {\n\t                    lock.lock();\n\t                    while (value != 0) {\n\t                        a.await();\n\t                    }\n\t                    value++;\n\t                    System.out.println(Thread.currentThread().getName() + \" ---- \" + value);\n\t                    b.signal();\n\t                } catch (InterruptedException e) {\n\t                    e.printStackTrace();\n\t                } finally {\n\t                    lock.unlock();\n\t                }\n\t            }\n\t        }, \"Thread-A\").start();\n\t\n\t        new Thread(() -> {\n\t            for (int i = 0; i < 5; i++) {\n\t                try {\n\t                    lock.lock();\n\t                    while (value != 1) {\n\t                        b.await();\n\t                    }\n\t                    value--;\n\t                    System.out.println(Thread.currentThread().getName() + \" ---- \" + value);\n\t                    a.signal();\n\t                } catch (InterruptedException e) {\n\t                    e.printStackTrace();\n\t                } finally {\n\t                    lock.unlock();\n\t                }\n\t            }\n\t        }, \"Thread-B\").start();\n\t    }\n\t}\n\t```\n\n### ä¸‰ä¸ªçº¿ç¨‹ï¼Œå¾ªç¯æ‰“å°\n\n```java\npublic class Demo5 {\n    private int value = 0;\n    private Lock lock = new ReentrantLock();\n    private Condition a = lock.newCondition();\n    private Condition b = lock.newCondition();\n    private Condition c = lock.newCondition();\n\n    public void outputA(int round) {\n        try {\n            lock.lock();\n            while (value != 0) {\n                a.await();\n            }\n            value = 1;\n            System.out.println(\"ç¬¬\" + round + \"è½®ï¼Œ\" + Thread.currentThread().getName() + \"è¾“å‡ºA\");\n            b.signal();\n        } catch (Exception e) {\n            e.printStackTrace();\n        } finally {\n            lock.unlock();\n        }\n    }\n\n    public void outputB(int round) {\n        try {\n            lock.lock();\n            while (value != 1) {\n                b.await();\n            }\n            value = 2;\n            System.out.println(\"ç¬¬\" + round + \"è½®ï¼Œ\" + Thread.currentThread().getName() + \"è¾“å‡ºB\");\n            c.signal();\n        } catch (Exception e) {\n            e.printStackTrace();\n        } finally {\n            lock.unlock();\n        }\n    }\n\n    public void outputC(int round) {\n        try {\n            lock.lock();\n            while (value != 2) {\n                c.await();\n            }\n            value = 0;\n            System.out.println(\"ç¬¬\" + round + \"è½®ï¼Œ\" + Thread.currentThread().getName() + \"è¾“å‡ºC\");\n            a.signal();\n        } catch (Exception e) {\n            e.printStackTrace();\n        } finally {\n            lock.unlock();\n        }\n    }\n\n    public static void main(String[] args) {\n        Demo5 s = new Demo5();\n\n        new Thread(() -> {\n            for (int i = 0; i < 3; i++) {\n                s.outputA(i);\n            }\n        }, \"Thread-A\").start();\n\n        new Thread(() -> {\n            for (int i = 0; i < 3; i++) {\n                s.outputB(i);\n            }\n        }, \"Thread-B\").start();\n\n        new Thread(() -> {\n            for (int i = 0; i < 3; i++) {\n                s.outputC(i);\n            }\n        }, \"Thread-C\").start();\n\n    }\n}\n```\n","slug":"Javaå…«è‚¡æ–‡ - Javaå¹¶å‘","published":1,"updated":"2023-01-23T08:47:09.147Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cld8kfsit000azvt86vrhhome","content":"<blockquote>\n<p>æ•´ç†çš„Javaå¹¶å‘ç›¸å…³çŸ¥è¯†ç‚¹å’Œé¢è¯•é¢˜ï¼Œéƒ¨åˆ†å†…å®¹æ‘˜è‡ªç½‘ç»œï¼Œå¦‚æœ‰ä¾µæƒè¯·è”ç³»æˆ‘ï½\t<span id=\"more\"></span></p>\n</blockquote>\n<h2 id=\"åŸºç¡€çŸ¥è¯†\"><a href=\"#åŸºç¡€çŸ¥è¯†\" class=\"headerlink\" title=\"åŸºç¡€çŸ¥è¯†\"></a>åŸºç¡€çŸ¥è¯†</h2><h3 id=\"å¹¶å‘ç¼–ç¨‹çš„ä¼˜ç¼ºç‚¹\"><a href=\"#å¹¶å‘ç¼–ç¨‹çš„ä¼˜ç¼ºç‚¹\" class=\"headerlink\" title=\"å¹¶å‘ç¼–ç¨‹çš„ä¼˜ç¼ºç‚¹\"></a>å¹¶å‘ç¼–ç¨‹çš„ä¼˜ç¼ºç‚¹</h3><p>ä¼˜ç‚¹ï¼šä¸ºäº†èƒ½æé«˜ç¨‹åºçš„æ‰§è¡Œæ•ˆç‡ï¼Œæé«˜ç¨‹åºè¿è¡Œé€Ÿåº¦ï¼›</p>\n<p>ç¼ºç‚¹ï¼šå­˜åœ¨å†…å­˜æ³„æ¼ã€ä¸Šä¸‹æ–‡åˆ‡æ¢ã€çº¿ç¨‹å®‰å…¨ã€æ­»é”ç­‰é—®é¢˜ã€‚</p>\n<h4 id=\"å¹¶å‘ç¼–ç¨‹ä¸‰è¦ç´ æ˜¯ä»€ä¹ˆï¼Ÿåœ¨-Java-ç¨‹åºä¸­æ€ä¹ˆä¿è¯å¤šçº¿ç¨‹çš„è¿è¡Œå®‰å…¨ï¼Ÿ\"><a href=\"#å¹¶å‘ç¼–ç¨‹ä¸‰è¦ç´ æ˜¯ä»€ä¹ˆï¼Ÿåœ¨-Java-ç¨‹åºä¸­æ€ä¹ˆä¿è¯å¤šçº¿ç¨‹çš„è¿è¡Œå®‰å…¨ï¼Ÿ\" class=\"headerlink\" title=\"å¹¶å‘ç¼–ç¨‹ä¸‰è¦ç´ æ˜¯ä»€ä¹ˆï¼Ÿåœ¨ Java ç¨‹åºä¸­æ€ä¹ˆä¿è¯å¤šçº¿ç¨‹çš„è¿è¡Œå®‰å…¨ï¼Ÿ\"></a>å¹¶å‘ç¼–ç¨‹ä¸‰è¦ç´ æ˜¯ä»€ä¹ˆï¼Ÿåœ¨ Java ç¨‹åºä¸­æ€ä¹ˆä¿è¯å¤šçº¿ç¨‹çš„è¿è¡Œå®‰å…¨ï¼Ÿ</h4><p>å¹¶å‘ç¼–ç¨‹ä¸‰è¦ç´ ï¼ˆçº¿ç¨‹çš„å®‰å…¨æ€§é—®é¢˜ä½“ç°åœ¨ï¼‰ï¼š</p>\n<p><strong>åŸå­æ€§</strong>ï¼šåŸå­ï¼Œå³ä¸€ä¸ªä¸å¯å†è¢«åˆ†å‰²çš„é¢—ç²’ã€‚åŸå­æ€§æŒ‡çš„æ˜¯ä¸€ä¸ªæˆ–å¤šä¸ªæ“ä½œè¦ä¹ˆå…¨éƒ¨æ‰§è¡ŒæˆåŠŸè¦ä¹ˆå…¨éƒ¨æ‰§è¡Œå¤±è´¥ã€‚ï¼ˆsynchronizedï¼ŒLockï¼‰ï¼ˆçº¿ç¨‹åˆ‡æ¢å¼•èµ·çš„åŸå­æ€§é—®é¢˜ï¼‰</p>\n<p><strong>å¯è§æ€§</strong>ï¼šä¸€ä¸ªçº¿ç¨‹å¯¹å…±äº«å˜é‡çš„ä¿®æ”¹ï¼Œå¦ä¸€ä¸ªçº¿ç¨‹èƒ½å¤Ÿç«‹åˆ»çœ‹åˆ°ã€‚ï¼ˆsynchronizedï¼ŒLockï¼Œvolatileï¼‰ï¼ˆJMM å†…å­˜æ¨¡å‹å¯¼è‡´çš„å¯è§æ€§é—®é¢˜ï¼‰</p>\n<p><strong>æœ‰åºæ€§</strong>ï¼šç¨‹åºæ‰§è¡Œçš„é¡ºåºæŒ‰ç…§ä»£ç çš„å…ˆåé¡ºåºæ‰§è¡Œã€‚ï¼ˆsynchronizedï¼ŒLockï¼Œvolatileï¼‰ï¼ˆæŒ‡ä»¤é‡æ’åºå¸¦æ¥çš„æœ‰åºæ€§é—®é¢˜ï¼‰</p>\n<blockquote>\n<p>volatileä¸èƒ½ä¿è¯å¹¶å‘å®‰å…¨ï¼Œæ¯”å¦‚å¤šçº¿ç¨‹å¯¹ä¸€ä¸ªvolatileçš„intå˜é‡è¿›è¡ŒåŠ 1æ“ä½œï¼Œæœ€ç»ˆå¾—åˆ°çš„æ•°å­—å¯èƒ½æ¯”é¢„æœŸå°ï¼Œå°±æ˜¯å› ä¸º++æ“ä½œä¸æ˜¯åŸå­æ€§çš„ï¼Œè€Œvolatileä¹Ÿä¸èƒ½ä¿è¯åŸå­æ€§ï¼Œæ‰€ä»¥å°±ä¼šæœ‰è¿™ä¸ªé—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨<code>atomicInteger.getAndSet()</code>åŸå­æ“ä½œã€‚</p>\n</blockquote>\n<h3 id=\"çº¿ç¨‹å’Œè¿›ç¨‹\"><a href=\"#çº¿ç¨‹å’Œè¿›ç¨‹\" class=\"headerlink\" title=\"çº¿ç¨‹å’Œè¿›ç¨‹\"></a>çº¿ç¨‹å’Œè¿›ç¨‹</h3><h4 id=\"è¿›ç¨‹é—´çš„é€šä¿¡æ–¹å¼\"><a href=\"#è¿›ç¨‹é—´çš„é€šä¿¡æ–¹å¼\" class=\"headerlink\" title=\"è¿›ç¨‹é—´çš„é€šä¿¡æ–¹å¼\"></a>è¿›ç¨‹é—´çš„é€šä¿¡æ–¹å¼</h4><ol>\n<li><strong>ç®¡é“&#x2F;åŒ¿åç®¡é“(Pipes)</strong> ï¼šç”¨äºå…·æœ‰äº²ç¼˜å…³ç³»çš„çˆ¶å­è¿›ç¨‹é—´æˆ–è€…å…„å¼Ÿè¿›ç¨‹ä¹‹é—´çš„é€šä¿¡ï¼›</li>\n<li>**æœ‰åç®¡é“(Names Pipes)<strong>ï¼šåŒ¿åç®¡é“ç”±äºæ²¡æœ‰åå­—ï¼Œåªèƒ½ç”¨äºäº²ç¼˜å…³ç³»çš„è¿›ç¨‹é—´é€šä¿¡ã€‚ä¸ºäº†å…‹æœè¿™ä¸ªç¼ºç‚¹ï¼Œæå‡ºäº†æœ‰åç®¡é“ã€‚æœ‰åç®¡é“ä¸¥æ ¼éµå¾ª</strong>å…ˆè¿›å…ˆå‡º(first in first out)**ã€‚æœ‰åç®¡é“ä»¥ç£ç›˜æ–‡ä»¶çš„æ–¹å¼å­˜åœ¨ï¼Œå¯ä»¥å®ç°æœ¬æœºä»»æ„ä¸¤ä¸ªè¿›ç¨‹é€šä¿¡ï¼›</li>\n<li><strong>ä¿¡å·(Signal)</strong> ï¼šä¿¡å·æ˜¯ä¸€ç§æ¯”è¾ƒå¤æ‚çš„é€šä¿¡æ–¹å¼ï¼Œç”¨äºé€šçŸ¥æ¥æ”¶è¿›ç¨‹æŸä¸ªäº‹ä»¶å·²ç»å‘ç”Ÿï¼›</li>\n<li><strong>æ¶ˆæ¯é˜Ÿåˆ—(Message Queuing)</strong> ï¼šæ¶ˆæ¯é˜Ÿåˆ—æ˜¯æ¶ˆæ¯çš„é“¾è¡¨ï¼Œå…·æœ‰ç‰¹å®šçš„æ ¼å¼ï¼Œå­˜æ”¾åœ¨å†…å­˜ä¸­å¹¶ç”±æ¶ˆæ¯é˜Ÿåˆ—æ ‡è¯†ç¬¦æ ‡è¯†ã€‚<strong>æ¶ˆæ¯é˜Ÿåˆ—å…‹æœäº†ä¿¡å·æ‰¿è½½ä¿¡æ¯é‡å°‘ï¼Œç®¡é“åªèƒ½æ‰¿è½½æ— æ ¼å¼å­—èŠ‚æµä»¥åŠç¼“å†²åŒºå¤§å°å—é™ç­‰ç¼ºç‚¹</strong>ï¼›</li>\n<li><strong>ä¿¡å·é‡(Semaphores)</strong> ï¼šä¿¡å·é‡æ˜¯ä¸€ä¸ªè®¡æ•°å™¨ï¼Œç”¨äºå¤šè¿›ç¨‹å¯¹å…±äº«æ•°æ®çš„è®¿é—®ï¼Œä¿¡å·é‡çš„æ„å›¾åœ¨äºè¿›ç¨‹é—´åŒæ­¥ã€‚è¿™ç§é€šä¿¡æ–¹å¼ä¸»è¦ç”¨äºè§£å†³ä¸åŒæ­¥ç›¸å…³çš„é—®é¢˜å¹¶é¿å…ç«äº‰æ¡ä»¶ã€‚  </li>\n<li><strong>å…±äº«å†…å­˜(Shared memory)</strong> ï¼šä½¿å¾—å¤šä¸ªè¿›ç¨‹å¯ä»¥è®¿é—®åŒä¸€å—å†…å­˜ç©ºé—´ï¼Œä¸åŒè¿›ç¨‹å¯ä»¥åŠæ—¶çœ‹åˆ°å¯¹æ–¹è¿›ç¨‹ä¸­å¯¹å…±äº«å†…å­˜ä¸­æ•°æ®çš„æ›´æ–°ã€‚è¿™ç§æ–¹å¼éœ€è¦ä¾é æŸç§åŒæ­¥æ“ä½œï¼Œå¦‚äº’æ–¥é”å’Œä¿¡å·é‡ç­‰ã€‚å¯ä»¥è¯´è¿™æ˜¯æœ€æœ‰ç”¨çš„è¿›ç¨‹é—´é€šä¿¡æ–¹å¼ã€‚</li>\n<li>**å¥—æ¥å­—(Sockets)**ï¼šæ­¤æ–¹æ³•ä¸»è¦ç”¨äºåœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´é€šè¿‡ç½‘ç»œè¿›è¡Œé€šä¿¡ã€‚å¥—æ¥å­—æ˜¯æ”¯æŒ TCP&#x2F;IP çš„ç½‘ç»œé€šä¿¡çš„åŸºæœ¬æ“ä½œå•å…ƒï¼Œå¯ä»¥çœ‹åšæ˜¯ä¸åŒä¸»æœºä¹‹é—´çš„è¿›ç¨‹è¿›è¡ŒåŒå‘é€šä¿¡çš„ç«¯ç‚¹ï¼Œç®€å•çš„è¯´å°±æ˜¯é€šä¿¡çš„ä¸¤æ–¹çš„ä¸€ç§çº¦å®šï¼Œç”¨å¥—æ¥å­—ä¸­çš„ç›¸å…³å‡½æ•°æ¥å®Œæˆé€šä¿¡è¿‡ç¨‹ã€‚</li>\n</ol>\n<h4 id=\"çº¿ç¨‹é—´çš„åŒæ­¥æ–¹å¼\"><a href=\"#çº¿ç¨‹é—´çš„åŒæ­¥æ–¹å¼\" class=\"headerlink\" title=\"çº¿ç¨‹é—´çš„åŒæ­¥æ–¹å¼\"></a>çº¿ç¨‹é—´çš„åŒæ­¥æ–¹å¼</h4><p>çº¿ç¨‹åŒæ­¥æ˜¯ä¸¤ä¸ªæˆ–å¤šä¸ªå…±äº«å…³é”®èµ„æºçš„çº¿ç¨‹çš„å¹¶å‘æ‰§è¡Œã€‚åº”è¯¥åŒæ­¥çº¿ç¨‹ä»¥é¿å…å…³é”®çš„èµ„æºä½¿ç”¨å†²çªã€‚</p>\n<ol>\n<li>**äº’æ–¥é‡(Mutex)**ï¼šé‡‡ç”¨äº’æ–¥å¯¹è±¡æœºåˆ¶ï¼Œåªæœ‰æ‹¥æœ‰äº’æ–¥å¯¹è±¡çš„çº¿ç¨‹æ‰æœ‰è®¿é—®å…¬å…±èµ„æºçš„æƒé™ã€‚å› ä¸ºäº’æ–¥å¯¹è±¡åªæœ‰ä¸€ä¸ªï¼Œæ‰€ä»¥å¯ä»¥ä¿è¯å…¬å…±èµ„æºä¸ä¼šè¢«å¤šä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®ï¼Œæ¯”å¦‚ Java ä¸­çš„ synchronized å…³é”®è¯å’Œå„ç§ Lock éƒ½æ˜¯è¿™ç§æœºåˆ¶ï¼›</li>\n<li><strong>ä¿¡å·é‡(Semphares)</strong> ï¼šå®ƒå…è®¸åŒä¸€æ—¶åˆ»å¤šä¸ªçº¿ç¨‹è®¿é—®åŒä¸€èµ„æºï¼Œä½†æ˜¯éœ€è¦æ§åˆ¶åŒä¸€æ—¶åˆ»è®¿é—®æ­¤èµ„æºçš„æœ€å¤§çº¿ç¨‹æ•°é‡ï¼›</li>\n<li><strong>äº‹ä»¶(Event)</strong> ï¼šwait&#x2F;notifyï¼šé€šè¿‡é€šçŸ¥æ“ä½œçš„æ–¹å¼æ¥ä¿æŒå¤šçº¿ç¨‹åŒæ­¥ï¼Œè¿˜å¯ä»¥æ–¹ä¾¿çš„å®ç°å¤šçº¿ç¨‹ä¼˜å…ˆçº§çš„æ¯”è¾ƒæ“ä½œã€‚</li>\n</ol>\n<h4 id=\"ä»€ä¹ˆæ˜¯çº¿ç¨‹å’Œè¿›ç¨‹\"><a href=\"#ä»€ä¹ˆæ˜¯çº¿ç¨‹å’Œè¿›ç¨‹\" class=\"headerlink\" title=\"ä»€ä¹ˆæ˜¯çº¿ç¨‹å’Œè¿›ç¨‹?\"></a>ä»€ä¹ˆæ˜¯çº¿ç¨‹å’Œè¿›ç¨‹?</h4><p><strong>è¿›ç¨‹</strong>ï¼šè¿›ç¨‹æ˜¯åº”ç”¨ç¨‹åºçš„ä¸€æ¬¡è¿è¡Œï¼Œæ¯ä¸ªè¿›ç¨‹éƒ½æœ‰è‡ªå·±ç‹¬ç«‹çš„å†…å­˜ç©ºé—´ï¼›æ˜¯æ“ä½œç³»ç»Ÿèµ„æºåˆ†é…çš„åŸºæœ¬å•ä½ï¼›</p>\n<p><strong>çº¿ç¨‹</strong>ï¼šçº¿ç¨‹æ˜¯å¤„ç†å™¨è°ƒåº¦å’Œæ‰§è¡Œçš„åŸºæœ¬å•ä½ï¼Œä¸€ä¸ªè¿›ç¨‹ä¸­å¯ä»¥æœ‰å¤šä¸ªçº¿ç¨‹ï¼Œçº¿ç¨‹å…±äº«è¿›ç¨‹çš„å†…å­˜ç©ºé—´å’Œèµ„æºã€‚</p>\n<h4 id=\"ä»€ä¹ˆæ˜¯ä¸Šä¸‹æ–‡åˆ‡æ¢\"><a href=\"#ä»€ä¹ˆæ˜¯ä¸Šä¸‹æ–‡åˆ‡æ¢\" class=\"headerlink\" title=\"ä»€ä¹ˆæ˜¯ä¸Šä¸‹æ–‡åˆ‡æ¢?\"></a>ä»€ä¹ˆæ˜¯ä¸Šä¸‹æ–‡åˆ‡æ¢?</h4><p>å¤šçº¿ç¨‹ç¼–ç¨‹ä¸­ä¸€èˆ¬çº¿ç¨‹çš„ä¸ªæ•°éƒ½å¤§äº CPU æ ¸å¿ƒçš„ä¸ªæ•°ï¼Œè€Œä¸€ä¸ª CPU æ ¸å¿ƒåœ¨ä»»æ„æ—¶åˆ»åªèƒ½è¢«ä¸€ä¸ªçº¿ç¨‹ä½¿ç”¨ï¼Œä¸ºäº†è®©è¿™äº›çº¿ç¨‹éƒ½èƒ½å¾—åˆ°æœ‰æ•ˆæ‰§è¡Œï¼ŒCPU é‡‡å–çš„ç­–ç•¥æ˜¯ä¸ºæ¯ä¸ªçº¿ç¨‹åˆ†é…æ—¶é—´ç‰‡å¹¶è½®è½¬çš„å½¢å¼ã€‚</p>\n<p>å½“å‰ä»»åŠ¡åœ¨æ‰§è¡Œå®Œ CPU æ—¶é—´ç‰‡åˆ‡æ¢åˆ°å¦ä¸€ä¸ªä»»åŠ¡ä¹‹å‰ä¼šå…ˆä¿å­˜è‡ªå·±çš„çŠ¶æ€ï¼Œä»¥ä¾¿ä¸‹æ¬¡å†åˆ‡æ¢å›è¿™ä¸ªä»»åŠ¡æ—¶ï¼Œå¯ä»¥å†åŠ è½½è¿™ä¸ªä»»åŠ¡çš„çŠ¶æ€ã€‚<strong>ä»»åŠ¡ä»ä¿å­˜åˆ°å†åŠ è½½çš„è¿‡ç¨‹å°±æ˜¯ä¸€æ¬¡ä¸Šä¸‹æ–‡åˆ‡æ¢</strong>ã€‚</p>\n<p>ä¸Šä¸‹æ–‡åˆ‡æ¢å¯¹ç³»ç»Ÿæ¥è¯´æ„å‘³ç€æ¶ˆè€—å¤§é‡çš„ CPU æ—¶é—´ï¼Œäº‹å®ä¸Šï¼Œå¯èƒ½æ˜¯æ“ä½œç³»ç»Ÿä¸­æ—¶é—´æ¶ˆè€—æœ€å¤§çš„æ“ä½œã€‚</p>\n<h4 id=\"å®ˆæŠ¤çº¿ç¨‹å’Œç”¨æˆ·çº¿ç¨‹æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿ\"><a href=\"#å®ˆæŠ¤çº¿ç¨‹å’Œç”¨æˆ·çº¿ç¨‹æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿ\" class=\"headerlink\" title=\"å®ˆæŠ¤çº¿ç¨‹å’Œç”¨æˆ·çº¿ç¨‹æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿ\"></a>å®ˆæŠ¤çº¿ç¨‹å’Œç”¨æˆ·çº¿ç¨‹æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿ</h4><ul>\n<li><strong>ç”¨æˆ· (User) çº¿ç¨‹</strong>ï¼šè¿è¡Œåœ¨å‰å°ï¼Œæ‰§è¡Œå…·ä½“çš„ä»»åŠ¡</li>\n<li><strong>å®ˆæŠ¤ (Daemon) çº¿ç¨‹</strong>ï¼šè¿è¡Œåœ¨åå°ï¼Œä¸ºå…¶ä»–å‰å°çº¿ç¨‹æœåŠ¡ã€‚ä¸€æ—¦æ‰€æœ‰ç”¨æˆ·çº¿ç¨‹éƒ½ç»“æŸè¿è¡Œï¼Œå®ˆæŠ¤çº¿ç¨‹ä¼šéš JVM ä¸€èµ·ç»“æŸå·¥ä½œ</li>\n</ul>\n<p><strong>æ³¨æ„äº‹é¡¹ï¼š</strong></p>\n<ol>\n<li><code>setDaemon(true)</code>å¿…é¡»åœ¨<code>start()</code>æ–¹æ³•å‰æ‰§è¡Œï¼Œå¦åˆ™ä¼šæŠ›å‡º <code>IllegalThreadStateException</code> å¼‚å¸¸</li>\n<li>åœ¨å®ˆæŠ¤çº¿ç¨‹ä¸­äº§ç”Ÿçš„æ–°çº¿ç¨‹ä¹Ÿæ˜¯å®ˆæŠ¤çº¿ç¨‹</li>\n<li>ä¸æ˜¯æ‰€æœ‰çš„ä»»åŠ¡éƒ½å¯ä»¥åˆ†é…ç»™å®ˆæŠ¤çº¿ç¨‹æ¥æ‰§è¡Œï¼Œæ¯”å¦‚è¯»å†™æ“ä½œæˆ–è€…è®¡ç®—é€»è¾‘</li>\n<li>å®ˆæŠ¤ (Daemon) çº¿ç¨‹ä¸­ä¸èƒ½ä¾é  finally å—çš„å†…å®¹æ¥ç¡®ä¿æ‰§è¡Œå…³é—­æˆ–æ¸…ç†èµ„æºçš„é€»è¾‘ã€‚å› ä¸ºæˆ‘ä»¬ä¸Šé¢ä¹Ÿè¯´è¿‡äº†ä¸€æ—¦æ‰€æœ‰ç”¨æˆ·çº¿ç¨‹éƒ½ç»“æŸè¿è¡Œï¼Œå®ˆæŠ¤çº¿ç¨‹ä¼šéš JVM ä¸€èµ·ç»“æŸå·¥ä½œï¼Œæ‰€ä»¥å®ˆæŠ¤ (Daemon) çº¿ç¨‹ä¸­çš„ finally è¯­å¥å—å¯èƒ½æ— æ³•è¢«æ‰§è¡Œã€‚</li>\n</ol>\n<h4 id=\"å¦‚ä½•åœ¨-Windows-å’Œ-Linux-ä¸ŠæŸ¥æ‰¾å“ªä¸ªçº¿ç¨‹cpuåˆ©ç”¨ç‡æœ€é«˜ï¼Ÿ\"><a href=\"#å¦‚ä½•åœ¨-Windows-å’Œ-Linux-ä¸ŠæŸ¥æ‰¾å“ªä¸ªçº¿ç¨‹cpuåˆ©ç”¨ç‡æœ€é«˜ï¼Ÿ\" class=\"headerlink\" title=\"å¦‚ä½•åœ¨ Windows å’Œ Linux ä¸ŠæŸ¥æ‰¾å“ªä¸ªçº¿ç¨‹cpuåˆ©ç”¨ç‡æœ€é«˜ï¼Ÿ\"></a>å¦‚ä½•åœ¨ Windows å’Œ Linux ä¸ŠæŸ¥æ‰¾å“ªä¸ªçº¿ç¨‹cpuåˆ©ç”¨ç‡æœ€é«˜ï¼Ÿ</h4><p>Windowsä¸Šé¢ç”¨ä»»åŠ¡ç®¡ç†å™¨çœ‹ï¼ŒLinuxä¸‹å¯ä»¥ç”¨ top è¿™ä¸ªå‘½ä»¤çœ‹ã€‚</p>\n<h4 id=\"ä»€ä¹ˆæ˜¯çº¿ç¨‹æ­»é”\"><a href=\"#ä»€ä¹ˆæ˜¯çº¿ç¨‹æ­»é”\" class=\"headerlink\" title=\"ä»€ä¹ˆæ˜¯çº¿ç¨‹æ­»é”\"></a>ä»€ä¹ˆæ˜¯çº¿ç¨‹æ­»é”</h4><p>æ­»é”æ˜¯æŒ‡ä¸¤ä¸ªæˆ–ä¸¤ä¸ªä»¥ä¸Šçš„è¿›ç¨‹ï¼ˆçº¿ç¨‹ï¼‰åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œç”±äºç«äº‰èµ„æºé€ æˆçš„ä¸€ç§é˜»å¡çš„ç°è±¡ï¼Œè‹¥æ— å¤–åŠ›ä½œç”¨ï¼Œå®ƒä»¬éƒ½å°†æ— æ³•æ¨è¿›ä¸‹å»ã€‚</p>\n<p>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œçº¿ç¨‹ A æŒæœ‰èµ„æº 2ï¼Œçº¿ç¨‹ B æŒæœ‰èµ„æº 1ï¼Œä»–ä»¬åŒæ—¶éƒ½æƒ³ç”³è¯·å¯¹æ–¹çš„èµ„æºï¼Œæ‰€ä»¥è¿™ä¸¤ä¸ªçº¿ç¨‹å°±ä¼šäº’ç›¸ç­‰å¾…è€Œè¿›å…¥æ­»é”çŠ¶æ€ã€‚</p>\n<p><img src=\"https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/202206152131355.png\" alt=\"çº¿ç¨‹æ­»é”\"></p>\n<p>ä¸‹é¢é€šè¿‡ä¸€ä¸ªä¾‹å­æ¥è¯´æ˜çº¿ç¨‹æ­»é”ï¼Œä»£ç æ¨¡æ‹Ÿäº†ä¸Šå›¾çš„æ­»é”çš„æƒ…å†µ (ä»£ç æ¥æºäºã€Šå¹¶å‘ç¼–ç¨‹ä¹‹ç¾ã€‹)ï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">DeadLockDemo</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"type\">Object</span> <span class=\"variable\">resource1</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Object</span>();\t<span class=\"comment\">//èµ„æº 1</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"type\">Object</span> <span class=\"variable\">resource2</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Object</span>();\t<span class=\"comment\">//èµ„æº 2</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">new</span> <span class=\"title class_\">Thread</span>(() -&gt; &#123;</span><br><span class=\"line\">            <span class=\"keyword\">synchronized</span> (resource1) &#123;</span><br><span class=\"line\">                System.out.println(Thread.currentThread() + <span class=\"string\">&quot;get resource1&quot;</span>);</span><br><span class=\"line\">                <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                    Thread.sleep(<span class=\"number\">1000</span>);</span><br><span class=\"line\">                &#125; <span class=\"keyword\">catch</span> (InterruptedException e) &#123;</span><br><span class=\"line\">                    e.printStackTrace();</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                System.out.println(Thread.currentThread() + <span class=\"string\">&quot;waiting get resource2&quot;</span>);</span><br><span class=\"line\">                <span class=\"keyword\">synchronized</span> (resource2) &#123;</span><br><span class=\"line\">                    System.out.println(Thread.currentThread() + <span class=\"string\">&quot;get resource2&quot;</span>);</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;, <span class=\"string\">&quot;çº¿ç¨‹ 1&quot;</span>).start();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">new</span> <span class=\"title class_\">Thread</span>(() -&gt; &#123;</span><br><span class=\"line\">            <span class=\"keyword\">synchronized</span> (resource2) &#123;</span><br><span class=\"line\">                System.out.println(Thread.currentThread() + <span class=\"string\">&quot;get resource2&quot;</span>);</span><br><span class=\"line\">                <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                    Thread.sleep(<span class=\"number\">1000</span>);</span><br><span class=\"line\">                &#125; <span class=\"keyword\">catch</span> (InterruptedException e) &#123;</span><br><span class=\"line\">                    e.printStackTrace();</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                System.out.println(Thread.currentThread() + <span class=\"string\">&quot;waiting get resource1&quot;</span>);</span><br><span class=\"line\">                <span class=\"keyword\">synchronized</span> (resource1) &#123;</span><br><span class=\"line\">                    System.out.println(Thread.currentThread() + <span class=\"string\">&quot;get resource1&quot;</span>);</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;, <span class=\"string\">&quot;çº¿ç¨‹ 2&quot;</span>).start();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>è¾“å‡ºç»“æœ</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Thread[çº¿ç¨‹ <span class=\"number\">1</span>,<span class=\"number\">5</span>,main]get resource1</span><br><span class=\"line\">Thread[çº¿ç¨‹ <span class=\"number\">2</span>,<span class=\"number\">5</span>,main]get resource2</span><br><span class=\"line\">Thread[çº¿ç¨‹ <span class=\"number\">1</span>,<span class=\"number\">5</span>,main]waiting get resource2</span><br><span class=\"line\">Thread[çº¿ç¨‹ <span class=\"number\">2</span>,<span class=\"number\">5</span>,main]waiting get resource1</span><br></pre></td></tr></table></figure>\n\n<p>çº¿ç¨‹ A é€šè¿‡ synchronized (resource1) è·å¾— resource1 çš„ç›‘è§†å™¨é”ï¼Œç„¶åé€šè¿‡<code>Thread.sleep(1000)</code>ï¼›è®©çº¿ç¨‹ A ä¼‘çœ  1s ä¸ºçš„æ˜¯è®©çº¿ç¨‹ B å¾—åˆ°CPUæ‰§è¡Œæƒï¼Œç„¶åè·å–åˆ° resource2 çš„ç›‘è§†å™¨é”ã€‚çº¿ç¨‹ A å’Œçº¿ç¨‹ B ä¼‘çœ ç»“æŸäº†éƒ½å¼€å§‹ä¼å›¾è¯·æ±‚è·å–å¯¹æ–¹çš„èµ„æºï¼Œç„¶åè¿™ä¸¤ä¸ªçº¿ç¨‹å°±ä¼šé™·å…¥äº’ç›¸ç­‰å¾…çš„çŠ¶æ€ï¼Œè¿™ä¹Ÿå°±äº§ç”Ÿäº†æ­»é”ã€‚ä¸Šé¢çš„ä¾‹å­ç¬¦åˆäº§ç”Ÿæ­»é”çš„å››ä¸ªå¿…è¦æ¡ä»¶ã€‚</p>\n<h4 id=\"å½¢æˆæ­»é”çš„å››ä¸ªå¿…è¦æ¡ä»¶æ˜¯ä»€ä¹ˆ\"><a href=\"#å½¢æˆæ­»é”çš„å››ä¸ªå¿…è¦æ¡ä»¶æ˜¯ä»€ä¹ˆ\" class=\"headerlink\" title=\"å½¢æˆæ­»é”çš„å››ä¸ªå¿…è¦æ¡ä»¶æ˜¯ä»€ä¹ˆ\"></a>å½¢æˆæ­»é”çš„å››ä¸ªå¿…è¦æ¡ä»¶æ˜¯ä»€ä¹ˆ</h4><ol>\n<li>äº’æ–¥æ¡ä»¶ï¼šä¸€ä¸ªèµ„æºåªèƒ½è¢«ä¸€ä¸ªçº¿ç¨‹å ç”¨ï¼Œç›´åˆ°è¢«è¯¥çº¿ç¨‹é‡Šæ”¾ï¼›</li>\n<li>è¯·æ±‚ä¸ä¿æŒæ¡ä»¶ï¼šä¸€ä¸ªçº¿ç¨‹å› è¯·æ±‚è¢«å ç”¨èµ„æºè€Œå‘ç”Ÿé˜»å¡æ—¶ï¼Œå¯¹å·²è·å¾—çš„èµ„æºä¿æŒä¸æ”¾ï¼›</li>\n<li>ä¸å‰¥å¤ºæ¡ä»¶ï¼šçº¿ç¨‹ï¼›å·²è·å¾—çš„èµ„æºåœ¨æœ«ä½¿ç”¨å®Œä¹‹å‰ä¸èƒ½è¢«å…¶ä»–çº¿ç¨‹å¼ºè¡Œå‰¥å¤ºï¼Œåªæœ‰è‡ªå·±ä½¿ç”¨å®Œæ¯•åæ‰é‡Šæ”¾èµ„æºï¼›</li>\n<li>å¾ªç¯ç­‰å¾…æ¡ä»¶ï¼šå½“å‘ç”Ÿæ­»é”æ—¶ï¼Œæ‰€ç­‰å¾…çš„çº¿ç¨‹å¿…å®šä¼šå½¢æˆä¸€ä¸ªç¯è·¯ï¼ˆç±»ä¼¼äºæ­»å¾ªç¯ï¼‰ï¼Œé€ æˆæ°¸ä¹…é˜»å¡</li>\n</ol>\n<h4 id=\"å¦‚ä½•é¿å…çº¿ç¨‹æ­»é”\"><a href=\"#å¦‚ä½•é¿å…çº¿ç¨‹æ­»é”\" class=\"headerlink\" title=\"å¦‚ä½•é¿å…çº¿ç¨‹æ­»é”\"></a>å¦‚ä½•é¿å…çº¿ç¨‹æ­»é”</h4><p>æˆ‘ä»¬åªè¦ç ´åäº§ç”Ÿæ­»é”çš„å››ä¸ªæ¡ä»¶ä¸­çš„å…¶ä¸­ä¸€ä¸ªå°±å¯ä»¥äº†ã€‚</p>\n<p><strong>ç ´åäº’æ–¥æ¡ä»¶</strong>ï¼šæ— æ³•ç ´åï¼Œå› ä¸ºæˆ‘ä»¬ç”¨é”æœ¬æ¥å°±æ˜¯æƒ³å®ç°äº’æ–¥è®¿é—®ä¸´ç•Œèµ„æºï¼›</p>\n<p><strong>ç ´åè¯·æ±‚ä¸ä¿æŒæ¡ä»¶</strong>ï¼šä¸€æ¬¡æ€§ç”³è¯·æ‰€æœ‰çš„èµ„æºï¼›</p>\n<p><strong>ç ´åä¸å‰¥å¤ºæ¡ä»¶</strong>ï¼šå ç”¨éƒ¨åˆ†èµ„æºçš„çº¿ç¨‹è¿›ä¸€æ­¥ç”³è¯·å…¶ä»–èµ„æºæ—¶ï¼Œ<strong>å¦‚æœç”³è¯·ä¸åˆ°ï¼Œå¯ä»¥ä¸»åŠ¨é‡Šæ”¾å®ƒå æœ‰çš„èµ„æº</strong>ï¼›</p>\n<p><strong>ç ´åå¾ªç¯ç­‰å¾…æ¡ä»¶</strong>ï¼šé <strong>æŒ‰åºç”³è¯·</strong>èµ„æºæ¥é¢„é˜²ã€‚æŒ‰æŸä¸€é¡ºåºç”³è¯·èµ„æºï¼Œé‡Šæ”¾èµ„æºåˆ™ååºé‡Šæ”¾ã€‚ç ´åå¾ªç¯ç­‰å¾…æ¡ä»¶ã€‚</p>\n<p>æˆ‘ä»¬å¯¹çº¿ç¨‹ 2 çš„ä»£ç ä¿®æ”¹æˆä¸‹é¢è¿™æ ·å°±ä¸ä¼šäº§ç”Ÿæ­»é”äº†ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">new</span> <span class=\"title class_\">Thread</span>(() -&gt; &#123;</span><br><span class=\"line\">    <span class=\"keyword\">synchronized</span> (resource1) &#123;</span><br><span class=\"line\">        System.out.println(Thread.currentThread() + <span class=\"string\">&quot;get resource1&quot;</span>);</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            Thread.sleep(<span class=\"number\">1000</span>);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (InterruptedException e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        System.out.println(Thread.currentThread() + <span class=\"string\">&quot;waiting get resource2&quot;</span>);</span><br><span class=\"line\">        <span class=\"keyword\">synchronized</span> (resource2) &#123;</span><br><span class=\"line\">            System.out.println(Thread.currentThread() + <span class=\"string\">&quot;get resource2&quot;</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;, <span class=\"string\">&quot;çº¿ç¨‹ 2&quot;</span>).start();</span><br></pre></td></tr></table></figure>\n\n<p>è¾“å‡ºç»“æœ</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Thread[çº¿ç¨‹ <span class=\"number\">1</span>,<span class=\"number\">5</span>,main]get resource1</span><br><span class=\"line\">Thread[çº¿ç¨‹ <span class=\"number\">1</span>,<span class=\"number\">5</span>,main]waiting get resource2</span><br><span class=\"line\">Thread[çº¿ç¨‹ <span class=\"number\">1</span>,<span class=\"number\">5</span>,main]get resource2</span><br><span class=\"line\">Thread[çº¿ç¨‹ <span class=\"number\">2</span>,<span class=\"number\">5</span>,main]get resource1</span><br><span class=\"line\">Thread[çº¿ç¨‹ <span class=\"number\">2</span>,<span class=\"number\">5</span>,main]waiting get resource2</span><br><span class=\"line\">Thread[çº¿ç¨‹ <span class=\"number\">2</span>,<span class=\"number\">5</span>,main]get resource2</span><br></pre></td></tr></table></figure>\n\n<p>æˆ‘ä»¬åˆ†æä¸€ä¸‹ä¸Šé¢çš„ä»£ç ä¸ºä»€ä¹ˆé¿å…äº†æ­»é”çš„å‘ç”Ÿ?</p>\n<p>çº¿ç¨‹ 1 é¦–å…ˆè·å¾—åˆ° resource1 çš„ç›‘è§†å™¨é”ï¼Œè¿™æ—¶å€™çº¿ç¨‹ 2 å°±è·å–ä¸åˆ°äº†ã€‚ç„¶åçº¿ç¨‹ 1 å†å»è·å– resource2 çš„ç›‘è§†å™¨é”ï¼Œå¯ä»¥è·å–åˆ°ã€‚ç„¶åçº¿ç¨‹ 1 é‡Šæ”¾äº†å¯¹ resource1ã€resource2 çš„ç›‘è§†å™¨é”çš„å ç”¨ï¼Œçº¿ç¨‹ 2 è·å–åˆ°å°±å¯ä»¥æ‰§è¡Œäº†ã€‚è¿™æ ·å°±ç ´åäº†ç ´åå¾ªç¯ç­‰å¾…æ¡ä»¶ï¼Œå› æ­¤é¿å…äº†æ­»é”ã€‚</p>\n<h4 id=\"åˆ›å»ºçº¿ç¨‹æœ‰å“ªå‡ ç§æ–¹å¼ï¼Ÿ\"><a href=\"#åˆ›å»ºçº¿ç¨‹æœ‰å“ªå‡ ç§æ–¹å¼ï¼Ÿ\" class=\"headerlink\" title=\"åˆ›å»ºçº¿ç¨‹æœ‰å“ªå‡ ç§æ–¹å¼ï¼Ÿ\"></a>åˆ›å»ºçº¿ç¨‹æœ‰å“ªå‡ ç§æ–¹å¼ï¼Ÿ</h4><p>åˆ›å»ºçº¿ç¨‹æœ‰å››ç§æ–¹å¼ï¼š</p>\n<ul>\n<li>ç»§æ‰¿ Thread ç±»ï¼›</li>\n<li>å®ç° Runnable æ¥å£ï¼›</li>\n<li>å®ç° Callable æ¥å£ï¼›</li>\n<li>ä½¿ç”¨ Executors å·¥å…·ç±»åˆ›å»ºçº¿ç¨‹æ± </li>\n</ul>\n<p><strong>ç»§æ‰¿ Thread ç±»</strong></p>\n<ol>\n<li>å®šä¹‰ä¸€ä¸ª Thread ç±»çš„å­ç±»ï¼Œé‡å†™ run æ–¹æ³•</li>\n<li>åˆ›å»ºè‡ªå®šä¹‰çš„çº¿ç¨‹å­ç±»å¯¹è±¡</li>\n<li>è°ƒç”¨å­ç±»å®ä¾‹çš„ start() æ–¹æ³•æ¥å¯åŠ¨çº¿ç¨‹</li>\n</ol>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">Main</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">static</span> <span class=\"keyword\">class</span> <span class=\"title class_\">MyThread</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">Thread</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"meta\">@Override</span></span><br><span class=\"line\">        <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">run</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">            System.out.println(Thread.currentThread().getName() + <span class=\"string\">&quot; run()æ–¹æ³•æ­£åœ¨æ‰§è¡Œ...&quot;</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">new</span> <span class=\"title class_\">MyThread</span>().start();</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            Thread.sleep(<span class=\"number\">10</span>);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (InterruptedException e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        System.out.println(Thread.currentThread().getName() + <span class=\"string\">&quot; main()æ–¹æ³•æ‰§è¡Œç»“æŸ&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><strong>å®ç° Runnable æ¥å£</strong></p>\n<ol>\n<li>å®šä¹‰ Runnable æ¥å£å®ç°ç±» MyRunnableï¼Œå¹¶é‡å†™ run() æ–¹æ³•</li>\n<li>åˆ›å»º MyRunnable å®ä¾‹ myRunnableï¼Œä»¥ myRunnable ä½œä¸º target åˆ›å»º Thread å¯¹è±¡ï¼Œ<strong>è¯¥Threadå¯¹è±¡æ‰æ˜¯çœŸæ­£çš„çº¿ç¨‹å¯¹è±¡</strong></li>\n<li>è°ƒç”¨çº¿ç¨‹å¯¹è±¡çš„ start() æ–¹æ³•</li>\n</ol>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">Main</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">static</span> <span class=\"keyword\">class</span> <span class=\"title class_\">MyRunnable</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">Runnable</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"meta\">@Override</span></span><br><span class=\"line\">        <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">run</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">            System.out.println(Thread.currentThread().getName() + <span class=\"string\">&quot; run()æ–¹æ³•æ­£åœ¨æ‰§è¡Œ...&quot;</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">new</span> <span class=\"title class_\">Thread</span>(<span class=\"keyword\">new</span> <span class=\"title class_\">MyRunnable</span>()).start();</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            Thread.sleep(<span class=\"number\">10</span>);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (InterruptedException e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        System.out.println(Thread.currentThread().getName() + <span class=\"string\">&quot; main()æ–¹æ³•æ‰§è¡Œç»“æŸ&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><strong>å®ç° Callable æ¥å£</strong></p>\n<ol>\n<li>åˆ›å»ºå®ç° Callable æ¥å£çš„ç±» myCallable</li>\n<li>â­ä»¥ myCallable ä¸ºå‚æ•°åˆ›å»º FutureTask å¯¹è±¡</li>\n<li>å°† FutureTask ä½œä¸ºå‚æ•°åˆ›å»º Thread å¯¹è±¡</li>\n<li>è°ƒç”¨çº¿ç¨‹å¯¹è±¡çš„ start() æ–¹æ³•</li>\n</ol>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">Main</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">static</span> <span class=\"keyword\">class</span> <span class=\"title class_\">MyCallable</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">Callable</span>&lt;Integer&gt; &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"meta\">@Override</span></span><br><span class=\"line\">        <span class=\"keyword\">public</span> Integer <span class=\"title function_\">call</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> Exception &#123;</span><br><span class=\"line\">            System.out.println(Thread.currentThread().getName() + <span class=\"string\">&quot; call()æ–¹æ³•æ‰§è¡Œä¸­...&quot;</span>);</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"number\">1</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> &#123;</span><br><span class=\"line\">        FutureTask&lt;Integer&gt; futureTask = <span class=\"keyword\">new</span> <span class=\"title class_\">FutureTask</span>&lt;&gt;(<span class=\"keyword\">new</span> <span class=\"title class_\">MyCallable</span>());</span><br><span class=\"line\">        <span class=\"keyword\">new</span> <span class=\"title class_\">Thread</span>(futureTask).start();</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            Thread.sleep(<span class=\"number\">10</span>);</span><br><span class=\"line\">            System.out.println(futureTask.get());</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (InterruptedException | ExecutionException e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        System.out.println(Thread.currentThread().getName() + <span class=\"string\">&quot; main()æ–¹æ³•æ‰§è¡Œå®Œæˆ&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><strong>ä½¿ç”¨ Executors å·¥å…·ç±»åˆ›å»ºçº¿ç¨‹æ± </strong></p>\n<p>Executors æä¾›äº†ä¸€ç³»åˆ—å·¥å‚æ–¹æ³•ç”¨äºåˆ›å»ºçº¿ç¨‹æ± ï¼Œè¿”å›çš„çº¿ç¨‹æ± éƒ½å®ç°äº† ExecutorService æ¥å£ã€‚</p>\n<p>ä¸»è¦æœ‰ new[Single&#x2F;Fixed&#x2F;Cached&#x2F;Scheduled]ThreadPool è¿™å››ç§çº¿ç¨‹æ± </p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">MyRunnable</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">Runnable</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">run</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        System.out.println(Thread.currentThread().getName() + <span class=\"string\">&quot; run()æ–¹æ³•æ‰§è¡Œä¸­...&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">SingleThreadExecutorTest</span> &#123;n</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> &#123;</span><br><span class=\"line\">        <span class=\"type\">ExecutorService</span> <span class=\"variable\">executorService</span> <span class=\"operator\">=</span> Executors.newSingleThreadExecutor();</span><br><span class=\"line\">        <span class=\"type\">MyRunnable</span> <span class=\"variable\">myRunnable</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">MyRunnable</span>();</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>; i &lt; <span class=\"number\">5</span>; i++) &#123;</span><br><span class=\"line\">            executorService.execute(myRunnable);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;çº¿ç¨‹ä»»åŠ¡å¼€å§‹æ‰§è¡Œ&quot;</span>);</span><br><span class=\"line\">        executorService.shutdown();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"è¯´ä¸€ä¸‹-runnable-å’Œ-callable-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\"><a href=\"#è¯´ä¸€ä¸‹-runnable-å’Œ-callable-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\" class=\"headerlink\" title=\"è¯´ä¸€ä¸‹ runnable å’Œ callable æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\"></a>è¯´ä¸€ä¸‹ runnable å’Œ callable æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h4><p>ç›¸åŒç‚¹</p>\n<ul>\n<li>éƒ½æ˜¯æ¥å£</li>\n<li>éƒ½å¯ä»¥ç”¨æ¥å®ç°å¤šçº¿ç¨‹</li>\n<li>éƒ½é‡‡ç”¨ Thread.start() å¯åŠ¨çº¿ç¨‹</li>\n</ul>\n<p><strong>ä¸»è¦åŒºåˆ«</strong></p>\n<ul>\n<li>Runnable æ¥å£ run æ–¹æ³•æ— è¿”å›å€¼ï¼›Callable æ¥å£ call æ–¹æ³•æœ‰è¿”å›å€¼ï¼Œå’Œ FutureTask é…åˆå¯ä»¥ç”¨æ¥è·å–å¼‚æ­¥æ‰§è¡Œçš„ç»“æœ</li>\n<li>Runnable æ¥å£ run æ–¹æ³•æ— æ³•æ•è·å¹¶å¤„ç†å¼‚å¸¸ï¼›Callable æ¥å£ call æ–¹æ³•å¯ä»¥æ•è·å¹¶å¤„ç†å¼‚å¸¸</li>\n</ul>\n<h4 id=\"çº¿ç¨‹çš„-run-å’Œ-start-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\"><a href=\"#çº¿ç¨‹çš„-run-å’Œ-start-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\" class=\"headerlink\" title=\"çº¿ç¨‹çš„ run()å’Œ start()æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\"></a>çº¿ç¨‹çš„ run()å’Œ start()æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h4><blockquote>\n<p>start() æ–¹æ³•æ¥å¯åŠ¨ä¸€ä¸ªçº¿ç¨‹ï¼ŒçœŸæ­£å®ç°äº†å¤šçº¿ç¨‹è¿è¡Œã€‚è°ƒç”¨ start() æ–¹æ³•æ— éœ€ç­‰å¾…runæ–¹æ³•ä½“ä»£ç æ‰§è¡Œå®Œæ¯•ï¼Œå¯ä»¥ç›´æ¥ç»§ç»­æ‰§è¡Œå…¶ä»–çš„ä»£ç ï¼› æ­¤æ—¶çº¿ç¨‹æ˜¯å¤„äºå°±ç»ªçŠ¶æ€ï¼Œå¹¶æ²¡æœ‰è¿è¡Œã€‚ ç„¶åé€šè¿‡æ­¤ Thread ç±»è°ƒç”¨æ–¹æ³• run() æ¥å®Œæˆå…¶è¿è¡ŒçŠ¶æ€ï¼Œ run() æ–¹æ³•è¿è¡Œç»“æŸï¼Œ æ­¤çº¿ç¨‹ç»ˆæ­¢ã€‚ç„¶å CPU å†è°ƒåº¦å…¶å®ƒçº¿ç¨‹ã€‚</p>\n</blockquote>\n<p>start() æ–¹æ³•ç”¨äºå¯åŠ¨çº¿ç¨‹ï¼Œrun() æ–¹æ³•ç”¨äºæ‰§è¡Œçº¿ç¨‹çš„è¿è¡Œæ—¶ä»£ç ï¼Œç›´æ¥è°ƒç”¨run()ï¼Œå…¶å®å°±ç›¸å½“äºæ˜¯è°ƒç”¨äº†ä¸€ä¸ªæ™®é€šå‡½æ•°è€Œå·²ã€‚<br>start() åªèƒ½è°ƒç”¨ä¸€æ¬¡ï¼Œrun() å¯ä»¥é‡å¤è°ƒç”¨ã€‚</p>\n<h4 id=\"ä»€ä¹ˆæ˜¯-Callable-å’Œ-Future\"><a href=\"#ä»€ä¹ˆæ˜¯-Callable-å’Œ-Future\" class=\"headerlink\" title=\"ä»€ä¹ˆæ˜¯ Callable å’Œ Future?\"></a>ä»€ä¹ˆæ˜¯ Callable å’Œ Future?</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">FutureTask&lt;Integer&gt; futureTask = <span class=\"keyword\">new</span> <span class=\"title class_\">FutureTask</span>&lt;&gt;(<span class=\"keyword\">new</span> <span class=\"title class_\">MyCallable</span>());</span><br><span class=\"line\"><span class=\"keyword\">new</span> <span class=\"title class_\">Thread</span>(futureTask).start();</span><br></pre></td></tr></table></figure>\n\n<p>å°† callable å®ä¾‹ä¼ å…¥ futureï¼Œç„¶åå°† future å®ä¾‹ä¼ å…¥ Thread åˆ›å»ºçº¿ç¨‹ï¼Œ<br>ä¹‹åå¯ä»¥ç”¨ future æ¥è·å– callable  ä¸­ call() çš„è¿”å›ç»“æœã€‚</p>\n<h4 id=\"çº¿ç¨‹çš„çŠ¶æ€å’ŒåŸºæœ¬æ“ä½œ\"><a href=\"#çº¿ç¨‹çš„çŠ¶æ€å’ŒåŸºæœ¬æ“ä½œ\" class=\"headerlink\" title=\"çº¿ç¨‹çš„çŠ¶æ€å’ŒåŸºæœ¬æ“ä½œ\"></a>çº¿ç¨‹çš„çŠ¶æ€å’ŒåŸºæœ¬æ“ä½œ</h4><img src=\"https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/TyporaNotes1650518197279.png\" alt=\"çº¿ç¨‹çš„çŠ¶æ€\" style=\"zoom:67%;\" />\n\n<h4 id=\"Java-ä¸­ç”¨åˆ°çš„çº¿ç¨‹è°ƒåº¦ç®—æ³•æ˜¯ä»€ä¹ˆï¼Ÿ\"><a href=\"#Java-ä¸­ç”¨åˆ°çš„çº¿ç¨‹è°ƒåº¦ç®—æ³•æ˜¯ä»€ä¹ˆï¼Ÿ\" class=\"headerlink\" title=\"Java ä¸­ç”¨åˆ°çš„çº¿ç¨‹è°ƒåº¦ç®—æ³•æ˜¯ä»€ä¹ˆï¼Ÿ\"></a>Java ä¸­ç”¨åˆ°çš„çº¿ç¨‹è°ƒåº¦ç®—æ³•æ˜¯ä»€ä¹ˆï¼Ÿ</h4><p>çº¿ç¨‹è°ƒåº¦æ˜¯æŒ‡æŒ‰ç…§ç‰¹å®šæœºåˆ¶ä¸ºå¤šä¸ªçº¿ç¨‹åˆ†é… CPU çš„ä½¿ç”¨æƒã€‚</p>\n<p>æœ‰ä¸¤ç§è°ƒåº¦æ¨¡å‹ï¼š<strong>æ—¶é—´ç‰‡è½®è½¬</strong>æ¨¡å‹å’Œ<strong>ä¼˜å…ˆçº§è°ƒåº¦</strong>æ¨¡å‹ã€‚</p>\n<p><strong>Javaè™šæ‹Ÿæœºé‡‡ç”¨ä¼˜å…ˆçº§è°ƒåº¦æ¨¡å‹</strong>ï¼Œæ˜¯æŒ‡ä¼˜å…ˆè®©å¯è¿è¡Œæ± ä¸­ä¼˜å…ˆçº§é«˜çš„çº¿ç¨‹å ç”¨CPUï¼Œå¦‚æœå¯è¿è¡Œæ± ä¸­çš„çº¿ç¨‹ä¼˜å…ˆçº§ç›¸åŒï¼Œé‚£ä¹ˆå°±éšæœºé€‰æ‹©ä¸€ä¸ªçº¿ç¨‹ï¼Œä½¿å…¶å ç”¨CPUã€‚å¤„äºè¿è¡ŒçŠ¶æ€çš„çº¿ç¨‹ä¼šä¸€ç›´è¿è¡Œï¼Œç›´è‡³å®ƒä¸å¾—ä¸æ”¾å¼ƒ CPUã€‚</p>\n<h4 id=\"è¯·è¯´å‡ºä¸çº¿ç¨‹åŒæ­¥ä»¥åŠçº¿ç¨‹è°ƒåº¦ç›¸å…³çš„æ–¹æ³•ã€‚\"><a href=\"#è¯·è¯´å‡ºä¸çº¿ç¨‹åŒæ­¥ä»¥åŠçº¿ç¨‹è°ƒåº¦ç›¸å…³çš„æ–¹æ³•ã€‚\" class=\"headerlink\" title=\"è¯·è¯´å‡ºä¸çº¿ç¨‹åŒæ­¥ä»¥åŠçº¿ç¨‹è°ƒåº¦ç›¸å…³çš„æ–¹æ³•ã€‚\"></a>è¯·è¯´å‡ºä¸çº¿ç¨‹åŒæ­¥ä»¥åŠçº¿ç¨‹è°ƒåº¦ç›¸å…³çš„æ–¹æ³•ã€‚</h4><p>ï¼ˆ1ï¼‰wait()ï¼šä½¿ä¸€ä¸ªçº¿ç¨‹å¤„äºç­‰å¾…çŠ¶æ€ï¼Œå¹¶ä¸”é‡Šæ”¾æ‰€æŒæœ‰çš„å¯¹è±¡çš„é”ï¼›</p>\n<p>ï¼ˆ2ï¼‰sleep()ï¼šä½¿ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„çº¿ç¨‹å¤„äºç¡çœ çŠ¶æ€ï¼Œæ˜¯ä¸€ä¸ªé™æ€æ–¹æ³•ï¼›</p>\n<p>ï¼ˆ3ï¼‰notify()ï¼šå”¤é†’ä¸€ä¸ªå¤„äºç­‰å¾…çŠ¶æ€çš„çº¿ç¨‹ï¼Œå½“ç„¶åœ¨è°ƒç”¨æ­¤æ–¹æ³•çš„æ—¶å€™ï¼Œå¹¶ä¸èƒ½ç¡®åˆ‡çš„å”¤é†’æŸä¸€ä¸ªç­‰å¾…çŠ¶æ€çš„çº¿ç¨‹ï¼Œè€Œæ˜¯ç”± JVM ç¡®å®šå”¤é†’å“ªä¸ªçº¿ç¨‹ï¼Œè€Œä¸”ä¸ä¼˜å…ˆçº§æ— å…³ï¼›</p>\n<p>ï¼ˆ4ï¼‰notityAll()ï¼šå”¤é†’æ‰€æœ‰å¤„äºç­‰å¾…çŠ¶æ€çš„çº¿ç¨‹ï¼Œè¯¥æ–¹æ³•å¹¶ä¸æ˜¯å°†å¯¹è±¡çš„é”ç»™æ‰€æœ‰çº¿ç¨‹ï¼Œè€Œæ˜¯è®©å®ƒä»¬ç«äº‰ï¼Œåªæœ‰è·å¾—é”çš„çº¿ç¨‹æ‰èƒ½è¿›å…¥å°±ç»ªçŠ¶æ€ï¼›</p>\n<h4 id=\"wait-å’Œ-sleep-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\"><a href=\"#wait-å’Œ-sleep-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\" class=\"headerlink\" title=\"wait() å’Œ sleep() æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\"></a>wait() å’Œ sleep() æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h4><p>ä¸¤è€…éƒ½å¯ä»¥æš‚åœçº¿ç¨‹çš„æ‰§è¡Œ</p>\n<ul>\n<li>ç±»çš„ä¸åŒï¼šwait() æ˜¯ Object ç±»çš„æ–¹æ³•ï¼Œsleep() æ˜¯ Thread çº¿ç¨‹ç±»çš„é™æ€æ–¹æ³•ã€‚</li>\n<li>é‡Šæ”¾é”ï¼šwait() é‡Šæ”¾é”ï¼Œsleep() ä¸é‡Šæ”¾é”ã€‚</li>\n<li>ç”¨é€”ä¸åŒï¼šwait é€šå¸¸è¢«ç”¨äºçº¿ç¨‹é—´äº¤äº’&#x2F;é€šä¿¡ï¼Œsleep é€šå¸¸è¢«ç”¨äºæš‚åœæ‰§è¡Œã€‚</li>\n<li>è‡ªåŠ¨è‹é†’ï¼šwait() æ–¹æ³•è¢«è°ƒç”¨åï¼Œçº¿ç¨‹ä¸ä¼šè‡ªåŠ¨è‹é†’ï¼Œéœ€è¦åˆ«çš„çº¿ç¨‹è°ƒç”¨åŒä¸€ä¸ªå¯¹è±¡ä¸Šçš„ notify() æˆ–è€… notifyAll() æ–¹æ³•ã€‚sleep() æ–¹æ³•æ‰§è¡Œå®Œæˆåï¼Œçº¿ç¨‹ä¼šè‡ªåŠ¨è‹é†’ã€‚æˆ–è€…å¯ä»¥ä½¿ç”¨wait(long timeout)è¶…æ—¶åçº¿ç¨‹ä¼šè‡ªåŠ¨è‹é†’ã€‚</li>\n</ul>\n<h4 id=\"ä½ æ˜¯å¦‚ä½•è°ƒç”¨-wait-æ–¹æ³•çš„ï¼Ÿä½¿ç”¨-if-å—è¿˜æ˜¯å¾ªç¯ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ\"><a href=\"#ä½ æ˜¯å¦‚ä½•è°ƒç”¨-wait-æ–¹æ³•çš„ï¼Ÿä½¿ç”¨-if-å—è¿˜æ˜¯å¾ªç¯ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ\" class=\"headerlink\" title=\"ä½ æ˜¯å¦‚ä½•è°ƒç”¨ wait() æ–¹æ³•çš„ï¼Ÿä½¿ç”¨ if å—è¿˜æ˜¯å¾ªç¯ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ\"></a>ä½ æ˜¯å¦‚ä½•è°ƒç”¨ wait() æ–¹æ³•çš„ï¼Ÿä½¿ç”¨ if å—è¿˜æ˜¯å¾ªç¯ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ</h4><blockquote>\n<p>ä½¿ç”¨ while åˆ¤æ–­æ¡ä»¶æ˜¯å¦å¾—åˆ°æ»¡è¶³</p>\n</blockquote>\n<p>ä½¿ç”¨ if æ¥åˆ¤æ–­ä¼šå­˜åœ¨ä»¥ä¸‹é—®é¢˜ï¼š</p>\n<ol>\n<li><p>å¦ä¸€ä¸ªçº¿ç¨‹å¯èƒ½å·²ç»è¢«å”¤é†’å¹¶æ”¹å˜äº†æ¡ä»¶çŠ¶æ€ã€‚ä¾‹å¦‚ notifyAll ä¼šå”¤é†’å¤šä¸ªç­‰å¾…çš„çº¿ç¨‹ã€‚</p>\n</li>\n<li><p>å­˜åœ¨â€œä¼ªå”¤é†’â€çš„æƒ…å†µï¼Œå³åœ¨æ²¡æœ‰é€šçŸ¥çš„æƒ…å†µä¸‹ï¼Œçº¿ç¨‹ä¹Ÿå¯èƒ½ä¼šè‹é†’è¿‡æ¥ï¼Œè€Œæ­¤æ—¶æ˜¯ä¸åº”è¯¥å”¤é†’çš„ã€‚</p>\n <figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">synchronized</span> (monitor) &#123;</span><br><span class=\"line\">    <span class=\"comment\">//  åˆ¤æ–­æ¡ä»¶è°“è¯æ˜¯å¦å¾—åˆ°æ»¡è¶³</span></span><br><span class=\"line\">    <span class=\"keyword\">while</span>(!locked) &#123;</span><br><span class=\"line\">        <span class=\"comment\">//  ç­‰å¾…å”¤é†’</span></span><br><span class=\"line\">        monitor.wait();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">//  å¤„ç†å…¶ä»–çš„ä¸šåŠ¡é€»è¾‘</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n</ol>\n<h4 id=\"ä¸ºä»€ä¹ˆçº¿ç¨‹é€šä¿¡çš„æ–¹æ³•-wait-ï¼Œnotify-å’Œ-notifyAll-è¢«å®šä¹‰åœ¨-Object-ç±»é‡Œï¼Ÿ\"><a href=\"#ä¸ºä»€ä¹ˆçº¿ç¨‹é€šä¿¡çš„æ–¹æ³•-wait-ï¼Œnotify-å’Œ-notifyAll-è¢«å®šä¹‰åœ¨-Object-ç±»é‡Œï¼Ÿ\" class=\"headerlink\" title=\"ä¸ºä»€ä¹ˆçº¿ç¨‹é€šä¿¡çš„æ–¹æ³• wait()ï¼Œnotify() å’Œ notifyAll() è¢«å®šä¹‰åœ¨ Object ç±»é‡Œï¼Ÿ\"></a>ä¸ºä»€ä¹ˆçº¿ç¨‹é€šä¿¡çš„æ–¹æ³• wait()ï¼Œnotify() å’Œ notifyAll() è¢«å®šä¹‰åœ¨ Object ç±»é‡Œï¼Ÿ</h4><p>Java ä¸­ï¼Œä»»ä½•å¯¹è±¡éƒ½å¯ä»¥ä½œä¸ºé”ï¼Œå¹¶ä¸”çº¿ç¨‹é€šä¿¡çš„æ–¹æ³• wait()ï¼Œnotify() ç­‰æ–¹æ³•ç”¨äºç­‰å¾…å¯¹è±¡çš„é”æˆ–è€…æ˜¯å”¤é†’çº¿ç¨‹ï¼Œé‚£ä¹ˆè¦æ‰¾ä¸€ä¸ªå¯ä¾›ä»»ä½•å¯¹è±¡ä½¿ç”¨çš„é”ï¼Œå› æ­¤å°†è¿™äº›æ–¹æ³•å®šä¹‰åœ¨ Object ä¸­ï¼ŒObject æ˜¯æ‰€æœ‰ç±»çš„çˆ¶ç±»ã€‚</p>\n<h4 id=\"Thread-ç±»ä¸­çš„-yield-æ–¹æ³•æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ\"><a href=\"#Thread-ç±»ä¸­çš„-yield-æ–¹æ³•æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ\" class=\"headerlink\" title=\"Thread ç±»ä¸­çš„ yield æ–¹æ³•æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ\"></a>Thread ç±»ä¸­çš„ yield æ–¹æ³•æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ</h4><p>ä½¿å½“å‰çº¿ç¨‹ä»è¿è¡ŒçŠ¶æ€å˜ä¸ºå°±ç»ªçŠ¶æ€ã€‚</p>\n<h4 id=\"çº¿ç¨‹çš„-sleep-æ–¹æ³•å’Œ-yield-æ–¹æ³•æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\"><a href=\"#çº¿ç¨‹çš„-sleep-æ–¹æ³•å’Œ-yield-æ–¹æ³•æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\" class=\"headerlink\" title=\"çº¿ç¨‹çš„ sleep()æ–¹æ³•å’Œ yield()æ–¹æ³•æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\"></a>çº¿ç¨‹çš„ sleep()æ–¹æ³•å’Œ yield()æ–¹æ³•æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h4><ol>\n<li><p>sleep() æ–¹æ³•ç»™å…¶ä»–çº¿ç¨‹è¿è¡Œæœºä¼šæ—¶ä¸è€ƒè™‘çº¿ç¨‹çš„ä¼˜å…ˆçº§ï¼Œå› æ­¤ä¼šç»™ä½ä¼˜å…ˆçº§çš„çº¿ç¨‹ä»¥è¿è¡Œçš„æœºä¼šï¼›</p>\n<p> yield()æ–¹æ³•åªä¼šç»™<strong>ç›¸åŒæˆ–æ›´é«˜ä¼˜å…ˆçº§</strong>çš„çº¿ç¨‹ä»¥è¿è¡Œçš„æœºä¼šï¼›</p>\n</li>\n<li><p>çº¿ç¨‹æ‰§è¡Œ sleep() æ–¹æ³•åè½¬å…¥ç­‰å¾…ï¼ˆwaitingï¼‰çŠ¶æ€ï¼Œè€Œæ‰§è¡Œ yield() æ–¹æ³•åè½¬å…¥å°±ç»ªï¼ˆreadyï¼‰çŠ¶æ€ï¼›</p>\n</li>\n</ol>\n<h4 id=\"å¦‚ä½•åœæ­¢ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„çº¿ç¨‹ï¼Ÿ\"><a href=\"#å¦‚ä½•åœæ­¢ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„çº¿ç¨‹ï¼Ÿ\" class=\"headerlink\" title=\"å¦‚ä½•åœæ­¢ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„çº¿ç¨‹ï¼Ÿ\"></a>å¦‚ä½•åœæ­¢ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„çº¿ç¨‹ï¼Ÿ</h4><ol>\n<li>å½“ run æ–¹æ³•å®Œæˆåçº¿ç¨‹ç»ˆæ­¢ï¼›</li>\n<li>ä½¿ç”¨ interrupt æ–¹æ³•ä¸­æ–­çº¿ç¨‹ã€‚</li>\n</ol>\n<h4 id=\"notify-å’Œ-notifyAll-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\"><a href=\"#notify-å’Œ-notifyAll-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\" class=\"headerlink\" title=\"notify() å’Œ notifyAll() æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\"></a>notify() å’Œ notifyAll() æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h4><p>å¦‚æœçº¿ç¨‹è°ƒç”¨äº†å¯¹è±¡çš„ wait() æ–¹æ³•ï¼Œé‚£ä¹ˆçº¿ç¨‹ä¾¿ä¼šå¤„äºè¯¥å¯¹è±¡çš„ç­‰å¾…æ± ä¸­ï¼Œç­‰å¾…æ± ä¸­çš„çº¿ç¨‹ä¸ä¼šå»ç«äº‰è¯¥å¯¹è±¡çš„é”ã€‚</p>\n<p>notifyAll() ä¼šå”¤é†’æ‰€æœ‰çš„çº¿ç¨‹ï¼Œnotify() åªä¼šå”¤é†’ä¸€ä¸ªçº¿ç¨‹ã€‚</p>\n<p>notifyAll() è°ƒç”¨åï¼Œä¼šå°†å…¨éƒ¨çº¿ç¨‹ç”±ç­‰å¾…æ± ç§»åˆ°é”æ± ï¼Œç„¶åå‚ä¸é”çš„ç«äº‰ï¼Œç«äº‰æˆåŠŸåˆ™ç»§ç»­æ‰§è¡Œï¼Œå¦‚æœä¸æˆåŠŸåˆ™ç•™åœ¨é”æ± ç­‰å¾…é”è¢«é‡Šæ”¾åå†æ¬¡å‚ä¸ç«äº‰ã€‚è€Œ notify()åªä¼šå”¤é†’ä¸€ä¸ªçº¿ç¨‹ï¼Œå…·ä½“å”¤é†’å“ªä¸€ä¸ªçº¿ç¨‹ç”±è™šæ‹Ÿæœºæ§åˆ¶ã€‚</p>\n<h4 id=\"å¦‚ä½•åœ¨ä¸¤ä¸ªçº¿ç¨‹é—´å…±äº«æ•°æ®ï¼Ÿ\"><a href=\"#å¦‚ä½•åœ¨ä¸¤ä¸ªçº¿ç¨‹é—´å…±äº«æ•°æ®ï¼Ÿ\" class=\"headerlink\" title=\"å¦‚ä½•åœ¨ä¸¤ä¸ªçº¿ç¨‹é—´å…±äº«æ•°æ®ï¼Ÿ\"></a>å¦‚ä½•åœ¨ä¸¤ä¸ªçº¿ç¨‹é—´å…±äº«æ•°æ®ï¼Ÿ</h4><p>Java çº¿ç¨‹ä¹‹é—´çš„é€šä¿¡ç”± Java å†…å­˜æ¨¡å‹ï¼ˆç®€ç§°JMMï¼‰æ§åˆ¶ï¼š</p>\n<ol>\n<li>æ‰€æœ‰çš„å…±äº«å˜é‡éƒ½å­˜åœ¨ä¸»å†…å­˜ä¸­</li>\n<li>æ¯ä¸ªçº¿ç¨‹éƒ½ä¿å­˜äº†ä¸€ä»½è¯¥çº¿ç¨‹ä½¿ç”¨åˆ°çš„å…±äº«å˜é‡çš„å‰¯æœ¬</li>\n<li>å¦‚æœçº¿ç¨‹Aä¸çº¿ç¨‹Bä¹‹é—´è¦é€šä¿¡ï¼š<ol>\n<li>çº¿ç¨‹Aå°†æœ¬åœ°å†…å­˜Aä¸­æ›´æ–°è¿‡çš„å…±äº«å˜é‡åˆ·æ–°åˆ°ä¸»å†…å­˜ä¸­å»</li>\n<li>çº¿ç¨‹Båˆ°ä¸»å†…å­˜ä¸­å»è¯»å–çº¿ç¨‹Aä¹‹å‰å·²ç»æ›´æ–°è¿‡çš„å…±äº«å˜é‡ã€‚</li>\n</ol>\n</li>\n</ol>\n<h4 id=\"Java-å¦‚ä½•å®ç°å¤šçº¿ç¨‹ä¹‹é—´çš„é€šè®¯å’Œåä½œï¼Ÿ\"><a href=\"#Java-å¦‚ä½•å®ç°å¤šçº¿ç¨‹ä¹‹é—´çš„é€šè®¯å’Œåä½œï¼Ÿ\" class=\"headerlink\" title=\"Java å¦‚ä½•å®ç°å¤šçº¿ç¨‹ä¹‹é—´çš„é€šè®¯å’Œåä½œï¼Ÿ\"></a>Java å¦‚ä½•å®ç°å¤šçº¿ç¨‹ä¹‹é—´çš„é€šè®¯å’Œåä½œï¼Ÿ</h4><p>Javaä¸­çº¿ç¨‹é€šä¿¡åä½œçš„æœ€å¸¸è§çš„ä¸¤ç§æ–¹å¼ï¼š</p>\n<ol>\n<li><p>synchronized åŠ é”çš„çº¿ç¨‹ + Object ç±»çš„ wait()&#x2F;notify()&#x2F;notifyAll()</p>\n</li>\n<li><p>ReentrantLock ç±»åŠ é”çš„çº¿ç¨‹ + Condition ç±»çš„ await()&#x2F;signal()&#x2F;signalAll()</p>\n</li>\n</ol>\n<h4 id=\"åŒæ­¥æ–¹æ³•å’ŒåŒæ­¥å—ï¼Œå“ªä¸ªæ˜¯æ›´å¥½çš„é€‰æ‹©ï¼Ÿ\"><a href=\"#åŒæ­¥æ–¹æ³•å’ŒåŒæ­¥å—ï¼Œå“ªä¸ªæ˜¯æ›´å¥½çš„é€‰æ‹©ï¼Ÿ\" class=\"headerlink\" title=\"åŒæ­¥æ–¹æ³•å’ŒåŒæ­¥å—ï¼Œå“ªä¸ªæ˜¯æ›´å¥½çš„é€‰æ‹©ï¼Ÿ\"></a>åŒæ­¥æ–¹æ³•å’ŒåŒæ­¥å—ï¼Œå“ªä¸ªæ˜¯æ›´å¥½çš„é€‰æ‹©ï¼Ÿ</h4><p>åŒæ­¥çš„èŒƒå›´è¶Šå°è¶Šå¥½ã€‚</p>\n<p>å› æ­¤ï¼ŒåŒæ­¥å—æ˜¯æ›´å¥½çš„é€‰æ‹©ï¼Œå› ä¸ºå®ƒä¸ä¼šé”ä½æ•´ä¸ªå¯¹è±¡ï¼Œè€ŒåŒæ­¥æ–¹æ³•ä¼šé”ä½æ•´ä¸ªå¯¹è±¡ã€‚</p>\n<h4 id=\"ä»€ä¹ˆæ˜¯çº¿ç¨‹åŒæ­¥å’Œçº¿ç¨‹äº’æ–¥ï¼Œæœ‰å“ªå‡ ç§å®ç°æ–¹å¼ï¼Ÿ\"><a href=\"#ä»€ä¹ˆæ˜¯çº¿ç¨‹åŒæ­¥å’Œçº¿ç¨‹äº’æ–¥ï¼Œæœ‰å“ªå‡ ç§å®ç°æ–¹å¼ï¼Ÿ\" class=\"headerlink\" title=\"ä»€ä¹ˆæ˜¯çº¿ç¨‹åŒæ­¥å’Œçº¿ç¨‹äº’æ–¥ï¼Œæœ‰å“ªå‡ ç§å®ç°æ–¹å¼ï¼Ÿ\"></a>ä»€ä¹ˆæ˜¯çº¿ç¨‹åŒæ­¥å’Œçº¿ç¨‹äº’æ–¥ï¼Œæœ‰å“ªå‡ ç§å®ç°æ–¹å¼ï¼Ÿ</h4><p>çº¿ç¨‹åŒæ­¥æ˜¯ä¸¤ä¸ªæˆ–å¤šä¸ªå…±äº«å…³é”®èµ„æºçš„çº¿ç¨‹çš„å¹¶å‘æ‰§è¡Œã€‚åº”è¯¥åŒæ­¥çº¿ç¨‹ä»¥é¿å…å…³é”®çš„èµ„æºä½¿ç”¨å†²çªã€‚</p>\n<p>çº¿ç¨‹äº’æ–¥æ˜¯å¯¹æŸä¸€å…±äº«èµ„æºè€Œè¨€ï¼Œä»»ä½•æ—¶åˆ»æœ€å¤šåªå…è®¸ä¸€ä¸ªçº¿ç¨‹å»ä½¿ç”¨ï¼Œå…¶å®ƒè¦ä½¿ç”¨è¯¥èµ„æºçš„çº¿ç¨‹å¿…é¡»ç­‰å¾…ï¼Œç›´åˆ°å ç”¨èµ„æºè€…é‡Šæ”¾è¯¥èµ„æºã€‚</p>\n<p>å®ç°çº¿ç¨‹åŒæ­¥çš„æ–¹æ³•</p>\n<ul>\n<li>åŒæ­¥ä»£ç æ–¹æ³• &#x2F; æ–¹æ³•å—ï¼šsychronized å…³é”®å­—ä¿®é¥°çš„æ–¹æ³• &#x2F; ä»£ç å—</li>\n<li>ä½¿ç”¨ç‰¹æ®Šå˜é‡åŸŸ volatile å®ç°çº¿ç¨‹åŒæ­¥ï¼švolatileå…³é”®å­—ä¸ºåŸŸå˜é‡çš„è®¿é—®æä¾›äº†ä¸€ç§å…é”æœºåˆ¶</li>\n<li>ä½¿ç”¨é‡å…¥é”å®ç°çº¿ç¨‹åŒæ­¥ï¼šreentrantlock ç±»æ˜¯å¯é‡å…¥ã€äº’æ–¥ã€å®ç°äº† lock æ¥å£çš„é”ï¼Œä¸ sychronized æ–¹æ³•å…·æœ‰ç›¸åŒçš„åŸºæœ¬è¡Œä¸ºå’Œè¯­ä¹‰</li>\n</ul>\n<h4 id=\"åœ¨ç›‘è§†å™¨-Monitor-å†…éƒ¨ï¼Œæ˜¯å¦‚ä½•åšçº¿ç¨‹åŒæ­¥çš„ï¼Ÿ\"><a href=\"#åœ¨ç›‘è§†å™¨-Monitor-å†…éƒ¨ï¼Œæ˜¯å¦‚ä½•åšçº¿ç¨‹åŒæ­¥çš„ï¼Ÿ\" class=\"headerlink\" title=\"åœ¨ç›‘è§†å™¨(Monitor)å†…éƒ¨ï¼Œæ˜¯å¦‚ä½•åšçº¿ç¨‹åŒæ­¥çš„ï¼Ÿ\"></a>åœ¨ç›‘è§†å™¨(Monitor)å†…éƒ¨ï¼Œæ˜¯å¦‚ä½•åšçº¿ç¨‹åŒæ­¥çš„ï¼Ÿ</h4><p>åœ¨ Java è™šæ‹Ÿæœºä¸­ï¼Œæ¯ä¸ªå¯¹è±¡å…³è”ä¸€ä¸ª<strong>ç›‘è§†å™¨</strong>ï¼Œä¸ºäº†å®ç°ç›‘è§†å™¨çš„äº’æ–¥åŠŸèƒ½ï¼Œ<strong>æ¯ä¸ªå¯¹è±¡éƒ½å…³è”ç€ä¸€æŠŠé”</strong>ã€‚</p>\n<p>ä¸€æ—¦æ–¹æ³•æˆ–è€…ä»£ç å—è¢« <strong>synchronized</strong> ä¿®é¥°ï¼Œé‚£ä¹ˆè¿™ä¸ªéƒ¨åˆ†å°±æ”¾å…¥äº†ç›‘è§†å™¨çš„ç›‘è§†åŒºåŸŸï¼Œ<strong>ç¡®ä¿ä¸€æ¬¡åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œè¯¥éƒ¨åˆ†çš„ä»£ç </strong>ï¼Œçº¿ç¨‹åœ¨è·å–é”ä¹‹å‰ä¸å…è®¸æ‰§è¡Œè¯¥éƒ¨åˆ†çš„ä»£ç </p>\n<p>å¦å¤– Java è¿˜æä¾›äº†æ˜¾å¼ç›‘è§†å™¨( Lock )å’Œéšå¼ç›‘è§†å™¨( synchronized )ä¸¤ç§é”æ–¹æ¡ˆ</p>\n<h4 id=\"Java-çº¿ç¨‹æ•°è¿‡å¤šä¼šé€ æˆä»€ä¹ˆé—®é¢˜ï¼Ÿ\"><a href=\"#Java-çº¿ç¨‹æ•°è¿‡å¤šä¼šé€ æˆä»€ä¹ˆé—®é¢˜ï¼Ÿ\" class=\"headerlink\" title=\"Java çº¿ç¨‹æ•°è¿‡å¤šä¼šé€ æˆä»€ä¹ˆé—®é¢˜ï¼Ÿ\"></a>Java çº¿ç¨‹æ•°è¿‡å¤šä¼šé€ æˆä»€ä¹ˆé—®é¢˜ï¼Ÿ</h4><ul>\n<li><p>æ¶ˆè€—è¿‡å¤šçš„ CPU èµ„æº</p>\n<p>  å¦‚æœå¯è¿è¡Œçš„çº¿ç¨‹æ•°é‡å¤šäºå¯ç”¨å¤„ç†å™¨çš„æ•°é‡ï¼Œé‚£ä¹ˆæœ‰çº¿ç¨‹å°†ä¼šè¢«é—²ç½®ã€‚å¤§é‡ç©ºé—²çš„çº¿ç¨‹ä¼šå ç”¨è®¸å¤šå†…å­˜ï¼Œç»™åƒåœ¾å›æ”¶å™¨å¸¦æ¥å‹åŠ›ã€‚</p>\n</li>\n<li><p>é™ä½ JVM ç¨³å®šæ€§</p>\n<p>  åœ¨å¯åˆ›å»ºçº¿ç¨‹çš„æ•°é‡ä¸Šå­˜åœ¨ä¸€ä¸ªé™åˆ¶ï¼Œè¿™ä¸ªé™åˆ¶å€¼å°†éšç€å¹³å°çš„ä¸åŒè€Œä¸åŒï¼Œå¹¶ä¸”æ‰¿å—ç€å¤šä¸ªå› ç´ åˆ¶çº¦ï¼ŒåŒ…æ‹¬ JVM çš„å¯åŠ¨å‚æ•°ã€Thread æ„é€ å‡½æ•°ä¸­è¯·æ±‚æ ˆçš„å¤§å°ï¼Œä»¥åŠåº•å±‚æ“ä½œç³»ç»Ÿå¯¹çº¿ç¨‹çš„é™åˆ¶ç­‰ã€‚å¦‚æœç ´åäº†è¿™äº›é™åˆ¶ï¼Œé‚£ä¹ˆå¯èƒ½æŠ›å‡º OutOfMemoryError å¼‚å¸¸ã€‚</p>\n</li>\n</ul>\n<h2 id=\"å¹¶å‘å…³é”®å­—\"><a href=\"#å¹¶å‘å…³é”®å­—\" class=\"headerlink\" title=\"å¹¶å‘å…³é”®å­—\"></a>å¹¶å‘å…³é”®å­—</h2><h3 id=\"synchronized\"><a href=\"#synchronized\" class=\"headerlink\" title=\"synchronized\"></a>synchronized</h3><h4 id=\"synchronized-çš„ä½œç”¨ï¼Ÿ\"><a href=\"#synchronized-çš„ä½œç”¨ï¼Ÿ\" class=\"headerlink\" title=\"synchronized çš„ä½œç”¨ï¼Ÿ\"></a>synchronized çš„ä½œç”¨ï¼Ÿ</h4><p>åœ¨ Java ä¸­ï¼Œsynchronized å…³é”®å­—æ˜¯ç”¨æ¥æ§åˆ¶çº¿ç¨‹åŒæ­¥çš„ï¼Œå°±æ˜¯åœ¨å¤šçº¿ç¨‹çš„ç¯å¢ƒä¸‹ï¼Œæ§åˆ¶ synchronized ä»£ç æ®µä¸è¢«å¤šä¸ªçº¿ç¨‹åŒæ—¶æ‰§è¡Œã€‚synchronized å¯ä»¥ä¿®é¥°é™æ€æ–¹æ³•ã€å®ä¾‹æ–¹æ³•ã€ä»£ç å—ã€‚</p>\n<h4 id=\"æ€ä¹ˆä½¿ç”¨-synchronized-å…³é”®å­—\"><a href=\"#æ€ä¹ˆä½¿ç”¨-synchronized-å…³é”®å­—\" class=\"headerlink\" title=\"æ€ä¹ˆä½¿ç”¨ synchronized å…³é”®å­—\"></a>æ€ä¹ˆä½¿ç”¨ synchronized å…³é”®å­—</h4><p><strong>synchronizedå…³é”®å­—æœ€ä¸»è¦çš„ä¸‰ç§ä½¿ç”¨æ–¹å¼ï¼š</strong></p>\n<ul>\n<li><strong>ä¿®é¥°å®ä¾‹æ–¹æ³•ï¼š</strong> ç»™å½“å‰å¯¹è±¡å®ä¾‹åŠ é”ï¼›</li>\n<li><strong>ä¿®é¥°é™æ€æ–¹æ³•ï¼š</strong> ç»™å½“å‰ç±»åŠ é”ï¼›</li>\n<li><strong>ä¿®é¥°ä»£ç å—ï¼š</strong>ç»™æŒ‡å®šå¯¹è±¡åŠ é”ï¼Œè¿›å…¥åŒæ­¥ä»£ç å—å‰è¦è·å¾—æŒ‡å®šå¯¹è±¡çš„é”ã€‚</li>\n</ul>\n<p><strong>æ€»ç»“ï¼š</strong> synchronized å…³é”®å­—åŠ åˆ° static é™æ€æ–¹æ³•å’Œ synchronized(xxx.class) ä»£ç å—ä¸Šéƒ½æ˜¯æ˜¯ç»™ Class ç±»ä¸Šé”ã€‚synchronized å…³é”®å­—åŠ åˆ°å®ä¾‹æ–¹æ³•ä¸Šæ˜¯ç»™å¯¹è±¡å®ä¾‹ä¸Šé”ã€‚</p>\n<h4 id=\"åŒé‡æ ¡éªŒé”å®ç°å¯¹è±¡å•ä¾‹ï¼ˆçº¿ç¨‹å®‰å…¨ï¼‰\"><a href=\"#åŒé‡æ ¡éªŒé”å®ç°å¯¹è±¡å•ä¾‹ï¼ˆçº¿ç¨‹å®‰å…¨ï¼‰\" class=\"headerlink\" title=\"åŒé‡æ ¡éªŒé”å®ç°å¯¹è±¡å•ä¾‹ï¼ˆçº¿ç¨‹å®‰å…¨ï¼‰\"></a>åŒé‡æ ¡éªŒé”å®ç°å¯¹è±¡å•ä¾‹ï¼ˆçº¿ç¨‹å®‰å…¨ï¼‰</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">Singleton</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">volatile</span> <span class=\"keyword\">static</span> Singleton uniqueInstance;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"title function_\">Singleton</span><span class=\"params\">()</span> &#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> Singleton <span class=\"title function_\">getInstance</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// ç¬¬ä¸€æ¬¡å‡å¦‚çº¿ç¨‹1ï¼Œçº¿ç¨‹2ï¼Œçº¿ç¨‹3åˆ°è¾¾è¿™ï¼Œéƒ½åˆ¤æ–­åˆ°nullæœªå®ä¾‹åŒ–ï¼ŒåŠ è¿™ä¸ªåˆ¤æ–­æ˜¯ä¸ºäº†è®©é™¤äº†ç¬¬ä¸€æ¬¡å®ä¾‹åŒ–ä¹‹åçš„å…¶ä»–çº¿ç¨‹åˆ¤æ–­åˆ°éç©ºè¡¨æ˜å·²ç»å®ä¾‹åŒ–è¿‡äº†ï¼Œç›´æ¥è¿”å›å•ä¾‹</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (uniqueInstance == <span class=\"literal\">null</span>) &#123;\t<span class=\"comment\">// çº¿ç¨‹1ã€2ã€3æœ‰å¯èƒ½éƒ½è¿›æ¥äº†</span></span><br><span class=\"line\">            <span class=\"comment\">//ç±»å¯¹è±¡åŠ é”</span></span><br><span class=\"line\">            <span class=\"keyword\">synchronized</span> (Singleton.class) &#123;\t<span class=\"comment\">// å¦‚æœå¤šä¸ªçº¿ç¨‹éƒ½åˆ¤æ–­åˆ°æœªå®ä¾‹åŒ–ï¼Œé‚£ä¹ˆåªä¼šæœ‰ä¸€ä¸ªçº¿ç¨‹é”ä½ç±»å¹¶è¿›è¡Œå®ä¾‹åŒ–</span></span><br><span class=\"line\">                <span class=\"keyword\">if</span> (uniqueInstance == <span class=\"literal\">null</span>) &#123;\t<span class=\"comment\">// å¦‚æœä¸åŠ è¿™ä¸ªåˆ¤æ–­ï¼Œçº¿ç¨‹1æ‹¿åˆ°é”è¿›è¡Œå®ä¾‹åŒ–ä¹‹åï¼Œçº¿ç¨‹2æ‹¿åˆ°é”ï¼Œè¿›æ¥ç›´æ¥è¿›è¡Œå®ä¾‹åŒ–ï¼Œè¿™å°±äº§ç”Ÿå¤šæ¬¡å®ä¾‹åŒ–æ“ä½œã€‚å¦‚æœåŠ è¿™ä¸ªåˆ¤æ–­ï¼Œçº¿ç¨‹2æ‹¿åˆ°é”ä¹‹åï¼Œåˆ¤æ–­åˆ°å·²ç»å®ä¾‹åŒ–äº†ï¼Œå°±ä¸ä¼šå†è¿›è¡Œå®ä¾‹åŒ–äº†ã€‚</span></span><br><span class=\"line\">                    uniqueInstance = <span class=\"keyword\">new</span> <span class=\"title class_\">Singleton</span>();</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> uniqueInstance;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>å¦å¤–ï¼Œéœ€è¦æ³¨æ„ instanceé‡‡ç”¨ volatile å…³é”®å­—ä¿®é¥°ä¹Ÿæ˜¯å¾ˆæœ‰å¿…è¦ã€‚</p>\n<p>instance é‡‡ç”¨ volatile å…³é”®å­—ä¿®é¥°ä¹Ÿæ˜¯å¾ˆæœ‰å¿…è¦çš„ï¼Œinstance &#x3D; new Singleton() è¿™æ®µä»£ç å…¶å®æ˜¯åˆ†ä¸ºä¸‰æ­¥æ‰§è¡Œï¼š</p>\n<ol>\n<li>ä¸º instance åˆ†é…å†…å­˜ç©ºé—´</li>\n<li>åˆå§‹åŒ– instance</li>\n<li>å°† instance æŒ‡å‘åˆ†é…çš„å†…å­˜åœ°å€</li>\n</ol>\n<p>ä½†æ˜¯ç”±äº JVM å…·æœ‰æŒ‡ä»¤é‡æ’çš„ç‰¹æ€§ï¼Œæ‰§è¡Œé¡ºåºæœ‰å¯èƒ½å˜æˆ 1-&gt;3-&gt;2ã€‚æŒ‡ä»¤é‡æ’åœ¨å•çº¿ç¨‹ç¯å¢ƒä¸‹ä¸ä¼šå‡ºç°é—®é¢˜ï¼Œä½†æ˜¯åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ä¼šå¯¼è‡´ä¸€ä¸ªçº¿ç¨‹è·å¾—è¿˜æ²¡æœ‰åˆå§‹åŒ–çš„å®ä¾‹ã€‚ä¾‹å¦‚ï¼Œçº¿ç¨‹ T1 æ‰§è¡Œäº† 1 å’Œ 3ï¼Œæ­¤æ—¶ T2 è°ƒç”¨ getInstance() åå‘ç° instanceä¸ä¸ºç©ºï¼Œå› æ­¤<strong>è¿”å› T1 å®ä¾‹åŒ–ä½†æœªåˆå§‹åŒ–</strong>çš„ instanceã€‚</p>\n<h4 id=\"synchronized-åº•å±‚å®ç°åŸç†ï¼Ÿï¼ˆç›‘è§†å™¨monitorï¼‰\"><a href=\"#synchronized-åº•å±‚å®ç°åŸç†ï¼Ÿï¼ˆç›‘è§†å™¨monitorï¼‰\" class=\"headerlink\" title=\"synchronized åº•å±‚å®ç°åŸç†ï¼Ÿï¼ˆç›‘è§†å™¨monitorï¼‰\"></a>synchronized åº•å±‚å®ç°åŸç†ï¼Ÿï¼ˆç›‘è§†å™¨monitorï¼‰</h4><p>synchronized æ˜¯ Java ä¸­çš„ä¸€ä¸ªå…³é”®å­—ï¼Œé€šè¿‡ javap å‘½ä»¤ï¼ŒæŸ¥çœ‹ç›¸åº”çš„å­—èŠ‚ç æ–‡ä»¶ã€‚</p>\n<p>synchronized åŒæ­¥è¯­å¥å—çš„æƒ…å†µ</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">SynchronizedDemo</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">method</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">synchronized</span> (<span class=\"built_in\">this</span>) &#123;</span><br><span class=\"line\">            System.out.println(<span class=\"string\">&quot;synchronized ä»£ç å—&quot;</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>é€šè¿‡JDK åæ±‡ç¼–æŒ‡ä»¤ javap -c -v SynchronizedDemo</p>\n<img src=\"https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/image-20220912212554623.png\" alt=\"monitorenter&monitorexit\" style=\"zoom:50%;\" />\n\n<p>å¯ä»¥çœ‹å‡ºåœ¨æ‰§è¡ŒåŒæ­¥ä»£ç å—ä¹‹å‰ä¹‹åéƒ½æœ‰ä¸€ä¸ª monitor å­—æ ·ï¼Œå…¶ä¸­å‰é¢çš„æ˜¯ monitorenterï¼Œåé¢çš„æ˜¯ç¦»å¼€monitorexitï¼Œä¸éš¾æƒ³è±¡ä¸€ä¸ªçº¿ç¨‹æ‰§è¡ŒåŒæ­¥ä»£ç å—ï¼Œé¦–å…ˆè¦è·å–é”ï¼Œè€Œè·å–é”çš„è¿‡ç¨‹å°±æ˜¯ monitorenter ï¼Œåœ¨æ‰§è¡Œå®Œä»£ç å—ä¹‹åï¼Œè¦é‡Šæ”¾é”ï¼Œé‡Šæ”¾é”å°±æ˜¯æ‰§è¡Œ monitorexit æŒ‡ä»¤ã€‚</p>\n<p>ä¸ºä»€ä¹ˆä¼šæœ‰ä¸¤ä¸ªmonitorexitå‘¢ï¼Ÿï¼ˆline 19ï¼‰</p>\n<p>è¿™ä¸ªä¸»è¦æ˜¯é˜²æ­¢åœ¨åŒæ­¥ä»£ç å—ä¸­çº¿ç¨‹å› å¼‚å¸¸é€€å‡ºï¼Œè€Œé”æ²¡æœ‰å¾—åˆ°é‡Šæ”¾ï¼Œè¿™å¿…ç„¶ä¼šé€ æˆæ­»é”ï¼ˆç­‰å¾…çš„çº¿ç¨‹æ°¸è¿œè·å–ä¸åˆ°é”ï¼‰ã€‚<strong>å› æ­¤æœ€åä¸€ä¸ªmonitorexitæ˜¯ä¿è¯åœ¨å¼‚å¸¸æƒ…å†µä¸‹ï¼Œé”ä¹Ÿå¯ä»¥å¾—åˆ°é‡Šæ”¾ï¼Œé¿å…æ­»é”ã€‚</strong></p>\n<h4 id=\"synchronized-å¯é‡å…¥çš„åŸç†\"><a href=\"#synchronized-å¯é‡å…¥çš„åŸç†\" class=\"headerlink\" title=\"synchronized å¯é‡å…¥çš„åŸç†\"></a>synchronized å¯é‡å…¥çš„åŸç†</h4><p>é‡å…¥é”æ˜¯æŒ‡ä¸€ä¸ªçº¿ç¨‹è·å–åˆ°è¯¥é”ä¹‹åï¼Œè¯¥çº¿ç¨‹å¯ä»¥ç»§ç»­è·å¾—è¯¥é”ã€‚<br>åº•å±‚åŸç†ç»´æŠ¤ä¸€ä¸ª<strong>è®¡æ•°å™¨</strong>ï¼Œå½“çº¿ç¨‹è·å–è¯¥é”æ—¶ï¼Œè®¡æ•°å™¨åŠ ä¸€ï¼Œå†æ¬¡è·å¾—è¯¥é”æ—¶ç»§ç»­åŠ ä¸€ï¼Œé‡Šæ”¾é”æ—¶ï¼Œè®¡æ•°å™¨å‡ä¸€ï¼Œå½“è®¡æ•°å™¨å€¼ä¸º0æ—¶ï¼Œè¡¨æ˜è¯¥é”æœªè¢«ä»»ä½•çº¿ç¨‹æ‰€æŒæœ‰ï¼Œå…¶å®ƒçº¿ç¨‹å¯ä»¥ç«äº‰è·å–é”ã€‚</p>\n<h4 id=\"ä»€ä¹ˆæ˜¯è‡ªæ—‹\"><a href=\"#ä»€ä¹ˆæ˜¯è‡ªæ—‹\" class=\"headerlink\" title=\"ä»€ä¹ˆæ˜¯è‡ªæ—‹\"></a>ä»€ä¹ˆæ˜¯è‡ªæ—‹</h4><blockquote>\n<p>ä¸è¦é‡åˆ° synchronized å°±è®©ç­‰å¾…é”çš„çº¿ç¨‹è¿›å…¥é˜»å¡çŠ¶æ€ï¼Œè€Œæ˜¯è®©è¿™ä¸ªçº¿ç¨‹åœ¨ synchronized è¾¹ç•Œåšå¿™å¾ªç¯</p>\n</blockquote>\n<p>å¾ˆå¤š synchronized é‡Œé¢çš„ä»£ç åªæ˜¯ä¸€äº›å¾ˆç®€å•çš„ä»£ç ï¼Œæ‰§è¡Œæ—¶é—´éå¸¸å¿«ï¼Œæ—¢ç„¶ synchronized é‡Œé¢çš„ä»£ç æ‰§è¡Œå¾—éå¸¸å¿«ï¼Œä¸å¦¨è®©ç­‰å¾…é”çš„çº¿ç¨‹ä¸è¦è¢«é˜»å¡ï¼Œå› ä¸º<strong>çº¿ç¨‹é˜»å¡æ¶‰åŠåˆ°ç”¨æˆ·æ€å’Œå†…æ ¸æ€åˆ‡æ¢çš„é—®é¢˜å¼€é”€å¾ˆå¤§</strong>ï¼Œè€Œæ˜¯<strong>åœ¨ synchronized çš„è¾¹ç•Œåšå¿™å¾ªç¯</strong>ï¼Œè¿™å°±æ˜¯è‡ªæ—‹ã€‚å¦‚æœåšäº†å¤šæ¬¡å¾ªç¯å‘ç°è¿˜æ²¡æœ‰è·å¾—é”ï¼Œå†é˜»å¡ï¼Œè¿™æ ·å¯èƒ½æ˜¯ä¸€ç§æ›´å¥½çš„ç­–ç•¥ã€‚</p>\n<h4 id=\"å¤šçº¿ç¨‹ä¸­-synchronized-é”å‡çº§çš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ\"><a href=\"#å¤šçº¿ç¨‹ä¸­-synchronized-é”å‡çº§çš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ\" class=\"headerlink\" title=\"å¤šçº¿ç¨‹ä¸­ synchronized é”å‡çº§çš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ\"></a>å¤šçº¿ç¨‹ä¸­ synchronized é”å‡çº§çš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ</h4><blockquote>\n<p>ç›®çš„ï¼šé”å‡çº§æ˜¯ä¸ºäº†å‡ä½äº†é”å¸¦æ¥çš„æ€§èƒ½æ¶ˆè€—ã€‚</p>\n</blockquote>\n<p>Java çš„é”éƒ½æ˜¯åŸºäºå¯¹è±¡çš„ï¼ŒJava å¯¹è±¡æœ‰å¯¹è±¡å¤´ï¼Œå†…å®¹åŒ…æ‹¬ï¼š</p>\n<ol>\n<li>Mark Wordï¼Œå­˜å‚¨å¯¹è±¡çš„ hashCodeã€é”ä¿¡æ¯ç­‰ï¼›</li>\n<li>Class Metadata Addressï¼Œå­˜å‚¨åˆ°å¯¹è±¡ç±»å‹æ•°æ®çš„æŒ‡é’ˆï¼›</li>\n<li>æ•°ç»„çš„é•¿åº¦ï¼ˆå¦‚æœæ˜¯æ•°ç»„ï¼‰</li>\n</ol>\n<p>æ¯ä¸€ä¸ªçº¿ç¨‹åœ¨å‡†å¤‡è·å–å…±äº«èµ„æºæ—¶ï¼š </p>\n<p>ç¬¬ä¸€æ­¥ï¼Œæ£€æŸ¥é”çš„ MarkWord é‡Œé¢æ˜¯ä¸æ˜¯æ”¾çš„è‡ªå·±çš„ ThreadIdï¼Œå¦‚æœæ˜¯ï¼Œè¡¨ç¤ºå½“å‰çº¿ç¨‹æ˜¯å¤„äº â€œ<strong>åå‘é”</strong>â€ ï¼›</p>\n<p>ç¬¬äºŒæ­¥ï¼Œå¦‚æœé”çš„ MarkWord å­˜æ”¾çš„ä¸æ˜¯è‡ªå·±çš„ ThreadIdï¼Œè¿™ä¸ªæ—¶å€™ä¼šå°è¯•ä½¿ç”¨ CAS æ¥æ›¿æ¢ Mark Word é‡Œé¢çš„çº¿ç¨‹ ID ä¸ºæ–°çº¿ç¨‹çš„ IDï¼Œè¿™ä¸ªæ—¶å€™è¦åˆ†ä¸¤ç§æƒ…å†µï¼š</p>\n<ul>\n<li>CAS æ›¿æ¢æˆåŠŸï¼Œè¡¨ç¤ºä¹‹å‰çš„çº¿ç¨‹ä¸å­˜åœ¨äº†ï¼Œ Mark Word é‡Œé¢çš„çº¿ç¨‹ ID ä¸ºæ–°çº¿ç¨‹çš„ IDï¼Œé”ä¸ä¼šå‡çº§ï¼Œä»ç„¶ä¸ºåå‘é”ï¼›</li>\n<li>CAS æ›¿æ¢å¤±è´¥ï¼Œè¡¨ç¤ºä¹‹å‰çš„çº¿ç¨‹ä»ç„¶å­˜åœ¨ï¼Œæ ¹æ®é”çš„ MarkWord é‡Œé¢çš„ ThreadIdï¼Œé€šçŸ¥è¯¥ ThreadId çš„çº¿ç¨‹æš‚åœï¼Œä¹‹å‰çº¿ç¨‹å°† Markword çš„å†…å®¹ç½®ä¸ºç©ºï¼Œå‡çº§ä¸ºè½»é‡çº§é”ï¼Œä¼šæŒ‰ç…§è½»é‡çº§é”çš„æ–¹å¼è¿›è¡Œç«äº‰é”ã€‚</li>\n</ul>\n<p>ç¬¬ä¸‰æ­¥ï¼Œä¸¤ä¸ªçº¿ç¨‹éƒ½æŠŠé”å¯¹è±¡çš„ hashCode å¤åˆ¶åˆ°è‡ªå·±æ–°å»ºçš„ç”¨äºå­˜å‚¨é”çš„è®°å½•ç©ºé—´ï¼Œæ¥ç€å¼€å§‹é€šè¿‡ CAS æ“ä½œï¼Œ æŠŠé”å¯¹è±¡çš„ MarkWord çš„å†…å®¹ä¿®æ”¹ä¸ºè‡ªå·±æ–°å»ºçš„è®°å½•ç©ºé—´çš„åœ°å€çš„æ–¹å¼ç«äº‰ MarkWordï¼›</p>\n<p>ç¬¬å››æ­¥ï¼Œç¬¬ä¸‰æ­¥ä¸­æˆåŠŸæ‰§è¡Œ CAS çš„è·å¾—èµ„æºï¼Œå¤±è´¥çš„åˆ™è¿›å…¥è‡ªæ—‹ ï¼›</p>\n<p>ç¬¬äº”æ­¥ï¼Œè‡ªæ—‹çš„çº¿ç¨‹åœ¨è‡ªæ—‹è¿‡ç¨‹ä¸­ï¼Œå¦‚æœæˆåŠŸè·å¾—èµ„æºï¼ˆå³ä¹‹å‰è·çš„èµ„æºçš„çº¿ç¨‹æ‰§è¡Œå®Œæˆå¹¶é‡Šæ”¾äº†å…±äº«èµ„æºï¼‰ï¼Œåˆ™æ•´ä¸ªçŠ¶æ€ä¾ç„¶å¤„äº <strong>è½»é‡çº§é”</strong>çš„çŠ¶æ€ï¼›å¦‚æœè‡ªæ—‹å¤±è´¥ ï¼ˆè¿™è¾¹çš„è‡ªæ—‹æ–¹å¼å¯ä»¥é‡‡ç”¨é€‚åº”æ€§è‡ªæ—‹ï¼Œç®€å•æ¥è¯´å°±æ˜¯çº¿ç¨‹å¦‚æœè‡ªæ—‹æˆåŠŸäº†ï¼Œåˆ™ä¸‹æ¬¡è‡ªæ—‹çš„æ¬¡æ•°ä¼šæ›´å¤šï¼Œå¦‚æœè‡ªæ—‹å¤±è´¥äº†ï¼Œåˆ™è‡ªæ—‹çš„æ¬¡æ•°å°±ä¼šå‡å°‘ï¼‰ï¼›</p>\n<p>ç¬¬å…­æ­¥ï¼Œè¿›å…¥<strong>é‡é‡çº§é”</strong>çš„çŠ¶æ€ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œè‡ªæ—‹çš„çº¿ç¨‹è¿›å…¥é˜»å¡ï¼Œç­‰å¾…ç«äº‰çº¿ç¨‹æ‰§è¡Œå®Œæˆå¹¶å”¤é†’è‡ªå·±ã€‚</p>\n<h4 id=\"çº¿ç¨‹-B-æ€ä¹ˆçŸ¥é“çº¿ç¨‹-A-ä¿®æ”¹äº†å˜é‡\"><a href=\"#çº¿ç¨‹-B-æ€ä¹ˆçŸ¥é“çº¿ç¨‹-A-ä¿®æ”¹äº†å˜é‡\" class=\"headerlink\" title=\"çº¿ç¨‹ B æ€ä¹ˆçŸ¥é“çº¿ç¨‹ A ä¿®æ”¹äº†å˜é‡\"></a>çº¿ç¨‹ B æ€ä¹ˆçŸ¥é“çº¿ç¨‹ A ä¿®æ”¹äº†å˜é‡</h4><ul>\n<li><p>volatile ä¿®é¥°å˜é‡</p>\n</li>\n<li><p>synchronized ä¿®é¥°ä¿®æ”¹å˜é‡çš„æ–¹æ³•</p>\n</li>\n<li><p>lock å¯¹ä¿®æ”¹å˜é‡çš„ä»£ç å—åŠ é”</p>\n</li>\n</ul>\n<h4 id=\"synchronized-å’Œ-Lock-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\"><a href=\"#synchronized-å’Œ-Lock-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\" class=\"headerlink\" title=\"synchronized å’Œ Lock æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\"></a>synchronized å’Œ Lock æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h4><ul>\n<li>synchronized æ˜¯ Java å…³é”®å­—ï¼Œè€ŒLock æ˜¯ä¸ªæ¥å£ï¼›</li>\n<li>synchronized å¯ä»¥ç»™é™æ€æ–¹æ³•ã€å®ä¾‹æ–¹æ³•ã€ä»£ç å—åŠ é”ï¼Œè€Œ lock åªèƒ½ç»™ä»£ç å—åŠ é”ï¼›</li>\n<li>synchronized ä¸éœ€è¦æ‰‹åŠ¨è·å–é”å’Œé‡Šæ”¾é”ï¼Œè€Œ lock éœ€è¦è‡ªå·±åŠ é”å’Œé‡Šæ”¾é”ï¼›</li>\n<li>é€šè¿‡ Lock å¯ä»¥çŸ¥é“æœ‰æ²¡æœ‰æˆåŠŸè·å–é”ï¼Œè€Œ synchronized å´æ— æ³•åŠåˆ°ã€‚</li>\n</ul>\n<h4 id=\"synchronized-å’Œ-ReentrantLock-åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ\"><a href=\"#synchronized-å’Œ-ReentrantLock-åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ\" class=\"headerlink\" title=\"synchronized å’Œ ReentrantLock åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ\"></a>synchronized å’Œ ReentrantLock åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</h4><p><strong>ç›¸åŒç‚¹ï¼š</strong></p>\n<p>ä¸¤è€…éƒ½æ˜¯å¯é‡å…¥é”</p>\n<p>â€œå¯é‡å…¥é”â€æ¦‚å¿µæ˜¯ï¼šè‡ªå·±å¯ä»¥å†æ¬¡è·å–è‡ªå·±çš„å†…éƒ¨é”ã€‚æ¯”å¦‚ä¸€ä¸ªçº¿ç¨‹è·å¾—äº†æŸä¸ªå¯¹è±¡çš„é”ï¼Œæ­¤æ—¶è¿™ä¸ªå¯¹è±¡é”è¿˜æ²¡æœ‰é‡Šæ”¾ï¼Œå½“å…¶å†æ¬¡æƒ³è¦è·å–è¿™ä¸ªå¯¹è±¡çš„é”çš„æ—¶å€™è¿˜æ˜¯å¯ä»¥è·å–çš„ï¼Œ<strong>å¦‚æœä¸å¯é”é‡å…¥çš„è¯ï¼Œå°±ä¼šé€ æˆæ­»é”</strong>ã€‚åŒä¸€ä¸ªçº¿ç¨‹æ¯æ¬¡è·å–é”ï¼Œé”çš„è®¡æ•°å™¨éƒ½è‡ªå¢1ï¼Œæ‰€ä»¥è¦ç­‰åˆ°é”çš„è®¡æ•°å™¨ä¸‹é™ä¸º0æ—¶æ‰èƒ½é‡Šæ”¾é”ã€‚</p>\n<p><strong>ä¸åŒç‚¹ï¼š</strong></p>\n<ul>\n<li>synchronized æ˜¯å…³é”®å­—ï¼ŒReentrantLock æ˜¯ç±»ï¼›</li>\n<li>ReentrantLock åªé€‚ç”¨äºä»£ç å—é”ï¼Œè€Œ synchronized å¯ä»¥ä¿®é¥°ç±»ã€æ–¹æ³•ã€å˜é‡ç­‰ï¼›</li>\n</ul>\n<ul>\n<li>ReentrantLock å¿…é¡»æ‰‹åŠ¨è·å–ä¸é‡Šæ”¾é”ï¼Œè€Œ synchronized ä¸éœ€è¦æ‰‹åŠ¨é‡Šæ”¾å’Œå¼€å¯é”ï¼›</li>\n<li>äºŒè€…çš„é”æœºåˆ¶å…¶å®ä¹Ÿæ˜¯ä¸ä¸€æ ·çš„ï¼š<br>  ReentrantLock åº•å±‚è°ƒç”¨çš„æ˜¯ Unsafe çš„park æ–¹æ³•åŠ é”ï¼Œsynchronized æ“ä½œçš„åº”è¯¥æ˜¯å¯¹è±¡å¤´ä¸­ mark word</li>\n</ul>\n<h3 id=\"volatile\"><a href=\"#volatile\" class=\"headerlink\" title=\"volatile\"></a>volatile</h3><h4 id=\"ä¸ºä»€ä¹ˆä»£ç ä¼šé‡æ’åºï¼Ÿ\"><a href=\"#ä¸ºä»€ä¹ˆä»£ç ä¼šé‡æ’åºï¼Ÿ\" class=\"headerlink\" title=\"ä¸ºä»€ä¹ˆä»£ç ä¼šé‡æ’åºï¼Ÿ\"></a>ä¸ºä»€ä¹ˆä»£ç ä¼šé‡æ’åºï¼Ÿ</h4><p>åœ¨æ‰§è¡Œç¨‹åºæ—¶ï¼Œä¸ºäº†<strong>æé«˜æ€§èƒ½</strong>ï¼Œå¤„ç†å™¨å’Œç¼–è¯‘å™¨å¸¸å¸¸ä¼šå¯¹æŒ‡ä»¤è¿›è¡Œé‡æ’åºï¼Œä½†æ˜¯ä¸èƒ½éšæ„é‡æ’åºï¼Œä¸æ˜¯ä½ æƒ³æ€ä¹ˆæ’åºå°±æ€ä¹ˆæ’åºï¼Œå®ƒéœ€è¦æ»¡è¶³ä»¥ä¸‹ä¸¤ä¸ªæ¡ä»¶ï¼š</p>\n<ul>\n<li><strong>åœ¨å•çº¿ç¨‹ç¯å¢ƒä¸‹ä¸èƒ½æ”¹å˜ç¨‹åºè¿è¡Œçš„ç»“æœï¼›</strong></li>\n<li><strong>å­˜åœ¨æ•°æ®ä¾èµ–å…³ç³»çš„ä¸å…è®¸é‡æ’åº</strong></li>\n</ul>\n<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼šé‡æ’åºä¸ä¼šå½±å“å•çº¿ç¨‹ç¯å¢ƒçš„æ‰§è¡Œç»“æœï¼Œä½†æ˜¯ä¼šç ´åå¤šçº¿ç¨‹çš„æ‰§è¡Œè¯­ä¹‰ã€‚</p>\n<h4 id=\"as-if-serial-è§„åˆ™å’Œ-happens-before-è§„åˆ™çš„åŒºåˆ«\"><a href=\"#as-if-serial-è§„åˆ™å’Œ-happens-before-è§„åˆ™çš„åŒºåˆ«\" class=\"headerlink\" title=\"as-if-serial è§„åˆ™å’Œ happens-before è§„åˆ™çš„åŒºåˆ«\"></a>as-if-serial è§„åˆ™å’Œ happens-before è§„åˆ™çš„åŒºåˆ«</h4><ul>\n<li>as-if-serial è§„åˆ™ä¿è¯ <strong>å•çº¿ç¨‹</strong> å†…ç¨‹åºçš„æ‰§è¡Œç»“æœä¸è¢«æ”¹å˜ï¼Œhappens-before è§„åˆ™ä¿è¯ <strong>æ­£ç¡®åŒæ­¥çš„å¤šçº¿ç¨‹</strong> ç¨‹åºçš„æ‰§è¡Œç»“æœä¸è¢«æ”¹å˜ã€‚</li>\n<li>as-if-serial è¯­ä¹‰å’Œ happens-before è¿™ä¹ˆåšçš„ç›®çš„ï¼Œéƒ½æ˜¯ä¸ºäº†åœ¨ä¸æ”¹å˜ç¨‹åºæ‰§è¡Œç»“æœçš„å‰æä¸‹ï¼Œå°½å¯èƒ½åœ°æé«˜ç¨‹åºæ‰§è¡Œçš„å¹¶è¡Œåº¦ã€‚</li>\n</ul>\n<h4 id=\"volatile-å…³é”®å­—çš„ä½œç”¨\"><a href=\"#volatile-å…³é”®å­—çš„ä½œç”¨\" class=\"headerlink\" title=\"volatile å…³é”®å­—çš„ä½œç”¨\"></a>volatile å…³é”®å­—çš„ä½œç”¨</h4><p>å¯¹äºå¯è§æ€§ï¼ŒJava æä¾›äº† volatile å…³é”®å­—æ¥ä¿è¯å¯è§æ€§å’Œæœ‰åºæ€§ï¼ˆç¦æ­¢æŒ‡ä»¤é‡æ’ï¼‰ï¼Œä½†ä¸èƒ½ä¿è¯åŸå­æ€§ã€‚ volatile æä¾› happens-before çš„ä¿è¯ï¼Œç¡®ä¿ä¸€ä¸ªçº¿ç¨‹çš„ä¿®æ”¹èƒ½å¯¹å…¶ä»–çº¿ç¨‹æ˜¯å¯è§çš„ã€‚å½“ä¸€ä¸ªå…±äº«å˜é‡è¢« volatile ä¿®é¥°æ—¶ï¼Œå®ƒä¼šä¿è¯ä¿®æ”¹çš„å€¼ä¼šç«‹å³è¢«æ›´æ–°åˆ°ä¸»å­˜ï¼Œå½“æœ‰å…¶ä»–çº¿ç¨‹éœ€è¦è¯»å–æ—¶ï¼Œå®ƒä¼šå»å†…å­˜ä¸­è¯»å–æ–°å€¼ã€‚</p>\n<h4 id=\"JMMå†…å­˜å±éšœæ’å…¥ç­–ç•¥\"><a href=\"#JMMå†…å­˜å±éšœæ’å…¥ç­–ç•¥\" class=\"headerlink\" title=\"JMMå†…å­˜å±éšœæ’å…¥ç­–ç•¥\"></a>JMMå†…å­˜å±éšœæ’å…¥ç­–ç•¥</h4><p><strong>æ’å…¥å±éšœ</strong></p>\n<p>StoreStoreå±éšœ - volatile å†™ - StoreLoadå±éšœ</p>\n<p>volatileè¯» - LoadLoadå±éšœ - LoadStoreå±éšœ</p>\n<p><strong>volatile ä¸æ™®é€šå˜é‡çš„é‡æ’åºè§„åˆ™</strong></p>\n<ol>\n<li>å¦‚æœç¬¬ä¸€ä¸ªæ“ä½œæ˜¯ volatile è¯»ï¼Œé‚£æ— è®ºç¬¬äºŒä¸ªæ“ä½œæ˜¯ä»€ä¹ˆï¼Œéƒ½ä¸èƒ½é‡æ’åºï¼›</li>\n<li>å¦‚æœç¬¬äºŒä¸ªæ“ä½œæ˜¯ volatile å†™ï¼Œé‚£æ— è®ºç¬¬ä¸€ä¸ªæ“ä½œæ˜¯ä»€ä¹ˆï¼Œéƒ½ä¸èƒ½é‡æ’åºï¼›</li>\n<li>å¦‚æœç¬¬ä¸€ä¸ªæ“ä½œæ˜¯ volatile å†™ï¼Œç¬¬äºŒä¸ªæ“ä½œæ˜¯ volatile è¯»ï¼Œé‚£ä¸èƒ½é‡æ’åºã€‚</li>\n</ol>\n<h4 id=\"volatile-èƒ½ä½¿å¾—ä¸€ä¸ªéåŸå­æ“ä½œå˜æˆåŸå­æ“ä½œå—ï¼Ÿ\"><a href=\"#volatile-èƒ½ä½¿å¾—ä¸€ä¸ªéåŸå­æ“ä½œå˜æˆåŸå­æ“ä½œå—ï¼Ÿ\" class=\"headerlink\" title=\"volatile èƒ½ä½¿å¾—ä¸€ä¸ªéåŸå­æ“ä½œå˜æˆåŸå­æ“ä½œå—ï¼Ÿ\"></a>volatile èƒ½ä½¿å¾—ä¸€ä¸ªéåŸå­æ“ä½œå˜æˆåŸå­æ“ä½œå—ï¼Ÿ</h4><p>volatile åªèƒ½ä¿è¯å¯è§æ€§å’Œæœ‰åºæ€§è€Œä¸èƒ½ä¿è¯åŸå­æ€§ï¼Œä½†ç”¨ volatile ä¿®é¥° long å’Œ double å¯ä»¥ä¿è¯å…¶æ“ä½œåŸå­æ€§ã€‚</p>\n<h4 id=\"volatile-ä¿®é¥°ç¬¦çš„æœ‰è¿‡ä»€ä¹ˆå®è·µï¼Ÿ\"><a href=\"#volatile-ä¿®é¥°ç¬¦çš„æœ‰è¿‡ä»€ä¹ˆå®è·µï¼Ÿ\" class=\"headerlink\" title=\"volatile ä¿®é¥°ç¬¦çš„æœ‰è¿‡ä»€ä¹ˆå®è·µï¼Ÿ\"></a>volatile ä¿®é¥°ç¬¦çš„æœ‰è¿‡ä»€ä¹ˆå®è·µï¼Ÿ</h4><p>å•ä¾‹æ¨¡å¼-åŒé‡é”æ£€éªŒé‡Œé¢ç”¨ volatile ä¿®é¥°å®ä¾‹å˜é‡ã€‚</p>\n<h4 id=\"volatile-å’Œ-synchronized-çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ\"><a href=\"#volatile-å’Œ-synchronized-çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ\" class=\"headerlink\" title=\"volatile å’Œ synchronized çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ\"></a>volatile å’Œ synchronized çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</h4><ul>\n<li>volatile æ˜¯å˜é‡ä¿®é¥°ç¬¦ï¼›synchronized å¯ä»¥ä¿®é¥°ç±»ã€æ–¹æ³•ã€ä»£ç å—ï¼›</li>\n<li>volatile ä»…èƒ½å®ç°å˜é‡çš„ä¿®æ”¹å¯è§æ€§å’Œæœ‰åºæ€§ï¼Œä¸èƒ½ä¿è¯åŸå­æ€§ï¼Œ<br>  è€Œ synchronized åˆ™å¯ä»¥ä¿è¯å˜é‡çš„ä¿®æ”¹åŸå­æ€§å’Œå¯è§æ€§ï¼›</li>\n<li>volatile ä¸ä¼šé€ æˆçº¿ç¨‹çš„é˜»å¡ï¼›synchronized å¯èƒ½ä¼šé€ æˆçº¿ç¨‹çš„é˜»å¡ï¼›</li>\n<li><strong>volatileå…³é”®å­—</strong>æ˜¯çº¿ç¨‹åŒæ­¥çš„<strong>è½»é‡çº§å®ç°</strong>ï¼Œæ‰€ä»¥<strong>volatileæ€§èƒ½è‚¯å®šæ¯”synchronizedå…³é”®å­—è¦å¥½</strong>ã€‚synchronizedå…³é”®å­—åœ¨JavaSE1.6ä¹‹åè¿›è¡Œäº†ä¸»è¦åŒ…æ‹¬ä¸ºäº†<strong>å‡å°‘è·å¾—é”å’Œé‡Šæ”¾é”å¸¦æ¥çš„æ€§èƒ½æ¶ˆè€—</strong>è€Œå¼•å…¥çš„åå‘é”å’Œè½»é‡çº§é”ä»¥åŠå…¶å®ƒå„ç§ä¼˜åŒ–ä¹‹åæ‰§è¡Œæ•ˆç‡æœ‰äº†æ˜¾è‘—æå‡ï¼Œ<strong>å®é™…å¼€å‘ä¸­ä½¿ç”¨ synchronized å…³é”®å­—çš„åœºæ™¯è¿˜æ˜¯æ›´å¤šä¸€äº›</strong>ã€‚</li>\n</ul>\n<h2 id=\"Lock-ä½“ç³»\"><a href=\"#Lock-ä½“ç³»\" class=\"headerlink\" title=\"Lock ä½“ç³»\"></a>Lock ä½“ç³»</h2><h3 id=\"Lock-ç®€ä»‹\"><a href=\"#Lock-ç®€ä»‹\" class=\"headerlink\" title=\"Lock ç®€ä»‹\"></a>Lock ç®€ä»‹</h3><h4 id=\"Lock-æ¥å£æ˜¯ä»€ä¹ˆï¼Ÿå¯¹æ¯”åŒæ­¥å®ƒæœ‰ä»€ä¹ˆä¼˜åŠ¿ï¼Ÿ\"><a href=\"#Lock-æ¥å£æ˜¯ä»€ä¹ˆï¼Ÿå¯¹æ¯”åŒæ­¥å®ƒæœ‰ä»€ä¹ˆä¼˜åŠ¿ï¼Ÿ\" class=\"headerlink\" title=\"Lock æ¥å£æ˜¯ä»€ä¹ˆï¼Ÿå¯¹æ¯”åŒæ­¥å®ƒæœ‰ä»€ä¹ˆä¼˜åŠ¿ï¼Ÿ\"></a>Lock æ¥å£æ˜¯ä»€ä¹ˆï¼Ÿå¯¹æ¯”åŒæ­¥å®ƒæœ‰ä»€ä¹ˆä¼˜åŠ¿ï¼Ÿ</h4><p>Lock æ¥å£æ¯”åŒæ­¥æ–¹æ³•å’ŒåŒæ­¥å—æä¾›äº†æ›´å…·æ‰©å±•æ€§çš„é”æ“ä½œã€‚</p>\n<p>ï¼ˆ1ï¼‰å¯ä»¥ä½¿é”æ›´<strong>å…¬å¹³</strong></p>\n<p>ï¼ˆ2ï¼‰å¯ä»¥ä½¿çº¿ç¨‹åœ¨<strong>ç­‰å¾…é”çš„æ—¶å€™å“åº”ä¸­æ–­</strong></p>\n<p>ï¼ˆ3ï¼‰å¯ä»¥<strong>è®©çº¿ç¨‹å°è¯•è·å–é”ï¼Œå¹¶åœ¨æ— æ³•è·å–é”çš„æ—¶å€™ç«‹å³è¿”å›æˆ–è€…ç­‰å¾…ä¸€æ®µæ—¶é—´</strong></p>\n<h4 id=\"ä¹è§‚é”å’Œæ‚²è§‚é”çš„ç†è§£åŠå¦‚ä½•å®ç°ï¼Œæœ‰å“ªäº›å®ç°æ–¹å¼ï¼Ÿ\"><a href=\"#ä¹è§‚é”å’Œæ‚²è§‚é”çš„ç†è§£åŠå¦‚ä½•å®ç°ï¼Œæœ‰å“ªäº›å®ç°æ–¹å¼ï¼Ÿ\" class=\"headerlink\" title=\"ä¹è§‚é”å’Œæ‚²è§‚é”çš„ç†è§£åŠå¦‚ä½•å®ç°ï¼Œæœ‰å“ªäº›å®ç°æ–¹å¼ï¼Ÿ\"></a>ä¹è§‚é”å’Œæ‚²è§‚é”çš„ç†è§£åŠå¦‚ä½•å®ç°ï¼Œæœ‰å“ªäº›å®ç°æ–¹å¼ï¼Ÿ</h4><p>æ‚²è§‚é”ï¼šæ€»æ˜¯å‡è®¾æœ€åçš„æƒ…å†µï¼Œæ¯æ¬¡å»æ‹¿æ•°æ®çš„æ—¶å€™éƒ½è®¤ä¸ºåˆ«äººä¼šä¿®æ”¹ï¼Œæ‰€ä»¥æ¯æ¬¡åœ¨æ‹¿æ•°æ®çš„æ—¶å€™éƒ½ä¼šä¸Šé”ï¼Œè¿™æ ·åˆ«äººæƒ³æ‹¿è¿™ä¸ªæ•°æ®å°±ä¼šé˜»å¡ç›´åˆ°å®ƒæ‹¿åˆ°é”ã€‚<br>    ä¼ ç»Ÿçš„å…³ç³»å‹æ•°æ®åº“é‡Œè¾¹å°±ç”¨åˆ°äº†å¾ˆå¤šè¿™ç§é”æœºåˆ¶ï¼Œæ¯”å¦‚è¡Œé”ï¼Œè¡¨é”ç­‰ï¼Œè¯»é”ï¼Œå†™é”ç­‰ï¼Œéƒ½æ˜¯åœ¨åšæ“ä½œä¹‹å‰å…ˆä¸Šé”ã€‚å†æ¯”å¦‚ Java é‡Œé¢çš„åŒæ­¥åŸè¯­ synchronized å…³é”®å­—çš„å®ç°ä¹Ÿæ˜¯æ‚²è§‚é”ã€‚</p>\n<p>ä¹è§‚é”ï¼šé¡¾åæ€ä¹‰ï¼Œå°±æ˜¯å¾ˆä¹è§‚ï¼Œæ¯æ¬¡å»æ‹¿æ•°æ®çš„æ—¶å€™éƒ½è®¤ä¸ºåˆ«äººä¸ä¼šä¿®æ”¹ï¼Œæ‰€ä»¥ä¸ä¼šä¸Šé”ï¼Œä½†æ˜¯åœ¨æ›´æ–°çš„æ—¶å€™ä¼šåˆ¤æ–­ä¸€ä¸‹åœ¨æ­¤æœŸé—´åˆ«äººæœ‰æ²¡æœ‰å»æ›´æ–°è¿™ä¸ªæ•°æ®ï¼Œå¯ä»¥ä½¿ç”¨ç‰ˆæœ¬å·ç­‰æœºåˆ¶ã€‚<br>    ä¹è§‚é”é€‚ç”¨äºå¤šè¯»çš„åº”ç”¨ç±»å‹ï¼Œè¿™æ ·å¯ä»¥æé«˜ååé‡ï¼Œæ¯”å¦‚ atomic åŒ…ä¸‹é¢çš„åŸå­å˜é‡ç±»å°±æ˜¯ä½¿ç”¨äº†ä¹è§‚é”çš„ä¸€ç§å®ç°æ–¹å¼ CAS å®ç°çš„ã€‚</p>\n<h4 id=\"ä»€ä¹ˆæ˜¯-CAS\"><a href=\"#ä»€ä¹ˆæ˜¯-CAS\" class=\"headerlink\" title=\"ä»€ä¹ˆæ˜¯ CAS\"></a>ä»€ä¹ˆæ˜¯ CAS</h4><p>CAS æ˜¯ compare and swap çš„ç¼©å†™ï¼Œå³æˆ‘ä»¬æ‰€è¯´çš„æ¯”è¾ƒäº¤æ¢ï¼Œæ˜¯ä¸€ç§ä¹è§‚é”æ“ä½œã€‚</p>\n<p>CAS æ“ä½œåŒ…å«ä¸‰ä¸ªæ“ä½œæ•° â€”â€” å†…å­˜ä½ç½®ï¼ˆVï¼‰ã€é¢„æœŸåŸå€¼ï¼ˆAï¼‰å’Œæ–°å€¼ï¼ˆBï¼‰ã€‚</p>\n<p>å¦‚æœå†…å­˜åœ°å€ V é‡Œé¢çš„å€¼å’Œ A çš„å€¼æ˜¯ä¸€æ ·çš„ï¼Œé‚£ä¹ˆå°±å°†å†…å­˜é‡Œé¢çš„å€¼æ›´æ–°æˆ Bã€‚</p>\n<h4 id=\"Javaå®ç°CASçš„åŸç†-Unsafeç±»\"><a href=\"#Javaå®ç°CASçš„åŸç†-Unsafeç±»\" class=\"headerlink\" title=\"Javaå®ç°CASçš„åŸç† - Unsafeç±»\"></a>Javaå®ç°CASçš„åŸç† - Unsafeç±»</h4><p>åœ¨Javaä¸­ï¼Œæœ‰ä¸€ä¸ª<code>Unsafe</code>ç±»ï¼Œå®ƒåœ¨<code>sun.misc</code>åŒ…ä¸­ã€‚å®ƒé‡Œé¢æ˜¯ä¸€äº›<code>native</code>æ–¹æ³•ï¼ˆç”±åº•å±‚çš„JVMä½¿ç”¨Cæˆ–è€…C++å»å®ç°ï¼‰ï¼Œå…¶ä¸­å°±æœ‰å‡ ä¸ªå…³äºCASçš„ï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">boolean</span> <span class=\"title function_\">compareAndSwapObject</span><span class=\"params\">(Object o, <span class=\"type\">long</span> offset,Object expected, Object x)</span>;</span><br><span class=\"line\"><span class=\"type\">boolean</span> <span class=\"title function_\">compareAndSwapInt</span><span class=\"params\">(Object o, <span class=\"type\">long</span> offset,<span class=\"type\">int</span> expected,<span class=\"type\">int</span> x)</span>;</span><br><span class=\"line\"><span class=\"type\">boolean</span> <span class=\"title function_\">compareAndSwapLong</span><span class=\"params\">(Object o, <span class=\"type\">long</span> offset,<span class=\"type\">long</span> expected,<span class=\"type\">long</span> x)</span>;</span><br></pre></td></tr></table></figure>\n\n<p>å½“ç„¶ï¼Œä»–ä»¬éƒ½æ˜¯<code>public native</code>çš„ã€‚</p>\n<p>Unsafe ä¸­å¯¹ CAS çš„å®ç°æ˜¯ C++ å†™çš„ï¼Œå®ƒçš„å…·ä½“å®ç°å’Œæ“ä½œç³»ç»Ÿã€CPU éƒ½æœ‰å…³ç³»ã€‚</p>\n<p>Linux çš„ X86 ä¸‹ä¸»è¦æ˜¯é€šè¿‡<code>cmpxchgl</code>è¿™ä¸ªæŒ‡ä»¤åœ¨ CPU çº§å®Œæˆ CAS æ“ä½œçš„ï¼Œä½†åœ¨å¤šå¤„ç†å™¨æƒ…å†µä¸‹å¿…é¡»ä½¿ç”¨<code>lock</code>æŒ‡ä»¤åŠ é”æ¥å®Œæˆã€‚å½“ç„¶ä¸åŒçš„æ“ä½œç³»ç»Ÿå’Œå¤„ç†å™¨çš„å®ç°ä¼šæœ‰æ‰€ä¸åŒï¼Œå¤§å®¶å¯ä»¥è‡ªè¡Œäº†è§£ã€‚</p>\n<p>å½“ç„¶ï¼ŒUnsafeç±»é‡Œé¢è¿˜æœ‰å…¶å®ƒæ–¹æ³•ç”¨äºä¸åŒçš„ç”¨é€”ã€‚æ¯”å¦‚æ”¯æŒçº¿ç¨‹æŒ‚èµ·å’Œæ¢å¤çš„<code>park</code>å’Œ<code>unpark</code>ï¼Œ LockSupportç±»åº•å±‚å°±æ˜¯è°ƒç”¨äº†è¿™ä¸¤ä¸ªæ–¹æ³•ã€‚è¿˜æœ‰æ”¯æŒåå°„æ“ä½œçš„<code>allocateInstance()</code>æ–¹æ³•ã€‚</p>\n<h4 id=\"CAS-ä¼šäº§ç”Ÿä»€ä¹ˆé—®é¢˜ï¼Ÿ\"><a href=\"#CAS-ä¼šäº§ç”Ÿä»€ä¹ˆé—®é¢˜ï¼Ÿ\" class=\"headerlink\" title=\"CAS ä¼šäº§ç”Ÿä»€ä¹ˆé—®é¢˜ï¼Ÿ\"></a>CAS ä¼šäº§ç”Ÿä»€ä¹ˆé—®é¢˜ï¼Ÿ</h4><p>1ã€<strong>ABA é—®é¢˜</strong>ï¼š</p>\n<p>æ¯”å¦‚è¯´ä¸€ä¸ªçº¿ç¨‹ one ä»å†…å­˜ä½ç½® V ä¸­å–å‡º Aï¼Œè¿™æ—¶å€™å¦ä¸€ä¸ªçº¿ç¨‹ two ä¹Ÿä»å†…å­˜ä¸­å–å‡º Aï¼Œå¹¶ä¸” two è¿›è¡Œäº†ä¸€äº›æ“ä½œå˜æˆäº† Bï¼Œç„¶å two åˆå°† V ä½ç½®çš„æ•°æ®å˜æˆ Aï¼Œè¿™æ—¶å€™çº¿ç¨‹ one è¿›è¡Œ CAS æ“ä½œå‘ç°å†…å­˜ä¸­ä»ç„¶æ˜¯ Aï¼Œç„¶å one æ“ä½œæˆåŠŸã€‚å°½ç®¡çº¿ç¨‹ one çš„ CAS æ“ä½œæˆåŠŸï¼Œä½†å¯èƒ½å­˜åœ¨æ½œè—çš„é—®é¢˜ã€‚å¯ä»¥åœ¨å˜é‡ä¸ŠåŠ ä¸€ä¸ªç‰ˆæœ¬æˆ³ã€‚ä» Java1.5 å¼€å§‹ JDK çš„ atomic åŒ…é‡Œæä¾›äº†ä¸€ä¸ªç±» AtomicStampedReference æ¥è§£å†³ ABA é—®é¢˜ã€‚</p>\n<p>2ã€<strong>å¾ªç¯æ—¶é—´é•¿å¼€é”€å¤§</strong>ï¼š</p>\n<p>å¯¹äºèµ„æºç«äº‰ä¸¥é‡ï¼ˆçº¿ç¨‹å†²çªä¸¥é‡ï¼‰çš„æƒ…å†µï¼ŒCAS è‡ªæ—‹çš„æ¦‚ç‡ä¼šæ¯”è¾ƒå¤§ï¼Œä»è€Œæµªè´¹æ›´å¤šçš„ CPU èµ„æºï¼Œæ•ˆç‡ä½äº synchronizedã€‚</p>\n<p>3ã€<strong>åªèƒ½ä¿è¯ä¸€ä¸ªå…±äº«å˜é‡çš„åŸå­æ“ä½œ</strong>ï¼š</p>\n<p>å½“å¯¹ä¸€ä¸ªå…±äº«å˜é‡æ‰§è¡Œæ“ä½œæ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¾ªç¯ CAS çš„æ–¹å¼æ¥ä¿è¯åŸå­æ“ä½œï¼Œä½†æ˜¯<strong>å¯¹å¤šä¸ªå…±äº«å˜é‡æ“ä½œæ—¶ï¼Œå¾ªç¯ CAS å°±æ— æ³•ä¿è¯æ“ä½œçš„åŸå­æ€§ï¼Œè¿™ä¸ªæ—¶å€™å°±å¯ä»¥ç”¨é”</strong>ã€‚</p>\n<h4 id=\"æ­»é”ä¸æ´»é”çš„åŒºåˆ«ï¼Œæ­»é”ä¸é¥¥é¥¿çš„åŒºåˆ«ï¼Ÿ\"><a href=\"#æ­»é”ä¸æ´»é”çš„åŒºåˆ«ï¼Œæ­»é”ä¸é¥¥é¥¿çš„åŒºåˆ«ï¼Ÿ\" class=\"headerlink\" title=\"æ­»é”ä¸æ´»é”çš„åŒºåˆ«ï¼Œæ­»é”ä¸é¥¥é¥¿çš„åŒºåˆ«ï¼Ÿ\"></a>æ­»é”ä¸æ´»é”çš„åŒºåˆ«ï¼Œæ­»é”ä¸é¥¥é¥¿çš„åŒºåˆ«ï¼Ÿ</h4><blockquote>\n<p>åŒºåˆ«ï¼šæ­»é”åŠ¨ä¸äº†äº†ï¼›æ´»é”ä¸€ç›´é‡å¤å°è¯•ã€å¤±è´¥ã€å°è¯•ã€å¤±è´¥ã€‚</p>\n</blockquote>\n<p>æ­»é”ï¼šæ˜¯æŒ‡ä¸¤ä¸ªæˆ–ä¸¤ä¸ªä»¥ä¸Šçš„è¿›ç¨‹ï¼ˆæˆ–çº¿ç¨‹ï¼‰åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œå› äº‰å¤ºèµ„æºè€Œé€ æˆçš„ä¸€ç§äº’ç›¸ç­‰å¾…çš„ç°è±¡ï¼Œè‹¥æ— å¤–åŠ›ä½œç”¨ï¼Œå®ƒä»¬éƒ½å°†æ— æ³•æ¨è¿›ä¸‹å»ã€‚</p>\n<p>æ´»é”ï¼šä»»åŠ¡æˆ–è€…æ‰§è¡Œè€…æ²¡æœ‰è¢«é˜»å¡ï¼Œç”±äºæŸäº›æ¡ä»¶æ²¡æœ‰æ»¡è¶³ï¼Œå¯¼è‡´<strong>ä¸€ç›´é‡å¤å°è¯•ï¼Œå¤±è´¥ï¼Œå°è¯•ï¼Œå¤±è´¥</strong>ã€‚</p>\n<p>æ´»é”å’Œæ­»é”çš„åŒºåˆ«åœ¨äºï¼Œå¤„äºæ´»é”çš„å®ä½“æ˜¯åœ¨ä¸æ–­çš„æ”¹å˜çŠ¶æ€ï¼Œè¿™å°±æ˜¯æ‰€è°“çš„â€œæ´»â€ï¼Œ è€Œå¤„äºæ­»é”çš„å®ä½“è¡¨ç°ä¸ºç­‰å¾…ï¼›æ´»é”æœ‰å¯èƒ½è‡ªè¡Œè§£å¼€ï¼Œæ­»é”åˆ™ä¸èƒ½ã€‚</p>\n<p>é¥¥é¥¿ï¼šä¸€ä¸ªæˆ–è€…å¤šä¸ªçº¿ç¨‹å› ä¸ºç§ç§åŸå› æ— æ³•è·å¾—æ‰€éœ€è¦çš„èµ„æºï¼Œå¯¼è‡´ä¸€ç›´æ— æ³•æ‰§è¡Œçš„çŠ¶æ€ã€‚</p>\n<p>Java ä¸­å¯¼è‡´é¥¥é¥¿çš„åŸå› ï¼šé«˜ä¼˜å…ˆçº§çº¿ç¨‹åå™¬æ‰€æœ‰çš„ä½ä¼˜å…ˆçº§çº¿ç¨‹çš„ CPU æ—¶é—´ã€‚</p>\n<h3 id=\"AQSè¯¦è§£\"><a href=\"#AQSè¯¦è§£\" class=\"headerlink\" title=\"AQSè¯¦è§£\"></a>AQSè¯¦è§£</h3><h4 id=\"AQS-ä»‹ç»\"><a href=\"#AQS-ä»‹ç»\" class=\"headerlink\" title=\"AQS ä»‹ç»\"></a>AQS ä»‹ç»</h4><p>AQS çš„å…¨ç§°ä¸ºï¼ˆAbstractQueuedSynchronizerï¼‰ï¼ŒæŠ½è±¡é˜Ÿåˆ—åŒæ­¥å™¨ã€‚</p>\n<p>ä½¿ç”¨ AQS èƒ½ç®€å•ä¸”é«˜æ•ˆåœ°æ„é€ å‡ºåº”ç”¨å¹¿æ³›çš„å¤§é‡çš„åŒæ­¥å™¨ï¼Œæ¯”å¦‚æˆ‘ä»¬æåˆ°çš„ReentrantLockï¼ŒSemaphoreï¼Œå…¶ä»–çš„è¯¸å¦‚ ReentrantReadWriteLockï¼ŒSynchronousQueueï¼ŒFutureTask ç­‰ç­‰çš†æ˜¯åŸºäº AQS çš„ã€‚å½“ç„¶ï¼Œæˆ‘ä»¬è‡ªå·±ä¹Ÿèƒ½åˆ©ç”¨ AQS éå¸¸è½»æ¾å®¹æ˜“åœ°æ„é€ å‡ºç¬¦åˆæˆ‘ä»¬è‡ªå·±éœ€æ±‚çš„åŒæ­¥å™¨ã€‚</p>\n<h4 id=\"AQS-åŸç†åˆ†æ\"><a href=\"#AQS-åŸç†åˆ†æ\" class=\"headerlink\" title=\"AQS åŸç†åˆ†æ\"></a>AQS åŸç†åˆ†æ</h4><p><strong>å¦‚æœè¢«è¯·æ±‚çš„å…±äº«èµ„æºç©ºé—²ï¼Œåˆ™å°†å½“å‰è¯·æ±‚èµ„æºçš„çº¿ç¨‹è®¾ç½®ä¸ºæœ‰æ•ˆçš„å·¥ä½œçº¿ç¨‹ï¼Œå¹¶ä¸”å°†å…±äº«èµ„æºè®¾ç½®ä¸ºé”å®šçŠ¶æ€ã€‚<br>å¦‚æœè¢«è¯·æ±‚çš„å…±äº«èµ„æºè¢«å ç”¨ï¼Œé‚£ä¹ˆå°±ä½¿ç”¨ CLH é˜Ÿåˆ—ï¼Œå°†æš‚æ—¶è·å–ä¸åˆ°é”çš„çº¿ç¨‹åŠ å…¥åˆ°é˜Ÿåˆ—ä¸­ã€‚</strong></p>\n<blockquote>\n<p>CLH(Craig,Landin,and Hagersten)é˜Ÿåˆ—æ˜¯ä¸€ä¸ªè™šæ‹Ÿçš„åŒå‘é˜Ÿåˆ—ï¼ˆè™šæ‹Ÿçš„åŒå‘é˜Ÿåˆ—å³ä¸å­˜åœ¨é˜Ÿåˆ—å®ä¾‹ï¼Œä»…å­˜åœ¨ç»“ç‚¹ä¹‹é—´çš„å…³è”å…³ç³»ï¼‰ã€‚AQS æ˜¯å°†æ¯æ¡è¯·æ±‚å…±äº«èµ„æºçš„çº¿ç¨‹å°è£…æˆä¸€ä¸ª CLH é˜Ÿåˆ—çš„ä¸€ä¸ªç»“ç‚¹ï¼ˆNodeï¼‰æ¥å®ç°é”çš„åˆ†é…ã€‚</p>\n</blockquote>\n<p>çœ‹ä¸ªAQS(AbstractQueuedSynchronizer)åŸç†å›¾ï¼š</p>\n<p><img src=\"https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/TyporaNotes11474088-c906e727d699fa9c.png\" alt=\"AQSåŸç†å›¾\"></p>\n<p>AQSä½¿ç”¨ä¸€ä¸ª volatile int ç±»å‹çš„æˆå‘˜å˜é‡ state æ¥è¡¨ç¤ºåŒæ­¥çŠ¶æ€ï¼Œé€šè¿‡å†…ç½®çš„ CLH é˜Ÿåˆ—æ¥å®Œæˆè·å–èµ„æºçº¿ç¨‹çš„æ’é˜Ÿå·¥ä½œã€‚AQSä½¿ç”¨ CAS å¯¹è¯¥åŒæ­¥çŠ¶æ€è¿›è¡ŒåŸå­æ“ä½œå®ç°å¯¹å…¶å€¼çš„ä¿®æ”¹ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">volatile</span> <span class=\"type\">int</span> state;\t<span class=\"comment\">// å…±äº«å˜é‡ï¼Œä½¿ç”¨volatileä¿®é¥°ä¿è¯çº¿ç¨‹å¯è§æ€§</span></span><br></pre></td></tr></table></figure>\n\n<p>çŠ¶æ€ä¿¡æ¯é€šè¿‡ protected ç±»å‹çš„ getStateï¼ŒsetStateï¼ŒcompareAndSetStateè¿›è¡Œæ“ä½œ</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// è¿”å›åŒæ­¥çŠ¶æ€çš„å½“å‰å€¼</span></span><br><span class=\"line\"><span class=\"keyword\">protected</span> <span class=\"keyword\">final</span> <span class=\"type\">int</span> <span class=\"title function_\">getState</span><span class=\"params\">()</span> &#123;  </span><br><span class=\"line\">    <span class=\"keyword\">return</span> state;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// è®¾ç½®åŒæ­¥çŠ¶æ€çš„å€¼</span></span><br><span class=\"line\"><span class=\"keyword\">protected</span> <span class=\"keyword\">final</span> <span class=\"keyword\">void</span> <span class=\"title function_\">setState</span><span class=\"params\">(<span class=\"type\">int</span> newState)</span> &#123; </span><br><span class=\"line\">    state = newState;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// åŸå­åœ°ï¼ˆCASæ“ä½œï¼‰å°†åŒæ­¥çŠ¶æ€å€¼è®¾ç½®ä¸ºç»™å®šå€¼updateå¦‚æœå½“å‰åŒæ­¥çŠ¶æ€çš„å€¼ç­‰äºexpectï¼ˆæœŸæœ›å€¼ï¼‰</span></span><br><span class=\"line\"><span class=\"keyword\">protected</span> <span class=\"keyword\">final</span> <span class=\"type\">boolean</span> <span class=\"title function_\">compareAndSetState</span><span class=\"params\">(<span class=\"type\">int</span> expect, <span class=\"type\">int</span> update)</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> unsafe.compareAndSwapInt(<span class=\"built_in\">this</span>, stateOffset, expect, update);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><strong>AQS å¯¹èµ„æºçš„å…±äº«æ–¹å¼</strong></p>\n<p>AQSå®šä¹‰ä¸¤ç§èµ„æºå…±äº«æ–¹å¼</p>\n<ul>\n<li><strong>Exclusive</strong>ï¼ˆç‹¬å ï¼‰ï¼šåªæœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½æ‰§è¡Œï¼Œå¦‚ ReentrantLockã€‚åˆå¯åˆ†ä¸ºå…¬å¹³é”å’Œéå…¬å¹³é”ï¼š<ul>\n<li>å…¬å¹³é”ï¼šæŒ‰ç…§çº¿ç¨‹åœ¨é˜Ÿåˆ—ä¸­çš„æ’é˜Ÿé¡ºåºï¼Œå…ˆåˆ°è€…å…ˆæ‹¿åˆ°é”</li>\n<li>éå…¬å¹³é”ï¼šå½“çº¿ç¨‹è¦è·å–é”æ—¶ï¼Œæ— è§†é˜Ÿåˆ—é¡ºåºç›´æ¥å»æŠ¢é”ï¼Œè°æŠ¢åˆ°å°±æ˜¯è°çš„</li>\n</ul>\n</li>\n<li><strong>Share</strong>ï¼ˆå…±äº«ï¼‰ï¼šå¤šä¸ªçº¿ç¨‹å¯åŒæ—¶æ‰§è¡Œï¼Œå¦‚ Semaphore&#x2F;CountDownLatchã€‚Semaphoreã€CountDownLatchã€ CyclicBarrierã€ReadWriteLock æˆ‘ä»¬éƒ½ä¼šåœ¨åé¢è®²åˆ°ã€‚</li>\n</ul>\n<p><strong>AQSåº•å±‚ä½¿ç”¨äº†æ¨¡æ¿æ–¹æ³•æ¨¡å¼</strong></p>\n<p>åŒæ­¥å™¨çš„è®¾è®¡æ˜¯åŸºäºæ¨¡æ¿æ–¹æ³•æ¨¡å¼çš„ï¼Œå¦‚æœéœ€è¦è‡ªå®šä¹‰åŒæ­¥å™¨ï¼ˆ<strong>æ¨¡æ¿æ–¹æ³•æ¨¡å¼</strong>å¾ˆç»å…¸çš„ä¸€ä¸ªåº”ç”¨ï¼‰ï¼š</p>\n<ol>\n<li>ä½¿ç”¨è€…ç»§æ‰¿ AQS å¹¶é‡å†™æŒ‡å®šçš„æ–¹æ³•ã€‚ï¼ˆå¯¹å…±äº«èµ„æº state çš„è·å–å’Œé‡Šæ”¾ï¼‰</li>\n<li>è°ƒç”¨ AQS çš„æ¨¡æ¿æ–¹æ³•ï¼Œä¼šè¿›ä¸€æ­¥è°ƒç”¨ä½¿ç”¨è€…é‡å†™çš„æ–¹æ³•ã€‚</li>\n</ol>\n<p><strong>AQSä½¿ç”¨äº†æ¨¡æ¿æ–¹æ³•æ¨¡å¼ï¼Œè‡ªå®šä¹‰åŒæ­¥å™¨æ—¶éœ€è¦é‡å†™ä¸‹é¢å‡ ä¸ªAQSæä¾›çš„æ¨¡æ¿æ–¹æ³•ï¼š</strong></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">isHeldExclusively()\t<span class=\"comment\">// è¯¥çº¿ç¨‹æ˜¯å¦æ­£åœ¨ç‹¬å èµ„æºã€‚åªæœ‰ç”¨åˆ°conditionæ‰éœ€è¦å»å®ç°å®ƒã€‚</span></span><br><span class=\"line\">tryAcquire(<span class=\"type\">int</span>)\t<span class=\"comment\">// ç‹¬å æ–¹å¼ã€‚å°è¯•è·å–èµ„æºï¼ŒæˆåŠŸåˆ™è¿”å›trueï¼Œå¤±è´¥åˆ™è¿”å›falseã€‚</span></span><br><span class=\"line\">tryRelease(<span class=\"type\">int</span>)\t<span class=\"comment\">// ç‹¬å æ–¹å¼ã€‚å°è¯•é‡Šæ”¾èµ„æºï¼ŒæˆåŠŸåˆ™è¿”å›trueï¼Œå¤±è´¥åˆ™è¿”å›falseã€‚</span></span><br><span class=\"line\">tryAcquireShared(<span class=\"type\">int</span>)\t<span class=\"comment\">// å…±äº«æ–¹å¼ã€‚å°è¯•è·å–èµ„æºã€‚è´Ÿæ•°è¡¨ç¤ºå¤±è´¥ï¼›0è¡¨ç¤ºæˆåŠŸï¼Œä½†æ²¡æœ‰å‰©ä½™å¯ç”¨èµ„æºï¼›æ­£æ•°è¡¨ç¤ºæˆåŠŸï¼Œä¸”æœ‰å‰©ä½™èµ„æºã€‚</span></span><br><span class=\"line\">tryReleaseShared(<span class=\"type\">int</span>)\t<span class=\"comment\">// å…±äº«æ–¹å¼ã€‚å°è¯•é‡Šæ”¾èµ„æºï¼ŒæˆåŠŸåˆ™è¿”å›trueï¼Œå¤±è´¥åˆ™è¿”å›falseã€‚</span></span><br></pre></td></tr></table></figure>\n\n<p>ä»¥ ReentrantLock ä¸ºä¾‹ï¼Œstate åˆå§‹åŒ–ä¸º0ï¼Œè¡¨ç¤ºæœªé”å®šçŠ¶æ€ã€‚A çº¿ç¨‹ lock() æ—¶ï¼Œä¼šè°ƒç”¨ tryAcquire() ç‹¬å è¯¥é”å¹¶å°† state+1ã€‚æ­¤åï¼Œå…¶ä»–çº¿ç¨‹å† tryAcquire() æ—¶å°±ä¼šå¤±è´¥ï¼Œç›´åˆ° A çº¿ç¨‹ unlock( )åˆ° state&#x3D;0ï¼ˆå³é‡Šæ”¾é”ï¼‰ä¸ºæ­¢ï¼Œå…¶å®ƒçº¿ç¨‹æ‰æœ‰æœºä¼šè·å–è¯¥é”ã€‚å½“ç„¶ï¼Œé‡Šæ”¾é”ä¹‹å‰ï¼ŒA çº¿ç¨‹è‡ªå·±æ˜¯å¯ä»¥é‡å¤è·å–æ­¤é”çš„ï¼ˆstateä¼šç´¯åŠ ï¼‰ï¼Œè¿™å°±æ˜¯å¯é‡å…¥çš„æ¦‚å¿µã€‚</p>\n<p>ä»¥ CountDownLatch ä»¥ä¾‹ï¼Œä»»åŠ¡åˆ†ä¸º N ä¸ªå­çº¿ç¨‹å»æ‰§è¡Œï¼Œstate ä¹Ÿåˆå§‹åŒ–ä¸º Nï¼ˆæ³¨æ„Nè¦ä¸çº¿ç¨‹ä¸ªæ•°ä¸€è‡´ï¼‰ã€‚è¿™ N ä¸ªå­çº¿ç¨‹æ˜¯å¹¶è¡Œæ‰§è¡Œçš„ï¼Œæ¯ä¸ªå­çº¿ç¨‹æ‰§è¡Œå®Œå countDown() ä¸€æ¬¡ï¼Œstate ä¼š CAS å‡ 1ã€‚ç­‰åˆ°æ‰€æœ‰å­çº¿ç¨‹éƒ½æ‰§è¡Œå®Œåï¼ˆå³state&#x3D;0ï¼‰ï¼Œä¼š unpark() ä¸»è°ƒç”¨çº¿ç¨‹ï¼Œç„¶åä¸»è°ƒç”¨çº¿ç¨‹å°±ä¼šä» await() å‡½æ•°è¿”å›ï¼Œç»§ç»­åç»­åŠ¨ä½œã€‚</p>\n<p>ä¸€èˆ¬æ¥è¯´ï¼Œè‡ªå®šä¹‰åŒæ­¥å™¨è¦ä¹ˆæ˜¯ç‹¬å æ–¹æ³•ï¼Œè¦ä¹ˆæ˜¯å…±äº«æ–¹å¼ï¼Œä»–ä»¬ä¹Ÿåªéœ€å®ç°<code>tryAcquire-tryRelease</code>ã€<code>tryAcquireShared-tryReleaseShared</code>ä¸­çš„ä¸€ç§å³å¯ã€‚ä½†AQSä¹Ÿæ”¯æŒè‡ªå®šä¹‰åŒæ­¥å™¨åŒæ—¶å®ç°ç‹¬å å’Œå…±äº«ä¸¤ç§æ–¹å¼ï¼Œå¦‚<code>ReentrantReadWriteLock</code>ã€‚</p>\n<h3 id=\"è¯»å†™é”\"><a href=\"#è¯»å†™é”\" class=\"headerlink\" title=\"è¯»å†™é”\"></a>è¯»å†™é”</h3><p>é¦–å…ˆæ˜ç¡®ä¸€ä¸‹ï¼Œä¸æ˜¯è¯´ ReentrantLock ä¸å¥½ï¼Œåªæ˜¯ ReentrantLock æŸäº›æ—¶å€™æœ‰å±€é™ã€‚å¦‚æœä½¿ç”¨ ReentrantLockï¼Œå¯èƒ½æœ¬èº«æ˜¯ä¸ºäº†é˜²æ­¢çº¿ç¨‹ A åœ¨å†™æ•°æ®ã€çº¿ç¨‹ B åœ¨è¯»æ•°æ®é€ æˆçš„æ•°æ®ä¸ä¸€è‡´ï¼Œä½†è¿™æ ·ï¼Œå¦‚æœçº¿ç¨‹ C åœ¨è¯»æ•°æ®ã€çº¿ç¨‹ D ä¹Ÿåœ¨è¯»æ•°æ®ï¼Œè¯»æ•°æ®æ˜¯ä¸ä¼šæ”¹å˜æ•°æ®çš„ï¼Œæ²¡æœ‰å¿…è¦åŠ é”ï¼Œä½†æ˜¯è¿˜æ˜¯åŠ é”äº†ï¼Œé™ä½äº†ç¨‹åºçš„æ€§èƒ½ã€‚å› ä¸ºè¿™ä¸ªï¼Œæ‰è¯ç”Ÿäº†è¯»å†™é” ReadWriteLockã€‚</p>\n<p>ReadWriteLock æ˜¯ä¸€ä¸ªè¯»å†™é”æ¥å£ï¼Œè¯»å†™é”æ˜¯ç”¨æ¥æå‡å¹¶å‘ç¨‹åºæ€§èƒ½çš„é”åˆ†ç¦»æŠ€æœ¯ï¼ŒReentrantReadWriteLock æ˜¯ ReadWriteLock æ¥å£çš„ä¸€ä¸ªå…·ä½“å®ç°ï¼Œ<strong>å®ç°äº†è¯»å†™çš„åˆ†ç¦»ï¼Œè¯»é”æ˜¯å…±äº«çš„ï¼Œå†™é”æ˜¯ç‹¬å çš„</strong>ï¼Œè¯»å’Œè¯»ä¹‹é—´ä¸ä¼šäº’æ–¥ï¼Œè¯»å’Œå†™ã€å†™å’Œè¯»ã€å†™å’Œå†™ä¹‹é—´æ‰ä¼šäº’æ–¥ï¼Œæå‡äº†è¯»å†™çš„æ€§èƒ½ã€‚</p>\n<h2 id=\"å¹¶å‘å®¹å™¨\"><a href=\"#å¹¶å‘å®¹å™¨\" class=\"headerlink\" title=\"å¹¶å‘å®¹å™¨\"></a>å¹¶å‘å®¹å™¨</h2><h3 id=\"ConcurrentHashMap\"><a href=\"#ConcurrentHashMap\" class=\"headerlink\" title=\"ConcurrentHashMap\"></a>ConcurrentHashMap</h3><h4 id=\"ä»€ä¹ˆæ˜¯ConcurrentHashMapï¼Ÿ\"><a href=\"#ä»€ä¹ˆæ˜¯ConcurrentHashMapï¼Ÿ\" class=\"headerlink\" title=\"ä»€ä¹ˆæ˜¯ConcurrentHashMapï¼Ÿ\"></a>ä»€ä¹ˆæ˜¯ConcurrentHashMapï¼Ÿ</h4><p>ConcurrentHashMapæ˜¯Javaä¸­çš„ä¸€ä¸ª<strong>çº¿ç¨‹å®‰å…¨ä¸”é«˜æ•ˆçš„HashMapå®ç°</strong>ã€‚</p>\n<p>é‚£ä¹ˆå®ƒåˆ°åº•æ˜¯å¦‚ä½•å®ç°çº¿ç¨‹å®‰å…¨çš„ï¼Ÿ</p>\n<p>JDK 1.6ç‰ˆæœ¬å…³é”®è¦ç´ ï¼š</p>\n<ul>\n<li>segment ç»§æ‰¿äº† ReentrantLock å……å½“é”çš„è§’è‰²ï¼Œä¸ºæ¯ä¸€ä¸ª segment æä¾›äº†çº¿ç¨‹å®‰å…¨çš„ä¿éšœï¼›</li>\n<li>segment ç»´æŠ¤äº†å“ˆå¸Œæ•£åˆ—è¡¨çš„è‹¥å¹²ä¸ªæ¡¶ï¼Œæ¯ä¸ªæ¡¶ç”± HashEntry æ„æˆçš„é“¾è¡¨ã€‚</li>\n</ul>\n<p>JDK1.8åï¼ŒConcurrentHashMapæŠ›å¼ƒäº†åŸæœ‰çš„ Segment åˆ†æ®µé”ï¼Œè€Œ<strong>é‡‡ç”¨äº† CAS + synchronized æ¥ä¿è¯å¹¶å‘å®‰å…¨æ€§</strong>ã€‚</p>\n<p>æ’å…¥å…ƒç´ è¿‡ç¨‹ï¼š</p>\n<p>å¦‚æœç›¸åº”ä½ç½®çš„Nodeè¿˜æ²¡æœ‰åˆå§‹åŒ–ï¼Œåˆ™è°ƒç”¨CASæ’å…¥ç›¸åº”çš„æ•°æ®ï¼›</p>\n<p>å¦‚æœç›¸åº”ä½ç½®çš„Nodeä¸ä¸ºç©ºï¼Œåˆ™å¯¹è¯¥èŠ‚ç‚¹åŠ synchronizedé”è¿›è¡Œæ’å…¥æˆ–æ›´æ–°æ“ä½œã€‚</p>\n<h3 id=\"CopyOnWriteArrayList\"><a href=\"#CopyOnWriteArrayList\" class=\"headerlink\" title=\"CopyOnWriteArrayList\"></a>CopyOnWriteArrayList</h3><p>CopyOnWriteå®¹å™¨å³<strong>å†™æ—¶å¤åˆ¶çš„å®¹å™¨</strong>ï¼Œå½“æˆ‘ä»¬å¾€ä¸€ä¸ªå®¹å™¨ä¸­æ·»åŠ å…ƒç´ çš„æ—¶å€™ï¼Œä¸ç›´æ¥å¾€å®¹å™¨ä¸­æ·»åŠ ï¼Œè€Œæ˜¯å°†å½“å‰å®¹å™¨è¿›è¡Œ copyï¼Œå¤åˆ¶å‡ºæ¥ä¸€ä¸ªæ–°çš„å®¹å™¨ï¼Œç„¶åå‘æ–°å®¹å™¨ä¸­æ·»åŠ æˆ‘ä»¬éœ€è¦çš„å…ƒç´ ï¼Œæœ€åå°†åŸå®¹å™¨çš„å¼•ç”¨æŒ‡å‘æ–°å®¹å™¨ã€‚</p>\n<p><strong>CopyOnWriteArrayList çš„ä½¿ç”¨åœºæ™¯</strong></p>\n<p>é€šè¿‡æºç åˆ†æï¼Œæˆ‘ä»¬çœ‹å‡ºå®ƒçš„ä¼˜ç¼ºç‚¹æ¯”è¾ƒæ˜æ˜¾ï¼Œæ‰€ä»¥ä½¿ç”¨åœºæ™¯ä¹Ÿå°±æ¯”è¾ƒæ˜æ˜¾ã€‚å°±æ˜¯åˆé€‚è¯»å¤šå†™å°‘çš„åœºæ™¯ã€‚</p>\n<p><strong>CopyOnWriteArrayList çš„ç¼ºç‚¹</strong></p>\n<ol>\n<li>ç”±äºå†™æ“ä½œçš„æ—¶å€™ï¼Œéœ€è¦æ‹·è´æ•°ç»„ï¼Œä¼šæ¶ˆè€—å†…å­˜ï¼Œå¦‚æœåŸæ•°ç»„çš„å†…å®¹æ¯”è¾ƒå¤šçš„æƒ…å†µä¸‹ï¼Œå¯èƒ½å¯¼è‡´ young gc æˆ–è€… full gcã€‚</li>\n<li><strong>ä¸èƒ½ç”¨äºå®æ—¶è¯»çš„åœºæ™¯</strong>ï¼Œåƒæ‹·è´æ•°ç»„ã€æ–°å¢å…ƒç´ éƒ½éœ€è¦æ—¶é—´ï¼Œæ‰€ä»¥è°ƒç”¨ä¸€ä¸ª set æ“ä½œåï¼Œ<strong>è¯»å–åˆ°æ•°æ®å¯èƒ½è¿˜æ˜¯æ—§çš„</strong>ï¼Œè™½ç„¶ CopyOnWriteArrayList èƒ½åšåˆ°æœ€ç»ˆä¸€è‡´æ€§,ä½†æ˜¯è¿˜æ˜¯æ²¡æ³•æ»¡è¶³å®æ—¶æ€§è¦æ±‚ã€‚</li>\n</ol>\n<h3 id=\"ThreadLocal\"><a href=\"#ThreadLocal\" class=\"headerlink\" title=\"ThreadLocal\"></a>ThreadLocal</h3><h4 id=\"ThreadLocalçš„æ•°æ®ç»“æ„\"><a href=\"#ThreadLocalçš„æ•°æ®ç»“æ„\" class=\"headerlink\" title=\"ThreadLocalçš„æ•°æ®ç»“æ„\"></a>ThreadLocalçš„æ•°æ®ç»“æ„</h4><img src=\"https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/TyporaNotesthreadlocal%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84.a0bfadf8.png\" alt=\"ThreadLocalæ•°æ®ç»“æ„\" style=\"zoom: 67%;\" />\n\n<p>æ¯ä¸ªçº¿ç¨‹ Thread ä¸­æœ‰ä¸€ä¸ªç±»å‹ä¸º ThreadLocal.ThreadLocalMap çš„å®ä¾‹å˜é‡ threadLocalsï¼Œè¯¥å®ä¾‹å˜é‡ä¸­æ¯ä¸ª entryä¸º &lt;threadLocalçš„å¼±å¼•ç”¨ï¼Œvalueä¸ºå¼ºå¼•ç”¨&gt; çš„æ˜ å°„ï¼Œæ¯ä¸ªçº¿ç¨‹å¾€ threadLocal ä¸­å¯¹ value è¿›è¡Œæ“ä½œæ—¶ï¼Œéƒ½æ˜¯åœ¨è‡ªå·±çº¿ç¨‹ç§æœ‰çš„ threadLocalMap ä¸­è¿›è¡Œæ“ä½œï¼Œä»è€Œè¾¾åˆ°çº¿ç¨‹éš”ç¦»ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">ThreadLocalDemo</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// private static final ThreadLocal&lt;Integer&gt; threadLocal = new ThreadLocal&lt;Integer&gt;()&#123;</span></span><br><span class=\"line\">    <span class=\"comment\">//     @Override</span></span><br><span class=\"line\">    <span class=\"comment\">//     protected Integer initialValue() &#123;</span></span><br><span class=\"line\">    <span class=\"comment\">//         return 0;</span></span><br><span class=\"line\">    <span class=\"comment\">//     &#125;</span></span><br><span class=\"line\">    <span class=\"comment\">// &#125;;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> ThreadLocal&lt;Integer&gt; threadLocal = ThreadLocal.withInitial(() -&gt; <span class=\"number\">0</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>; i &lt; <span class=\"number\">2</span>; i++) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">new</span> <span class=\"title class_\">Thread</span>(() -&gt; &#123;</span><br><span class=\"line\">                <span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">j</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>; j &lt; <span class=\"number\">5</span>; j++) &#123;</span><br><span class=\"line\">                    <span class=\"type\">Integer</span> <span class=\"variable\">val</span> <span class=\"operator\">=</span> threadLocal.get();</span><br><span class=\"line\">                    threadLocal.set(++val);</span><br><span class=\"line\">                    System.out.println(Thread.currentThread().getName() + <span class=\"string\">&quot; ---- &quot;</span> + val);</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;, <span class=\"string\">&quot;Thread-&quot;</span> + i).start();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            Thread.sleep(<span class=\"number\">10</span>);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (InterruptedException e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        System.out.println(Thread.currentThread().getName() + <span class=\"string\">&quot; ---- &quot;</span> + threadLocal.get());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>æ‰“å°ç»“æœï¼šå¯åŠ¨äº† 2 ä¸ªçº¿ç¨‹ï¼Œæ¯ä¸ªçº¿ç¨‹æœ€åéƒ½æ‰“å°åˆ° 5ï¼Œ æœ€åthreadLocal.getä»ç„¶æ˜¯0</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Thread-<span class=\"number\">1</span> ---- <span class=\"number\">1</span></span><br><span class=\"line\">Thread-<span class=\"number\">0</span> ---- <span class=\"number\">1</span></span><br><span class=\"line\">Thread-<span class=\"number\">1</span> ---- <span class=\"number\">2</span></span><br><span class=\"line\">Thread-<span class=\"number\">0</span> ---- <span class=\"number\">2</span></span><br><span class=\"line\">Thread-<span class=\"number\">1</span> ---- <span class=\"number\">3</span></span><br><span class=\"line\">Thread-<span class=\"number\">1</span> ---- <span class=\"number\">4</span></span><br><span class=\"line\">Thread-<span class=\"number\">1</span> ---- <span class=\"number\">5</span></span><br><span class=\"line\">Thread-<span class=\"number\">0</span> ---- <span class=\"number\">3</span></span><br><span class=\"line\">Thread-<span class=\"number\">0</span> ---- <span class=\"number\">4</span></span><br><span class=\"line\">Thread-<span class=\"number\">0</span> ---- <span class=\"number\">5</span></span><br><span class=\"line\">main ---- <span class=\"number\">0</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"ThreadLocalå†…å­˜æ³„æ¼\"><a href=\"#ThreadLocalå†…å­˜æ³„æ¼\" class=\"headerlink\" title=\"ThreadLocalå†…å­˜æ³„æ¼\"></a>ThreadLocalå†…å­˜æ³„æ¼</h3><h4 id=\"ThreadLocalé€ æˆå†…å­˜æ³„æ¼çš„åŸå› ï¼Ÿ\"><a href=\"#ThreadLocalé€ æˆå†…å­˜æ³„æ¼çš„åŸå› ï¼Ÿ\" class=\"headerlink\" title=\"ThreadLocalé€ æˆå†…å­˜æ³„æ¼çš„åŸå› ï¼Ÿ\"></a>ThreadLocalé€ æˆå†…å­˜æ³„æ¼çš„åŸå› ï¼Ÿ</h4><p>ThreadLocalMap ä¸­ä½¿ç”¨çš„ key ä¸º ThreadLocal çš„å¼±å¼•ç”¨,è€Œ value æ˜¯å¼ºå¼•ç”¨ã€‚æ‰€ä»¥ï¼Œå¦‚æœ ThreadLocal æ²¡æœ‰è¢«å¤–éƒ¨å¼ºå¼•ç”¨çš„æƒ…å†µä¸‹ï¼Œåœ¨åƒåœ¾å›æ”¶çš„æ—¶å€™ï¼Œkey ä¼šè¢«æ¸…ç†æ‰ï¼Œè€Œ value ä¸ä¼šè¢«æ¸…ç†æ‰ã€‚è¿™æ ·ä¸€æ¥ï¼ŒThreadLocalMap ä¸­å°±ä¼šå‡ºç° key ä¸º null çš„ Entryã€‚å‡å¦‚æˆ‘ä»¬ä¸åšä»»ä½•æªæ–½çš„è¯ï¼Œvalue æ°¸è¿œæ— æ³•è¢« GC å›æ”¶ï¼Œè¿™ä¸ªæ—¶å€™å°±å¯èƒ½ä¼šäº§ç”Ÿå†…å­˜æ³„éœ²ã€‚ThreadLocalMap å®ç°ä¸­å·²ç»è€ƒè™‘äº†è¿™ç§æƒ…å†µï¼Œæ¯æ¬¡ä½¿ç”¨å®Œ ThreadLocal åï¼Œéƒ½è°ƒç”¨å®ƒçš„remove()æ–¹æ³•ï¼Œæ¸…ç†æ‰ key ä¸º null çš„è®°å½•ã€‚</p>\n<h3 id=\"BlockingQueue\"><a href=\"#BlockingQueue\" class=\"headerlink\" title=\"BlockingQueue\"></a>BlockingQueue</h3><p>é˜»å¡é˜Ÿåˆ—ï¼ˆBlockingQueueï¼‰æ˜¯ä¸€ä¸ªæ”¯æŒä¸¤ä¸ªé™„åŠ æ“ä½œçš„é˜Ÿåˆ—ã€‚</p>\n<p>åœ¨é˜Ÿåˆ—ä¸ºç©ºæ—¶ï¼Œè·å–å…ƒç´ çš„çº¿ç¨‹ä¼šç­‰å¾…é˜Ÿåˆ—å˜ä¸ºéç©ºã€‚å½“é˜Ÿåˆ—æ»¡æ—¶ï¼Œå­˜å‚¨å…ƒç´ çš„çº¿ç¨‹ä¼šç­‰å¾…é˜Ÿåˆ—å¯ç”¨ã€‚</p>\n<p>é˜»å¡é˜Ÿåˆ—å¸¸ç”¨äºç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…çš„åœºæ™¯ï¼Œç”Ÿäº§è€…æ˜¯å¾€é˜Ÿåˆ—é‡Œæ·»åŠ å…ƒç´ çš„çº¿ç¨‹ï¼Œæ¶ˆè´¹è€…æ˜¯ä»é˜Ÿåˆ—é‡Œæ‹¿å…ƒç´ çš„çº¿ç¨‹ã€‚é˜»å¡é˜Ÿåˆ—å°±æ˜¯ç”Ÿäº§è€…å­˜æ”¾å…ƒç´ çš„å®¹å™¨ï¼Œè€Œæ¶ˆè´¹è€…ä¹Ÿåªä»å®¹å™¨é‡Œæ‹¿å…ƒç´ ã€‚</p>\n<p>JDK7 æä¾›äº† 7 ä¸ªé˜»å¡é˜Ÿåˆ—ã€‚åˆ†åˆ«æ˜¯ï¼š</p>\n<blockquote>\n<p>ArrayBlockingQueue ï¼šä¸€ä¸ªç”±æ•°ç»„ç»“æ„ç»„æˆçš„æœ‰ç•Œé˜»å¡é˜Ÿåˆ—ã€‚<br>LinkedBlockingQueue ï¼šä¸€ä¸ªç”±é“¾è¡¨ç»“æ„ç»„æˆçš„æœ‰ç•Œé˜»å¡é˜Ÿåˆ—ã€‚<br>PriorityBlockingQueue ï¼šä¸€ä¸ªæ”¯æŒä¼˜å…ˆçº§æ’åºçš„æ— ç•Œé˜»å¡é˜Ÿåˆ—ã€‚<br>DelayQueueï¼šä¸€ä¸ªä½¿ç”¨ä¼˜å…ˆçº§é˜Ÿåˆ—å®ç°çš„æ— ç•Œé˜»å¡é˜Ÿåˆ—ã€‚<br>SynchronousQueueï¼šä¸€ä¸ªä¸å­˜å‚¨å…ƒç´ çš„é˜»å¡é˜Ÿåˆ—ã€‚<br>LinkedTransferQueueï¼šä¸€ä¸ªç”±é“¾è¡¨ç»“æ„ç»„æˆçš„æ— ç•Œé˜»å¡é˜Ÿåˆ—ã€‚<br>LinkedBlockingDequeï¼šä¸€ä¸ªç”±é“¾è¡¨ç»“æ„ç»„æˆçš„åŒå‘é˜»å¡é˜Ÿåˆ—ã€‚</p>\n</blockquote>\n<p>Java 5 ä¹‹å‰å®ç°åŒæ­¥å­˜å–æ—¶ï¼Œå¯ä»¥ä½¿ç”¨æ™®é€šçš„ä¸€ä¸ªé›†åˆï¼Œç„¶ååœ¨ä½¿ç”¨çº¿ç¨‹çš„åä½œå’Œçº¿ç¨‹åŒæ­¥å¯ä»¥å®ç°ç”Ÿäº§è€…ï¼Œæ¶ˆè´¹è€…æ¨¡å¼ï¼Œä¸»è¦çš„æŠ€æœ¯å°±æ˜¯ç”¨å¥½ waitï¼Œnotifyï¼ŒnotifyAllï¼Œsynchronized è¿™äº›å…³é”®å­—ã€‚è€Œåœ¨ Java 5 ä¹‹åï¼Œå¯ä»¥ä½¿ç”¨é˜»å¡é˜Ÿåˆ—æ¥å®ç°ï¼Œæ­¤æ–¹å¼å¤§å¤§ç®€å°‘äº†ä»£ç é‡ï¼Œä½¿å¾—å¤šçº¿ç¨‹ç¼–ç¨‹æ›´åŠ å®¹æ˜“ï¼Œå®‰å…¨æ–¹é¢ä¹Ÿæœ‰ä¿éšœã€‚</p>\n<p>BlockingQueue æ¥å£æ˜¯ Queue çš„å­æ¥å£ï¼Œå®ƒçš„ä¸»è¦ç”¨é€”å¹¶ä¸æ˜¯ä½œä¸ºå®¹å™¨ï¼Œè€Œæ˜¯ä½œä¸ºçº¿ç¨‹åŒæ­¥çš„çš„å·¥å…·ï¼Œå› æ­¤ä»–å…·æœ‰ä¸€ä¸ªå¾ˆæ˜æ˜¾çš„ç‰¹æ€§ï¼Œ<strong>å½“ç”Ÿäº§è€…çº¿ç¨‹è¯•å›¾å‘ BlockingQueue æ”¾å…¥å…ƒç´ æ—¶ï¼Œå¦‚æœé˜Ÿåˆ—å·²æ»¡ï¼Œåˆ™çº¿ç¨‹è¢«é˜»å¡ï¼Œå½“æ¶ˆè´¹è€…çº¿ç¨‹è¯•å›¾ä»ä¸­å–å‡ºä¸€ä¸ªå…ƒç´ æ—¶ï¼Œå¦‚æœé˜Ÿåˆ—ä¸ºç©ºï¼Œåˆ™è¯¥çº¿ç¨‹ä¼šè¢«é˜»å¡</strong>ï¼Œæ­£æ˜¯å› ä¸ºå®ƒæ‰€å…·æœ‰è¿™ä¸ªç‰¹æ€§ï¼Œæ‰€ä»¥åœ¨ç¨‹åºä¸­å¤šä¸ªçº¿ç¨‹äº¤æ›¿å‘ BlockingQueue ä¸­æ”¾å…¥å…ƒç´ ï¼Œå–å‡ºå…ƒç´ ï¼Œå®ƒå¯ä»¥å¾ˆå¥½çš„æ§åˆ¶çº¿ç¨‹ä¹‹é—´çš„é€šä¿¡ã€‚</p>\n<h2 id=\"çº¿ç¨‹æ± \"><a href=\"#çº¿ç¨‹æ± \" class=\"headerlink\" title=\"çº¿ç¨‹æ± \"></a>çº¿ç¨‹æ± </h2><h3 id=\"Executors-åˆ›å»ºå››ç§å¸¸è§çº¿ç¨‹æ± \"><a href=\"#Executors-åˆ›å»ºå››ç§å¸¸è§çº¿ç¨‹æ± \" class=\"headerlink\" title=\"Executors åˆ›å»ºå››ç§å¸¸è§çº¿ç¨‹æ± \"></a>Executors åˆ›å»ºå››ç§å¸¸è§çº¿ç¨‹æ± </h3><h4 id=\"ä»€ä¹ˆæ˜¯çº¿ç¨‹æ± ï¼Ÿæœ‰å“ªå‡ ç§åˆ›å»ºæ–¹å¼ï¼Ÿ\"><a href=\"#ä»€ä¹ˆæ˜¯çº¿ç¨‹æ± ï¼Ÿæœ‰å“ªå‡ ç§åˆ›å»ºæ–¹å¼ï¼Ÿ\" class=\"headerlink\" title=\"ä»€ä¹ˆæ˜¯çº¿ç¨‹æ± ï¼Ÿæœ‰å“ªå‡ ç§åˆ›å»ºæ–¹å¼ï¼Ÿ\"></a>ä»€ä¹ˆæ˜¯çº¿ç¨‹æ± ï¼Ÿæœ‰å“ªå‡ ç§åˆ›å»ºæ–¹å¼ï¼Ÿ</h4><blockquote>\n<p>æ± åŒ–æŠ€æœ¯çš„æ€æƒ³ä¸»è¦æ˜¯ä¸ºäº†å‡å°‘æ¯æ¬¡è·å–èµ„æºçš„æ¶ˆè€—ï¼Œæé«˜å¯¹èµ„æºçš„åˆ©ç”¨ç‡ã€‚</p>\n</blockquote>\n<p>åœ¨é¢å‘å¯¹è±¡ç¼–ç¨‹ä¸­ï¼Œåˆ›å»ºå’Œé”€æ¯å¯¹è±¡æ˜¯å¾ˆè´¹æ—¶é—´çš„ï¼Œå› ä¸ºåˆ›å»ºä¸€ä¸ªå¯¹è±¡è¦è·å–å†…å­˜èµ„æºæˆ–è€…å…¶å®ƒæ›´å¤šèµ„æºã€‚åœ¨ Java ä¸­æ›´æ˜¯å¦‚æ­¤ï¼Œè™šæ‹Ÿæœºå°†è¯•å›¾è·Ÿè¸ªæ¯ä¸€ä¸ªå¯¹è±¡ï¼Œä»¥ä¾¿èƒ½å¤Ÿåœ¨å¯¹è±¡é”€æ¯åè¿›è¡Œåƒåœ¾å›æ”¶ã€‚æ‰€ä»¥æé«˜æœåŠ¡ç¨‹åºæ•ˆç‡çš„ä¸€ä¸ªæ‰‹æ®µå°±æ˜¯<strong>å°½å¯èƒ½å‡å°‘åˆ›å»ºå’Œé”€æ¯å¯¹è±¡çš„æ¬¡æ•°</strong>ï¼Œç‰¹åˆ«æ˜¯ä¸€äº›å¾ˆè€—èµ„æºçš„å¯¹è±¡åˆ›å»ºå’Œé”€æ¯ï¼Œè¿™å°±æ˜¯â€æ± åŒ–èµ„æºâ€æŠ€æœ¯äº§ç”Ÿçš„åŸå› ã€‚</p>\n<p>çº¿ç¨‹æ± é¡¾åæ€ä¹‰å°±æ˜¯äº‹å…ˆåˆ›å»ºè‹¥å¹²ä¸ªå¯æ‰§è¡Œçš„çº¿ç¨‹æ”¾å…¥ä¸€ä¸ªæ± ï¼ˆå®¹å™¨ï¼‰ä¸­ï¼Œéœ€è¦çš„æ—¶å€™ä»æ± ä¸­è·å–çº¿ç¨‹ä¸ç”¨è‡ªè¡Œåˆ›å»ºï¼Œä½¿ç”¨å®Œæ¯•ä¸éœ€è¦é”€æ¯çº¿ç¨‹è€Œæ˜¯æ”¾å›æ± ä¸­ï¼Œä»è€Œå‡å°‘åˆ›å»ºå’Œé”€æ¯çº¿ç¨‹å¯¹è±¡çš„å¼€é”€ã€‚Java 5+ä¸­çš„ Executor æ¥å£å®šä¹‰ä¸€ä¸ªæ‰§è¡Œçº¿ç¨‹çš„å·¥å…·ã€‚å®ƒçš„å­ç±»å‹å³çº¿ç¨‹æ± æ¥å£æ˜¯ ExecutorServiceã€‚è¦é…ç½®ä¸€ä¸ªçº¿ç¨‹æ± æ˜¯æ¯”è¾ƒå¤æ‚çš„ï¼Œå°¤å…¶æ˜¯å¯¹äºçº¿ç¨‹æ± çš„åŸç†ä¸æ˜¯å¾ˆæ¸…æ¥šçš„æƒ…å†µä¸‹ï¼Œå› æ­¤åœ¨å·¥å…·ç±» Executors é¢æä¾›äº†ä¸€äº›é™æ€å·¥å‚æ–¹æ³•ï¼Œç”Ÿæˆä¸€äº›å¸¸ç”¨çš„çº¿ç¨‹æ± ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>\n<p>ï¼ˆ1ï¼‰Executors.newSingleThreadExecutorï¼š<code>1, 1, new LinkedBlockingQueue</code>ã€‚æ‰€æœ‰ä»»åŠ¡æŒ‰ç…§<strong>å…ˆæ¥å…ˆæ‰§è¡Œ</strong>çš„é¡ºåºæ‰§è¡Œã€‚å¦‚æœè¿™ä¸ªå”¯ä¸€çš„çº¿ç¨‹ä¸ç©ºé—²ï¼Œé‚£ä¹ˆæ–°æ¥çš„ä»»åŠ¡ä¼šå­˜å‚¨åœ¨ä»»åŠ¡é˜Ÿåˆ—é‡Œç­‰å¾…æ‰§è¡Œã€‚ï¼ˆç”±äºé˜»å¡é˜Ÿåˆ—é»˜è®¤å¤§å°ä¸ºInteger.MAX_VALUEï¼Œå› æ­¤å¯èƒ½OOMï¼‰</p>\n<p>ï¼ˆ2ï¼‰Executors.newFixedThreadPoolï¼š<code>nCoreThreads, nCoreThreads, new LinkedBlockingQueue</code>ï¼Œæ‰€ä»¥åªèƒ½åˆ›å»ºæ ¸å¿ƒçº¿ç¨‹ï¼Œä¸èƒ½åˆ›å»ºéæ ¸å¿ƒçº¿ç¨‹ã€‚å› ä¸º LinkedBlockingQueue çš„é»˜è®¤å¤§å°æ˜¯ Integer.MAX_VALUEï¼Œæ•…å¦‚æœæ ¸å¿ƒçº¿ç¨‹ç©ºé—²ï¼Œåˆ™äº¤ç»™æ ¸å¿ƒçº¿ç¨‹å¤„ç†ï¼›å¦‚æœæ ¸å¿ƒçº¿ç¨‹ä¸ç©ºé—²ï¼Œåˆ™å…¥åˆ—ç­‰å¾…ï¼Œç›´åˆ°æ ¸å¿ƒçº¿ç¨‹ç©ºé—²ã€‚ï¼ˆç”±äºé˜»å¡é˜Ÿåˆ—é»˜è®¤å¤§å°ä¸ºInteger.MAX_VALUEï¼Œå› æ­¤å¯èƒ½OOMï¼‰</p>\n<p>ï¼ˆ3ï¼‰ Executors.newCachedThreadPoolï¼š<code>0, Integer.MAX_VALUE</code>ï¼Œä¸åˆ›å»ºæ ¸å¿ƒçº¿ç¨‹ï¼Œçº¿ç¨‹æ± æœ€å¤§ä¸ºInteger.MAX_VALUEã€‚ï¼ˆçº¿ç¨‹æ± å¤ªå¤§å¯¼è‡´OOMï¼‰</p>\n<p>newCachedThreadPool å’Œ newFixedThreadPool éƒ½å‡ ä¹ä¸ä¼šè§¦å‘æ‹’ç»ç­–ç•¥ï¼Œä½†æ˜¯åŸç†ä¸åŒã€‚<br>FixedThreadPool æ˜¯å› ä¸ºé˜»å¡é˜Ÿåˆ—å¯ä»¥å¾ˆå¤§ï¼ˆæœ€å¤§ä¸ºIntegeræœ€å¤§å€¼ï¼‰ï¼Œæ•…å‡ ä¹ä¸ä¼šè§¦å‘æ‹’ç»ç­–ç•¥ï¼›CachedThreadPool æ˜¯å› ä¸ºçº¿ç¨‹æ± å¾ˆå¤§ï¼ˆæœ€å¤§ä¸ºIntegeræœ€å¤§å€¼ï¼‰ï¼Œå‡ ä¹ä¸ä¼šå¯¼è‡´çº¿ç¨‹æ•°é‡å¤§äºæœ€å¤§çº¿ç¨‹æ•°ï¼Œæ•…å‡ ä¹ä¸ä¼šè§¦å‘æ‹’ç»ç­–ç•¥ã€‚</p>\n<p>ï¼ˆ4ï¼‰Executors.newScheduledThreadPoolï¼š<code>nCoreThreads, Integer.MAX_VALUE</code>åˆ›å»ºä¸€ä¸ªå¤§å°æ— é™çš„çº¿ç¨‹æ± ã€‚æ­¤çº¿ç¨‹æ± æ”¯æŒå®šæ—¶ä»¥åŠå‘¨æœŸæ€§æ‰§è¡Œä»»åŠ¡çš„éœ€æ±‚ã€‚</p>\n<h4 id=\"çº¿ç¨‹æ± æœ‰ä»€ä¹ˆä¼˜ç‚¹ï¼Ÿ\"><a href=\"#çº¿ç¨‹æ± æœ‰ä»€ä¹ˆä¼˜ç‚¹ï¼Ÿ\" class=\"headerlink\" title=\"çº¿ç¨‹æ± æœ‰ä»€ä¹ˆä¼˜ç‚¹ï¼Ÿ\"></a>çº¿ç¨‹æ± æœ‰ä»€ä¹ˆä¼˜ç‚¹ï¼Ÿ</h4><ul>\n<li>é™ä½èµ„æºæ¶ˆè€—ï¼šé‡ç”¨å­˜åœ¨çš„çº¿ç¨‹ï¼Œå‡å°‘å¯¹è±¡åˆ›å»ºé”€æ¯çš„å¼€é”€ï¼›</li>\n<li>æé«˜å“åº”é€Ÿåº¦ï¼šå½“ä»»åŠ¡åˆ°è¾¾æ—¶ï¼Œä»»åŠ¡å¯ä»¥ä¸éœ€è¦çš„ç­‰åˆ°çº¿ç¨‹åˆ›å»ºå°±èƒ½ç«‹å³æ‰§è¡Œï¼›</li>\n<li>æé«˜çº¿ç¨‹çš„å¯ç®¡ç†æ€§ï¼šä½¿ç”¨çº¿ç¨‹æ± å¯ä»¥è¿›è¡Œç»Ÿä¸€çš„åˆ†é…ï¼Œè°ƒä¼˜å’Œç›‘æ§ã€‚</li>\n</ul>\n<h4 id=\"çº¿ç¨‹æ± éƒ½æœ‰å“ªäº›çŠ¶æ€ï¼Ÿ\"><a href=\"#çº¿ç¨‹æ± éƒ½æœ‰å“ªäº›çŠ¶æ€ï¼Ÿ\" class=\"headerlink\" title=\"çº¿ç¨‹æ± éƒ½æœ‰å“ªäº›çŠ¶æ€ï¼Ÿ\"></a>çº¿ç¨‹æ± éƒ½æœ‰å“ªäº›çŠ¶æ€ï¼Ÿ</h4><ul>\n<li>RUNNINGï¼šæ¥å—æ–°çš„ä»»åŠ¡æäº¤ï¼Œå¤„ç†ç­‰å¾…é˜Ÿåˆ—ä¸­çš„ä»»åŠ¡ï¼›</li>\n<li>SHUTDOWNï¼šä¸æ¥å—æ–°çš„ä»»åŠ¡æäº¤ï¼Œä½†æ˜¯ä¼šç»§ç»­å¤„ç†ç­‰å¾…é˜Ÿåˆ—ä¸­çš„ä»»åŠ¡ï¼›</li>\n<li>STOPï¼šä¸æ¥å—æ–°çš„ä»»åŠ¡æäº¤ï¼Œä¸å†å¤„ç†ç­‰å¾…é˜Ÿåˆ—ä¸­çš„ä»»åŠ¡ï¼Œä¸­æ–­æ­£åœ¨æ‰§è¡Œä»»åŠ¡çš„çº¿ç¨‹ï¼›</li>\n<li>TIDYINGï¼šæ‰€æœ‰çš„ä»»åŠ¡éƒ½é”€æ¯äº†ï¼ŒworkCount ä¸º 0ï¼Œçº¿ç¨‹æ± çš„çŠ¶æ€åœ¨è½¬æ¢ä¸º TIDYING çŠ¶æ€æ—¶ï¼Œä¼šæ‰§è¡Œé’©å­æ–¹æ³• terminated()ï¼›</li>\n<li>TERMINATEDï¼šterminated()æ–¹æ³•ç»“æŸåï¼Œçº¿ç¨‹æ± çš„çŠ¶æ€å°±ä¼šå˜æˆè¿™ä¸ªã€‚</li>\n</ul>\n<h4 id=\"åœ¨-Java-ä¸­-Executor-å’Œ-Executors-çš„åŒºåˆ«ï¼Ÿ\"><a href=\"#åœ¨-Java-ä¸­-Executor-å’Œ-Executors-çš„åŒºåˆ«ï¼Ÿ\" class=\"headerlink\" title=\"åœ¨ Java ä¸­ Executor å’Œ Executors çš„åŒºåˆ«ï¼Ÿ\"></a>åœ¨ Java ä¸­ Executor å’Œ Executors çš„åŒºåˆ«ï¼Ÿ</h4><ul>\n<li><strong>Executors å·¥å…·ç±»</strong>çš„ä¸åŒæ–¹æ³•æŒ‰ç…§æˆ‘ä»¬çš„éœ€æ±‚<strong>åˆ›å»ºäº†ä¸åŒçš„çº¿ç¨‹æ± </strong>ï¼Œæ¥æ»¡è¶³ä¸šåŠ¡çš„éœ€æ±‚ï¼›</li>\n<li><strong>Executor æ¥å£å¯¹è±¡æ‰§è¡Œæˆ‘ä»¬çš„çº¿ç¨‹ä»»åŠ¡</strong>ï¼ŒExecutorService æ¥å£ç»§æ‰¿äº† Executor æ¥å£å¹¶è¿›è¡Œäº†æ‰©å±•ï¼Œæä¾›äº†æ›´å¤šçš„æ–¹æ³•æˆ‘ä»¬èƒ½è·å¾—ä»»åŠ¡æ‰§è¡Œçš„çŠ¶æ€å¹¶ä¸”å¯ä»¥è·å–ä»»åŠ¡çš„è¿”å›å€¼ã€‚</li>\n</ul>\n<h4 id=\"çº¿ç¨‹æ± ä¸­-submit-å’Œ-execute-æ–¹æ³•æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\"><a href=\"#çº¿ç¨‹æ± ä¸­-submit-å’Œ-execute-æ–¹æ³•æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\" class=\"headerlink\" title=\"çº¿ç¨‹æ± ä¸­ submit() å’Œ execute() æ–¹æ³•æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\"></a>çº¿ç¨‹æ± ä¸­ submit() å’Œ execute() æ–¹æ³•æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h4><p>æ¥æ”¶å‚æ•°ï¼šsubmit() å¯ä»¥æ‰§è¡Œ Runnable å’Œ Callable ç±»å‹çš„ä»»åŠ¡ï¼Œè€Œexecute()åªèƒ½æ‰§è¡Œ Runnable ç±»å‹çš„ä»»åŠ¡ï¼›</p>\n<p>è¿”å›å€¼ï¼šsubmit() æ–¹æ³•å¯ä»¥è¿”å›æŒæœ‰è®¡ç®—ç»“æœçš„ Future å¯¹è±¡ï¼Œè€Œ execute() æ²¡æœ‰ï¼›</p>\n<p>å¼‚å¸¸å¤„ç†ï¼šsubmit() æ–¹ä¾¿ Exception å¤„ç†ã€‚</p>\n<h3 id=\"ThreadPoolExecutor-è‡ªå®šä¹‰çº¿ç¨‹æ± \"><a href=\"#ThreadPoolExecutor-è‡ªå®šä¹‰çº¿ç¨‹æ± \" class=\"headerlink\" title=\"ThreadPoolExecutor è‡ªå®šä¹‰çº¿ç¨‹æ± \"></a>ThreadPoolExecutor è‡ªå®šä¹‰çº¿ç¨‹æ± </h3><h4 id=\"Executors\"><a href=\"#Executors\" class=\"headerlink\" title=\"Executors\"></a>Executors</h4><p>ã€Šé˜¿é‡Œå·´å·´Javaå¼€å‘æ‰‹å†Œã€‹ä¸­å¼ºåˆ¶çº¿ç¨‹æ± ä¸å…è®¸ä½¿ç”¨ Executors å»åˆ›å»ºï¼Œè€Œæ˜¯<strong>é€šè¿‡ ThreadPoolExecutor çš„æ–¹å¼</strong>ï¼Œè¿™æ ·çš„å¤„ç†æ–¹å¼è®©å†™çš„åŒå­¦<strong>æ›´åŠ æ˜ç¡®çº¿ç¨‹æ± çš„è¿è¡Œè§„åˆ™ï¼Œè§„é¿èµ„æºè€—å°½çš„é£é™©</strong></p>\n<p>Executors å„ä¸ªæ–¹æ³•çš„å¼Šç«¯ï¼š</p>\n<ul>\n<li><p>newSingleThreadExecutor å’Œ newFixedThreadPool :<br>  <code>0, 0</code>å’Œ <code>n, n</code> ï¼Œä½†æ˜¯ä½¿ç”¨ LinkedBlockingQueueï¼Œæœ€å¤§å¯ä»¥ä¸º Integer.MAX_VALUE</p>\n<p>  ä¸»è¦é—®é¢˜æ˜¯å †ç§¯çš„è¯·æ±‚å¤„ç†é˜Ÿåˆ—å¯èƒ½ä¼šè€—è´¹éå¸¸å¤§çš„å†…å­˜ï¼Œç”šè‡³ OOMã€‚</p>\n</li>\n<li><p>newCachedThreadPool å’Œ newScheduledThreadPool:<br>  <code>0, Integer.MAX_VALUE</code> å’Œ <code>n, Integer.MAX_VALUE</code></p>\n<p>  ä¸»è¦é—®é¢˜æ˜¯çº¿ç¨‹æ•°æœ€å¤§æ•°æ˜¯ Integer.MAX_VALUEï¼Œå¯èƒ½ä¼šåˆ›å»ºæ•°é‡éå¸¸å¤šçš„çº¿ç¨‹ï¼Œç”šè‡³ OOM</p>\n</li>\n</ul>\n<p>ThreaPoolExecutoråˆ›å»ºçº¿ç¨‹æ± æ–¹å¼åªæœ‰ä¸€ç§ï¼Œå°±æ˜¯èµ°å®ƒçš„æ„é€ å‡½æ•°ï¼Œå‚æ•°è‡ªå·±æŒ‡å®š</p>\n<h4 id=\"ThreaPoolExecutor\"><a href=\"#ThreaPoolExecutor\" class=\"headerlink\" title=\"ThreaPoolExecutor\"></a>ThreaPoolExecutor</h4><p>åˆ›å»ºçº¿ç¨‹æ± çš„æ–¹å¼æœ‰å¤šç§ï¼Œè¿™é‡Œä½ åªéœ€è¦ç­” ThreadPoolExecutor å³å¯ã€‚</p>\n<p>ThreadPoolExecutor() æ˜¯æœ€åŸå§‹çš„çº¿ç¨‹æ± åˆ›å»ºï¼Œä¹Ÿæ˜¯é˜¿é‡Œå·´å·´ Java å¼€å‘æ‰‹å†Œä¸­æ˜ç¡®è§„èŒƒçš„åˆ›å»ºçº¿ç¨‹æ± çš„æ–¹å¼ã€‚</p>\n<h4 id=\"ThreadPoolExecutoræ„é€ å‡½æ•°é‡è¦å‚æ•°åˆ†æ\"><a href=\"#ThreadPoolExecutoræ„é€ å‡½æ•°é‡è¦å‚æ•°åˆ†æ\" class=\"headerlink\" title=\"ThreadPoolExecutoræ„é€ å‡½æ•°é‡è¦å‚æ•°åˆ†æ\"></a>ThreadPoolExecutoræ„é€ å‡½æ•°é‡è¦å‚æ•°åˆ†æ</h4><p><strong><code>ThreadPoolExecutor</code></strong> <strong>3 ä¸ªæœ€é‡è¦çš„å‚æ•°ï¼š</strong></p>\n<ul>\n<li><strong><code>corePoolSize</code></strong> ï¼šæ ¸å¿ƒçº¿ç¨‹æ•°ï¼Œçº¿ç¨‹æ•°å®šä¹‰äº†æœ€å°å¯ä»¥åŒæ—¶è¿è¡Œçš„çº¿ç¨‹æ•°é‡</li>\n<li><strong><code>maximumPoolSize</code></strong> ï¼šçº¿ç¨‹æ± ä¸­å…è®¸å­˜åœ¨çš„å·¥ä½œçº¿ç¨‹çš„æœ€å¤§æ•°é‡</li>\n<li>**<code>workQueue</code>**ï¼šå½“æ–°ä»»åŠ¡æ¥çš„æ—¶å€™ä¼šå…ˆåˆ¤æ–­å½“å‰è¿è¡Œçš„çº¿ç¨‹æ•°é‡æ˜¯å¦è¾¾åˆ°æ ¸å¿ƒçº¿ç¨‹æ•°ï¼Œå¦‚æœè¾¾åˆ°çš„è¯ï¼Œä»»åŠ¡å°±ä¼šè¢«å­˜æ”¾åœ¨ç­‰å¾…é˜Ÿåˆ—ä¸­</li>\n</ul>\n<p><code>ThreadPoolExecutor</code>å…¶ä»–å¸¸è§å‚æ•°:</p>\n<ol>\n<li>**<code>keepAliveTime</code>**ï¼šéæ ¸å¿ƒçº¿ç¨‹å¦‚æœå¤„äºé—²ç½®çŠ¶æ€è¶…è¿‡è¯¥å€¼ï¼Œå°±ä¼šè¢«é”€æ¯ã€‚</li>\n<li><strong><code>unit</code></strong> ï¼š<code>keepAliveTime</code> é—²ç½®é”€æ¯æ—¶é•¿çš„æ—¶é—´å•ä½</li>\n<li>**<code>threadFactory</code>**ï¼šä¸ºçº¿ç¨‹æ± æä¾›åˆ›å»ºæ–°çº¿ç¨‹çš„çº¿ç¨‹å·¥å‚</li>\n<li><strong><code>handler</code></strong> ï¼šçº¿ç¨‹æ± ä»»åŠ¡é˜Ÿåˆ—è¶…è¿‡ maxinumPoolSize ä¹‹åçš„æ‹’ç»ç­–ç•¥</li>\n</ol>\n<h4 id=\"ThreadPoolExecutoræ‹’ç»ç­–ç•¥\"><a href=\"#ThreadPoolExecutoræ‹’ç»ç­–ç•¥\" class=\"headerlink\" title=\"ThreadPoolExecutoræ‹’ç»ç­–ç•¥\"></a>ThreadPoolExecutoræ‹’ç»ç­–ç•¥</h4><p><strong><code>ThreadPoolExecutor</code></strong> <strong>æ‹’ç»ç­–ç•¥å®šä¹‰:</strong></p>\n<p>å¦‚æœå½“å‰åŒæ—¶è¿è¡Œçš„çº¿ç¨‹æ•°é‡è¾¾åˆ°æœ€å¤§çº¿ç¨‹æ•°é‡å¹¶ä¸”ç­‰å¾…é˜Ÿåˆ—ä¹Ÿå·²ç»è¢«æ”¾æ»¡æ—¶ï¼Œ<code>ThreadPoolTaskExecutor</code> å®šä¹‰ä¸€äº›ç­–ç•¥:</p>\n<ul>\n<li>**<code>ThreadPoolExecutor.AbortPolicy</code>**ï¼šæŠ›å‡º <code>RejectedExecutionException</code>æ¥æ‹’ç»æ–°ä»»åŠ¡çš„å¤„ç†ã€‚</li>\n<li>**<code>ThreadPoolExecutor.CallerRunsPolicy</code>**ï¼šè°ƒç”¨æ‰§è¡Œè‡ªå·±çš„çº¿ç¨‹è¿è¡Œä»»åŠ¡ã€‚</li>\n<li>**<code>ThreadPoolExecutor.DiscardPolicy</code>**ï¼šä¸å¤„ç†æ–°ä»»åŠ¡ï¼Œç›´æ¥ä¸¢å¼ƒæ‰ã€‚</li>\n<li>**<code>ThreadPoolExecutor.DiscardOldestPolicy</code>**ï¼š æ­¤ç­–ç•¥å°†ä¸¢å¼ƒæœ€æ—©çš„æœªå¤„ç†çš„ä»»åŠ¡è¯·æ±‚ã€‚</li>\n</ul>\n<h4 id=\"ä¸€ä¸ªç®€å•çš„çº¿ç¨‹æ± Demo-Runnable-ThreadPoolExecutor\"><a href=\"#ä¸€ä¸ªç®€å•çš„çº¿ç¨‹æ± Demo-Runnable-ThreadPoolExecutor\" class=\"headerlink\" title=\"ä¸€ä¸ªç®€å•çš„çº¿ç¨‹æ± Demo:Runnable + ThreadPoolExecutor\"></a>ä¸€ä¸ªç®€å•çš„çº¿ç¨‹æ± Demo:<code>Runnable</code> + <code>ThreadPoolExecutor</code></h4><p>çº¿ç¨‹æ± å®ç°åŸç†</p>\n<p><img src=\"https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/TyporaNotesaHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAxOS8xMS8yNS8xNmVhMDQ3NjEyOTVlNzY2.png\" alt=\"çº¿ç¨‹æ± å®ç°åŸç†\"></p>\n<p><strong>æ€»ç»“ä¸€ä¸‹å¤„ç†æµç¨‹</strong></p>\n<ol>\n<li>çº¿ç¨‹æ€»æ•°é‡ &lt; corePoolSizeï¼Œæ— è®ºçº¿ç¨‹æ˜¯å¦ç©ºé—²ï¼Œéƒ½ä¼šæ–°å»ºä¸€ä¸ªæ ¸å¿ƒçº¿ç¨‹æ‰§è¡Œä»»åŠ¡ï¼ˆè®©æ ¸å¿ƒçº¿ç¨‹æ•°é‡å¿«é€Ÿè¾¾åˆ°corePoolSizeï¼Œåœ¨æ ¸å¿ƒçº¿ç¨‹æ•°é‡ &lt; corePoolSizeæ—¶ï¼‰ã€‚<strong>æ³¨æ„ï¼Œè¿™ä¸€æ­¥éœ€è¦è·å¾—å…¨å±€é”ã€‚</strong></li>\n<li>çº¿ç¨‹æ€»æ•°é‡ &gt;&#x3D; corePoolSizeæ—¶ï¼Œæ–°æ¥çš„çº¿ç¨‹ä»»åŠ¡ä¼šè¿›å…¥ç­‰å¾…é˜Ÿåˆ—ä¸­ç­‰å¾…ï¼Œç„¶åç©ºé—²çš„æ ¸å¿ƒçº¿ç¨‹ä¼šä¾æ¬¡å»ç¼“å­˜é˜Ÿåˆ—ä¸­å–ä»»åŠ¡æ¥æ‰§è¡Œï¼ˆä½“ç°äº†<strong>çº¿ç¨‹å¤ç”¨</strong>ï¼‰ã€‚ </li>\n<li>å½“ç­‰å¾…é˜Ÿåˆ—æ»¡äº†ï¼Œè¯´æ˜è¿™ä¸ªæ—¶å€™ä»»åŠ¡å·²ç»å¤šåˆ°çˆ†æ£šï¼Œéœ€è¦ä¸€äº›â€œä¸´æ—¶å·¥â€æ¥æ‰§è¡Œè¿™äº›ä»»åŠ¡äº†ã€‚äºæ˜¯ä¼šåˆ›å»ºéæ ¸å¿ƒçº¿ç¨‹å»æ‰§è¡Œè¿™ä¸ªä»»åŠ¡ã€‚<strong>æ³¨æ„ï¼Œè¿™ä¸€æ­¥éœ€è¦è·å¾—å…¨å±€é”ã€‚</strong></li>\n<li>ç¼“å­˜é˜Ÿåˆ—ä¹‹å‰æ»¡äº†ï¼Œ ç°åœ¨åŠ éæ ¸å¿ƒçº¿ç¨‹ä¸”æ€»çº¿ç¨‹æ•°è¾¾åˆ°äº†maximumPoolSizeï¼Œåˆ™ä¼šé‡‡å–ä¸Šé¢æåˆ°çš„æ‹’ç»ç­–ç•¥è¿›è¡Œå¤„ç†ã€‚</li>\n</ol>\n<p>æ•´ä¸ªè¿‡ç¨‹å¦‚å›¾æ‰€ç¤ºï¼š</p>\n<p>ä¸ºäº†è®©å¤§å®¶æ›´æ¸…æ¥šä¸Šé¢çš„é¢è¯•é¢˜ä¸­çš„ä¸€äº›æ¦‚å¿µï¼Œæˆ‘å†™äº†ä¸€ä¸ªç®€å•çš„çº¿ç¨‹æ±  Demoã€‚</p>\n<p>é¦–å…ˆåˆ›å»ºä¸€ä¸ª <code>Runnable</code> æ¥å£çš„å®ç°ç±»ï¼ˆå½“ç„¶ä¹Ÿå¯ä»¥æ˜¯ <code>Callable</code> æ¥å£ï¼Œæˆ‘ä»¬ä¸Šé¢ä¹Ÿè¯´äº†ä¸¤è€…çš„åŒºåˆ«ã€‚ï¼‰</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> Java.util.Date;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * è¿™æ˜¯ä¸€ä¸ªç®€å•çš„Runnableç±»ï¼Œéœ€è¦å¤§çº¦5ç§’é’Ÿæ¥æ‰§è¡Œå…¶ä»»åŠ¡ã€‚</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">MyRunnable</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">Runnable</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> String command;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"title function_\">MyRunnable</span><span class=\"params\">(String s)</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.command = s;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">run</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        System.out.println(Thread.currentThread().getName() + <span class=\"string\">&quot; Start. Time = &quot;</span> + <span class=\"keyword\">new</span> <span class=\"title class_\">Date</span>());</span><br><span class=\"line\">        processCommand();</span><br><span class=\"line\">        System.out.println(Thread.currentThread().getName() + <span class=\"string\">&quot; End. Time = &quot;</span> + <span class=\"keyword\">new</span> <span class=\"title class_\">Date</span>());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title function_\">processCommand</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            Thread.sleep(<span class=\"number\">5000</span>);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (InterruptedException e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> String <span class=\"title function_\">toString</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"built_in\">this</span>.command;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ç¼–å†™æµ‹è¯•ç¨‹åºï¼Œæˆ‘ä»¬è¿™é‡Œä»¥é˜¿é‡Œå·´å·´æ¨èçš„ä½¿ç”¨ <code>ThreadPoolExecutor</code> æ„é€ å‡½æ•°è‡ªå®šä¹‰å‚æ•°çš„æ–¹å¼æ¥åˆ›å»ºçº¿ç¨‹æ± ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> Java.util.concurrent.ArrayBlockingQueue;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Java.util.concurrent.ThreadPoolExecutor;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Java.util.concurrent.TimeUnit;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">ThreadPoolExecutorDemo</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"type\">int</span> <span class=\"variable\">CORE_POOL_SIZE</span> <span class=\"operator\">=</span> <span class=\"number\">5</span>;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"type\">int</span> <span class=\"variable\">MAX_POOL_SIZE</span> <span class=\"operator\">=</span> <span class=\"number\">10</span>;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"type\">int</span> <span class=\"variable\">QUEUE_CAPACITY</span> <span class=\"operator\">=</span> <span class=\"number\">100</span>;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"type\">Long</span> <span class=\"variable\">KEEP_ALIVE_TIME</span> <span class=\"operator\">=</span> <span class=\"number\">1L</span>;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//ä½¿ç”¨é˜¿é‡Œå·´å·´æ¨èçš„åˆ›å»ºçº¿ç¨‹æ± çš„æ–¹å¼</span></span><br><span class=\"line\">        <span class=\"comment\">//é€šè¿‡ThreadPoolExecutoræ„é€ å‡½æ•°è‡ªå®šä¹‰å‚æ•°åˆ›å»º</span></span><br><span class=\"line\">        <span class=\"type\">ThreadPoolExecutor</span> <span class=\"variable\">executor</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">ThreadPoolExecutor</span>(</span><br><span class=\"line\">                CORE_POOL_SIZE,</span><br><span class=\"line\">                MAX_POOL_SIZE,</span><br><span class=\"line\">                KEEP_ALIVE_TIME,</span><br><span class=\"line\">                TimeUnit.SECONDS,</span><br><span class=\"line\">                <span class=\"keyword\">new</span> <span class=\"title class_\">ArrayBlockingQueue</span>&lt;&gt;(QUEUE_CAPACITY),</span><br><span class=\"line\">                <span class=\"keyword\">new</span> <span class=\"title class_\">ThreadPoolExecutor</span>.CallerRunsPolicy());</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>; i &lt; <span class=\"number\">10</span>; i++) &#123;</span><br><span class=\"line\">            <span class=\"comment\">//åˆ›å»ºWorkerThreadå¯¹è±¡ï¼ˆWorkerThreadç±»å®ç°äº†Runnable æ¥å£ï¼‰</span></span><br><span class=\"line\">            <span class=\"type\">Runnable</span> <span class=\"variable\">worker</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">MyRunnable</span>(<span class=\"string\">&quot;&quot;</span> + i);</span><br><span class=\"line\">            <span class=\"comment\">//æ‰§è¡ŒRunnable</span></span><br><span class=\"line\">            executor.execute(worker);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">//ç»ˆæ­¢çº¿ç¨‹æ± </span></span><br><span class=\"line\">        executor.shutdown();</span><br><span class=\"line\">        <span class=\"keyword\">while</span> (!executor.isTerminated()) &#123;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;Finished all threads&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>å¯ä»¥çœ‹åˆ°æˆ‘ä»¬ä¸Šé¢çš„ä»£ç æŒ‡å®šäº†ï¼š</p>\n<ol>\n<li><code>corePoolSize</code>: æ ¸å¿ƒçº¿ç¨‹æ•°ä¸º 5ã€‚</li>\n<li><code>maximumPoolSize</code> ï¼šæœ€å¤§çº¿ç¨‹æ•° 10</li>\n<li><code>keepAliveTime</code> : ç­‰å¾…æ—¶é—´ä¸º 1Lã€‚</li>\n<li><code>unit</code>: ç­‰å¾…æ—¶é—´çš„å•ä½ä¸º TimeUnit.SECONDSã€‚</li>\n<li><code>workQueue</code>ï¼šä»»åŠ¡é˜Ÿåˆ—ä¸º <code>ArrayBlockingQueue</code>ï¼Œå¹¶ä¸”å®¹é‡ä¸º 100;</li>\n<li><code>handler</code>:é¥±å’Œç­–ç•¥ä¸º <code>CallerRunsPolicy</code>ã€‚</li>\n</ol>\n<p><strong>Outputï¼š</strong></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pool-<span class=\"number\">1</span>-thread-<span class=\"number\">2</span> Start. Time = Tue Nov <span class=\"number\">12</span> <span class=\"number\">20</span>:<span class=\"number\">59</span>:<span class=\"number\">44</span> CST <span class=\"number\">2019</span></span><br><span class=\"line\">pool-<span class=\"number\">1</span>-thread-<span class=\"number\">5</span> Start. Time = Tue Nov <span class=\"number\">12</span> <span class=\"number\">20</span>:<span class=\"number\">59</span>:<span class=\"number\">44</span> CST <span class=\"number\">2019</span></span><br><span class=\"line\">pool-<span class=\"number\">1</span>-thread-<span class=\"number\">4</span> Start. Time = Tue Nov <span class=\"number\">12</span> <span class=\"number\">20</span>:<span class=\"number\">59</span>:<span class=\"number\">44</span> CST <span class=\"number\">2019</span></span><br><span class=\"line\">pool-<span class=\"number\">1</span>-thread-<span class=\"number\">1</span> Start. Time = Tue Nov <span class=\"number\">12</span> <span class=\"number\">20</span>:<span class=\"number\">59</span>:<span class=\"number\">44</span> CST <span class=\"number\">2019</span></span><br><span class=\"line\">pool-<span class=\"number\">1</span>-thread-<span class=\"number\">3</span> Start. Time = Tue Nov <span class=\"number\">12</span> <span class=\"number\">20</span>:<span class=\"number\">59</span>:<span class=\"number\">44</span> CST <span class=\"number\">2019</span></span><br><span class=\"line\">pool-<span class=\"number\">1</span>-thread-<span class=\"number\">5</span> End. Time = Tue Nov <span class=\"number\">12</span> <span class=\"number\">20</span>:<span class=\"number\">59</span>:<span class=\"number\">49</span> CST <span class=\"number\">2019</span></span><br><span class=\"line\">pool-<span class=\"number\">1</span>-thread-<span class=\"number\">3</span> End. Time = Tue Nov <span class=\"number\">12</span> <span class=\"number\">20</span>:<span class=\"number\">59</span>:<span class=\"number\">49</span> CST <span class=\"number\">2019</span></span><br><span class=\"line\">pool-<span class=\"number\">1</span>-thread-<span class=\"number\">2</span> End. Time = Tue Nov <span class=\"number\">12</span> <span class=\"number\">20</span>:<span class=\"number\">59</span>:<span class=\"number\">49</span> CST <span class=\"number\">2019</span></span><br><span class=\"line\">pool-<span class=\"number\">1</span>-thread-<span class=\"number\">4</span> End. Time = Tue Nov <span class=\"number\">12</span> <span class=\"number\">20</span>:<span class=\"number\">59</span>:<span class=\"number\">49</span> CST <span class=\"number\">2019</span></span><br><span class=\"line\">pool-<span class=\"number\">1</span>-thread-<span class=\"number\">1</span> End. Time = Tue Nov <span class=\"number\">12</span> <span class=\"number\">20</span>:<span class=\"number\">59</span>:<span class=\"number\">49</span> CST <span class=\"number\">2019</span></span><br><span class=\"line\">pool-<span class=\"number\">1</span>-thread-<span class=\"number\">2</span> Start. Time = Tue Nov <span class=\"number\">12</span> <span class=\"number\">20</span>:<span class=\"number\">59</span>:<span class=\"number\">49</span> CST <span class=\"number\">2019</span></span><br><span class=\"line\">pool-<span class=\"number\">1</span>-thread-<span class=\"number\">1</span> Start. Time = Tue Nov <span class=\"number\">12</span> <span class=\"number\">20</span>:<span class=\"number\">59</span>:<span class=\"number\">49</span> CST <span class=\"number\">2019</span></span><br><span class=\"line\">pool-<span class=\"number\">1</span>-thread-<span class=\"number\">4</span> Start. Time = Tue Nov <span class=\"number\">12</span> <span class=\"number\">20</span>:<span class=\"number\">59</span>:<span class=\"number\">49</span> CST <span class=\"number\">2019</span></span><br><span class=\"line\">pool-<span class=\"number\">1</span>-thread-<span class=\"number\">3</span> Start. Time = Tue Nov <span class=\"number\">12</span> <span class=\"number\">20</span>:<span class=\"number\">59</span>:<span class=\"number\">49</span> CST <span class=\"number\">2019</span></span><br><span class=\"line\">pool-<span class=\"number\">1</span>-thread-<span class=\"number\">5</span> Start. Time = Tue Nov <span class=\"number\">12</span> <span class=\"number\">20</span>:<span class=\"number\">59</span>:<span class=\"number\">49</span> CST <span class=\"number\">2019</span></span><br><span class=\"line\">pool-<span class=\"number\">1</span>-thread-<span class=\"number\">2</span> End. Time = Tue Nov <span class=\"number\">12</span> <span class=\"number\">20</span>:<span class=\"number\">59</span>:<span class=\"number\">54</span> CST <span class=\"number\">2019</span></span><br><span class=\"line\">pool-<span class=\"number\">1</span>-thread-<span class=\"number\">3</span> End. Time = Tue Nov <span class=\"number\">12</span> <span class=\"number\">20</span>:<span class=\"number\">59</span>:<span class=\"number\">54</span> CST <span class=\"number\">2019</span></span><br><span class=\"line\">pool-<span class=\"number\">1</span>-thread-<span class=\"number\">4</span> End. Time = Tue Nov <span class=\"number\">12</span> <span class=\"number\">20</span>:<span class=\"number\">59</span>:<span class=\"number\">54</span> CST <span class=\"number\">2019</span></span><br><span class=\"line\">pool-<span class=\"number\">1</span>-thread-<span class=\"number\">5</span> End. Time = Tue Nov <span class=\"number\">12</span> <span class=\"number\">20</span>:<span class=\"number\">59</span>:<span class=\"number\">54</span> CST <span class=\"number\">2019</span></span><br><span class=\"line\">pool-<span class=\"number\">1</span>-thread-<span class=\"number\">1</span> End. Time = Tue Nov <span class=\"number\">12</span> <span class=\"number\">20</span>:<span class=\"number\">59</span>:<span class=\"number\">54</span> CST <span class=\"number\">2019</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"å¹¶å‘å·¥å…·\"><a href=\"#å¹¶å‘å·¥å…·\" class=\"headerlink\" title=\"å¹¶å‘å·¥å…·\"></a>å¹¶å‘å·¥å…·</h2><h3 id=\"CountDownLatch-ä¸-CyclicBarrier\"><a href=\"#CountDownLatch-ä¸-CyclicBarrier\" class=\"headerlink\" title=\"CountDownLatch ä¸ CyclicBarrier\"></a>CountDownLatch ä¸ CyclicBarrier</h3><p>CountDownLatch ä¸ CyclicBarrier éƒ½æ˜¯ç”¨äºæ§åˆ¶å¹¶å‘çš„å·¥å…·ç±»ï¼Œéƒ½å¯ä»¥ç†è§£æˆç»´æŠ¤çš„å°±æ˜¯ä¸€ä¸ªè®¡æ•°å™¨ï¼Œä½†æ˜¯è¿™ä¸¤è€…è¿˜æ˜¯å„æœ‰ä¸åŒä¾§é‡ç‚¹çš„ï¼š</p>\n<ul>\n<li>CountDownLatch å¼ºè°ƒä¸€ä¸ªçº¿ç¨‹ç­‰å¤šä¸ªçº¿ç¨‹å®ŒæˆæŸä»¶äº‹æƒ…ã€‚CyclicBarrier æ˜¯å¤šä¸ªçº¿ç¨‹äº’ç­‰ï¼Œç­‰å¤§å®¶éƒ½å®Œæˆï¼Œå†æºæ‰‹å…±è¿›ï¼›</li>\n<li>è°ƒç”¨ CountDownLatch çš„ countDown æ–¹æ³•åï¼Œå½“å‰çº¿ç¨‹å¹¶ä¸ä¼šé˜»å¡ï¼Œä¼šç»§ç»­å¾€ä¸‹æ‰§è¡Œï¼›è€Œè°ƒç”¨CyclicBarrier çš„ await æ–¹æ³•ï¼Œä¼šé˜»å¡å½“å‰çº¿ç¨‹ï¼Œç›´åˆ° CyclicBarrier æŒ‡å®šçš„çº¿ç¨‹å…¨éƒ¨éƒ½åˆ°è¾¾äº†æŒ‡å®šç‚¹çš„æ—¶å€™ï¼Œæ‰èƒ½ç»§ç»­å¾€ä¸‹æ‰§è¡Œï¼›</li>\n<li>CountDownLatch æ˜¯ä¸èƒ½å¤ç”¨çš„ï¼Œè€Œ CyclicBarrier æ˜¯å¯ä»¥å¤ç”¨çš„ã€‚</li>\n</ul>\n<h3 id=\"Semaphore\"><a href=\"#Semaphore\" class=\"headerlink\" title=\"Semaphore\"></a>Semaphore</h3><p><strong>Semaphore(ä¿¡å·é‡)-å…è®¸å¤šä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®ï¼š</strong> synchronized å’Œ ReentrantLock éƒ½æ˜¯ä¸€æ¬¡åªå…è®¸ä¸€ä¸ªçº¿ç¨‹è®¿é—®æŸä¸ªèµ„æºï¼ŒSemaphore(ä¿¡å·é‡)å¯ä»¥æŒ‡å®šå¤šä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®æŸä¸ªèµ„æºã€‚</p>\n<p>Semaphore å°±æ˜¯ä¸€ä¸ªä¿¡å·é‡ï¼Œå®ƒçš„ä½œç”¨æ˜¯é™åˆ¶æŸæ®µä»£ç å—çš„å¹¶å‘æ•°ã€‚Semaphoreæœ‰ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œå¯ä»¥ä¼ å…¥ä¸€ä¸ª int å‹æ•´æ•° nï¼Œè¡¨ç¤ºæŸæ®µä»£ç æœ€å¤šåªæœ‰ n ä¸ªçº¿ç¨‹å¯ä»¥è®¿é—®ï¼Œå¦‚æœè¶…å‡ºäº† nï¼Œé‚£ä¹ˆè¯·ç­‰å¾…ï¼Œç­‰åˆ°æŸä¸ªçº¿ç¨‹æ‰§è¡Œå®Œæ¯•è¿™æ®µä»£ç å—ï¼Œä¸‹ä¸€ä¸ªçº¿ç¨‹å†è¿›å…¥ã€‚ç”±æ­¤å¯ä»¥çœ‹å‡ºå¦‚æœ Semaphore æ„é€ å‡½æ•°ä¸­ä¼ å…¥çš„ int å‹æ•´æ•° n&#x3D;1ï¼Œç›¸å½“äºå˜æˆäº†ä¸€ä¸ª synchronized äº†ã€‚</p>\n<h2 id=\"æ¨¡æ‹Ÿ\"><a href=\"#æ¨¡æ‹Ÿ\" class=\"headerlink\" title=\"æ¨¡æ‹Ÿ\"></a>æ¨¡æ‹Ÿ</h2><h3 id=\"æ­»é”\"><a href=\"#æ­»é”\" class=\"headerlink\" title=\"æ­»é”\"></a>æ­»é”</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">DeadLock</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"type\">Object</span> <span class=\"variable\">A</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Object</span>();</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"type\">Object</span> <span class=\"variable\">B</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Object</span>();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">new</span> <span class=\"title class_\">Thread</span>(() -&gt; &#123;</span><br><span class=\"line\">            <span class=\"keyword\">synchronized</span> (A) &#123;</span><br><span class=\"line\">                System.out.println(Thread.currentThread().getName() + <span class=\"string\">&quot; å·²è·å¾—èµ„æºA&quot;</span>);</span><br><span class=\"line\">                <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                    Thread.sleep(<span class=\"number\">1000</span>);</span><br><span class=\"line\">                &#125; <span class=\"keyword\">catch</span> (InterruptedException e) &#123;</span><br><span class=\"line\">                    e.printStackTrace();</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                System.out.println(Thread.currentThread().getName() + <span class=\"string\">&quot; ç­‰å¾…è·å¾—èµ„æºB&quot;</span>);</span><br><span class=\"line\">                <span class=\"keyword\">synchronized</span> (B) &#123;</span><br><span class=\"line\">                    System.out.println(Thread.currentThread().getName() + <span class=\"string\">&quot; å·²è·å¾—èµ„æºB&quot;</span>);</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;, <span class=\"string\">&quot;çº¿ç¨‹1&quot;</span>).start();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">new</span> <span class=\"title class_\">Thread</span>(() -&gt; &#123;</span><br><span class=\"line\">            <span class=\"keyword\">synchronized</span> (B) &#123;</span><br><span class=\"line\">                System.out.println(Thread.currentThread().getName() + <span class=\"string\">&quot; å·²è·å¾—èµ„æºB&quot;</span>);</span><br><span class=\"line\">                <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                    Thread.sleep(<span class=\"number\">1000</span>);</span><br><span class=\"line\">                &#125; <span class=\"keyword\">catch</span> (InterruptedException e) &#123;</span><br><span class=\"line\">                    e.printStackTrace();</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                System.out.println(Thread.currentThread().getName() + <span class=\"string\">&quot; ç­‰å¾…è·å¾—èµ„æºA&quot;</span>);</span><br><span class=\"line\">                <span class=\"keyword\">synchronized</span> (A) &#123;</span><br><span class=\"line\">                    System.out.println(Thread.currentThread().getName() + <span class=\"string\">&quot; å·²è·å¾—èµ„æºA&quot;</span>);</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;, <span class=\"string\">&quot;çº¿ç¨‹2&quot;</span>).start();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>çº¿ç¨‹1 å·²è·å¾—èµ„æºA<br>çº¿ç¨‹2 å·²è·å¾—èµ„æºB<br>çº¿ç¨‹1 ç­‰å¾…è·å¾—èµ„æºB<br>çº¿ç¨‹2 ç­‰å¾…è·å¾—èµ„æºA</p>\n</blockquote>\n<h3 id=\"runæ–¹æ³•å’Œstartæ–¹æ³•\"><a href=\"#runæ–¹æ³•å’Œstartæ–¹æ³•\" class=\"headerlink\" title=\"runæ–¹æ³•å’Œstartæ–¹æ³•\"></a>runæ–¹æ³•å’Œstartæ–¹æ³•</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">DiffStartRun</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">new</span> <span class=\"title class_\">Thread</span>(() -&gt; &#123;</span><br><span class=\"line\">            System.out.println(Thread.currentThread().getName());</span><br><span class=\"line\">        &#125;, <span class=\"string\">&quot;çº¿ç¨‹A&quot;</span>).run();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">new</span> <span class=\"title class_\">Thread</span>(() -&gt; &#123;</span><br><span class=\"line\">            System.out.println(Thread.currentThread().getName());</span><br><span class=\"line\">        &#125;, <span class=\"string\">&quot;çº¿ç¨‹B&quot;</span>).start();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>main<br>çº¿ç¨‹B</p>\n<p>new ä¸€ä¸ª Threadï¼Œçº¿ç¨‹è¿›å…¥äº†æ–°å»ºçŠ¶æ€ã€‚è°ƒç”¨ <code>start()</code>æ–¹æ³•ï¼Œä¼šå¯åŠ¨ä¸€ä¸ªçº¿ç¨‹å¹¶ä½¿çº¿ç¨‹è¿›å…¥äº†å°±ç»ªçŠ¶æ€ï¼Œå½“åˆ†é…åˆ°æ—¶é—´ç‰‡åå°±å¯ä»¥å¼€å§‹è¿è¡Œäº†ã€‚ <code>start()</code> ä¼šæ‰§è¡Œçº¿ç¨‹çš„ç›¸åº”å‡†å¤‡å·¥ä½œï¼Œç„¶åè‡ªåŠ¨æ‰§è¡Œ <code>run()</code> æ–¹æ³•çš„å†…å®¹ï¼Œè¿™æ˜¯çœŸæ­£çš„å¤šçº¿ç¨‹å·¥ä½œã€‚ ä½†æ˜¯ï¼Œç›´æ¥æ‰§è¡Œ <code>run()</code> æ–¹æ³•ï¼Œä¼šæŠŠ <code>run()</code> æ–¹æ³•å½“æˆä¸€ä¸ª main çº¿ç¨‹ä¸‹çš„æ™®é€šæ–¹æ³•å»æ‰§è¡Œï¼Œå¹¶ä¸ä¼šåœ¨æŸä¸ªçº¿ç¨‹ä¸­æ‰§è¡Œå®ƒï¼Œç¬¬ä¸€ä¸ªæ‰€è°“çš„çº¿ç¨‹Aåªæ˜¯ main çº¿ç¨‹çš„ä¸€ä¸ªæ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯è¯´å…¶æ‰€åœ¨çº¿ç¨‹è¿˜æ˜¯ main çº¿ç¨‹ï¼Œæ‰€ä»¥è¿™å¹¶ä¸æ˜¯å¤šçº¿ç¨‹å·¥ä½œã€‚</p>\n<p><strong>æ€»ç»“ï¼š è°ƒç”¨ start() æ–¹æ³•æ–¹å¯å¯åŠ¨çº¿ç¨‹å¹¶ä½¿çº¿ç¨‹è¿›å…¥å°±ç»ªçŠ¶æ€ï¼Œç›´æ¥æ‰§è¡Œ run() æ–¹æ³•çš„è¯ä¸ä¼šä»¥å¤šçº¿ç¨‹çš„æ–¹å¼æ‰§è¡Œã€‚</strong></p>\n</blockquote>\n<h3 id=\"ä¸¤ä¸ªçº¿ç¨‹ï¼Œäº¤æ›¿åŠ å‡\"><a href=\"#ä¸¤ä¸ªçº¿ç¨‹ï¼Œäº¤æ›¿åŠ å‡\" class=\"headerlink\" title=\"ä¸¤ä¸ªçº¿ç¨‹ï¼Œäº¤æ›¿åŠ å‡\"></a>ä¸¤ä¸ªçº¿ç¨‹ï¼Œäº¤æ›¿åŠ å‡</h3><ol>\n<li><p>synchronized</p>\n <figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> fangyaxing</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@date</span> 2022/9/12</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">TwoThreadWithSync</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"type\">int</span> <span class=\"variable\">value</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"type\">Object</span> <span class=\"variable\">lock</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Object</span>();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">new</span> <span class=\"title class_\">Thread</span>(() -&gt; &#123;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>; i &lt; <span class=\"number\">5</span>; i++) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">synchronized</span> (lock) &#123;</span><br><span class=\"line\">                    <span class=\"keyword\">while</span> (value != <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">                        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                            lock.wait();</span><br><span class=\"line\">                        &#125; <span class=\"keyword\">catch</span> (InterruptedException e) &#123;</span><br><span class=\"line\">                            e.printStackTrace();</span><br><span class=\"line\">                        &#125;</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                    value++;</span><br><span class=\"line\">                    System.out.println(Thread.currentThread().getName() + <span class=\"string\">&quot; ---- &quot;</span> + value);</span><br><span class=\"line\">                    lock.notifyAll();</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;, <span class=\"string\">&quot;Thread-A&quot;</span>).start();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">new</span> <span class=\"title class_\">Thread</span>(() -&gt; &#123;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>; i &lt; <span class=\"number\">5</span>; i++) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">synchronized</span> (lock) &#123;</span><br><span class=\"line\">                    <span class=\"keyword\">while</span> (value != <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">                        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                            lock.wait();</span><br><span class=\"line\">                        &#125; <span class=\"keyword\">catch</span> (InterruptedException e) &#123;</span><br><span class=\"line\">                            e.printStackTrace();</span><br><span class=\"line\">                        &#125;</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                    value--;</span><br><span class=\"line\">                    System.out.println(Thread.currentThread().getName() + <span class=\"string\">&quot; ---- &quot;</span> + value);</span><br><span class=\"line\">                    lock.notifyAll();</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;, <span class=\"string\">&quot;Thread-B&quot;</span>).start();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>lock + condition</p>\n <figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> fangyaxing</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@date</span> 2022/9/12</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">TwoThreadWithLock</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"type\">int</span> <span class=\"variable\">value</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"type\">Lock</span> <span class=\"variable\">lock</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">ReentrantLock</span>();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">static</span> <span class=\"type\">Condition</span> <span class=\"variable\">a</span> <span class=\"operator\">=</span> lock.newCondition();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">static</span> <span class=\"type\">Condition</span> <span class=\"variable\">b</span> <span class=\"operator\">=</span> lock.newCondition();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">new</span> <span class=\"title class_\">Thread</span>(() -&gt; &#123;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>; i &lt; <span class=\"number\">5</span>; i++) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                    lock.lock();</span><br><span class=\"line\">                    <span class=\"keyword\">while</span> (value != <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">                        a.await();</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                    value++;</span><br><span class=\"line\">                    System.out.println(Thread.currentThread().getName() + <span class=\"string\">&quot; ---- &quot;</span> + value);</span><br><span class=\"line\">                    b.signal();</span><br><span class=\"line\">                &#125; <span class=\"keyword\">catch</span> (InterruptedException e) &#123;</span><br><span class=\"line\">                    e.printStackTrace();</span><br><span class=\"line\">                &#125; <span class=\"keyword\">finally</span> &#123;</span><br><span class=\"line\">                    lock.unlock();</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;, <span class=\"string\">&quot;Thread-A&quot;</span>).start();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">new</span> <span class=\"title class_\">Thread</span>(() -&gt; &#123;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>; i &lt; <span class=\"number\">5</span>; i++) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                    lock.lock();</span><br><span class=\"line\">                    <span class=\"keyword\">while</span> (value != <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">                        b.await();</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                    value--;</span><br><span class=\"line\">                    System.out.println(Thread.currentThread().getName() + <span class=\"string\">&quot; ---- &quot;</span> + value);</span><br><span class=\"line\">                    a.signal();</span><br><span class=\"line\">                &#125; <span class=\"keyword\">catch</span> (InterruptedException e) &#123;</span><br><span class=\"line\">                    e.printStackTrace();</span><br><span class=\"line\">                &#125; <span class=\"keyword\">finally</span> &#123;</span><br><span class=\"line\">                    lock.unlock();</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;, <span class=\"string\">&quot;Thread-B&quot;</span>).start();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n</ol>\n<h3 id=\"ä¸‰ä¸ªçº¿ç¨‹ï¼Œå¾ªç¯æ‰“å°\"><a href=\"#ä¸‰ä¸ªçº¿ç¨‹ï¼Œå¾ªç¯æ‰“å°\" class=\"headerlink\" title=\"ä¸‰ä¸ªçº¿ç¨‹ï¼Œå¾ªç¯æ‰“å°\"></a>ä¸‰ä¸ªçº¿ç¨‹ï¼Œå¾ªç¯æ‰“å°</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">Demo5</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"type\">int</span> <span class=\"variable\">value</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"type\">Lock</span> <span class=\"variable\">lock</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">ReentrantLock</span>();</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"type\">Condition</span> <span class=\"variable\">a</span> <span class=\"operator\">=</span> lock.newCondition();</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"type\">Condition</span> <span class=\"variable\">b</span> <span class=\"operator\">=</span> lock.newCondition();</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"type\">Condition</span> <span class=\"variable\">c</span> <span class=\"operator\">=</span> lock.newCondition();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">outputA</span><span class=\"params\">(<span class=\"type\">int</span> round)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            lock.lock();</span><br><span class=\"line\">            <span class=\"keyword\">while</span> (value != <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">                a.await();</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            value = <span class=\"number\">1</span>;</span><br><span class=\"line\">            System.out.println(<span class=\"string\">&quot;ç¬¬&quot;</span> + round + <span class=\"string\">&quot;è½®ï¼Œ&quot;</span> + Thread.currentThread().getName() + <span class=\"string\">&quot;è¾“å‡ºA&quot;</span>);</span><br><span class=\"line\">            b.signal();</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (Exception e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125; <span class=\"keyword\">finally</span> &#123;</span><br><span class=\"line\">            lock.unlock();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">outputB</span><span class=\"params\">(<span class=\"type\">int</span> round)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            lock.lock();</span><br><span class=\"line\">            <span class=\"keyword\">while</span> (value != <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">                b.await();</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            value = <span class=\"number\">2</span>;</span><br><span class=\"line\">            System.out.println(<span class=\"string\">&quot;ç¬¬&quot;</span> + round + <span class=\"string\">&quot;è½®ï¼Œ&quot;</span> + Thread.currentThread().getName() + <span class=\"string\">&quot;è¾“å‡ºB&quot;</span>);</span><br><span class=\"line\">            c.signal();</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (Exception e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125; <span class=\"keyword\">finally</span> &#123;</span><br><span class=\"line\">            lock.unlock();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">outputC</span><span class=\"params\">(<span class=\"type\">int</span> round)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            lock.lock();</span><br><span class=\"line\">            <span class=\"keyword\">while</span> (value != <span class=\"number\">2</span>) &#123;</span><br><span class=\"line\">                c.await();</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            value = <span class=\"number\">0</span>;</span><br><span class=\"line\">            System.out.println(<span class=\"string\">&quot;ç¬¬&quot;</span> + round + <span class=\"string\">&quot;è½®ï¼Œ&quot;</span> + Thread.currentThread().getName() + <span class=\"string\">&quot;è¾“å‡ºC&quot;</span>);</span><br><span class=\"line\">            a.signal();</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (Exception e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125; <span class=\"keyword\">finally</span> &#123;</span><br><span class=\"line\">            lock.unlock();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> &#123;</span><br><span class=\"line\">        <span class=\"type\">Demo5</span> <span class=\"variable\">s</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Demo5</span>();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">new</span> <span class=\"title class_\">Thread</span>(() -&gt; &#123;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>; i &lt; <span class=\"number\">3</span>; i++) &#123;</span><br><span class=\"line\">                s.outputA(i);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;, <span class=\"string\">&quot;Thread-A&quot;</span>).start();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">new</span> <span class=\"title class_\">Thread</span>(() -&gt; &#123;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>; i &lt; <span class=\"number\">3</span>; i++) &#123;</span><br><span class=\"line\">                s.outputB(i);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;, <span class=\"string\">&quot;Thread-B&quot;</span>).start();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">new</span> <span class=\"title class_\">Thread</span>(() -&gt; &#123;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>; i &lt; <span class=\"number\">3</span>; i++) &#123;</span><br><span class=\"line\">                s.outputC(i);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;, <span class=\"string\">&quot;Thread-C&quot;</span>).start();</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"length":35754,"excerpt":"<blockquote>\n<p>æ•´ç†çš„Javaå¹¶å‘ç›¸å…³çŸ¥è¯†ç‚¹å’Œé¢è¯•é¢˜ï¼Œéƒ¨åˆ†å†…å®¹æ‘˜è‡ªç½‘ç»œï¼Œå¦‚æœ‰ä¾µæƒè¯·è”ç³»æˆ‘ï½","more":"</p>\n</blockquote>\n<h2 id=\"åŸºç¡€çŸ¥è¯†\"><a href=\"#åŸºç¡€çŸ¥è¯†\" class=\"headerlink\" title=\"åŸºç¡€çŸ¥è¯†\"></a>åŸºç¡€çŸ¥è¯†</h2><h3 id=\"å¹¶å‘ç¼–ç¨‹çš„ä¼˜ç¼ºç‚¹\"><a href=\"#å¹¶å‘ç¼–ç¨‹çš„ä¼˜ç¼ºç‚¹\" class=\"headerlink\" title=\"å¹¶å‘ç¼–ç¨‹çš„ä¼˜ç¼ºç‚¹\"></a>å¹¶å‘ç¼–ç¨‹çš„ä¼˜ç¼ºç‚¹</h3><p>ä¼˜ç‚¹ï¼šä¸ºäº†èƒ½æé«˜ç¨‹åºçš„æ‰§è¡Œæ•ˆç‡ï¼Œæé«˜ç¨‹åºè¿è¡Œé€Ÿåº¦ï¼›</p>\n<p>ç¼ºç‚¹ï¼šå­˜åœ¨å†…å­˜æ³„æ¼ã€ä¸Šä¸‹æ–‡åˆ‡æ¢ã€çº¿ç¨‹å®‰å…¨ã€æ­»é”ç­‰é—®é¢˜ã€‚</p>\n<h4 id=\"å¹¶å‘ç¼–ç¨‹ä¸‰è¦ç´ æ˜¯ä»€ä¹ˆï¼Ÿåœ¨-Java-ç¨‹åºä¸­æ€ä¹ˆä¿è¯å¤šçº¿ç¨‹çš„è¿è¡Œå®‰å…¨ï¼Ÿ\"><a href=\"#å¹¶å‘ç¼–ç¨‹ä¸‰è¦ç´ æ˜¯ä»€ä¹ˆï¼Ÿåœ¨-Java-ç¨‹åºä¸­æ€ä¹ˆä¿è¯å¤šçº¿ç¨‹çš„è¿è¡Œå®‰å…¨ï¼Ÿ\" class=\"headerlink\" title=\"å¹¶å‘ç¼–ç¨‹ä¸‰è¦ç´ æ˜¯ä»€ä¹ˆï¼Ÿåœ¨ Java ç¨‹åºä¸­æ€ä¹ˆä¿è¯å¤šçº¿ç¨‹çš„è¿è¡Œå®‰å…¨ï¼Ÿ\"></a>å¹¶å‘ç¼–ç¨‹ä¸‰è¦ç´ æ˜¯ä»€ä¹ˆï¼Ÿåœ¨ Java ç¨‹åºä¸­æ€ä¹ˆä¿è¯å¤šçº¿ç¨‹çš„è¿è¡Œå®‰å…¨ï¼Ÿ</h4><p>å¹¶å‘ç¼–ç¨‹ä¸‰è¦ç´ ï¼ˆçº¿ç¨‹çš„å®‰å…¨æ€§é—®é¢˜ä½“ç°åœ¨ï¼‰ï¼š</p>\n<p><strong>åŸå­æ€§</strong>ï¼šåŸå­ï¼Œå³ä¸€ä¸ªä¸å¯å†è¢«åˆ†å‰²çš„é¢—ç²’ã€‚åŸå­æ€§æŒ‡çš„æ˜¯ä¸€ä¸ªæˆ–å¤šä¸ªæ“ä½œè¦ä¹ˆå…¨éƒ¨æ‰§è¡ŒæˆåŠŸè¦ä¹ˆå…¨éƒ¨æ‰§è¡Œå¤±è´¥ã€‚ï¼ˆsynchronizedï¼ŒLockï¼‰ï¼ˆçº¿ç¨‹åˆ‡æ¢å¼•èµ·çš„åŸå­æ€§é—®é¢˜ï¼‰</p>\n<p><strong>å¯è§æ€§</strong>ï¼šä¸€ä¸ªçº¿ç¨‹å¯¹å…±äº«å˜é‡çš„ä¿®æ”¹ï¼Œå¦ä¸€ä¸ªçº¿ç¨‹èƒ½å¤Ÿç«‹åˆ»çœ‹åˆ°ã€‚ï¼ˆsynchronizedï¼ŒLockï¼Œvolatileï¼‰ï¼ˆJMM å†…å­˜æ¨¡å‹å¯¼è‡´çš„å¯è§æ€§é—®é¢˜ï¼‰</p>\n<p><strong>æœ‰åºæ€§</strong>ï¼šç¨‹åºæ‰§è¡Œçš„é¡ºåºæŒ‰ç…§ä»£ç çš„å…ˆåé¡ºåºæ‰§è¡Œã€‚ï¼ˆsynchronizedï¼ŒLockï¼Œvolatileï¼‰ï¼ˆæŒ‡ä»¤é‡æ’åºå¸¦æ¥çš„æœ‰åºæ€§é—®é¢˜ï¼‰</p>\n<blockquote>\n<p>volatileä¸èƒ½ä¿è¯å¹¶å‘å®‰å…¨ï¼Œæ¯”å¦‚å¤šçº¿ç¨‹å¯¹ä¸€ä¸ªvolatileçš„intå˜é‡è¿›è¡ŒåŠ 1æ“ä½œï¼Œæœ€ç»ˆå¾—åˆ°çš„æ•°å­—å¯èƒ½æ¯”é¢„æœŸå°ï¼Œå°±æ˜¯å› ä¸º++æ“ä½œä¸æ˜¯åŸå­æ€§çš„ï¼Œè€Œvolatileä¹Ÿä¸èƒ½ä¿è¯åŸå­æ€§ï¼Œæ‰€ä»¥å°±ä¼šæœ‰è¿™ä¸ªé—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨<code>atomicInteger.getAndSet()</code>åŸå­æ“ä½œã€‚</p>\n</blockquote>\n<h3 id=\"çº¿ç¨‹å’Œè¿›ç¨‹\"><a href=\"#çº¿ç¨‹å’Œè¿›ç¨‹\" class=\"headerlink\" title=\"çº¿ç¨‹å’Œè¿›ç¨‹\"></a>çº¿ç¨‹å’Œè¿›ç¨‹</h3><h4 id=\"è¿›ç¨‹é—´çš„é€šä¿¡æ–¹å¼\"><a href=\"#è¿›ç¨‹é—´çš„é€šä¿¡æ–¹å¼\" class=\"headerlink\" title=\"è¿›ç¨‹é—´çš„é€šä¿¡æ–¹å¼\"></a>è¿›ç¨‹é—´çš„é€šä¿¡æ–¹å¼</h4><ol>\n<li><strong>ç®¡é“&#x2F;åŒ¿åç®¡é“(Pipes)</strong> ï¼šç”¨äºå…·æœ‰äº²ç¼˜å…³ç³»çš„çˆ¶å­è¿›ç¨‹é—´æˆ–è€…å…„å¼Ÿè¿›ç¨‹ä¹‹é—´çš„é€šä¿¡ï¼›</li>\n<li>**æœ‰åç®¡é“(Names Pipes)<strong>ï¼šåŒ¿åç®¡é“ç”±äºæ²¡æœ‰åå­—ï¼Œåªèƒ½ç”¨äºäº²ç¼˜å…³ç³»çš„è¿›ç¨‹é—´é€šä¿¡ã€‚ä¸ºäº†å…‹æœè¿™ä¸ªç¼ºç‚¹ï¼Œæå‡ºäº†æœ‰åç®¡é“ã€‚æœ‰åç®¡é“ä¸¥æ ¼éµå¾ª</strong>å…ˆè¿›å…ˆå‡º(first in first out)**ã€‚æœ‰åç®¡é“ä»¥ç£ç›˜æ–‡ä»¶çš„æ–¹å¼å­˜åœ¨ï¼Œå¯ä»¥å®ç°æœ¬æœºä»»æ„ä¸¤ä¸ªè¿›ç¨‹é€šä¿¡ï¼›</li>\n<li><strong>ä¿¡å·(Signal)</strong> ï¼šä¿¡å·æ˜¯ä¸€ç§æ¯”è¾ƒå¤æ‚çš„é€šä¿¡æ–¹å¼ï¼Œç”¨äºé€šçŸ¥æ¥æ”¶è¿›ç¨‹æŸä¸ªäº‹ä»¶å·²ç»å‘ç”Ÿï¼›</li>\n<li><strong>æ¶ˆæ¯é˜Ÿåˆ—(Message Queuing)</strong> ï¼šæ¶ˆæ¯é˜Ÿåˆ—æ˜¯æ¶ˆæ¯çš„é“¾è¡¨ï¼Œå…·æœ‰ç‰¹å®šçš„æ ¼å¼ï¼Œå­˜æ”¾åœ¨å†…å­˜ä¸­å¹¶ç”±æ¶ˆæ¯é˜Ÿåˆ—æ ‡è¯†ç¬¦æ ‡è¯†ã€‚<strong>æ¶ˆæ¯é˜Ÿåˆ—å…‹æœäº†ä¿¡å·æ‰¿è½½ä¿¡æ¯é‡å°‘ï¼Œç®¡é“åªèƒ½æ‰¿è½½æ— æ ¼å¼å­—èŠ‚æµä»¥åŠç¼“å†²åŒºå¤§å°å—é™ç­‰ç¼ºç‚¹</strong>ï¼›</li>\n<li><strong>ä¿¡å·é‡(Semaphores)</strong> ï¼šä¿¡å·é‡æ˜¯ä¸€ä¸ªè®¡æ•°å™¨ï¼Œç”¨äºå¤šè¿›ç¨‹å¯¹å…±äº«æ•°æ®çš„è®¿é—®ï¼Œä¿¡å·é‡çš„æ„å›¾åœ¨äºè¿›ç¨‹é—´åŒæ­¥ã€‚è¿™ç§é€šä¿¡æ–¹å¼ä¸»è¦ç”¨äºè§£å†³ä¸åŒæ­¥ç›¸å…³çš„é—®é¢˜å¹¶é¿å…ç«äº‰æ¡ä»¶ã€‚  </li>\n<li><strong>å…±äº«å†…å­˜(Shared memory)</strong> ï¼šä½¿å¾—å¤šä¸ªè¿›ç¨‹å¯ä»¥è®¿é—®åŒä¸€å—å†…å­˜ç©ºé—´ï¼Œä¸åŒè¿›ç¨‹å¯ä»¥åŠæ—¶çœ‹åˆ°å¯¹æ–¹è¿›ç¨‹ä¸­å¯¹å…±äº«å†…å­˜ä¸­æ•°æ®çš„æ›´æ–°ã€‚è¿™ç§æ–¹å¼éœ€è¦ä¾é æŸç§åŒæ­¥æ“ä½œï¼Œå¦‚äº’æ–¥é”å’Œä¿¡å·é‡ç­‰ã€‚å¯ä»¥è¯´è¿™æ˜¯æœ€æœ‰ç”¨çš„è¿›ç¨‹é—´é€šä¿¡æ–¹å¼ã€‚</li>\n<li>**å¥—æ¥å­—(Sockets)**ï¼šæ­¤æ–¹æ³•ä¸»è¦ç”¨äºåœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´é€šè¿‡ç½‘ç»œè¿›è¡Œé€šä¿¡ã€‚å¥—æ¥å­—æ˜¯æ”¯æŒ TCP&#x2F;IP çš„ç½‘ç»œé€šä¿¡çš„åŸºæœ¬æ“ä½œå•å…ƒï¼Œå¯ä»¥çœ‹åšæ˜¯ä¸åŒä¸»æœºä¹‹é—´çš„è¿›ç¨‹è¿›è¡ŒåŒå‘é€šä¿¡çš„ç«¯ç‚¹ï¼Œç®€å•çš„è¯´å°±æ˜¯é€šä¿¡çš„ä¸¤æ–¹çš„ä¸€ç§çº¦å®šï¼Œç”¨å¥—æ¥å­—ä¸­çš„ç›¸å…³å‡½æ•°æ¥å®Œæˆé€šä¿¡è¿‡ç¨‹ã€‚</li>\n</ol>\n<h4 id=\"çº¿ç¨‹é—´çš„åŒæ­¥æ–¹å¼\"><a href=\"#çº¿ç¨‹é—´çš„åŒæ­¥æ–¹å¼\" class=\"headerlink\" title=\"çº¿ç¨‹é—´çš„åŒæ­¥æ–¹å¼\"></a>çº¿ç¨‹é—´çš„åŒæ­¥æ–¹å¼</h4><p>çº¿ç¨‹åŒæ­¥æ˜¯ä¸¤ä¸ªæˆ–å¤šä¸ªå…±äº«å…³é”®èµ„æºçš„çº¿ç¨‹çš„å¹¶å‘æ‰§è¡Œã€‚åº”è¯¥åŒæ­¥çº¿ç¨‹ä»¥é¿å…å…³é”®çš„èµ„æºä½¿ç”¨å†²çªã€‚</p>\n<ol>\n<li>**äº’æ–¥é‡(Mutex)**ï¼šé‡‡ç”¨äº’æ–¥å¯¹è±¡æœºåˆ¶ï¼Œåªæœ‰æ‹¥æœ‰äº’æ–¥å¯¹è±¡çš„çº¿ç¨‹æ‰æœ‰è®¿é—®å…¬å…±èµ„æºçš„æƒé™ã€‚å› ä¸ºäº’æ–¥å¯¹è±¡åªæœ‰ä¸€ä¸ªï¼Œæ‰€ä»¥å¯ä»¥ä¿è¯å…¬å…±èµ„æºä¸ä¼šè¢«å¤šä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®ï¼Œæ¯”å¦‚ Java ä¸­çš„ synchronized å…³é”®è¯å’Œå„ç§ Lock éƒ½æ˜¯è¿™ç§æœºåˆ¶ï¼›</li>\n<li><strong>ä¿¡å·é‡(Semphares)</strong> ï¼šå®ƒå…è®¸åŒä¸€æ—¶åˆ»å¤šä¸ªçº¿ç¨‹è®¿é—®åŒä¸€èµ„æºï¼Œä½†æ˜¯éœ€è¦æ§åˆ¶åŒä¸€æ—¶åˆ»è®¿é—®æ­¤èµ„æºçš„æœ€å¤§çº¿ç¨‹æ•°é‡ï¼›</li>\n<li><strong>äº‹ä»¶(Event)</strong> ï¼šwait&#x2F;notifyï¼šé€šè¿‡é€šçŸ¥æ“ä½œçš„æ–¹å¼æ¥ä¿æŒå¤šçº¿ç¨‹åŒæ­¥ï¼Œè¿˜å¯ä»¥æ–¹ä¾¿çš„å®ç°å¤šçº¿ç¨‹ä¼˜å…ˆçº§çš„æ¯”è¾ƒæ“ä½œã€‚</li>\n</ol>\n<h4 id=\"ä»€ä¹ˆæ˜¯çº¿ç¨‹å’Œè¿›ç¨‹\"><a href=\"#ä»€ä¹ˆæ˜¯çº¿ç¨‹å’Œè¿›ç¨‹\" class=\"headerlink\" title=\"ä»€ä¹ˆæ˜¯çº¿ç¨‹å’Œè¿›ç¨‹?\"></a>ä»€ä¹ˆæ˜¯çº¿ç¨‹å’Œè¿›ç¨‹?</h4><p><strong>è¿›ç¨‹</strong>ï¼šè¿›ç¨‹æ˜¯åº”ç”¨ç¨‹åºçš„ä¸€æ¬¡è¿è¡Œï¼Œæ¯ä¸ªè¿›ç¨‹éƒ½æœ‰è‡ªå·±ç‹¬ç«‹çš„å†…å­˜ç©ºé—´ï¼›æ˜¯æ“ä½œç³»ç»Ÿèµ„æºåˆ†é…çš„åŸºæœ¬å•ä½ï¼›</p>\n<p><strong>çº¿ç¨‹</strong>ï¼šçº¿ç¨‹æ˜¯å¤„ç†å™¨è°ƒåº¦å’Œæ‰§è¡Œçš„åŸºæœ¬å•ä½ï¼Œä¸€ä¸ªè¿›ç¨‹ä¸­å¯ä»¥æœ‰å¤šä¸ªçº¿ç¨‹ï¼Œçº¿ç¨‹å…±äº«è¿›ç¨‹çš„å†…å­˜ç©ºé—´å’Œèµ„æºã€‚</p>\n<h4 id=\"ä»€ä¹ˆæ˜¯ä¸Šä¸‹æ–‡åˆ‡æ¢\"><a href=\"#ä»€ä¹ˆæ˜¯ä¸Šä¸‹æ–‡åˆ‡æ¢\" class=\"headerlink\" title=\"ä»€ä¹ˆæ˜¯ä¸Šä¸‹æ–‡åˆ‡æ¢?\"></a>ä»€ä¹ˆæ˜¯ä¸Šä¸‹æ–‡åˆ‡æ¢?</h4><p>å¤šçº¿ç¨‹ç¼–ç¨‹ä¸­ä¸€èˆ¬çº¿ç¨‹çš„ä¸ªæ•°éƒ½å¤§äº CPU æ ¸å¿ƒçš„ä¸ªæ•°ï¼Œè€Œä¸€ä¸ª CPU æ ¸å¿ƒåœ¨ä»»æ„æ—¶åˆ»åªèƒ½è¢«ä¸€ä¸ªçº¿ç¨‹ä½¿ç”¨ï¼Œä¸ºäº†è®©è¿™äº›çº¿ç¨‹éƒ½èƒ½å¾—åˆ°æœ‰æ•ˆæ‰§è¡Œï¼ŒCPU é‡‡å–çš„ç­–ç•¥æ˜¯ä¸ºæ¯ä¸ªçº¿ç¨‹åˆ†é…æ—¶é—´ç‰‡å¹¶è½®è½¬çš„å½¢å¼ã€‚</p>\n<p>å½“å‰ä»»åŠ¡åœ¨æ‰§è¡Œå®Œ CPU æ—¶é—´ç‰‡åˆ‡æ¢åˆ°å¦ä¸€ä¸ªä»»åŠ¡ä¹‹å‰ä¼šå…ˆä¿å­˜è‡ªå·±çš„çŠ¶æ€ï¼Œä»¥ä¾¿ä¸‹æ¬¡å†åˆ‡æ¢å›è¿™ä¸ªä»»åŠ¡æ—¶ï¼Œå¯ä»¥å†åŠ è½½è¿™ä¸ªä»»åŠ¡çš„çŠ¶æ€ã€‚<strong>ä»»åŠ¡ä»ä¿å­˜åˆ°å†åŠ è½½çš„è¿‡ç¨‹å°±æ˜¯ä¸€æ¬¡ä¸Šä¸‹æ–‡åˆ‡æ¢</strong>ã€‚</p>\n<p>ä¸Šä¸‹æ–‡åˆ‡æ¢å¯¹ç³»ç»Ÿæ¥è¯´æ„å‘³ç€æ¶ˆè€—å¤§é‡çš„ CPU æ—¶é—´ï¼Œäº‹å®ä¸Šï¼Œå¯èƒ½æ˜¯æ“ä½œç³»ç»Ÿä¸­æ—¶é—´æ¶ˆè€—æœ€å¤§çš„æ“ä½œã€‚</p>\n<h4 id=\"å®ˆæŠ¤çº¿ç¨‹å’Œç”¨æˆ·çº¿ç¨‹æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿ\"><a href=\"#å®ˆæŠ¤çº¿ç¨‹å’Œç”¨æˆ·çº¿ç¨‹æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿ\" class=\"headerlink\" title=\"å®ˆæŠ¤çº¿ç¨‹å’Œç”¨æˆ·çº¿ç¨‹æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿ\"></a>å®ˆæŠ¤çº¿ç¨‹å’Œç”¨æˆ·çº¿ç¨‹æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿ</h4><ul>\n<li><strong>ç”¨æˆ· (User) çº¿ç¨‹</strong>ï¼šè¿è¡Œåœ¨å‰å°ï¼Œæ‰§è¡Œå…·ä½“çš„ä»»åŠ¡</li>\n<li><strong>å®ˆæŠ¤ (Daemon) çº¿ç¨‹</strong>ï¼šè¿è¡Œåœ¨åå°ï¼Œä¸ºå…¶ä»–å‰å°çº¿ç¨‹æœåŠ¡ã€‚ä¸€æ—¦æ‰€æœ‰ç”¨æˆ·çº¿ç¨‹éƒ½ç»“æŸè¿è¡Œï¼Œå®ˆæŠ¤çº¿ç¨‹ä¼šéš JVM ä¸€èµ·ç»“æŸå·¥ä½œ</li>\n</ul>\n<p><strong>æ³¨æ„äº‹é¡¹ï¼š</strong></p>\n<ol>\n<li><code>setDaemon(true)</code>å¿…é¡»åœ¨<code>start()</code>æ–¹æ³•å‰æ‰§è¡Œï¼Œå¦åˆ™ä¼šæŠ›å‡º <code>IllegalThreadStateException</code> å¼‚å¸¸</li>\n<li>åœ¨å®ˆæŠ¤çº¿ç¨‹ä¸­äº§ç”Ÿçš„æ–°çº¿ç¨‹ä¹Ÿæ˜¯å®ˆæŠ¤çº¿ç¨‹</li>\n<li>ä¸æ˜¯æ‰€æœ‰çš„ä»»åŠ¡éƒ½å¯ä»¥åˆ†é…ç»™å®ˆæŠ¤çº¿ç¨‹æ¥æ‰§è¡Œï¼Œæ¯”å¦‚è¯»å†™æ“ä½œæˆ–è€…è®¡ç®—é€»è¾‘</li>\n<li>å®ˆæŠ¤ (Daemon) çº¿ç¨‹ä¸­ä¸èƒ½ä¾é  finally å—çš„å†…å®¹æ¥ç¡®ä¿æ‰§è¡Œå…³é—­æˆ–æ¸…ç†èµ„æºçš„é€»è¾‘ã€‚å› ä¸ºæˆ‘ä»¬ä¸Šé¢ä¹Ÿè¯´è¿‡äº†ä¸€æ—¦æ‰€æœ‰ç”¨æˆ·çº¿ç¨‹éƒ½ç»“æŸè¿è¡Œï¼Œå®ˆæŠ¤çº¿ç¨‹ä¼šéš JVM ä¸€èµ·ç»“æŸå·¥ä½œï¼Œæ‰€ä»¥å®ˆæŠ¤ (Daemon) çº¿ç¨‹ä¸­çš„ finally è¯­å¥å—å¯èƒ½æ— æ³•è¢«æ‰§è¡Œã€‚</li>\n</ol>\n<h4 id=\"å¦‚ä½•åœ¨-Windows-å’Œ-Linux-ä¸ŠæŸ¥æ‰¾å“ªä¸ªçº¿ç¨‹cpuåˆ©ç”¨ç‡æœ€é«˜ï¼Ÿ\"><a href=\"#å¦‚ä½•åœ¨-Windows-å’Œ-Linux-ä¸ŠæŸ¥æ‰¾å“ªä¸ªçº¿ç¨‹cpuåˆ©ç”¨ç‡æœ€é«˜ï¼Ÿ\" class=\"headerlink\" title=\"å¦‚ä½•åœ¨ Windows å’Œ Linux ä¸ŠæŸ¥æ‰¾å“ªä¸ªçº¿ç¨‹cpuåˆ©ç”¨ç‡æœ€é«˜ï¼Ÿ\"></a>å¦‚ä½•åœ¨ Windows å’Œ Linux ä¸ŠæŸ¥æ‰¾å“ªä¸ªçº¿ç¨‹cpuåˆ©ç”¨ç‡æœ€é«˜ï¼Ÿ</h4><p>Windowsä¸Šé¢ç”¨ä»»åŠ¡ç®¡ç†å™¨çœ‹ï¼ŒLinuxä¸‹å¯ä»¥ç”¨ top è¿™ä¸ªå‘½ä»¤çœ‹ã€‚</p>\n<h4 id=\"ä»€ä¹ˆæ˜¯çº¿ç¨‹æ­»é”\"><a href=\"#ä»€ä¹ˆæ˜¯çº¿ç¨‹æ­»é”\" class=\"headerlink\" title=\"ä»€ä¹ˆæ˜¯çº¿ç¨‹æ­»é”\"></a>ä»€ä¹ˆæ˜¯çº¿ç¨‹æ­»é”</h4><p>æ­»é”æ˜¯æŒ‡ä¸¤ä¸ªæˆ–ä¸¤ä¸ªä»¥ä¸Šçš„è¿›ç¨‹ï¼ˆçº¿ç¨‹ï¼‰åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œç”±äºç«äº‰èµ„æºé€ æˆçš„ä¸€ç§é˜»å¡çš„ç°è±¡ï¼Œè‹¥æ— å¤–åŠ›ä½œç”¨ï¼Œå®ƒä»¬éƒ½å°†æ— æ³•æ¨è¿›ä¸‹å»ã€‚</p>\n<p>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œçº¿ç¨‹ A æŒæœ‰èµ„æº 2ï¼Œçº¿ç¨‹ B æŒæœ‰èµ„æº 1ï¼Œä»–ä»¬åŒæ—¶éƒ½æƒ³ç”³è¯·å¯¹æ–¹çš„èµ„æºï¼Œæ‰€ä»¥è¿™ä¸¤ä¸ªçº¿ç¨‹å°±ä¼šäº’ç›¸ç­‰å¾…è€Œè¿›å…¥æ­»é”çŠ¶æ€ã€‚</p>\n<p><img src=\"https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/202206152131355.png\" alt=\"çº¿ç¨‹æ­»é”\"></p>\n<p>ä¸‹é¢é€šè¿‡ä¸€ä¸ªä¾‹å­æ¥è¯´æ˜çº¿ç¨‹æ­»é”ï¼Œä»£ç æ¨¡æ‹Ÿäº†ä¸Šå›¾çš„æ­»é”çš„æƒ…å†µ (ä»£ç æ¥æºäºã€Šå¹¶å‘ç¼–ç¨‹ä¹‹ç¾ã€‹)ï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">DeadLockDemo</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"type\">Object</span> <span class=\"variable\">resource1</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Object</span>();\t<span class=\"comment\">//èµ„æº 1</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"type\">Object</span> <span class=\"variable\">resource2</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Object</span>();\t<span class=\"comment\">//èµ„æº 2</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">new</span> <span class=\"title class_\">Thread</span>(() -&gt; &#123;</span><br><span class=\"line\">            <span class=\"keyword\">synchronized</span> (resource1) &#123;</span><br><span class=\"line\">                System.out.println(Thread.currentThread() + <span class=\"string\">&quot;get resource1&quot;</span>);</span><br><span class=\"line\">                <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                    Thread.sleep(<span class=\"number\">1000</span>);</span><br><span class=\"line\">                &#125; <span class=\"keyword\">catch</span> (InterruptedException e) &#123;</span><br><span class=\"line\">                    e.printStackTrace();</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                System.out.println(Thread.currentThread() + <span class=\"string\">&quot;waiting get resource2&quot;</span>);</span><br><span class=\"line\">                <span class=\"keyword\">synchronized</span> (resource2) &#123;</span><br><span class=\"line\">                    System.out.println(Thread.currentThread() + <span class=\"string\">&quot;get resource2&quot;</span>);</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;, <span class=\"string\">&quot;çº¿ç¨‹ 1&quot;</span>).start();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">new</span> <span class=\"title class_\">Thread</span>(() -&gt; &#123;</span><br><span class=\"line\">            <span class=\"keyword\">synchronized</span> (resource2) &#123;</span><br><span class=\"line\">                System.out.println(Thread.currentThread() + <span class=\"string\">&quot;get resource2&quot;</span>);</span><br><span class=\"line\">                <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                    Thread.sleep(<span class=\"number\">1000</span>);</span><br><span class=\"line\">                &#125; <span class=\"keyword\">catch</span> (InterruptedException e) &#123;</span><br><span class=\"line\">                    e.printStackTrace();</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                System.out.println(Thread.currentThread() + <span class=\"string\">&quot;waiting get resource1&quot;</span>);</span><br><span class=\"line\">                <span class=\"keyword\">synchronized</span> (resource1) &#123;</span><br><span class=\"line\">                    System.out.println(Thread.currentThread() + <span class=\"string\">&quot;get resource1&quot;</span>);</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;, <span class=\"string\">&quot;çº¿ç¨‹ 2&quot;</span>).start();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>è¾“å‡ºç»“æœ</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Thread[çº¿ç¨‹ <span class=\"number\">1</span>,<span class=\"number\">5</span>,main]get resource1</span><br><span class=\"line\">Thread[çº¿ç¨‹ <span class=\"number\">2</span>,<span class=\"number\">5</span>,main]get resource2</span><br><span class=\"line\">Thread[çº¿ç¨‹ <span class=\"number\">1</span>,<span class=\"number\">5</span>,main]waiting get resource2</span><br><span class=\"line\">Thread[çº¿ç¨‹ <span class=\"number\">2</span>,<span class=\"number\">5</span>,main]waiting get resource1</span><br></pre></td></tr></table></figure>\n\n<p>çº¿ç¨‹ A é€šè¿‡ synchronized (resource1) è·å¾— resource1 çš„ç›‘è§†å™¨é”ï¼Œç„¶åé€šè¿‡<code>Thread.sleep(1000)</code>ï¼›è®©çº¿ç¨‹ A ä¼‘çœ  1s ä¸ºçš„æ˜¯è®©çº¿ç¨‹ B å¾—åˆ°CPUæ‰§è¡Œæƒï¼Œç„¶åè·å–åˆ° resource2 çš„ç›‘è§†å™¨é”ã€‚çº¿ç¨‹ A å’Œçº¿ç¨‹ B ä¼‘çœ ç»“æŸäº†éƒ½å¼€å§‹ä¼å›¾è¯·æ±‚è·å–å¯¹æ–¹çš„èµ„æºï¼Œç„¶åè¿™ä¸¤ä¸ªçº¿ç¨‹å°±ä¼šé™·å…¥äº’ç›¸ç­‰å¾…çš„çŠ¶æ€ï¼Œè¿™ä¹Ÿå°±äº§ç”Ÿäº†æ­»é”ã€‚ä¸Šé¢çš„ä¾‹å­ç¬¦åˆäº§ç”Ÿæ­»é”çš„å››ä¸ªå¿…è¦æ¡ä»¶ã€‚</p>\n<h4 id=\"å½¢æˆæ­»é”çš„å››ä¸ªå¿…è¦æ¡ä»¶æ˜¯ä»€ä¹ˆ\"><a href=\"#å½¢æˆæ­»é”çš„å››ä¸ªå¿…è¦æ¡ä»¶æ˜¯ä»€ä¹ˆ\" class=\"headerlink\" title=\"å½¢æˆæ­»é”çš„å››ä¸ªå¿…è¦æ¡ä»¶æ˜¯ä»€ä¹ˆ\"></a>å½¢æˆæ­»é”çš„å››ä¸ªå¿…è¦æ¡ä»¶æ˜¯ä»€ä¹ˆ</h4><ol>\n<li>äº’æ–¥æ¡ä»¶ï¼šä¸€ä¸ªèµ„æºåªèƒ½è¢«ä¸€ä¸ªçº¿ç¨‹å ç”¨ï¼Œç›´åˆ°è¢«è¯¥çº¿ç¨‹é‡Šæ”¾ï¼›</li>\n<li>è¯·æ±‚ä¸ä¿æŒæ¡ä»¶ï¼šä¸€ä¸ªçº¿ç¨‹å› è¯·æ±‚è¢«å ç”¨èµ„æºè€Œå‘ç”Ÿé˜»å¡æ—¶ï¼Œå¯¹å·²è·å¾—çš„èµ„æºä¿æŒä¸æ”¾ï¼›</li>\n<li>ä¸å‰¥å¤ºæ¡ä»¶ï¼šçº¿ç¨‹ï¼›å·²è·å¾—çš„èµ„æºåœ¨æœ«ä½¿ç”¨å®Œä¹‹å‰ä¸èƒ½è¢«å…¶ä»–çº¿ç¨‹å¼ºè¡Œå‰¥å¤ºï¼Œåªæœ‰è‡ªå·±ä½¿ç”¨å®Œæ¯•åæ‰é‡Šæ”¾èµ„æºï¼›</li>\n<li>å¾ªç¯ç­‰å¾…æ¡ä»¶ï¼šå½“å‘ç”Ÿæ­»é”æ—¶ï¼Œæ‰€ç­‰å¾…çš„çº¿ç¨‹å¿…å®šä¼šå½¢æˆä¸€ä¸ªç¯è·¯ï¼ˆç±»ä¼¼äºæ­»å¾ªç¯ï¼‰ï¼Œé€ æˆæ°¸ä¹…é˜»å¡</li>\n</ol>\n<h4 id=\"å¦‚ä½•é¿å…çº¿ç¨‹æ­»é”\"><a href=\"#å¦‚ä½•é¿å…çº¿ç¨‹æ­»é”\" class=\"headerlink\" title=\"å¦‚ä½•é¿å…çº¿ç¨‹æ­»é”\"></a>å¦‚ä½•é¿å…çº¿ç¨‹æ­»é”</h4><p>æˆ‘ä»¬åªè¦ç ´åäº§ç”Ÿæ­»é”çš„å››ä¸ªæ¡ä»¶ä¸­çš„å…¶ä¸­ä¸€ä¸ªå°±å¯ä»¥äº†ã€‚</p>\n<p><strong>ç ´åäº’æ–¥æ¡ä»¶</strong>ï¼šæ— æ³•ç ´åï¼Œå› ä¸ºæˆ‘ä»¬ç”¨é”æœ¬æ¥å°±æ˜¯æƒ³å®ç°äº’æ–¥è®¿é—®ä¸´ç•Œèµ„æºï¼›</p>\n<p><strong>ç ´åè¯·æ±‚ä¸ä¿æŒæ¡ä»¶</strong>ï¼šä¸€æ¬¡æ€§ç”³è¯·æ‰€æœ‰çš„èµ„æºï¼›</p>\n<p><strong>ç ´åä¸å‰¥å¤ºæ¡ä»¶</strong>ï¼šå ç”¨éƒ¨åˆ†èµ„æºçš„çº¿ç¨‹è¿›ä¸€æ­¥ç”³è¯·å…¶ä»–èµ„æºæ—¶ï¼Œ<strong>å¦‚æœç”³è¯·ä¸åˆ°ï¼Œå¯ä»¥ä¸»åŠ¨é‡Šæ”¾å®ƒå æœ‰çš„èµ„æº</strong>ï¼›</p>\n<p><strong>ç ´åå¾ªç¯ç­‰å¾…æ¡ä»¶</strong>ï¼šé <strong>æŒ‰åºç”³è¯·</strong>èµ„æºæ¥é¢„é˜²ã€‚æŒ‰æŸä¸€é¡ºåºç”³è¯·èµ„æºï¼Œé‡Šæ”¾èµ„æºåˆ™ååºé‡Šæ”¾ã€‚ç ´åå¾ªç¯ç­‰å¾…æ¡ä»¶ã€‚</p>\n<p>æˆ‘ä»¬å¯¹çº¿ç¨‹ 2 çš„ä»£ç ä¿®æ”¹æˆä¸‹é¢è¿™æ ·å°±ä¸ä¼šäº§ç”Ÿæ­»é”äº†ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">new</span> <span class=\"title class_\">Thread</span>(() -&gt; &#123;</span><br><span class=\"line\">    <span class=\"keyword\">synchronized</span> (resource1) &#123;</span><br><span class=\"line\">        System.out.println(Thread.currentThread() + <span class=\"string\">&quot;get resource1&quot;</span>);</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            Thread.sleep(<span class=\"number\">1000</span>);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (InterruptedException e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        System.out.println(Thread.currentThread() + <span class=\"string\">&quot;waiting get resource2&quot;</span>);</span><br><span class=\"line\">        <span class=\"keyword\">synchronized</span> (resource2) &#123;</span><br><span class=\"line\">            System.out.println(Thread.currentThread() + <span class=\"string\">&quot;get resource2&quot;</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;, <span class=\"string\">&quot;çº¿ç¨‹ 2&quot;</span>).start();</span><br></pre></td></tr></table></figure>\n\n<p>è¾“å‡ºç»“æœ</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Thread[çº¿ç¨‹ <span class=\"number\">1</span>,<span class=\"number\">5</span>,main]get resource1</span><br><span class=\"line\">Thread[çº¿ç¨‹ <span class=\"number\">1</span>,<span class=\"number\">5</span>,main]waiting get resource2</span><br><span class=\"line\">Thread[çº¿ç¨‹ <span class=\"number\">1</span>,<span class=\"number\">5</span>,main]get resource2</span><br><span class=\"line\">Thread[çº¿ç¨‹ <span class=\"number\">2</span>,<span class=\"number\">5</span>,main]get resource1</span><br><span class=\"line\">Thread[çº¿ç¨‹ <span class=\"number\">2</span>,<span class=\"number\">5</span>,main]waiting get resource2</span><br><span class=\"line\">Thread[çº¿ç¨‹ <span class=\"number\">2</span>,<span class=\"number\">5</span>,main]get resource2</span><br></pre></td></tr></table></figure>\n\n<p>æˆ‘ä»¬åˆ†æä¸€ä¸‹ä¸Šé¢çš„ä»£ç ä¸ºä»€ä¹ˆé¿å…äº†æ­»é”çš„å‘ç”Ÿ?</p>\n<p>çº¿ç¨‹ 1 é¦–å…ˆè·å¾—åˆ° resource1 çš„ç›‘è§†å™¨é”ï¼Œè¿™æ—¶å€™çº¿ç¨‹ 2 å°±è·å–ä¸åˆ°äº†ã€‚ç„¶åçº¿ç¨‹ 1 å†å»è·å– resource2 çš„ç›‘è§†å™¨é”ï¼Œå¯ä»¥è·å–åˆ°ã€‚ç„¶åçº¿ç¨‹ 1 é‡Šæ”¾äº†å¯¹ resource1ã€resource2 çš„ç›‘è§†å™¨é”çš„å ç”¨ï¼Œçº¿ç¨‹ 2 è·å–åˆ°å°±å¯ä»¥æ‰§è¡Œäº†ã€‚è¿™æ ·å°±ç ´åäº†ç ´åå¾ªç¯ç­‰å¾…æ¡ä»¶ï¼Œå› æ­¤é¿å…äº†æ­»é”ã€‚</p>\n<h4 id=\"åˆ›å»ºçº¿ç¨‹æœ‰å“ªå‡ ç§æ–¹å¼ï¼Ÿ\"><a href=\"#åˆ›å»ºçº¿ç¨‹æœ‰å“ªå‡ ç§æ–¹å¼ï¼Ÿ\" class=\"headerlink\" title=\"åˆ›å»ºçº¿ç¨‹æœ‰å“ªå‡ ç§æ–¹å¼ï¼Ÿ\"></a>åˆ›å»ºçº¿ç¨‹æœ‰å“ªå‡ ç§æ–¹å¼ï¼Ÿ</h4><p>åˆ›å»ºçº¿ç¨‹æœ‰å››ç§æ–¹å¼ï¼š</p>\n<ul>\n<li>ç»§æ‰¿ Thread ç±»ï¼›</li>\n<li>å®ç° Runnable æ¥å£ï¼›</li>\n<li>å®ç° Callable æ¥å£ï¼›</li>\n<li>ä½¿ç”¨ Executors å·¥å…·ç±»åˆ›å»ºçº¿ç¨‹æ± </li>\n</ul>\n<p><strong>ç»§æ‰¿ Thread ç±»</strong></p>\n<ol>\n<li>å®šä¹‰ä¸€ä¸ª Thread ç±»çš„å­ç±»ï¼Œé‡å†™ run æ–¹æ³•</li>\n<li>åˆ›å»ºè‡ªå®šä¹‰çš„çº¿ç¨‹å­ç±»å¯¹è±¡</li>\n<li>è°ƒç”¨å­ç±»å®ä¾‹çš„ start() æ–¹æ³•æ¥å¯åŠ¨çº¿ç¨‹</li>\n</ol>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">Main</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">static</span> <span class=\"keyword\">class</span> <span class=\"title class_\">MyThread</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">Thread</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"meta\">@Override</span></span><br><span class=\"line\">        <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">run</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">            System.out.println(Thread.currentThread().getName() + <span class=\"string\">&quot; run()æ–¹æ³•æ­£åœ¨æ‰§è¡Œ...&quot;</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">new</span> <span class=\"title class_\">MyThread</span>().start();</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            Thread.sleep(<span class=\"number\">10</span>);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (InterruptedException e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        System.out.println(Thread.currentThread().getName() + <span class=\"string\">&quot; main()æ–¹æ³•æ‰§è¡Œç»“æŸ&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><strong>å®ç° Runnable æ¥å£</strong></p>\n<ol>\n<li>å®šä¹‰ Runnable æ¥å£å®ç°ç±» MyRunnableï¼Œå¹¶é‡å†™ run() æ–¹æ³•</li>\n<li>åˆ›å»º MyRunnable å®ä¾‹ myRunnableï¼Œä»¥ myRunnable ä½œä¸º target åˆ›å»º Thread å¯¹è±¡ï¼Œ<strong>è¯¥Threadå¯¹è±¡æ‰æ˜¯çœŸæ­£çš„çº¿ç¨‹å¯¹è±¡</strong></li>\n<li>è°ƒç”¨çº¿ç¨‹å¯¹è±¡çš„ start() æ–¹æ³•</li>\n</ol>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">Main</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">static</span> <span class=\"keyword\">class</span> <span class=\"title class_\">MyRunnable</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">Runnable</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"meta\">@Override</span></span><br><span class=\"line\">        <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">run</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">            System.out.println(Thread.currentThread().getName() + <span class=\"string\">&quot; run()æ–¹æ³•æ­£åœ¨æ‰§è¡Œ...&quot;</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">new</span> <span class=\"title class_\">Thread</span>(<span class=\"keyword\">new</span> <span class=\"title class_\">MyRunnable</span>()).start();</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            Thread.sleep(<span class=\"number\">10</span>);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (InterruptedException e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        System.out.println(Thread.currentThread().getName() + <span class=\"string\">&quot; main()æ–¹æ³•æ‰§è¡Œç»“æŸ&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><strong>å®ç° Callable æ¥å£</strong></p>\n<ol>\n<li>åˆ›å»ºå®ç° Callable æ¥å£çš„ç±» myCallable</li>\n<li>â­ä»¥ myCallable ä¸ºå‚æ•°åˆ›å»º FutureTask å¯¹è±¡</li>\n<li>å°† FutureTask ä½œä¸ºå‚æ•°åˆ›å»º Thread å¯¹è±¡</li>\n<li>è°ƒç”¨çº¿ç¨‹å¯¹è±¡çš„ start() æ–¹æ³•</li>\n</ol>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">Main</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">static</span> <span class=\"keyword\">class</span> <span class=\"title class_\">MyCallable</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">Callable</span>&lt;Integer&gt; &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"meta\">@Override</span></span><br><span class=\"line\">        <span class=\"keyword\">public</span> Integer <span class=\"title function_\">call</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> Exception &#123;</span><br><span class=\"line\">            System.out.println(Thread.currentThread().getName() + <span class=\"string\">&quot; call()æ–¹æ³•æ‰§è¡Œä¸­...&quot;</span>);</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"number\">1</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> &#123;</span><br><span class=\"line\">        FutureTask&lt;Integer&gt; futureTask = <span class=\"keyword\">new</span> <span class=\"title class_\">FutureTask</span>&lt;&gt;(<span class=\"keyword\">new</span> <span class=\"title class_\">MyCallable</span>());</span><br><span class=\"line\">        <span class=\"keyword\">new</span> <span class=\"title class_\">Thread</span>(futureTask).start();</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            Thread.sleep(<span class=\"number\">10</span>);</span><br><span class=\"line\">            System.out.println(futureTask.get());</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (InterruptedException | ExecutionException e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        System.out.println(Thread.currentThread().getName() + <span class=\"string\">&quot; main()æ–¹æ³•æ‰§è¡Œå®Œæˆ&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><strong>ä½¿ç”¨ Executors å·¥å…·ç±»åˆ›å»ºçº¿ç¨‹æ± </strong></p>\n<p>Executors æä¾›äº†ä¸€ç³»åˆ—å·¥å‚æ–¹æ³•ç”¨äºåˆ›å»ºçº¿ç¨‹æ± ï¼Œè¿”å›çš„çº¿ç¨‹æ± éƒ½å®ç°äº† ExecutorService æ¥å£ã€‚</p>\n<p>ä¸»è¦æœ‰ new[Single&#x2F;Fixed&#x2F;Cached&#x2F;Scheduled]ThreadPool è¿™å››ç§çº¿ç¨‹æ± </p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">MyRunnable</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">Runnable</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">run</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        System.out.println(Thread.currentThread().getName() + <span class=\"string\">&quot; run()æ–¹æ³•æ‰§è¡Œä¸­...&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">SingleThreadExecutorTest</span> &#123;n</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> &#123;</span><br><span class=\"line\">        <span class=\"type\">ExecutorService</span> <span class=\"variable\">executorService</span> <span class=\"operator\">=</span> Executors.newSingleThreadExecutor();</span><br><span class=\"line\">        <span class=\"type\">MyRunnable</span> <span class=\"variable\">myRunnable</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">MyRunnable</span>();</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>; i &lt; <span class=\"number\">5</span>; i++) &#123;</span><br><span class=\"line\">            executorService.execute(myRunnable);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;çº¿ç¨‹ä»»åŠ¡å¼€å§‹æ‰§è¡Œ&quot;</span>);</span><br><span class=\"line\">        executorService.shutdown();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"è¯´ä¸€ä¸‹-runnable-å’Œ-callable-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\"><a href=\"#è¯´ä¸€ä¸‹-runnable-å’Œ-callable-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\" class=\"headerlink\" title=\"è¯´ä¸€ä¸‹ runnable å’Œ callable æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\"></a>è¯´ä¸€ä¸‹ runnable å’Œ callable æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h4><p>ç›¸åŒç‚¹</p>\n<ul>\n<li>éƒ½æ˜¯æ¥å£</li>\n<li>éƒ½å¯ä»¥ç”¨æ¥å®ç°å¤šçº¿ç¨‹</li>\n<li>éƒ½é‡‡ç”¨ Thread.start() å¯åŠ¨çº¿ç¨‹</li>\n</ul>\n<p><strong>ä¸»è¦åŒºåˆ«</strong></p>\n<ul>\n<li>Runnable æ¥å£ run æ–¹æ³•æ— è¿”å›å€¼ï¼›Callable æ¥å£ call æ–¹æ³•æœ‰è¿”å›å€¼ï¼Œå’Œ FutureTask é…åˆå¯ä»¥ç”¨æ¥è·å–å¼‚æ­¥æ‰§è¡Œçš„ç»“æœ</li>\n<li>Runnable æ¥å£ run æ–¹æ³•æ— æ³•æ•è·å¹¶å¤„ç†å¼‚å¸¸ï¼›Callable æ¥å£ call æ–¹æ³•å¯ä»¥æ•è·å¹¶å¤„ç†å¼‚å¸¸</li>\n</ul>\n<h4 id=\"çº¿ç¨‹çš„-run-å’Œ-start-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\"><a href=\"#çº¿ç¨‹çš„-run-å’Œ-start-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\" class=\"headerlink\" title=\"çº¿ç¨‹çš„ run()å’Œ start()æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\"></a>çº¿ç¨‹çš„ run()å’Œ start()æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h4><blockquote>\n<p>start() æ–¹æ³•æ¥å¯åŠ¨ä¸€ä¸ªçº¿ç¨‹ï¼ŒçœŸæ­£å®ç°äº†å¤šçº¿ç¨‹è¿è¡Œã€‚è°ƒç”¨ start() æ–¹æ³•æ— éœ€ç­‰å¾…runæ–¹æ³•ä½“ä»£ç æ‰§è¡Œå®Œæ¯•ï¼Œå¯ä»¥ç›´æ¥ç»§ç»­æ‰§è¡Œå…¶ä»–çš„ä»£ç ï¼› æ­¤æ—¶çº¿ç¨‹æ˜¯å¤„äºå°±ç»ªçŠ¶æ€ï¼Œå¹¶æ²¡æœ‰è¿è¡Œã€‚ ç„¶åé€šè¿‡æ­¤ Thread ç±»è°ƒç”¨æ–¹æ³• run() æ¥å®Œæˆå…¶è¿è¡ŒçŠ¶æ€ï¼Œ run() æ–¹æ³•è¿è¡Œç»“æŸï¼Œ æ­¤çº¿ç¨‹ç»ˆæ­¢ã€‚ç„¶å CPU å†è°ƒåº¦å…¶å®ƒçº¿ç¨‹ã€‚</p>\n</blockquote>\n<p>start() æ–¹æ³•ç”¨äºå¯åŠ¨çº¿ç¨‹ï¼Œrun() æ–¹æ³•ç”¨äºæ‰§è¡Œçº¿ç¨‹çš„è¿è¡Œæ—¶ä»£ç ï¼Œç›´æ¥è°ƒç”¨run()ï¼Œå…¶å®å°±ç›¸å½“äºæ˜¯è°ƒç”¨äº†ä¸€ä¸ªæ™®é€šå‡½æ•°è€Œå·²ã€‚<br>start() åªèƒ½è°ƒç”¨ä¸€æ¬¡ï¼Œrun() å¯ä»¥é‡å¤è°ƒç”¨ã€‚</p>\n<h4 id=\"ä»€ä¹ˆæ˜¯-Callable-å’Œ-Future\"><a href=\"#ä»€ä¹ˆæ˜¯-Callable-å’Œ-Future\" class=\"headerlink\" title=\"ä»€ä¹ˆæ˜¯ Callable å’Œ Future?\"></a>ä»€ä¹ˆæ˜¯ Callable å’Œ Future?</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">FutureTask&lt;Integer&gt; futureTask = <span class=\"keyword\">new</span> <span class=\"title class_\">FutureTask</span>&lt;&gt;(<span class=\"keyword\">new</span> <span class=\"title class_\">MyCallable</span>());</span><br><span class=\"line\"><span class=\"keyword\">new</span> <span class=\"title class_\">Thread</span>(futureTask).start();</span><br></pre></td></tr></table></figure>\n\n<p>å°† callable å®ä¾‹ä¼ å…¥ futureï¼Œç„¶åå°† future å®ä¾‹ä¼ å…¥ Thread åˆ›å»ºçº¿ç¨‹ï¼Œ<br>ä¹‹åå¯ä»¥ç”¨ future æ¥è·å– callable  ä¸­ call() çš„è¿”å›ç»“æœã€‚</p>\n<h4 id=\"çº¿ç¨‹çš„çŠ¶æ€å’ŒåŸºæœ¬æ“ä½œ\"><a href=\"#çº¿ç¨‹çš„çŠ¶æ€å’ŒåŸºæœ¬æ“ä½œ\" class=\"headerlink\" title=\"çº¿ç¨‹çš„çŠ¶æ€å’ŒåŸºæœ¬æ“ä½œ\"></a>çº¿ç¨‹çš„çŠ¶æ€å’ŒåŸºæœ¬æ“ä½œ</h4><img src=\"https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/TyporaNotes1650518197279.png\" alt=\"çº¿ç¨‹çš„çŠ¶æ€\" style=\"zoom:67%;\" />\n\n<h4 id=\"Java-ä¸­ç”¨åˆ°çš„çº¿ç¨‹è°ƒåº¦ç®—æ³•æ˜¯ä»€ä¹ˆï¼Ÿ\"><a href=\"#Java-ä¸­ç”¨åˆ°çš„çº¿ç¨‹è°ƒåº¦ç®—æ³•æ˜¯ä»€ä¹ˆï¼Ÿ\" class=\"headerlink\" title=\"Java ä¸­ç”¨åˆ°çš„çº¿ç¨‹è°ƒåº¦ç®—æ³•æ˜¯ä»€ä¹ˆï¼Ÿ\"></a>Java ä¸­ç”¨åˆ°çš„çº¿ç¨‹è°ƒåº¦ç®—æ³•æ˜¯ä»€ä¹ˆï¼Ÿ</h4><p>çº¿ç¨‹è°ƒåº¦æ˜¯æŒ‡æŒ‰ç…§ç‰¹å®šæœºåˆ¶ä¸ºå¤šä¸ªçº¿ç¨‹åˆ†é… CPU çš„ä½¿ç”¨æƒã€‚</p>\n<p>æœ‰ä¸¤ç§è°ƒåº¦æ¨¡å‹ï¼š<strong>æ—¶é—´ç‰‡è½®è½¬</strong>æ¨¡å‹å’Œ<strong>ä¼˜å…ˆçº§è°ƒåº¦</strong>æ¨¡å‹ã€‚</p>\n<p><strong>Javaè™šæ‹Ÿæœºé‡‡ç”¨ä¼˜å…ˆçº§è°ƒåº¦æ¨¡å‹</strong>ï¼Œæ˜¯æŒ‡ä¼˜å…ˆè®©å¯è¿è¡Œæ± ä¸­ä¼˜å…ˆçº§é«˜çš„çº¿ç¨‹å ç”¨CPUï¼Œå¦‚æœå¯è¿è¡Œæ± ä¸­çš„çº¿ç¨‹ä¼˜å…ˆçº§ç›¸åŒï¼Œé‚£ä¹ˆå°±éšæœºé€‰æ‹©ä¸€ä¸ªçº¿ç¨‹ï¼Œä½¿å…¶å ç”¨CPUã€‚å¤„äºè¿è¡ŒçŠ¶æ€çš„çº¿ç¨‹ä¼šä¸€ç›´è¿è¡Œï¼Œç›´è‡³å®ƒä¸å¾—ä¸æ”¾å¼ƒ CPUã€‚</p>\n<h4 id=\"è¯·è¯´å‡ºä¸çº¿ç¨‹åŒæ­¥ä»¥åŠçº¿ç¨‹è°ƒåº¦ç›¸å…³çš„æ–¹æ³•ã€‚\"><a href=\"#è¯·è¯´å‡ºä¸çº¿ç¨‹åŒæ­¥ä»¥åŠçº¿ç¨‹è°ƒåº¦ç›¸å…³çš„æ–¹æ³•ã€‚\" class=\"headerlink\" title=\"è¯·è¯´å‡ºä¸çº¿ç¨‹åŒæ­¥ä»¥åŠçº¿ç¨‹è°ƒåº¦ç›¸å…³çš„æ–¹æ³•ã€‚\"></a>è¯·è¯´å‡ºä¸çº¿ç¨‹åŒæ­¥ä»¥åŠçº¿ç¨‹è°ƒåº¦ç›¸å…³çš„æ–¹æ³•ã€‚</h4><p>ï¼ˆ1ï¼‰wait()ï¼šä½¿ä¸€ä¸ªçº¿ç¨‹å¤„äºç­‰å¾…çŠ¶æ€ï¼Œå¹¶ä¸”é‡Šæ”¾æ‰€æŒæœ‰çš„å¯¹è±¡çš„é”ï¼›</p>\n<p>ï¼ˆ2ï¼‰sleep()ï¼šä½¿ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„çº¿ç¨‹å¤„äºç¡çœ çŠ¶æ€ï¼Œæ˜¯ä¸€ä¸ªé™æ€æ–¹æ³•ï¼›</p>\n<p>ï¼ˆ3ï¼‰notify()ï¼šå”¤é†’ä¸€ä¸ªå¤„äºç­‰å¾…çŠ¶æ€çš„çº¿ç¨‹ï¼Œå½“ç„¶åœ¨è°ƒç”¨æ­¤æ–¹æ³•çš„æ—¶å€™ï¼Œå¹¶ä¸èƒ½ç¡®åˆ‡çš„å”¤é†’æŸä¸€ä¸ªç­‰å¾…çŠ¶æ€çš„çº¿ç¨‹ï¼Œè€Œæ˜¯ç”± JVM ç¡®å®šå”¤é†’å“ªä¸ªçº¿ç¨‹ï¼Œè€Œä¸”ä¸ä¼˜å…ˆçº§æ— å…³ï¼›</p>\n<p>ï¼ˆ4ï¼‰notityAll()ï¼šå”¤é†’æ‰€æœ‰å¤„äºç­‰å¾…çŠ¶æ€çš„çº¿ç¨‹ï¼Œè¯¥æ–¹æ³•å¹¶ä¸æ˜¯å°†å¯¹è±¡çš„é”ç»™æ‰€æœ‰çº¿ç¨‹ï¼Œè€Œæ˜¯è®©å®ƒä»¬ç«äº‰ï¼Œåªæœ‰è·å¾—é”çš„çº¿ç¨‹æ‰èƒ½è¿›å…¥å°±ç»ªçŠ¶æ€ï¼›</p>\n<h4 id=\"wait-å’Œ-sleep-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\"><a href=\"#wait-å’Œ-sleep-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\" class=\"headerlink\" title=\"wait() å’Œ sleep() æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\"></a>wait() å’Œ sleep() æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h4><p>ä¸¤è€…éƒ½å¯ä»¥æš‚åœçº¿ç¨‹çš„æ‰§è¡Œ</p>\n<ul>\n<li>ç±»çš„ä¸åŒï¼šwait() æ˜¯ Object ç±»çš„æ–¹æ³•ï¼Œsleep() æ˜¯ Thread çº¿ç¨‹ç±»çš„é™æ€æ–¹æ³•ã€‚</li>\n<li>é‡Šæ”¾é”ï¼šwait() é‡Šæ”¾é”ï¼Œsleep() ä¸é‡Šæ”¾é”ã€‚</li>\n<li>ç”¨é€”ä¸åŒï¼šwait é€šå¸¸è¢«ç”¨äºçº¿ç¨‹é—´äº¤äº’&#x2F;é€šä¿¡ï¼Œsleep é€šå¸¸è¢«ç”¨äºæš‚åœæ‰§è¡Œã€‚</li>\n<li>è‡ªåŠ¨è‹é†’ï¼šwait() æ–¹æ³•è¢«è°ƒç”¨åï¼Œçº¿ç¨‹ä¸ä¼šè‡ªåŠ¨è‹é†’ï¼Œéœ€è¦åˆ«çš„çº¿ç¨‹è°ƒç”¨åŒä¸€ä¸ªå¯¹è±¡ä¸Šçš„ notify() æˆ–è€… notifyAll() æ–¹æ³•ã€‚sleep() æ–¹æ³•æ‰§è¡Œå®Œæˆåï¼Œçº¿ç¨‹ä¼šè‡ªåŠ¨è‹é†’ã€‚æˆ–è€…å¯ä»¥ä½¿ç”¨wait(long timeout)è¶…æ—¶åçº¿ç¨‹ä¼šè‡ªåŠ¨è‹é†’ã€‚</li>\n</ul>\n<h4 id=\"ä½ æ˜¯å¦‚ä½•è°ƒç”¨-wait-æ–¹æ³•çš„ï¼Ÿä½¿ç”¨-if-å—è¿˜æ˜¯å¾ªç¯ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ\"><a href=\"#ä½ æ˜¯å¦‚ä½•è°ƒç”¨-wait-æ–¹æ³•çš„ï¼Ÿä½¿ç”¨-if-å—è¿˜æ˜¯å¾ªç¯ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ\" class=\"headerlink\" title=\"ä½ æ˜¯å¦‚ä½•è°ƒç”¨ wait() æ–¹æ³•çš„ï¼Ÿä½¿ç”¨ if å—è¿˜æ˜¯å¾ªç¯ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ\"></a>ä½ æ˜¯å¦‚ä½•è°ƒç”¨ wait() æ–¹æ³•çš„ï¼Ÿä½¿ç”¨ if å—è¿˜æ˜¯å¾ªç¯ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ</h4><blockquote>\n<p>ä½¿ç”¨ while åˆ¤æ–­æ¡ä»¶æ˜¯å¦å¾—åˆ°æ»¡è¶³</p>\n</blockquote>\n<p>ä½¿ç”¨ if æ¥åˆ¤æ–­ä¼šå­˜åœ¨ä»¥ä¸‹é—®é¢˜ï¼š</p>\n<ol>\n<li><p>å¦ä¸€ä¸ªçº¿ç¨‹å¯èƒ½å·²ç»è¢«å”¤é†’å¹¶æ”¹å˜äº†æ¡ä»¶çŠ¶æ€ã€‚ä¾‹å¦‚ notifyAll ä¼šå”¤é†’å¤šä¸ªç­‰å¾…çš„çº¿ç¨‹ã€‚</p>\n</li>\n<li><p>å­˜åœ¨â€œä¼ªå”¤é†’â€çš„æƒ…å†µï¼Œå³åœ¨æ²¡æœ‰é€šçŸ¥çš„æƒ…å†µä¸‹ï¼Œçº¿ç¨‹ä¹Ÿå¯èƒ½ä¼šè‹é†’è¿‡æ¥ï¼Œè€Œæ­¤æ—¶æ˜¯ä¸åº”è¯¥å”¤é†’çš„ã€‚</p>\n <figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">synchronized</span> (monitor) &#123;</span><br><span class=\"line\">    <span class=\"comment\">//  åˆ¤æ–­æ¡ä»¶è°“è¯æ˜¯å¦å¾—åˆ°æ»¡è¶³</span></span><br><span class=\"line\">    <span class=\"keyword\">while</span>(!locked) &#123;</span><br><span class=\"line\">        <span class=\"comment\">//  ç­‰å¾…å”¤é†’</span></span><br><span class=\"line\">        monitor.wait();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">//  å¤„ç†å…¶ä»–çš„ä¸šåŠ¡é€»è¾‘</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n</ol>\n<h4 id=\"ä¸ºä»€ä¹ˆçº¿ç¨‹é€šä¿¡çš„æ–¹æ³•-wait-ï¼Œnotify-å’Œ-notifyAll-è¢«å®šä¹‰åœ¨-Object-ç±»é‡Œï¼Ÿ\"><a href=\"#ä¸ºä»€ä¹ˆçº¿ç¨‹é€šä¿¡çš„æ–¹æ³•-wait-ï¼Œnotify-å’Œ-notifyAll-è¢«å®šä¹‰åœ¨-Object-ç±»é‡Œï¼Ÿ\" class=\"headerlink\" title=\"ä¸ºä»€ä¹ˆçº¿ç¨‹é€šä¿¡çš„æ–¹æ³• wait()ï¼Œnotify() å’Œ notifyAll() è¢«å®šä¹‰åœ¨ Object ç±»é‡Œï¼Ÿ\"></a>ä¸ºä»€ä¹ˆçº¿ç¨‹é€šä¿¡çš„æ–¹æ³• wait()ï¼Œnotify() å’Œ notifyAll() è¢«å®šä¹‰åœ¨ Object ç±»é‡Œï¼Ÿ</h4><p>Java ä¸­ï¼Œä»»ä½•å¯¹è±¡éƒ½å¯ä»¥ä½œä¸ºé”ï¼Œå¹¶ä¸”çº¿ç¨‹é€šä¿¡çš„æ–¹æ³• wait()ï¼Œnotify() ç­‰æ–¹æ³•ç”¨äºç­‰å¾…å¯¹è±¡çš„é”æˆ–è€…æ˜¯å”¤é†’çº¿ç¨‹ï¼Œé‚£ä¹ˆè¦æ‰¾ä¸€ä¸ªå¯ä¾›ä»»ä½•å¯¹è±¡ä½¿ç”¨çš„é”ï¼Œå› æ­¤å°†è¿™äº›æ–¹æ³•å®šä¹‰åœ¨ Object ä¸­ï¼ŒObject æ˜¯æ‰€æœ‰ç±»çš„çˆ¶ç±»ã€‚</p>\n<h4 id=\"Thread-ç±»ä¸­çš„-yield-æ–¹æ³•æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ\"><a href=\"#Thread-ç±»ä¸­çš„-yield-æ–¹æ³•æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ\" class=\"headerlink\" title=\"Thread ç±»ä¸­çš„ yield æ–¹æ³•æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ\"></a>Thread ç±»ä¸­çš„ yield æ–¹æ³•æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ</h4><p>ä½¿å½“å‰çº¿ç¨‹ä»è¿è¡ŒçŠ¶æ€å˜ä¸ºå°±ç»ªçŠ¶æ€ã€‚</p>\n<h4 id=\"çº¿ç¨‹çš„-sleep-æ–¹æ³•å’Œ-yield-æ–¹æ³•æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\"><a href=\"#çº¿ç¨‹çš„-sleep-æ–¹æ³•å’Œ-yield-æ–¹æ³•æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\" class=\"headerlink\" title=\"çº¿ç¨‹çš„ sleep()æ–¹æ³•å’Œ yield()æ–¹æ³•æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\"></a>çº¿ç¨‹çš„ sleep()æ–¹æ³•å’Œ yield()æ–¹æ³•æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h4><ol>\n<li><p>sleep() æ–¹æ³•ç»™å…¶ä»–çº¿ç¨‹è¿è¡Œæœºä¼šæ—¶ä¸è€ƒè™‘çº¿ç¨‹çš„ä¼˜å…ˆçº§ï¼Œå› æ­¤ä¼šç»™ä½ä¼˜å…ˆçº§çš„çº¿ç¨‹ä»¥è¿è¡Œçš„æœºä¼šï¼›</p>\n<p> yield()æ–¹æ³•åªä¼šç»™<strong>ç›¸åŒæˆ–æ›´é«˜ä¼˜å…ˆçº§</strong>çš„çº¿ç¨‹ä»¥è¿è¡Œçš„æœºä¼šï¼›</p>\n</li>\n<li><p>çº¿ç¨‹æ‰§è¡Œ sleep() æ–¹æ³•åè½¬å…¥ç­‰å¾…ï¼ˆwaitingï¼‰çŠ¶æ€ï¼Œè€Œæ‰§è¡Œ yield() æ–¹æ³•åè½¬å…¥å°±ç»ªï¼ˆreadyï¼‰çŠ¶æ€ï¼›</p>\n</li>\n</ol>\n<h4 id=\"å¦‚ä½•åœæ­¢ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„çº¿ç¨‹ï¼Ÿ\"><a href=\"#å¦‚ä½•åœæ­¢ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„çº¿ç¨‹ï¼Ÿ\" class=\"headerlink\" title=\"å¦‚ä½•åœæ­¢ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„çº¿ç¨‹ï¼Ÿ\"></a>å¦‚ä½•åœæ­¢ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„çº¿ç¨‹ï¼Ÿ</h4><ol>\n<li>å½“ run æ–¹æ³•å®Œæˆåçº¿ç¨‹ç»ˆæ­¢ï¼›</li>\n<li>ä½¿ç”¨ interrupt æ–¹æ³•ä¸­æ–­çº¿ç¨‹ã€‚</li>\n</ol>\n<h4 id=\"notify-å’Œ-notifyAll-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\"><a href=\"#notify-å’Œ-notifyAll-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\" class=\"headerlink\" title=\"notify() å’Œ notifyAll() æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\"></a>notify() å’Œ notifyAll() æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h4><p>å¦‚æœçº¿ç¨‹è°ƒç”¨äº†å¯¹è±¡çš„ wait() æ–¹æ³•ï¼Œé‚£ä¹ˆçº¿ç¨‹ä¾¿ä¼šå¤„äºè¯¥å¯¹è±¡çš„ç­‰å¾…æ± ä¸­ï¼Œç­‰å¾…æ± ä¸­çš„çº¿ç¨‹ä¸ä¼šå»ç«äº‰è¯¥å¯¹è±¡çš„é”ã€‚</p>\n<p>notifyAll() ä¼šå”¤é†’æ‰€æœ‰çš„çº¿ç¨‹ï¼Œnotify() åªä¼šå”¤é†’ä¸€ä¸ªçº¿ç¨‹ã€‚</p>\n<p>notifyAll() è°ƒç”¨åï¼Œä¼šå°†å…¨éƒ¨çº¿ç¨‹ç”±ç­‰å¾…æ± ç§»åˆ°é”æ± ï¼Œç„¶åå‚ä¸é”çš„ç«äº‰ï¼Œç«äº‰æˆåŠŸåˆ™ç»§ç»­æ‰§è¡Œï¼Œå¦‚æœä¸æˆåŠŸåˆ™ç•™åœ¨é”æ± ç­‰å¾…é”è¢«é‡Šæ”¾åå†æ¬¡å‚ä¸ç«äº‰ã€‚è€Œ notify()åªä¼šå”¤é†’ä¸€ä¸ªçº¿ç¨‹ï¼Œå…·ä½“å”¤é†’å“ªä¸€ä¸ªçº¿ç¨‹ç”±è™šæ‹Ÿæœºæ§åˆ¶ã€‚</p>\n<h4 id=\"å¦‚ä½•åœ¨ä¸¤ä¸ªçº¿ç¨‹é—´å…±äº«æ•°æ®ï¼Ÿ\"><a href=\"#å¦‚ä½•åœ¨ä¸¤ä¸ªçº¿ç¨‹é—´å…±äº«æ•°æ®ï¼Ÿ\" class=\"headerlink\" title=\"å¦‚ä½•åœ¨ä¸¤ä¸ªçº¿ç¨‹é—´å…±äº«æ•°æ®ï¼Ÿ\"></a>å¦‚ä½•åœ¨ä¸¤ä¸ªçº¿ç¨‹é—´å…±äº«æ•°æ®ï¼Ÿ</h4><p>Java çº¿ç¨‹ä¹‹é—´çš„é€šä¿¡ç”± Java å†…å­˜æ¨¡å‹ï¼ˆç®€ç§°JMMï¼‰æ§åˆ¶ï¼š</p>\n<ol>\n<li>æ‰€æœ‰çš„å…±äº«å˜é‡éƒ½å­˜åœ¨ä¸»å†…å­˜ä¸­</li>\n<li>æ¯ä¸ªçº¿ç¨‹éƒ½ä¿å­˜äº†ä¸€ä»½è¯¥çº¿ç¨‹ä½¿ç”¨åˆ°çš„å…±äº«å˜é‡çš„å‰¯æœ¬</li>\n<li>å¦‚æœçº¿ç¨‹Aä¸çº¿ç¨‹Bä¹‹é—´è¦é€šä¿¡ï¼š<ol>\n<li>çº¿ç¨‹Aå°†æœ¬åœ°å†…å­˜Aä¸­æ›´æ–°è¿‡çš„å…±äº«å˜é‡åˆ·æ–°åˆ°ä¸»å†…å­˜ä¸­å»</li>\n<li>çº¿ç¨‹Båˆ°ä¸»å†…å­˜ä¸­å»è¯»å–çº¿ç¨‹Aä¹‹å‰å·²ç»æ›´æ–°è¿‡çš„å…±äº«å˜é‡ã€‚</li>\n</ol>\n</li>\n</ol>\n<h4 id=\"Java-å¦‚ä½•å®ç°å¤šçº¿ç¨‹ä¹‹é—´çš„é€šè®¯å’Œåä½œï¼Ÿ\"><a href=\"#Java-å¦‚ä½•å®ç°å¤šçº¿ç¨‹ä¹‹é—´çš„é€šè®¯å’Œåä½œï¼Ÿ\" class=\"headerlink\" title=\"Java å¦‚ä½•å®ç°å¤šçº¿ç¨‹ä¹‹é—´çš„é€šè®¯å’Œåä½œï¼Ÿ\"></a>Java å¦‚ä½•å®ç°å¤šçº¿ç¨‹ä¹‹é—´çš„é€šè®¯å’Œåä½œï¼Ÿ</h4><p>Javaä¸­çº¿ç¨‹é€šä¿¡åä½œçš„æœ€å¸¸è§çš„ä¸¤ç§æ–¹å¼ï¼š</p>\n<ol>\n<li><p>synchronized åŠ é”çš„çº¿ç¨‹ + Object ç±»çš„ wait()&#x2F;notify()&#x2F;notifyAll()</p>\n</li>\n<li><p>ReentrantLock ç±»åŠ é”çš„çº¿ç¨‹ + Condition ç±»çš„ await()&#x2F;signal()&#x2F;signalAll()</p>\n</li>\n</ol>\n<h4 id=\"åŒæ­¥æ–¹æ³•å’ŒåŒæ­¥å—ï¼Œå“ªä¸ªæ˜¯æ›´å¥½çš„é€‰æ‹©ï¼Ÿ\"><a href=\"#åŒæ­¥æ–¹æ³•å’ŒåŒæ­¥å—ï¼Œå“ªä¸ªæ˜¯æ›´å¥½çš„é€‰æ‹©ï¼Ÿ\" class=\"headerlink\" title=\"åŒæ­¥æ–¹æ³•å’ŒåŒæ­¥å—ï¼Œå“ªä¸ªæ˜¯æ›´å¥½çš„é€‰æ‹©ï¼Ÿ\"></a>åŒæ­¥æ–¹æ³•å’ŒåŒæ­¥å—ï¼Œå“ªä¸ªæ˜¯æ›´å¥½çš„é€‰æ‹©ï¼Ÿ</h4><p>åŒæ­¥çš„èŒƒå›´è¶Šå°è¶Šå¥½ã€‚</p>\n<p>å› æ­¤ï¼ŒåŒæ­¥å—æ˜¯æ›´å¥½çš„é€‰æ‹©ï¼Œå› ä¸ºå®ƒä¸ä¼šé”ä½æ•´ä¸ªå¯¹è±¡ï¼Œè€ŒåŒæ­¥æ–¹æ³•ä¼šé”ä½æ•´ä¸ªå¯¹è±¡ã€‚</p>\n<h4 id=\"ä»€ä¹ˆæ˜¯çº¿ç¨‹åŒæ­¥å’Œçº¿ç¨‹äº’æ–¥ï¼Œæœ‰å“ªå‡ ç§å®ç°æ–¹å¼ï¼Ÿ\"><a href=\"#ä»€ä¹ˆæ˜¯çº¿ç¨‹åŒæ­¥å’Œçº¿ç¨‹äº’æ–¥ï¼Œæœ‰å“ªå‡ ç§å®ç°æ–¹å¼ï¼Ÿ\" class=\"headerlink\" title=\"ä»€ä¹ˆæ˜¯çº¿ç¨‹åŒæ­¥å’Œçº¿ç¨‹äº’æ–¥ï¼Œæœ‰å“ªå‡ ç§å®ç°æ–¹å¼ï¼Ÿ\"></a>ä»€ä¹ˆæ˜¯çº¿ç¨‹åŒæ­¥å’Œçº¿ç¨‹äº’æ–¥ï¼Œæœ‰å“ªå‡ ç§å®ç°æ–¹å¼ï¼Ÿ</h4><p>çº¿ç¨‹åŒæ­¥æ˜¯ä¸¤ä¸ªæˆ–å¤šä¸ªå…±äº«å…³é”®èµ„æºçš„çº¿ç¨‹çš„å¹¶å‘æ‰§è¡Œã€‚åº”è¯¥åŒæ­¥çº¿ç¨‹ä»¥é¿å…å…³é”®çš„èµ„æºä½¿ç”¨å†²çªã€‚</p>\n<p>çº¿ç¨‹äº’æ–¥æ˜¯å¯¹æŸä¸€å…±äº«èµ„æºè€Œè¨€ï¼Œä»»ä½•æ—¶åˆ»æœ€å¤šåªå…è®¸ä¸€ä¸ªçº¿ç¨‹å»ä½¿ç”¨ï¼Œå…¶å®ƒè¦ä½¿ç”¨è¯¥èµ„æºçš„çº¿ç¨‹å¿…é¡»ç­‰å¾…ï¼Œç›´åˆ°å ç”¨èµ„æºè€…é‡Šæ”¾è¯¥èµ„æºã€‚</p>\n<p>å®ç°çº¿ç¨‹åŒæ­¥çš„æ–¹æ³•</p>\n<ul>\n<li>åŒæ­¥ä»£ç æ–¹æ³• &#x2F; æ–¹æ³•å—ï¼šsychronized å…³é”®å­—ä¿®é¥°çš„æ–¹æ³• &#x2F; ä»£ç å—</li>\n<li>ä½¿ç”¨ç‰¹æ®Šå˜é‡åŸŸ volatile å®ç°çº¿ç¨‹åŒæ­¥ï¼švolatileå…³é”®å­—ä¸ºåŸŸå˜é‡çš„è®¿é—®æä¾›äº†ä¸€ç§å…é”æœºåˆ¶</li>\n<li>ä½¿ç”¨é‡å…¥é”å®ç°çº¿ç¨‹åŒæ­¥ï¼šreentrantlock ç±»æ˜¯å¯é‡å…¥ã€äº’æ–¥ã€å®ç°äº† lock æ¥å£çš„é”ï¼Œä¸ sychronized æ–¹æ³•å…·æœ‰ç›¸åŒçš„åŸºæœ¬è¡Œä¸ºå’Œè¯­ä¹‰</li>\n</ul>\n<h4 id=\"åœ¨ç›‘è§†å™¨-Monitor-å†…éƒ¨ï¼Œæ˜¯å¦‚ä½•åšçº¿ç¨‹åŒæ­¥çš„ï¼Ÿ\"><a href=\"#åœ¨ç›‘è§†å™¨-Monitor-å†…éƒ¨ï¼Œæ˜¯å¦‚ä½•åšçº¿ç¨‹åŒæ­¥çš„ï¼Ÿ\" class=\"headerlink\" title=\"åœ¨ç›‘è§†å™¨(Monitor)å†…éƒ¨ï¼Œæ˜¯å¦‚ä½•åšçº¿ç¨‹åŒæ­¥çš„ï¼Ÿ\"></a>åœ¨ç›‘è§†å™¨(Monitor)å†…éƒ¨ï¼Œæ˜¯å¦‚ä½•åšçº¿ç¨‹åŒæ­¥çš„ï¼Ÿ</h4><p>åœ¨ Java è™šæ‹Ÿæœºä¸­ï¼Œæ¯ä¸ªå¯¹è±¡å…³è”ä¸€ä¸ª<strong>ç›‘è§†å™¨</strong>ï¼Œä¸ºäº†å®ç°ç›‘è§†å™¨çš„äº’æ–¥åŠŸèƒ½ï¼Œ<strong>æ¯ä¸ªå¯¹è±¡éƒ½å…³è”ç€ä¸€æŠŠé”</strong>ã€‚</p>\n<p>ä¸€æ—¦æ–¹æ³•æˆ–è€…ä»£ç å—è¢« <strong>synchronized</strong> ä¿®é¥°ï¼Œé‚£ä¹ˆè¿™ä¸ªéƒ¨åˆ†å°±æ”¾å…¥äº†ç›‘è§†å™¨çš„ç›‘è§†åŒºåŸŸï¼Œ<strong>ç¡®ä¿ä¸€æ¬¡åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œè¯¥éƒ¨åˆ†çš„ä»£ç </strong>ï¼Œçº¿ç¨‹åœ¨è·å–é”ä¹‹å‰ä¸å…è®¸æ‰§è¡Œè¯¥éƒ¨åˆ†çš„ä»£ç </p>\n<p>å¦å¤– Java è¿˜æä¾›äº†æ˜¾å¼ç›‘è§†å™¨( Lock )å’Œéšå¼ç›‘è§†å™¨( synchronized )ä¸¤ç§é”æ–¹æ¡ˆ</p>\n<h4 id=\"Java-çº¿ç¨‹æ•°è¿‡å¤šä¼šé€ æˆä»€ä¹ˆé—®é¢˜ï¼Ÿ\"><a href=\"#Java-çº¿ç¨‹æ•°è¿‡å¤šä¼šé€ æˆä»€ä¹ˆé—®é¢˜ï¼Ÿ\" class=\"headerlink\" title=\"Java çº¿ç¨‹æ•°è¿‡å¤šä¼šé€ æˆä»€ä¹ˆé—®é¢˜ï¼Ÿ\"></a>Java çº¿ç¨‹æ•°è¿‡å¤šä¼šé€ æˆä»€ä¹ˆé—®é¢˜ï¼Ÿ</h4><ul>\n<li><p>æ¶ˆè€—è¿‡å¤šçš„ CPU èµ„æº</p>\n<p>  å¦‚æœå¯è¿è¡Œçš„çº¿ç¨‹æ•°é‡å¤šäºå¯ç”¨å¤„ç†å™¨çš„æ•°é‡ï¼Œé‚£ä¹ˆæœ‰çº¿ç¨‹å°†ä¼šè¢«é—²ç½®ã€‚å¤§é‡ç©ºé—²çš„çº¿ç¨‹ä¼šå ç”¨è®¸å¤šå†…å­˜ï¼Œç»™åƒåœ¾å›æ”¶å™¨å¸¦æ¥å‹åŠ›ã€‚</p>\n</li>\n<li><p>é™ä½ JVM ç¨³å®šæ€§</p>\n<p>  åœ¨å¯åˆ›å»ºçº¿ç¨‹çš„æ•°é‡ä¸Šå­˜åœ¨ä¸€ä¸ªé™åˆ¶ï¼Œè¿™ä¸ªé™åˆ¶å€¼å°†éšç€å¹³å°çš„ä¸åŒè€Œä¸åŒï¼Œå¹¶ä¸”æ‰¿å—ç€å¤šä¸ªå› ç´ åˆ¶çº¦ï¼ŒåŒ…æ‹¬ JVM çš„å¯åŠ¨å‚æ•°ã€Thread æ„é€ å‡½æ•°ä¸­è¯·æ±‚æ ˆçš„å¤§å°ï¼Œä»¥åŠåº•å±‚æ“ä½œç³»ç»Ÿå¯¹çº¿ç¨‹çš„é™åˆ¶ç­‰ã€‚å¦‚æœç ´åäº†è¿™äº›é™åˆ¶ï¼Œé‚£ä¹ˆå¯èƒ½æŠ›å‡º OutOfMemoryError å¼‚å¸¸ã€‚</p>\n</li>\n</ul>\n<h2 id=\"å¹¶å‘å…³é”®å­—\"><a href=\"#å¹¶å‘å…³é”®å­—\" class=\"headerlink\" title=\"å¹¶å‘å…³é”®å­—\"></a>å¹¶å‘å…³é”®å­—</h2><h3 id=\"synchronized\"><a href=\"#synchronized\" class=\"headerlink\" title=\"synchronized\"></a>synchronized</h3><h4 id=\"synchronized-çš„ä½œç”¨ï¼Ÿ\"><a href=\"#synchronized-çš„ä½œç”¨ï¼Ÿ\" class=\"headerlink\" title=\"synchronized çš„ä½œç”¨ï¼Ÿ\"></a>synchronized çš„ä½œç”¨ï¼Ÿ</h4><p>åœ¨ Java ä¸­ï¼Œsynchronized å…³é”®å­—æ˜¯ç”¨æ¥æ§åˆ¶çº¿ç¨‹åŒæ­¥çš„ï¼Œå°±æ˜¯åœ¨å¤šçº¿ç¨‹çš„ç¯å¢ƒä¸‹ï¼Œæ§åˆ¶ synchronized ä»£ç æ®µä¸è¢«å¤šä¸ªçº¿ç¨‹åŒæ—¶æ‰§è¡Œã€‚synchronized å¯ä»¥ä¿®é¥°é™æ€æ–¹æ³•ã€å®ä¾‹æ–¹æ³•ã€ä»£ç å—ã€‚</p>\n<h4 id=\"æ€ä¹ˆä½¿ç”¨-synchronized-å…³é”®å­—\"><a href=\"#æ€ä¹ˆä½¿ç”¨-synchronized-å…³é”®å­—\" class=\"headerlink\" title=\"æ€ä¹ˆä½¿ç”¨ synchronized å…³é”®å­—\"></a>æ€ä¹ˆä½¿ç”¨ synchronized å…³é”®å­—</h4><p><strong>synchronizedå…³é”®å­—æœ€ä¸»è¦çš„ä¸‰ç§ä½¿ç”¨æ–¹å¼ï¼š</strong></p>\n<ul>\n<li><strong>ä¿®é¥°å®ä¾‹æ–¹æ³•ï¼š</strong> ç»™å½“å‰å¯¹è±¡å®ä¾‹åŠ é”ï¼›</li>\n<li><strong>ä¿®é¥°é™æ€æ–¹æ³•ï¼š</strong> ç»™å½“å‰ç±»åŠ é”ï¼›</li>\n<li><strong>ä¿®é¥°ä»£ç å—ï¼š</strong>ç»™æŒ‡å®šå¯¹è±¡åŠ é”ï¼Œè¿›å…¥åŒæ­¥ä»£ç å—å‰è¦è·å¾—æŒ‡å®šå¯¹è±¡çš„é”ã€‚</li>\n</ul>\n<p><strong>æ€»ç»“ï¼š</strong> synchronized å…³é”®å­—åŠ åˆ° static é™æ€æ–¹æ³•å’Œ synchronized(xxx.class) ä»£ç å—ä¸Šéƒ½æ˜¯æ˜¯ç»™ Class ç±»ä¸Šé”ã€‚synchronized å…³é”®å­—åŠ åˆ°å®ä¾‹æ–¹æ³•ä¸Šæ˜¯ç»™å¯¹è±¡å®ä¾‹ä¸Šé”ã€‚</p>\n<h4 id=\"åŒé‡æ ¡éªŒé”å®ç°å¯¹è±¡å•ä¾‹ï¼ˆçº¿ç¨‹å®‰å…¨ï¼‰\"><a href=\"#åŒé‡æ ¡éªŒé”å®ç°å¯¹è±¡å•ä¾‹ï¼ˆçº¿ç¨‹å®‰å…¨ï¼‰\" class=\"headerlink\" title=\"åŒé‡æ ¡éªŒé”å®ç°å¯¹è±¡å•ä¾‹ï¼ˆçº¿ç¨‹å®‰å…¨ï¼‰\"></a>åŒé‡æ ¡éªŒé”å®ç°å¯¹è±¡å•ä¾‹ï¼ˆçº¿ç¨‹å®‰å…¨ï¼‰</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">Singleton</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">volatile</span> <span class=\"keyword\">static</span> Singleton uniqueInstance;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"title function_\">Singleton</span><span class=\"params\">()</span> &#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> Singleton <span class=\"title function_\">getInstance</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// ç¬¬ä¸€æ¬¡å‡å¦‚çº¿ç¨‹1ï¼Œçº¿ç¨‹2ï¼Œçº¿ç¨‹3åˆ°è¾¾è¿™ï¼Œéƒ½åˆ¤æ–­åˆ°nullæœªå®ä¾‹åŒ–ï¼ŒåŠ è¿™ä¸ªåˆ¤æ–­æ˜¯ä¸ºäº†è®©é™¤äº†ç¬¬ä¸€æ¬¡å®ä¾‹åŒ–ä¹‹åçš„å…¶ä»–çº¿ç¨‹åˆ¤æ–­åˆ°éç©ºè¡¨æ˜å·²ç»å®ä¾‹åŒ–è¿‡äº†ï¼Œç›´æ¥è¿”å›å•ä¾‹</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (uniqueInstance == <span class=\"literal\">null</span>) &#123;\t<span class=\"comment\">// çº¿ç¨‹1ã€2ã€3æœ‰å¯èƒ½éƒ½è¿›æ¥äº†</span></span><br><span class=\"line\">            <span class=\"comment\">//ç±»å¯¹è±¡åŠ é”</span></span><br><span class=\"line\">            <span class=\"keyword\">synchronized</span> (Singleton.class) &#123;\t<span class=\"comment\">// å¦‚æœå¤šä¸ªçº¿ç¨‹éƒ½åˆ¤æ–­åˆ°æœªå®ä¾‹åŒ–ï¼Œé‚£ä¹ˆåªä¼šæœ‰ä¸€ä¸ªçº¿ç¨‹é”ä½ç±»å¹¶è¿›è¡Œå®ä¾‹åŒ–</span></span><br><span class=\"line\">                <span class=\"keyword\">if</span> (uniqueInstance == <span class=\"literal\">null</span>) &#123;\t<span class=\"comment\">// å¦‚æœä¸åŠ è¿™ä¸ªåˆ¤æ–­ï¼Œçº¿ç¨‹1æ‹¿åˆ°é”è¿›è¡Œå®ä¾‹åŒ–ä¹‹åï¼Œçº¿ç¨‹2æ‹¿åˆ°é”ï¼Œè¿›æ¥ç›´æ¥è¿›è¡Œå®ä¾‹åŒ–ï¼Œè¿™å°±äº§ç”Ÿå¤šæ¬¡å®ä¾‹åŒ–æ“ä½œã€‚å¦‚æœåŠ è¿™ä¸ªåˆ¤æ–­ï¼Œçº¿ç¨‹2æ‹¿åˆ°é”ä¹‹åï¼Œåˆ¤æ–­åˆ°å·²ç»å®ä¾‹åŒ–äº†ï¼Œå°±ä¸ä¼šå†è¿›è¡Œå®ä¾‹åŒ–äº†ã€‚</span></span><br><span class=\"line\">                    uniqueInstance = <span class=\"keyword\">new</span> <span class=\"title class_\">Singleton</span>();</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> uniqueInstance;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>å¦å¤–ï¼Œéœ€è¦æ³¨æ„ instanceé‡‡ç”¨ volatile å…³é”®å­—ä¿®é¥°ä¹Ÿæ˜¯å¾ˆæœ‰å¿…è¦ã€‚</p>\n<p>instance é‡‡ç”¨ volatile å…³é”®å­—ä¿®é¥°ä¹Ÿæ˜¯å¾ˆæœ‰å¿…è¦çš„ï¼Œinstance &#x3D; new Singleton() è¿™æ®µä»£ç å…¶å®æ˜¯åˆ†ä¸ºä¸‰æ­¥æ‰§è¡Œï¼š</p>\n<ol>\n<li>ä¸º instance åˆ†é…å†…å­˜ç©ºé—´</li>\n<li>åˆå§‹åŒ– instance</li>\n<li>å°† instance æŒ‡å‘åˆ†é…çš„å†…å­˜åœ°å€</li>\n</ol>\n<p>ä½†æ˜¯ç”±äº JVM å…·æœ‰æŒ‡ä»¤é‡æ’çš„ç‰¹æ€§ï¼Œæ‰§è¡Œé¡ºåºæœ‰å¯èƒ½å˜æˆ 1-&gt;3-&gt;2ã€‚æŒ‡ä»¤é‡æ’åœ¨å•çº¿ç¨‹ç¯å¢ƒä¸‹ä¸ä¼šå‡ºç°é—®é¢˜ï¼Œä½†æ˜¯åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ä¼šå¯¼è‡´ä¸€ä¸ªçº¿ç¨‹è·å¾—è¿˜æ²¡æœ‰åˆå§‹åŒ–çš„å®ä¾‹ã€‚ä¾‹å¦‚ï¼Œçº¿ç¨‹ T1 æ‰§è¡Œäº† 1 å’Œ 3ï¼Œæ­¤æ—¶ T2 è°ƒç”¨ getInstance() åå‘ç° instanceä¸ä¸ºç©ºï¼Œå› æ­¤<strong>è¿”å› T1 å®ä¾‹åŒ–ä½†æœªåˆå§‹åŒ–</strong>çš„ instanceã€‚</p>\n<h4 id=\"synchronized-åº•å±‚å®ç°åŸç†ï¼Ÿï¼ˆç›‘è§†å™¨monitorï¼‰\"><a href=\"#synchronized-åº•å±‚å®ç°åŸç†ï¼Ÿï¼ˆç›‘è§†å™¨monitorï¼‰\" class=\"headerlink\" title=\"synchronized åº•å±‚å®ç°åŸç†ï¼Ÿï¼ˆç›‘è§†å™¨monitorï¼‰\"></a>synchronized åº•å±‚å®ç°åŸç†ï¼Ÿï¼ˆç›‘è§†å™¨monitorï¼‰</h4><p>synchronized æ˜¯ Java ä¸­çš„ä¸€ä¸ªå…³é”®å­—ï¼Œé€šè¿‡ javap å‘½ä»¤ï¼ŒæŸ¥çœ‹ç›¸åº”çš„å­—èŠ‚ç æ–‡ä»¶ã€‚</p>\n<p>synchronized åŒæ­¥è¯­å¥å—çš„æƒ…å†µ</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">SynchronizedDemo</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">method</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">synchronized</span> (<span class=\"built_in\">this</span>) &#123;</span><br><span class=\"line\">            System.out.println(<span class=\"string\">&quot;synchronized ä»£ç å—&quot;</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>é€šè¿‡JDK åæ±‡ç¼–æŒ‡ä»¤ javap -c -v SynchronizedDemo</p>\n<img src=\"https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/image-20220912212554623.png\" alt=\"monitorenter&monitorexit\" style=\"zoom:50%;\" />\n\n<p>å¯ä»¥çœ‹å‡ºåœ¨æ‰§è¡ŒåŒæ­¥ä»£ç å—ä¹‹å‰ä¹‹åéƒ½æœ‰ä¸€ä¸ª monitor å­—æ ·ï¼Œå…¶ä¸­å‰é¢çš„æ˜¯ monitorenterï¼Œåé¢çš„æ˜¯ç¦»å¼€monitorexitï¼Œä¸éš¾æƒ³è±¡ä¸€ä¸ªçº¿ç¨‹æ‰§è¡ŒåŒæ­¥ä»£ç å—ï¼Œé¦–å…ˆè¦è·å–é”ï¼Œè€Œè·å–é”çš„è¿‡ç¨‹å°±æ˜¯ monitorenter ï¼Œåœ¨æ‰§è¡Œå®Œä»£ç å—ä¹‹åï¼Œè¦é‡Šæ”¾é”ï¼Œé‡Šæ”¾é”å°±æ˜¯æ‰§è¡Œ monitorexit æŒ‡ä»¤ã€‚</p>\n<p>ä¸ºä»€ä¹ˆä¼šæœ‰ä¸¤ä¸ªmonitorexitå‘¢ï¼Ÿï¼ˆline 19ï¼‰</p>\n<p>è¿™ä¸ªä¸»è¦æ˜¯é˜²æ­¢åœ¨åŒæ­¥ä»£ç å—ä¸­çº¿ç¨‹å› å¼‚å¸¸é€€å‡ºï¼Œè€Œé”æ²¡æœ‰å¾—åˆ°é‡Šæ”¾ï¼Œè¿™å¿…ç„¶ä¼šé€ æˆæ­»é”ï¼ˆç­‰å¾…çš„çº¿ç¨‹æ°¸è¿œè·å–ä¸åˆ°é”ï¼‰ã€‚<strong>å› æ­¤æœ€åä¸€ä¸ªmonitorexitæ˜¯ä¿è¯åœ¨å¼‚å¸¸æƒ…å†µä¸‹ï¼Œé”ä¹Ÿå¯ä»¥å¾—åˆ°é‡Šæ”¾ï¼Œé¿å…æ­»é”ã€‚</strong></p>\n<h4 id=\"synchronized-å¯é‡å…¥çš„åŸç†\"><a href=\"#synchronized-å¯é‡å…¥çš„åŸç†\" class=\"headerlink\" title=\"synchronized å¯é‡å…¥çš„åŸç†\"></a>synchronized å¯é‡å…¥çš„åŸç†</h4><p>é‡å…¥é”æ˜¯æŒ‡ä¸€ä¸ªçº¿ç¨‹è·å–åˆ°è¯¥é”ä¹‹åï¼Œè¯¥çº¿ç¨‹å¯ä»¥ç»§ç»­è·å¾—è¯¥é”ã€‚<br>åº•å±‚åŸç†ç»´æŠ¤ä¸€ä¸ª<strong>è®¡æ•°å™¨</strong>ï¼Œå½“çº¿ç¨‹è·å–è¯¥é”æ—¶ï¼Œè®¡æ•°å™¨åŠ ä¸€ï¼Œå†æ¬¡è·å¾—è¯¥é”æ—¶ç»§ç»­åŠ ä¸€ï¼Œé‡Šæ”¾é”æ—¶ï¼Œè®¡æ•°å™¨å‡ä¸€ï¼Œå½“è®¡æ•°å™¨å€¼ä¸º0æ—¶ï¼Œè¡¨æ˜è¯¥é”æœªè¢«ä»»ä½•çº¿ç¨‹æ‰€æŒæœ‰ï¼Œå…¶å®ƒçº¿ç¨‹å¯ä»¥ç«äº‰è·å–é”ã€‚</p>\n<h4 id=\"ä»€ä¹ˆæ˜¯è‡ªæ—‹\"><a href=\"#ä»€ä¹ˆæ˜¯è‡ªæ—‹\" class=\"headerlink\" title=\"ä»€ä¹ˆæ˜¯è‡ªæ—‹\"></a>ä»€ä¹ˆæ˜¯è‡ªæ—‹</h4><blockquote>\n<p>ä¸è¦é‡åˆ° synchronized å°±è®©ç­‰å¾…é”çš„çº¿ç¨‹è¿›å…¥é˜»å¡çŠ¶æ€ï¼Œè€Œæ˜¯è®©è¿™ä¸ªçº¿ç¨‹åœ¨ synchronized è¾¹ç•Œåšå¿™å¾ªç¯</p>\n</blockquote>\n<p>å¾ˆå¤š synchronized é‡Œé¢çš„ä»£ç åªæ˜¯ä¸€äº›å¾ˆç®€å•çš„ä»£ç ï¼Œæ‰§è¡Œæ—¶é—´éå¸¸å¿«ï¼Œæ—¢ç„¶ synchronized é‡Œé¢çš„ä»£ç æ‰§è¡Œå¾—éå¸¸å¿«ï¼Œä¸å¦¨è®©ç­‰å¾…é”çš„çº¿ç¨‹ä¸è¦è¢«é˜»å¡ï¼Œå› ä¸º<strong>çº¿ç¨‹é˜»å¡æ¶‰åŠåˆ°ç”¨æˆ·æ€å’Œå†…æ ¸æ€åˆ‡æ¢çš„é—®é¢˜å¼€é”€å¾ˆå¤§</strong>ï¼Œè€Œæ˜¯<strong>åœ¨ synchronized çš„è¾¹ç•Œåšå¿™å¾ªç¯</strong>ï¼Œè¿™å°±æ˜¯è‡ªæ—‹ã€‚å¦‚æœåšäº†å¤šæ¬¡å¾ªç¯å‘ç°è¿˜æ²¡æœ‰è·å¾—é”ï¼Œå†é˜»å¡ï¼Œè¿™æ ·å¯èƒ½æ˜¯ä¸€ç§æ›´å¥½çš„ç­–ç•¥ã€‚</p>\n<h4 id=\"å¤šçº¿ç¨‹ä¸­-synchronized-é”å‡çº§çš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ\"><a href=\"#å¤šçº¿ç¨‹ä¸­-synchronized-é”å‡çº§çš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ\" class=\"headerlink\" title=\"å¤šçº¿ç¨‹ä¸­ synchronized é”å‡çº§çš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ\"></a>å¤šçº¿ç¨‹ä¸­ synchronized é”å‡çº§çš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ</h4><blockquote>\n<p>ç›®çš„ï¼šé”å‡çº§æ˜¯ä¸ºäº†å‡ä½äº†é”å¸¦æ¥çš„æ€§èƒ½æ¶ˆè€—ã€‚</p>\n</blockquote>\n<p>Java çš„é”éƒ½æ˜¯åŸºäºå¯¹è±¡çš„ï¼ŒJava å¯¹è±¡æœ‰å¯¹è±¡å¤´ï¼Œå†…å®¹åŒ…æ‹¬ï¼š</p>\n<ol>\n<li>Mark Wordï¼Œå­˜å‚¨å¯¹è±¡çš„ hashCodeã€é”ä¿¡æ¯ç­‰ï¼›</li>\n<li>Class Metadata Addressï¼Œå­˜å‚¨åˆ°å¯¹è±¡ç±»å‹æ•°æ®çš„æŒ‡é’ˆï¼›</li>\n<li>æ•°ç»„çš„é•¿åº¦ï¼ˆå¦‚æœæ˜¯æ•°ç»„ï¼‰</li>\n</ol>\n<p>æ¯ä¸€ä¸ªçº¿ç¨‹åœ¨å‡†å¤‡è·å–å…±äº«èµ„æºæ—¶ï¼š </p>\n<p>ç¬¬ä¸€æ­¥ï¼Œæ£€æŸ¥é”çš„ MarkWord é‡Œé¢æ˜¯ä¸æ˜¯æ”¾çš„è‡ªå·±çš„ ThreadIdï¼Œå¦‚æœæ˜¯ï¼Œè¡¨ç¤ºå½“å‰çº¿ç¨‹æ˜¯å¤„äº â€œ<strong>åå‘é”</strong>â€ ï¼›</p>\n<p>ç¬¬äºŒæ­¥ï¼Œå¦‚æœé”çš„ MarkWord å­˜æ”¾çš„ä¸æ˜¯è‡ªå·±çš„ ThreadIdï¼Œè¿™ä¸ªæ—¶å€™ä¼šå°è¯•ä½¿ç”¨ CAS æ¥æ›¿æ¢ Mark Word é‡Œé¢çš„çº¿ç¨‹ ID ä¸ºæ–°çº¿ç¨‹çš„ IDï¼Œè¿™ä¸ªæ—¶å€™è¦åˆ†ä¸¤ç§æƒ…å†µï¼š</p>\n<ul>\n<li>CAS æ›¿æ¢æˆåŠŸï¼Œè¡¨ç¤ºä¹‹å‰çš„çº¿ç¨‹ä¸å­˜åœ¨äº†ï¼Œ Mark Word é‡Œé¢çš„çº¿ç¨‹ ID ä¸ºæ–°çº¿ç¨‹çš„ IDï¼Œé”ä¸ä¼šå‡çº§ï¼Œä»ç„¶ä¸ºåå‘é”ï¼›</li>\n<li>CAS æ›¿æ¢å¤±è´¥ï¼Œè¡¨ç¤ºä¹‹å‰çš„çº¿ç¨‹ä»ç„¶å­˜åœ¨ï¼Œæ ¹æ®é”çš„ MarkWord é‡Œé¢çš„ ThreadIdï¼Œé€šçŸ¥è¯¥ ThreadId çš„çº¿ç¨‹æš‚åœï¼Œä¹‹å‰çº¿ç¨‹å°† Markword çš„å†…å®¹ç½®ä¸ºç©ºï¼Œå‡çº§ä¸ºè½»é‡çº§é”ï¼Œä¼šæŒ‰ç…§è½»é‡çº§é”çš„æ–¹å¼è¿›è¡Œç«äº‰é”ã€‚</li>\n</ul>\n<p>ç¬¬ä¸‰æ­¥ï¼Œä¸¤ä¸ªçº¿ç¨‹éƒ½æŠŠé”å¯¹è±¡çš„ hashCode å¤åˆ¶åˆ°è‡ªå·±æ–°å»ºçš„ç”¨äºå­˜å‚¨é”çš„è®°å½•ç©ºé—´ï¼Œæ¥ç€å¼€å§‹é€šè¿‡ CAS æ“ä½œï¼Œ æŠŠé”å¯¹è±¡çš„ MarkWord çš„å†…å®¹ä¿®æ”¹ä¸ºè‡ªå·±æ–°å»ºçš„è®°å½•ç©ºé—´çš„åœ°å€çš„æ–¹å¼ç«äº‰ MarkWordï¼›</p>\n<p>ç¬¬å››æ­¥ï¼Œç¬¬ä¸‰æ­¥ä¸­æˆåŠŸæ‰§è¡Œ CAS çš„è·å¾—èµ„æºï¼Œå¤±è´¥çš„åˆ™è¿›å…¥è‡ªæ—‹ ï¼›</p>\n<p>ç¬¬äº”æ­¥ï¼Œè‡ªæ—‹çš„çº¿ç¨‹åœ¨è‡ªæ—‹è¿‡ç¨‹ä¸­ï¼Œå¦‚æœæˆåŠŸè·å¾—èµ„æºï¼ˆå³ä¹‹å‰è·çš„èµ„æºçš„çº¿ç¨‹æ‰§è¡Œå®Œæˆå¹¶é‡Šæ”¾äº†å…±äº«èµ„æºï¼‰ï¼Œåˆ™æ•´ä¸ªçŠ¶æ€ä¾ç„¶å¤„äº <strong>è½»é‡çº§é”</strong>çš„çŠ¶æ€ï¼›å¦‚æœè‡ªæ—‹å¤±è´¥ ï¼ˆè¿™è¾¹çš„è‡ªæ—‹æ–¹å¼å¯ä»¥é‡‡ç”¨é€‚åº”æ€§è‡ªæ—‹ï¼Œç®€å•æ¥è¯´å°±æ˜¯çº¿ç¨‹å¦‚æœè‡ªæ—‹æˆåŠŸäº†ï¼Œåˆ™ä¸‹æ¬¡è‡ªæ—‹çš„æ¬¡æ•°ä¼šæ›´å¤šï¼Œå¦‚æœè‡ªæ—‹å¤±è´¥äº†ï¼Œåˆ™è‡ªæ—‹çš„æ¬¡æ•°å°±ä¼šå‡å°‘ï¼‰ï¼›</p>\n<p>ç¬¬å…­æ­¥ï¼Œè¿›å…¥<strong>é‡é‡çº§é”</strong>çš„çŠ¶æ€ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œè‡ªæ—‹çš„çº¿ç¨‹è¿›å…¥é˜»å¡ï¼Œç­‰å¾…ç«äº‰çº¿ç¨‹æ‰§è¡Œå®Œæˆå¹¶å”¤é†’è‡ªå·±ã€‚</p>\n<h4 id=\"çº¿ç¨‹-B-æ€ä¹ˆçŸ¥é“çº¿ç¨‹-A-ä¿®æ”¹äº†å˜é‡\"><a href=\"#çº¿ç¨‹-B-æ€ä¹ˆçŸ¥é“çº¿ç¨‹-A-ä¿®æ”¹äº†å˜é‡\" class=\"headerlink\" title=\"çº¿ç¨‹ B æ€ä¹ˆçŸ¥é“çº¿ç¨‹ A ä¿®æ”¹äº†å˜é‡\"></a>çº¿ç¨‹ B æ€ä¹ˆçŸ¥é“çº¿ç¨‹ A ä¿®æ”¹äº†å˜é‡</h4><ul>\n<li><p>volatile ä¿®é¥°å˜é‡</p>\n</li>\n<li><p>synchronized ä¿®é¥°ä¿®æ”¹å˜é‡çš„æ–¹æ³•</p>\n</li>\n<li><p>lock å¯¹ä¿®æ”¹å˜é‡çš„ä»£ç å—åŠ é”</p>\n</li>\n</ul>\n<h4 id=\"synchronized-å’Œ-Lock-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\"><a href=\"#synchronized-å’Œ-Lock-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\" class=\"headerlink\" title=\"synchronized å’Œ Lock æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\"></a>synchronized å’Œ Lock æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h4><ul>\n<li>synchronized æ˜¯ Java å…³é”®å­—ï¼Œè€ŒLock æ˜¯ä¸ªæ¥å£ï¼›</li>\n<li>synchronized å¯ä»¥ç»™é™æ€æ–¹æ³•ã€å®ä¾‹æ–¹æ³•ã€ä»£ç å—åŠ é”ï¼Œè€Œ lock åªèƒ½ç»™ä»£ç å—åŠ é”ï¼›</li>\n<li>synchronized ä¸éœ€è¦æ‰‹åŠ¨è·å–é”å’Œé‡Šæ”¾é”ï¼Œè€Œ lock éœ€è¦è‡ªå·±åŠ é”å’Œé‡Šæ”¾é”ï¼›</li>\n<li>é€šè¿‡ Lock å¯ä»¥çŸ¥é“æœ‰æ²¡æœ‰æˆåŠŸè·å–é”ï¼Œè€Œ synchronized å´æ— æ³•åŠåˆ°ã€‚</li>\n</ul>\n<h4 id=\"synchronized-å’Œ-ReentrantLock-åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ\"><a href=\"#synchronized-å’Œ-ReentrantLock-åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ\" class=\"headerlink\" title=\"synchronized å’Œ ReentrantLock åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ\"></a>synchronized å’Œ ReentrantLock åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</h4><p><strong>ç›¸åŒç‚¹ï¼š</strong></p>\n<p>ä¸¤è€…éƒ½æ˜¯å¯é‡å…¥é”</p>\n<p>â€œå¯é‡å…¥é”â€æ¦‚å¿µæ˜¯ï¼šè‡ªå·±å¯ä»¥å†æ¬¡è·å–è‡ªå·±çš„å†…éƒ¨é”ã€‚æ¯”å¦‚ä¸€ä¸ªçº¿ç¨‹è·å¾—äº†æŸä¸ªå¯¹è±¡çš„é”ï¼Œæ­¤æ—¶è¿™ä¸ªå¯¹è±¡é”è¿˜æ²¡æœ‰é‡Šæ”¾ï¼Œå½“å…¶å†æ¬¡æƒ³è¦è·å–è¿™ä¸ªå¯¹è±¡çš„é”çš„æ—¶å€™è¿˜æ˜¯å¯ä»¥è·å–çš„ï¼Œ<strong>å¦‚æœä¸å¯é”é‡å…¥çš„è¯ï¼Œå°±ä¼šé€ æˆæ­»é”</strong>ã€‚åŒä¸€ä¸ªçº¿ç¨‹æ¯æ¬¡è·å–é”ï¼Œé”çš„è®¡æ•°å™¨éƒ½è‡ªå¢1ï¼Œæ‰€ä»¥è¦ç­‰åˆ°é”çš„è®¡æ•°å™¨ä¸‹é™ä¸º0æ—¶æ‰èƒ½é‡Šæ”¾é”ã€‚</p>\n<p><strong>ä¸åŒç‚¹ï¼š</strong></p>\n<ul>\n<li>synchronized æ˜¯å…³é”®å­—ï¼ŒReentrantLock æ˜¯ç±»ï¼›</li>\n<li>ReentrantLock åªé€‚ç”¨äºä»£ç å—é”ï¼Œè€Œ synchronized å¯ä»¥ä¿®é¥°ç±»ã€æ–¹æ³•ã€å˜é‡ç­‰ï¼›</li>\n</ul>\n<ul>\n<li>ReentrantLock å¿…é¡»æ‰‹åŠ¨è·å–ä¸é‡Šæ”¾é”ï¼Œè€Œ synchronized ä¸éœ€è¦æ‰‹åŠ¨é‡Šæ”¾å’Œå¼€å¯é”ï¼›</li>\n<li>äºŒè€…çš„é”æœºåˆ¶å…¶å®ä¹Ÿæ˜¯ä¸ä¸€æ ·çš„ï¼š<br>  ReentrantLock åº•å±‚è°ƒç”¨çš„æ˜¯ Unsafe çš„park æ–¹æ³•åŠ é”ï¼Œsynchronized æ“ä½œçš„åº”è¯¥æ˜¯å¯¹è±¡å¤´ä¸­ mark word</li>\n</ul>\n<h3 id=\"volatile\"><a href=\"#volatile\" class=\"headerlink\" title=\"volatile\"></a>volatile</h3><h4 id=\"ä¸ºä»€ä¹ˆä»£ç ä¼šé‡æ’åºï¼Ÿ\"><a href=\"#ä¸ºä»€ä¹ˆä»£ç ä¼šé‡æ’åºï¼Ÿ\" class=\"headerlink\" title=\"ä¸ºä»€ä¹ˆä»£ç ä¼šé‡æ’åºï¼Ÿ\"></a>ä¸ºä»€ä¹ˆä»£ç ä¼šé‡æ’åºï¼Ÿ</h4><p>åœ¨æ‰§è¡Œç¨‹åºæ—¶ï¼Œä¸ºäº†<strong>æé«˜æ€§èƒ½</strong>ï¼Œå¤„ç†å™¨å’Œç¼–è¯‘å™¨å¸¸å¸¸ä¼šå¯¹æŒ‡ä»¤è¿›è¡Œé‡æ’åºï¼Œä½†æ˜¯ä¸èƒ½éšæ„é‡æ’åºï¼Œä¸æ˜¯ä½ æƒ³æ€ä¹ˆæ’åºå°±æ€ä¹ˆæ’åºï¼Œå®ƒéœ€è¦æ»¡è¶³ä»¥ä¸‹ä¸¤ä¸ªæ¡ä»¶ï¼š</p>\n<ul>\n<li><strong>åœ¨å•çº¿ç¨‹ç¯å¢ƒä¸‹ä¸èƒ½æ”¹å˜ç¨‹åºè¿è¡Œçš„ç»“æœï¼›</strong></li>\n<li><strong>å­˜åœ¨æ•°æ®ä¾èµ–å…³ç³»çš„ä¸å…è®¸é‡æ’åº</strong></li>\n</ul>\n<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼šé‡æ’åºä¸ä¼šå½±å“å•çº¿ç¨‹ç¯å¢ƒçš„æ‰§è¡Œç»“æœï¼Œä½†æ˜¯ä¼šç ´åå¤šçº¿ç¨‹çš„æ‰§è¡Œè¯­ä¹‰ã€‚</p>\n<h4 id=\"as-if-serial-è§„åˆ™å’Œ-happens-before-è§„åˆ™çš„åŒºåˆ«\"><a href=\"#as-if-serial-è§„åˆ™å’Œ-happens-before-è§„åˆ™çš„åŒºåˆ«\" class=\"headerlink\" title=\"as-if-serial è§„åˆ™å’Œ happens-before è§„åˆ™çš„åŒºåˆ«\"></a>as-if-serial è§„åˆ™å’Œ happens-before è§„åˆ™çš„åŒºåˆ«</h4><ul>\n<li>as-if-serial è§„åˆ™ä¿è¯ <strong>å•çº¿ç¨‹</strong> å†…ç¨‹åºçš„æ‰§è¡Œç»“æœä¸è¢«æ”¹å˜ï¼Œhappens-before è§„åˆ™ä¿è¯ <strong>æ­£ç¡®åŒæ­¥çš„å¤šçº¿ç¨‹</strong> ç¨‹åºçš„æ‰§è¡Œç»“æœä¸è¢«æ”¹å˜ã€‚</li>\n<li>as-if-serial è¯­ä¹‰å’Œ happens-before è¿™ä¹ˆåšçš„ç›®çš„ï¼Œéƒ½æ˜¯ä¸ºäº†åœ¨ä¸æ”¹å˜ç¨‹åºæ‰§è¡Œç»“æœçš„å‰æä¸‹ï¼Œå°½å¯èƒ½åœ°æé«˜ç¨‹åºæ‰§è¡Œçš„å¹¶è¡Œåº¦ã€‚</li>\n</ul>\n<h4 id=\"volatile-å…³é”®å­—çš„ä½œç”¨\"><a href=\"#volatile-å…³é”®å­—çš„ä½œç”¨\" class=\"headerlink\" title=\"volatile å…³é”®å­—çš„ä½œç”¨\"></a>volatile å…³é”®å­—çš„ä½œç”¨</h4><p>å¯¹äºå¯è§æ€§ï¼ŒJava æä¾›äº† volatile å…³é”®å­—æ¥ä¿è¯å¯è§æ€§å’Œæœ‰åºæ€§ï¼ˆç¦æ­¢æŒ‡ä»¤é‡æ’ï¼‰ï¼Œä½†ä¸èƒ½ä¿è¯åŸå­æ€§ã€‚ volatile æä¾› happens-before çš„ä¿è¯ï¼Œç¡®ä¿ä¸€ä¸ªçº¿ç¨‹çš„ä¿®æ”¹èƒ½å¯¹å…¶ä»–çº¿ç¨‹æ˜¯å¯è§çš„ã€‚å½“ä¸€ä¸ªå…±äº«å˜é‡è¢« volatile ä¿®é¥°æ—¶ï¼Œå®ƒä¼šä¿è¯ä¿®æ”¹çš„å€¼ä¼šç«‹å³è¢«æ›´æ–°åˆ°ä¸»å­˜ï¼Œå½“æœ‰å…¶ä»–çº¿ç¨‹éœ€è¦è¯»å–æ—¶ï¼Œå®ƒä¼šå»å†…å­˜ä¸­è¯»å–æ–°å€¼ã€‚</p>\n<h4 id=\"JMMå†…å­˜å±éšœæ’å…¥ç­–ç•¥\"><a href=\"#JMMå†…å­˜å±éšœæ’å…¥ç­–ç•¥\" class=\"headerlink\" title=\"JMMå†…å­˜å±éšœæ’å…¥ç­–ç•¥\"></a>JMMå†…å­˜å±éšœæ’å…¥ç­–ç•¥</h4><p><strong>æ’å…¥å±éšœ</strong></p>\n<p>StoreStoreå±éšœ - volatile å†™ - StoreLoadå±éšœ</p>\n<p>volatileè¯» - LoadLoadå±éšœ - LoadStoreå±éšœ</p>\n<p><strong>volatile ä¸æ™®é€šå˜é‡çš„é‡æ’åºè§„åˆ™</strong></p>\n<ol>\n<li>å¦‚æœç¬¬ä¸€ä¸ªæ“ä½œæ˜¯ volatile è¯»ï¼Œé‚£æ— è®ºç¬¬äºŒä¸ªæ“ä½œæ˜¯ä»€ä¹ˆï¼Œéƒ½ä¸èƒ½é‡æ’åºï¼›</li>\n<li>å¦‚æœç¬¬äºŒä¸ªæ“ä½œæ˜¯ volatile å†™ï¼Œé‚£æ— è®ºç¬¬ä¸€ä¸ªæ“ä½œæ˜¯ä»€ä¹ˆï¼Œéƒ½ä¸èƒ½é‡æ’åºï¼›</li>\n<li>å¦‚æœç¬¬ä¸€ä¸ªæ“ä½œæ˜¯ volatile å†™ï¼Œç¬¬äºŒä¸ªæ“ä½œæ˜¯ volatile è¯»ï¼Œé‚£ä¸èƒ½é‡æ’åºã€‚</li>\n</ol>\n<h4 id=\"volatile-èƒ½ä½¿å¾—ä¸€ä¸ªéåŸå­æ“ä½œå˜æˆåŸå­æ“ä½œå—ï¼Ÿ\"><a href=\"#volatile-èƒ½ä½¿å¾—ä¸€ä¸ªéåŸå­æ“ä½œå˜æˆåŸå­æ“ä½œå—ï¼Ÿ\" class=\"headerlink\" title=\"volatile èƒ½ä½¿å¾—ä¸€ä¸ªéåŸå­æ“ä½œå˜æˆåŸå­æ“ä½œå—ï¼Ÿ\"></a>volatile èƒ½ä½¿å¾—ä¸€ä¸ªéåŸå­æ“ä½œå˜æˆåŸå­æ“ä½œå—ï¼Ÿ</h4><p>volatile åªèƒ½ä¿è¯å¯è§æ€§å’Œæœ‰åºæ€§è€Œä¸èƒ½ä¿è¯åŸå­æ€§ï¼Œä½†ç”¨ volatile ä¿®é¥° long å’Œ double å¯ä»¥ä¿è¯å…¶æ“ä½œåŸå­æ€§ã€‚</p>\n<h4 id=\"volatile-ä¿®é¥°ç¬¦çš„æœ‰è¿‡ä»€ä¹ˆå®è·µï¼Ÿ\"><a href=\"#volatile-ä¿®é¥°ç¬¦çš„æœ‰è¿‡ä»€ä¹ˆå®è·µï¼Ÿ\" class=\"headerlink\" title=\"volatile ä¿®é¥°ç¬¦çš„æœ‰è¿‡ä»€ä¹ˆå®è·µï¼Ÿ\"></a>volatile ä¿®é¥°ç¬¦çš„æœ‰è¿‡ä»€ä¹ˆå®è·µï¼Ÿ</h4><p>å•ä¾‹æ¨¡å¼-åŒé‡é”æ£€éªŒé‡Œé¢ç”¨ volatile ä¿®é¥°å®ä¾‹å˜é‡ã€‚</p>\n<h4 id=\"volatile-å’Œ-synchronized-çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ\"><a href=\"#volatile-å’Œ-synchronized-çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ\" class=\"headerlink\" title=\"volatile å’Œ synchronized çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ\"></a>volatile å’Œ synchronized çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</h4><ul>\n<li>volatile æ˜¯å˜é‡ä¿®é¥°ç¬¦ï¼›synchronized å¯ä»¥ä¿®é¥°ç±»ã€æ–¹æ³•ã€ä»£ç å—ï¼›</li>\n<li>volatile ä»…èƒ½å®ç°å˜é‡çš„ä¿®æ”¹å¯è§æ€§å’Œæœ‰åºæ€§ï¼Œä¸èƒ½ä¿è¯åŸå­æ€§ï¼Œ<br>  è€Œ synchronized åˆ™å¯ä»¥ä¿è¯å˜é‡çš„ä¿®æ”¹åŸå­æ€§å’Œå¯è§æ€§ï¼›</li>\n<li>volatile ä¸ä¼šé€ æˆçº¿ç¨‹çš„é˜»å¡ï¼›synchronized å¯èƒ½ä¼šé€ æˆçº¿ç¨‹çš„é˜»å¡ï¼›</li>\n<li><strong>volatileå…³é”®å­—</strong>æ˜¯çº¿ç¨‹åŒæ­¥çš„<strong>è½»é‡çº§å®ç°</strong>ï¼Œæ‰€ä»¥<strong>volatileæ€§èƒ½è‚¯å®šæ¯”synchronizedå…³é”®å­—è¦å¥½</strong>ã€‚synchronizedå…³é”®å­—åœ¨JavaSE1.6ä¹‹åè¿›è¡Œäº†ä¸»è¦åŒ…æ‹¬ä¸ºäº†<strong>å‡å°‘è·å¾—é”å’Œé‡Šæ”¾é”å¸¦æ¥çš„æ€§èƒ½æ¶ˆè€—</strong>è€Œå¼•å…¥çš„åå‘é”å’Œè½»é‡çº§é”ä»¥åŠå…¶å®ƒå„ç§ä¼˜åŒ–ä¹‹åæ‰§è¡Œæ•ˆç‡æœ‰äº†æ˜¾è‘—æå‡ï¼Œ<strong>å®é™…å¼€å‘ä¸­ä½¿ç”¨ synchronized å…³é”®å­—çš„åœºæ™¯è¿˜æ˜¯æ›´å¤šä¸€äº›</strong>ã€‚</li>\n</ul>\n<h2 id=\"Lock-ä½“ç³»\"><a href=\"#Lock-ä½“ç³»\" class=\"headerlink\" title=\"Lock ä½“ç³»\"></a>Lock ä½“ç³»</h2><h3 id=\"Lock-ç®€ä»‹\"><a href=\"#Lock-ç®€ä»‹\" class=\"headerlink\" title=\"Lock ç®€ä»‹\"></a>Lock ç®€ä»‹</h3><h4 id=\"Lock-æ¥å£æ˜¯ä»€ä¹ˆï¼Ÿå¯¹æ¯”åŒæ­¥å®ƒæœ‰ä»€ä¹ˆä¼˜åŠ¿ï¼Ÿ\"><a href=\"#Lock-æ¥å£æ˜¯ä»€ä¹ˆï¼Ÿå¯¹æ¯”åŒæ­¥å®ƒæœ‰ä»€ä¹ˆä¼˜åŠ¿ï¼Ÿ\" class=\"headerlink\" title=\"Lock æ¥å£æ˜¯ä»€ä¹ˆï¼Ÿå¯¹æ¯”åŒæ­¥å®ƒæœ‰ä»€ä¹ˆä¼˜åŠ¿ï¼Ÿ\"></a>Lock æ¥å£æ˜¯ä»€ä¹ˆï¼Ÿå¯¹æ¯”åŒæ­¥å®ƒæœ‰ä»€ä¹ˆä¼˜åŠ¿ï¼Ÿ</h4><p>Lock æ¥å£æ¯”åŒæ­¥æ–¹æ³•å’ŒåŒæ­¥å—æä¾›äº†æ›´å…·æ‰©å±•æ€§çš„é”æ“ä½œã€‚</p>\n<p>ï¼ˆ1ï¼‰å¯ä»¥ä½¿é”æ›´<strong>å…¬å¹³</strong></p>\n<p>ï¼ˆ2ï¼‰å¯ä»¥ä½¿çº¿ç¨‹åœ¨<strong>ç­‰å¾…é”çš„æ—¶å€™å“åº”ä¸­æ–­</strong></p>\n<p>ï¼ˆ3ï¼‰å¯ä»¥<strong>è®©çº¿ç¨‹å°è¯•è·å–é”ï¼Œå¹¶åœ¨æ— æ³•è·å–é”çš„æ—¶å€™ç«‹å³è¿”å›æˆ–è€…ç­‰å¾…ä¸€æ®µæ—¶é—´</strong></p>\n<h4 id=\"ä¹è§‚é”å’Œæ‚²è§‚é”çš„ç†è§£åŠå¦‚ä½•å®ç°ï¼Œæœ‰å“ªäº›å®ç°æ–¹å¼ï¼Ÿ\"><a href=\"#ä¹è§‚é”å’Œæ‚²è§‚é”çš„ç†è§£åŠå¦‚ä½•å®ç°ï¼Œæœ‰å“ªäº›å®ç°æ–¹å¼ï¼Ÿ\" class=\"headerlink\" title=\"ä¹è§‚é”å’Œæ‚²è§‚é”çš„ç†è§£åŠå¦‚ä½•å®ç°ï¼Œæœ‰å“ªäº›å®ç°æ–¹å¼ï¼Ÿ\"></a>ä¹è§‚é”å’Œæ‚²è§‚é”çš„ç†è§£åŠå¦‚ä½•å®ç°ï¼Œæœ‰å“ªäº›å®ç°æ–¹å¼ï¼Ÿ</h4><p>æ‚²è§‚é”ï¼šæ€»æ˜¯å‡è®¾æœ€åçš„æƒ…å†µï¼Œæ¯æ¬¡å»æ‹¿æ•°æ®çš„æ—¶å€™éƒ½è®¤ä¸ºåˆ«äººä¼šä¿®æ”¹ï¼Œæ‰€ä»¥æ¯æ¬¡åœ¨æ‹¿æ•°æ®çš„æ—¶å€™éƒ½ä¼šä¸Šé”ï¼Œè¿™æ ·åˆ«äººæƒ³æ‹¿è¿™ä¸ªæ•°æ®å°±ä¼šé˜»å¡ç›´åˆ°å®ƒæ‹¿åˆ°é”ã€‚<br>    ä¼ ç»Ÿçš„å…³ç³»å‹æ•°æ®åº“é‡Œè¾¹å°±ç”¨åˆ°äº†å¾ˆå¤šè¿™ç§é”æœºåˆ¶ï¼Œæ¯”å¦‚è¡Œé”ï¼Œè¡¨é”ç­‰ï¼Œè¯»é”ï¼Œå†™é”ç­‰ï¼Œéƒ½æ˜¯åœ¨åšæ“ä½œä¹‹å‰å…ˆä¸Šé”ã€‚å†æ¯”å¦‚ Java é‡Œé¢çš„åŒæ­¥åŸè¯­ synchronized å…³é”®å­—çš„å®ç°ä¹Ÿæ˜¯æ‚²è§‚é”ã€‚</p>\n<p>ä¹è§‚é”ï¼šé¡¾åæ€ä¹‰ï¼Œå°±æ˜¯å¾ˆä¹è§‚ï¼Œæ¯æ¬¡å»æ‹¿æ•°æ®çš„æ—¶å€™éƒ½è®¤ä¸ºåˆ«äººä¸ä¼šä¿®æ”¹ï¼Œæ‰€ä»¥ä¸ä¼šä¸Šé”ï¼Œä½†æ˜¯åœ¨æ›´æ–°çš„æ—¶å€™ä¼šåˆ¤æ–­ä¸€ä¸‹åœ¨æ­¤æœŸé—´åˆ«äººæœ‰æ²¡æœ‰å»æ›´æ–°è¿™ä¸ªæ•°æ®ï¼Œå¯ä»¥ä½¿ç”¨ç‰ˆæœ¬å·ç­‰æœºåˆ¶ã€‚<br>    ä¹è§‚é”é€‚ç”¨äºå¤šè¯»çš„åº”ç”¨ç±»å‹ï¼Œè¿™æ ·å¯ä»¥æé«˜ååé‡ï¼Œæ¯”å¦‚ atomic åŒ…ä¸‹é¢çš„åŸå­å˜é‡ç±»å°±æ˜¯ä½¿ç”¨äº†ä¹è§‚é”çš„ä¸€ç§å®ç°æ–¹å¼ CAS å®ç°çš„ã€‚</p>\n<h4 id=\"ä»€ä¹ˆæ˜¯-CAS\"><a href=\"#ä»€ä¹ˆæ˜¯-CAS\" class=\"headerlink\" title=\"ä»€ä¹ˆæ˜¯ CAS\"></a>ä»€ä¹ˆæ˜¯ CAS</h4><p>CAS æ˜¯ compare and swap çš„ç¼©å†™ï¼Œå³æˆ‘ä»¬æ‰€è¯´çš„æ¯”è¾ƒäº¤æ¢ï¼Œæ˜¯ä¸€ç§ä¹è§‚é”æ“ä½œã€‚</p>\n<p>CAS æ“ä½œåŒ…å«ä¸‰ä¸ªæ“ä½œæ•° â€”â€” å†…å­˜ä½ç½®ï¼ˆVï¼‰ã€é¢„æœŸåŸå€¼ï¼ˆAï¼‰å’Œæ–°å€¼ï¼ˆBï¼‰ã€‚</p>\n<p>å¦‚æœå†…å­˜åœ°å€ V é‡Œé¢çš„å€¼å’Œ A çš„å€¼æ˜¯ä¸€æ ·çš„ï¼Œé‚£ä¹ˆå°±å°†å†…å­˜é‡Œé¢çš„å€¼æ›´æ–°æˆ Bã€‚</p>\n<h4 id=\"Javaå®ç°CASçš„åŸç†-Unsafeç±»\"><a href=\"#Javaå®ç°CASçš„åŸç†-Unsafeç±»\" class=\"headerlink\" title=\"Javaå®ç°CASçš„åŸç† - Unsafeç±»\"></a>Javaå®ç°CASçš„åŸç† - Unsafeç±»</h4><p>åœ¨Javaä¸­ï¼Œæœ‰ä¸€ä¸ª<code>Unsafe</code>ç±»ï¼Œå®ƒåœ¨<code>sun.misc</code>åŒ…ä¸­ã€‚å®ƒé‡Œé¢æ˜¯ä¸€äº›<code>native</code>æ–¹æ³•ï¼ˆç”±åº•å±‚çš„JVMä½¿ç”¨Cæˆ–è€…C++å»å®ç°ï¼‰ï¼Œå…¶ä¸­å°±æœ‰å‡ ä¸ªå…³äºCASçš„ï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">boolean</span> <span class=\"title function_\">compareAndSwapObject</span><span class=\"params\">(Object o, <span class=\"type\">long</span> offset,Object expected, Object x)</span>;</span><br><span class=\"line\"><span class=\"type\">boolean</span> <span class=\"title function_\">compareAndSwapInt</span><span class=\"params\">(Object o, <span class=\"type\">long</span> offset,<span class=\"type\">int</span> expected,<span class=\"type\">int</span> x)</span>;</span><br><span class=\"line\"><span class=\"type\">boolean</span> <span class=\"title function_\">compareAndSwapLong</span><span class=\"params\">(Object o, <span class=\"type\">long</span> offset,<span class=\"type\">long</span> expected,<span class=\"type\">long</span> x)</span>;</span><br></pre></td></tr></table></figure>\n\n<p>å½“ç„¶ï¼Œä»–ä»¬éƒ½æ˜¯<code>public native</code>çš„ã€‚</p>\n<p>Unsafe ä¸­å¯¹ CAS çš„å®ç°æ˜¯ C++ å†™çš„ï¼Œå®ƒçš„å…·ä½“å®ç°å’Œæ“ä½œç³»ç»Ÿã€CPU éƒ½æœ‰å…³ç³»ã€‚</p>\n<p>Linux çš„ X86 ä¸‹ä¸»è¦æ˜¯é€šè¿‡<code>cmpxchgl</code>è¿™ä¸ªæŒ‡ä»¤åœ¨ CPU çº§å®Œæˆ CAS æ“ä½œçš„ï¼Œä½†åœ¨å¤šå¤„ç†å™¨æƒ…å†µä¸‹å¿…é¡»ä½¿ç”¨<code>lock</code>æŒ‡ä»¤åŠ é”æ¥å®Œæˆã€‚å½“ç„¶ä¸åŒçš„æ“ä½œç³»ç»Ÿå’Œå¤„ç†å™¨çš„å®ç°ä¼šæœ‰æ‰€ä¸åŒï¼Œå¤§å®¶å¯ä»¥è‡ªè¡Œäº†è§£ã€‚</p>\n<p>å½“ç„¶ï¼ŒUnsafeç±»é‡Œé¢è¿˜æœ‰å…¶å®ƒæ–¹æ³•ç”¨äºä¸åŒçš„ç”¨é€”ã€‚æ¯”å¦‚æ”¯æŒçº¿ç¨‹æŒ‚èµ·å’Œæ¢å¤çš„<code>park</code>å’Œ<code>unpark</code>ï¼Œ LockSupportç±»åº•å±‚å°±æ˜¯è°ƒç”¨äº†è¿™ä¸¤ä¸ªæ–¹æ³•ã€‚è¿˜æœ‰æ”¯æŒåå°„æ“ä½œçš„<code>allocateInstance()</code>æ–¹æ³•ã€‚</p>\n<h4 id=\"CAS-ä¼šäº§ç”Ÿä»€ä¹ˆé—®é¢˜ï¼Ÿ\"><a href=\"#CAS-ä¼šäº§ç”Ÿä»€ä¹ˆé—®é¢˜ï¼Ÿ\" class=\"headerlink\" title=\"CAS ä¼šäº§ç”Ÿä»€ä¹ˆé—®é¢˜ï¼Ÿ\"></a>CAS ä¼šäº§ç”Ÿä»€ä¹ˆé—®é¢˜ï¼Ÿ</h4><p>1ã€<strong>ABA é—®é¢˜</strong>ï¼š</p>\n<p>æ¯”å¦‚è¯´ä¸€ä¸ªçº¿ç¨‹ one ä»å†…å­˜ä½ç½® V ä¸­å–å‡º Aï¼Œè¿™æ—¶å€™å¦ä¸€ä¸ªçº¿ç¨‹ two ä¹Ÿä»å†…å­˜ä¸­å–å‡º Aï¼Œå¹¶ä¸” two è¿›è¡Œäº†ä¸€äº›æ“ä½œå˜æˆäº† Bï¼Œç„¶å two åˆå°† V ä½ç½®çš„æ•°æ®å˜æˆ Aï¼Œè¿™æ—¶å€™çº¿ç¨‹ one è¿›è¡Œ CAS æ“ä½œå‘ç°å†…å­˜ä¸­ä»ç„¶æ˜¯ Aï¼Œç„¶å one æ“ä½œæˆåŠŸã€‚å°½ç®¡çº¿ç¨‹ one çš„ CAS æ“ä½œæˆåŠŸï¼Œä½†å¯èƒ½å­˜åœ¨æ½œè—çš„é—®é¢˜ã€‚å¯ä»¥åœ¨å˜é‡ä¸ŠåŠ ä¸€ä¸ªç‰ˆæœ¬æˆ³ã€‚ä» Java1.5 å¼€å§‹ JDK çš„ atomic åŒ…é‡Œæä¾›äº†ä¸€ä¸ªç±» AtomicStampedReference æ¥è§£å†³ ABA é—®é¢˜ã€‚</p>\n<p>2ã€<strong>å¾ªç¯æ—¶é—´é•¿å¼€é”€å¤§</strong>ï¼š</p>\n<p>å¯¹äºèµ„æºç«äº‰ä¸¥é‡ï¼ˆçº¿ç¨‹å†²çªä¸¥é‡ï¼‰çš„æƒ…å†µï¼ŒCAS è‡ªæ—‹çš„æ¦‚ç‡ä¼šæ¯”è¾ƒå¤§ï¼Œä»è€Œæµªè´¹æ›´å¤šçš„ CPU èµ„æºï¼Œæ•ˆç‡ä½äº synchronizedã€‚</p>\n<p>3ã€<strong>åªèƒ½ä¿è¯ä¸€ä¸ªå…±äº«å˜é‡çš„åŸå­æ“ä½œ</strong>ï¼š</p>\n<p>å½“å¯¹ä¸€ä¸ªå…±äº«å˜é‡æ‰§è¡Œæ“ä½œæ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¾ªç¯ CAS çš„æ–¹å¼æ¥ä¿è¯åŸå­æ“ä½œï¼Œä½†æ˜¯<strong>å¯¹å¤šä¸ªå…±äº«å˜é‡æ“ä½œæ—¶ï¼Œå¾ªç¯ CAS å°±æ— æ³•ä¿è¯æ“ä½œçš„åŸå­æ€§ï¼Œè¿™ä¸ªæ—¶å€™å°±å¯ä»¥ç”¨é”</strong>ã€‚</p>\n<h4 id=\"æ­»é”ä¸æ´»é”çš„åŒºåˆ«ï¼Œæ­»é”ä¸é¥¥é¥¿çš„åŒºåˆ«ï¼Ÿ\"><a href=\"#æ­»é”ä¸æ´»é”çš„åŒºåˆ«ï¼Œæ­»é”ä¸é¥¥é¥¿çš„åŒºåˆ«ï¼Ÿ\" class=\"headerlink\" title=\"æ­»é”ä¸æ´»é”çš„åŒºåˆ«ï¼Œæ­»é”ä¸é¥¥é¥¿çš„åŒºåˆ«ï¼Ÿ\"></a>æ­»é”ä¸æ´»é”çš„åŒºåˆ«ï¼Œæ­»é”ä¸é¥¥é¥¿çš„åŒºåˆ«ï¼Ÿ</h4><blockquote>\n<p>åŒºåˆ«ï¼šæ­»é”åŠ¨ä¸äº†äº†ï¼›æ´»é”ä¸€ç›´é‡å¤å°è¯•ã€å¤±è´¥ã€å°è¯•ã€å¤±è´¥ã€‚</p>\n</blockquote>\n<p>æ­»é”ï¼šæ˜¯æŒ‡ä¸¤ä¸ªæˆ–ä¸¤ä¸ªä»¥ä¸Šçš„è¿›ç¨‹ï¼ˆæˆ–çº¿ç¨‹ï¼‰åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œå› äº‰å¤ºèµ„æºè€Œé€ æˆçš„ä¸€ç§äº’ç›¸ç­‰å¾…çš„ç°è±¡ï¼Œè‹¥æ— å¤–åŠ›ä½œç”¨ï¼Œå®ƒä»¬éƒ½å°†æ— æ³•æ¨è¿›ä¸‹å»ã€‚</p>\n<p>æ´»é”ï¼šä»»åŠ¡æˆ–è€…æ‰§è¡Œè€…æ²¡æœ‰è¢«é˜»å¡ï¼Œç”±äºæŸäº›æ¡ä»¶æ²¡æœ‰æ»¡è¶³ï¼Œå¯¼è‡´<strong>ä¸€ç›´é‡å¤å°è¯•ï¼Œå¤±è´¥ï¼Œå°è¯•ï¼Œå¤±è´¥</strong>ã€‚</p>\n<p>æ´»é”å’Œæ­»é”çš„åŒºåˆ«åœ¨äºï¼Œå¤„äºæ´»é”çš„å®ä½“æ˜¯åœ¨ä¸æ–­çš„æ”¹å˜çŠ¶æ€ï¼Œè¿™å°±æ˜¯æ‰€è°“çš„â€œæ´»â€ï¼Œ è€Œå¤„äºæ­»é”çš„å®ä½“è¡¨ç°ä¸ºç­‰å¾…ï¼›æ´»é”æœ‰å¯èƒ½è‡ªè¡Œè§£å¼€ï¼Œæ­»é”åˆ™ä¸èƒ½ã€‚</p>\n<p>é¥¥é¥¿ï¼šä¸€ä¸ªæˆ–è€…å¤šä¸ªçº¿ç¨‹å› ä¸ºç§ç§åŸå› æ— æ³•è·å¾—æ‰€éœ€è¦çš„èµ„æºï¼Œå¯¼è‡´ä¸€ç›´æ— æ³•æ‰§è¡Œçš„çŠ¶æ€ã€‚</p>\n<p>Java ä¸­å¯¼è‡´é¥¥é¥¿çš„åŸå› ï¼šé«˜ä¼˜å…ˆçº§çº¿ç¨‹åå™¬æ‰€æœ‰çš„ä½ä¼˜å…ˆçº§çº¿ç¨‹çš„ CPU æ—¶é—´ã€‚</p>\n<h3 id=\"AQSè¯¦è§£\"><a href=\"#AQSè¯¦è§£\" class=\"headerlink\" title=\"AQSè¯¦è§£\"></a>AQSè¯¦è§£</h3><h4 id=\"AQS-ä»‹ç»\"><a href=\"#AQS-ä»‹ç»\" class=\"headerlink\" title=\"AQS ä»‹ç»\"></a>AQS ä»‹ç»</h4><p>AQS çš„å…¨ç§°ä¸ºï¼ˆAbstractQueuedSynchronizerï¼‰ï¼ŒæŠ½è±¡é˜Ÿåˆ—åŒæ­¥å™¨ã€‚</p>\n<p>ä½¿ç”¨ AQS èƒ½ç®€å•ä¸”é«˜æ•ˆåœ°æ„é€ å‡ºåº”ç”¨å¹¿æ³›çš„å¤§é‡çš„åŒæ­¥å™¨ï¼Œæ¯”å¦‚æˆ‘ä»¬æåˆ°çš„ReentrantLockï¼ŒSemaphoreï¼Œå…¶ä»–çš„è¯¸å¦‚ ReentrantReadWriteLockï¼ŒSynchronousQueueï¼ŒFutureTask ç­‰ç­‰çš†æ˜¯åŸºäº AQS çš„ã€‚å½“ç„¶ï¼Œæˆ‘ä»¬è‡ªå·±ä¹Ÿèƒ½åˆ©ç”¨ AQS éå¸¸è½»æ¾å®¹æ˜“åœ°æ„é€ å‡ºç¬¦åˆæˆ‘ä»¬è‡ªå·±éœ€æ±‚çš„åŒæ­¥å™¨ã€‚</p>\n<h4 id=\"AQS-åŸç†åˆ†æ\"><a href=\"#AQS-åŸç†åˆ†æ\" class=\"headerlink\" title=\"AQS åŸç†åˆ†æ\"></a>AQS åŸç†åˆ†æ</h4><p><strong>å¦‚æœè¢«è¯·æ±‚çš„å…±äº«èµ„æºç©ºé—²ï¼Œåˆ™å°†å½“å‰è¯·æ±‚èµ„æºçš„çº¿ç¨‹è®¾ç½®ä¸ºæœ‰æ•ˆçš„å·¥ä½œçº¿ç¨‹ï¼Œå¹¶ä¸”å°†å…±äº«èµ„æºè®¾ç½®ä¸ºé”å®šçŠ¶æ€ã€‚<br>å¦‚æœè¢«è¯·æ±‚çš„å…±äº«èµ„æºè¢«å ç”¨ï¼Œé‚£ä¹ˆå°±ä½¿ç”¨ CLH é˜Ÿåˆ—ï¼Œå°†æš‚æ—¶è·å–ä¸åˆ°é”çš„çº¿ç¨‹åŠ å…¥åˆ°é˜Ÿåˆ—ä¸­ã€‚</strong></p>\n<blockquote>\n<p>CLH(Craig,Landin,and Hagersten)é˜Ÿåˆ—æ˜¯ä¸€ä¸ªè™šæ‹Ÿçš„åŒå‘é˜Ÿåˆ—ï¼ˆè™šæ‹Ÿçš„åŒå‘é˜Ÿåˆ—å³ä¸å­˜åœ¨é˜Ÿåˆ—å®ä¾‹ï¼Œä»…å­˜åœ¨ç»“ç‚¹ä¹‹é—´çš„å…³è”å…³ç³»ï¼‰ã€‚AQS æ˜¯å°†æ¯æ¡è¯·æ±‚å…±äº«èµ„æºçš„çº¿ç¨‹å°è£…æˆä¸€ä¸ª CLH é˜Ÿåˆ—çš„ä¸€ä¸ªç»“ç‚¹ï¼ˆNodeï¼‰æ¥å®ç°é”çš„åˆ†é…ã€‚</p>\n</blockquote>\n<p>çœ‹ä¸ªAQS(AbstractQueuedSynchronizer)åŸç†å›¾ï¼š</p>\n<p><img src=\"https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/TyporaNotes11474088-c906e727d699fa9c.png\" alt=\"AQSåŸç†å›¾\"></p>\n<p>AQSä½¿ç”¨ä¸€ä¸ª volatile int ç±»å‹çš„æˆå‘˜å˜é‡ state æ¥è¡¨ç¤ºåŒæ­¥çŠ¶æ€ï¼Œé€šè¿‡å†…ç½®çš„ CLH é˜Ÿåˆ—æ¥å®Œæˆè·å–èµ„æºçº¿ç¨‹çš„æ’é˜Ÿå·¥ä½œã€‚AQSä½¿ç”¨ CAS å¯¹è¯¥åŒæ­¥çŠ¶æ€è¿›è¡ŒåŸå­æ“ä½œå®ç°å¯¹å…¶å€¼çš„ä¿®æ”¹ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">volatile</span> <span class=\"type\">int</span> state;\t<span class=\"comment\">// å…±äº«å˜é‡ï¼Œä½¿ç”¨volatileä¿®é¥°ä¿è¯çº¿ç¨‹å¯è§æ€§</span></span><br></pre></td></tr></table></figure>\n\n<p>çŠ¶æ€ä¿¡æ¯é€šè¿‡ protected ç±»å‹çš„ getStateï¼ŒsetStateï¼ŒcompareAndSetStateè¿›è¡Œæ“ä½œ</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// è¿”å›åŒæ­¥çŠ¶æ€çš„å½“å‰å€¼</span></span><br><span class=\"line\"><span class=\"keyword\">protected</span> <span class=\"keyword\">final</span> <span class=\"type\">int</span> <span class=\"title function_\">getState</span><span class=\"params\">()</span> &#123;  </span><br><span class=\"line\">    <span class=\"keyword\">return</span> state;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// è®¾ç½®åŒæ­¥çŠ¶æ€çš„å€¼</span></span><br><span class=\"line\"><span class=\"keyword\">protected</span> <span class=\"keyword\">final</span> <span class=\"keyword\">void</span> <span class=\"title function_\">setState</span><span class=\"params\">(<span class=\"type\">int</span> newState)</span> &#123; </span><br><span class=\"line\">    state = newState;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// åŸå­åœ°ï¼ˆCASæ“ä½œï¼‰å°†åŒæ­¥çŠ¶æ€å€¼è®¾ç½®ä¸ºç»™å®šå€¼updateå¦‚æœå½“å‰åŒæ­¥çŠ¶æ€çš„å€¼ç­‰äºexpectï¼ˆæœŸæœ›å€¼ï¼‰</span></span><br><span class=\"line\"><span class=\"keyword\">protected</span> <span class=\"keyword\">final</span> <span class=\"type\">boolean</span> <span class=\"title function_\">compareAndSetState</span><span class=\"params\">(<span class=\"type\">int</span> expect, <span class=\"type\">int</span> update)</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> unsafe.compareAndSwapInt(<span class=\"built_in\">this</span>, stateOffset, expect, update);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><strong>AQS å¯¹èµ„æºçš„å…±äº«æ–¹å¼</strong></p>\n<p>AQSå®šä¹‰ä¸¤ç§èµ„æºå…±äº«æ–¹å¼</p>\n<ul>\n<li><strong>Exclusive</strong>ï¼ˆç‹¬å ï¼‰ï¼šåªæœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½æ‰§è¡Œï¼Œå¦‚ ReentrantLockã€‚åˆå¯åˆ†ä¸ºå…¬å¹³é”å’Œéå…¬å¹³é”ï¼š<ul>\n<li>å…¬å¹³é”ï¼šæŒ‰ç…§çº¿ç¨‹åœ¨é˜Ÿåˆ—ä¸­çš„æ’é˜Ÿé¡ºåºï¼Œå…ˆåˆ°è€…å…ˆæ‹¿åˆ°é”</li>\n<li>éå…¬å¹³é”ï¼šå½“çº¿ç¨‹è¦è·å–é”æ—¶ï¼Œæ— è§†é˜Ÿåˆ—é¡ºåºç›´æ¥å»æŠ¢é”ï¼Œè°æŠ¢åˆ°å°±æ˜¯è°çš„</li>\n</ul>\n</li>\n<li><strong>Share</strong>ï¼ˆå…±äº«ï¼‰ï¼šå¤šä¸ªçº¿ç¨‹å¯åŒæ—¶æ‰§è¡Œï¼Œå¦‚ Semaphore&#x2F;CountDownLatchã€‚Semaphoreã€CountDownLatchã€ CyclicBarrierã€ReadWriteLock æˆ‘ä»¬éƒ½ä¼šåœ¨åé¢è®²åˆ°ã€‚</li>\n</ul>\n<p><strong>AQSåº•å±‚ä½¿ç”¨äº†æ¨¡æ¿æ–¹æ³•æ¨¡å¼</strong></p>\n<p>åŒæ­¥å™¨çš„è®¾è®¡æ˜¯åŸºäºæ¨¡æ¿æ–¹æ³•æ¨¡å¼çš„ï¼Œå¦‚æœéœ€è¦è‡ªå®šä¹‰åŒæ­¥å™¨ï¼ˆ<strong>æ¨¡æ¿æ–¹æ³•æ¨¡å¼</strong>å¾ˆç»å…¸çš„ä¸€ä¸ªåº”ç”¨ï¼‰ï¼š</p>\n<ol>\n<li>ä½¿ç”¨è€…ç»§æ‰¿ AQS å¹¶é‡å†™æŒ‡å®šçš„æ–¹æ³•ã€‚ï¼ˆå¯¹å…±äº«èµ„æº state çš„è·å–å’Œé‡Šæ”¾ï¼‰</li>\n<li>è°ƒç”¨ AQS çš„æ¨¡æ¿æ–¹æ³•ï¼Œä¼šè¿›ä¸€æ­¥è°ƒç”¨ä½¿ç”¨è€…é‡å†™çš„æ–¹æ³•ã€‚</li>\n</ol>\n<p><strong>AQSä½¿ç”¨äº†æ¨¡æ¿æ–¹æ³•æ¨¡å¼ï¼Œè‡ªå®šä¹‰åŒæ­¥å™¨æ—¶éœ€è¦é‡å†™ä¸‹é¢å‡ ä¸ªAQSæä¾›çš„æ¨¡æ¿æ–¹æ³•ï¼š</strong></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">isHeldExclusively()\t<span class=\"comment\">// è¯¥çº¿ç¨‹æ˜¯å¦æ­£åœ¨ç‹¬å èµ„æºã€‚åªæœ‰ç”¨åˆ°conditionæ‰éœ€è¦å»å®ç°å®ƒã€‚</span></span><br><span class=\"line\">tryAcquire(<span class=\"type\">int</span>)\t<span class=\"comment\">// ç‹¬å æ–¹å¼ã€‚å°è¯•è·å–èµ„æºï¼ŒæˆåŠŸåˆ™è¿”å›trueï¼Œå¤±è´¥åˆ™è¿”å›falseã€‚</span></span><br><span class=\"line\">tryRelease(<span class=\"type\">int</span>)\t<span class=\"comment\">// ç‹¬å æ–¹å¼ã€‚å°è¯•é‡Šæ”¾èµ„æºï¼ŒæˆåŠŸåˆ™è¿”å›trueï¼Œå¤±è´¥åˆ™è¿”å›falseã€‚</span></span><br><span class=\"line\">tryAcquireShared(<span class=\"type\">int</span>)\t<span class=\"comment\">// å…±äº«æ–¹å¼ã€‚å°è¯•è·å–èµ„æºã€‚è´Ÿæ•°è¡¨ç¤ºå¤±è´¥ï¼›0è¡¨ç¤ºæˆåŠŸï¼Œä½†æ²¡æœ‰å‰©ä½™å¯ç”¨èµ„æºï¼›æ­£æ•°è¡¨ç¤ºæˆåŠŸï¼Œä¸”æœ‰å‰©ä½™èµ„æºã€‚</span></span><br><span class=\"line\">tryReleaseShared(<span class=\"type\">int</span>)\t<span class=\"comment\">// å…±äº«æ–¹å¼ã€‚å°è¯•é‡Šæ”¾èµ„æºï¼ŒæˆåŠŸåˆ™è¿”å›trueï¼Œå¤±è´¥åˆ™è¿”å›falseã€‚</span></span><br></pre></td></tr></table></figure>\n\n<p>ä»¥ ReentrantLock ä¸ºä¾‹ï¼Œstate åˆå§‹åŒ–ä¸º0ï¼Œè¡¨ç¤ºæœªé”å®šçŠ¶æ€ã€‚A çº¿ç¨‹ lock() æ—¶ï¼Œä¼šè°ƒç”¨ tryAcquire() ç‹¬å è¯¥é”å¹¶å°† state+1ã€‚æ­¤åï¼Œå…¶ä»–çº¿ç¨‹å† tryAcquire() æ—¶å°±ä¼šå¤±è´¥ï¼Œç›´åˆ° A çº¿ç¨‹ unlock( )åˆ° state&#x3D;0ï¼ˆå³é‡Šæ”¾é”ï¼‰ä¸ºæ­¢ï¼Œå…¶å®ƒçº¿ç¨‹æ‰æœ‰æœºä¼šè·å–è¯¥é”ã€‚å½“ç„¶ï¼Œé‡Šæ”¾é”ä¹‹å‰ï¼ŒA çº¿ç¨‹è‡ªå·±æ˜¯å¯ä»¥é‡å¤è·å–æ­¤é”çš„ï¼ˆstateä¼šç´¯åŠ ï¼‰ï¼Œè¿™å°±æ˜¯å¯é‡å…¥çš„æ¦‚å¿µã€‚</p>\n<p>ä»¥ CountDownLatch ä»¥ä¾‹ï¼Œä»»åŠ¡åˆ†ä¸º N ä¸ªå­çº¿ç¨‹å»æ‰§è¡Œï¼Œstate ä¹Ÿåˆå§‹åŒ–ä¸º Nï¼ˆæ³¨æ„Nè¦ä¸çº¿ç¨‹ä¸ªæ•°ä¸€è‡´ï¼‰ã€‚è¿™ N ä¸ªå­çº¿ç¨‹æ˜¯å¹¶è¡Œæ‰§è¡Œçš„ï¼Œæ¯ä¸ªå­çº¿ç¨‹æ‰§è¡Œå®Œå countDown() ä¸€æ¬¡ï¼Œstate ä¼š CAS å‡ 1ã€‚ç­‰åˆ°æ‰€æœ‰å­çº¿ç¨‹éƒ½æ‰§è¡Œå®Œåï¼ˆå³state&#x3D;0ï¼‰ï¼Œä¼š unpark() ä¸»è°ƒç”¨çº¿ç¨‹ï¼Œç„¶åä¸»è°ƒç”¨çº¿ç¨‹å°±ä¼šä» await() å‡½æ•°è¿”å›ï¼Œç»§ç»­åç»­åŠ¨ä½œã€‚</p>\n<p>ä¸€èˆ¬æ¥è¯´ï¼Œè‡ªå®šä¹‰åŒæ­¥å™¨è¦ä¹ˆæ˜¯ç‹¬å æ–¹æ³•ï¼Œè¦ä¹ˆæ˜¯å…±äº«æ–¹å¼ï¼Œä»–ä»¬ä¹Ÿåªéœ€å®ç°<code>tryAcquire-tryRelease</code>ã€<code>tryAcquireShared-tryReleaseShared</code>ä¸­çš„ä¸€ç§å³å¯ã€‚ä½†AQSä¹Ÿæ”¯æŒè‡ªå®šä¹‰åŒæ­¥å™¨åŒæ—¶å®ç°ç‹¬å å’Œå…±äº«ä¸¤ç§æ–¹å¼ï¼Œå¦‚<code>ReentrantReadWriteLock</code>ã€‚</p>\n<h3 id=\"è¯»å†™é”\"><a href=\"#è¯»å†™é”\" class=\"headerlink\" title=\"è¯»å†™é”\"></a>è¯»å†™é”</h3><p>é¦–å…ˆæ˜ç¡®ä¸€ä¸‹ï¼Œä¸æ˜¯è¯´ ReentrantLock ä¸å¥½ï¼Œåªæ˜¯ ReentrantLock æŸäº›æ—¶å€™æœ‰å±€é™ã€‚å¦‚æœä½¿ç”¨ ReentrantLockï¼Œå¯èƒ½æœ¬èº«æ˜¯ä¸ºäº†é˜²æ­¢çº¿ç¨‹ A åœ¨å†™æ•°æ®ã€çº¿ç¨‹ B åœ¨è¯»æ•°æ®é€ æˆçš„æ•°æ®ä¸ä¸€è‡´ï¼Œä½†è¿™æ ·ï¼Œå¦‚æœçº¿ç¨‹ C åœ¨è¯»æ•°æ®ã€çº¿ç¨‹ D ä¹Ÿåœ¨è¯»æ•°æ®ï¼Œè¯»æ•°æ®æ˜¯ä¸ä¼šæ”¹å˜æ•°æ®çš„ï¼Œæ²¡æœ‰å¿…è¦åŠ é”ï¼Œä½†æ˜¯è¿˜æ˜¯åŠ é”äº†ï¼Œé™ä½äº†ç¨‹åºçš„æ€§èƒ½ã€‚å› ä¸ºè¿™ä¸ªï¼Œæ‰è¯ç”Ÿäº†è¯»å†™é” ReadWriteLockã€‚</p>\n<p>ReadWriteLock æ˜¯ä¸€ä¸ªè¯»å†™é”æ¥å£ï¼Œè¯»å†™é”æ˜¯ç”¨æ¥æå‡å¹¶å‘ç¨‹åºæ€§èƒ½çš„é”åˆ†ç¦»æŠ€æœ¯ï¼ŒReentrantReadWriteLock æ˜¯ ReadWriteLock æ¥å£çš„ä¸€ä¸ªå…·ä½“å®ç°ï¼Œ<strong>å®ç°äº†è¯»å†™çš„åˆ†ç¦»ï¼Œè¯»é”æ˜¯å…±äº«çš„ï¼Œå†™é”æ˜¯ç‹¬å çš„</strong>ï¼Œè¯»å’Œè¯»ä¹‹é—´ä¸ä¼šäº’æ–¥ï¼Œè¯»å’Œå†™ã€å†™å’Œè¯»ã€å†™å’Œå†™ä¹‹é—´æ‰ä¼šäº’æ–¥ï¼Œæå‡äº†è¯»å†™çš„æ€§èƒ½ã€‚</p>\n<h2 id=\"å¹¶å‘å®¹å™¨\"><a href=\"#å¹¶å‘å®¹å™¨\" class=\"headerlink\" title=\"å¹¶å‘å®¹å™¨\"></a>å¹¶å‘å®¹å™¨</h2><h3 id=\"ConcurrentHashMap\"><a href=\"#ConcurrentHashMap\" class=\"headerlink\" title=\"ConcurrentHashMap\"></a>ConcurrentHashMap</h3><h4 id=\"ä»€ä¹ˆæ˜¯ConcurrentHashMapï¼Ÿ\"><a href=\"#ä»€ä¹ˆæ˜¯ConcurrentHashMapï¼Ÿ\" class=\"headerlink\" title=\"ä»€ä¹ˆæ˜¯ConcurrentHashMapï¼Ÿ\"></a>ä»€ä¹ˆæ˜¯ConcurrentHashMapï¼Ÿ</h4><p>ConcurrentHashMapæ˜¯Javaä¸­çš„ä¸€ä¸ª<strong>çº¿ç¨‹å®‰å…¨ä¸”é«˜æ•ˆçš„HashMapå®ç°</strong>ã€‚</p>\n<p>é‚£ä¹ˆå®ƒåˆ°åº•æ˜¯å¦‚ä½•å®ç°çº¿ç¨‹å®‰å…¨çš„ï¼Ÿ</p>\n<p>JDK 1.6ç‰ˆæœ¬å…³é”®è¦ç´ ï¼š</p>\n<ul>\n<li>segment ç»§æ‰¿äº† ReentrantLock å……å½“é”çš„è§’è‰²ï¼Œä¸ºæ¯ä¸€ä¸ª segment æä¾›äº†çº¿ç¨‹å®‰å…¨çš„ä¿éšœï¼›</li>\n<li>segment ç»´æŠ¤äº†å“ˆå¸Œæ•£åˆ—è¡¨çš„è‹¥å¹²ä¸ªæ¡¶ï¼Œæ¯ä¸ªæ¡¶ç”± HashEntry æ„æˆçš„é“¾è¡¨ã€‚</li>\n</ul>\n<p>JDK1.8åï¼ŒConcurrentHashMapæŠ›å¼ƒäº†åŸæœ‰çš„ Segment åˆ†æ®µé”ï¼Œè€Œ<strong>é‡‡ç”¨äº† CAS + synchronized æ¥ä¿è¯å¹¶å‘å®‰å…¨æ€§</strong>ã€‚</p>\n<p>æ’å…¥å…ƒç´ è¿‡ç¨‹ï¼š</p>\n<p>å¦‚æœç›¸åº”ä½ç½®çš„Nodeè¿˜æ²¡æœ‰åˆå§‹åŒ–ï¼Œåˆ™è°ƒç”¨CASæ’å…¥ç›¸åº”çš„æ•°æ®ï¼›</p>\n<p>å¦‚æœç›¸åº”ä½ç½®çš„Nodeä¸ä¸ºç©ºï¼Œåˆ™å¯¹è¯¥èŠ‚ç‚¹åŠ synchronizedé”è¿›è¡Œæ’å…¥æˆ–æ›´æ–°æ“ä½œã€‚</p>\n<h3 id=\"CopyOnWriteArrayList\"><a href=\"#CopyOnWriteArrayList\" class=\"headerlink\" title=\"CopyOnWriteArrayList\"></a>CopyOnWriteArrayList</h3><p>CopyOnWriteå®¹å™¨å³<strong>å†™æ—¶å¤åˆ¶çš„å®¹å™¨</strong>ï¼Œå½“æˆ‘ä»¬å¾€ä¸€ä¸ªå®¹å™¨ä¸­æ·»åŠ å…ƒç´ çš„æ—¶å€™ï¼Œä¸ç›´æ¥å¾€å®¹å™¨ä¸­æ·»åŠ ï¼Œè€Œæ˜¯å°†å½“å‰å®¹å™¨è¿›è¡Œ copyï¼Œå¤åˆ¶å‡ºæ¥ä¸€ä¸ªæ–°çš„å®¹å™¨ï¼Œç„¶åå‘æ–°å®¹å™¨ä¸­æ·»åŠ æˆ‘ä»¬éœ€è¦çš„å…ƒç´ ï¼Œæœ€åå°†åŸå®¹å™¨çš„å¼•ç”¨æŒ‡å‘æ–°å®¹å™¨ã€‚</p>\n<p><strong>CopyOnWriteArrayList çš„ä½¿ç”¨åœºæ™¯</strong></p>\n<p>é€šè¿‡æºç åˆ†æï¼Œæˆ‘ä»¬çœ‹å‡ºå®ƒçš„ä¼˜ç¼ºç‚¹æ¯”è¾ƒæ˜æ˜¾ï¼Œæ‰€ä»¥ä½¿ç”¨åœºæ™¯ä¹Ÿå°±æ¯”è¾ƒæ˜æ˜¾ã€‚å°±æ˜¯åˆé€‚è¯»å¤šå†™å°‘çš„åœºæ™¯ã€‚</p>\n<p><strong>CopyOnWriteArrayList çš„ç¼ºç‚¹</strong></p>\n<ol>\n<li>ç”±äºå†™æ“ä½œçš„æ—¶å€™ï¼Œéœ€è¦æ‹·è´æ•°ç»„ï¼Œä¼šæ¶ˆè€—å†…å­˜ï¼Œå¦‚æœåŸæ•°ç»„çš„å†…å®¹æ¯”è¾ƒå¤šçš„æƒ…å†µä¸‹ï¼Œå¯èƒ½å¯¼è‡´ young gc æˆ–è€… full gcã€‚</li>\n<li><strong>ä¸èƒ½ç”¨äºå®æ—¶è¯»çš„åœºæ™¯</strong>ï¼Œåƒæ‹·è´æ•°ç»„ã€æ–°å¢å…ƒç´ éƒ½éœ€è¦æ—¶é—´ï¼Œæ‰€ä»¥è°ƒç”¨ä¸€ä¸ª set æ“ä½œåï¼Œ<strong>è¯»å–åˆ°æ•°æ®å¯èƒ½è¿˜æ˜¯æ—§çš„</strong>ï¼Œè™½ç„¶ CopyOnWriteArrayList èƒ½åšåˆ°æœ€ç»ˆä¸€è‡´æ€§,ä½†æ˜¯è¿˜æ˜¯æ²¡æ³•æ»¡è¶³å®æ—¶æ€§è¦æ±‚ã€‚</li>\n</ol>\n<h3 id=\"ThreadLocal\"><a href=\"#ThreadLocal\" class=\"headerlink\" title=\"ThreadLocal\"></a>ThreadLocal</h3><h4 id=\"ThreadLocalçš„æ•°æ®ç»“æ„\"><a href=\"#ThreadLocalçš„æ•°æ®ç»“æ„\" class=\"headerlink\" title=\"ThreadLocalçš„æ•°æ®ç»“æ„\"></a>ThreadLocalçš„æ•°æ®ç»“æ„</h4><img src=\"https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/TyporaNotesthreadlocal%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84.a0bfadf8.png\" alt=\"ThreadLocalæ•°æ®ç»“æ„\" style=\"zoom: 67%;\" />\n\n<p>æ¯ä¸ªçº¿ç¨‹ Thread ä¸­æœ‰ä¸€ä¸ªç±»å‹ä¸º ThreadLocal.ThreadLocalMap çš„å®ä¾‹å˜é‡ threadLocalsï¼Œè¯¥å®ä¾‹å˜é‡ä¸­æ¯ä¸ª entryä¸º &lt;threadLocalçš„å¼±å¼•ç”¨ï¼Œvalueä¸ºå¼ºå¼•ç”¨&gt; çš„æ˜ å°„ï¼Œæ¯ä¸ªçº¿ç¨‹å¾€ threadLocal ä¸­å¯¹ value è¿›è¡Œæ“ä½œæ—¶ï¼Œéƒ½æ˜¯åœ¨è‡ªå·±çº¿ç¨‹ç§æœ‰çš„ threadLocalMap ä¸­è¿›è¡Œæ“ä½œï¼Œä»è€Œè¾¾åˆ°çº¿ç¨‹éš”ç¦»ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">ThreadLocalDemo</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// private static final ThreadLocal&lt;Integer&gt; threadLocal = new ThreadLocal&lt;Integer&gt;()&#123;</span></span><br><span class=\"line\">    <span class=\"comment\">//     @Override</span></span><br><span class=\"line\">    <span class=\"comment\">//     protected Integer initialValue() &#123;</span></span><br><span class=\"line\">    <span class=\"comment\">//         return 0;</span></span><br><span class=\"line\">    <span class=\"comment\">//     &#125;</span></span><br><span class=\"line\">    <span class=\"comment\">// &#125;;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> ThreadLocal&lt;Integer&gt; threadLocal = ThreadLocal.withInitial(() -&gt; <span class=\"number\">0</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>; i &lt; <span class=\"number\">2</span>; i++) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">new</span> <span class=\"title class_\">Thread</span>(() -&gt; &#123;</span><br><span class=\"line\">                <span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">j</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>; j &lt; <span class=\"number\">5</span>; j++) &#123;</span><br><span class=\"line\">                    <span class=\"type\">Integer</span> <span class=\"variable\">val</span> <span class=\"operator\">=</span> threadLocal.get();</span><br><span class=\"line\">                    threadLocal.set(++val);</span><br><span class=\"line\">                    System.out.println(Thread.currentThread().getName() + <span class=\"string\">&quot; ---- &quot;</span> + val);</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;, <span class=\"string\">&quot;Thread-&quot;</span> + i).start();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            Thread.sleep(<span class=\"number\">10</span>);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (InterruptedException e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        System.out.println(Thread.currentThread().getName() + <span class=\"string\">&quot; ---- &quot;</span> + threadLocal.get());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>æ‰“å°ç»“æœï¼šå¯åŠ¨äº† 2 ä¸ªçº¿ç¨‹ï¼Œæ¯ä¸ªçº¿ç¨‹æœ€åéƒ½æ‰“å°åˆ° 5ï¼Œ æœ€åthreadLocal.getä»ç„¶æ˜¯0</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Thread-<span class=\"number\">1</span> ---- <span class=\"number\">1</span></span><br><span class=\"line\">Thread-<span class=\"number\">0</span> ---- <span class=\"number\">1</span></span><br><span class=\"line\">Thread-<span class=\"number\">1</span> ---- <span class=\"number\">2</span></span><br><span class=\"line\">Thread-<span class=\"number\">0</span> ---- <span class=\"number\">2</span></span><br><span class=\"line\">Thread-<span class=\"number\">1</span> ---- <span class=\"number\">3</span></span><br><span class=\"line\">Thread-<span class=\"number\">1</span> ---- <span class=\"number\">4</span></span><br><span class=\"line\">Thread-<span class=\"number\">1</span> ---- <span class=\"number\">5</span></span><br><span class=\"line\">Thread-<span class=\"number\">0</span> ---- <span class=\"number\">3</span></span><br><span class=\"line\">Thread-<span class=\"number\">0</span> ---- <span class=\"number\">4</span></span><br><span class=\"line\">Thread-<span class=\"number\">0</span> ---- <span class=\"number\">5</span></span><br><span class=\"line\">main ---- <span class=\"number\">0</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"ThreadLocalå†…å­˜æ³„æ¼\"><a href=\"#ThreadLocalå†…å­˜æ³„æ¼\" class=\"headerlink\" title=\"ThreadLocalå†…å­˜æ³„æ¼\"></a>ThreadLocalå†…å­˜æ³„æ¼</h3><h4 id=\"ThreadLocalé€ æˆå†…å­˜æ³„æ¼çš„åŸå› ï¼Ÿ\"><a href=\"#ThreadLocalé€ æˆå†…å­˜æ³„æ¼çš„åŸå› ï¼Ÿ\" class=\"headerlink\" title=\"ThreadLocalé€ æˆå†…å­˜æ³„æ¼çš„åŸå› ï¼Ÿ\"></a>ThreadLocalé€ æˆå†…å­˜æ³„æ¼çš„åŸå› ï¼Ÿ</h4><p>ThreadLocalMap ä¸­ä½¿ç”¨çš„ key ä¸º ThreadLocal çš„å¼±å¼•ç”¨,è€Œ value æ˜¯å¼ºå¼•ç”¨ã€‚æ‰€ä»¥ï¼Œå¦‚æœ ThreadLocal æ²¡æœ‰è¢«å¤–éƒ¨å¼ºå¼•ç”¨çš„æƒ…å†µä¸‹ï¼Œåœ¨åƒåœ¾å›æ”¶çš„æ—¶å€™ï¼Œkey ä¼šè¢«æ¸…ç†æ‰ï¼Œè€Œ value ä¸ä¼šè¢«æ¸…ç†æ‰ã€‚è¿™æ ·ä¸€æ¥ï¼ŒThreadLocalMap ä¸­å°±ä¼šå‡ºç° key ä¸º null çš„ Entryã€‚å‡å¦‚æˆ‘ä»¬ä¸åšä»»ä½•æªæ–½çš„è¯ï¼Œvalue æ°¸è¿œæ— æ³•è¢« GC å›æ”¶ï¼Œè¿™ä¸ªæ—¶å€™å°±å¯èƒ½ä¼šäº§ç”Ÿå†…å­˜æ³„éœ²ã€‚ThreadLocalMap å®ç°ä¸­å·²ç»è€ƒè™‘äº†è¿™ç§æƒ…å†µï¼Œæ¯æ¬¡ä½¿ç”¨å®Œ ThreadLocal åï¼Œéƒ½è°ƒç”¨å®ƒçš„remove()æ–¹æ³•ï¼Œæ¸…ç†æ‰ key ä¸º null çš„è®°å½•ã€‚</p>\n<h3 id=\"BlockingQueue\"><a href=\"#BlockingQueue\" class=\"headerlink\" title=\"BlockingQueue\"></a>BlockingQueue</h3><p>é˜»å¡é˜Ÿåˆ—ï¼ˆBlockingQueueï¼‰æ˜¯ä¸€ä¸ªæ”¯æŒä¸¤ä¸ªé™„åŠ æ“ä½œçš„é˜Ÿåˆ—ã€‚</p>\n<p>åœ¨é˜Ÿåˆ—ä¸ºç©ºæ—¶ï¼Œè·å–å…ƒç´ çš„çº¿ç¨‹ä¼šç­‰å¾…é˜Ÿåˆ—å˜ä¸ºéç©ºã€‚å½“é˜Ÿåˆ—æ»¡æ—¶ï¼Œå­˜å‚¨å…ƒç´ çš„çº¿ç¨‹ä¼šç­‰å¾…é˜Ÿåˆ—å¯ç”¨ã€‚</p>\n<p>é˜»å¡é˜Ÿåˆ—å¸¸ç”¨äºç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…çš„åœºæ™¯ï¼Œç”Ÿäº§è€…æ˜¯å¾€é˜Ÿåˆ—é‡Œæ·»åŠ å…ƒç´ çš„çº¿ç¨‹ï¼Œæ¶ˆè´¹è€…æ˜¯ä»é˜Ÿåˆ—é‡Œæ‹¿å…ƒç´ çš„çº¿ç¨‹ã€‚é˜»å¡é˜Ÿåˆ—å°±æ˜¯ç”Ÿäº§è€…å­˜æ”¾å…ƒç´ çš„å®¹å™¨ï¼Œè€Œæ¶ˆè´¹è€…ä¹Ÿåªä»å®¹å™¨é‡Œæ‹¿å…ƒç´ ã€‚</p>\n<p>JDK7 æä¾›äº† 7 ä¸ªé˜»å¡é˜Ÿåˆ—ã€‚åˆ†åˆ«æ˜¯ï¼š</p>\n<blockquote>\n<p>ArrayBlockingQueue ï¼šä¸€ä¸ªç”±æ•°ç»„ç»“æ„ç»„æˆçš„æœ‰ç•Œé˜»å¡é˜Ÿåˆ—ã€‚<br>LinkedBlockingQueue ï¼šä¸€ä¸ªç”±é“¾è¡¨ç»“æ„ç»„æˆçš„æœ‰ç•Œé˜»å¡é˜Ÿåˆ—ã€‚<br>PriorityBlockingQueue ï¼šä¸€ä¸ªæ”¯æŒä¼˜å…ˆçº§æ’åºçš„æ— ç•Œé˜»å¡é˜Ÿåˆ—ã€‚<br>DelayQueueï¼šä¸€ä¸ªä½¿ç”¨ä¼˜å…ˆçº§é˜Ÿåˆ—å®ç°çš„æ— ç•Œé˜»å¡é˜Ÿåˆ—ã€‚<br>SynchronousQueueï¼šä¸€ä¸ªä¸å­˜å‚¨å…ƒç´ çš„é˜»å¡é˜Ÿåˆ—ã€‚<br>LinkedTransferQueueï¼šä¸€ä¸ªç”±é“¾è¡¨ç»“æ„ç»„æˆçš„æ— ç•Œé˜»å¡é˜Ÿåˆ—ã€‚<br>LinkedBlockingDequeï¼šä¸€ä¸ªç”±é“¾è¡¨ç»“æ„ç»„æˆçš„åŒå‘é˜»å¡é˜Ÿåˆ—ã€‚</p>\n</blockquote>\n<p>Java 5 ä¹‹å‰å®ç°åŒæ­¥å­˜å–æ—¶ï¼Œå¯ä»¥ä½¿ç”¨æ™®é€šçš„ä¸€ä¸ªé›†åˆï¼Œç„¶ååœ¨ä½¿ç”¨çº¿ç¨‹çš„åä½œå’Œçº¿ç¨‹åŒæ­¥å¯ä»¥å®ç°ç”Ÿäº§è€…ï¼Œæ¶ˆè´¹è€…æ¨¡å¼ï¼Œä¸»è¦çš„æŠ€æœ¯å°±æ˜¯ç”¨å¥½ waitï¼Œnotifyï¼ŒnotifyAllï¼Œsynchronized è¿™äº›å…³é”®å­—ã€‚è€Œåœ¨ Java 5 ä¹‹åï¼Œå¯ä»¥ä½¿ç”¨é˜»å¡é˜Ÿåˆ—æ¥å®ç°ï¼Œæ­¤æ–¹å¼å¤§å¤§ç®€å°‘äº†ä»£ç é‡ï¼Œä½¿å¾—å¤šçº¿ç¨‹ç¼–ç¨‹æ›´åŠ å®¹æ˜“ï¼Œå®‰å…¨æ–¹é¢ä¹Ÿæœ‰ä¿éšœã€‚</p>\n<p>BlockingQueue æ¥å£æ˜¯ Queue çš„å­æ¥å£ï¼Œå®ƒçš„ä¸»è¦ç”¨é€”å¹¶ä¸æ˜¯ä½œä¸ºå®¹å™¨ï¼Œè€Œæ˜¯ä½œä¸ºçº¿ç¨‹åŒæ­¥çš„çš„å·¥å…·ï¼Œå› æ­¤ä»–å…·æœ‰ä¸€ä¸ªå¾ˆæ˜æ˜¾çš„ç‰¹æ€§ï¼Œ<strong>å½“ç”Ÿäº§è€…çº¿ç¨‹è¯•å›¾å‘ BlockingQueue æ”¾å…¥å…ƒç´ æ—¶ï¼Œå¦‚æœé˜Ÿåˆ—å·²æ»¡ï¼Œåˆ™çº¿ç¨‹è¢«é˜»å¡ï¼Œå½“æ¶ˆè´¹è€…çº¿ç¨‹è¯•å›¾ä»ä¸­å–å‡ºä¸€ä¸ªå…ƒç´ æ—¶ï¼Œå¦‚æœé˜Ÿåˆ—ä¸ºç©ºï¼Œåˆ™è¯¥çº¿ç¨‹ä¼šè¢«é˜»å¡</strong>ï¼Œæ­£æ˜¯å› ä¸ºå®ƒæ‰€å…·æœ‰è¿™ä¸ªç‰¹æ€§ï¼Œæ‰€ä»¥åœ¨ç¨‹åºä¸­å¤šä¸ªçº¿ç¨‹äº¤æ›¿å‘ BlockingQueue ä¸­æ”¾å…¥å…ƒç´ ï¼Œå–å‡ºå…ƒç´ ï¼Œå®ƒå¯ä»¥å¾ˆå¥½çš„æ§åˆ¶çº¿ç¨‹ä¹‹é—´çš„é€šä¿¡ã€‚</p>\n<h2 id=\"çº¿ç¨‹æ± \"><a href=\"#çº¿ç¨‹æ± \" class=\"headerlink\" title=\"çº¿ç¨‹æ± \"></a>çº¿ç¨‹æ± </h2><h3 id=\"Executors-åˆ›å»ºå››ç§å¸¸è§çº¿ç¨‹æ± \"><a href=\"#Executors-åˆ›å»ºå››ç§å¸¸è§çº¿ç¨‹æ± \" class=\"headerlink\" title=\"Executors åˆ›å»ºå››ç§å¸¸è§çº¿ç¨‹æ± \"></a>Executors åˆ›å»ºå››ç§å¸¸è§çº¿ç¨‹æ± </h3><h4 id=\"ä»€ä¹ˆæ˜¯çº¿ç¨‹æ± ï¼Ÿæœ‰å“ªå‡ ç§åˆ›å»ºæ–¹å¼ï¼Ÿ\"><a href=\"#ä»€ä¹ˆæ˜¯çº¿ç¨‹æ± ï¼Ÿæœ‰å“ªå‡ ç§åˆ›å»ºæ–¹å¼ï¼Ÿ\" class=\"headerlink\" title=\"ä»€ä¹ˆæ˜¯çº¿ç¨‹æ± ï¼Ÿæœ‰å“ªå‡ ç§åˆ›å»ºæ–¹å¼ï¼Ÿ\"></a>ä»€ä¹ˆæ˜¯çº¿ç¨‹æ± ï¼Ÿæœ‰å“ªå‡ ç§åˆ›å»ºæ–¹å¼ï¼Ÿ</h4><blockquote>\n<p>æ± åŒ–æŠ€æœ¯çš„æ€æƒ³ä¸»è¦æ˜¯ä¸ºäº†å‡å°‘æ¯æ¬¡è·å–èµ„æºçš„æ¶ˆè€—ï¼Œæé«˜å¯¹èµ„æºçš„åˆ©ç”¨ç‡ã€‚</p>\n</blockquote>\n<p>åœ¨é¢å‘å¯¹è±¡ç¼–ç¨‹ä¸­ï¼Œåˆ›å»ºå’Œé”€æ¯å¯¹è±¡æ˜¯å¾ˆè´¹æ—¶é—´çš„ï¼Œå› ä¸ºåˆ›å»ºä¸€ä¸ªå¯¹è±¡è¦è·å–å†…å­˜èµ„æºæˆ–è€…å…¶å®ƒæ›´å¤šèµ„æºã€‚åœ¨ Java ä¸­æ›´æ˜¯å¦‚æ­¤ï¼Œè™šæ‹Ÿæœºå°†è¯•å›¾è·Ÿè¸ªæ¯ä¸€ä¸ªå¯¹è±¡ï¼Œä»¥ä¾¿èƒ½å¤Ÿåœ¨å¯¹è±¡é”€æ¯åè¿›è¡Œåƒåœ¾å›æ”¶ã€‚æ‰€ä»¥æé«˜æœåŠ¡ç¨‹åºæ•ˆç‡çš„ä¸€ä¸ªæ‰‹æ®µå°±æ˜¯<strong>å°½å¯èƒ½å‡å°‘åˆ›å»ºå’Œé”€æ¯å¯¹è±¡çš„æ¬¡æ•°</strong>ï¼Œç‰¹åˆ«æ˜¯ä¸€äº›å¾ˆè€—èµ„æºçš„å¯¹è±¡åˆ›å»ºå’Œé”€æ¯ï¼Œè¿™å°±æ˜¯â€æ± åŒ–èµ„æºâ€æŠ€æœ¯äº§ç”Ÿçš„åŸå› ã€‚</p>\n<p>çº¿ç¨‹æ± é¡¾åæ€ä¹‰å°±æ˜¯äº‹å…ˆåˆ›å»ºè‹¥å¹²ä¸ªå¯æ‰§è¡Œçš„çº¿ç¨‹æ”¾å…¥ä¸€ä¸ªæ± ï¼ˆå®¹å™¨ï¼‰ä¸­ï¼Œéœ€è¦çš„æ—¶å€™ä»æ± ä¸­è·å–çº¿ç¨‹ä¸ç”¨è‡ªè¡Œåˆ›å»ºï¼Œä½¿ç”¨å®Œæ¯•ä¸éœ€è¦é”€æ¯çº¿ç¨‹è€Œæ˜¯æ”¾å›æ± ä¸­ï¼Œä»è€Œå‡å°‘åˆ›å»ºå’Œé”€æ¯çº¿ç¨‹å¯¹è±¡çš„å¼€é”€ã€‚Java 5+ä¸­çš„ Executor æ¥å£å®šä¹‰ä¸€ä¸ªæ‰§è¡Œçº¿ç¨‹çš„å·¥å…·ã€‚å®ƒçš„å­ç±»å‹å³çº¿ç¨‹æ± æ¥å£æ˜¯ ExecutorServiceã€‚è¦é…ç½®ä¸€ä¸ªçº¿ç¨‹æ± æ˜¯æ¯”è¾ƒå¤æ‚çš„ï¼Œå°¤å…¶æ˜¯å¯¹äºçº¿ç¨‹æ± çš„åŸç†ä¸æ˜¯å¾ˆæ¸…æ¥šçš„æƒ…å†µä¸‹ï¼Œå› æ­¤åœ¨å·¥å…·ç±» Executors é¢æä¾›äº†ä¸€äº›é™æ€å·¥å‚æ–¹æ³•ï¼Œç”Ÿæˆä¸€äº›å¸¸ç”¨çš„çº¿ç¨‹æ± ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>\n<p>ï¼ˆ1ï¼‰Executors.newSingleThreadExecutorï¼š<code>1, 1, new LinkedBlockingQueue</code>ã€‚æ‰€æœ‰ä»»åŠ¡æŒ‰ç…§<strong>å…ˆæ¥å…ˆæ‰§è¡Œ</strong>çš„é¡ºåºæ‰§è¡Œã€‚å¦‚æœè¿™ä¸ªå”¯ä¸€çš„çº¿ç¨‹ä¸ç©ºé—²ï¼Œé‚£ä¹ˆæ–°æ¥çš„ä»»åŠ¡ä¼šå­˜å‚¨åœ¨ä»»åŠ¡é˜Ÿåˆ—é‡Œç­‰å¾…æ‰§è¡Œã€‚ï¼ˆç”±äºé˜»å¡é˜Ÿåˆ—é»˜è®¤å¤§å°ä¸ºInteger.MAX_VALUEï¼Œå› æ­¤å¯èƒ½OOMï¼‰</p>\n<p>ï¼ˆ2ï¼‰Executors.newFixedThreadPoolï¼š<code>nCoreThreads, nCoreThreads, new LinkedBlockingQueue</code>ï¼Œæ‰€ä»¥åªèƒ½åˆ›å»ºæ ¸å¿ƒçº¿ç¨‹ï¼Œä¸èƒ½åˆ›å»ºéæ ¸å¿ƒçº¿ç¨‹ã€‚å› ä¸º LinkedBlockingQueue çš„é»˜è®¤å¤§å°æ˜¯ Integer.MAX_VALUEï¼Œæ•…å¦‚æœæ ¸å¿ƒçº¿ç¨‹ç©ºé—²ï¼Œåˆ™äº¤ç»™æ ¸å¿ƒçº¿ç¨‹å¤„ç†ï¼›å¦‚æœæ ¸å¿ƒçº¿ç¨‹ä¸ç©ºé—²ï¼Œåˆ™å…¥åˆ—ç­‰å¾…ï¼Œç›´åˆ°æ ¸å¿ƒçº¿ç¨‹ç©ºé—²ã€‚ï¼ˆç”±äºé˜»å¡é˜Ÿåˆ—é»˜è®¤å¤§å°ä¸ºInteger.MAX_VALUEï¼Œå› æ­¤å¯èƒ½OOMï¼‰</p>\n<p>ï¼ˆ3ï¼‰ Executors.newCachedThreadPoolï¼š<code>0, Integer.MAX_VALUE</code>ï¼Œä¸åˆ›å»ºæ ¸å¿ƒçº¿ç¨‹ï¼Œçº¿ç¨‹æ± æœ€å¤§ä¸ºInteger.MAX_VALUEã€‚ï¼ˆçº¿ç¨‹æ± å¤ªå¤§å¯¼è‡´OOMï¼‰</p>\n<p>newCachedThreadPool å’Œ newFixedThreadPool éƒ½å‡ ä¹ä¸ä¼šè§¦å‘æ‹’ç»ç­–ç•¥ï¼Œä½†æ˜¯åŸç†ä¸åŒã€‚<br>FixedThreadPool æ˜¯å› ä¸ºé˜»å¡é˜Ÿåˆ—å¯ä»¥å¾ˆå¤§ï¼ˆæœ€å¤§ä¸ºIntegeræœ€å¤§å€¼ï¼‰ï¼Œæ•…å‡ ä¹ä¸ä¼šè§¦å‘æ‹’ç»ç­–ç•¥ï¼›CachedThreadPool æ˜¯å› ä¸ºçº¿ç¨‹æ± å¾ˆå¤§ï¼ˆæœ€å¤§ä¸ºIntegeræœ€å¤§å€¼ï¼‰ï¼Œå‡ ä¹ä¸ä¼šå¯¼è‡´çº¿ç¨‹æ•°é‡å¤§äºæœ€å¤§çº¿ç¨‹æ•°ï¼Œæ•…å‡ ä¹ä¸ä¼šè§¦å‘æ‹’ç»ç­–ç•¥ã€‚</p>\n<p>ï¼ˆ4ï¼‰Executors.newScheduledThreadPoolï¼š<code>nCoreThreads, Integer.MAX_VALUE</code>åˆ›å»ºä¸€ä¸ªå¤§å°æ— é™çš„çº¿ç¨‹æ± ã€‚æ­¤çº¿ç¨‹æ± æ”¯æŒå®šæ—¶ä»¥åŠå‘¨æœŸæ€§æ‰§è¡Œä»»åŠ¡çš„éœ€æ±‚ã€‚</p>\n<h4 id=\"çº¿ç¨‹æ± æœ‰ä»€ä¹ˆä¼˜ç‚¹ï¼Ÿ\"><a href=\"#çº¿ç¨‹æ± æœ‰ä»€ä¹ˆä¼˜ç‚¹ï¼Ÿ\" class=\"headerlink\" title=\"çº¿ç¨‹æ± æœ‰ä»€ä¹ˆä¼˜ç‚¹ï¼Ÿ\"></a>çº¿ç¨‹æ± æœ‰ä»€ä¹ˆä¼˜ç‚¹ï¼Ÿ</h4><ul>\n<li>é™ä½èµ„æºæ¶ˆè€—ï¼šé‡ç”¨å­˜åœ¨çš„çº¿ç¨‹ï¼Œå‡å°‘å¯¹è±¡åˆ›å»ºé”€æ¯çš„å¼€é”€ï¼›</li>\n<li>æé«˜å“åº”é€Ÿåº¦ï¼šå½“ä»»åŠ¡åˆ°è¾¾æ—¶ï¼Œä»»åŠ¡å¯ä»¥ä¸éœ€è¦çš„ç­‰åˆ°çº¿ç¨‹åˆ›å»ºå°±èƒ½ç«‹å³æ‰§è¡Œï¼›</li>\n<li>æé«˜çº¿ç¨‹çš„å¯ç®¡ç†æ€§ï¼šä½¿ç”¨çº¿ç¨‹æ± å¯ä»¥è¿›è¡Œç»Ÿä¸€çš„åˆ†é…ï¼Œè°ƒä¼˜å’Œç›‘æ§ã€‚</li>\n</ul>\n<h4 id=\"çº¿ç¨‹æ± éƒ½æœ‰å“ªäº›çŠ¶æ€ï¼Ÿ\"><a href=\"#çº¿ç¨‹æ± éƒ½æœ‰å“ªäº›çŠ¶æ€ï¼Ÿ\" class=\"headerlink\" title=\"çº¿ç¨‹æ± éƒ½æœ‰å“ªäº›çŠ¶æ€ï¼Ÿ\"></a>çº¿ç¨‹æ± éƒ½æœ‰å“ªäº›çŠ¶æ€ï¼Ÿ</h4><ul>\n<li>RUNNINGï¼šæ¥å—æ–°çš„ä»»åŠ¡æäº¤ï¼Œå¤„ç†ç­‰å¾…é˜Ÿåˆ—ä¸­çš„ä»»åŠ¡ï¼›</li>\n<li>SHUTDOWNï¼šä¸æ¥å—æ–°çš„ä»»åŠ¡æäº¤ï¼Œä½†æ˜¯ä¼šç»§ç»­å¤„ç†ç­‰å¾…é˜Ÿåˆ—ä¸­çš„ä»»åŠ¡ï¼›</li>\n<li>STOPï¼šä¸æ¥å—æ–°çš„ä»»åŠ¡æäº¤ï¼Œä¸å†å¤„ç†ç­‰å¾…é˜Ÿåˆ—ä¸­çš„ä»»åŠ¡ï¼Œä¸­æ–­æ­£åœ¨æ‰§è¡Œä»»åŠ¡çš„çº¿ç¨‹ï¼›</li>\n<li>TIDYINGï¼šæ‰€æœ‰çš„ä»»åŠ¡éƒ½é”€æ¯äº†ï¼ŒworkCount ä¸º 0ï¼Œçº¿ç¨‹æ± çš„çŠ¶æ€åœ¨è½¬æ¢ä¸º TIDYING çŠ¶æ€æ—¶ï¼Œä¼šæ‰§è¡Œé’©å­æ–¹æ³• terminated()ï¼›</li>\n<li>TERMINATEDï¼šterminated()æ–¹æ³•ç»“æŸåï¼Œçº¿ç¨‹æ± çš„çŠ¶æ€å°±ä¼šå˜æˆè¿™ä¸ªã€‚</li>\n</ul>\n<h4 id=\"åœ¨-Java-ä¸­-Executor-å’Œ-Executors-çš„åŒºåˆ«ï¼Ÿ\"><a href=\"#åœ¨-Java-ä¸­-Executor-å’Œ-Executors-çš„åŒºåˆ«ï¼Ÿ\" class=\"headerlink\" title=\"åœ¨ Java ä¸­ Executor å’Œ Executors çš„åŒºåˆ«ï¼Ÿ\"></a>åœ¨ Java ä¸­ Executor å’Œ Executors çš„åŒºåˆ«ï¼Ÿ</h4><ul>\n<li><strong>Executors å·¥å…·ç±»</strong>çš„ä¸åŒæ–¹æ³•æŒ‰ç…§æˆ‘ä»¬çš„éœ€æ±‚<strong>åˆ›å»ºäº†ä¸åŒçš„çº¿ç¨‹æ± </strong>ï¼Œæ¥æ»¡è¶³ä¸šåŠ¡çš„éœ€æ±‚ï¼›</li>\n<li><strong>Executor æ¥å£å¯¹è±¡æ‰§è¡Œæˆ‘ä»¬çš„çº¿ç¨‹ä»»åŠ¡</strong>ï¼ŒExecutorService æ¥å£ç»§æ‰¿äº† Executor æ¥å£å¹¶è¿›è¡Œäº†æ‰©å±•ï¼Œæä¾›äº†æ›´å¤šçš„æ–¹æ³•æˆ‘ä»¬èƒ½è·å¾—ä»»åŠ¡æ‰§è¡Œçš„çŠ¶æ€å¹¶ä¸”å¯ä»¥è·å–ä»»åŠ¡çš„è¿”å›å€¼ã€‚</li>\n</ul>\n<h4 id=\"çº¿ç¨‹æ± ä¸­-submit-å’Œ-execute-æ–¹æ³•æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\"><a href=\"#çº¿ç¨‹æ± ä¸­-submit-å’Œ-execute-æ–¹æ³•æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\" class=\"headerlink\" title=\"çº¿ç¨‹æ± ä¸­ submit() å’Œ execute() æ–¹æ³•æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\"></a>çº¿ç¨‹æ± ä¸­ submit() å’Œ execute() æ–¹æ³•æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h4><p>æ¥æ”¶å‚æ•°ï¼šsubmit() å¯ä»¥æ‰§è¡Œ Runnable å’Œ Callable ç±»å‹çš„ä»»åŠ¡ï¼Œè€Œexecute()åªèƒ½æ‰§è¡Œ Runnable ç±»å‹çš„ä»»åŠ¡ï¼›</p>\n<p>è¿”å›å€¼ï¼šsubmit() æ–¹æ³•å¯ä»¥è¿”å›æŒæœ‰è®¡ç®—ç»“æœçš„ Future å¯¹è±¡ï¼Œè€Œ execute() æ²¡æœ‰ï¼›</p>\n<p>å¼‚å¸¸å¤„ç†ï¼šsubmit() æ–¹ä¾¿ Exception å¤„ç†ã€‚</p>\n<h3 id=\"ThreadPoolExecutor-è‡ªå®šä¹‰çº¿ç¨‹æ± \"><a href=\"#ThreadPoolExecutor-è‡ªå®šä¹‰çº¿ç¨‹æ± \" class=\"headerlink\" title=\"ThreadPoolExecutor è‡ªå®šä¹‰çº¿ç¨‹æ± \"></a>ThreadPoolExecutor è‡ªå®šä¹‰çº¿ç¨‹æ± </h3><h4 id=\"Executors\"><a href=\"#Executors\" class=\"headerlink\" title=\"Executors\"></a>Executors</h4><p>ã€Šé˜¿é‡Œå·´å·´Javaå¼€å‘æ‰‹å†Œã€‹ä¸­å¼ºåˆ¶çº¿ç¨‹æ± ä¸å…è®¸ä½¿ç”¨ Executors å»åˆ›å»ºï¼Œè€Œæ˜¯<strong>é€šè¿‡ ThreadPoolExecutor çš„æ–¹å¼</strong>ï¼Œè¿™æ ·çš„å¤„ç†æ–¹å¼è®©å†™çš„åŒå­¦<strong>æ›´åŠ æ˜ç¡®çº¿ç¨‹æ± çš„è¿è¡Œè§„åˆ™ï¼Œè§„é¿èµ„æºè€—å°½çš„é£é™©</strong></p>\n<p>Executors å„ä¸ªæ–¹æ³•çš„å¼Šç«¯ï¼š</p>\n<ul>\n<li><p>newSingleThreadExecutor å’Œ newFixedThreadPool :<br>  <code>0, 0</code>å’Œ <code>n, n</code> ï¼Œä½†æ˜¯ä½¿ç”¨ LinkedBlockingQueueï¼Œæœ€å¤§å¯ä»¥ä¸º Integer.MAX_VALUE</p>\n<p>  ä¸»è¦é—®é¢˜æ˜¯å †ç§¯çš„è¯·æ±‚å¤„ç†é˜Ÿåˆ—å¯èƒ½ä¼šè€—è´¹éå¸¸å¤§çš„å†…å­˜ï¼Œç”šè‡³ OOMã€‚</p>\n</li>\n<li><p>newCachedThreadPool å’Œ newScheduledThreadPool:<br>  <code>0, Integer.MAX_VALUE</code> å’Œ <code>n, Integer.MAX_VALUE</code></p>\n<p>  ä¸»è¦é—®é¢˜æ˜¯çº¿ç¨‹æ•°æœ€å¤§æ•°æ˜¯ Integer.MAX_VALUEï¼Œå¯èƒ½ä¼šåˆ›å»ºæ•°é‡éå¸¸å¤šçš„çº¿ç¨‹ï¼Œç”šè‡³ OOM</p>\n</li>\n</ul>\n<p>ThreaPoolExecutoråˆ›å»ºçº¿ç¨‹æ± æ–¹å¼åªæœ‰ä¸€ç§ï¼Œå°±æ˜¯èµ°å®ƒçš„æ„é€ å‡½æ•°ï¼Œå‚æ•°è‡ªå·±æŒ‡å®š</p>\n<h4 id=\"ThreaPoolExecutor\"><a href=\"#ThreaPoolExecutor\" class=\"headerlink\" title=\"ThreaPoolExecutor\"></a>ThreaPoolExecutor</h4><p>åˆ›å»ºçº¿ç¨‹æ± çš„æ–¹å¼æœ‰å¤šç§ï¼Œè¿™é‡Œä½ åªéœ€è¦ç­” ThreadPoolExecutor å³å¯ã€‚</p>\n<p>ThreadPoolExecutor() æ˜¯æœ€åŸå§‹çš„çº¿ç¨‹æ± åˆ›å»ºï¼Œä¹Ÿæ˜¯é˜¿é‡Œå·´å·´ Java å¼€å‘æ‰‹å†Œä¸­æ˜ç¡®è§„èŒƒçš„åˆ›å»ºçº¿ç¨‹æ± çš„æ–¹å¼ã€‚</p>\n<h4 id=\"ThreadPoolExecutoræ„é€ å‡½æ•°é‡è¦å‚æ•°åˆ†æ\"><a href=\"#ThreadPoolExecutoræ„é€ å‡½æ•°é‡è¦å‚æ•°åˆ†æ\" class=\"headerlink\" title=\"ThreadPoolExecutoræ„é€ å‡½æ•°é‡è¦å‚æ•°åˆ†æ\"></a>ThreadPoolExecutoræ„é€ å‡½æ•°é‡è¦å‚æ•°åˆ†æ</h4><p><strong><code>ThreadPoolExecutor</code></strong> <strong>3 ä¸ªæœ€é‡è¦çš„å‚æ•°ï¼š</strong></p>\n<ul>\n<li><strong><code>corePoolSize</code></strong> ï¼šæ ¸å¿ƒçº¿ç¨‹æ•°ï¼Œçº¿ç¨‹æ•°å®šä¹‰äº†æœ€å°å¯ä»¥åŒæ—¶è¿è¡Œçš„çº¿ç¨‹æ•°é‡</li>\n<li><strong><code>maximumPoolSize</code></strong> ï¼šçº¿ç¨‹æ± ä¸­å…è®¸å­˜åœ¨çš„å·¥ä½œçº¿ç¨‹çš„æœ€å¤§æ•°é‡</li>\n<li>**<code>workQueue</code>**ï¼šå½“æ–°ä»»åŠ¡æ¥çš„æ—¶å€™ä¼šå…ˆåˆ¤æ–­å½“å‰è¿è¡Œçš„çº¿ç¨‹æ•°é‡æ˜¯å¦è¾¾åˆ°æ ¸å¿ƒçº¿ç¨‹æ•°ï¼Œå¦‚æœè¾¾åˆ°çš„è¯ï¼Œä»»åŠ¡å°±ä¼šè¢«å­˜æ”¾åœ¨ç­‰å¾…é˜Ÿåˆ—ä¸­</li>\n</ul>\n<p><code>ThreadPoolExecutor</code>å…¶ä»–å¸¸è§å‚æ•°:</p>\n<ol>\n<li>**<code>keepAliveTime</code>**ï¼šéæ ¸å¿ƒçº¿ç¨‹å¦‚æœå¤„äºé—²ç½®çŠ¶æ€è¶…è¿‡è¯¥å€¼ï¼Œå°±ä¼šè¢«é”€æ¯ã€‚</li>\n<li><strong><code>unit</code></strong> ï¼š<code>keepAliveTime</code> é—²ç½®é”€æ¯æ—¶é•¿çš„æ—¶é—´å•ä½</li>\n<li>**<code>threadFactory</code>**ï¼šä¸ºçº¿ç¨‹æ± æä¾›åˆ›å»ºæ–°çº¿ç¨‹çš„çº¿ç¨‹å·¥å‚</li>\n<li><strong><code>handler</code></strong> ï¼šçº¿ç¨‹æ± ä»»åŠ¡é˜Ÿåˆ—è¶…è¿‡ maxinumPoolSize ä¹‹åçš„æ‹’ç»ç­–ç•¥</li>\n</ol>\n<h4 id=\"ThreadPoolExecutoræ‹’ç»ç­–ç•¥\"><a href=\"#ThreadPoolExecutoræ‹’ç»ç­–ç•¥\" class=\"headerlink\" title=\"ThreadPoolExecutoræ‹’ç»ç­–ç•¥\"></a>ThreadPoolExecutoræ‹’ç»ç­–ç•¥</h4><p><strong><code>ThreadPoolExecutor</code></strong> <strong>æ‹’ç»ç­–ç•¥å®šä¹‰:</strong></p>\n<p>å¦‚æœå½“å‰åŒæ—¶è¿è¡Œçš„çº¿ç¨‹æ•°é‡è¾¾åˆ°æœ€å¤§çº¿ç¨‹æ•°é‡å¹¶ä¸”ç­‰å¾…é˜Ÿåˆ—ä¹Ÿå·²ç»è¢«æ”¾æ»¡æ—¶ï¼Œ<code>ThreadPoolTaskExecutor</code> å®šä¹‰ä¸€äº›ç­–ç•¥:</p>\n<ul>\n<li>**<code>ThreadPoolExecutor.AbortPolicy</code>**ï¼šæŠ›å‡º <code>RejectedExecutionException</code>æ¥æ‹’ç»æ–°ä»»åŠ¡çš„å¤„ç†ã€‚</li>\n<li>**<code>ThreadPoolExecutor.CallerRunsPolicy</code>**ï¼šè°ƒç”¨æ‰§è¡Œè‡ªå·±çš„çº¿ç¨‹è¿è¡Œä»»åŠ¡ã€‚</li>\n<li>**<code>ThreadPoolExecutor.DiscardPolicy</code>**ï¼šä¸å¤„ç†æ–°ä»»åŠ¡ï¼Œç›´æ¥ä¸¢å¼ƒæ‰ã€‚</li>\n<li>**<code>ThreadPoolExecutor.DiscardOldestPolicy</code>**ï¼š æ­¤ç­–ç•¥å°†ä¸¢å¼ƒæœ€æ—©çš„æœªå¤„ç†çš„ä»»åŠ¡è¯·æ±‚ã€‚</li>\n</ul>\n<h4 id=\"ä¸€ä¸ªç®€å•çš„çº¿ç¨‹æ± Demo-Runnable-ThreadPoolExecutor\"><a href=\"#ä¸€ä¸ªç®€å•çš„çº¿ç¨‹æ± Demo-Runnable-ThreadPoolExecutor\" class=\"headerlink\" title=\"ä¸€ä¸ªç®€å•çš„çº¿ç¨‹æ± Demo:Runnable + ThreadPoolExecutor\"></a>ä¸€ä¸ªç®€å•çš„çº¿ç¨‹æ± Demo:<code>Runnable</code> + <code>ThreadPoolExecutor</code></h4><p>çº¿ç¨‹æ± å®ç°åŸç†</p>\n<p><img src=\"https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/TyporaNotesaHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAxOS8xMS8yNS8xNmVhMDQ3NjEyOTVlNzY2.png\" alt=\"çº¿ç¨‹æ± å®ç°åŸç†\"></p>\n<p><strong>æ€»ç»“ä¸€ä¸‹å¤„ç†æµç¨‹</strong></p>\n<ol>\n<li>çº¿ç¨‹æ€»æ•°é‡ &lt; corePoolSizeï¼Œæ— è®ºçº¿ç¨‹æ˜¯å¦ç©ºé—²ï¼Œéƒ½ä¼šæ–°å»ºä¸€ä¸ªæ ¸å¿ƒçº¿ç¨‹æ‰§è¡Œä»»åŠ¡ï¼ˆè®©æ ¸å¿ƒçº¿ç¨‹æ•°é‡å¿«é€Ÿè¾¾åˆ°corePoolSizeï¼Œåœ¨æ ¸å¿ƒçº¿ç¨‹æ•°é‡ &lt; corePoolSizeæ—¶ï¼‰ã€‚<strong>æ³¨æ„ï¼Œè¿™ä¸€æ­¥éœ€è¦è·å¾—å…¨å±€é”ã€‚</strong></li>\n<li>çº¿ç¨‹æ€»æ•°é‡ &gt;&#x3D; corePoolSizeæ—¶ï¼Œæ–°æ¥çš„çº¿ç¨‹ä»»åŠ¡ä¼šè¿›å…¥ç­‰å¾…é˜Ÿåˆ—ä¸­ç­‰å¾…ï¼Œç„¶åç©ºé—²çš„æ ¸å¿ƒçº¿ç¨‹ä¼šä¾æ¬¡å»ç¼“å­˜é˜Ÿåˆ—ä¸­å–ä»»åŠ¡æ¥æ‰§è¡Œï¼ˆä½“ç°äº†<strong>çº¿ç¨‹å¤ç”¨</strong>ï¼‰ã€‚ </li>\n<li>å½“ç­‰å¾…é˜Ÿåˆ—æ»¡äº†ï¼Œè¯´æ˜è¿™ä¸ªæ—¶å€™ä»»åŠ¡å·²ç»å¤šåˆ°çˆ†æ£šï¼Œéœ€è¦ä¸€äº›â€œä¸´æ—¶å·¥â€æ¥æ‰§è¡Œè¿™äº›ä»»åŠ¡äº†ã€‚äºæ˜¯ä¼šåˆ›å»ºéæ ¸å¿ƒçº¿ç¨‹å»æ‰§è¡Œè¿™ä¸ªä»»åŠ¡ã€‚<strong>æ³¨æ„ï¼Œè¿™ä¸€æ­¥éœ€è¦è·å¾—å…¨å±€é”ã€‚</strong></li>\n<li>ç¼“å­˜é˜Ÿåˆ—ä¹‹å‰æ»¡äº†ï¼Œ ç°åœ¨åŠ éæ ¸å¿ƒçº¿ç¨‹ä¸”æ€»çº¿ç¨‹æ•°è¾¾åˆ°äº†maximumPoolSizeï¼Œåˆ™ä¼šé‡‡å–ä¸Šé¢æåˆ°çš„æ‹’ç»ç­–ç•¥è¿›è¡Œå¤„ç†ã€‚</li>\n</ol>\n<p>æ•´ä¸ªè¿‡ç¨‹å¦‚å›¾æ‰€ç¤ºï¼š</p>\n<p>ä¸ºäº†è®©å¤§å®¶æ›´æ¸…æ¥šä¸Šé¢çš„é¢è¯•é¢˜ä¸­çš„ä¸€äº›æ¦‚å¿µï¼Œæˆ‘å†™äº†ä¸€ä¸ªç®€å•çš„çº¿ç¨‹æ±  Demoã€‚</p>\n<p>é¦–å…ˆåˆ›å»ºä¸€ä¸ª <code>Runnable</code> æ¥å£çš„å®ç°ç±»ï¼ˆå½“ç„¶ä¹Ÿå¯ä»¥æ˜¯ <code>Callable</code> æ¥å£ï¼Œæˆ‘ä»¬ä¸Šé¢ä¹Ÿè¯´äº†ä¸¤è€…çš„åŒºåˆ«ã€‚ï¼‰</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> Java.util.Date;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * è¿™æ˜¯ä¸€ä¸ªç®€å•çš„Runnableç±»ï¼Œéœ€è¦å¤§çº¦5ç§’é’Ÿæ¥æ‰§è¡Œå…¶ä»»åŠ¡ã€‚</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">MyRunnable</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">Runnable</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> String command;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"title function_\">MyRunnable</span><span class=\"params\">(String s)</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.command = s;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">run</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        System.out.println(Thread.currentThread().getName() + <span class=\"string\">&quot; Start. Time = &quot;</span> + <span class=\"keyword\">new</span> <span class=\"title class_\">Date</span>());</span><br><span class=\"line\">        processCommand();</span><br><span class=\"line\">        System.out.println(Thread.currentThread().getName() + <span class=\"string\">&quot; End. Time = &quot;</span> + <span class=\"keyword\">new</span> <span class=\"title class_\">Date</span>());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title function_\">processCommand</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            Thread.sleep(<span class=\"number\">5000</span>);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (InterruptedException e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> String <span class=\"title function_\">toString</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"built_in\">this</span>.command;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ç¼–å†™æµ‹è¯•ç¨‹åºï¼Œæˆ‘ä»¬è¿™é‡Œä»¥é˜¿é‡Œå·´å·´æ¨èçš„ä½¿ç”¨ <code>ThreadPoolExecutor</code> æ„é€ å‡½æ•°è‡ªå®šä¹‰å‚æ•°çš„æ–¹å¼æ¥åˆ›å»ºçº¿ç¨‹æ± ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> Java.util.concurrent.ArrayBlockingQueue;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Java.util.concurrent.ThreadPoolExecutor;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Java.util.concurrent.TimeUnit;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">ThreadPoolExecutorDemo</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"type\">int</span> <span class=\"variable\">CORE_POOL_SIZE</span> <span class=\"operator\">=</span> <span class=\"number\">5</span>;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"type\">int</span> <span class=\"variable\">MAX_POOL_SIZE</span> <span class=\"operator\">=</span> <span class=\"number\">10</span>;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"type\">int</span> <span class=\"variable\">QUEUE_CAPACITY</span> <span class=\"operator\">=</span> <span class=\"number\">100</span>;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"type\">Long</span> <span class=\"variable\">KEEP_ALIVE_TIME</span> <span class=\"operator\">=</span> <span class=\"number\">1L</span>;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//ä½¿ç”¨é˜¿é‡Œå·´å·´æ¨èçš„åˆ›å»ºçº¿ç¨‹æ± çš„æ–¹å¼</span></span><br><span class=\"line\">        <span class=\"comment\">//é€šè¿‡ThreadPoolExecutoræ„é€ å‡½æ•°è‡ªå®šä¹‰å‚æ•°åˆ›å»º</span></span><br><span class=\"line\">        <span class=\"type\">ThreadPoolExecutor</span> <span class=\"variable\">executor</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">ThreadPoolExecutor</span>(</span><br><span class=\"line\">                CORE_POOL_SIZE,</span><br><span class=\"line\">                MAX_POOL_SIZE,</span><br><span class=\"line\">                KEEP_ALIVE_TIME,</span><br><span class=\"line\">                TimeUnit.SECONDS,</span><br><span class=\"line\">                <span class=\"keyword\">new</span> <span class=\"title class_\">ArrayBlockingQueue</span>&lt;&gt;(QUEUE_CAPACITY),</span><br><span class=\"line\">                <span class=\"keyword\">new</span> <span class=\"title class_\">ThreadPoolExecutor</span>.CallerRunsPolicy());</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>; i &lt; <span class=\"number\">10</span>; i++) &#123;</span><br><span class=\"line\">            <span class=\"comment\">//åˆ›å»ºWorkerThreadå¯¹è±¡ï¼ˆWorkerThreadç±»å®ç°äº†Runnable æ¥å£ï¼‰</span></span><br><span class=\"line\">            <span class=\"type\">Runnable</span> <span class=\"variable\">worker</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">MyRunnable</span>(<span class=\"string\">&quot;&quot;</span> + i);</span><br><span class=\"line\">            <span class=\"comment\">//æ‰§è¡ŒRunnable</span></span><br><span class=\"line\">            executor.execute(worker);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">//ç»ˆæ­¢çº¿ç¨‹æ± </span></span><br><span class=\"line\">        executor.shutdown();</span><br><span class=\"line\">        <span class=\"keyword\">while</span> (!executor.isTerminated()) &#123;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;Finished all threads&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>å¯ä»¥çœ‹åˆ°æˆ‘ä»¬ä¸Šé¢çš„ä»£ç æŒ‡å®šäº†ï¼š</p>\n<ol>\n<li><code>corePoolSize</code>: æ ¸å¿ƒçº¿ç¨‹æ•°ä¸º 5ã€‚</li>\n<li><code>maximumPoolSize</code> ï¼šæœ€å¤§çº¿ç¨‹æ•° 10</li>\n<li><code>keepAliveTime</code> : ç­‰å¾…æ—¶é—´ä¸º 1Lã€‚</li>\n<li><code>unit</code>: ç­‰å¾…æ—¶é—´çš„å•ä½ä¸º TimeUnit.SECONDSã€‚</li>\n<li><code>workQueue</code>ï¼šä»»åŠ¡é˜Ÿåˆ—ä¸º <code>ArrayBlockingQueue</code>ï¼Œå¹¶ä¸”å®¹é‡ä¸º 100;</li>\n<li><code>handler</code>:é¥±å’Œç­–ç•¥ä¸º <code>CallerRunsPolicy</code>ã€‚</li>\n</ol>\n<p><strong>Outputï¼š</strong></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pool-<span class=\"number\">1</span>-thread-<span class=\"number\">2</span> Start. Time = Tue Nov <span class=\"number\">12</span> <span class=\"number\">20</span>:<span class=\"number\">59</span>:<span class=\"number\">44</span> CST <span class=\"number\">2019</span></span><br><span class=\"line\">pool-<span class=\"number\">1</span>-thread-<span class=\"number\">5</span> Start. Time = Tue Nov <span class=\"number\">12</span> <span class=\"number\">20</span>:<span class=\"number\">59</span>:<span class=\"number\">44</span> CST <span class=\"number\">2019</span></span><br><span class=\"line\">pool-<span class=\"number\">1</span>-thread-<span class=\"number\">4</span> Start. Time = Tue Nov <span class=\"number\">12</span> <span class=\"number\">20</span>:<span class=\"number\">59</span>:<span class=\"number\">44</span> CST <span class=\"number\">2019</span></span><br><span class=\"line\">pool-<span class=\"number\">1</span>-thread-<span class=\"number\">1</span> Start. Time = Tue Nov <span class=\"number\">12</span> <span class=\"number\">20</span>:<span class=\"number\">59</span>:<span class=\"number\">44</span> CST <span class=\"number\">2019</span></span><br><span class=\"line\">pool-<span class=\"number\">1</span>-thread-<span class=\"number\">3</span> Start. Time = Tue Nov <span class=\"number\">12</span> <span class=\"number\">20</span>:<span class=\"number\">59</span>:<span class=\"number\">44</span> CST <span class=\"number\">2019</span></span><br><span class=\"line\">pool-<span class=\"number\">1</span>-thread-<span class=\"number\">5</span> End. Time = Tue Nov <span class=\"number\">12</span> <span class=\"number\">20</span>:<span class=\"number\">59</span>:<span class=\"number\">49</span> CST <span class=\"number\">2019</span></span><br><span class=\"line\">pool-<span class=\"number\">1</span>-thread-<span class=\"number\">3</span> End. Time = Tue Nov <span class=\"number\">12</span> <span class=\"number\">20</span>:<span class=\"number\">59</span>:<span class=\"number\">49</span> CST <span class=\"number\">2019</span></span><br><span class=\"line\">pool-<span class=\"number\">1</span>-thread-<span class=\"number\">2</span> End. Time = Tue Nov <span class=\"number\">12</span> <span class=\"number\">20</span>:<span class=\"number\">59</span>:<span class=\"number\">49</span> CST <span class=\"number\">2019</span></span><br><span class=\"line\">pool-<span class=\"number\">1</span>-thread-<span class=\"number\">4</span> End. Time = Tue Nov <span class=\"number\">12</span> <span class=\"number\">20</span>:<span class=\"number\">59</span>:<span class=\"number\">49</span> CST <span class=\"number\">2019</span></span><br><span class=\"line\">pool-<span class=\"number\">1</span>-thread-<span class=\"number\">1</span> End. Time = Tue Nov <span class=\"number\">12</span> <span class=\"number\">20</span>:<span class=\"number\">59</span>:<span class=\"number\">49</span> CST <span class=\"number\">2019</span></span><br><span class=\"line\">pool-<span class=\"number\">1</span>-thread-<span class=\"number\">2</span> Start. Time = Tue Nov <span class=\"number\">12</span> <span class=\"number\">20</span>:<span class=\"number\">59</span>:<span class=\"number\">49</span> CST <span class=\"number\">2019</span></span><br><span class=\"line\">pool-<span class=\"number\">1</span>-thread-<span class=\"number\">1</span> Start. Time = Tue Nov <span class=\"number\">12</span> <span class=\"number\">20</span>:<span class=\"number\">59</span>:<span class=\"number\">49</span> CST <span class=\"number\">2019</span></span><br><span class=\"line\">pool-<span class=\"number\">1</span>-thread-<span class=\"number\">4</span> Start. Time = Tue Nov <span class=\"number\">12</span> <span class=\"number\">20</span>:<span class=\"number\">59</span>:<span class=\"number\">49</span> CST <span class=\"number\">2019</span></span><br><span class=\"line\">pool-<span class=\"number\">1</span>-thread-<span class=\"number\">3</span> Start. Time = Tue Nov <span class=\"number\">12</span> <span class=\"number\">20</span>:<span class=\"number\">59</span>:<span class=\"number\">49</span> CST <span class=\"number\">2019</span></span><br><span class=\"line\">pool-<span class=\"number\">1</span>-thread-<span class=\"number\">5</span> Start. Time = Tue Nov <span class=\"number\">12</span> <span class=\"number\">20</span>:<span class=\"number\">59</span>:<span class=\"number\">49</span> CST <span class=\"number\">2019</span></span><br><span class=\"line\">pool-<span class=\"number\">1</span>-thread-<span class=\"number\">2</span> End. Time = Tue Nov <span class=\"number\">12</span> <span class=\"number\">20</span>:<span class=\"number\">59</span>:<span class=\"number\">54</span> CST <span class=\"number\">2019</span></span><br><span class=\"line\">pool-<span class=\"number\">1</span>-thread-<span class=\"number\">3</span> End. Time = Tue Nov <span class=\"number\">12</span> <span class=\"number\">20</span>:<span class=\"number\">59</span>:<span class=\"number\">54</span> CST <span class=\"number\">2019</span></span><br><span class=\"line\">pool-<span class=\"number\">1</span>-thread-<span class=\"number\">4</span> End. Time = Tue Nov <span class=\"number\">12</span> <span class=\"number\">20</span>:<span class=\"number\">59</span>:<span class=\"number\">54</span> CST <span class=\"number\">2019</span></span><br><span class=\"line\">pool-<span class=\"number\">1</span>-thread-<span class=\"number\">5</span> End. Time = Tue Nov <span class=\"number\">12</span> <span class=\"number\">20</span>:<span class=\"number\">59</span>:<span class=\"number\">54</span> CST <span class=\"number\">2019</span></span><br><span class=\"line\">pool-<span class=\"number\">1</span>-thread-<span class=\"number\">1</span> End. Time = Tue Nov <span class=\"number\">12</span> <span class=\"number\">20</span>:<span class=\"number\">59</span>:<span class=\"number\">54</span> CST <span class=\"number\">2019</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"å¹¶å‘å·¥å…·\"><a href=\"#å¹¶å‘å·¥å…·\" class=\"headerlink\" title=\"å¹¶å‘å·¥å…·\"></a>å¹¶å‘å·¥å…·</h2><h3 id=\"CountDownLatch-ä¸-CyclicBarrier\"><a href=\"#CountDownLatch-ä¸-CyclicBarrier\" class=\"headerlink\" title=\"CountDownLatch ä¸ CyclicBarrier\"></a>CountDownLatch ä¸ CyclicBarrier</h3><p>CountDownLatch ä¸ CyclicBarrier éƒ½æ˜¯ç”¨äºæ§åˆ¶å¹¶å‘çš„å·¥å…·ç±»ï¼Œéƒ½å¯ä»¥ç†è§£æˆç»´æŠ¤çš„å°±æ˜¯ä¸€ä¸ªè®¡æ•°å™¨ï¼Œä½†æ˜¯è¿™ä¸¤è€…è¿˜æ˜¯å„æœ‰ä¸åŒä¾§é‡ç‚¹çš„ï¼š</p>\n<ul>\n<li>CountDownLatch å¼ºè°ƒä¸€ä¸ªçº¿ç¨‹ç­‰å¤šä¸ªçº¿ç¨‹å®ŒæˆæŸä»¶äº‹æƒ…ã€‚CyclicBarrier æ˜¯å¤šä¸ªçº¿ç¨‹äº’ç­‰ï¼Œç­‰å¤§å®¶éƒ½å®Œæˆï¼Œå†æºæ‰‹å…±è¿›ï¼›</li>\n<li>è°ƒç”¨ CountDownLatch çš„ countDown æ–¹æ³•åï¼Œå½“å‰çº¿ç¨‹å¹¶ä¸ä¼šé˜»å¡ï¼Œä¼šç»§ç»­å¾€ä¸‹æ‰§è¡Œï¼›è€Œè°ƒç”¨CyclicBarrier çš„ await æ–¹æ³•ï¼Œä¼šé˜»å¡å½“å‰çº¿ç¨‹ï¼Œç›´åˆ° CyclicBarrier æŒ‡å®šçš„çº¿ç¨‹å…¨éƒ¨éƒ½åˆ°è¾¾äº†æŒ‡å®šç‚¹çš„æ—¶å€™ï¼Œæ‰èƒ½ç»§ç»­å¾€ä¸‹æ‰§è¡Œï¼›</li>\n<li>CountDownLatch æ˜¯ä¸èƒ½å¤ç”¨çš„ï¼Œè€Œ CyclicBarrier æ˜¯å¯ä»¥å¤ç”¨çš„ã€‚</li>\n</ul>\n<h3 id=\"Semaphore\"><a href=\"#Semaphore\" class=\"headerlink\" title=\"Semaphore\"></a>Semaphore</h3><p><strong>Semaphore(ä¿¡å·é‡)-å…è®¸å¤šä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®ï¼š</strong> synchronized å’Œ ReentrantLock éƒ½æ˜¯ä¸€æ¬¡åªå…è®¸ä¸€ä¸ªçº¿ç¨‹è®¿é—®æŸä¸ªèµ„æºï¼ŒSemaphore(ä¿¡å·é‡)å¯ä»¥æŒ‡å®šå¤šä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®æŸä¸ªèµ„æºã€‚</p>\n<p>Semaphore å°±æ˜¯ä¸€ä¸ªä¿¡å·é‡ï¼Œå®ƒçš„ä½œç”¨æ˜¯é™åˆ¶æŸæ®µä»£ç å—çš„å¹¶å‘æ•°ã€‚Semaphoreæœ‰ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œå¯ä»¥ä¼ å…¥ä¸€ä¸ª int å‹æ•´æ•° nï¼Œè¡¨ç¤ºæŸæ®µä»£ç æœ€å¤šåªæœ‰ n ä¸ªçº¿ç¨‹å¯ä»¥è®¿é—®ï¼Œå¦‚æœè¶…å‡ºäº† nï¼Œé‚£ä¹ˆè¯·ç­‰å¾…ï¼Œç­‰åˆ°æŸä¸ªçº¿ç¨‹æ‰§è¡Œå®Œæ¯•è¿™æ®µä»£ç å—ï¼Œä¸‹ä¸€ä¸ªçº¿ç¨‹å†è¿›å…¥ã€‚ç”±æ­¤å¯ä»¥çœ‹å‡ºå¦‚æœ Semaphore æ„é€ å‡½æ•°ä¸­ä¼ å…¥çš„ int å‹æ•´æ•° n&#x3D;1ï¼Œç›¸å½“äºå˜æˆäº†ä¸€ä¸ª synchronized äº†ã€‚</p>\n<h2 id=\"æ¨¡æ‹Ÿ\"><a href=\"#æ¨¡æ‹Ÿ\" class=\"headerlink\" title=\"æ¨¡æ‹Ÿ\"></a>æ¨¡æ‹Ÿ</h2><h3 id=\"æ­»é”\"><a href=\"#æ­»é”\" class=\"headerlink\" title=\"æ­»é”\"></a>æ­»é”</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">DeadLock</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"type\">Object</span> <span class=\"variable\">A</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Object</span>();</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"type\">Object</span> <span class=\"variable\">B</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Object</span>();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">new</span> <span class=\"title class_\">Thread</span>(() -&gt; &#123;</span><br><span class=\"line\">            <span class=\"keyword\">synchronized</span> (A) &#123;</span><br><span class=\"line\">                System.out.println(Thread.currentThread().getName() + <span class=\"string\">&quot; å·²è·å¾—èµ„æºA&quot;</span>);</span><br><span class=\"line\">                <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                    Thread.sleep(<span class=\"number\">1000</span>);</span><br><span class=\"line\">                &#125; <span class=\"keyword\">catch</span> (InterruptedException e) &#123;</span><br><span class=\"line\">                    e.printStackTrace();</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                System.out.println(Thread.currentThread().getName() + <span class=\"string\">&quot; ç­‰å¾…è·å¾—èµ„æºB&quot;</span>);</span><br><span class=\"line\">                <span class=\"keyword\">synchronized</span> (B) &#123;</span><br><span class=\"line\">                    System.out.println(Thread.currentThread().getName() + <span class=\"string\">&quot; å·²è·å¾—èµ„æºB&quot;</span>);</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;, <span class=\"string\">&quot;çº¿ç¨‹1&quot;</span>).start();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">new</span> <span class=\"title class_\">Thread</span>(() -&gt; &#123;</span><br><span class=\"line\">            <span class=\"keyword\">synchronized</span> (B) &#123;</span><br><span class=\"line\">                System.out.println(Thread.currentThread().getName() + <span class=\"string\">&quot; å·²è·å¾—èµ„æºB&quot;</span>);</span><br><span class=\"line\">                <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                    Thread.sleep(<span class=\"number\">1000</span>);</span><br><span class=\"line\">                &#125; <span class=\"keyword\">catch</span> (InterruptedException e) &#123;</span><br><span class=\"line\">                    e.printStackTrace();</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                System.out.println(Thread.currentThread().getName() + <span class=\"string\">&quot; ç­‰å¾…è·å¾—èµ„æºA&quot;</span>);</span><br><span class=\"line\">                <span class=\"keyword\">synchronized</span> (A) &#123;</span><br><span class=\"line\">                    System.out.println(Thread.currentThread().getName() + <span class=\"string\">&quot; å·²è·å¾—èµ„æºA&quot;</span>);</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;, <span class=\"string\">&quot;çº¿ç¨‹2&quot;</span>).start();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>çº¿ç¨‹1 å·²è·å¾—èµ„æºA<br>çº¿ç¨‹2 å·²è·å¾—èµ„æºB<br>çº¿ç¨‹1 ç­‰å¾…è·å¾—èµ„æºB<br>çº¿ç¨‹2 ç­‰å¾…è·å¾—èµ„æºA</p>\n</blockquote>\n<h3 id=\"runæ–¹æ³•å’Œstartæ–¹æ³•\"><a href=\"#runæ–¹æ³•å’Œstartæ–¹æ³•\" class=\"headerlink\" title=\"runæ–¹æ³•å’Œstartæ–¹æ³•\"></a>runæ–¹æ³•å’Œstartæ–¹æ³•</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">DiffStartRun</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">new</span> <span class=\"title class_\">Thread</span>(() -&gt; &#123;</span><br><span class=\"line\">            System.out.println(Thread.currentThread().getName());</span><br><span class=\"line\">        &#125;, <span class=\"string\">&quot;çº¿ç¨‹A&quot;</span>).run();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">new</span> <span class=\"title class_\">Thread</span>(() -&gt; &#123;</span><br><span class=\"line\">            System.out.println(Thread.currentThread().getName());</span><br><span class=\"line\">        &#125;, <span class=\"string\">&quot;çº¿ç¨‹B&quot;</span>).start();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>main<br>çº¿ç¨‹B</p>\n<p>new ä¸€ä¸ª Threadï¼Œçº¿ç¨‹è¿›å…¥äº†æ–°å»ºçŠ¶æ€ã€‚è°ƒç”¨ <code>start()</code>æ–¹æ³•ï¼Œä¼šå¯åŠ¨ä¸€ä¸ªçº¿ç¨‹å¹¶ä½¿çº¿ç¨‹è¿›å…¥äº†å°±ç»ªçŠ¶æ€ï¼Œå½“åˆ†é…åˆ°æ—¶é—´ç‰‡åå°±å¯ä»¥å¼€å§‹è¿è¡Œäº†ã€‚ <code>start()</code> ä¼šæ‰§è¡Œçº¿ç¨‹çš„ç›¸åº”å‡†å¤‡å·¥ä½œï¼Œç„¶åè‡ªåŠ¨æ‰§è¡Œ <code>run()</code> æ–¹æ³•çš„å†…å®¹ï¼Œè¿™æ˜¯çœŸæ­£çš„å¤šçº¿ç¨‹å·¥ä½œã€‚ ä½†æ˜¯ï¼Œç›´æ¥æ‰§è¡Œ <code>run()</code> æ–¹æ³•ï¼Œä¼šæŠŠ <code>run()</code> æ–¹æ³•å½“æˆä¸€ä¸ª main çº¿ç¨‹ä¸‹çš„æ™®é€šæ–¹æ³•å»æ‰§è¡Œï¼Œå¹¶ä¸ä¼šåœ¨æŸä¸ªçº¿ç¨‹ä¸­æ‰§è¡Œå®ƒï¼Œç¬¬ä¸€ä¸ªæ‰€è°“çš„çº¿ç¨‹Aåªæ˜¯ main çº¿ç¨‹çš„ä¸€ä¸ªæ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯è¯´å…¶æ‰€åœ¨çº¿ç¨‹è¿˜æ˜¯ main çº¿ç¨‹ï¼Œæ‰€ä»¥è¿™å¹¶ä¸æ˜¯å¤šçº¿ç¨‹å·¥ä½œã€‚</p>\n<p><strong>æ€»ç»“ï¼š è°ƒç”¨ start() æ–¹æ³•æ–¹å¯å¯åŠ¨çº¿ç¨‹å¹¶ä½¿çº¿ç¨‹è¿›å…¥å°±ç»ªçŠ¶æ€ï¼Œç›´æ¥æ‰§è¡Œ run() æ–¹æ³•çš„è¯ä¸ä¼šä»¥å¤šçº¿ç¨‹çš„æ–¹å¼æ‰§è¡Œã€‚</strong></p>\n</blockquote>\n<h3 id=\"ä¸¤ä¸ªçº¿ç¨‹ï¼Œäº¤æ›¿åŠ å‡\"><a href=\"#ä¸¤ä¸ªçº¿ç¨‹ï¼Œäº¤æ›¿åŠ å‡\" class=\"headerlink\" title=\"ä¸¤ä¸ªçº¿ç¨‹ï¼Œäº¤æ›¿åŠ å‡\"></a>ä¸¤ä¸ªçº¿ç¨‹ï¼Œäº¤æ›¿åŠ å‡</h3><ol>\n<li><p>synchronized</p>\n <figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> fangyaxing</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@date</span> 2022/9/12</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">TwoThreadWithSync</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"type\">int</span> <span class=\"variable\">value</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"type\">Object</span> <span class=\"variable\">lock</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Object</span>();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">new</span> <span class=\"title class_\">Thread</span>(() -&gt; &#123;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>; i &lt; <span class=\"number\">5</span>; i++) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">synchronized</span> (lock) &#123;</span><br><span class=\"line\">                    <span class=\"keyword\">while</span> (value != <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">                        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                            lock.wait();</span><br><span class=\"line\">                        &#125; <span class=\"keyword\">catch</span> (InterruptedException e) &#123;</span><br><span class=\"line\">                            e.printStackTrace();</span><br><span class=\"line\">                        &#125;</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                    value++;</span><br><span class=\"line\">                    System.out.println(Thread.currentThread().getName() + <span class=\"string\">&quot; ---- &quot;</span> + value);</span><br><span class=\"line\">                    lock.notifyAll();</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;, <span class=\"string\">&quot;Thread-A&quot;</span>).start();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">new</span> <span class=\"title class_\">Thread</span>(() -&gt; &#123;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>; i &lt; <span class=\"number\">5</span>; i++) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">synchronized</span> (lock) &#123;</span><br><span class=\"line\">                    <span class=\"keyword\">while</span> (value != <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">                        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                            lock.wait();</span><br><span class=\"line\">                        &#125; <span class=\"keyword\">catch</span> (InterruptedException e) &#123;</span><br><span class=\"line\">                            e.printStackTrace();</span><br><span class=\"line\">                        &#125;</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                    value--;</span><br><span class=\"line\">                    System.out.println(Thread.currentThread().getName() + <span class=\"string\">&quot; ---- &quot;</span> + value);</span><br><span class=\"line\">                    lock.notifyAll();</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;, <span class=\"string\">&quot;Thread-B&quot;</span>).start();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>lock + condition</p>\n <figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> fangyaxing</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@date</span> 2022/9/12</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">TwoThreadWithLock</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"type\">int</span> <span class=\"variable\">value</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"type\">Lock</span> <span class=\"variable\">lock</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">ReentrantLock</span>();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">static</span> <span class=\"type\">Condition</span> <span class=\"variable\">a</span> <span class=\"operator\">=</span> lock.newCondition();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">static</span> <span class=\"type\">Condition</span> <span class=\"variable\">b</span> <span class=\"operator\">=</span> lock.newCondition();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">new</span> <span class=\"title class_\">Thread</span>(() -&gt; &#123;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>; i &lt; <span class=\"number\">5</span>; i++) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                    lock.lock();</span><br><span class=\"line\">                    <span class=\"keyword\">while</span> (value != <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">                        a.await();</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                    value++;</span><br><span class=\"line\">                    System.out.println(Thread.currentThread().getName() + <span class=\"string\">&quot; ---- &quot;</span> + value);</span><br><span class=\"line\">                    b.signal();</span><br><span class=\"line\">                &#125; <span class=\"keyword\">catch</span> (InterruptedException e) &#123;</span><br><span class=\"line\">                    e.printStackTrace();</span><br><span class=\"line\">                &#125; <span class=\"keyword\">finally</span> &#123;</span><br><span class=\"line\">                    lock.unlock();</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;, <span class=\"string\">&quot;Thread-A&quot;</span>).start();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">new</span> <span class=\"title class_\">Thread</span>(() -&gt; &#123;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>; i &lt; <span class=\"number\">5</span>; i++) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                    lock.lock();</span><br><span class=\"line\">                    <span class=\"keyword\">while</span> (value != <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">                        b.await();</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                    value--;</span><br><span class=\"line\">                    System.out.println(Thread.currentThread().getName() + <span class=\"string\">&quot; ---- &quot;</span> + value);</span><br><span class=\"line\">                    a.signal();</span><br><span class=\"line\">                &#125; <span class=\"keyword\">catch</span> (InterruptedException e) &#123;</span><br><span class=\"line\">                    e.printStackTrace();</span><br><span class=\"line\">                &#125; <span class=\"keyword\">finally</span> &#123;</span><br><span class=\"line\">                    lock.unlock();</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;, <span class=\"string\">&quot;Thread-B&quot;</span>).start();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n</ol>\n<h3 id=\"ä¸‰ä¸ªçº¿ç¨‹ï¼Œå¾ªç¯æ‰“å°\"><a href=\"#ä¸‰ä¸ªçº¿ç¨‹ï¼Œå¾ªç¯æ‰“å°\" class=\"headerlink\" title=\"ä¸‰ä¸ªçº¿ç¨‹ï¼Œå¾ªç¯æ‰“å°\"></a>ä¸‰ä¸ªçº¿ç¨‹ï¼Œå¾ªç¯æ‰“å°</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">Demo5</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"type\">int</span> <span class=\"variable\">value</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"type\">Lock</span> <span class=\"variable\">lock</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">ReentrantLock</span>();</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"type\">Condition</span> <span class=\"variable\">a</span> <span class=\"operator\">=</span> lock.newCondition();</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"type\">Condition</span> <span class=\"variable\">b</span> <span class=\"operator\">=</span> lock.newCondition();</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"type\">Condition</span> <span class=\"variable\">c</span> <span class=\"operator\">=</span> lock.newCondition();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">outputA</span><span class=\"params\">(<span class=\"type\">int</span> round)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            lock.lock();</span><br><span class=\"line\">            <span class=\"keyword\">while</span> (value != <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">                a.await();</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            value = <span class=\"number\">1</span>;</span><br><span class=\"line\">            System.out.println(<span class=\"string\">&quot;ç¬¬&quot;</span> + round + <span class=\"string\">&quot;è½®ï¼Œ&quot;</span> + Thread.currentThread().getName() + <span class=\"string\">&quot;è¾“å‡ºA&quot;</span>);</span><br><span class=\"line\">            b.signal();</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (Exception e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125; <span class=\"keyword\">finally</span> &#123;</span><br><span class=\"line\">            lock.unlock();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">outputB</span><span class=\"params\">(<span class=\"type\">int</span> round)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            lock.lock();</span><br><span class=\"line\">            <span class=\"keyword\">while</span> (value != <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">                b.await();</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            value = <span class=\"number\">2</span>;</span><br><span class=\"line\">            System.out.println(<span class=\"string\">&quot;ç¬¬&quot;</span> + round + <span class=\"string\">&quot;è½®ï¼Œ&quot;</span> + Thread.currentThread().getName() + <span class=\"string\">&quot;è¾“å‡ºB&quot;</span>);</span><br><span class=\"line\">            c.signal();</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (Exception e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125; <span class=\"keyword\">finally</span> &#123;</span><br><span class=\"line\">            lock.unlock();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">outputC</span><span class=\"params\">(<span class=\"type\">int</span> round)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            lock.lock();</span><br><span class=\"line\">            <span class=\"keyword\">while</span> (value != <span class=\"number\">2</span>) &#123;</span><br><span class=\"line\">                c.await();</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            value = <span class=\"number\">0</span>;</span><br><span class=\"line\">            System.out.println(<span class=\"string\">&quot;ç¬¬&quot;</span> + round + <span class=\"string\">&quot;è½®ï¼Œ&quot;</span> + Thread.currentThread().getName() + <span class=\"string\">&quot;è¾“å‡ºC&quot;</span>);</span><br><span class=\"line\">            a.signal();</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (Exception e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125; <span class=\"keyword\">finally</span> &#123;</span><br><span class=\"line\">            lock.unlock();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> &#123;</span><br><span class=\"line\">        <span class=\"type\">Demo5</span> <span class=\"variable\">s</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Demo5</span>();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">new</span> <span class=\"title class_\">Thread</span>(() -&gt; &#123;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>; i &lt; <span class=\"number\">3</span>; i++) &#123;</span><br><span class=\"line\">                s.outputA(i);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;, <span class=\"string\">&quot;Thread-A&quot;</span>).start();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">new</span> <span class=\"title class_\">Thread</span>(() -&gt; &#123;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>; i &lt; <span class=\"number\">3</span>; i++) &#123;</span><br><span class=\"line\">                s.outputB(i);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;, <span class=\"string\">&quot;Thread-B&quot;</span>).start();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">new</span> <span class=\"title class_\">Thread</span>(() -&gt; &#123;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>; i &lt; <span class=\"number\">3</span>; i++) &#123;</span><br><span class=\"line\">                s.outputC(i);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;, <span class=\"string\">&quot;Thread-C&quot;</span>).start();</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>"},{"title":"Javaå…«è‚¡æ–‡ - MyBatis","copyright":true,"mathjax":false,"date":"2023-01-23T07:30:00.000Z","toc":true,"urlname":"java-mybatis","_content":"\n> æ•´ç†çš„MyBatisæ¡†æ¶ç›¸å…³çŸ¥è¯†ç‚¹å’Œé¢è¯•é¢˜ï¼Œéƒ¨åˆ†å†…å®¹æ‘˜è‡ªç½‘ç»œï¼Œå¦‚æœ‰ä¾µæƒè¯·è”ç³»æˆ‘ï½<!--more-->\n\n\n### ä»€ä¹ˆæ˜¯MyBatisï¼Ÿ\n\n1. MyBatisæ˜¯ä¸€ä¸ªåŠORMï¼ˆå¯¹è±¡å…³ç³»æ˜ å°„ï¼‰æ¡†æ¶ï¼Œå®ƒå†…éƒ¨å°è£…äº†JDBCï¼Œå¼€å‘æ—¶åªéœ€è¦å…³æ³¨SQLè¯­å¥æœ¬èº«ï¼Œä¸éœ€è¦èŠ±è´¹ç²¾åŠ›å»å¤„ç†**åŠ è½½é©±åŠ¨ã€åˆ›å»ºè¿æ¥ã€åˆ›å»ºstatement**ç­‰ç¹æ‚çš„è¿‡ç¨‹ã€‚\n2. é€šè¿‡xml æ–‡ä»¶æˆ–æ³¨è§£çš„æ–¹å¼å°†è¦æ‰§è¡Œçš„å„ç§ statement é…ç½®èµ·æ¥ï¼Œå¹¶é€šè¿‡javaå¯¹è±¡å’Œ statementä¸­SQLçš„åŠ¨æ€å‚æ•°è¿›è¡Œæ˜ å°„ç”Ÿæˆæœ€ç»ˆæ‰§è¡Œçš„SQLè¯­å¥ï¼Œæœ€åç”±mybatisæ¡†æ¶æ‰§è¡ŒSQLå¹¶å°†ç»“æœæ˜ å°„ä¸ºjavaå¯¹è±¡å¹¶è¿”å›ã€‚ï¼ˆä»æ‰§è¡ŒSQLåˆ°è¿”å›resultçš„è¿‡ç¨‹ï¼‰ã€‚\n\n### ORMæ˜¯ä»€ä¹ˆ\n\nORMï¼ˆObject Relational Mappingï¼‰ï¼Œå¯¹è±¡å…³ç³»æ˜ å°„ï¼Œå°±æ˜¯æŠŠæ•°æ®åº“è¡¨å’Œå®ä½“ç±»åŠå®ä½“ç±»çš„å±æ€§å¯¹åº”èµ·æ¥\n\nè®©æˆ‘ä»¬å¯ä»¥æ“ä½œå®ä½“ç±»å°±å®ç°æ“ä½œæ•°æ®åº“è¡¨ã€‚\n\n### ä¸ºä»€ä¹ˆè¯´MyBatisæ˜¯åŠè‡ªåŠ¨ORMæ˜ å°„å·¥å…·ï¼Ÿå®ƒä¸å…¨è‡ªåŠ¨çš„åŒºåˆ«åœ¨å“ªé‡Œï¼Ÿ\n\nMyBatisåœ¨æŸ¥è¯¢å…³è”å¯¹è±¡æˆ–å…³è”é›†åˆå¯¹è±¡æ—¶ï¼Œéœ€è¦æ‰‹åŠ¨ç¼–å†™SQLæ¥å®Œæˆï¼Œæ‰€ä»¥ï¼Œç§°ä¹‹ä¸ºåŠè‡ªåŠ¨ORMæ˜ å°„å·¥å…·ã€‚\n\n### JDBCç¼–ç¨‹æœ‰å“ªäº›ä¸è¶³ä¹‹å¤„ï¼ŒMyBatisæ˜¯å¦‚ä½•è§£å†³çš„ï¼Ÿ\n\n1. æ•°æ®åº“è¿æ¥åˆ›å»ºã€é‡Šæ”¾é¢‘ç¹ï¼Œé€ æˆç³»ç»Ÿèµ„æºæµªè´¹ä»è€Œå½±å“ç³»ç»Ÿæ€§èƒ½\n2. SQLè¯­å¥å†™åœ¨ä»£ç ä¸­é€ æˆä»£ç **ä¸æ˜“ç»´æŠ¤**\n3. å‘SQLè¯­å¥**ä¼ å‚**éº»çƒ¦\n4. å¯¹**ç»“æœé›†è§£æ**éº»çƒ¦\n\n### MyBatisç¼–ç¨‹æ­¥éª¤æ˜¯ä»€ä¹ˆæ ·çš„ï¼Ÿ\n\n1. è¯»å–é…ç½®æ–‡ä»¶ï¼Œåˆ›å»ºSqlSessionFactoryå·¥å‚\n2. é€šè¿‡SqlSessionFactoryå·¥å‚åˆ›å»ºSqlSession å¯¹è±¡\n3. ä½¿ç”¨ SqlSession åˆ›å»º Dao æ¥å£çš„ä»£ç†å¯¹è±¡\n4. ä½¿ç”¨ä»£ç†å¯¹è±¡æ‰§è¡Œæ–¹æ³•\n5. è°ƒç”¨session.commit()æäº¤äº‹åŠ¡\n6. è°ƒç”¨session.close()å…³é—­ä¼šè¯\n\n### \\#{}å’Œ\\${}çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ\n\nmybatisåœ¨å¤„ç† \\#{} æ—¶ï¼Œä¼šå°†SQLä¸­çš„ \\#{} æ›¿æ¢ä¸º ? å·ï¼Œè°ƒç”¨PreparedStatementçš„setæ–¹æ³•æ¥èµ‹å€¼ã€‚\nè¿™æ˜¯**é¢„ç¼–è¯‘å¤„ç†**ï¼Œå¯ä»¥æé«˜SQLæ‰§è¡Œæ•ˆç‡ï¼Œæ›´é‡è¦çš„æ˜¯**å¯ä»¥é˜²æ­¢SQLæ³¨å…¥**ï¼›\n\nmybatisåœ¨å¤„ç† \\${} æ—¶ï¼Œå°±æ˜¯æŠŠ \\${} ä½¿ç”¨**å­—ç¬¦ä¸²æ›¿æ¢**ã€‚ä½¿ç”¨è¯¥æ–¹å¼å¦‚æœä¼ å…¥idçš„è¯ï¼Œä¼šæŠŠid=1è½¬æ¢ä¸ºid=\"1\"å­—ç¬¦ä¸²å½¢å¼ï¼Œè€Œæ•°æ®åº“ä¸­idå®é™…ä¸ºæ•°å€¼å‹è¿™æ ·å°±ä¸åŒ¹é…äº†ï¼ŒæŸ¥è¯¢å¤±è´¥ã€‚ï¼ˆ\\${}æ˜¯å­—ç¬¦ä¸²æ›¿æ¢ï¼Œé€šå¸¸åœ¨ELè¡¨è¾¾å¼ä¸­ä½¿ç”¨ï¼Œç”¨æ¥å±•ç¤ºåç«¯ä¼ é€’åˆ°å‰ç«¯çš„å€¼ï¼‰ã€‚\n\n### å½“å®ä½“ç±»ä¸­çš„å±æ€§åå’Œè¡¨ä¸­çš„å­—æ®µåä¸ä¸€æ · ï¼Œæ€ä¹ˆåŠ ï¼Ÿ\n\n1. é€šè¿‡åœ¨æŸ¥è¯¢çš„SQLè¯­å¥ä¸­å®šä¹‰æ•°æ®åº“å­—æ®µåçš„åˆ«åï¼Œè®©æ•°æ®åº“å­—æ®µåçš„åˆ«åå’Œå®ä½“ç±»çš„å±æ€§åä¸€è‡´ã€‚\n2. é€šè¿‡ `<resultMap>`æ¥æ˜ å°„å­—æ®µåå’Œå®ä½“ç±»å±æ€§åçš„ä¸€ä¸€å¯¹åº”çš„å…³ç³»ã€‚\n\n### æ¨¡ç³ŠæŸ¥è¯¢likeè¯­å¥è¯¥æ€ä¹ˆå†™?\n\n1. åœ¨Javaä»£ç ä¸­æ·»åŠ SQLé€šé…ç¬¦ã€‚\n\n\t```xml\n\tstring wildcardname = â€œ%smi%â€;\n\tlist<name> names = mapper.selectlike(wildcardname);\n\t\n\t<select id=â€selectlikeâ€>\n\t\tselect * from foo where bar like #{value}\n\t</select>\n\t```\n\n2. åœ¨SQLè¯­å¥ä¸­æ‹¼æ¥é€šé…ç¬¦%ï¼Œä¼šå¼•èµ·SQLæ³¨å…¥\n\n\t```xml\n\tstring wildcardname = â€œsmiâ€;\n\tlist<name> names = mapper.selectlike(wildcardname);\n\t\n\t<select id=â€selectlikeâ€>\n\t\tselect * from foo where bar like \"%\"#{value}\"%\"\n\t</select>\n\t```\n\n### MyBatiséƒ½æœ‰å“ªäº›Executoræ‰§è¡Œå™¨ï¼Ÿå®ƒä»¬ä¹‹é—´çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ\n\nMyBatisæœ‰ä¸‰ç§åŸºæœ¬çš„Executoræ‰§è¡Œå™¨ï¼ŒSimpleExecutorã€ReuseExecutorã€BatchExecutorã€‚\n\n- **SimpleExecutor** ï¼šæ¯æ¬¡å¼€å¯ä¸€ä¸ªStatementå¯¹è±¡ï¼Œç”¨å®Œç«‹åˆ»å…³é—­Statementå¯¹è±¡ã€‚\n- **ReuseExecutor** ï¼šé‡å¤ä½¿ç”¨åˆ›å»ºçš„Statementå¯¹è±¡ã€‚\n- **BatchExecutor** ï¼šç¼“å­˜äº†å¤šä¸ªStatementå¯¹è±¡ï¼Œä¸€èµ·æ‰§è¡Œæ‰¹é‡æ›´æ–°ã€‚\n\n### é€šå¸¸ä¸€ä¸ªxmlæ˜ å°„æ–‡ä»¶ï¼Œéƒ½ä¼šå†™ä¸€ä¸ªDaoæ¥å£ä¸ä¹‹å¯¹åº”ï¼Œè¯·é—®ï¼Œè¿™ä¸ªDaoæ¥å£çš„å·¥ä½œåŸç†æ˜¯ä»€ä¹ˆï¼ŸDaoæ¥å£é‡Œçš„æ–¹æ³•ï¼Œå‚æ•°ä¸åŒæ—¶ï¼Œæ–¹æ³•èƒ½é‡è½½å—ï¼Ÿ\n\nDao æ¥å£ï¼Œå°±æ˜¯äººä»¬å¸¸è¯´çš„ `Mapper`æ¥å£ï¼Œæ¥å£çš„å…¨é™åï¼Œå°±æ˜¯æ˜ å°„æ–‡ä»¶ä¸­çš„ namespace çš„å€¼ï¼Œæ¥å£çš„æ–¹æ³•åï¼Œå°±æ˜¯æ˜ å°„æ–‡ä»¶ä¸­`MappedStatement`çš„ id å€¼ï¼Œæ¥å£æ–¹æ³•å†…çš„å‚æ•°ï¼Œå°±æ˜¯ä¼ é€’ç»™ SQL çš„å‚æ•°ã€‚`Mapper`æ¥å£æ˜¯æ²¡æœ‰å®ç°ç±»çš„ï¼Œå½“è°ƒç”¨æ¥å£æ–¹æ³•æ—¶ï¼Œæ¥å£å…¨é™å+æ–¹æ³•åæ‹¼æ¥å­—ç¬¦ä¸²ä½œä¸º key å€¼ï¼Œå¯å”¯ä¸€å®šä½ä¸€ä¸ª`MappedStatement`ï¼Œä¸¾ä¾‹ï¼š`com.yaxing.dao.IUserDao.findAll`ï¼Œå¯ä»¥å”¯ä¸€æ‰¾åˆ° namespace ä¸º`com.yaxing.dao.IUserDao`ä¸‹é¢`id = findAll`çš„`MappedStatement`ã€‚åœ¨ MyBatis ä¸­ï¼Œæ¯ä¸€ä¸ª`<select>`ã€`<insert>`ã€`<update>`ã€`<delete>`æ ‡ç­¾ï¼Œéƒ½ä¼šè¢«è§£æä¸ºä¸€ä¸ª`MappedStatement`å¯¹è±¡ï¼Œç„¶åæ‰§è¡Œåç»­çš„æ“ä½œã€‚\n\n```xml\n<mapper namespace=\"com.yaxing.dao.IUserDao\">\n    <select id=\"findAll\" resultType=\"com.yaxing.domain.User\">\n        select * from user;\n    </select>\n</mapper>\n```\n\nDao æ¥å£é‡Œçš„æ–¹æ³•å¯ä»¥é‡è½½ï¼Œä½†æ˜¯MyBatisçš„XMLé‡Œé¢çš„IDä¸å…è®¸é‡å¤ï¼Œä¹Ÿå°±æ˜¯è¯´å¯¹äºåŒä¸€ä¸ªæ¥å£æ–¹æ³•åï¼Œmapperæ–‡ä»¶ä¸­åªèƒ½æœ‰ä¸€ä¸ªè¯¥idã€‚\nå¯ä»¥ä½¿ç”¨åŠ¨æ€SQLå®ç°æ¥å£é‡è½½å¯¹åº”çš„maperã€‚\n\n```java\n/**\n * Mapperæ¥å£é‡Œé¢æ–¹æ³•é‡è½½\n */\npublic interface StuMapper {\n    List<Student> getAllStu();\n    List<Student> getAllStu(@Param(\"id\") Integer id);\n}\n```\n\nç„¶ååœ¨ `StuMapper.xml` ä¸­åˆ©ç”¨MyBatisçš„åŠ¨æ€SQLå°±å¯ä»¥å®ç°ã€‚\n\n```xml\n<select id=\"getAllStu\" resultType=\"com.pojo.Student\">\n    select * from student\n    <where>\n        <if test=\"id != null\">\n            id = #{id}\n        </if>\n    </where>\n</select>\n```\n\nèƒ½æ­£å¸¸è¿è¡Œï¼Œå¹¶èƒ½å¾—åˆ°ç›¸åº”çš„ç»“æœï¼Œè¿™æ ·å°±å®ç°äº†åœ¨Daoæ¥å£ä¸­å†™é‡è½½æ–¹æ³•ã€‚\n\n**MyBatis çš„ Dao æ¥å£å¯ä»¥æœ‰å¤šä¸ªé‡è½½æ–¹æ³•ï¼Œä½†æ˜¯å¤šä¸ªæ¥å£å¯¹åº”çš„æ˜ å°„å¿…é¡»åªæœ‰ä¸€ä¸ªï¼Œå¦åˆ™å¯åŠ¨ä¼šæŠ¥é”™ã€‚**\n\n### MyBatisæ˜¯å¦‚ä½•å°†SQLæ‰§è¡Œç»“æœå°è£…ä¸ºç›®æ ‡å¯¹è±¡å¹¶è¿”å›çš„ï¼Ÿéƒ½æœ‰å“ªäº›æ˜ å°„å½¢å¼ï¼Ÿ\n\n1. ä½¿ç”¨ `<resultMap>`æ ‡ç­¾ï¼Œé€ä¸€å®šä¹‰æ•°æ®åº“åˆ—åå’Œå¯¹è±¡å±æ€§åä¹‹é—´çš„æ˜ å°„å…³ç³»ã€‚\n\n2. ä½¿ç”¨SQLåˆ—çš„åˆ«ååŠŸèƒ½ï¼Œå°†åˆ—çš„åˆ«åå±æ€§å¯¹åº”ä¸ºå¯¹è±¡å±æ€§åã€‚\n\næœ‰äº†åˆ—åä¸å±æ€§åçš„æ˜ å°„å…³ç³»åï¼ŒMyBatis**é€šè¿‡åå°„åˆ›å»ºå¯¹è±¡**ï¼ŒåŒæ—¶**ä½¿ç”¨åå°„ç»™å¯¹è±¡çš„å±æ€§é€ä¸€èµ‹å€¼**å¹¶è¿”å›ï¼Œé‚£äº›æ‰¾ä¸åˆ°æ˜ å°„å…³ç³»çš„å±æ€§ï¼Œæ˜¯æ— æ³•å®Œæˆèµ‹å€¼çš„ã€‚\n\n### åœ¨mapperä¸­å¦‚ä½•ä¼ é€’å¤šä¸ªå‚æ•°?\n\n1. é¡ºåºä¼ å‚æ³•ï¼Œ\\#{} é‡Œé¢çš„æ•°å­—ä»£è¡¨ä¼ å…¥å‚æ•°çš„é¡ºåº\n2. @Paramæ³¨è§£ä¼ å‚æ³•ï¼Œ\\#{} é‡Œé¢çš„åç§°å¯¹åº”çš„æ˜¯æ³¨è§£@Paramæ‹¬å·é‡Œé¢ä¿®é¥°çš„åç§°\n3. mapä¼ å‚ï¼Œ\\#{} é‡Œé¢çš„åç§°å¯¹åº”çš„æ˜¯Mapé‡Œé¢çš„keyåç§°ã€‚\n4. Java Beanä¼ å‚æ³•ï¼Œ\\#{} é‡Œé¢çš„åç§°å¯¹åº”çš„æ˜¯Userç±»é‡Œé¢çš„æˆå‘˜å±æ€§ã€‚\n\n### MyBatisåŠ¨æ€SQLæœ‰ä»€ä¹ˆç”¨ï¼Ÿæ‰§è¡ŒåŸç†ï¼Ÿæœ‰å“ªäº›åŠ¨æ€SQLï¼Ÿ\n\nMyBatisåŠ¨æ€SQLå¯ä»¥åœ¨xmlæ˜ å°„æ–‡ä»¶å†…ï¼Œä»¥æ ‡ç­¾çš„å½¢å¼ç¼–å†™åŠ¨æ€SQL.\n\næ‰§è¡ŒåŸç†æ˜¯æ ¹æ®è¡¨è¾¾å¼çš„å€¼ å®Œæˆé€»è¾‘åˆ¤æ–­å¹¶åŠ¨æ€æ‹¼æ¥SQLã€‚\n\nMyBatisæä¾›äº†9ç§åŠ¨æ€SQLæ ‡ç­¾ï¼š å¸¸ç”¨çš„æœ‰ `if|where|foreach`\n\n```xml\n<select id=\"getAllStu\" resultType=\"com.pojo.Student\">\n    select * from student\n    <where>\n        <if test=\"id != null\">\n            id = #{id}\n        </if>\n    </where>\n</select>\n```\n\n### MyBatiså®ç°ä¸€å¯¹å¤šæœ‰å‡ ç§æ–¹å¼,æ€ä¹ˆæ“ä½œçš„ï¼Ÿ\n\næœ‰**è”åˆæŸ¥è¯¢**å’Œ**åµŒå¥—æŸ¥è¯¢**ã€‚\n\nè”åˆæŸ¥è¯¢æ˜¯å‡ ä¸ªè¡¨è”åˆæŸ¥è¯¢,åªæŸ¥è¯¢ä¸€æ¬¡,é€šè¿‡åœ¨resultMapé‡Œé¢çš„collectionèŠ‚ç‚¹é…ç½®ä¸€å¯¹å¤šçš„ç±»å°±å¯ä»¥å®Œæˆï¼›\n\nåµŒå¥—æŸ¥è¯¢æ˜¯å…ˆæŸ¥ä¸€ä¸ªè¡¨,æ ¹æ®è¿™ä¸ªè¡¨é‡Œé¢çš„ ç»“æœçš„å¤–é”®id,å»å†å¦å¤–ä¸€ä¸ªè¡¨é‡Œé¢æŸ¥è¯¢æ•°æ®,ä¹Ÿæ˜¯é€šè¿‡é…ç½®collection,ä½†å¦å¤–ä¸€ä¸ªè¡¨çš„æŸ¥è¯¢é€šè¿‡selectèŠ‚ç‚¹é…ç½®ã€‚\n\n### MyBatisæ˜¯å¦æ”¯æŒå»¶è¿ŸåŠ è½½ï¼Ÿå¦‚æœæ”¯æŒï¼Œå®ƒçš„å®ç°åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ\n\nMyBatisä»…æ”¯æŒassociationå…³è”å¯¹è±¡å’Œcollectionå…³è”é›†åˆå¯¹è±¡çš„å»¶è¿ŸåŠ è½½ã€‚\nassociationæŒ‡çš„å°±æ˜¯ä¸€å¯¹ä¸€ï¼ŒcollectionæŒ‡çš„å°±æ˜¯ä¸€å¯¹å¤šæŸ¥è¯¢ã€‚\nåœ¨MyBatisé…ç½®æ–‡ä»¶ä¸­ï¼Œå¯ä»¥é…ç½®æ˜¯å¦å¯ç”¨å»¶è¿ŸåŠ è½½lazyLoadingEnabled=true|falseã€‚\n\nå®ƒçš„åŸç†æ˜¯ï¼Œä½¿ç”¨CGLIBåˆ›å»ºç›®æ ‡å¯¹è±¡çš„ä»£ç†å¯¹è±¡ï¼Œå½“è°ƒç”¨ç›®æ ‡æ–¹æ³•æ—¶ï¼Œè¿›å…¥æ‹¦æˆªå™¨æ–¹æ³•ï¼Œæ¯”å¦‚è°ƒç”¨a.getB().getName()ï¼Œæ‹¦æˆªå™¨invoke()æ–¹æ³•å‘ç°a.getB()æ˜¯nullå€¼ï¼Œé‚£ä¹ˆå°±ä¼šå•ç‹¬å‘é€äº‹å…ˆä¿å­˜å¥½çš„æŸ¥è¯¢å…³è”Bå¯¹è±¡çš„SQLï¼ŒæŠŠBæŸ¥è¯¢ä¸Šæ¥ï¼Œç„¶åè°ƒç”¨a.setB(b)ï¼Œäºæ˜¯açš„å¯¹è±¡bå±æ€§å°±æœ‰å€¼äº†ï¼Œæ¥ç€å®Œæˆa.getB().getName()æ–¹æ³•çš„è°ƒç”¨ã€‚è¿™å°±æ˜¯å»¶è¿ŸåŠ è½½çš„åŸºæœ¬åŸç†ã€‚\n\n### MyBatisçš„ä¸€çº§ã€äºŒçº§ç¼“å­˜\n\n**ä¸€çº§ç¼“å­˜**ï¼šä¸€çº§ç¼“å­˜æ˜¯SqlSessionèŒƒå›´çš„ç¼“å­˜\n\nå½“æˆ‘ä»¬æ‰§è¡ŒæŸ¥è¯¢ä¹‹åï¼ŒæŸ¥è¯¢çš„ç»“æœä¼šåŒæ—¶å­˜å…¥åˆ°SqlSessionä¸ºæˆ‘ä»¬æä¾›çš„ä¸€å—åŒºåŸŸä¸­ã€‚è¯¥åŒºåŸŸçš„ç»“æ„æ˜¯ä¸€ä¸ªMapã€‚\nå½“æˆ‘ä»¬å†æ¬¡æŸ¥è¯¢åŒæ ·çš„æ•°æ®æ—¶ï¼ŒMyBatisä¼šå…ˆå»SqlSessionä¸­æŸ¥è¯¢æ˜¯å¦æœ‰ï¼Œæœ‰çš„è¯ç›´æ¥æ‹¿å‡ºæ¥ç”¨ã€‚\n\nå½“è°ƒç”¨SqlSessionçš„æ·»åŠ ï¼Œä¿®æ”¹ï¼Œåˆ é™¤ï¼Œcommit()ï¼Œclose()ã€clearCache()ç­‰æ–¹æ³•æ—¶ï¼Œå°±ä¼šæ¸…ç©ºä¸€çº§ç¼“å­˜ã€‚\n\n> ç¬¬ä¸€æ¬¡å‘èµ·æŸ¥è¯¢ç”¨æˆ·idä¸º1çš„ç”¨æˆ·ä¿¡æ¯ï¼Œå…ˆå»æ‰¾ç¼“å­˜ä¸­æ˜¯å¦æœ‰idä¸º1çš„ç”¨æˆ·ä¿¡æ¯ï¼Œå¦‚æœæ²¡æœ‰ï¼Œä»æ•°æ®åº“æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯ã€‚ \n> å¾—åˆ°ç”¨æˆ·ä¿¡æ¯ï¼Œå°†ç”¨æˆ·ä¿¡æ¯å­˜å‚¨åˆ°ä¸€çº§ç¼“å­˜ä¸­ã€‚ \n> å¦‚æœSQLSessionå»æ‰§è¡Œcommitæ“ä½œï¼ˆæ‰§è¡Œæ’å…¥ã€æ›´æ–°ã€åˆ é™¤ï¼‰ï¼Œæ¸…ç©ºSqlSessionä¸­çš„ä¸€çº§ç¼“å­˜ï¼Œè¿™æ ·åšçš„ç›®çš„ä¸ºäº†è®©ç¼“å­˜ä¸­å­˜å‚¨çš„æ˜¯æœ€æ–°çš„ä¿¡æ¯ï¼Œé¿å…è„è¯»ã€‚ \n> ç¬¬äºŒæ¬¡å‘èµ·æŸ¥è¯¢ç”¨æˆ·idä¸º1çš„ç”¨æˆ·ä¿¡æ¯ï¼Œå…ˆå»æ‰¾ç¼“å­˜ä¸­æ˜¯å¦æœ‰idä¸º1çš„ç”¨æˆ·ä¿¡æ¯ï¼Œç¼“å­˜ä¸­æœ‰ï¼Œç›´æ¥ä»ç¼“å­˜ä¸­è·å–ç”¨æˆ·ä¿¡æ¯ã€‚\n\n**äºŒçº§ç¼“å­˜**ï¼šäºŒçº§ç¼“å­˜æ˜¯mapperæ˜ å°„çº§åˆ«çš„ç¼“å­˜ï¼Œå¤šä¸ªSqlSessionå»æ“ä½œåŒä¸€ä¸ªMapperæ˜ å°„çš„SQLè¯­å¥ï¼Œå¤šä¸ªSqlSessionå¯ä»¥å…±ç”¨äºŒçº§ç¼“å­˜ï¼ŒäºŒçº§ç¼“å­˜æ˜¯è·¨SqlSessionçš„ã€‚\n\nMyBatisä¸­SqlSessionFactoryå¯¹è±¡çš„ç¼“å­˜\n\nâ€‹\tç”±åŒä¸€ä¸ªSqlSessionFactoryå¯¹è±¡åˆ›å»ºçš„SqlSessionå…±äº«å…¶ç¼“å­˜ã€‚\n\nâ€‹\täºŒçº§ç¼“å­˜å­˜æ”¾çš„æ˜¯æ•°æ®ï¼Œè€Œä¸æ˜¯å¯¹è±¡ã€‚\n\n> SQLSession1å»æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯ï¼ŒæŸ¥è¯¢åˆ°ç”¨æˆ·ä¿¡æ¯ä¼šå°†æŸ¥è¯¢æ•°æ®å­˜å‚¨åˆ°äºŒçº§ç¼“å­˜ä¸­ã€‚\n> å¦‚æœSqlSession3å»æ‰§è¡Œç›¸åŒ mapperæ˜ å°„ä¸‹SQLï¼Œæ‰§è¡Œcommitæäº¤ï¼Œå°†ä¼šæ¸…ç©ºè¯¥ mapperæ˜ å°„ä¸‹çš„äºŒçº§ç¼“å­˜åŒºåŸŸçš„æ•°æ®ã€‚ \n> SQLSession2å»æŸ¥è¯¢ä¸SQLSession1ç›¸åŒçš„ç”¨æˆ·ä¿¡æ¯ï¼Œé¦–å…ˆä¼šå»ç¼“å­˜ä¸­æ‰¾æ˜¯å¦å­˜åœ¨æ•°æ®ï¼Œå¦‚æœå­˜åœ¨ç›´æ¥ä»ç¼“å­˜ä¸­å–å‡ºæ•°æ®ã€‚\n\n1ï¼‰ä¸€çº§ç¼“å­˜: åŸºäº PerpetualCache çš„ HashMap æœ¬åœ°ç¼“å­˜ï¼Œå…¶å­˜å‚¨ä½œç”¨åŸŸä¸º Sessionï¼Œå½“ Session flush æˆ– close ä¹‹åï¼Œè¯¥ Session ä¸­çš„æ‰€æœ‰ Cache å°±å°†æ¸…ç©ºï¼Œé»˜è®¤æ‰“å¼€ä¸€çº§ç¼“å­˜ï¼›\n\n2ï¼‰äºŒçº§ç¼“å­˜ä¸ä¸€çº§ç¼“å­˜å…¶æœºåˆ¶ç›¸åŒï¼Œé»˜è®¤ä¹Ÿæ˜¯é‡‡ç”¨ PerpetualCacheï¼ŒHashMap å­˜å‚¨ï¼Œä¸åŒåœ¨äºå…¶å­˜å‚¨ä½œç”¨åŸŸä¸º Mapper(Namespace)ï¼Œå¹¶ä¸”å¯è‡ªå®šä¹‰å­˜å‚¨æºï¼Œå¦‚ Ehcacheã€‚é»˜è®¤ä¸æ‰“å¼€äºŒçº§ç¼“å­˜ï¼Œè¦å¼€å¯äºŒçº§ç¼“å­˜ï¼Œä½¿ç”¨äºŒçº§ç¼“å­˜å±æ€§ç±»éœ€è¦å®ç°Serializableåºåˆ—åŒ–æ¥å£(å¯ç”¨æ¥ä¿å­˜å¯¹è±¡çš„çŠ¶æ€),å¯åœ¨å®ƒçš„æ˜ å°„æ–‡ä»¶ä¸­é…ç½® `<cache/>` ï¼›\n\n3ï¼‰å¯¹äºç¼“å­˜æ•°æ®æ›´æ–°æœºåˆ¶ï¼Œå½“æŸä¸€ä¸ªä½œç”¨åŸŸ(ä¸€çº§ç¼“å­˜ Session/äºŒçº§ç¼“å­˜Namespaces)çš„è¿›è¡Œäº†C/U/D æ“ä½œåï¼Œé»˜è®¤è¯¥ä½œç”¨åŸŸä¸‹æ‰€æœ‰ select ä¸­çš„ç¼“å­˜å°†è¢« clearã€‚ \n\n### ä»€ä¹ˆæ˜¯MyBatisçš„æ¥å£ç»‘å®šï¼Ÿæœ‰å“ªäº›å®ç°æ–¹å¼ï¼Ÿ\n\næ¥å£ç»‘å®šï¼Œå°±æ˜¯åœ¨MyBatisä¸­ä»»æ„å®šä¹‰æ¥å£,ç„¶åæŠŠæ¥å£é‡Œé¢çš„æ–¹æ³•å’ŒSQLè¯­å¥ç»‘å®š, æˆ‘ä»¬ç›´æ¥è°ƒç”¨æ¥å£æ–¹æ³•å°±å¯ä»¥,è¿™æ ·æ¯”èµ·åŸæ¥äº†SqlSessionæä¾›çš„æ–¹æ³•æˆ‘ä»¬å¯ä»¥æœ‰æ›´åŠ çµæ´»çš„é€‰æ‹©å’Œè®¾ç½®ã€‚\n\næ¥å£ç»‘å®šæœ‰ä¸¤ç§å®ç°æ–¹å¼ï¼š\n\n1. é€šè¿‡æ³¨è§£ç»‘å®šï¼Œå°±æ˜¯åœ¨æ¥å£çš„æ–¹æ³•ä¸Šé¢åŠ ä¸Š @Selectã€@Updateç­‰æ³¨è§£ï¼Œé‡Œé¢åŒ…å«Sqlè¯­å¥æ¥ç»‘å®šï¼›\n2. é€šè¿‡xmlé‡Œé¢å†™SQLæ¥ç»‘å®š, åœ¨è¿™ç§æƒ…å†µä¸‹,è¦æŒ‡å®šxmlæ˜ å°„æ–‡ä»¶é‡Œé¢çš„namespaceå¿…é¡»ä¸ºæ¥å£çš„å…¨è·¯å¾„åã€‚å½“Sqlè¯­å¥æ¯”è¾ƒç®€å•æ—¶å€™,ç”¨æ³¨è§£ç»‘å®š, å½“SQLè¯­å¥æ¯”è¾ƒå¤æ‚æ—¶å€™,ç”¨xmlç»‘å®š,ä¸€èˆ¬ç”¨xmlç»‘å®šçš„æ¯”è¾ƒå¤šã€‚\n","source":"_posts/Javaå…«è‚¡æ–‡ - MyBatis.md","raw":"---\ntitle: Javaå…«è‚¡æ–‡ - MyBatis\ncopyright: true\nmathjax: false\ncategories:\n  - Javaå…«è‚¡æ–‡\ndate: 2023-01-23 15:30:00\ntags:\ntoc: true\nurlname: java-mybatis\n---\n\n> æ•´ç†çš„MyBatisæ¡†æ¶ç›¸å…³çŸ¥è¯†ç‚¹å’Œé¢è¯•é¢˜ï¼Œéƒ¨åˆ†å†…å®¹æ‘˜è‡ªç½‘ç»œï¼Œå¦‚æœ‰ä¾µæƒè¯·è”ç³»æˆ‘ï½<!--more-->\n\n\n### ä»€ä¹ˆæ˜¯MyBatisï¼Ÿ\n\n1. MyBatisæ˜¯ä¸€ä¸ªåŠORMï¼ˆå¯¹è±¡å…³ç³»æ˜ å°„ï¼‰æ¡†æ¶ï¼Œå®ƒå†…éƒ¨å°è£…äº†JDBCï¼Œå¼€å‘æ—¶åªéœ€è¦å…³æ³¨SQLè¯­å¥æœ¬èº«ï¼Œä¸éœ€è¦èŠ±è´¹ç²¾åŠ›å»å¤„ç†**åŠ è½½é©±åŠ¨ã€åˆ›å»ºè¿æ¥ã€åˆ›å»ºstatement**ç­‰ç¹æ‚çš„è¿‡ç¨‹ã€‚\n2. é€šè¿‡xml æ–‡ä»¶æˆ–æ³¨è§£çš„æ–¹å¼å°†è¦æ‰§è¡Œçš„å„ç§ statement é…ç½®èµ·æ¥ï¼Œå¹¶é€šè¿‡javaå¯¹è±¡å’Œ statementä¸­SQLçš„åŠ¨æ€å‚æ•°è¿›è¡Œæ˜ å°„ç”Ÿæˆæœ€ç»ˆæ‰§è¡Œçš„SQLè¯­å¥ï¼Œæœ€åç”±mybatisæ¡†æ¶æ‰§è¡ŒSQLå¹¶å°†ç»“æœæ˜ å°„ä¸ºjavaå¯¹è±¡å¹¶è¿”å›ã€‚ï¼ˆä»æ‰§è¡ŒSQLåˆ°è¿”å›resultçš„è¿‡ç¨‹ï¼‰ã€‚\n\n### ORMæ˜¯ä»€ä¹ˆ\n\nORMï¼ˆObject Relational Mappingï¼‰ï¼Œå¯¹è±¡å…³ç³»æ˜ å°„ï¼Œå°±æ˜¯æŠŠæ•°æ®åº“è¡¨å’Œå®ä½“ç±»åŠå®ä½“ç±»çš„å±æ€§å¯¹åº”èµ·æ¥\n\nè®©æˆ‘ä»¬å¯ä»¥æ“ä½œå®ä½“ç±»å°±å®ç°æ“ä½œæ•°æ®åº“è¡¨ã€‚\n\n### ä¸ºä»€ä¹ˆè¯´MyBatisæ˜¯åŠè‡ªåŠ¨ORMæ˜ å°„å·¥å…·ï¼Ÿå®ƒä¸å…¨è‡ªåŠ¨çš„åŒºåˆ«åœ¨å“ªé‡Œï¼Ÿ\n\nMyBatisåœ¨æŸ¥è¯¢å…³è”å¯¹è±¡æˆ–å…³è”é›†åˆå¯¹è±¡æ—¶ï¼Œéœ€è¦æ‰‹åŠ¨ç¼–å†™SQLæ¥å®Œæˆï¼Œæ‰€ä»¥ï¼Œç§°ä¹‹ä¸ºåŠè‡ªåŠ¨ORMæ˜ å°„å·¥å…·ã€‚\n\n### JDBCç¼–ç¨‹æœ‰å“ªäº›ä¸è¶³ä¹‹å¤„ï¼ŒMyBatisæ˜¯å¦‚ä½•è§£å†³çš„ï¼Ÿ\n\n1. æ•°æ®åº“è¿æ¥åˆ›å»ºã€é‡Šæ”¾é¢‘ç¹ï¼Œé€ æˆç³»ç»Ÿèµ„æºæµªè´¹ä»è€Œå½±å“ç³»ç»Ÿæ€§èƒ½\n2. SQLè¯­å¥å†™åœ¨ä»£ç ä¸­é€ æˆä»£ç **ä¸æ˜“ç»´æŠ¤**\n3. å‘SQLè¯­å¥**ä¼ å‚**éº»çƒ¦\n4. å¯¹**ç»“æœé›†è§£æ**éº»çƒ¦\n\n### MyBatisç¼–ç¨‹æ­¥éª¤æ˜¯ä»€ä¹ˆæ ·çš„ï¼Ÿ\n\n1. è¯»å–é…ç½®æ–‡ä»¶ï¼Œåˆ›å»ºSqlSessionFactoryå·¥å‚\n2. é€šè¿‡SqlSessionFactoryå·¥å‚åˆ›å»ºSqlSession å¯¹è±¡\n3. ä½¿ç”¨ SqlSession åˆ›å»º Dao æ¥å£çš„ä»£ç†å¯¹è±¡\n4. ä½¿ç”¨ä»£ç†å¯¹è±¡æ‰§è¡Œæ–¹æ³•\n5. è°ƒç”¨session.commit()æäº¤äº‹åŠ¡\n6. è°ƒç”¨session.close()å…³é—­ä¼šè¯\n\n### \\#{}å’Œ\\${}çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ\n\nmybatisåœ¨å¤„ç† \\#{} æ—¶ï¼Œä¼šå°†SQLä¸­çš„ \\#{} æ›¿æ¢ä¸º ? å·ï¼Œè°ƒç”¨PreparedStatementçš„setæ–¹æ³•æ¥èµ‹å€¼ã€‚\nè¿™æ˜¯**é¢„ç¼–è¯‘å¤„ç†**ï¼Œå¯ä»¥æé«˜SQLæ‰§è¡Œæ•ˆç‡ï¼Œæ›´é‡è¦çš„æ˜¯**å¯ä»¥é˜²æ­¢SQLæ³¨å…¥**ï¼›\n\nmybatisåœ¨å¤„ç† \\${} æ—¶ï¼Œå°±æ˜¯æŠŠ \\${} ä½¿ç”¨**å­—ç¬¦ä¸²æ›¿æ¢**ã€‚ä½¿ç”¨è¯¥æ–¹å¼å¦‚æœä¼ å…¥idçš„è¯ï¼Œä¼šæŠŠid=1è½¬æ¢ä¸ºid=\"1\"å­—ç¬¦ä¸²å½¢å¼ï¼Œè€Œæ•°æ®åº“ä¸­idå®é™…ä¸ºæ•°å€¼å‹è¿™æ ·å°±ä¸åŒ¹é…äº†ï¼ŒæŸ¥è¯¢å¤±è´¥ã€‚ï¼ˆ\\${}æ˜¯å­—ç¬¦ä¸²æ›¿æ¢ï¼Œé€šå¸¸åœ¨ELè¡¨è¾¾å¼ä¸­ä½¿ç”¨ï¼Œç”¨æ¥å±•ç¤ºåç«¯ä¼ é€’åˆ°å‰ç«¯çš„å€¼ï¼‰ã€‚\n\n### å½“å®ä½“ç±»ä¸­çš„å±æ€§åå’Œè¡¨ä¸­çš„å­—æ®µåä¸ä¸€æ · ï¼Œæ€ä¹ˆåŠ ï¼Ÿ\n\n1. é€šè¿‡åœ¨æŸ¥è¯¢çš„SQLè¯­å¥ä¸­å®šä¹‰æ•°æ®åº“å­—æ®µåçš„åˆ«åï¼Œè®©æ•°æ®åº“å­—æ®µåçš„åˆ«åå’Œå®ä½“ç±»çš„å±æ€§åä¸€è‡´ã€‚\n2. é€šè¿‡ `<resultMap>`æ¥æ˜ å°„å­—æ®µåå’Œå®ä½“ç±»å±æ€§åçš„ä¸€ä¸€å¯¹åº”çš„å…³ç³»ã€‚\n\n### æ¨¡ç³ŠæŸ¥è¯¢likeè¯­å¥è¯¥æ€ä¹ˆå†™?\n\n1. åœ¨Javaä»£ç ä¸­æ·»åŠ SQLé€šé…ç¬¦ã€‚\n\n\t```xml\n\tstring wildcardname = â€œ%smi%â€;\n\tlist<name> names = mapper.selectlike(wildcardname);\n\t\n\t<select id=â€selectlikeâ€>\n\t\tselect * from foo where bar like #{value}\n\t</select>\n\t```\n\n2. åœ¨SQLè¯­å¥ä¸­æ‹¼æ¥é€šé…ç¬¦%ï¼Œä¼šå¼•èµ·SQLæ³¨å…¥\n\n\t```xml\n\tstring wildcardname = â€œsmiâ€;\n\tlist<name> names = mapper.selectlike(wildcardname);\n\t\n\t<select id=â€selectlikeâ€>\n\t\tselect * from foo where bar like \"%\"#{value}\"%\"\n\t</select>\n\t```\n\n### MyBatiséƒ½æœ‰å“ªäº›Executoræ‰§è¡Œå™¨ï¼Ÿå®ƒä»¬ä¹‹é—´çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ\n\nMyBatisæœ‰ä¸‰ç§åŸºæœ¬çš„Executoræ‰§è¡Œå™¨ï¼ŒSimpleExecutorã€ReuseExecutorã€BatchExecutorã€‚\n\n- **SimpleExecutor** ï¼šæ¯æ¬¡å¼€å¯ä¸€ä¸ªStatementå¯¹è±¡ï¼Œç”¨å®Œç«‹åˆ»å…³é—­Statementå¯¹è±¡ã€‚\n- **ReuseExecutor** ï¼šé‡å¤ä½¿ç”¨åˆ›å»ºçš„Statementå¯¹è±¡ã€‚\n- **BatchExecutor** ï¼šç¼“å­˜äº†å¤šä¸ªStatementå¯¹è±¡ï¼Œä¸€èµ·æ‰§è¡Œæ‰¹é‡æ›´æ–°ã€‚\n\n### é€šå¸¸ä¸€ä¸ªxmlæ˜ å°„æ–‡ä»¶ï¼Œéƒ½ä¼šå†™ä¸€ä¸ªDaoæ¥å£ä¸ä¹‹å¯¹åº”ï¼Œè¯·é—®ï¼Œè¿™ä¸ªDaoæ¥å£çš„å·¥ä½œåŸç†æ˜¯ä»€ä¹ˆï¼ŸDaoæ¥å£é‡Œçš„æ–¹æ³•ï¼Œå‚æ•°ä¸åŒæ—¶ï¼Œæ–¹æ³•èƒ½é‡è½½å—ï¼Ÿ\n\nDao æ¥å£ï¼Œå°±æ˜¯äººä»¬å¸¸è¯´çš„ `Mapper`æ¥å£ï¼Œæ¥å£çš„å…¨é™åï¼Œå°±æ˜¯æ˜ å°„æ–‡ä»¶ä¸­çš„ namespace çš„å€¼ï¼Œæ¥å£çš„æ–¹æ³•åï¼Œå°±æ˜¯æ˜ å°„æ–‡ä»¶ä¸­`MappedStatement`çš„ id å€¼ï¼Œæ¥å£æ–¹æ³•å†…çš„å‚æ•°ï¼Œå°±æ˜¯ä¼ é€’ç»™ SQL çš„å‚æ•°ã€‚`Mapper`æ¥å£æ˜¯æ²¡æœ‰å®ç°ç±»çš„ï¼Œå½“è°ƒç”¨æ¥å£æ–¹æ³•æ—¶ï¼Œæ¥å£å…¨é™å+æ–¹æ³•åæ‹¼æ¥å­—ç¬¦ä¸²ä½œä¸º key å€¼ï¼Œå¯å”¯ä¸€å®šä½ä¸€ä¸ª`MappedStatement`ï¼Œä¸¾ä¾‹ï¼š`com.yaxing.dao.IUserDao.findAll`ï¼Œå¯ä»¥å”¯ä¸€æ‰¾åˆ° namespace ä¸º`com.yaxing.dao.IUserDao`ä¸‹é¢`id = findAll`çš„`MappedStatement`ã€‚åœ¨ MyBatis ä¸­ï¼Œæ¯ä¸€ä¸ª`<select>`ã€`<insert>`ã€`<update>`ã€`<delete>`æ ‡ç­¾ï¼Œéƒ½ä¼šè¢«è§£æä¸ºä¸€ä¸ª`MappedStatement`å¯¹è±¡ï¼Œç„¶åæ‰§è¡Œåç»­çš„æ“ä½œã€‚\n\n```xml\n<mapper namespace=\"com.yaxing.dao.IUserDao\">\n    <select id=\"findAll\" resultType=\"com.yaxing.domain.User\">\n        select * from user;\n    </select>\n</mapper>\n```\n\nDao æ¥å£é‡Œçš„æ–¹æ³•å¯ä»¥é‡è½½ï¼Œä½†æ˜¯MyBatisçš„XMLé‡Œé¢çš„IDä¸å…è®¸é‡å¤ï¼Œä¹Ÿå°±æ˜¯è¯´å¯¹äºåŒä¸€ä¸ªæ¥å£æ–¹æ³•åï¼Œmapperæ–‡ä»¶ä¸­åªèƒ½æœ‰ä¸€ä¸ªè¯¥idã€‚\nå¯ä»¥ä½¿ç”¨åŠ¨æ€SQLå®ç°æ¥å£é‡è½½å¯¹åº”çš„maperã€‚\n\n```java\n/**\n * Mapperæ¥å£é‡Œé¢æ–¹æ³•é‡è½½\n */\npublic interface StuMapper {\n    List<Student> getAllStu();\n    List<Student> getAllStu(@Param(\"id\") Integer id);\n}\n```\n\nç„¶ååœ¨ `StuMapper.xml` ä¸­åˆ©ç”¨MyBatisçš„åŠ¨æ€SQLå°±å¯ä»¥å®ç°ã€‚\n\n```xml\n<select id=\"getAllStu\" resultType=\"com.pojo.Student\">\n    select * from student\n    <where>\n        <if test=\"id != null\">\n            id = #{id}\n        </if>\n    </where>\n</select>\n```\n\nèƒ½æ­£å¸¸è¿è¡Œï¼Œå¹¶èƒ½å¾—åˆ°ç›¸åº”çš„ç»“æœï¼Œè¿™æ ·å°±å®ç°äº†åœ¨Daoæ¥å£ä¸­å†™é‡è½½æ–¹æ³•ã€‚\n\n**MyBatis çš„ Dao æ¥å£å¯ä»¥æœ‰å¤šä¸ªé‡è½½æ–¹æ³•ï¼Œä½†æ˜¯å¤šä¸ªæ¥å£å¯¹åº”çš„æ˜ å°„å¿…é¡»åªæœ‰ä¸€ä¸ªï¼Œå¦åˆ™å¯åŠ¨ä¼šæŠ¥é”™ã€‚**\n\n### MyBatisæ˜¯å¦‚ä½•å°†SQLæ‰§è¡Œç»“æœå°è£…ä¸ºç›®æ ‡å¯¹è±¡å¹¶è¿”å›çš„ï¼Ÿéƒ½æœ‰å“ªäº›æ˜ å°„å½¢å¼ï¼Ÿ\n\n1. ä½¿ç”¨ `<resultMap>`æ ‡ç­¾ï¼Œé€ä¸€å®šä¹‰æ•°æ®åº“åˆ—åå’Œå¯¹è±¡å±æ€§åä¹‹é—´çš„æ˜ å°„å…³ç³»ã€‚\n\n2. ä½¿ç”¨SQLåˆ—çš„åˆ«ååŠŸèƒ½ï¼Œå°†åˆ—çš„åˆ«åå±æ€§å¯¹åº”ä¸ºå¯¹è±¡å±æ€§åã€‚\n\næœ‰äº†åˆ—åä¸å±æ€§åçš„æ˜ å°„å…³ç³»åï¼ŒMyBatis**é€šè¿‡åå°„åˆ›å»ºå¯¹è±¡**ï¼ŒåŒæ—¶**ä½¿ç”¨åå°„ç»™å¯¹è±¡çš„å±æ€§é€ä¸€èµ‹å€¼**å¹¶è¿”å›ï¼Œé‚£äº›æ‰¾ä¸åˆ°æ˜ å°„å…³ç³»çš„å±æ€§ï¼Œæ˜¯æ— æ³•å®Œæˆèµ‹å€¼çš„ã€‚\n\n### åœ¨mapperä¸­å¦‚ä½•ä¼ é€’å¤šä¸ªå‚æ•°?\n\n1. é¡ºåºä¼ å‚æ³•ï¼Œ\\#{} é‡Œé¢çš„æ•°å­—ä»£è¡¨ä¼ å…¥å‚æ•°çš„é¡ºåº\n2. @Paramæ³¨è§£ä¼ å‚æ³•ï¼Œ\\#{} é‡Œé¢çš„åç§°å¯¹åº”çš„æ˜¯æ³¨è§£@Paramæ‹¬å·é‡Œé¢ä¿®é¥°çš„åç§°\n3. mapä¼ å‚ï¼Œ\\#{} é‡Œé¢çš„åç§°å¯¹åº”çš„æ˜¯Mapé‡Œé¢çš„keyåç§°ã€‚\n4. Java Beanä¼ å‚æ³•ï¼Œ\\#{} é‡Œé¢çš„åç§°å¯¹åº”çš„æ˜¯Userç±»é‡Œé¢çš„æˆå‘˜å±æ€§ã€‚\n\n### MyBatisåŠ¨æ€SQLæœ‰ä»€ä¹ˆç”¨ï¼Ÿæ‰§è¡ŒåŸç†ï¼Ÿæœ‰å“ªäº›åŠ¨æ€SQLï¼Ÿ\n\nMyBatisåŠ¨æ€SQLå¯ä»¥åœ¨xmlæ˜ å°„æ–‡ä»¶å†…ï¼Œä»¥æ ‡ç­¾çš„å½¢å¼ç¼–å†™åŠ¨æ€SQL.\n\næ‰§è¡ŒåŸç†æ˜¯æ ¹æ®è¡¨è¾¾å¼çš„å€¼ å®Œæˆé€»è¾‘åˆ¤æ–­å¹¶åŠ¨æ€æ‹¼æ¥SQLã€‚\n\nMyBatisæä¾›äº†9ç§åŠ¨æ€SQLæ ‡ç­¾ï¼š å¸¸ç”¨çš„æœ‰ `if|where|foreach`\n\n```xml\n<select id=\"getAllStu\" resultType=\"com.pojo.Student\">\n    select * from student\n    <where>\n        <if test=\"id != null\">\n            id = #{id}\n        </if>\n    </where>\n</select>\n```\n\n### MyBatiså®ç°ä¸€å¯¹å¤šæœ‰å‡ ç§æ–¹å¼,æ€ä¹ˆæ“ä½œçš„ï¼Ÿ\n\næœ‰**è”åˆæŸ¥è¯¢**å’Œ**åµŒå¥—æŸ¥è¯¢**ã€‚\n\nè”åˆæŸ¥è¯¢æ˜¯å‡ ä¸ªè¡¨è”åˆæŸ¥è¯¢,åªæŸ¥è¯¢ä¸€æ¬¡,é€šè¿‡åœ¨resultMapé‡Œé¢çš„collectionèŠ‚ç‚¹é…ç½®ä¸€å¯¹å¤šçš„ç±»å°±å¯ä»¥å®Œæˆï¼›\n\nåµŒå¥—æŸ¥è¯¢æ˜¯å…ˆæŸ¥ä¸€ä¸ªè¡¨,æ ¹æ®è¿™ä¸ªè¡¨é‡Œé¢çš„ ç»“æœçš„å¤–é”®id,å»å†å¦å¤–ä¸€ä¸ªè¡¨é‡Œé¢æŸ¥è¯¢æ•°æ®,ä¹Ÿæ˜¯é€šè¿‡é…ç½®collection,ä½†å¦å¤–ä¸€ä¸ªè¡¨çš„æŸ¥è¯¢é€šè¿‡selectèŠ‚ç‚¹é…ç½®ã€‚\n\n### MyBatisæ˜¯å¦æ”¯æŒå»¶è¿ŸåŠ è½½ï¼Ÿå¦‚æœæ”¯æŒï¼Œå®ƒçš„å®ç°åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ\n\nMyBatisä»…æ”¯æŒassociationå…³è”å¯¹è±¡å’Œcollectionå…³è”é›†åˆå¯¹è±¡çš„å»¶è¿ŸåŠ è½½ã€‚\nassociationæŒ‡çš„å°±æ˜¯ä¸€å¯¹ä¸€ï¼ŒcollectionæŒ‡çš„å°±æ˜¯ä¸€å¯¹å¤šæŸ¥è¯¢ã€‚\nåœ¨MyBatisé…ç½®æ–‡ä»¶ä¸­ï¼Œå¯ä»¥é…ç½®æ˜¯å¦å¯ç”¨å»¶è¿ŸåŠ è½½lazyLoadingEnabled=true|falseã€‚\n\nå®ƒçš„åŸç†æ˜¯ï¼Œä½¿ç”¨CGLIBåˆ›å»ºç›®æ ‡å¯¹è±¡çš„ä»£ç†å¯¹è±¡ï¼Œå½“è°ƒç”¨ç›®æ ‡æ–¹æ³•æ—¶ï¼Œè¿›å…¥æ‹¦æˆªå™¨æ–¹æ³•ï¼Œæ¯”å¦‚è°ƒç”¨a.getB().getName()ï¼Œæ‹¦æˆªå™¨invoke()æ–¹æ³•å‘ç°a.getB()æ˜¯nullå€¼ï¼Œé‚£ä¹ˆå°±ä¼šå•ç‹¬å‘é€äº‹å…ˆä¿å­˜å¥½çš„æŸ¥è¯¢å…³è”Bå¯¹è±¡çš„SQLï¼ŒæŠŠBæŸ¥è¯¢ä¸Šæ¥ï¼Œç„¶åè°ƒç”¨a.setB(b)ï¼Œäºæ˜¯açš„å¯¹è±¡bå±æ€§å°±æœ‰å€¼äº†ï¼Œæ¥ç€å®Œæˆa.getB().getName()æ–¹æ³•çš„è°ƒç”¨ã€‚è¿™å°±æ˜¯å»¶è¿ŸåŠ è½½çš„åŸºæœ¬åŸç†ã€‚\n\n### MyBatisçš„ä¸€çº§ã€äºŒçº§ç¼“å­˜\n\n**ä¸€çº§ç¼“å­˜**ï¼šä¸€çº§ç¼“å­˜æ˜¯SqlSessionèŒƒå›´çš„ç¼“å­˜\n\nå½“æˆ‘ä»¬æ‰§è¡ŒæŸ¥è¯¢ä¹‹åï¼ŒæŸ¥è¯¢çš„ç»“æœä¼šåŒæ—¶å­˜å…¥åˆ°SqlSessionä¸ºæˆ‘ä»¬æä¾›çš„ä¸€å—åŒºåŸŸä¸­ã€‚è¯¥åŒºåŸŸçš„ç»“æ„æ˜¯ä¸€ä¸ªMapã€‚\nå½“æˆ‘ä»¬å†æ¬¡æŸ¥è¯¢åŒæ ·çš„æ•°æ®æ—¶ï¼ŒMyBatisä¼šå…ˆå»SqlSessionä¸­æŸ¥è¯¢æ˜¯å¦æœ‰ï¼Œæœ‰çš„è¯ç›´æ¥æ‹¿å‡ºæ¥ç”¨ã€‚\n\nå½“è°ƒç”¨SqlSessionçš„æ·»åŠ ï¼Œä¿®æ”¹ï¼Œåˆ é™¤ï¼Œcommit()ï¼Œclose()ã€clearCache()ç­‰æ–¹æ³•æ—¶ï¼Œå°±ä¼šæ¸…ç©ºä¸€çº§ç¼“å­˜ã€‚\n\n> ç¬¬ä¸€æ¬¡å‘èµ·æŸ¥è¯¢ç”¨æˆ·idä¸º1çš„ç”¨æˆ·ä¿¡æ¯ï¼Œå…ˆå»æ‰¾ç¼“å­˜ä¸­æ˜¯å¦æœ‰idä¸º1çš„ç”¨æˆ·ä¿¡æ¯ï¼Œå¦‚æœæ²¡æœ‰ï¼Œä»æ•°æ®åº“æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯ã€‚ \n> å¾—åˆ°ç”¨æˆ·ä¿¡æ¯ï¼Œå°†ç”¨æˆ·ä¿¡æ¯å­˜å‚¨åˆ°ä¸€çº§ç¼“å­˜ä¸­ã€‚ \n> å¦‚æœSQLSessionå»æ‰§è¡Œcommitæ“ä½œï¼ˆæ‰§è¡Œæ’å…¥ã€æ›´æ–°ã€åˆ é™¤ï¼‰ï¼Œæ¸…ç©ºSqlSessionä¸­çš„ä¸€çº§ç¼“å­˜ï¼Œè¿™æ ·åšçš„ç›®çš„ä¸ºäº†è®©ç¼“å­˜ä¸­å­˜å‚¨çš„æ˜¯æœ€æ–°çš„ä¿¡æ¯ï¼Œé¿å…è„è¯»ã€‚ \n> ç¬¬äºŒæ¬¡å‘èµ·æŸ¥è¯¢ç”¨æˆ·idä¸º1çš„ç”¨æˆ·ä¿¡æ¯ï¼Œå…ˆå»æ‰¾ç¼“å­˜ä¸­æ˜¯å¦æœ‰idä¸º1çš„ç”¨æˆ·ä¿¡æ¯ï¼Œç¼“å­˜ä¸­æœ‰ï¼Œç›´æ¥ä»ç¼“å­˜ä¸­è·å–ç”¨æˆ·ä¿¡æ¯ã€‚\n\n**äºŒçº§ç¼“å­˜**ï¼šäºŒçº§ç¼“å­˜æ˜¯mapperæ˜ å°„çº§åˆ«çš„ç¼“å­˜ï¼Œå¤šä¸ªSqlSessionå»æ“ä½œåŒä¸€ä¸ªMapperæ˜ å°„çš„SQLè¯­å¥ï¼Œå¤šä¸ªSqlSessionå¯ä»¥å…±ç”¨äºŒçº§ç¼“å­˜ï¼ŒäºŒçº§ç¼“å­˜æ˜¯è·¨SqlSessionçš„ã€‚\n\nMyBatisä¸­SqlSessionFactoryå¯¹è±¡çš„ç¼“å­˜\n\nâ€‹\tç”±åŒä¸€ä¸ªSqlSessionFactoryå¯¹è±¡åˆ›å»ºçš„SqlSessionå…±äº«å…¶ç¼“å­˜ã€‚\n\nâ€‹\täºŒçº§ç¼“å­˜å­˜æ”¾çš„æ˜¯æ•°æ®ï¼Œè€Œä¸æ˜¯å¯¹è±¡ã€‚\n\n> SQLSession1å»æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯ï¼ŒæŸ¥è¯¢åˆ°ç”¨æˆ·ä¿¡æ¯ä¼šå°†æŸ¥è¯¢æ•°æ®å­˜å‚¨åˆ°äºŒçº§ç¼“å­˜ä¸­ã€‚\n> å¦‚æœSqlSession3å»æ‰§è¡Œç›¸åŒ mapperæ˜ å°„ä¸‹SQLï¼Œæ‰§è¡Œcommitæäº¤ï¼Œå°†ä¼šæ¸…ç©ºè¯¥ mapperæ˜ å°„ä¸‹çš„äºŒçº§ç¼“å­˜åŒºåŸŸçš„æ•°æ®ã€‚ \n> SQLSession2å»æŸ¥è¯¢ä¸SQLSession1ç›¸åŒçš„ç”¨æˆ·ä¿¡æ¯ï¼Œé¦–å…ˆä¼šå»ç¼“å­˜ä¸­æ‰¾æ˜¯å¦å­˜åœ¨æ•°æ®ï¼Œå¦‚æœå­˜åœ¨ç›´æ¥ä»ç¼“å­˜ä¸­å–å‡ºæ•°æ®ã€‚\n\n1ï¼‰ä¸€çº§ç¼“å­˜: åŸºäº PerpetualCache çš„ HashMap æœ¬åœ°ç¼“å­˜ï¼Œå…¶å­˜å‚¨ä½œç”¨åŸŸä¸º Sessionï¼Œå½“ Session flush æˆ– close ä¹‹åï¼Œè¯¥ Session ä¸­çš„æ‰€æœ‰ Cache å°±å°†æ¸…ç©ºï¼Œé»˜è®¤æ‰“å¼€ä¸€çº§ç¼“å­˜ï¼›\n\n2ï¼‰äºŒçº§ç¼“å­˜ä¸ä¸€çº§ç¼“å­˜å…¶æœºåˆ¶ç›¸åŒï¼Œé»˜è®¤ä¹Ÿæ˜¯é‡‡ç”¨ PerpetualCacheï¼ŒHashMap å­˜å‚¨ï¼Œä¸åŒåœ¨äºå…¶å­˜å‚¨ä½œç”¨åŸŸä¸º Mapper(Namespace)ï¼Œå¹¶ä¸”å¯è‡ªå®šä¹‰å­˜å‚¨æºï¼Œå¦‚ Ehcacheã€‚é»˜è®¤ä¸æ‰“å¼€äºŒçº§ç¼“å­˜ï¼Œè¦å¼€å¯äºŒçº§ç¼“å­˜ï¼Œä½¿ç”¨äºŒçº§ç¼“å­˜å±æ€§ç±»éœ€è¦å®ç°Serializableåºåˆ—åŒ–æ¥å£(å¯ç”¨æ¥ä¿å­˜å¯¹è±¡çš„çŠ¶æ€),å¯åœ¨å®ƒçš„æ˜ å°„æ–‡ä»¶ä¸­é…ç½® `<cache/>` ï¼›\n\n3ï¼‰å¯¹äºç¼“å­˜æ•°æ®æ›´æ–°æœºåˆ¶ï¼Œå½“æŸä¸€ä¸ªä½œç”¨åŸŸ(ä¸€çº§ç¼“å­˜ Session/äºŒçº§ç¼“å­˜Namespaces)çš„è¿›è¡Œäº†C/U/D æ“ä½œåï¼Œé»˜è®¤è¯¥ä½œç”¨åŸŸä¸‹æ‰€æœ‰ select ä¸­çš„ç¼“å­˜å°†è¢« clearã€‚ \n\n### ä»€ä¹ˆæ˜¯MyBatisçš„æ¥å£ç»‘å®šï¼Ÿæœ‰å“ªäº›å®ç°æ–¹å¼ï¼Ÿ\n\næ¥å£ç»‘å®šï¼Œå°±æ˜¯åœ¨MyBatisä¸­ä»»æ„å®šä¹‰æ¥å£,ç„¶åæŠŠæ¥å£é‡Œé¢çš„æ–¹æ³•å’ŒSQLè¯­å¥ç»‘å®š, æˆ‘ä»¬ç›´æ¥è°ƒç”¨æ¥å£æ–¹æ³•å°±å¯ä»¥,è¿™æ ·æ¯”èµ·åŸæ¥äº†SqlSessionæä¾›çš„æ–¹æ³•æˆ‘ä»¬å¯ä»¥æœ‰æ›´åŠ çµæ´»çš„é€‰æ‹©å’Œè®¾ç½®ã€‚\n\næ¥å£ç»‘å®šæœ‰ä¸¤ç§å®ç°æ–¹å¼ï¼š\n\n1. é€šè¿‡æ³¨è§£ç»‘å®šï¼Œå°±æ˜¯åœ¨æ¥å£çš„æ–¹æ³•ä¸Šé¢åŠ ä¸Š @Selectã€@Updateç­‰æ³¨è§£ï¼Œé‡Œé¢åŒ…å«Sqlè¯­å¥æ¥ç»‘å®šï¼›\n2. é€šè¿‡xmlé‡Œé¢å†™SQLæ¥ç»‘å®š, åœ¨è¿™ç§æƒ…å†µä¸‹,è¦æŒ‡å®šxmlæ˜ å°„æ–‡ä»¶é‡Œé¢çš„namespaceå¿…é¡»ä¸ºæ¥å£çš„å…¨è·¯å¾„åã€‚å½“Sqlè¯­å¥æ¯”è¾ƒç®€å•æ—¶å€™,ç”¨æ³¨è§£ç»‘å®š, å½“SQLè¯­å¥æ¯”è¾ƒå¤æ‚æ—¶å€™,ç”¨xmlç»‘å®š,ä¸€èˆ¬ç”¨xmlç»‘å®šçš„æ¯”è¾ƒå¤šã€‚\n","slug":"Javaå…«è‚¡æ–‡ - MyBatis","published":1,"updated":"2023-01-23T08:47:12.143Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cld8kfsiu000bzvt8gmhrh2x5","content":"<blockquote>\n<p>æ•´ç†çš„MyBatisæ¡†æ¶ç›¸å…³çŸ¥è¯†ç‚¹å’Œé¢è¯•é¢˜ï¼Œéƒ¨åˆ†å†…å®¹æ‘˜è‡ªç½‘ç»œï¼Œå¦‚æœ‰ä¾µæƒè¯·è”ç³»æˆ‘ï½<span id=\"more\"></span></p>\n</blockquote>\n<h3 id=\"ä»€ä¹ˆæ˜¯MyBatisï¼Ÿ\"><a href=\"#ä»€ä¹ˆæ˜¯MyBatisï¼Ÿ\" class=\"headerlink\" title=\"ä»€ä¹ˆæ˜¯MyBatisï¼Ÿ\"></a>ä»€ä¹ˆæ˜¯MyBatisï¼Ÿ</h3><ol>\n<li>MyBatisæ˜¯ä¸€ä¸ªåŠORMï¼ˆå¯¹è±¡å…³ç³»æ˜ å°„ï¼‰æ¡†æ¶ï¼Œå®ƒå†…éƒ¨å°è£…äº†JDBCï¼Œå¼€å‘æ—¶åªéœ€è¦å…³æ³¨SQLè¯­å¥æœ¬èº«ï¼Œä¸éœ€è¦èŠ±è´¹ç²¾åŠ›å»å¤„ç†<strong>åŠ è½½é©±åŠ¨ã€åˆ›å»ºè¿æ¥ã€åˆ›å»ºstatement</strong>ç­‰ç¹æ‚çš„è¿‡ç¨‹ã€‚</li>\n<li>é€šè¿‡xml æ–‡ä»¶æˆ–æ³¨è§£çš„æ–¹å¼å°†è¦æ‰§è¡Œçš„å„ç§ statement é…ç½®èµ·æ¥ï¼Œå¹¶é€šè¿‡javaå¯¹è±¡å’Œ statementä¸­SQLçš„åŠ¨æ€å‚æ•°è¿›è¡Œæ˜ å°„ç”Ÿæˆæœ€ç»ˆæ‰§è¡Œçš„SQLè¯­å¥ï¼Œæœ€åç”±mybatisæ¡†æ¶æ‰§è¡ŒSQLå¹¶å°†ç»“æœæ˜ å°„ä¸ºjavaå¯¹è±¡å¹¶è¿”å›ã€‚ï¼ˆä»æ‰§è¡ŒSQLåˆ°è¿”å›resultçš„è¿‡ç¨‹ï¼‰ã€‚</li>\n</ol>\n<h3 id=\"ORMæ˜¯ä»€ä¹ˆ\"><a href=\"#ORMæ˜¯ä»€ä¹ˆ\" class=\"headerlink\" title=\"ORMæ˜¯ä»€ä¹ˆ\"></a>ORMæ˜¯ä»€ä¹ˆ</h3><p>ORMï¼ˆObject Relational Mappingï¼‰ï¼Œå¯¹è±¡å…³ç³»æ˜ å°„ï¼Œå°±æ˜¯æŠŠæ•°æ®åº“è¡¨å’Œå®ä½“ç±»åŠå®ä½“ç±»çš„å±æ€§å¯¹åº”èµ·æ¥</p>\n<p>è®©æˆ‘ä»¬å¯ä»¥æ“ä½œå®ä½“ç±»å°±å®ç°æ“ä½œæ•°æ®åº“è¡¨ã€‚</p>\n<h3 id=\"ä¸ºä»€ä¹ˆè¯´MyBatisæ˜¯åŠè‡ªåŠ¨ORMæ˜ å°„å·¥å…·ï¼Ÿå®ƒä¸å…¨è‡ªåŠ¨çš„åŒºåˆ«åœ¨å“ªé‡Œï¼Ÿ\"><a href=\"#ä¸ºä»€ä¹ˆè¯´MyBatisæ˜¯åŠè‡ªåŠ¨ORMæ˜ å°„å·¥å…·ï¼Ÿå®ƒä¸å…¨è‡ªåŠ¨çš„åŒºåˆ«åœ¨å“ªé‡Œï¼Ÿ\" class=\"headerlink\" title=\"ä¸ºä»€ä¹ˆè¯´MyBatisæ˜¯åŠè‡ªåŠ¨ORMæ˜ å°„å·¥å…·ï¼Ÿå®ƒä¸å…¨è‡ªåŠ¨çš„åŒºåˆ«åœ¨å“ªé‡Œï¼Ÿ\"></a>ä¸ºä»€ä¹ˆè¯´MyBatisæ˜¯åŠè‡ªåŠ¨ORMæ˜ å°„å·¥å…·ï¼Ÿå®ƒä¸å…¨è‡ªåŠ¨çš„åŒºåˆ«åœ¨å“ªé‡Œï¼Ÿ</h3><p>MyBatisåœ¨æŸ¥è¯¢å…³è”å¯¹è±¡æˆ–å…³è”é›†åˆå¯¹è±¡æ—¶ï¼Œéœ€è¦æ‰‹åŠ¨ç¼–å†™SQLæ¥å®Œæˆï¼Œæ‰€ä»¥ï¼Œç§°ä¹‹ä¸ºåŠè‡ªåŠ¨ORMæ˜ å°„å·¥å…·ã€‚</p>\n<h3 id=\"JDBCç¼–ç¨‹æœ‰å“ªäº›ä¸è¶³ä¹‹å¤„ï¼ŒMyBatisæ˜¯å¦‚ä½•è§£å†³çš„ï¼Ÿ\"><a href=\"#JDBCç¼–ç¨‹æœ‰å“ªäº›ä¸è¶³ä¹‹å¤„ï¼ŒMyBatisæ˜¯å¦‚ä½•è§£å†³çš„ï¼Ÿ\" class=\"headerlink\" title=\"JDBCç¼–ç¨‹æœ‰å“ªäº›ä¸è¶³ä¹‹å¤„ï¼ŒMyBatisæ˜¯å¦‚ä½•è§£å†³çš„ï¼Ÿ\"></a>JDBCç¼–ç¨‹æœ‰å“ªäº›ä¸è¶³ä¹‹å¤„ï¼ŒMyBatisæ˜¯å¦‚ä½•è§£å†³çš„ï¼Ÿ</h3><ol>\n<li>æ•°æ®åº“è¿æ¥åˆ›å»ºã€é‡Šæ”¾é¢‘ç¹ï¼Œé€ æˆç³»ç»Ÿèµ„æºæµªè´¹ä»è€Œå½±å“ç³»ç»Ÿæ€§èƒ½</li>\n<li>SQLè¯­å¥å†™åœ¨ä»£ç ä¸­é€ æˆä»£ç <strong>ä¸æ˜“ç»´æŠ¤</strong></li>\n<li>å‘SQLè¯­å¥<strong>ä¼ å‚</strong>éº»çƒ¦</li>\n<li>å¯¹<strong>ç»“æœé›†è§£æ</strong>éº»çƒ¦</li>\n</ol>\n<h3 id=\"MyBatisç¼–ç¨‹æ­¥éª¤æ˜¯ä»€ä¹ˆæ ·çš„ï¼Ÿ\"><a href=\"#MyBatisç¼–ç¨‹æ­¥éª¤æ˜¯ä»€ä¹ˆæ ·çš„ï¼Ÿ\" class=\"headerlink\" title=\"MyBatisç¼–ç¨‹æ­¥éª¤æ˜¯ä»€ä¹ˆæ ·çš„ï¼Ÿ\"></a>MyBatisç¼–ç¨‹æ­¥éª¤æ˜¯ä»€ä¹ˆæ ·çš„ï¼Ÿ</h3><ol>\n<li>è¯»å–é…ç½®æ–‡ä»¶ï¼Œåˆ›å»ºSqlSessionFactoryå·¥å‚</li>\n<li>é€šè¿‡SqlSessionFactoryå·¥å‚åˆ›å»ºSqlSession å¯¹è±¡</li>\n<li>ä½¿ç”¨ SqlSession åˆ›å»º Dao æ¥å£çš„ä»£ç†å¯¹è±¡</li>\n<li>ä½¿ç”¨ä»£ç†å¯¹è±¡æ‰§è¡Œæ–¹æ³•</li>\n<li>è°ƒç”¨session.commit()æäº¤äº‹åŠ¡</li>\n<li>è°ƒç”¨session.close()å…³é—­ä¼šè¯</li>\n</ol>\n<h3 id=\"å’Œ-çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ\"><a href=\"#å’Œ-çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ\" class=\"headerlink\" title=\"#{}å’Œ${}çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ\"></a>#{}å’Œ${}çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</h3><p>mybatisåœ¨å¤„ç† #{} æ—¶ï¼Œä¼šå°†SQLä¸­çš„ #{} æ›¿æ¢ä¸º ? å·ï¼Œè°ƒç”¨PreparedStatementçš„setæ–¹æ³•æ¥èµ‹å€¼ã€‚<br>è¿™æ˜¯<strong>é¢„ç¼–è¯‘å¤„ç†</strong>ï¼Œå¯ä»¥æé«˜SQLæ‰§è¡Œæ•ˆç‡ï¼Œæ›´é‡è¦çš„æ˜¯<strong>å¯ä»¥é˜²æ­¢SQLæ³¨å…¥</strong>ï¼›</p>\n<p>mybatisåœ¨å¤„ç† ${} æ—¶ï¼Œå°±æ˜¯æŠŠ ${} ä½¿ç”¨<strong>å­—ç¬¦ä¸²æ›¿æ¢</strong>ã€‚ä½¿ç”¨è¯¥æ–¹å¼å¦‚æœä¼ å…¥idçš„è¯ï¼Œä¼šæŠŠid&#x3D;1è½¬æ¢ä¸ºid&#x3D;â€1â€å­—ç¬¦ä¸²å½¢å¼ï¼Œè€Œæ•°æ®åº“ä¸­idå®é™…ä¸ºæ•°å€¼å‹è¿™æ ·å°±ä¸åŒ¹é…äº†ï¼ŒæŸ¥è¯¢å¤±è´¥ã€‚ï¼ˆ${}æ˜¯å­—ç¬¦ä¸²æ›¿æ¢ï¼Œé€šå¸¸åœ¨ELè¡¨è¾¾å¼ä¸­ä½¿ç”¨ï¼Œç”¨æ¥å±•ç¤ºåç«¯ä¼ é€’åˆ°å‰ç«¯çš„å€¼ï¼‰ã€‚</p>\n<h3 id=\"å½“å®ä½“ç±»ä¸­çš„å±æ€§åå’Œè¡¨ä¸­çš„å­—æ®µåä¸ä¸€æ ·-ï¼Œæ€ä¹ˆåŠ-ï¼Ÿ\"><a href=\"#å½“å®ä½“ç±»ä¸­çš„å±æ€§åå’Œè¡¨ä¸­çš„å­—æ®µåä¸ä¸€æ ·-ï¼Œæ€ä¹ˆåŠ-ï¼Ÿ\" class=\"headerlink\" title=\"å½“å®ä½“ç±»ä¸­çš„å±æ€§åå’Œè¡¨ä¸­çš„å­—æ®µåä¸ä¸€æ · ï¼Œæ€ä¹ˆåŠ ï¼Ÿ\"></a>å½“å®ä½“ç±»ä¸­çš„å±æ€§åå’Œè¡¨ä¸­çš„å­—æ®µåä¸ä¸€æ · ï¼Œæ€ä¹ˆåŠ ï¼Ÿ</h3><ol>\n<li>é€šè¿‡åœ¨æŸ¥è¯¢çš„SQLè¯­å¥ä¸­å®šä¹‰æ•°æ®åº“å­—æ®µåçš„åˆ«åï¼Œè®©æ•°æ®åº“å­—æ®µåçš„åˆ«åå’Œå®ä½“ç±»çš„å±æ€§åä¸€è‡´ã€‚</li>\n<li>é€šè¿‡ <code>&lt;resultMap&gt;</code>æ¥æ˜ å°„å­—æ®µåå’Œå®ä½“ç±»å±æ€§åçš„ä¸€ä¸€å¯¹åº”çš„å…³ç³»ã€‚</li>\n</ol>\n<h3 id=\"æ¨¡ç³ŠæŸ¥è¯¢likeè¯­å¥è¯¥æ€ä¹ˆå†™\"><a href=\"#æ¨¡ç³ŠæŸ¥è¯¢likeè¯­å¥è¯¥æ€ä¹ˆå†™\" class=\"headerlink\" title=\"æ¨¡ç³ŠæŸ¥è¯¢likeè¯­å¥è¯¥æ€ä¹ˆå†™?\"></a>æ¨¡ç³ŠæŸ¥è¯¢likeè¯­å¥è¯¥æ€ä¹ˆå†™?</h3><ol>\n<li><p>åœ¨Javaä»£ç ä¸­æ·»åŠ SQLé€šé…ç¬¦ã€‚</p>\n <figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">string wildcardname = â€œ%smi%â€;</span><br><span class=\"line\">list<span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span> names = mapper.selectlike(wildcardname);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">select</span> <span class=\"attr\">id</span>=<span class=\"string\">â€selectlikeâ€</span>&gt;</span></span><br><span class=\"line\">\tselect * from foo where bar like #&#123;value&#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">select</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</li>\n<li><p>åœ¨SQLè¯­å¥ä¸­æ‹¼æ¥é€šé…ç¬¦%ï¼Œä¼šå¼•èµ·SQLæ³¨å…¥</p>\n <figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">string wildcardname = â€œsmiâ€;</span><br><span class=\"line\">list<span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span> names = mapper.selectlike(wildcardname);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">select</span> <span class=\"attr\">id</span>=<span class=\"string\">â€selectlikeâ€</span>&gt;</span></span><br><span class=\"line\">\tselect * from foo where bar like &quot;%&quot;#&#123;value&#125;&quot;%&quot;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">select</span>&gt;</span></span><br></pre></td></tr></table></figure></li>\n</ol>\n<h3 id=\"MyBatiséƒ½æœ‰å“ªäº›Executoræ‰§è¡Œå™¨ï¼Ÿå®ƒä»¬ä¹‹é—´çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ\"><a href=\"#MyBatiséƒ½æœ‰å“ªäº›Executoræ‰§è¡Œå™¨ï¼Ÿå®ƒä»¬ä¹‹é—´çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ\" class=\"headerlink\" title=\"MyBatiséƒ½æœ‰å“ªäº›Executoræ‰§è¡Œå™¨ï¼Ÿå®ƒä»¬ä¹‹é—´çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ\"></a>MyBatiséƒ½æœ‰å“ªäº›Executoræ‰§è¡Œå™¨ï¼Ÿå®ƒä»¬ä¹‹é—´çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</h3><p>MyBatisæœ‰ä¸‰ç§åŸºæœ¬çš„Executoræ‰§è¡Œå™¨ï¼ŒSimpleExecutorã€ReuseExecutorã€BatchExecutorã€‚</p>\n<ul>\n<li><strong>SimpleExecutor</strong> ï¼šæ¯æ¬¡å¼€å¯ä¸€ä¸ªStatementå¯¹è±¡ï¼Œç”¨å®Œç«‹åˆ»å…³é—­Statementå¯¹è±¡ã€‚</li>\n<li><strong>ReuseExecutor</strong> ï¼šé‡å¤ä½¿ç”¨åˆ›å»ºçš„Statementå¯¹è±¡ã€‚</li>\n<li><strong>BatchExecutor</strong> ï¼šç¼“å­˜äº†å¤šä¸ªStatementå¯¹è±¡ï¼Œä¸€èµ·æ‰§è¡Œæ‰¹é‡æ›´æ–°ã€‚</li>\n</ul>\n<h3 id=\"é€šå¸¸ä¸€ä¸ªxmlæ˜ å°„æ–‡ä»¶ï¼Œéƒ½ä¼šå†™ä¸€ä¸ªDaoæ¥å£ä¸ä¹‹å¯¹åº”ï¼Œè¯·é—®ï¼Œè¿™ä¸ªDaoæ¥å£çš„å·¥ä½œåŸç†æ˜¯ä»€ä¹ˆï¼ŸDaoæ¥å£é‡Œçš„æ–¹æ³•ï¼Œå‚æ•°ä¸åŒæ—¶ï¼Œæ–¹æ³•èƒ½é‡è½½å—ï¼Ÿ\"><a href=\"#é€šå¸¸ä¸€ä¸ªxmlæ˜ å°„æ–‡ä»¶ï¼Œéƒ½ä¼šå†™ä¸€ä¸ªDaoæ¥å£ä¸ä¹‹å¯¹åº”ï¼Œè¯·é—®ï¼Œè¿™ä¸ªDaoæ¥å£çš„å·¥ä½œåŸç†æ˜¯ä»€ä¹ˆï¼ŸDaoæ¥å£é‡Œçš„æ–¹æ³•ï¼Œå‚æ•°ä¸åŒæ—¶ï¼Œæ–¹æ³•èƒ½é‡è½½å—ï¼Ÿ\" class=\"headerlink\" title=\"é€šå¸¸ä¸€ä¸ªxmlæ˜ å°„æ–‡ä»¶ï¼Œéƒ½ä¼šå†™ä¸€ä¸ªDaoæ¥å£ä¸ä¹‹å¯¹åº”ï¼Œè¯·é—®ï¼Œè¿™ä¸ªDaoæ¥å£çš„å·¥ä½œåŸç†æ˜¯ä»€ä¹ˆï¼ŸDaoæ¥å£é‡Œçš„æ–¹æ³•ï¼Œå‚æ•°ä¸åŒæ—¶ï¼Œæ–¹æ³•èƒ½é‡è½½å—ï¼Ÿ\"></a>é€šå¸¸ä¸€ä¸ªxmlæ˜ å°„æ–‡ä»¶ï¼Œéƒ½ä¼šå†™ä¸€ä¸ªDaoæ¥å£ä¸ä¹‹å¯¹åº”ï¼Œè¯·é—®ï¼Œè¿™ä¸ªDaoæ¥å£çš„å·¥ä½œåŸç†æ˜¯ä»€ä¹ˆï¼ŸDaoæ¥å£é‡Œçš„æ–¹æ³•ï¼Œå‚æ•°ä¸åŒæ—¶ï¼Œæ–¹æ³•èƒ½é‡è½½å—ï¼Ÿ</h3><p>Dao æ¥å£ï¼Œå°±æ˜¯äººä»¬å¸¸è¯´çš„ <code>Mapper</code>æ¥å£ï¼Œæ¥å£çš„å…¨é™åï¼Œå°±æ˜¯æ˜ å°„æ–‡ä»¶ä¸­çš„ namespace çš„å€¼ï¼Œæ¥å£çš„æ–¹æ³•åï¼Œå°±æ˜¯æ˜ å°„æ–‡ä»¶ä¸­<code>MappedStatement</code>çš„ id å€¼ï¼Œæ¥å£æ–¹æ³•å†…çš„å‚æ•°ï¼Œå°±æ˜¯ä¼ é€’ç»™ SQL çš„å‚æ•°ã€‚<code>Mapper</code>æ¥å£æ˜¯æ²¡æœ‰å®ç°ç±»çš„ï¼Œå½“è°ƒç”¨æ¥å£æ–¹æ³•æ—¶ï¼Œæ¥å£å…¨é™å+æ–¹æ³•åæ‹¼æ¥å­—ç¬¦ä¸²ä½œä¸º key å€¼ï¼Œå¯å”¯ä¸€å®šä½ä¸€ä¸ª<code>MappedStatement</code>ï¼Œä¸¾ä¾‹ï¼š<code>com.yaxing.dao.IUserDao.findAll</code>ï¼Œå¯ä»¥å”¯ä¸€æ‰¾åˆ° namespace ä¸º<code>com.yaxing.dao.IUserDao</code>ä¸‹é¢<code>id = findAll</code>çš„<code>MappedStatement</code>ã€‚åœ¨ MyBatis ä¸­ï¼Œæ¯ä¸€ä¸ª<code>&lt;select&gt;</code>ã€<code>&lt;insert&gt;</code>ã€<code>&lt;update&gt;</code>ã€<code>&lt;delete&gt;</code>æ ‡ç­¾ï¼Œéƒ½ä¼šè¢«è§£æä¸ºä¸€ä¸ª<code>MappedStatement</code>å¯¹è±¡ï¼Œç„¶åæ‰§è¡Œåç»­çš„æ“ä½œã€‚</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">mapper</span> <span class=\"attr\">namespace</span>=<span class=\"string\">&quot;com.yaxing.dao.IUserDao&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">select</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;findAll&quot;</span> <span class=\"attr\">resultType</span>=<span class=\"string\">&quot;com.yaxing.domain.User&quot;</span>&gt;</span></span><br><span class=\"line\">        select * from user;</span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">select</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>Dao æ¥å£é‡Œçš„æ–¹æ³•å¯ä»¥é‡è½½ï¼Œä½†æ˜¯MyBatisçš„XMLé‡Œé¢çš„IDä¸å…è®¸é‡å¤ï¼Œä¹Ÿå°±æ˜¯è¯´å¯¹äºåŒä¸€ä¸ªæ¥å£æ–¹æ³•åï¼Œmapperæ–‡ä»¶ä¸­åªèƒ½æœ‰ä¸€ä¸ªè¯¥idã€‚<br>å¯ä»¥ä½¿ç”¨åŠ¨æ€SQLå®ç°æ¥å£é‡è½½å¯¹åº”çš„maperã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Mapperæ¥å£é‡Œé¢æ–¹æ³•é‡è½½</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">interface</span> <span class=\"title class_\">StuMapper</span> &#123;</span><br><span class=\"line\">    List&lt;Student&gt; <span class=\"title function_\">getAllStu</span><span class=\"params\">()</span>;</span><br><span class=\"line\">    List&lt;Student&gt; <span class=\"title function_\">getAllStu</span><span class=\"params\">(<span class=\"meta\">@Param(&quot;id&quot;)</span> Integer id)</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ç„¶ååœ¨ <code>StuMapper.xml</code> ä¸­åˆ©ç”¨MyBatisçš„åŠ¨æ€SQLå°±å¯ä»¥å®ç°ã€‚</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">select</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;getAllStu&quot;</span> <span class=\"attr\">resultType</span>=<span class=\"string\">&quot;com.pojo.Student&quot;</span>&gt;</span></span><br><span class=\"line\">    select * from student</span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">where</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">if</span> <span class=\"attr\">test</span>=<span class=\"string\">&quot;id != null&quot;</span>&gt;</span></span><br><span class=\"line\">            id = #&#123;id&#125;</span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">if</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">where</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">select</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>èƒ½æ­£å¸¸è¿è¡Œï¼Œå¹¶èƒ½å¾—åˆ°ç›¸åº”çš„ç»“æœï¼Œè¿™æ ·å°±å®ç°äº†åœ¨Daoæ¥å£ä¸­å†™é‡è½½æ–¹æ³•ã€‚</p>\n<p><strong>MyBatis çš„ Dao æ¥å£å¯ä»¥æœ‰å¤šä¸ªé‡è½½æ–¹æ³•ï¼Œä½†æ˜¯å¤šä¸ªæ¥å£å¯¹åº”çš„æ˜ å°„å¿…é¡»åªæœ‰ä¸€ä¸ªï¼Œå¦åˆ™å¯åŠ¨ä¼šæŠ¥é”™ã€‚</strong></p>\n<h3 id=\"MyBatisæ˜¯å¦‚ä½•å°†SQLæ‰§è¡Œç»“æœå°è£…ä¸ºç›®æ ‡å¯¹è±¡å¹¶è¿”å›çš„ï¼Ÿéƒ½æœ‰å“ªäº›æ˜ å°„å½¢å¼ï¼Ÿ\"><a href=\"#MyBatisæ˜¯å¦‚ä½•å°†SQLæ‰§è¡Œç»“æœå°è£…ä¸ºç›®æ ‡å¯¹è±¡å¹¶è¿”å›çš„ï¼Ÿéƒ½æœ‰å“ªäº›æ˜ å°„å½¢å¼ï¼Ÿ\" class=\"headerlink\" title=\"MyBatisæ˜¯å¦‚ä½•å°†SQLæ‰§è¡Œç»“æœå°è£…ä¸ºç›®æ ‡å¯¹è±¡å¹¶è¿”å›çš„ï¼Ÿéƒ½æœ‰å“ªäº›æ˜ å°„å½¢å¼ï¼Ÿ\"></a>MyBatisæ˜¯å¦‚ä½•å°†SQLæ‰§è¡Œç»“æœå°è£…ä¸ºç›®æ ‡å¯¹è±¡å¹¶è¿”å›çš„ï¼Ÿéƒ½æœ‰å“ªäº›æ˜ å°„å½¢å¼ï¼Ÿ</h3><ol>\n<li><p>ä½¿ç”¨ <code>&lt;resultMap&gt;</code>æ ‡ç­¾ï¼Œé€ä¸€å®šä¹‰æ•°æ®åº“åˆ—åå’Œå¯¹è±¡å±æ€§åä¹‹é—´çš„æ˜ å°„å…³ç³»ã€‚</p>\n</li>\n<li><p>ä½¿ç”¨SQLåˆ—çš„åˆ«ååŠŸèƒ½ï¼Œå°†åˆ—çš„åˆ«åå±æ€§å¯¹åº”ä¸ºå¯¹è±¡å±æ€§åã€‚</p>\n</li>\n</ol>\n<p>æœ‰äº†åˆ—åä¸å±æ€§åçš„æ˜ å°„å…³ç³»åï¼ŒMyBatis<strong>é€šè¿‡åå°„åˆ›å»ºå¯¹è±¡</strong>ï¼ŒåŒæ—¶<strong>ä½¿ç”¨åå°„ç»™å¯¹è±¡çš„å±æ€§é€ä¸€èµ‹å€¼</strong>å¹¶è¿”å›ï¼Œé‚£äº›æ‰¾ä¸åˆ°æ˜ å°„å…³ç³»çš„å±æ€§ï¼Œæ˜¯æ— æ³•å®Œæˆèµ‹å€¼çš„ã€‚</p>\n<h3 id=\"åœ¨mapperä¸­å¦‚ä½•ä¼ é€’å¤šä¸ªå‚æ•°\"><a href=\"#åœ¨mapperä¸­å¦‚ä½•ä¼ é€’å¤šä¸ªå‚æ•°\" class=\"headerlink\" title=\"åœ¨mapperä¸­å¦‚ä½•ä¼ é€’å¤šä¸ªå‚æ•°?\"></a>åœ¨mapperä¸­å¦‚ä½•ä¼ é€’å¤šä¸ªå‚æ•°?</h3><ol>\n<li>é¡ºåºä¼ å‚æ³•ï¼Œ#{} é‡Œé¢çš„æ•°å­—ä»£è¡¨ä¼ å…¥å‚æ•°çš„é¡ºåº</li>\n<li>@Paramæ³¨è§£ä¼ å‚æ³•ï¼Œ#{} é‡Œé¢çš„åç§°å¯¹åº”çš„æ˜¯æ³¨è§£@Paramæ‹¬å·é‡Œé¢ä¿®é¥°çš„åç§°</li>\n<li>mapä¼ å‚ï¼Œ#{} é‡Œé¢çš„åç§°å¯¹åº”çš„æ˜¯Mapé‡Œé¢çš„keyåç§°ã€‚</li>\n<li>Java Beanä¼ å‚æ³•ï¼Œ#{} é‡Œé¢çš„åç§°å¯¹åº”çš„æ˜¯Userç±»é‡Œé¢çš„æˆå‘˜å±æ€§ã€‚</li>\n</ol>\n<h3 id=\"MyBatisåŠ¨æ€SQLæœ‰ä»€ä¹ˆç”¨ï¼Ÿæ‰§è¡ŒåŸç†ï¼Ÿæœ‰å“ªäº›åŠ¨æ€SQLï¼Ÿ\"><a href=\"#MyBatisåŠ¨æ€SQLæœ‰ä»€ä¹ˆç”¨ï¼Ÿæ‰§è¡ŒåŸç†ï¼Ÿæœ‰å“ªäº›åŠ¨æ€SQLï¼Ÿ\" class=\"headerlink\" title=\"MyBatisåŠ¨æ€SQLæœ‰ä»€ä¹ˆç”¨ï¼Ÿæ‰§è¡ŒåŸç†ï¼Ÿæœ‰å“ªäº›åŠ¨æ€SQLï¼Ÿ\"></a>MyBatisåŠ¨æ€SQLæœ‰ä»€ä¹ˆç”¨ï¼Ÿæ‰§è¡ŒåŸç†ï¼Ÿæœ‰å“ªäº›åŠ¨æ€SQLï¼Ÿ</h3><p>MyBatisåŠ¨æ€SQLå¯ä»¥åœ¨xmlæ˜ å°„æ–‡ä»¶å†…ï¼Œä»¥æ ‡ç­¾çš„å½¢å¼ç¼–å†™åŠ¨æ€SQL.</p>\n<p>æ‰§è¡ŒåŸç†æ˜¯æ ¹æ®è¡¨è¾¾å¼çš„å€¼ å®Œæˆé€»è¾‘åˆ¤æ–­å¹¶åŠ¨æ€æ‹¼æ¥SQLã€‚</p>\n<p>MyBatisæä¾›äº†9ç§åŠ¨æ€SQLæ ‡ç­¾ï¼š å¸¸ç”¨çš„æœ‰ <code>if|where|foreach</code></p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">select</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;getAllStu&quot;</span> <span class=\"attr\">resultType</span>=<span class=\"string\">&quot;com.pojo.Student&quot;</span>&gt;</span></span><br><span class=\"line\">    select * from student</span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">where</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">if</span> <span class=\"attr\">test</span>=<span class=\"string\">&quot;id != null&quot;</span>&gt;</span></span><br><span class=\"line\">            id = #&#123;id&#125;</span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">if</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">where</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">select</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"MyBatiså®ç°ä¸€å¯¹å¤šæœ‰å‡ ç§æ–¹å¼-æ€ä¹ˆæ“ä½œçš„ï¼Ÿ\"><a href=\"#MyBatiså®ç°ä¸€å¯¹å¤šæœ‰å‡ ç§æ–¹å¼-æ€ä¹ˆæ“ä½œçš„ï¼Ÿ\" class=\"headerlink\" title=\"MyBatiså®ç°ä¸€å¯¹å¤šæœ‰å‡ ç§æ–¹å¼,æ€ä¹ˆæ“ä½œçš„ï¼Ÿ\"></a>MyBatiså®ç°ä¸€å¯¹å¤šæœ‰å‡ ç§æ–¹å¼,æ€ä¹ˆæ“ä½œçš„ï¼Ÿ</h3><p>æœ‰<strong>è”åˆæŸ¥è¯¢</strong>å’Œ<strong>åµŒå¥—æŸ¥è¯¢</strong>ã€‚</p>\n<p>è”åˆæŸ¥è¯¢æ˜¯å‡ ä¸ªè¡¨è”åˆæŸ¥è¯¢,åªæŸ¥è¯¢ä¸€æ¬¡,é€šè¿‡åœ¨resultMapé‡Œé¢çš„collectionèŠ‚ç‚¹é…ç½®ä¸€å¯¹å¤šçš„ç±»å°±å¯ä»¥å®Œæˆï¼›</p>\n<p>åµŒå¥—æŸ¥è¯¢æ˜¯å…ˆæŸ¥ä¸€ä¸ªè¡¨,æ ¹æ®è¿™ä¸ªè¡¨é‡Œé¢çš„ ç»“æœçš„å¤–é”®id,å»å†å¦å¤–ä¸€ä¸ªè¡¨é‡Œé¢æŸ¥è¯¢æ•°æ®,ä¹Ÿæ˜¯é€šè¿‡é…ç½®collection,ä½†å¦å¤–ä¸€ä¸ªè¡¨çš„æŸ¥è¯¢é€šè¿‡selectèŠ‚ç‚¹é…ç½®ã€‚</p>\n<h3 id=\"MyBatisæ˜¯å¦æ”¯æŒå»¶è¿ŸåŠ è½½ï¼Ÿå¦‚æœæ”¯æŒï¼Œå®ƒçš„å®ç°åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ\"><a href=\"#MyBatisæ˜¯å¦æ”¯æŒå»¶è¿ŸåŠ è½½ï¼Ÿå¦‚æœæ”¯æŒï¼Œå®ƒçš„å®ç°åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ\" class=\"headerlink\" title=\"MyBatisæ˜¯å¦æ”¯æŒå»¶è¿ŸåŠ è½½ï¼Ÿå¦‚æœæ”¯æŒï¼Œå®ƒçš„å®ç°åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ\"></a>MyBatisæ˜¯å¦æ”¯æŒå»¶è¿ŸåŠ è½½ï¼Ÿå¦‚æœæ”¯æŒï¼Œå®ƒçš„å®ç°åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ</h3><p>MyBatisä»…æ”¯æŒassociationå…³è”å¯¹è±¡å’Œcollectionå…³è”é›†åˆå¯¹è±¡çš„å»¶è¿ŸåŠ è½½ã€‚<br>associationæŒ‡çš„å°±æ˜¯ä¸€å¯¹ä¸€ï¼ŒcollectionæŒ‡çš„å°±æ˜¯ä¸€å¯¹å¤šæŸ¥è¯¢ã€‚<br>åœ¨MyBatisé…ç½®æ–‡ä»¶ä¸­ï¼Œå¯ä»¥é…ç½®æ˜¯å¦å¯ç”¨å»¶è¿ŸåŠ è½½lazyLoadingEnabled&#x3D;true|falseã€‚</p>\n<p>å®ƒçš„åŸç†æ˜¯ï¼Œä½¿ç”¨CGLIBåˆ›å»ºç›®æ ‡å¯¹è±¡çš„ä»£ç†å¯¹è±¡ï¼Œå½“è°ƒç”¨ç›®æ ‡æ–¹æ³•æ—¶ï¼Œè¿›å…¥æ‹¦æˆªå™¨æ–¹æ³•ï¼Œæ¯”å¦‚è°ƒç”¨a.getB().getName()ï¼Œæ‹¦æˆªå™¨invoke()æ–¹æ³•å‘ç°a.getB()æ˜¯nullå€¼ï¼Œé‚£ä¹ˆå°±ä¼šå•ç‹¬å‘é€äº‹å…ˆä¿å­˜å¥½çš„æŸ¥è¯¢å…³è”Bå¯¹è±¡çš„SQLï¼ŒæŠŠBæŸ¥è¯¢ä¸Šæ¥ï¼Œç„¶åè°ƒç”¨a.setB(b)ï¼Œäºæ˜¯açš„å¯¹è±¡bå±æ€§å°±æœ‰å€¼äº†ï¼Œæ¥ç€å®Œæˆa.getB().getName()æ–¹æ³•çš„è°ƒç”¨ã€‚è¿™å°±æ˜¯å»¶è¿ŸåŠ è½½çš„åŸºæœ¬åŸç†ã€‚</p>\n<h3 id=\"MyBatisçš„ä¸€çº§ã€äºŒçº§ç¼“å­˜\"><a href=\"#MyBatisçš„ä¸€çº§ã€äºŒçº§ç¼“å­˜\" class=\"headerlink\" title=\"MyBatisçš„ä¸€çº§ã€äºŒçº§ç¼“å­˜\"></a>MyBatisçš„ä¸€çº§ã€äºŒçº§ç¼“å­˜</h3><p><strong>ä¸€çº§ç¼“å­˜</strong>ï¼šä¸€çº§ç¼“å­˜æ˜¯SqlSessionèŒƒå›´çš„ç¼“å­˜</p>\n<p>å½“æˆ‘ä»¬æ‰§è¡ŒæŸ¥è¯¢ä¹‹åï¼ŒæŸ¥è¯¢çš„ç»“æœä¼šåŒæ—¶å­˜å…¥åˆ°SqlSessionä¸ºæˆ‘ä»¬æä¾›çš„ä¸€å—åŒºåŸŸä¸­ã€‚è¯¥åŒºåŸŸçš„ç»“æ„æ˜¯ä¸€ä¸ªMapã€‚<br>å½“æˆ‘ä»¬å†æ¬¡æŸ¥è¯¢åŒæ ·çš„æ•°æ®æ—¶ï¼ŒMyBatisä¼šå…ˆå»SqlSessionä¸­æŸ¥è¯¢æ˜¯å¦æœ‰ï¼Œæœ‰çš„è¯ç›´æ¥æ‹¿å‡ºæ¥ç”¨ã€‚</p>\n<p>å½“è°ƒç”¨SqlSessionçš„æ·»åŠ ï¼Œä¿®æ”¹ï¼Œåˆ é™¤ï¼Œcommit()ï¼Œclose()ã€clearCache()ç­‰æ–¹æ³•æ—¶ï¼Œå°±ä¼šæ¸…ç©ºä¸€çº§ç¼“å­˜ã€‚</p>\n<blockquote>\n<p>ç¬¬ä¸€æ¬¡å‘èµ·æŸ¥è¯¢ç”¨æˆ·idä¸º1çš„ç”¨æˆ·ä¿¡æ¯ï¼Œå…ˆå»æ‰¾ç¼“å­˜ä¸­æ˜¯å¦æœ‰idä¸º1çš„ç”¨æˆ·ä¿¡æ¯ï¼Œå¦‚æœæ²¡æœ‰ï¼Œä»æ•°æ®åº“æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯ã€‚<br>å¾—åˆ°ç”¨æˆ·ä¿¡æ¯ï¼Œå°†ç”¨æˆ·ä¿¡æ¯å­˜å‚¨åˆ°ä¸€çº§ç¼“å­˜ä¸­ã€‚<br>å¦‚æœSQLSessionå»æ‰§è¡Œcommitæ“ä½œï¼ˆæ‰§è¡Œæ’å…¥ã€æ›´æ–°ã€åˆ é™¤ï¼‰ï¼Œæ¸…ç©ºSqlSessionä¸­çš„ä¸€çº§ç¼“å­˜ï¼Œè¿™æ ·åšçš„ç›®çš„ä¸ºäº†è®©ç¼“å­˜ä¸­å­˜å‚¨çš„æ˜¯æœ€æ–°çš„ä¿¡æ¯ï¼Œé¿å…è„è¯»ã€‚<br>ç¬¬äºŒæ¬¡å‘èµ·æŸ¥è¯¢ç”¨æˆ·idä¸º1çš„ç”¨æˆ·ä¿¡æ¯ï¼Œå…ˆå»æ‰¾ç¼“å­˜ä¸­æ˜¯å¦æœ‰idä¸º1çš„ç”¨æˆ·ä¿¡æ¯ï¼Œç¼“å­˜ä¸­æœ‰ï¼Œç›´æ¥ä»ç¼“å­˜ä¸­è·å–ç”¨æˆ·ä¿¡æ¯ã€‚</p>\n</blockquote>\n<p><strong>äºŒçº§ç¼“å­˜</strong>ï¼šäºŒçº§ç¼“å­˜æ˜¯mapperæ˜ å°„çº§åˆ«çš„ç¼“å­˜ï¼Œå¤šä¸ªSqlSessionå»æ“ä½œåŒä¸€ä¸ªMapperæ˜ å°„çš„SQLè¯­å¥ï¼Œå¤šä¸ªSqlSessionå¯ä»¥å…±ç”¨äºŒçº§ç¼“å­˜ï¼ŒäºŒçº§ç¼“å­˜æ˜¯è·¨SqlSessionçš„ã€‚</p>\n<p>MyBatisä¸­SqlSessionFactoryå¯¹è±¡çš„ç¼“å­˜</p>\n<p>â€‹\tç”±åŒä¸€ä¸ªSqlSessionFactoryå¯¹è±¡åˆ›å»ºçš„SqlSessionå…±äº«å…¶ç¼“å­˜ã€‚</p>\n<p>â€‹\täºŒçº§ç¼“å­˜å­˜æ”¾çš„æ˜¯æ•°æ®ï¼Œè€Œä¸æ˜¯å¯¹è±¡ã€‚</p>\n<blockquote>\n<p>SQLSession1å»æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯ï¼ŒæŸ¥è¯¢åˆ°ç”¨æˆ·ä¿¡æ¯ä¼šå°†æŸ¥è¯¢æ•°æ®å­˜å‚¨åˆ°äºŒçº§ç¼“å­˜ä¸­ã€‚<br>å¦‚æœSqlSession3å»æ‰§è¡Œç›¸åŒ mapperæ˜ å°„ä¸‹SQLï¼Œæ‰§è¡Œcommitæäº¤ï¼Œå°†ä¼šæ¸…ç©ºè¯¥ mapperæ˜ å°„ä¸‹çš„äºŒçº§ç¼“å­˜åŒºåŸŸçš„æ•°æ®ã€‚<br>SQLSession2å»æŸ¥è¯¢ä¸SQLSession1ç›¸åŒçš„ç”¨æˆ·ä¿¡æ¯ï¼Œé¦–å…ˆä¼šå»ç¼“å­˜ä¸­æ‰¾æ˜¯å¦å­˜åœ¨æ•°æ®ï¼Œå¦‚æœå­˜åœ¨ç›´æ¥ä»ç¼“å­˜ä¸­å–å‡ºæ•°æ®ã€‚</p>\n</blockquote>\n<p>1ï¼‰ä¸€çº§ç¼“å­˜: åŸºäº PerpetualCache çš„ HashMap æœ¬åœ°ç¼“å­˜ï¼Œå…¶å­˜å‚¨ä½œç”¨åŸŸä¸º Sessionï¼Œå½“ Session flush æˆ– close ä¹‹åï¼Œè¯¥ Session ä¸­çš„æ‰€æœ‰ Cache å°±å°†æ¸…ç©ºï¼Œé»˜è®¤æ‰“å¼€ä¸€çº§ç¼“å­˜ï¼›</p>\n<p>2ï¼‰äºŒçº§ç¼“å­˜ä¸ä¸€çº§ç¼“å­˜å…¶æœºåˆ¶ç›¸åŒï¼Œé»˜è®¤ä¹Ÿæ˜¯é‡‡ç”¨ PerpetualCacheï¼ŒHashMap å­˜å‚¨ï¼Œä¸åŒåœ¨äºå…¶å­˜å‚¨ä½œç”¨åŸŸä¸º Mapper(Namespace)ï¼Œå¹¶ä¸”å¯è‡ªå®šä¹‰å­˜å‚¨æºï¼Œå¦‚ Ehcacheã€‚é»˜è®¤ä¸æ‰“å¼€äºŒçº§ç¼“å­˜ï¼Œè¦å¼€å¯äºŒçº§ç¼“å­˜ï¼Œä½¿ç”¨äºŒçº§ç¼“å­˜å±æ€§ç±»éœ€è¦å®ç°Serializableåºåˆ—åŒ–æ¥å£(å¯ç”¨æ¥ä¿å­˜å¯¹è±¡çš„çŠ¶æ€),å¯åœ¨å®ƒçš„æ˜ å°„æ–‡ä»¶ä¸­é…ç½® <code>&lt;cache/&gt;</code> ï¼›</p>\n<p>3ï¼‰å¯¹äºç¼“å­˜æ•°æ®æ›´æ–°æœºåˆ¶ï¼Œå½“æŸä¸€ä¸ªä½œç”¨åŸŸ(ä¸€çº§ç¼“å­˜ Session&#x2F;äºŒçº§ç¼“å­˜Namespaces)çš„è¿›è¡Œäº†C&#x2F;U&#x2F;D æ“ä½œåï¼Œé»˜è®¤è¯¥ä½œç”¨åŸŸä¸‹æ‰€æœ‰ select ä¸­çš„ç¼“å­˜å°†è¢« clearã€‚ </p>\n<h3 id=\"ä»€ä¹ˆæ˜¯MyBatisçš„æ¥å£ç»‘å®šï¼Ÿæœ‰å“ªäº›å®ç°æ–¹å¼ï¼Ÿ\"><a href=\"#ä»€ä¹ˆæ˜¯MyBatisçš„æ¥å£ç»‘å®šï¼Ÿæœ‰å“ªäº›å®ç°æ–¹å¼ï¼Ÿ\" class=\"headerlink\" title=\"ä»€ä¹ˆæ˜¯MyBatisçš„æ¥å£ç»‘å®šï¼Ÿæœ‰å“ªäº›å®ç°æ–¹å¼ï¼Ÿ\"></a>ä»€ä¹ˆæ˜¯MyBatisçš„æ¥å£ç»‘å®šï¼Ÿæœ‰å“ªäº›å®ç°æ–¹å¼ï¼Ÿ</h3><p>æ¥å£ç»‘å®šï¼Œå°±æ˜¯åœ¨MyBatisä¸­ä»»æ„å®šä¹‰æ¥å£,ç„¶åæŠŠæ¥å£é‡Œé¢çš„æ–¹æ³•å’ŒSQLè¯­å¥ç»‘å®š, æˆ‘ä»¬ç›´æ¥è°ƒç”¨æ¥å£æ–¹æ³•å°±å¯ä»¥,è¿™æ ·æ¯”èµ·åŸæ¥äº†SqlSessionæä¾›çš„æ–¹æ³•æˆ‘ä»¬å¯ä»¥æœ‰æ›´åŠ çµæ´»çš„é€‰æ‹©å’Œè®¾ç½®ã€‚</p>\n<p>æ¥å£ç»‘å®šæœ‰ä¸¤ç§å®ç°æ–¹å¼ï¼š</p>\n<ol>\n<li>é€šè¿‡æ³¨è§£ç»‘å®šï¼Œå°±æ˜¯åœ¨æ¥å£çš„æ–¹æ³•ä¸Šé¢åŠ ä¸Š @Selectã€@Updateç­‰æ³¨è§£ï¼Œé‡Œé¢åŒ…å«Sqlè¯­å¥æ¥ç»‘å®šï¼›</li>\n<li>é€šè¿‡xmlé‡Œé¢å†™SQLæ¥ç»‘å®š, åœ¨è¿™ç§æƒ…å†µä¸‹,è¦æŒ‡å®šxmlæ˜ å°„æ–‡ä»¶é‡Œé¢çš„namespaceå¿…é¡»ä¸ºæ¥å£çš„å…¨è·¯å¾„åã€‚å½“Sqlè¯­å¥æ¯”è¾ƒç®€å•æ—¶å€™,ç”¨æ³¨è§£ç»‘å®š, å½“SQLè¯­å¥æ¯”è¾ƒå¤æ‚æ—¶å€™,ç”¨xmlç»‘å®š,ä¸€èˆ¬ç”¨xmlç»‘å®šçš„æ¯”è¾ƒå¤šã€‚</li>\n</ol>\n","site":{"data":{}},"length":5628,"excerpt":"<blockquote>\n<p>æ•´ç†çš„MyBatisæ¡†æ¶ç›¸å…³çŸ¥è¯†ç‚¹å’Œé¢è¯•é¢˜ï¼Œéƒ¨åˆ†å†…å®¹æ‘˜è‡ªç½‘ç»œï¼Œå¦‚æœ‰ä¾µæƒè¯·è”ç³»æˆ‘ï½","more":"</p>\n</blockquote>\n<h3 id=\"ä»€ä¹ˆæ˜¯MyBatisï¼Ÿ\"><a href=\"#ä»€ä¹ˆæ˜¯MyBatisï¼Ÿ\" class=\"headerlink\" title=\"ä»€ä¹ˆæ˜¯MyBatisï¼Ÿ\"></a>ä»€ä¹ˆæ˜¯MyBatisï¼Ÿ</h3><ol>\n<li>MyBatisæ˜¯ä¸€ä¸ªåŠORMï¼ˆå¯¹è±¡å…³ç³»æ˜ å°„ï¼‰æ¡†æ¶ï¼Œå®ƒå†…éƒ¨å°è£…äº†JDBCï¼Œå¼€å‘æ—¶åªéœ€è¦å…³æ³¨SQLè¯­å¥æœ¬èº«ï¼Œä¸éœ€è¦èŠ±è´¹ç²¾åŠ›å»å¤„ç†<strong>åŠ è½½é©±åŠ¨ã€åˆ›å»ºè¿æ¥ã€åˆ›å»ºstatement</strong>ç­‰ç¹æ‚çš„è¿‡ç¨‹ã€‚</li>\n<li>é€šè¿‡xml æ–‡ä»¶æˆ–æ³¨è§£çš„æ–¹å¼å°†è¦æ‰§è¡Œçš„å„ç§ statement é…ç½®èµ·æ¥ï¼Œå¹¶é€šè¿‡javaå¯¹è±¡å’Œ statementä¸­SQLçš„åŠ¨æ€å‚æ•°è¿›è¡Œæ˜ å°„ç”Ÿæˆæœ€ç»ˆæ‰§è¡Œçš„SQLè¯­å¥ï¼Œæœ€åç”±mybatisæ¡†æ¶æ‰§è¡ŒSQLå¹¶å°†ç»“æœæ˜ å°„ä¸ºjavaå¯¹è±¡å¹¶è¿”å›ã€‚ï¼ˆä»æ‰§è¡ŒSQLåˆ°è¿”å›resultçš„è¿‡ç¨‹ï¼‰ã€‚</li>\n</ol>\n<h3 id=\"ORMæ˜¯ä»€ä¹ˆ\"><a href=\"#ORMæ˜¯ä»€ä¹ˆ\" class=\"headerlink\" title=\"ORMæ˜¯ä»€ä¹ˆ\"></a>ORMæ˜¯ä»€ä¹ˆ</h3><p>ORMï¼ˆObject Relational Mappingï¼‰ï¼Œå¯¹è±¡å…³ç³»æ˜ å°„ï¼Œå°±æ˜¯æŠŠæ•°æ®åº“è¡¨å’Œå®ä½“ç±»åŠå®ä½“ç±»çš„å±æ€§å¯¹åº”èµ·æ¥</p>\n<p>è®©æˆ‘ä»¬å¯ä»¥æ“ä½œå®ä½“ç±»å°±å®ç°æ“ä½œæ•°æ®åº“è¡¨ã€‚</p>\n<h3 id=\"ä¸ºä»€ä¹ˆè¯´MyBatisæ˜¯åŠè‡ªåŠ¨ORMæ˜ å°„å·¥å…·ï¼Ÿå®ƒä¸å…¨è‡ªåŠ¨çš„åŒºåˆ«åœ¨å“ªé‡Œï¼Ÿ\"><a href=\"#ä¸ºä»€ä¹ˆè¯´MyBatisæ˜¯åŠè‡ªåŠ¨ORMæ˜ å°„å·¥å…·ï¼Ÿå®ƒä¸å…¨è‡ªåŠ¨çš„åŒºåˆ«åœ¨å“ªé‡Œï¼Ÿ\" class=\"headerlink\" title=\"ä¸ºä»€ä¹ˆè¯´MyBatisæ˜¯åŠè‡ªåŠ¨ORMæ˜ å°„å·¥å…·ï¼Ÿå®ƒä¸å…¨è‡ªåŠ¨çš„åŒºåˆ«åœ¨å“ªé‡Œï¼Ÿ\"></a>ä¸ºä»€ä¹ˆè¯´MyBatisæ˜¯åŠè‡ªåŠ¨ORMæ˜ å°„å·¥å…·ï¼Ÿå®ƒä¸å…¨è‡ªåŠ¨çš„åŒºåˆ«åœ¨å“ªé‡Œï¼Ÿ</h3><p>MyBatisåœ¨æŸ¥è¯¢å…³è”å¯¹è±¡æˆ–å…³è”é›†åˆå¯¹è±¡æ—¶ï¼Œéœ€è¦æ‰‹åŠ¨ç¼–å†™SQLæ¥å®Œæˆï¼Œæ‰€ä»¥ï¼Œç§°ä¹‹ä¸ºåŠè‡ªåŠ¨ORMæ˜ å°„å·¥å…·ã€‚</p>\n<h3 id=\"JDBCç¼–ç¨‹æœ‰å“ªäº›ä¸è¶³ä¹‹å¤„ï¼ŒMyBatisæ˜¯å¦‚ä½•è§£å†³çš„ï¼Ÿ\"><a href=\"#JDBCç¼–ç¨‹æœ‰å“ªäº›ä¸è¶³ä¹‹å¤„ï¼ŒMyBatisæ˜¯å¦‚ä½•è§£å†³çš„ï¼Ÿ\" class=\"headerlink\" title=\"JDBCç¼–ç¨‹æœ‰å“ªäº›ä¸è¶³ä¹‹å¤„ï¼ŒMyBatisæ˜¯å¦‚ä½•è§£å†³çš„ï¼Ÿ\"></a>JDBCç¼–ç¨‹æœ‰å“ªäº›ä¸è¶³ä¹‹å¤„ï¼ŒMyBatisæ˜¯å¦‚ä½•è§£å†³çš„ï¼Ÿ</h3><ol>\n<li>æ•°æ®åº“è¿æ¥åˆ›å»ºã€é‡Šæ”¾é¢‘ç¹ï¼Œé€ æˆç³»ç»Ÿèµ„æºæµªè´¹ä»è€Œå½±å“ç³»ç»Ÿæ€§èƒ½</li>\n<li>SQLè¯­å¥å†™åœ¨ä»£ç ä¸­é€ æˆä»£ç <strong>ä¸æ˜“ç»´æŠ¤</strong></li>\n<li>å‘SQLè¯­å¥<strong>ä¼ å‚</strong>éº»çƒ¦</li>\n<li>å¯¹<strong>ç»“æœé›†è§£æ</strong>éº»çƒ¦</li>\n</ol>\n<h3 id=\"MyBatisç¼–ç¨‹æ­¥éª¤æ˜¯ä»€ä¹ˆæ ·çš„ï¼Ÿ\"><a href=\"#MyBatisç¼–ç¨‹æ­¥éª¤æ˜¯ä»€ä¹ˆæ ·çš„ï¼Ÿ\" class=\"headerlink\" title=\"MyBatisç¼–ç¨‹æ­¥éª¤æ˜¯ä»€ä¹ˆæ ·çš„ï¼Ÿ\"></a>MyBatisç¼–ç¨‹æ­¥éª¤æ˜¯ä»€ä¹ˆæ ·çš„ï¼Ÿ</h3><ol>\n<li>è¯»å–é…ç½®æ–‡ä»¶ï¼Œåˆ›å»ºSqlSessionFactoryå·¥å‚</li>\n<li>é€šè¿‡SqlSessionFactoryå·¥å‚åˆ›å»ºSqlSession å¯¹è±¡</li>\n<li>ä½¿ç”¨ SqlSession åˆ›å»º Dao æ¥å£çš„ä»£ç†å¯¹è±¡</li>\n<li>ä½¿ç”¨ä»£ç†å¯¹è±¡æ‰§è¡Œæ–¹æ³•</li>\n<li>è°ƒç”¨session.commit()æäº¤äº‹åŠ¡</li>\n<li>è°ƒç”¨session.close()å…³é—­ä¼šè¯</li>\n</ol>\n<h3 id=\"å’Œ-çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ\"><a href=\"#å’Œ-çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ\" class=\"headerlink\" title=\"#{}å’Œ${}çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ\"></a>#{}å’Œ${}çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</h3><p>mybatisåœ¨å¤„ç† #{} æ—¶ï¼Œä¼šå°†SQLä¸­çš„ #{} æ›¿æ¢ä¸º ? å·ï¼Œè°ƒç”¨PreparedStatementçš„setæ–¹æ³•æ¥èµ‹å€¼ã€‚<br>è¿™æ˜¯<strong>é¢„ç¼–è¯‘å¤„ç†</strong>ï¼Œå¯ä»¥æé«˜SQLæ‰§è¡Œæ•ˆç‡ï¼Œæ›´é‡è¦çš„æ˜¯<strong>å¯ä»¥é˜²æ­¢SQLæ³¨å…¥</strong>ï¼›</p>\n<p>mybatisåœ¨å¤„ç† ${} æ—¶ï¼Œå°±æ˜¯æŠŠ ${} ä½¿ç”¨<strong>å­—ç¬¦ä¸²æ›¿æ¢</strong>ã€‚ä½¿ç”¨è¯¥æ–¹å¼å¦‚æœä¼ å…¥idçš„è¯ï¼Œä¼šæŠŠid&#x3D;1è½¬æ¢ä¸ºid&#x3D;â€1â€å­—ç¬¦ä¸²å½¢å¼ï¼Œè€Œæ•°æ®åº“ä¸­idå®é™…ä¸ºæ•°å€¼å‹è¿™æ ·å°±ä¸åŒ¹é…äº†ï¼ŒæŸ¥è¯¢å¤±è´¥ã€‚ï¼ˆ${}æ˜¯å­—ç¬¦ä¸²æ›¿æ¢ï¼Œé€šå¸¸åœ¨ELè¡¨è¾¾å¼ä¸­ä½¿ç”¨ï¼Œç”¨æ¥å±•ç¤ºåç«¯ä¼ é€’åˆ°å‰ç«¯çš„å€¼ï¼‰ã€‚</p>\n<h3 id=\"å½“å®ä½“ç±»ä¸­çš„å±æ€§åå’Œè¡¨ä¸­çš„å­—æ®µåä¸ä¸€æ ·-ï¼Œæ€ä¹ˆåŠ-ï¼Ÿ\"><a href=\"#å½“å®ä½“ç±»ä¸­çš„å±æ€§åå’Œè¡¨ä¸­çš„å­—æ®µåä¸ä¸€æ ·-ï¼Œæ€ä¹ˆåŠ-ï¼Ÿ\" class=\"headerlink\" title=\"å½“å®ä½“ç±»ä¸­çš„å±æ€§åå’Œè¡¨ä¸­çš„å­—æ®µåä¸ä¸€æ · ï¼Œæ€ä¹ˆåŠ ï¼Ÿ\"></a>å½“å®ä½“ç±»ä¸­çš„å±æ€§åå’Œè¡¨ä¸­çš„å­—æ®µåä¸ä¸€æ · ï¼Œæ€ä¹ˆåŠ ï¼Ÿ</h3><ol>\n<li>é€šè¿‡åœ¨æŸ¥è¯¢çš„SQLè¯­å¥ä¸­å®šä¹‰æ•°æ®åº“å­—æ®µåçš„åˆ«åï¼Œè®©æ•°æ®åº“å­—æ®µåçš„åˆ«åå’Œå®ä½“ç±»çš„å±æ€§åä¸€è‡´ã€‚</li>\n<li>é€šè¿‡ <code>&lt;resultMap&gt;</code>æ¥æ˜ å°„å­—æ®µåå’Œå®ä½“ç±»å±æ€§åçš„ä¸€ä¸€å¯¹åº”çš„å…³ç³»ã€‚</li>\n</ol>\n<h3 id=\"æ¨¡ç³ŠæŸ¥è¯¢likeè¯­å¥è¯¥æ€ä¹ˆå†™\"><a href=\"#æ¨¡ç³ŠæŸ¥è¯¢likeè¯­å¥è¯¥æ€ä¹ˆå†™\" class=\"headerlink\" title=\"æ¨¡ç³ŠæŸ¥è¯¢likeè¯­å¥è¯¥æ€ä¹ˆå†™?\"></a>æ¨¡ç³ŠæŸ¥è¯¢likeè¯­å¥è¯¥æ€ä¹ˆå†™?</h3><ol>\n<li><p>åœ¨Javaä»£ç ä¸­æ·»åŠ SQLé€šé…ç¬¦ã€‚</p>\n <figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">string wildcardname = â€œ%smi%â€;</span><br><span class=\"line\">list<span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span> names = mapper.selectlike(wildcardname);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">select</span> <span class=\"attr\">id</span>=<span class=\"string\">â€selectlikeâ€</span>&gt;</span></span><br><span class=\"line\">\tselect * from foo where bar like #&#123;value&#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">select</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</li>\n<li><p>åœ¨SQLè¯­å¥ä¸­æ‹¼æ¥é€šé…ç¬¦%ï¼Œä¼šå¼•èµ·SQLæ³¨å…¥</p>\n <figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">string wildcardname = â€œsmiâ€;</span><br><span class=\"line\">list<span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span> names = mapper.selectlike(wildcardname);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">select</span> <span class=\"attr\">id</span>=<span class=\"string\">â€selectlikeâ€</span>&gt;</span></span><br><span class=\"line\">\tselect * from foo where bar like &quot;%&quot;#&#123;value&#125;&quot;%&quot;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">select</span>&gt;</span></span><br></pre></td></tr></table></figure></li>\n</ol>\n<h3 id=\"MyBatiséƒ½æœ‰å“ªäº›Executoræ‰§è¡Œå™¨ï¼Ÿå®ƒä»¬ä¹‹é—´çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ\"><a href=\"#MyBatiséƒ½æœ‰å“ªäº›Executoræ‰§è¡Œå™¨ï¼Ÿå®ƒä»¬ä¹‹é—´çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ\" class=\"headerlink\" title=\"MyBatiséƒ½æœ‰å“ªäº›Executoræ‰§è¡Œå™¨ï¼Ÿå®ƒä»¬ä¹‹é—´çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ\"></a>MyBatiséƒ½æœ‰å“ªäº›Executoræ‰§è¡Œå™¨ï¼Ÿå®ƒä»¬ä¹‹é—´çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</h3><p>MyBatisæœ‰ä¸‰ç§åŸºæœ¬çš„Executoræ‰§è¡Œå™¨ï¼ŒSimpleExecutorã€ReuseExecutorã€BatchExecutorã€‚</p>\n<ul>\n<li><strong>SimpleExecutor</strong> ï¼šæ¯æ¬¡å¼€å¯ä¸€ä¸ªStatementå¯¹è±¡ï¼Œç”¨å®Œç«‹åˆ»å…³é—­Statementå¯¹è±¡ã€‚</li>\n<li><strong>ReuseExecutor</strong> ï¼šé‡å¤ä½¿ç”¨åˆ›å»ºçš„Statementå¯¹è±¡ã€‚</li>\n<li><strong>BatchExecutor</strong> ï¼šç¼“å­˜äº†å¤šä¸ªStatementå¯¹è±¡ï¼Œä¸€èµ·æ‰§è¡Œæ‰¹é‡æ›´æ–°ã€‚</li>\n</ul>\n<h3 id=\"é€šå¸¸ä¸€ä¸ªxmlæ˜ å°„æ–‡ä»¶ï¼Œéƒ½ä¼šå†™ä¸€ä¸ªDaoæ¥å£ä¸ä¹‹å¯¹åº”ï¼Œè¯·é—®ï¼Œè¿™ä¸ªDaoæ¥å£çš„å·¥ä½œåŸç†æ˜¯ä»€ä¹ˆï¼ŸDaoæ¥å£é‡Œçš„æ–¹æ³•ï¼Œå‚æ•°ä¸åŒæ—¶ï¼Œæ–¹æ³•èƒ½é‡è½½å—ï¼Ÿ\"><a href=\"#é€šå¸¸ä¸€ä¸ªxmlæ˜ å°„æ–‡ä»¶ï¼Œéƒ½ä¼šå†™ä¸€ä¸ªDaoæ¥å£ä¸ä¹‹å¯¹åº”ï¼Œè¯·é—®ï¼Œè¿™ä¸ªDaoæ¥å£çš„å·¥ä½œåŸç†æ˜¯ä»€ä¹ˆï¼ŸDaoæ¥å£é‡Œçš„æ–¹æ³•ï¼Œå‚æ•°ä¸åŒæ—¶ï¼Œæ–¹æ³•èƒ½é‡è½½å—ï¼Ÿ\" class=\"headerlink\" title=\"é€šå¸¸ä¸€ä¸ªxmlæ˜ å°„æ–‡ä»¶ï¼Œéƒ½ä¼šå†™ä¸€ä¸ªDaoæ¥å£ä¸ä¹‹å¯¹åº”ï¼Œè¯·é—®ï¼Œè¿™ä¸ªDaoæ¥å£çš„å·¥ä½œåŸç†æ˜¯ä»€ä¹ˆï¼ŸDaoæ¥å£é‡Œçš„æ–¹æ³•ï¼Œå‚æ•°ä¸åŒæ—¶ï¼Œæ–¹æ³•èƒ½é‡è½½å—ï¼Ÿ\"></a>é€šå¸¸ä¸€ä¸ªxmlæ˜ å°„æ–‡ä»¶ï¼Œéƒ½ä¼šå†™ä¸€ä¸ªDaoæ¥å£ä¸ä¹‹å¯¹åº”ï¼Œè¯·é—®ï¼Œè¿™ä¸ªDaoæ¥å£çš„å·¥ä½œåŸç†æ˜¯ä»€ä¹ˆï¼ŸDaoæ¥å£é‡Œçš„æ–¹æ³•ï¼Œå‚æ•°ä¸åŒæ—¶ï¼Œæ–¹æ³•èƒ½é‡è½½å—ï¼Ÿ</h3><p>Dao æ¥å£ï¼Œå°±æ˜¯äººä»¬å¸¸è¯´çš„ <code>Mapper</code>æ¥å£ï¼Œæ¥å£çš„å…¨é™åï¼Œå°±æ˜¯æ˜ å°„æ–‡ä»¶ä¸­çš„ namespace çš„å€¼ï¼Œæ¥å£çš„æ–¹æ³•åï¼Œå°±æ˜¯æ˜ å°„æ–‡ä»¶ä¸­<code>MappedStatement</code>çš„ id å€¼ï¼Œæ¥å£æ–¹æ³•å†…çš„å‚æ•°ï¼Œå°±æ˜¯ä¼ é€’ç»™ SQL çš„å‚æ•°ã€‚<code>Mapper</code>æ¥å£æ˜¯æ²¡æœ‰å®ç°ç±»çš„ï¼Œå½“è°ƒç”¨æ¥å£æ–¹æ³•æ—¶ï¼Œæ¥å£å…¨é™å+æ–¹æ³•åæ‹¼æ¥å­—ç¬¦ä¸²ä½œä¸º key å€¼ï¼Œå¯å”¯ä¸€å®šä½ä¸€ä¸ª<code>MappedStatement</code>ï¼Œä¸¾ä¾‹ï¼š<code>com.yaxing.dao.IUserDao.findAll</code>ï¼Œå¯ä»¥å”¯ä¸€æ‰¾åˆ° namespace ä¸º<code>com.yaxing.dao.IUserDao</code>ä¸‹é¢<code>id = findAll</code>çš„<code>MappedStatement</code>ã€‚åœ¨ MyBatis ä¸­ï¼Œæ¯ä¸€ä¸ª<code>&lt;select&gt;</code>ã€<code>&lt;insert&gt;</code>ã€<code>&lt;update&gt;</code>ã€<code>&lt;delete&gt;</code>æ ‡ç­¾ï¼Œéƒ½ä¼šè¢«è§£æä¸ºä¸€ä¸ª<code>MappedStatement</code>å¯¹è±¡ï¼Œç„¶åæ‰§è¡Œåç»­çš„æ“ä½œã€‚</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">mapper</span> <span class=\"attr\">namespace</span>=<span class=\"string\">&quot;com.yaxing.dao.IUserDao&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">select</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;findAll&quot;</span> <span class=\"attr\">resultType</span>=<span class=\"string\">&quot;com.yaxing.domain.User&quot;</span>&gt;</span></span><br><span class=\"line\">        select * from user;</span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">select</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>Dao æ¥å£é‡Œçš„æ–¹æ³•å¯ä»¥é‡è½½ï¼Œä½†æ˜¯MyBatisçš„XMLé‡Œé¢çš„IDä¸å…è®¸é‡å¤ï¼Œä¹Ÿå°±æ˜¯è¯´å¯¹äºåŒä¸€ä¸ªæ¥å£æ–¹æ³•åï¼Œmapperæ–‡ä»¶ä¸­åªèƒ½æœ‰ä¸€ä¸ªè¯¥idã€‚<br>å¯ä»¥ä½¿ç”¨åŠ¨æ€SQLå®ç°æ¥å£é‡è½½å¯¹åº”çš„maperã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Mapperæ¥å£é‡Œé¢æ–¹æ³•é‡è½½</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">interface</span> <span class=\"title class_\">StuMapper</span> &#123;</span><br><span class=\"line\">    List&lt;Student&gt; <span class=\"title function_\">getAllStu</span><span class=\"params\">()</span>;</span><br><span class=\"line\">    List&lt;Student&gt; <span class=\"title function_\">getAllStu</span><span class=\"params\">(<span class=\"meta\">@Param(&quot;id&quot;)</span> Integer id)</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ç„¶ååœ¨ <code>StuMapper.xml</code> ä¸­åˆ©ç”¨MyBatisçš„åŠ¨æ€SQLå°±å¯ä»¥å®ç°ã€‚</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">select</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;getAllStu&quot;</span> <span class=\"attr\">resultType</span>=<span class=\"string\">&quot;com.pojo.Student&quot;</span>&gt;</span></span><br><span class=\"line\">    select * from student</span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">where</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">if</span> <span class=\"attr\">test</span>=<span class=\"string\">&quot;id != null&quot;</span>&gt;</span></span><br><span class=\"line\">            id = #&#123;id&#125;</span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">if</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">where</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">select</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>èƒ½æ­£å¸¸è¿è¡Œï¼Œå¹¶èƒ½å¾—åˆ°ç›¸åº”çš„ç»“æœï¼Œè¿™æ ·å°±å®ç°äº†åœ¨Daoæ¥å£ä¸­å†™é‡è½½æ–¹æ³•ã€‚</p>\n<p><strong>MyBatis çš„ Dao æ¥å£å¯ä»¥æœ‰å¤šä¸ªé‡è½½æ–¹æ³•ï¼Œä½†æ˜¯å¤šä¸ªæ¥å£å¯¹åº”çš„æ˜ å°„å¿…é¡»åªæœ‰ä¸€ä¸ªï¼Œå¦åˆ™å¯åŠ¨ä¼šæŠ¥é”™ã€‚</strong></p>\n<h3 id=\"MyBatisæ˜¯å¦‚ä½•å°†SQLæ‰§è¡Œç»“æœå°è£…ä¸ºç›®æ ‡å¯¹è±¡å¹¶è¿”å›çš„ï¼Ÿéƒ½æœ‰å“ªäº›æ˜ å°„å½¢å¼ï¼Ÿ\"><a href=\"#MyBatisæ˜¯å¦‚ä½•å°†SQLæ‰§è¡Œç»“æœå°è£…ä¸ºç›®æ ‡å¯¹è±¡å¹¶è¿”å›çš„ï¼Ÿéƒ½æœ‰å“ªäº›æ˜ å°„å½¢å¼ï¼Ÿ\" class=\"headerlink\" title=\"MyBatisæ˜¯å¦‚ä½•å°†SQLæ‰§è¡Œç»“æœå°è£…ä¸ºç›®æ ‡å¯¹è±¡å¹¶è¿”å›çš„ï¼Ÿéƒ½æœ‰å“ªäº›æ˜ å°„å½¢å¼ï¼Ÿ\"></a>MyBatisæ˜¯å¦‚ä½•å°†SQLæ‰§è¡Œç»“æœå°è£…ä¸ºç›®æ ‡å¯¹è±¡å¹¶è¿”å›çš„ï¼Ÿéƒ½æœ‰å“ªäº›æ˜ å°„å½¢å¼ï¼Ÿ</h3><ol>\n<li><p>ä½¿ç”¨ <code>&lt;resultMap&gt;</code>æ ‡ç­¾ï¼Œé€ä¸€å®šä¹‰æ•°æ®åº“åˆ—åå’Œå¯¹è±¡å±æ€§åä¹‹é—´çš„æ˜ å°„å…³ç³»ã€‚</p>\n</li>\n<li><p>ä½¿ç”¨SQLåˆ—çš„åˆ«ååŠŸèƒ½ï¼Œå°†åˆ—çš„åˆ«åå±æ€§å¯¹åº”ä¸ºå¯¹è±¡å±æ€§åã€‚</p>\n</li>\n</ol>\n<p>æœ‰äº†åˆ—åä¸å±æ€§åçš„æ˜ å°„å…³ç³»åï¼ŒMyBatis<strong>é€šè¿‡åå°„åˆ›å»ºå¯¹è±¡</strong>ï¼ŒåŒæ—¶<strong>ä½¿ç”¨åå°„ç»™å¯¹è±¡çš„å±æ€§é€ä¸€èµ‹å€¼</strong>å¹¶è¿”å›ï¼Œé‚£äº›æ‰¾ä¸åˆ°æ˜ å°„å…³ç³»çš„å±æ€§ï¼Œæ˜¯æ— æ³•å®Œæˆèµ‹å€¼çš„ã€‚</p>\n<h3 id=\"åœ¨mapperä¸­å¦‚ä½•ä¼ é€’å¤šä¸ªå‚æ•°\"><a href=\"#åœ¨mapperä¸­å¦‚ä½•ä¼ é€’å¤šä¸ªå‚æ•°\" class=\"headerlink\" title=\"åœ¨mapperä¸­å¦‚ä½•ä¼ é€’å¤šä¸ªå‚æ•°?\"></a>åœ¨mapperä¸­å¦‚ä½•ä¼ é€’å¤šä¸ªå‚æ•°?</h3><ol>\n<li>é¡ºåºä¼ å‚æ³•ï¼Œ#{} é‡Œé¢çš„æ•°å­—ä»£è¡¨ä¼ å…¥å‚æ•°çš„é¡ºåº</li>\n<li>@Paramæ³¨è§£ä¼ å‚æ³•ï¼Œ#{} é‡Œé¢çš„åç§°å¯¹åº”çš„æ˜¯æ³¨è§£@Paramæ‹¬å·é‡Œé¢ä¿®é¥°çš„åç§°</li>\n<li>mapä¼ å‚ï¼Œ#{} é‡Œé¢çš„åç§°å¯¹åº”çš„æ˜¯Mapé‡Œé¢çš„keyåç§°ã€‚</li>\n<li>Java Beanä¼ å‚æ³•ï¼Œ#{} é‡Œé¢çš„åç§°å¯¹åº”çš„æ˜¯Userç±»é‡Œé¢çš„æˆå‘˜å±æ€§ã€‚</li>\n</ol>\n<h3 id=\"MyBatisåŠ¨æ€SQLæœ‰ä»€ä¹ˆç”¨ï¼Ÿæ‰§è¡ŒåŸç†ï¼Ÿæœ‰å“ªäº›åŠ¨æ€SQLï¼Ÿ\"><a href=\"#MyBatisåŠ¨æ€SQLæœ‰ä»€ä¹ˆç”¨ï¼Ÿæ‰§è¡ŒåŸç†ï¼Ÿæœ‰å“ªäº›åŠ¨æ€SQLï¼Ÿ\" class=\"headerlink\" title=\"MyBatisåŠ¨æ€SQLæœ‰ä»€ä¹ˆç”¨ï¼Ÿæ‰§è¡ŒåŸç†ï¼Ÿæœ‰å“ªäº›åŠ¨æ€SQLï¼Ÿ\"></a>MyBatisåŠ¨æ€SQLæœ‰ä»€ä¹ˆç”¨ï¼Ÿæ‰§è¡ŒåŸç†ï¼Ÿæœ‰å“ªäº›åŠ¨æ€SQLï¼Ÿ</h3><p>MyBatisåŠ¨æ€SQLå¯ä»¥åœ¨xmlæ˜ å°„æ–‡ä»¶å†…ï¼Œä»¥æ ‡ç­¾çš„å½¢å¼ç¼–å†™åŠ¨æ€SQL.</p>\n<p>æ‰§è¡ŒåŸç†æ˜¯æ ¹æ®è¡¨è¾¾å¼çš„å€¼ å®Œæˆé€»è¾‘åˆ¤æ–­å¹¶åŠ¨æ€æ‹¼æ¥SQLã€‚</p>\n<p>MyBatisæä¾›äº†9ç§åŠ¨æ€SQLæ ‡ç­¾ï¼š å¸¸ç”¨çš„æœ‰ <code>if|where|foreach</code></p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">select</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;getAllStu&quot;</span> <span class=\"attr\">resultType</span>=<span class=\"string\">&quot;com.pojo.Student&quot;</span>&gt;</span></span><br><span class=\"line\">    select * from student</span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">where</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">if</span> <span class=\"attr\">test</span>=<span class=\"string\">&quot;id != null&quot;</span>&gt;</span></span><br><span class=\"line\">            id = #&#123;id&#125;</span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">if</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">where</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">select</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"MyBatiså®ç°ä¸€å¯¹å¤šæœ‰å‡ ç§æ–¹å¼-æ€ä¹ˆæ“ä½œçš„ï¼Ÿ\"><a href=\"#MyBatiså®ç°ä¸€å¯¹å¤šæœ‰å‡ ç§æ–¹å¼-æ€ä¹ˆæ“ä½œçš„ï¼Ÿ\" class=\"headerlink\" title=\"MyBatiså®ç°ä¸€å¯¹å¤šæœ‰å‡ ç§æ–¹å¼,æ€ä¹ˆæ“ä½œçš„ï¼Ÿ\"></a>MyBatiså®ç°ä¸€å¯¹å¤šæœ‰å‡ ç§æ–¹å¼,æ€ä¹ˆæ“ä½œçš„ï¼Ÿ</h3><p>æœ‰<strong>è”åˆæŸ¥è¯¢</strong>å’Œ<strong>åµŒå¥—æŸ¥è¯¢</strong>ã€‚</p>\n<p>è”åˆæŸ¥è¯¢æ˜¯å‡ ä¸ªè¡¨è”åˆæŸ¥è¯¢,åªæŸ¥è¯¢ä¸€æ¬¡,é€šè¿‡åœ¨resultMapé‡Œé¢çš„collectionèŠ‚ç‚¹é…ç½®ä¸€å¯¹å¤šçš„ç±»å°±å¯ä»¥å®Œæˆï¼›</p>\n<p>åµŒå¥—æŸ¥è¯¢æ˜¯å…ˆæŸ¥ä¸€ä¸ªè¡¨,æ ¹æ®è¿™ä¸ªè¡¨é‡Œé¢çš„ ç»“æœçš„å¤–é”®id,å»å†å¦å¤–ä¸€ä¸ªè¡¨é‡Œé¢æŸ¥è¯¢æ•°æ®,ä¹Ÿæ˜¯é€šè¿‡é…ç½®collection,ä½†å¦å¤–ä¸€ä¸ªè¡¨çš„æŸ¥è¯¢é€šè¿‡selectèŠ‚ç‚¹é…ç½®ã€‚</p>\n<h3 id=\"MyBatisæ˜¯å¦æ”¯æŒå»¶è¿ŸåŠ è½½ï¼Ÿå¦‚æœæ”¯æŒï¼Œå®ƒçš„å®ç°åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ\"><a href=\"#MyBatisæ˜¯å¦æ”¯æŒå»¶è¿ŸåŠ è½½ï¼Ÿå¦‚æœæ”¯æŒï¼Œå®ƒçš„å®ç°åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ\" class=\"headerlink\" title=\"MyBatisæ˜¯å¦æ”¯æŒå»¶è¿ŸåŠ è½½ï¼Ÿå¦‚æœæ”¯æŒï¼Œå®ƒçš„å®ç°åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ\"></a>MyBatisæ˜¯å¦æ”¯æŒå»¶è¿ŸåŠ è½½ï¼Ÿå¦‚æœæ”¯æŒï¼Œå®ƒçš„å®ç°åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ</h3><p>MyBatisä»…æ”¯æŒassociationå…³è”å¯¹è±¡å’Œcollectionå…³è”é›†åˆå¯¹è±¡çš„å»¶è¿ŸåŠ è½½ã€‚<br>associationæŒ‡çš„å°±æ˜¯ä¸€å¯¹ä¸€ï¼ŒcollectionæŒ‡çš„å°±æ˜¯ä¸€å¯¹å¤šæŸ¥è¯¢ã€‚<br>åœ¨MyBatisé…ç½®æ–‡ä»¶ä¸­ï¼Œå¯ä»¥é…ç½®æ˜¯å¦å¯ç”¨å»¶è¿ŸåŠ è½½lazyLoadingEnabled&#x3D;true|falseã€‚</p>\n<p>å®ƒçš„åŸç†æ˜¯ï¼Œä½¿ç”¨CGLIBåˆ›å»ºç›®æ ‡å¯¹è±¡çš„ä»£ç†å¯¹è±¡ï¼Œå½“è°ƒç”¨ç›®æ ‡æ–¹æ³•æ—¶ï¼Œè¿›å…¥æ‹¦æˆªå™¨æ–¹æ³•ï¼Œæ¯”å¦‚è°ƒç”¨a.getB().getName()ï¼Œæ‹¦æˆªå™¨invoke()æ–¹æ³•å‘ç°a.getB()æ˜¯nullå€¼ï¼Œé‚£ä¹ˆå°±ä¼šå•ç‹¬å‘é€äº‹å…ˆä¿å­˜å¥½çš„æŸ¥è¯¢å…³è”Bå¯¹è±¡çš„SQLï¼ŒæŠŠBæŸ¥è¯¢ä¸Šæ¥ï¼Œç„¶åè°ƒç”¨a.setB(b)ï¼Œäºæ˜¯açš„å¯¹è±¡bå±æ€§å°±æœ‰å€¼äº†ï¼Œæ¥ç€å®Œæˆa.getB().getName()æ–¹æ³•çš„è°ƒç”¨ã€‚è¿™å°±æ˜¯å»¶è¿ŸåŠ è½½çš„åŸºæœ¬åŸç†ã€‚</p>\n<h3 id=\"MyBatisçš„ä¸€çº§ã€äºŒçº§ç¼“å­˜\"><a href=\"#MyBatisçš„ä¸€çº§ã€äºŒçº§ç¼“å­˜\" class=\"headerlink\" title=\"MyBatisçš„ä¸€çº§ã€äºŒçº§ç¼“å­˜\"></a>MyBatisçš„ä¸€çº§ã€äºŒçº§ç¼“å­˜</h3><p><strong>ä¸€çº§ç¼“å­˜</strong>ï¼šä¸€çº§ç¼“å­˜æ˜¯SqlSessionèŒƒå›´çš„ç¼“å­˜</p>\n<p>å½“æˆ‘ä»¬æ‰§è¡ŒæŸ¥è¯¢ä¹‹åï¼ŒæŸ¥è¯¢çš„ç»“æœä¼šåŒæ—¶å­˜å…¥åˆ°SqlSessionä¸ºæˆ‘ä»¬æä¾›çš„ä¸€å—åŒºåŸŸä¸­ã€‚è¯¥åŒºåŸŸçš„ç»“æ„æ˜¯ä¸€ä¸ªMapã€‚<br>å½“æˆ‘ä»¬å†æ¬¡æŸ¥è¯¢åŒæ ·çš„æ•°æ®æ—¶ï¼ŒMyBatisä¼šå…ˆå»SqlSessionä¸­æŸ¥è¯¢æ˜¯å¦æœ‰ï¼Œæœ‰çš„è¯ç›´æ¥æ‹¿å‡ºæ¥ç”¨ã€‚</p>\n<p>å½“è°ƒç”¨SqlSessionçš„æ·»åŠ ï¼Œä¿®æ”¹ï¼Œåˆ é™¤ï¼Œcommit()ï¼Œclose()ã€clearCache()ç­‰æ–¹æ³•æ—¶ï¼Œå°±ä¼šæ¸…ç©ºä¸€çº§ç¼“å­˜ã€‚</p>\n<blockquote>\n<p>ç¬¬ä¸€æ¬¡å‘èµ·æŸ¥è¯¢ç”¨æˆ·idä¸º1çš„ç”¨æˆ·ä¿¡æ¯ï¼Œå…ˆå»æ‰¾ç¼“å­˜ä¸­æ˜¯å¦æœ‰idä¸º1çš„ç”¨æˆ·ä¿¡æ¯ï¼Œå¦‚æœæ²¡æœ‰ï¼Œä»æ•°æ®åº“æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯ã€‚<br>å¾—åˆ°ç”¨æˆ·ä¿¡æ¯ï¼Œå°†ç”¨æˆ·ä¿¡æ¯å­˜å‚¨åˆ°ä¸€çº§ç¼“å­˜ä¸­ã€‚<br>å¦‚æœSQLSessionå»æ‰§è¡Œcommitæ“ä½œï¼ˆæ‰§è¡Œæ’å…¥ã€æ›´æ–°ã€åˆ é™¤ï¼‰ï¼Œæ¸…ç©ºSqlSessionä¸­çš„ä¸€çº§ç¼“å­˜ï¼Œè¿™æ ·åšçš„ç›®çš„ä¸ºäº†è®©ç¼“å­˜ä¸­å­˜å‚¨çš„æ˜¯æœ€æ–°çš„ä¿¡æ¯ï¼Œé¿å…è„è¯»ã€‚<br>ç¬¬äºŒæ¬¡å‘èµ·æŸ¥è¯¢ç”¨æˆ·idä¸º1çš„ç”¨æˆ·ä¿¡æ¯ï¼Œå…ˆå»æ‰¾ç¼“å­˜ä¸­æ˜¯å¦æœ‰idä¸º1çš„ç”¨æˆ·ä¿¡æ¯ï¼Œç¼“å­˜ä¸­æœ‰ï¼Œç›´æ¥ä»ç¼“å­˜ä¸­è·å–ç”¨æˆ·ä¿¡æ¯ã€‚</p>\n</blockquote>\n<p><strong>äºŒçº§ç¼“å­˜</strong>ï¼šäºŒçº§ç¼“å­˜æ˜¯mapperæ˜ å°„çº§åˆ«çš„ç¼“å­˜ï¼Œå¤šä¸ªSqlSessionå»æ“ä½œåŒä¸€ä¸ªMapperæ˜ å°„çš„SQLè¯­å¥ï¼Œå¤šä¸ªSqlSessionå¯ä»¥å…±ç”¨äºŒçº§ç¼“å­˜ï¼ŒäºŒçº§ç¼“å­˜æ˜¯è·¨SqlSessionçš„ã€‚</p>\n<p>MyBatisä¸­SqlSessionFactoryå¯¹è±¡çš„ç¼“å­˜</p>\n<p>â€‹\tç”±åŒä¸€ä¸ªSqlSessionFactoryå¯¹è±¡åˆ›å»ºçš„SqlSessionå…±äº«å…¶ç¼“å­˜ã€‚</p>\n<p>â€‹\täºŒçº§ç¼“å­˜å­˜æ”¾çš„æ˜¯æ•°æ®ï¼Œè€Œä¸æ˜¯å¯¹è±¡ã€‚</p>\n<blockquote>\n<p>SQLSession1å»æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯ï¼ŒæŸ¥è¯¢åˆ°ç”¨æˆ·ä¿¡æ¯ä¼šå°†æŸ¥è¯¢æ•°æ®å­˜å‚¨åˆ°äºŒçº§ç¼“å­˜ä¸­ã€‚<br>å¦‚æœSqlSession3å»æ‰§è¡Œç›¸åŒ mapperæ˜ å°„ä¸‹SQLï¼Œæ‰§è¡Œcommitæäº¤ï¼Œå°†ä¼šæ¸…ç©ºè¯¥ mapperæ˜ å°„ä¸‹çš„äºŒçº§ç¼“å­˜åŒºåŸŸçš„æ•°æ®ã€‚<br>SQLSession2å»æŸ¥è¯¢ä¸SQLSession1ç›¸åŒçš„ç”¨æˆ·ä¿¡æ¯ï¼Œé¦–å…ˆä¼šå»ç¼“å­˜ä¸­æ‰¾æ˜¯å¦å­˜åœ¨æ•°æ®ï¼Œå¦‚æœå­˜åœ¨ç›´æ¥ä»ç¼“å­˜ä¸­å–å‡ºæ•°æ®ã€‚</p>\n</blockquote>\n<p>1ï¼‰ä¸€çº§ç¼“å­˜: åŸºäº PerpetualCache çš„ HashMap æœ¬åœ°ç¼“å­˜ï¼Œå…¶å­˜å‚¨ä½œç”¨åŸŸä¸º Sessionï¼Œå½“ Session flush æˆ– close ä¹‹åï¼Œè¯¥ Session ä¸­çš„æ‰€æœ‰ Cache å°±å°†æ¸…ç©ºï¼Œé»˜è®¤æ‰“å¼€ä¸€çº§ç¼“å­˜ï¼›</p>\n<p>2ï¼‰äºŒçº§ç¼“å­˜ä¸ä¸€çº§ç¼“å­˜å…¶æœºåˆ¶ç›¸åŒï¼Œé»˜è®¤ä¹Ÿæ˜¯é‡‡ç”¨ PerpetualCacheï¼ŒHashMap å­˜å‚¨ï¼Œä¸åŒåœ¨äºå…¶å­˜å‚¨ä½œç”¨åŸŸä¸º Mapper(Namespace)ï¼Œå¹¶ä¸”å¯è‡ªå®šä¹‰å­˜å‚¨æºï¼Œå¦‚ Ehcacheã€‚é»˜è®¤ä¸æ‰“å¼€äºŒçº§ç¼“å­˜ï¼Œè¦å¼€å¯äºŒçº§ç¼“å­˜ï¼Œä½¿ç”¨äºŒçº§ç¼“å­˜å±æ€§ç±»éœ€è¦å®ç°Serializableåºåˆ—åŒ–æ¥å£(å¯ç”¨æ¥ä¿å­˜å¯¹è±¡çš„çŠ¶æ€),å¯åœ¨å®ƒçš„æ˜ å°„æ–‡ä»¶ä¸­é…ç½® <code>&lt;cache/&gt;</code> ï¼›</p>\n<p>3ï¼‰å¯¹äºç¼“å­˜æ•°æ®æ›´æ–°æœºåˆ¶ï¼Œå½“æŸä¸€ä¸ªä½œç”¨åŸŸ(ä¸€çº§ç¼“å­˜ Session&#x2F;äºŒçº§ç¼“å­˜Namespaces)çš„è¿›è¡Œäº†C&#x2F;U&#x2F;D æ“ä½œåï¼Œé»˜è®¤è¯¥ä½œç”¨åŸŸä¸‹æ‰€æœ‰ select ä¸­çš„ç¼“å­˜å°†è¢« clearã€‚ </p>\n<h3 id=\"ä»€ä¹ˆæ˜¯MyBatisçš„æ¥å£ç»‘å®šï¼Ÿæœ‰å“ªäº›å®ç°æ–¹å¼ï¼Ÿ\"><a href=\"#ä»€ä¹ˆæ˜¯MyBatisçš„æ¥å£ç»‘å®šï¼Ÿæœ‰å“ªäº›å®ç°æ–¹å¼ï¼Ÿ\" class=\"headerlink\" title=\"ä»€ä¹ˆæ˜¯MyBatisçš„æ¥å£ç»‘å®šï¼Ÿæœ‰å“ªäº›å®ç°æ–¹å¼ï¼Ÿ\"></a>ä»€ä¹ˆæ˜¯MyBatisçš„æ¥å£ç»‘å®šï¼Ÿæœ‰å“ªäº›å®ç°æ–¹å¼ï¼Ÿ</h3><p>æ¥å£ç»‘å®šï¼Œå°±æ˜¯åœ¨MyBatisä¸­ä»»æ„å®šä¹‰æ¥å£,ç„¶åæŠŠæ¥å£é‡Œé¢çš„æ–¹æ³•å’ŒSQLè¯­å¥ç»‘å®š, æˆ‘ä»¬ç›´æ¥è°ƒç”¨æ¥å£æ–¹æ³•å°±å¯ä»¥,è¿™æ ·æ¯”èµ·åŸæ¥äº†SqlSessionæä¾›çš„æ–¹æ³•æˆ‘ä»¬å¯ä»¥æœ‰æ›´åŠ çµæ´»çš„é€‰æ‹©å’Œè®¾ç½®ã€‚</p>\n<p>æ¥å£ç»‘å®šæœ‰ä¸¤ç§å®ç°æ–¹å¼ï¼š</p>\n<ol>\n<li>é€šè¿‡æ³¨è§£ç»‘å®šï¼Œå°±æ˜¯åœ¨æ¥å£çš„æ–¹æ³•ä¸Šé¢åŠ ä¸Š @Selectã€@Updateç­‰æ³¨è§£ï¼Œé‡Œé¢åŒ…å«Sqlè¯­å¥æ¥ç»‘å®šï¼›</li>\n<li>é€šè¿‡xmlé‡Œé¢å†™SQLæ¥ç»‘å®š, åœ¨è¿™ç§æƒ…å†µä¸‹,è¦æŒ‡å®šxmlæ˜ å°„æ–‡ä»¶é‡Œé¢çš„namespaceå¿…é¡»ä¸ºæ¥å£çš„å…¨è·¯å¾„åã€‚å½“Sqlè¯­å¥æ¯”è¾ƒç®€å•æ—¶å€™,ç”¨æ³¨è§£ç»‘å®š, å½“SQLè¯­å¥æ¯”è¾ƒå¤æ‚æ—¶å€™,ç”¨xmlç»‘å®š,ä¸€èˆ¬ç”¨xmlç»‘å®šçš„æ¯”è¾ƒå¤šã€‚</li>\n</ol>"},{"title":"Javaå…«è‚¡æ–‡ - Spring","copyright":true,"mathjax":false,"date":"2023-01-23T08:14:06.000Z","toc":true,"urlname":"java-spring","_content":"\n> æ•´ç†çš„Springæ¡†æ¶ç›¸å…³çŸ¥è¯†ç‚¹å’Œé¢è¯•é¢˜ï¼Œéƒ¨åˆ†å†…å®¹æ‘˜è‡ªç½‘ç»œï¼Œå¦‚æœ‰ä¾µæƒè¯·è”ç³»æˆ‘ï½\t<!--more-->\n\n## Springæ¦‚è¿°\n\n### ä»€ä¹ˆæ˜¯spring?\n\nSpringæ˜¯**ä¸€ä¸ªè½»é‡çº§Javaå¼€å‘æ¡†æ¶**ï¼Œç›®çš„æ˜¯ä¸ºäº†è§£å†³å¼€å‘ä¸­çš„**ä¸šåŠ¡é€»è¾‘å±‚å’Œå…¶ä»–å„å±‚çš„è€¦åˆé—®é¢˜**ï¼Œç®€åŒ–Javaå¼€å‘ã€‚\n\n### Springæ¡†æ¶çš„æ ¸å¿ƒæ˜¯ä»€ä¹ˆ\n\n**Springæ¡†æ¶çš„æ ¸å¿ƒ**ï¼šIoCå®¹å™¨å’ŒAOPæ¨¡å—ã€‚\né€šè¿‡IoCå®¹å™¨ç®¡ç†Java Beanå¯¹è±¡åŠå…¶ç”Ÿå‘½å‘¨æœŸä»¥åŠä»–ä»¬ä¹‹é—´çš„è€¦åˆå…³ç³»ï¼›\né€šè¿‡AOPå°†ä¸€äº›å…¬å…±è¡Œä¸ºå’Œé€»è¾‘ï¼ŒæŠ½å–å¹¶å°è£…ä¸ºä¸€ä¸ªå¯é‡ç”¨çš„æ¨¡å—ï¼Œå‡å°‘ç³»ç»Ÿä¸­çš„é‡å¤ä»£ç ï¼Œé™ä½æ¨¡å—é—´çš„è€¦åˆåº¦\n\n### Springçš„ä¼˜ç¼ºç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ\n\nä¼˜ç‚¹\n\n- æ–¹ä¾¿è§£è€¦ï¼Œç®€åŒ–å¼€å‘ï¼ˆ**IoC**ï¼‰\n\n\tSpringå°±æ˜¯ä¸€ä¸ªå¤§å·¥å‚ï¼Œå¯ä»¥å°†æ‰€æœ‰å¯¹è±¡çš„åˆ›å»ºå’Œä¾èµ–å…³ç³»çš„ç»´æŠ¤ï¼Œäº¤ç»™Springç®¡ç†ã€‚\n\n- AOPç¼–ç¨‹çš„æ”¯æŒï¼ˆ**AOP**ï¼‰\n\n\tSpringæä¾›é¢å‘åˆ‡é¢ç¼–ç¨‹ï¼Œå¯ä»¥æ–¹ä¾¿çš„å®ç°å¯¹ç¨‹åºè¿›è¡Œæƒé™æ‹¦æˆªã€è¿è¡Œç›‘æ§ç­‰åŠŸèƒ½ã€‚\n\n- å£°æ˜å¼äº‹åŠ¡çš„æ”¯æŒï¼ˆ**äº‹åŠ¡**ï¼‰\n\n\tåªéœ€è¦é€šè¿‡é…ç½®å°±å¯ä»¥å®Œæˆå¯¹äº‹åŠ¡çš„ç®¡ç†ï¼Œè€Œæ— éœ€æ‰‹åŠ¨ç¼–ç¨‹ã€‚\n\n- æ–¹ä¾¿é›†æˆå„ç§ä¼˜ç§€æ¡†æ¶ï¼ˆ**é›†æˆ**ï¼‰\n\n\tSpringä¸æ’æ–¥å„ç§ä¼˜ç§€çš„å¼€æºæ¡†æ¶ï¼Œå…¶å†…éƒ¨æä¾›äº†å¯¹å„ç§ä¼˜ç§€æ¡†æ¶çš„ç›´æ¥æ”¯æŒï¼ˆå¦‚ï¼šStrutsã€Hibernateã€MyBatisç­‰ï¼‰ã€‚\n\n\nç¼ºç‚¹\n\n- Spring**ä¾èµ–åå°„ï¼Œåå°„å½±å“æ€§èƒ½**\n\n### Spring æ¡†æ¶ä¸­éƒ½ç”¨åˆ°äº†å“ªäº›è®¾è®¡æ¨¡å¼ï¼Ÿ\n\n1. å·¥å‚æ¨¡å¼ï¼šé€šè¿‡ BeanFactory å’Œ ApplicationContext æ¥ç®¡ç† Bean å¯¹è±¡ã€‚\n2. å•ä¾‹æ¨¡å¼ï¼šBeané»˜è®¤ä¸ºå•ä¾‹æ¨¡å¼ã€‚\n3. ä»£ç†æ¨¡å¼ï¼šSpringçš„AOPåŠŸèƒ½ç”¨åˆ°äº†åŸºäºæ¥å£çš„JDKçš„åŠ¨æ€ä»£ç†å’ŒåŸºäºå­ç±»çš„CGLIBåŠ¨æ€ä»£ç†ï¼›\n\n### Springæ¡†æ¶ä¸­æœ‰å“ªäº›ä¸åŒç±»å‹çš„äº‹ä»¶\n\n**Springçš„ApplicationContext æä¾›äº†æ”¯æŒäº‹ä»¶å’Œä»£ç ä¸­ç›‘å¬å™¨çš„åŠŸèƒ½ã€‚**  \n\nå¦‚æœä¸€ä¸ªbeanå®ç°äº†`ApplicationListener`æ¥å£ï¼Œå½“ä¸€ä¸ª`ApplicationEvent` è¢«å‘å¸ƒä»¥åï¼Œbeanä¼šè‡ªåŠ¨è¢«é€šçŸ¥ã€‚\n\n```javascript\npublic class AllApplicationEventListener implements ApplicationListener < ApplicationEvent >{\n    @Override\n    public void onApplicationEvent(ApplicationEvent applicationEvent){\n        //process event\n    }\n}\n```\n\n**Spring æä¾›äº†ä»¥ä¸‹5ç§æ ‡å‡†çš„äº‹ä»¶ï¼š**\n\n- ä¸Šä¸‹æ–‡æ›´æ–°äº‹ä»¶ï¼ˆContextRefreshedEventï¼‰ï¼šè¯¥äº‹ä»¶ä¼šåœ¨ApplicationContextè¢«åˆå§‹åŒ–æˆ–è€…æ›´æ–°æ—¶å‘å¸ƒã€‚ä¹Ÿå¯ä»¥åœ¨è°ƒç”¨`ConfigurableApplicationContext` æ¥å£ä¸­çš„`refresh()`æ–¹æ³•æ—¶è¢«è§¦å‘ã€‚\n- ä¸Šä¸‹æ–‡å¼€å§‹äº‹ä»¶ï¼ˆContextStartedEventï¼‰ï¼šå½“å®¹å™¨è°ƒç”¨`ConfigurableApplicationContext`çš„`Start()`æ–¹æ³•å¼€å§‹/é‡æ–°å¼€å§‹å®¹å™¨æ—¶è§¦å‘è¯¥äº‹ä»¶ã€‚\n- ä¸Šä¸‹æ–‡åœæ­¢äº‹ä»¶ï¼ˆContextStoppedEventï¼‰ï¼šå½“å®¹å™¨è°ƒç”¨`ConfigurableApplicationContext`çš„`Stop()`æ–¹æ³•åœæ­¢å®¹å™¨æ—¶è§¦å‘è¯¥äº‹ä»¶ã€‚\n- ä¸Šä¸‹æ–‡å…³é—­äº‹ä»¶ï¼ˆContextClosedEventï¼‰ï¼šå½“`ApplicationContext`è¢«å…³é—­æ—¶è§¦å‘è¯¥äº‹ä»¶ã€‚å®¹å™¨è¢«å…³é—­æ—¶ï¼Œå…¶ç®¡ç†çš„æ‰€æœ‰å•ä¾‹Beanéƒ½è¢«é”€æ¯ã€‚\n- è¯·æ±‚å¤„ç†äº‹ä»¶ï¼ˆRequestHandledEventï¼‰ï¼šåœ¨Webåº”ç”¨ä¸­ï¼Œå½“ä¸€ä¸ªhttpè¯·æ±‚ï¼ˆrequestï¼‰ç»“æŸè§¦å‘è¯¥äº‹ä»¶ã€‚\n\n### Spring åº”ç”¨ç¨‹åºæœ‰å“ªäº›ä¸åŒç»„ä»¶ï¼Ÿ\n\nSpring åº”ç”¨ä¸€èˆ¬æœ‰ä»¥ä¸‹ç»„ä»¶ï¼š\n\n- Bean ç±» - å®ƒåŒ…å«å±æ€§ï¼Œsetter å’Œ getter æ–¹æ³•ï¼Œå‡½æ•°ç­‰ã€‚\n- Bean é…ç½®æ–‡ä»¶ - åŒ…å«ç±»çš„ä¿¡æ¯ä»¥åŠå¦‚ä½•é…ç½®å®ƒä»¬ã€‚\n- æ¥å£ - å¤„ç† Bean \n- ç”¨æˆ·ç¨‹åº - å®ƒä½¿ç”¨æ¥å£ã€‚\n\n## Springæ§åˆ¶åè½¬(IOC)\n\n### ä»€ä¹ˆæ˜¯Spring IOC å®¹å™¨ï¼Ÿ\n\nSpring IOCï¼ˆæ§åˆ¶åè½¬ï¼‰ æŠŠç»„ä»¶å¯¹è±¡æ§åˆ¶æƒäº¤ç»™å®¹å™¨ï¼Œå®¹å™¨è´Ÿè´£åˆ›å»ºå¯¹è±¡ï¼Œé…ç½®å¯¹è±¡ï¼ˆé€šè¿‡ä¾èµ–æ³¨å…¥ï¼ˆDIï¼‰ï¼Œå¹¶ä¸”ç®¡ç†è¿™äº›å¯¹è±¡çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸã€‚IoCè®©ç›¸äº’åä½œçš„ç»„ä»¶ä¿æŒæ¾è€¦åˆã€‚\n\n### Spring IoC çš„å®ç°æœºåˆ¶\n\nSpring ä¸­çš„ IoC çš„å®ç°åŸç†å°±æ˜¯**å·¥å‚æ¨¡å¼åŠ åå°„**ã€‚\n\n```java\ninterface Fruit {\n    void eat();\n}\n\nclass Apple implements Fruit {\n    public void eat(){\n        System.out.println(\"Apple\");\n    }\n}\n\nclass Orange implements Fruit {\n    public void eat(){\n        System.out.println(\"Orange\");\n    }\n}\n\nclass Factory {\n    public static Fruit getInstance(String className) {\t// ä½¿ç”¨åå°„ï¼Œç”¨å­—ç¬¦ä¸²è·å–åˆ°å®ä¾‹\n        Fruit f=null;\n        try {\n            f = (Fruit) Class.forName(className).newInstance();\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n        return f;\n    }\n}\n\nclass Client {\n    public static void main(String[] a) {\n        Fruit f = Factory.getInstance(\"io.github.dunwu.spring.Apple\");\n        if(f != null){\n            f.eat();\n        }\n    }\n}\n```\n\n### BeanFactory å’Œ ApplicationContextæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\n\nBeanFactoryå’ŒApplicationContextæ˜¯Springçš„ä¸¤å¤§æ ¸å¿ƒæ¥å£ï¼Œéƒ½å¯ä»¥å½“åšSpringçš„å®¹å™¨ã€‚\nApplicationContextæ˜¯BeanFactoryçš„å­æ¥å£ã€‚\n\n1. ä¾èµ–å…³ç³»\n\nBeanFactoryï¼šæ˜¯Springé‡Œé¢æœ€åº•å±‚çš„æ¥å£ï¼ŒåŒ…å«äº†å„ç§Beançš„å®šä¹‰ï¼Œè¯»å–beané…ç½®æ–‡æ¡£ï¼Œç®¡ç†beançš„åŠ è½½ã€å®ä¾‹åŒ–ï¼Œæ§åˆ¶beançš„ç”Ÿå‘½å‘¨æœŸï¼Œç»´æŠ¤beanä¹‹é—´çš„ä¾èµ–å…³ç³»ã€‚\n\nApplicationContextæ¥å£ä½œä¸ºBeanFactoryçš„å­æ¥å£ï¼Œé™¤äº†æä¾›BeanFactoryæ‰€å…·æœ‰çš„åŠŸèƒ½å¤–ï¼Œè¿˜æä¾›äº†æ›´å®Œæ•´çš„æ¡†æ¶åŠŸèƒ½ï¼š\n\n- æ”¯æŒå›½é™…åŒ–ã€‚\n- æ”¯æŒè®¿é—®æ–‡ä»¶èµ„æº\n- æ”¯æŒäº‹ä»¶å‘å¸ƒé€šçŸ¥\n- åŒæ—¶åŠ è½½å¤šä¸ªé…ç½®æ–‡ä»¶ã€‚\n\né…ç½®æµç¨‹ï¼š\n\n1. åŠ è½½é…ç½®æ–‡ä»¶ï¼Œè§£ææˆ BeanDefinition æ”¾åœ¨ Map é‡Œï¼Œmapä¸­å­˜æ”¾`<BeanNameï¼ŒClasså¯¹è±¡>`çš„æ˜ å°„\n2. è°ƒç”¨ getBean çš„æ—¶å€™ï¼Œä» BeanDefinition æ‰€å±çš„ Map é‡Œï¼Œæ‹¿å‡º Class å¯¹è±¡ä½¿ç”¨åå°„è¿›è¡Œå®ä¾‹åŒ–ï¼ŒåŒæ—¶ï¼Œå¦‚æœæœ‰ä¾èµ–å…³ç³»ï¼Œå°†é€’å½’è°ƒç”¨ getBean æ–¹æ³• â€”â€” å®Œæˆä¾èµ–æ³¨å…¥ã€‚\n3. åŠ è½½æ–¹å¼\n\n**BeanFactroy**é‡‡ç”¨çš„æ˜¯**å»¶è¿ŸåŠ è½½**å½¢å¼æ¥æ³¨å…¥Beançš„ï¼Œå³åªæœ‰åœ¨ä½¿ç”¨åˆ°æŸä¸ªBeanæ—¶(è°ƒç”¨getBean())ï¼Œæ‰å¯¹è¯¥Beanè¿›è¡ŒåŠ è½½å®ä¾‹åŒ–ã€‚è¿™æ ·ï¼Œæˆ‘ä»¬å°±ä¸èƒ½å‘ç°ä¸€äº›å­˜åœ¨çš„Springçš„é…ç½®é—®é¢˜ã€‚å¦‚æœBeançš„æŸä¸€ä¸ªå±æ€§æ²¡æœ‰æ³¨å…¥æˆ–è€…æ˜¯å±æ€§æ³¨å…¥é”™è¯¯ï¼ŒBeanFacotryåŠ è½½åï¼Œç›´è‡³ç¬¬ä¸€æ¬¡ä½¿ç”¨è°ƒç”¨getBeanæ–¹æ³•æ‰ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚\n\n**ApplicationContext**ï¼Œå®ƒæ˜¯åœ¨å®¹å™¨å¯åŠ¨æ—¶ï¼Œ**ä¸€æ¬¡æ€§åˆ›å»º**äº†æ‰€æœ‰çš„Beanã€‚è¿™æ ·ï¼Œåœ¨å®¹å™¨å¯åŠ¨æ—¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥**å‘ç°Springä¸­å­˜åœ¨çš„é…ç½®é”™è¯¯**ï¼Œè¿™æ ·æœ‰åˆ©äºæ£€æŸ¥æ‰€ä¾èµ–å±æ€§æ˜¯å¦æ³¨å…¥ã€‚ ApplicationContextå¯åŠ¨åé¢„è½½å…¥æ‰€æœ‰çš„å•å®ä¾‹Beanï¼Œé€šè¿‡é¢„è½½å…¥å•å®ä¾‹bean ,ç¡®ä¿å½“ä½ éœ€è¦çš„æ—¶å€™ï¼Œä½ å°±ä¸ç”¨ç­‰å¾…ï¼Œå› ä¸ºå®ƒä»¬å·²ç»åˆ›å»ºå¥½äº†ã€‚\n\nç”±äºåœ¨å®¹å™¨å¯åŠ¨æ—¶ä¸€æ¬¡æ€§åˆ›å»ºæ‰€æœ‰çš„Beanï¼Œå› æ­¤ApplicationContext æ›´åŠ å ç”¨å†…å­˜ç©ºé—´ï¼Œå½“é…ç½®çš„Beanæ¯”è¾ƒå¤šæ—¶ï¼Œç¨‹åºå¯åŠ¨è¾ƒæ…¢ã€‚\n\n#### â­BeanFactoryå’ŒFactoryBeanåŒºåˆ«ï¼Ÿ\n\nBeanFactoryï¼šæ˜¯spring IoCå®¹å™¨çš„åº•å±‚æ¥å£ï¼Œå¯ä»¥ç”¨æ¥ç®¡ç†beanåŠå…¶ç”Ÿå‘½å‘¨æœŸï¼›\n\nFactoryBeanï¼šå¦‚æœæŸä¸ª bean å®ç°äº†FactoryBeanè¿™ä¸ªæ¥å£ï¼Œé€šè¿‡ getBean æ–¹æ³•æ¥è·å– bean çš„æ—¶å€™ï¼Œå¹¶ä¸æ˜¯è¿”å›è‡ªå·±çš„å®ä¾‹ï¼Œè€Œæ˜¯è¿”å›å…¶ getObject() æ–¹æ³•çš„è¿”å›å€¼\n\n### ApplicationContexté€šå¸¸çš„å®ç°æ˜¯ä»€ä¹ˆï¼Ÿ\n\n**FileSystemXmlApplicationContext** ï¼šæ­¤å®¹å™¨ä»ä¸€ä¸ªXMLæ–‡ä»¶ä¸­åŠ è½½beansçš„å®šä¹‰ï¼ŒXML Bean é…ç½®æ–‡ä»¶çš„å…¨è·¯å¾„åå¿…é¡»æä¾›ç»™å®ƒçš„æ„é€ å‡½æ•°ã€‚\n\n**ClassPathXmlApplicationContext**ï¼šæ­¤å®¹å™¨ä¹Ÿä»ä¸€ä¸ªXMLæ–‡ä»¶ä¸­åŠ è½½beansçš„å®šä¹‰ï¼Œè¿™é‡Œï¼Œä½ éœ€è¦æ­£ç¡®è®¾ç½®classpathå› ä¸ºè¿™ä¸ªå®¹å™¨å°†åœ¨classpathé‡Œæ‰¾beané…ç½®ã€‚\n\n**AnnotationConfigApplicationContext**ï¼šå®ƒæ˜¯ç”¨äºè¯»å–æ³¨è§£åˆ›å»ºå®¹å™¨çš„\n\n### ä»€ä¹ˆæ˜¯Springçš„ä¾èµ–æ³¨å…¥ï¼Ÿ\n\nå…·ä½“å«ä¹‰æ˜¯:å½“æŸä¸ªè°ƒç”¨è€…éœ€è¦å¦ä¸€ä¸ªè¢«è°ƒç”¨è€…çš„ååŠ©æ—¶ï¼Œåœ¨ ä¼ ç»Ÿçš„ç¨‹åºè®¾è®¡è¿‡ç¨‹ä¸­ï¼Œé€šå¸¸ç”±è°ƒç”¨è€…æ¥åˆ›å»ºè¢«è°ƒç”¨è€…çš„å®ä¾‹ã€‚ä½†åœ¨Springé‡Œï¼Œåˆ›å»ºè¢«è°ƒç”¨è€…çš„å·¥ä½œä¸å†ç”±è°ƒç”¨è€…æ¥å®Œæˆï¼Œå› æ­¤ç§°ä¸ºæ§åˆ¶åè½¬ï¼›åˆ›å»ºè¢«è°ƒç”¨è€… å®ä¾‹çš„å·¥ä½œé€šå¸¸ç”±Springå®¹å™¨æ¥å®Œæˆï¼Œç„¶åæ³¨å…¥è°ƒç”¨è€…ï¼Œå› æ­¤ä¹Ÿç§°ä¸ºä¾èµ–æ³¨å…¥ã€‚\n\n### ä¾èµ–æ³¨å…¥æœ‰ä»€ä¹ˆä¼˜åŠ¿\n\nä¾èµ–æ³¨å…¥ä¹‹æ‰€ä»¥æ›´æµè¡Œæ˜¯å› ä¸ºå®ƒæ˜¯ä¸€ç§æ›´å¯å–çš„æ–¹å¼ï¼šè®©å®¹å™¨å…¨æƒè´Ÿè´£ä¾èµ–æŸ¥è¯¢ï¼Œå—ç®¡ç»„ä»¶åªéœ€è¦æš´éœ²JavaBeançš„setteræ–¹æ³•æˆ–è€…å¸¦å‚æ•°çš„æ„é€ å™¨æˆ–è€…æ¥å£ï¼Œä½¿å®¹å™¨å¯ä»¥åœ¨åˆå§‹åŒ–æ—¶ç»„è£…å¯¹è±¡çš„ä¾èµ–å…³ç³»ã€‚å…¶ä¸ä¾èµ–æŸ¥æ‰¾æ–¹å¼ç›¸æ¯”ï¼Œä¸»è¦ä¼˜åŠ¿ä¸ºï¼š\n\n- æŸ¥æ‰¾å®šä½æ“ä½œä¸åº”ç”¨ä»£ç å®Œå…¨æ— å…³ã€‚\n- ä¸ä¾èµ–äºå®¹å™¨çš„APIï¼Œå¯ä»¥å¾ˆå®¹æ˜“åœ°åœ¨ä»»ä½•å®¹å™¨ä»¥å¤–ä½¿ç”¨åº”ç”¨å¯¹è±¡ã€‚\n- ä¸éœ€è¦ç‰¹æ®Šçš„æ¥å£ï¼Œç»å¤§å¤šæ•°å¯¹è±¡å¯ä»¥åšåˆ°å®Œå…¨ä¸å¿…ä¾èµ–å®¹å™¨ã€‚\n\n### æœ‰å“ªäº›ä¸åŒç±»å‹çš„ä¾èµ–æ³¨å…¥å®ç°æ–¹å¼ï¼Ÿ\n\n**æ„é€ å™¨ä¾èµ–æ³¨å…¥**ï¼šæ„é€ å™¨ä¾èµ–æ³¨å…¥é€šè¿‡å®¹å™¨è§¦å‘ä¸€ä¸ªç±»çš„æ„é€ å™¨æ¥å®ç°çš„ï¼Œè¯¥ç±»æœ‰ä¸€ç³»åˆ—å‚æ•°ï¼Œæ¯ä¸ªå‚æ•°ä»£è¡¨ä¸€ä¸ªå¯¹å…¶ä»–ç±»çš„ä¾èµ–ã€‚\n\n**Setteræ–¹æ³•æ³¨å…¥**ï¼šSetteræ–¹æ³•æ³¨å…¥æ˜¯å®¹å™¨é€šè¿‡è°ƒç”¨æ— å‚æ„é€ å™¨æˆ–æ— å‚staticå·¥å‚ æ–¹æ³•å®ä¾‹åŒ–beanä¹‹åï¼Œè°ƒç”¨è¯¥beançš„setteræ–¹æ³•ï¼Œå³å®ç°äº†åŸºäºsetterçš„ä¾èµ–æ³¨å…¥ã€‚\n\n### æ„é€ å™¨ä¾èµ–æ³¨å…¥å’Œ setteræ–¹æ³•æ³¨å…¥çš„åŒºåˆ«\n\nï¼ˆéƒ¨åˆ†æ³¨å…¥ï¼‰åœ¨setteræ³¨å…¥,å¯ä»¥å°†ä¾èµ–é¡¹éƒ¨åˆ†æ³¨å…¥,æ„é€ æ–¹æ³•æ³¨å…¥ä¸èƒ½éƒ¨åˆ†æ³¨å…¥ã€‚\n\nï¼ˆå±æ€§è¦†ç›–ï¼‰å¦‚æœæˆ‘ä»¬ä¸ºåŒä¸€å±æ€§æä¾›setterå’Œæ„é€ æ–¹æ³•æ³¨å…¥ï¼Œsetteræ³¨å…¥å°†è¦†ç›–æ„é€ æ–¹æ³•æ³¨å…¥ã€‚ä½†æ˜¯æ„é€ æ–¹æ³•æ³¨å…¥ä¸èƒ½è¦†ç›–setteræ³¨å…¥å€¼ã€‚æ˜¾ç„¶ï¼Œæ„é€ æ–¹æ³•æ³¨å…¥è¢«ç§°ä¸ºåˆ›å»ºå®ä¾‹çš„ç¬¬ä¸€é€‰é¡¹ã€‚\n\nï¼ˆå¾ªç¯ä¾èµ–ï¼‰åœ¨æ„é€ å‡½æ•°æ³¨å…¥,å¦‚æœAå’ŒBå¯¹è±¡ç›¸äº’ä¾èµ–ï¼šAä¾èµ–äºB,Bä¹Ÿä¾èµ–äºA,æ­¤æ—¶åœ¨åˆ›å»ºå¯¹è±¡çš„Aæˆ–è€…Bæ—¶ï¼ŒSpringæŠ›å‡ºObjectCurrentlyInCreationExceptionã€‚æ‰€ä»¥Springå¯ä»¥é€šè¿‡setteræ³¨å…¥,ä»è€Œè§£å†³å¾ªç¯ä¾èµ–çš„é—®é¢˜ã€‚\n\n**æœ€å¥½çš„è§£å†³æ–¹æ¡ˆæ˜¯ç”¨æ„é€ å™¨å‚æ•°å®ç°å¼ºåˆ¶ä¾èµ–ï¼Œsetteræ–¹æ³•å®ç°å¯é€‰ä¾èµ–**\n\n### è®²ä¸€è®²Springä¸­çš„å¾ªç¯ä¾èµ–\n\nhttps://www.cnblogs.com/daimzh/p/13256413.html\n\nhttps://blog.csdn.net/weixin_49592546/article/details/108050566\n\n#### ä»€ä¹ˆæ˜¯å¾ªç¯ä¾èµ–ï¼Ÿ\n\n```java\n@Component\npublic class A {\n    // Aä¸­æ³¨å…¥äº†B\n\t@Autowired\n\tprivate B b;\n}\n\n@Component\npublic class B {\n    // Bä¸­ä¹Ÿæ³¨å…¥äº†A\n\t@Autowired\n\tprivate A a;\n}\n```\n\n#### Springæ˜¯å¦‚ä½•è§£å†³çš„å¾ªç¯ä¾èµ–ï¼Ÿ\n\n> ä»¥ä¸‹ï¼š\n>\n> ä½œè€…ï¼šé˜¿é‡Œäº‘äº‘æ –å·\n>\n> é“¾æ¥ï¼šhttps://zhuanlan.zhihu.com/p/368769721\n>\n> æ¥æºï¼šçŸ¥ä¹\n>\n> è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚\n\né¦–å…ˆï¼ŒSpring è§£å†³å¾ªç¯ä¾èµ–æœ‰ä¸¤ä¸ªå‰ææ¡ä»¶ï¼š\n\n1. ä¸å…¨æ˜¯æ„é€ å™¨æ–¹å¼çš„å¾ªç¯ä¾èµ–\n2. å¿…é¡»æ˜¯å•ä¾‹\n\nåŸºäºä¸Šé¢çš„é—®é¢˜ï¼Œæˆ‘ä»¬çŸ¥é“Beançš„ç”Ÿå‘½å‘¨æœŸï¼Œæœ¬è´¨ä¸Šè§£å†³å¾ªç¯ä¾èµ–çš„é—®é¢˜å°±æ˜¯ä¸‰çº§ç¼“å­˜ï¼Œé€šè¿‡ä¸‰çº§ç¼“å­˜æå‰æ‹¿åˆ°æœªåˆå§‹åŒ–å®Œå…¨çš„å¯¹è±¡ã€‚\n\n```java\n/** Cache of singleton objects: bean name to bean instance. */\nprivate final Map<String, Object> singletonObjects = new ConcurrentHashMap<>(256);\n/** Cache of early singleton objects: bean name to bean instance. */\nprivate final Map<String, Object> earlySingletonObjects = new HashMap<>(16);\n/** Cache of singleton factories: bean name to ObjectFactory. */\nprivate final Map<String, ObjectFactory<?>> singletonFactories = new HashMap<>(16);\n```\n\nç¬¬ä¸€çº§ç¼“å­˜ï¼šç”¨æ¥ä¿å­˜å®ä¾‹åŒ–ã€åˆå§‹åŒ–éƒ½å®Œæˆçš„å¯¹è±¡\n\nç¬¬äºŒçº§ç¼“å­˜ï¼šç”¨æ¥ä¿å­˜å®ä¾‹åŒ–å®Œæˆï¼Œä½†æ˜¯æœªåˆå§‹åŒ–å®Œæˆçš„å¯¹è±¡\n\nç¬¬ä¸‰çº§ç¼“å­˜ï¼šç”¨æ¥ä¿å­˜ä¸€ä¸ªå¯¹è±¡å·¥å‚ï¼Œæä¾›ä¸€ä¸ªåŒ¿åå†…éƒ¨ç±»ï¼Œç”¨äºåˆ›å»ºäºŒçº§ç¼“å­˜ä¸­çš„å¯¹è±¡\n\n![Springä¸‰çº§ç¼“å­˜](https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/TyporaNotesv2-dbda6a103e41cde4a54548386d6c1cc2_720w.jpg)\n\nå‡è®¾ä¸€ä¸ªç®€å•çš„å¾ªç¯ä¾èµ–åœºæ™¯ï¼ŒAã€Bäº’ç›¸ä¾èµ–ã€‚\n\n![ç®€å•çš„å¾ªç¯ä¾èµ–åœºæ™¯](https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/TyporaNotesv2-f20f1e81c8011fd99f723127cacf7430_720w.jpg)\n\nAå¯¹è±¡çš„åˆ›å»ºè¿‡ç¨‹ï¼š\n\n1. åˆ›å»ºå¯¹è±¡Aï¼Œå®ä¾‹åŒ–çš„æ—¶å€™æŠŠAå¯¹è±¡å·¥å‚æ”¾å…¥ä¸‰çº§ç¼“å­˜ï¼›\n\n![å®ä¾‹åŒ–å¯¹è±¡A](https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/TyporaNotesv2-b295374aff4235ee9c0538bf03856217_720w.jpg)\n\n\n\n2. Aæ³¨å…¥å±æ€§æ—¶ï¼Œå‘ç°ä¾èµ–Bï¼Œè½¬è€Œå»å®ä¾‹åŒ–B\n\n3. åŒæ ·åˆ›å»ºå¯¹è±¡Bï¼Œæ³¨å…¥å±æ€§æ—¶å‘ç°ä¾èµ–Aï¼Œä¾æ¬¡ä»ä¸€çº§åˆ°ä¸‰çº§ç¼“å­˜æŸ¥è¯¢Aï¼Œä»ä¸‰çº§ç¼“å­˜é€šè¿‡å¯¹è±¡å·¥å‚æ‹¿åˆ°Aï¼ŒæŠŠAæ”¾å…¥äºŒçº§ç¼“å­˜ï¼ŒåŒæ—¶åˆ é™¤ä¸‰çº§ç¼“å­˜ä¸­çš„Aï¼Œæ­¤æ—¶ï¼ŒBå·²ç»å®ä¾‹åŒ–å¹¶ä¸”åˆå§‹åŒ–å®Œæˆï¼ŒæŠŠBæ”¾å…¥ä¸€çº§ç¼“å­˜ã€‚\n\n![åˆ›å»ºå¯¹è±¡B](https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/TyporaNotesv2-51cb735fc6c02c2225d2f38b9b5b6da9_720w.jpg)\n\n4. æ¥ç€ç»§ç»­åˆ›å»ºAï¼Œé¡ºåˆ©ä»ä¸€çº§ç¼“å­˜æ‹¿åˆ°å®ä¾‹åŒ–ä¸”åˆå§‹åŒ–å®Œæˆçš„Bå¯¹è±¡ï¼ŒAå¯¹è±¡åˆ›å»ºä¹Ÿå®Œæˆï¼Œåˆ é™¤äºŒçº§ç¼“å­˜ä¸­çš„Aï¼ŒåŒæ—¶æŠŠAæ”¾å…¥ä¸€çº§ç¼“å­˜\n\n5. æœ€åï¼Œä¸€çº§ç¼“å­˜ä¸­ä¿å­˜ç€å®ä¾‹åŒ–ã€åˆå§‹åŒ–éƒ½å®Œæˆçš„Aã€Bå¯¹è±¡\n\n![æœ€ç»ˆç»“æœ](https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/TyporaNotesv2-a1eaa5d9f8bec23e373dc1b9f86ddb25_720w.jpg)\n\nå› æ­¤ï¼Œç”±äºæŠŠå®ä¾‹åŒ–å’Œåˆå§‹åŒ–çš„æµç¨‹åˆ†å¼€äº†ï¼Œæ‰€ä»¥å¦‚æœéƒ½æ˜¯ç”¨æ„é€ å™¨çš„è¯ï¼Œå°±æ²¡æ³•åˆ†ç¦»è¿™ä¸ªæ“ä½œï¼Œæ‰€ä»¥éƒ½æ˜¯æ„é€ å™¨çš„è¯å°±æ— æ³•è§£å†³å¾ªç¯ä¾èµ–çš„é—®é¢˜äº†ã€‚\n\n### 8. ä¸ºä»€ä¹ˆè¦ä¸‰çº§ç¼“å­˜ï¼ŸäºŒçº§ä¸è¡Œå—ï¼Ÿ\n\nä¸å¯ä»¥ï¼Œä¸»è¦æ˜¯ä¸ºäº†ç”Ÿæˆä»£ç†å¯¹è±¡ã€‚\n\nå› ä¸ºä¸‰çº§ç¼“å­˜ä¸­æ”¾çš„æ˜¯ç”Ÿæˆå…·ä½“å¯¹è±¡çš„å¯¹è±¡å·¥å‚ï¼Œä»–å¯ä»¥ç”Ÿæˆä»£ç†å¯¹è±¡ï¼Œä¹Ÿå¯ä»¥æ˜¯æ™®é€šçš„å®ä¾‹å¯¹è±¡ã€‚\n\nå‡è®¾åªæœ‰äºŒçº§ç¼“å­˜çš„æƒ…å†µï¼Œå¾€äºŒçº§ç¼“å­˜ä¸­æ”¾çš„æ˜¾ç¤ºä¸€ä¸ªæ™®é€šçš„Beanå¯¹è±¡ï¼Œ`BeanPostProcessor`å»ç”Ÿæˆä»£ç†å¯¹è±¡ä¹‹åï¼Œè¦†ç›–æ‰äºŒçº§ç¼“å­˜ä¸­çš„æ™®é€šBeanå¯¹è±¡ï¼Œé‚£ä¹ˆå¤šçº¿ç¨‹ç¯å¢ƒä¸‹å¯èƒ½å–åˆ°çš„å¯¹è±¡å°±ä¸ä¸€è‡´äº†ã€‚\n\n![Aä»£ç†å¯¹è±¡è¦†ç›–Aæ™®é€šBean](https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/TyporaNotesv2-e4e9050787017c7272dc313f88af9382_720w.jpg)\n\n\n\n## Spring Beans\n\n### å¦‚ä½•ç»™Spring å®¹å™¨æä¾›é…ç½®å…ƒæ•°æ®ï¼ŸSpringæœ‰å‡ ç§é…ç½®æ–¹å¼\n\nè¿™é‡Œæœ‰ä¸‰ç§é‡è¦çš„æ–¹æ³•ç»™Spring å®¹å™¨æä¾›é…ç½®å…ƒæ•°æ®ã€‚\n\n- XMLé…ç½®æ–‡ä»¶ã€‚\n- åŸºäºæ³¨è§£çš„é…ç½®ã€‚\n- åŸºäºJavaçš„é…ç½®ã€‚\n\n### Springé…ç½®æ–‡ä»¶åŒ…å«äº†å“ªäº›ä¿¡æ¯\n\nSpringé…ç½®æ–‡ä»¶æ˜¯ä¸ªXML æ–‡ä»¶ï¼Œé€šè¿‡è¯»å–æŒ‡å®šç±»çš„å…¨é™å®šç±»åã€‚åå°„åˆ›å»ºå¯¹è±¡ï¼Œä¸¢å…¥iocå®¹å™¨ä¸­ï¼Œè¯¥å¯¹è±¡å¯ä»¥é€šè¿‡idæ¥è·å–\n\n### SpringåŸºäºxmlæ³¨å…¥beançš„å‡ ç§æ–¹å¼\n\n1. Setæ–¹æ³•æ³¨å…¥ï¼š`<property name=\"xxx\" value=\"yyy\"/>`\n2. æ„é€ å™¨æ³¨å…¥ï¼š`<construtor-arg type/index/name=\"xxx\" value=\"yyy\"/>`\n3. é™æ€å·¥å‚æ³¨å…¥ï¼›factory-bean factory-method\n4. å®ä¾‹å·¥å‚ï¼› class factory-method\n\n### è§£é‡ŠSpringæ”¯æŒçš„å‡ ç§beançš„ä½œç”¨åŸŸ\n\nSpringæ¡†æ¶æ”¯æŒä»¥ä¸‹äº”ç§beançš„ä½œç”¨åŸŸï¼š\n\n- **singleton :** beanåœ¨æ¯ä¸ªSpring ioc å®¹å™¨ä¸­åªæœ‰ä¸€ä¸ªå®ä¾‹ã€‚\n- **prototype**ï¼šä¸€ä¸ªbeançš„å®šä¹‰å¯ä»¥æœ‰å¤šä¸ªå®ä¾‹ã€‚\n- **request**ï¼šæ¯æ¬¡httpè¯·æ±‚éƒ½ä¼šåˆ›å»ºä¸€ä¸ªbeanï¼Œè¯¥ä½œç”¨åŸŸä»…åœ¨åŸºäºwebçš„Spring ApplicationContextæƒ…å½¢ä¸‹æœ‰æ•ˆã€‚\n- **session**ï¼šåœ¨ä¸€ä¸ªHTTP Sessionä¸­ï¼Œä¸€ä¸ªbeanå®šä¹‰å¯¹åº”ä¸€ä¸ªå®ä¾‹ã€‚è¯¥ä½œç”¨åŸŸä»…åœ¨åŸºäºwebçš„Spring ApplicationContextæƒ…å½¢ä¸‹æœ‰æ•ˆã€‚\n- **global-session**ï¼šåœ¨ä¸€ä¸ªå…¨å±€çš„HTTP Sessionä¸­ï¼Œä¸€ä¸ªbeanå®šä¹‰å¯¹åº”ä¸€ä¸ªå®ä¾‹ã€‚è¯¥ä½œç”¨åŸŸä»…åœ¨åŸºäºwebçš„Spring ApplicationContextæƒ…å½¢ä¸‹æœ‰æ•ˆã€‚\n\n**æ³¨æ„ï¼š** ç¼ºçœçš„Spring bean çš„ä½œç”¨åŸŸæ˜¯singletonã€‚ä½¿ç”¨ prototype ä½œç”¨åŸŸéœ€è¦æ…é‡çš„æ€è€ƒï¼Œå› ä¸ºé¢‘ç¹åˆ›å»ºå’Œé”€æ¯ bean ä¼šå¸¦æ¥å¾ˆå¤§çš„æ€§èƒ½å¼€é”€ã€‚\n\n### Springæ¡†æ¶ä¸­çš„å•ä¾‹beanæ˜¯çº¿ç¨‹å®‰å…¨çš„å—ï¼Ÿ\n\nä¸æ˜¯ï¼ŒSpringæ¡†æ¶ä¸­çš„å•ä¾‹beanä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚\n\nspring ä¸­çš„ bean é»˜è®¤æ˜¯å•ä¾‹æ¨¡å¼ï¼Œspring æ¡†æ¶å¹¶æ²¡æœ‰å¯¹å•ä¾‹ bean è¿›è¡Œå¤šçº¿ç¨‹çš„å°è£…å¤„ç†ã€‚\n\nç„¶è€Œï¼Œå®é™…ä¸Šå¤§éƒ¨åˆ†æ—¶å€™ spring bean æ— çŠ¶æ€çš„ï¼ˆæ¯”å¦‚ dao ç±»ï¼‰ï¼Œæ‰€ä»¥æŸç§ç¨‹åº¦ä¸Šæ¥è¯´ bean ä¹Ÿæ˜¯å®‰å…¨çš„ï¼Œä½†å¦‚æœ bean æœ‰çŠ¶æ€çš„è¯ï¼ˆæ¯”å¦‚ view model å¯¹è±¡ï¼‰ï¼Œé‚£å°±è¦å¼€å‘è€…è‡ªå·±å»ä¿è¯çº¿ç¨‹å®‰å…¨äº†ï¼Œæœ€ç®€å•çš„å°±æ˜¯æ”¹å˜ bean çš„ä½œç”¨åŸŸï¼ŒæŠŠâ€œsingletonâ€å˜æ›´ä¸ºâ€œprototypeâ€ï¼Œè¿™æ ·è¯·æ±‚ bean ç›¸å½“äº new Bean()äº†ï¼Œæ‰€ä»¥å°±å¯ä»¥ä¿è¯çº¿ç¨‹å®‰å…¨äº†ã€‚\n\n> æœ‰çŠ¶æ€å°±æ˜¯æœ‰æ•°æ®å­˜å‚¨åŠŸèƒ½\n> æ— çŠ¶æ€å°±æ˜¯ä¸ä¼šä¿å­˜æ•°æ®\n\n### Springå¦‚ä½•å¤„ç†çº¿ç¨‹å¹¶å‘é—®é¢˜ï¼Ÿ\n\n**Springä½¿ç”¨ThreadLocalå¯¹ä¸€äº›Beançš„çº¿ç¨‹å®‰å…¨é—®é¢˜è¿›è¡Œå¤„ç†**ã€‚\n\nThreadLocalå’Œçº¿ç¨‹åŒæ­¥æœºåˆ¶éƒ½æ˜¯ä¸ºäº†è§£å†³å¤šçº¿ç¨‹ä¸­ç›¸åŒå˜é‡çš„è®¿é—®å†²çªé—®é¢˜ã€‚åŒæ­¥æœºåˆ¶é‡‡ç”¨äº†â€œæ—¶é—´æ¢ç©ºé—´â€çš„æ–¹å¼ï¼Œä»…æä¾›ä¸€ä»½å˜é‡ï¼Œä¸åŒçš„çº¿ç¨‹åœ¨è®¿é—®å‰éœ€è¦è·å–é”ï¼Œæ²¡è·å¾—é”çš„çº¿ç¨‹åˆ™éœ€è¦æ’é˜Ÿã€‚è€ŒThreadLocalé‡‡ç”¨äº†â€œç©ºé—´æ¢æ—¶é—´â€çš„æ–¹å¼ã€‚\n\nThreadLocalä¼šä¸ºæ¯ä¸€ä¸ªçº¿ç¨‹æä¾›ä¸€ä¸ªç‹¬ç«‹çš„å˜é‡å‰¯æœ¬ï¼Œä»è€Œéš”ç¦»äº†å¤šä¸ªçº¿ç¨‹å¯¹æ•°æ®çš„è®¿é—®å†²çªã€‚å› ä¸ºæ¯ä¸€ä¸ªçº¿ç¨‹éƒ½æ‹¥æœ‰è‡ªå·±çš„å˜é‡å‰¯æœ¬ï¼Œä»è€Œä¹Ÿå°±æ²¡æœ‰å¿…è¦å¯¹è¯¥å˜é‡è¿›è¡ŒåŒæ­¥äº†ã€‚ThreadLocalæä¾›äº†çº¿ç¨‹å®‰å…¨çš„å…±äº«å¯¹è±¡ï¼Œåœ¨ç¼–å†™å¤šçº¿ç¨‹ä»£ç æ—¶ï¼Œå¯ä»¥æŠŠä¸å®‰å…¨çš„å˜é‡å°è£…è¿›ThreadLocalã€‚\n\n### è§£é‡ŠSpringæ¡†æ¶ä¸­beançš„ç”Ÿå‘½å‘¨æœŸ\n\nå‚è€ƒï¼šhttps://www.cnblogs.com/javazhiyin/p/10905294.html\n\n![Springä¸­Beançš„ç”Ÿå‘½å‘¨æœŸ](https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/TyporaNotes201911012343410.png)\n\n**1ã€å®ä¾‹åŒ–Beanï¼š**\n\nå¯¹äºBeanFactoryå®¹å™¨ï¼Œå½“å®¢æˆ·å‘å®¹å™¨è¯·æ±‚ä¸€ä¸ªå°šæœªåˆå§‹åŒ–çš„beanæ—¶ï¼Œæˆ–åˆå§‹åŒ–beançš„æ—¶å€™éœ€è¦æ³¨å…¥å¦ä¸€ä¸ªå°šæœªåˆå§‹åŒ–çš„ä¾èµ–æ—¶ï¼Œå®¹å™¨å°±ä¼šè°ƒç”¨createBeanè¿›è¡Œå®ä¾‹åŒ–ã€‚\nå¯¹äºApplicationContextå®¹å™¨ï¼Œå½“å®¹å™¨å¯åŠ¨ç»“æŸåï¼Œé€šè¿‡è·å–BeanDefinitionå¯¹è±¡ä¸­çš„ä¿¡æ¯ï¼Œå®ä¾‹åŒ–æ‰€æœ‰çš„beanã€‚\n\n**2ã€ä¾èµ–æ³¨å…¥ï¼š**\n\nå®ä¾‹åŒ–åçš„å¯¹è±¡è¢«å°è£…åœ¨BeanWrapperå¯¹è±¡ä¸­ï¼Œç´§æ¥ç€ï¼ŒSpringæ ¹æ®BeanDefinitionä¸­çš„ä¿¡æ¯ ä»¥åŠ é€šè¿‡BeanWrapperæä¾›çš„è®¾ç½®å±æ€§çš„æ¥å£å®Œæˆä¾èµ–æ³¨å…¥ã€‚\n\n**3ã€å¤„ç†Awareæ¥å£ï¼ˆé…ç½®Beanå¯¹è±¡çš„idå€¼ã€å·¥å‚/ä¸Šä¸‹æ–‡ï¼‰ï¼š**\n\næ¥ç€ï¼ŒSpringä¼šæ£€æµ‹è¯¥å¯¹è±¡æ˜¯å¦å®ç°äº†xxxAwareæ¥å£ï¼Œå¹¶å°†ç›¸å…³çš„xxxAwareå®ä¾‹æ³¨å…¥ç»™Beanï¼š\n\n- å¦‚æœè¿™ä¸ªBeanå·²ç»å®ç°äº†BeanNameAwareæ¥å£ï¼Œä¼šè°ƒç”¨å®ƒå®ç°çš„setBeanName(String beanId)æ–¹æ³•ï¼Œæ­¤å¤„ä¼ é€’çš„å°±æ˜¯Springé…ç½®æ–‡ä»¶ä¸­Beançš„idå€¼ï¼›\n- å¦‚æœè¿™ä¸ªBeanå·²ç»å®ç°äº†BeanFactoryAwareæ¥å£ï¼Œä¼šè°ƒç”¨å®ƒå®ç°çš„setBeanFactory()æ–¹æ³•ï¼Œä¼ é€’çš„æ˜¯Springå·¥å‚è‡ªèº«ï¼›\n- å¦‚æœè¿™ä¸ªBeanå·²ç»å®ç°äº†ApplicationContextAwareæ¥å£ï¼Œä¼šè°ƒsetApplicationContext(ApplicationContext)æ–¹æ³•ï¼Œä¼ å…¥Springä¸Šä¸‹æ–‡ï¼›\n\n**4ã€postProcessBeforeInitializationï¼ˆåˆå§‹åŒ–å‰ç½®å¤„ç†ï¼‰ï¼š**\n\nå¦‚æœæƒ³å¯¹Beanè¿›è¡Œä¸€äº›è‡ªå®šä¹‰çš„å¤„ç†ï¼Œé‚£ä¹ˆå¯ä»¥è®©Beanå®ç°äº†BeanPostProcessoræ¥å£ï¼Œé‚£å°†ä¼šè°ƒç”¨postProcessBeforeInitialization(Object obj, String s)æ–¹æ³•ã€‚ç”±äºè¿™ä¸ªæ–¹æ³•æ˜¯åœ¨Beanåˆå§‹åŒ–ç»“æŸæ—¶è°ƒç”¨çš„ï¼Œæ‰€ä»¥å¯ä»¥è¢«åº”ç”¨äºå†…å­˜æˆ–ç¼“å­˜æŠ€æœ¯ï¼›\n\n**5ã€è‡ªå®šä¹‰åˆå§‹åŒ–init-methodï¼š**\n\nå¦‚æœBeanåœ¨Springé…ç½®æ–‡ä»¶ä¸­é…ç½®äº† init-method å±æ€§ï¼Œåˆ™ä¼šè‡ªåŠ¨è°ƒç”¨å…¶é…ç½®çš„**è‡ªå®šä¹‰åˆå§‹åŒ–**æ–¹æ³•ã€‚\n\n**6ã€postProcessAfterInitializationï¼ˆåˆå§‹åŒ–åç½®å¤„ç†ï¼‰**\n\nå¦‚æœè¿™ä¸ªBeanå®ç°äº†BeanPostProcessoræ¥å£ï¼Œå°†ä¼šè°ƒç”¨postProcessAfterInitialization(Object obj, String s)æ–¹æ³•ï¼Œ**AOPåœ¨è¿™ä¸ªæ—¶å€™è¿›è¡Œä»£ç†å¯¹è±¡çš„åˆ›å»º**ã€‚\n\n**NOW** ä»¥ä¸Šå‡ ä¸ªæ­¥éª¤å®Œæˆåï¼ŒBeanå°±å·²ç»è¢«æ­£ç¡®åˆ›å»ºäº†ï¼Œä¹‹åå°±å¯ä»¥ä½¿ç”¨è¿™ä¸ªBeanäº†ã€‚\n\n**7ã€æ¸…ç†é˜¶æ®µdestroyï¼š**\n\nå½“Beanä¸å†éœ€è¦æ—¶ï¼Œä¼šè¿›å…¥æ¸…ç†é˜¶æ®µï¼Œå¦‚æœBeanå®ç°äº†DisposableBeanè¿™ä¸ªæ¥å£ï¼Œä¼šè°ƒç”¨å…¶å®ç°çš„destroy()æ–¹æ³•ï¼›\n\n**8ã€è‡ªå®šä¹‰é”€æ¯destroy-methodï¼š**\n\næœ€åï¼Œå¦‚æœè¿™ä¸ªBeançš„Springé…ç½®ä¸­é…ç½®äº†destroy-methodå±æ€§ï¼Œä¼šè‡ªåŠ¨è°ƒç”¨å…¶é…ç½®çš„**è‡ªå®šä¹‰é”€æ¯**æ–¹æ³•ã€‚\n\n### åœ¨ Springä¸­å¦‚ä½•æ³¨å…¥ä¸€ä¸ªJavaé›†åˆï¼Ÿ\n\nç”¨`<list>`æ³¨å…¥ä¸€åˆ—å€¼ï¼Œç”¨`<map>`æ³¨å…¥ä¸€ç»„æ˜ å°„æ•°æ®ã€‚\n\n### ä»€ä¹ˆæ˜¯beanè£…é…ï¼Ÿ\n\né€šè¿‡beançš„ä¾èµ–å…³ç³»ï¼Œä½¿ç”¨ä¾èµ–æ³¨å…¥å°†springä¸­çš„beanè£…é…åœ¨ä¸€èµ·ã€‚\nspringå¯ä»¥é€šè¿‡beançš„ä¾èµ–å…³ç³»è‡ªåŠ¨å®Œæˆbeanä¹‹é—´çš„é…ç½®ã€‚\n\n### Spring è‡ªåŠ¨è£…é… bean æœ‰å“ªäº›æ–¹å¼ï¼Ÿ\n\nåœ¨springä¸­ï¼Œå¯¹è±¡æ— éœ€è‡ªå·±æŸ¥æ‰¾æˆ–åˆ›å»ºä¸å…¶å…³è”çš„å…¶ä»–å¯¹è±¡ï¼Œç”±å®¹å™¨è´Ÿè´£æŠŠéœ€è¦ç›¸äº’åä½œçš„å¯¹è±¡å¼•ç”¨èµ‹äºˆå„ä¸ªå¯¹è±¡ã€‚\n\nåœ¨Springæ¡†æ¶xmlé…ç½®ä¸­å…±æœ‰5ç§è‡ªåŠ¨è£…é…ï¼š\n\n- noï¼šé»˜è®¤çš„æ–¹å¼æ˜¯ä¸è¿›è¡Œè‡ªåŠ¨è£…é…çš„ï¼Œé€šè¿‡æ‰‹å·¥è®¾ç½®refå±æ€§æ¥è¿›è¡Œè£…é…beanã€‚\n- byNameï¼šé€šè¿‡beançš„åç§°è¿›è¡Œè‡ªåŠ¨è£…é…ï¼Œå¦‚æœä¸€ä¸ªbeançš„ property ä¸å¦ä¸€bean çš„name ç›¸åŒï¼Œå°±è¿›è¡Œè‡ªåŠ¨è£…é…ã€‚\n- byTypeï¼šé€šè¿‡å‚æ•°çš„æ•°æ®ç±»å‹è¿›è¡Œè‡ªåŠ¨è£…é…ã€‚\n- constructorï¼šåˆ©ç”¨æ„é€ å‡½æ•°è¿›è¡Œè£…é…ï¼Œå¹¶ä¸”æ„é€ å‡½æ•°çš„å‚æ•°é€šè¿‡byTypeè¿›è¡Œè£…é…ã€‚\n- autodetectï¼šè‡ªåŠ¨æ¢æµ‹ï¼Œå¦‚æœæœ‰æ„é€ æ–¹æ³•ï¼Œé€šè¿‡ constructçš„æ–¹å¼è‡ªåŠ¨è£…é…ï¼Œå¦åˆ™ä½¿ç”¨ byTypeçš„æ–¹å¼è‡ªåŠ¨è£…é…ã€‚\n\n### ä½¿ç”¨@Autowiredæ³¨è§£è‡ªåŠ¨è£…é…çš„è¿‡ç¨‹æ˜¯æ€æ ·çš„ï¼Ÿ\n\nä½¿ç”¨@Autowiredæ³¨è§£æ¥è‡ªåŠ¨è£…é…æŒ‡å®šçš„beanã€‚åœ¨ä½¿ç”¨@Autowiredæ³¨è§£ä¹‹å‰éœ€è¦åœ¨Springé…ç½®æ–‡ä»¶è¿›è¡Œé…ç½®æ³¨è§£æ‰«æ `<context:annotation-config />`ã€‚\n\nåœ¨å¯åŠ¨spring IoCæ—¶ï¼Œå®¹å™¨è‡ªåŠ¨è£…è½½äº†ä¸€ä¸ªåç½®å¤„ç†å™¨ï¼Œå½“å®¹å™¨æ‰«æåˆ°@Autowiedã€@Resourceæˆ–@Injectæ—¶ï¼Œå°±ä¼šåœ¨IoCå®¹å™¨è‡ªåŠ¨æŸ¥æ‰¾éœ€è¦çš„beanï¼Œå¹¶è£…é…ç»™è¯¥å¯¹è±¡çš„å±æ€§ã€‚åœ¨ä½¿ç”¨@Autowiredæ—¶ï¼Œé¦–å…ˆåœ¨å®¹å™¨ä¸­**æŸ¥è¯¢å¯¹åº”ç±»å‹**çš„beanï¼š\n\n- å¦‚æœå¯¹åº”ç±»å‹æŸ¥è¯¢ç»“æœåˆšå¥½ä¸ºä¸€ä¸ªï¼Œå°±å°†è¯¥beanè£…é…ç»™@AutowiredæŒ‡å®šçš„æ•°æ®ï¼›\n- å¦‚æœå¯¹åº”ç±»å‹æŸ¥è¯¢çš„ç»“æœä¸æ­¢ä¸€ä¸ªï¼Œé‚£ä¹ˆ@Autowiredä¼šæ ¹æ®åç§°æ¥æŸ¥æ‰¾ï¼›\n- å¦‚æœä¸Šè¿°æŸ¥æ‰¾çš„ç»“æœä¸ºç©ºæˆ–è€…ä¸æ­¢ä¸€ä¸ªï¼Œé‚£ä¹ˆä¼šæŠ›å‡ºå¼‚å¸¸ã€‚\n\n## Springæ³¨è§£\n\n### ä»€ä¹ˆæ˜¯åŸºäºJavaçš„Springæ³¨è§£é…ç½®? ç»™ä¸€äº›æ³¨è§£çš„ä¾‹å­\n\nåŸºäºJavaçš„é…ç½®ï¼Œå…è®¸ä½ åœ¨å°‘é‡çš„Javaæ³¨è§£çš„å¸®åŠ©ä¸‹ï¼Œè¿›è¡Œä½ çš„å¤§éƒ¨åˆ†Springé…ç½®è€Œéé€šè¿‡XMLæ–‡ä»¶ã€‚\n\nä»¥@Configuration æ³¨è§£ä¸ºä¾‹ï¼Œå®ƒç”¨æ¥æ ‡è®°ç±»å¯ä»¥å½“åšä¸€ä¸ªbeançš„å®šä¹‰ï¼Œè¢«Spring IOCå®¹å™¨ä½¿ç”¨ã€‚\n\nå¦ä¸€ä¸ªä¾‹å­æ˜¯@Beanæ³¨è§£ï¼Œå®ƒè¡¨ç¤ºæ­¤æ–¹æ³•å°†è¦è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œä½œä¸ºä¸€ä¸ªbeanæ³¨å†Œè¿›Springåº”ç”¨ä¸Šä¸‹æ–‡ã€‚\n\n```java\n@Configuration\npublic class StudentConfig {\n    @Bean\n    public StudentBean myStudent() {\n        return new StudentBean();\n    }\n}\n```\n\n### æ€æ ·å¼€å¯æ³¨è§£è£…é…ï¼Ÿ\n\næ³¨è§£è£…é…åœ¨é»˜è®¤æƒ…å†µä¸‹æ˜¯ä¸å¼€å¯çš„ï¼Œä¸ºäº†ä½¿ç”¨æ³¨è§£è£…é…ï¼Œå¿…é¡»åœ¨Springé…ç½®æ–‡ä»¶ä¸­é…ç½® `<context:annotation-config/>`ã€‚\n\n### @Component, @Controller, @Repository, @Service æœ‰ä½•åŒºåˆ«ï¼Ÿ\n\n@Componentï¼šè¿™å°† Java ç±»æ ‡è®°ä¸º beanã€‚spring çš„ç»„ä»¶æ‰«ææœºåˆ¶å¯ä»¥å°†å…¶æ‰«æå¹¶å°†å…¶æ³¨å†Œåˆ°IoCå®¹å™¨ä¸­ã€‚\n\n@Controllerï¼šè¿™å°†ä¸€ä¸ªç±»æ ‡è®°ä¸º Spring Web MVC æ§åˆ¶å™¨ã€‚æ ‡æœ‰å®ƒçš„ Bean ä¼šè‡ªåŠ¨å¯¼å…¥åˆ° IoC å®¹å™¨ä¸­ã€‚\n\n@Serviceï¼šæ­¤æ³¨è§£æ˜¯ç»„ä»¶æ³¨è§£çš„ç‰¹åŒ–ã€‚å®ƒä¸ä¼šå¯¹ @Component æ³¨è§£æä¾›ä»»ä½•å…¶ä»–è¡Œä¸ºã€‚æ‚¨å¯ä»¥åœ¨æœåŠ¡å±‚ç±»ä¸­ä½¿ç”¨ @Service è€Œä¸æ˜¯ @Componentï¼Œå› ä¸ºå®ƒä»¥æ›´å¥½çš„æ–¹å¼æŒ‡å®šäº†æ„å›¾ã€‚\n\n@Repositoryï¼šè¿™ä¸ªæ³¨è§£æ˜¯å…·æœ‰ç±»ä¼¼ç”¨é€”å’ŒåŠŸèƒ½çš„ @Component æ³¨è§£çš„ç‰¹åŒ–ã€‚å®ƒä¸º DAO æä¾›äº†é¢å¤–çš„å¥½å¤„ã€‚å®ƒå°† DAO å¯¼å…¥ IoC å®¹å™¨ï¼Œå¹¶ä½¿æœªç»æ£€æŸ¥çš„å¼‚å¸¸æœ‰èµ„æ ¼è½¬æ¢ä¸º Spring DataAccessExceptionã€‚\n\n### @Required æ³¨è§£æœ‰ä»€ä¹ˆä½œç”¨\n\n`@Required`æ³¨è§£ä½œç”¨äºBean`setter`æ–¹æ³•ä¸Šï¼Œç”¨äºæ£€æŸ¥ä¸€ä¸ªBeançš„å±æ€§çš„å€¼**åœ¨é…ç½®æœŸé—´æ˜¯å¦è¢«èµ‹äºˆæˆ–è®¾ç½®**ï¼Œå¦‚æœæœªè¢«è®¾ç½®ï¼Œå®¹å™¨å°†æŠ›å‡ºBeanInitializationExceptionã€‚ç¤ºä¾‹ï¼š\n\n```java\npublic class Employee {\n    private String name;\n    @Required\n    public void setName(String name){\n        this.name=name;\n    }\n    public string getName(){\n        return name;\n    }\n}\n```\n\n### @Autowiredå’Œ@Resourceä¹‹é—´çš„åŒºåˆ«\n\n@Autowiredå¯ç”¨äºï¼šæ„é€ å‡½æ•°ã€æˆå‘˜å˜é‡ã€Setteræ–¹æ³•\n\n@Autowiredå’Œ@Resourceä¹‹é—´çš„åŒºåˆ«\n\n- @Autowiredé»˜è®¤æ˜¯**æŒ‰ç…§ç±»å‹è£…é…æ³¨å…¥**çš„ï¼Œé»˜è®¤æƒ…å†µä¸‹å®ƒè¦æ±‚ä¾èµ–å¯¹è±¡å¿…é¡»å­˜åœ¨ï¼ˆå¯ä»¥è®¾ç½®å®ƒrequiredå±æ€§ä¸ºfalseï¼‰ã€‚\n- @Resourceé»˜è®¤æ˜¯**æŒ‰ç…§åç§°æ¥è£…é…æ³¨å…¥**çš„ï¼Œåªæœ‰å½“æ‰¾ä¸åˆ°ä¸åç§°åŒ¹é…çš„beanæ‰ä¼šæŒ‰ç…§ç±»å‹æ¥è£…é…æ³¨å…¥ã€‚\n\n### @Qualifier æ³¨è§£æœ‰ä»€ä¹ˆä½œç”¨\n\nå½“æ‚¨åˆ›å»ºå¤šä¸ªç›¸åŒç±»å‹çš„ bean å¹¶å¸Œæœ›ä»…ä½¿ç”¨å±æ€§è£…é…å…¶ä¸­ä¸€ä¸ª bean æ—¶ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨@Qualifier æ³¨è§£å’Œ @Autowired é€šè¿‡æŒ‡å®šåº”è¯¥è£…é…å“ªä¸ªç¡®åˆ‡çš„ bean æ¥æ¶ˆé™¤æ­§ä¹‰ã€‚\n\n### @RequestMapping æ³¨è§£æœ‰ä»€ä¹ˆç”¨ï¼Ÿ\n\n@RequestMapping æ³¨è§£ç”¨äºå°†ç‰¹å®š HTTP è¯·æ±‚æ–¹æ³•æ˜ å°„åˆ°å°†å¤„ç†ç›¸åº”è¯·æ±‚çš„æ§åˆ¶å™¨ä¸­çš„ç‰¹å®šç±»/æ–¹æ³•ã€‚æ­¤æ³¨é‡Šå¯åº”ç”¨äºä¸¤ä¸ªçº§åˆ«ï¼š\n\n- ç±»çº§åˆ«ï¼šæ˜ å°„è¯·æ±‚çš„ URL\n- æ–¹æ³•çº§åˆ«ï¼šæ˜ å°„ URL ä»¥åŠ HTTP è¯·æ±‚æ–¹æ³•\n\n## Springäº‹åŠ¡\n\n### Springæ”¯æŒçš„äº‹åŠ¡ç®¡ç†ç±»å‹/äº‹åŠ¡å®ç°æ–¹å¼æœ‰å“ªäº›ï¼Ÿ\n\nSpringæ”¯æŒä¸¤ç§ç±»å‹çš„äº‹åŠ¡ç®¡ç†ï¼š\n\n**ç¼–ç¨‹å¼äº‹åŠ¡ç®¡ç†**ï¼šè¿™æ„å‘³ä½ é€šè¿‡ç¼–ç¨‹çš„æ–¹å¼ç®¡ç†äº‹åŠ¡ï¼Œç»™ä½ å¸¦æ¥æå¤§çš„çµæ´»æ€§ï¼Œä½†æ˜¯éš¾ç»´æŠ¤ã€‚\n\n**å£°æ˜å¼äº‹åŠ¡ç®¡ç†**ï¼šè¿™æ„å‘³ç€ä½ å¯ä»¥å°†ä¸šåŠ¡ä»£ç å’Œäº‹åŠ¡ç®¡ç†åˆ†ç¦»ï¼Œä½ åªéœ€ç”¨æ³¨è§£å’ŒXMLé…ç½®æ¥ç®¡ç†äº‹åŠ¡ã€‚\n\n### Springäº‹åŠ¡çš„å®ç°æ–¹å¼å’Œå®ç°åŸç†\n\nSpringäº‹åŠ¡çš„æœ¬è´¨å…¶å®å°±æ˜¯æ•°æ®åº“å¯¹äº‹åŠ¡çš„æ”¯æŒï¼Œæ²¡æœ‰æ•°æ®åº“çš„äº‹åŠ¡æ”¯æŒï¼ŒSpringæ˜¯æ— æ³•æä¾›äº‹åŠ¡åŠŸèƒ½çš„ã€‚\n\n```xml\n<!-- 2ã€é…ç½®äº‹åŠ¡çš„é€šçŸ¥ä»¥åŠäº‹åŠ¡çš„å±æ€§-->\n<tx:advice id=\"txAdvice\" transaction-manager=\"transactionManager\">\n<!-- é…ç½®äº‹åŠ¡çš„å±æ€§\nisolationï¼šç”¨äºæŒ‡å®šäº‹åŠ¡çš„éš”ç¦»çº§åˆ«ã€‚é»˜è®¤å€¼æ˜¯DEFAULTï¼Œè¡¨ç¤ºä½¿ç”¨æ•°æ®åº“çš„é»˜è®¤éš”\nç¦»çº§åˆ«ã€‚\npropagationï¼šç”¨äºæŒ‡å®šäº‹åŠ¡çš„ä¼ æ’­è¡Œä¸ºã€‚é»˜è®¤å€¼æ˜¯REQUIRED(å¢åˆ æ”¹)ï¼Œè¡¨ç¤ºä¸€å®šä¼š\næœ‰äº‹åŠ¡ã€‚æŸ¥è¯¢æ–¹æ³•å¯ä»¥é€‰æ‹©SUPPORTSã€‚\nread-onlyï¼šç”¨äºæŒ‡å®šäº‹åŠ¡æ˜¯å¦åªè¯»ã€‚åªæœ‰æŸ¥è¯¢æ–¹æ³•æ‰èƒ½è®¾ç½®ä¸ºtrueã€‚é»˜è®¤å€¼æ˜¯\nfalseï¼Œè¡¨ç¤ºè¯»å†™ã€‚\ntimeoutï¼šç”¨äºæŒ‡å®šäº‹åŠ¡çš„è¶…æ—¶æ—¶é—´ï¼Œé»˜è®¤å€¼æ˜¯-1ï¼Œè¡¨ç¤ºæ°¸ä¸è¶…æ—¶ã€‚å¦‚æœæŒ‡å®šäº†æ•°å€¼ï¼Œ\nä»¥ç§’ä¸ºå•ä½ã€‚\nrollback-forï¼šç”¨äºæŒ‡å®šä¸€ä¸ªå¼‚å¸¸ï¼Œå½“äº§ç”Ÿè¯¥å¼‚å¸¸æ—¶ï¼Œäº‹åŠ¡å›æ»šï¼Œäº§ç”Ÿå…¶ä»–å¼‚å¸¸æ—¶ï¼Œ\näº‹åŠ¡ä¸å›æ»šã€‚æ²¡æœ‰é»˜è®¤å€¼ã€‚è¡¨ç¤ºä»»ä½•å¼‚å¸¸éƒ½å›æ»šã€‚\nno-rollback-forï¼šç”¨äºæŒ‡å®šä¸€ä¸ªå¼‚å¸¸ï¼Œå½“äº§ç”Ÿè¯¥å¼‚å¸¸æ—¶ï¼Œäº‹åŠ¡ä¸å›æ»šï¼Œäº§ç”Ÿå…¶ä»–å¼‚å¸¸\næ—¶äº‹åŠ¡å›æ»šã€‚æ²¡æœ‰é»˜è®¤å€¼ã€‚è¡¨ç¤ºä»»ä½•å¼‚å¸¸éƒ½å›æ»šã€‚\n-->\n<tx:attributes>\n    <!--éæŸ¥è¯¢æ–¹æ³•-->\n    <tx:method name=\"*\" propagation=\"REQUIRED\" read-only=\"false\"/>\n    <!--æŸ¥è¯¢æ–¹æ³•-->\n    <tx:method name=\"find*\" propagation=\"SUPPORTS\" read-only=\"true\"/>\n    </tx:attributes>\n</tx:advice>\n```\n\n### è¯´ä¸€ä¸‹Springçš„äº‹åŠ¡ä¼ æ’­è¡Œä¸º\n\nspringäº‹åŠ¡çš„ä¼ æ’­è¡Œä¸ºè¯´çš„æ˜¯ï¼Œå½“å¤šä¸ªäº‹åŠ¡åŒæ—¶å­˜åœ¨çš„æ—¶å€™ï¼Œspringå¦‚ä½•å¤„ç†è¿™äº›äº‹åŠ¡çš„è¡Œä¸ºã€‚\n\n> â‘  **PROPAGATION_REQUIRED**ï¼šå¦‚æœå½“å‰æ²¡æœ‰äº‹åŠ¡ï¼Œå°±åˆ›å»ºä¸€ä¸ªæ–°äº‹åŠ¡ï¼Œå¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œå°±åŠ å…¥è¯¥äº‹åŠ¡ï¼Œè¯¥è®¾ç½®æ˜¯æœ€å¸¸ç”¨çš„è®¾ç½®ã€‚ï¼ˆé»˜è®¤å€¼ï¼Œé€‚ç”¨äºéæŸ¥è¯¢æ–¹æ³•ï¼Œå¢åˆ æ”¹ï¼‰ï¼ˆäº‹åŠ¡å­˜åœ¨å°±ç”¨ä¸å­˜åœ¨è¦åˆ›å»ºï¼‰\n> â‘¡ **PROPAGATION_SUPPORTS**ï¼šæ”¯æŒå½“å‰äº‹åŠ¡ï¼Œå¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œå°±åŠ å…¥è¯¥äº‹åŠ¡ï¼Œå¦‚æœå½“å‰ä¸å­˜åœ¨äº‹åŠ¡ï¼Œå°±ä»¥éäº‹åŠ¡æ‰§è¡Œã€‚ï¼ˆé€‚ç”¨äºæŸ¥è¯¢æ–¹æ³•ï¼‰ï¼ˆäº‹åŠ¡å­˜åœ¨å°±ç”¨ä¸å­˜åœ¨å°±ä¸ç”¨ï¼‰\n> â‘¢ PROPAGATION_MANDATORYï¼šæ”¯æŒå½“å‰äº‹åŠ¡ï¼Œå¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œå°±åŠ å…¥è¯¥äº‹åŠ¡ï¼Œå¦‚æœå½“å‰ä¸å­˜åœ¨äº‹åŠ¡ï¼Œå°±æŠ›å‡ºå¼‚å¸¸ã€‚\n> â‘£ **PROPAGATION_REQUIRES_NEW**ï¼šåˆ›å»ºæ–°äº‹åŠ¡ï¼Œæ— è®ºå½“å‰å­˜ä¸å­˜åœ¨äº‹åŠ¡ï¼Œéƒ½åˆ›å»ºæ–°äº‹åŠ¡ã€‚ï¼ˆæ°¸è¿œéƒ½è¦æ–°äº‹åŠ¡ï¼‰\n> â‘¤ PROPAGATION_NOT_SUPPORTEDï¼šä»¥éäº‹åŠ¡æ–¹å¼æ‰§è¡Œæ“ä½œï¼Œå¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œå°±æŠŠå½“å‰äº‹åŠ¡æŒ‚èµ·ã€‚\n> â‘¥ PROPAGATION_NEVERï¼šä»¥éäº‹åŠ¡æ–¹å¼æ‰§è¡Œï¼Œå¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œåˆ™æŠ›å‡ºå¼‚å¸¸ã€‚\n> â‘¦ PROPAGATION_NESTEDï¼šå¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œåˆ™åœ¨åµŒå¥—äº‹åŠ¡å†…æ‰§è¡Œã€‚å¦‚æœå½“å‰æ²¡æœ‰äº‹åŠ¡ï¼Œåˆ™æŒ‰REQUIREDå±æ€§æ‰§è¡Œã€‚\n\n### è¯´ä¸€ä¸‹ spring çš„äº‹åŠ¡éš”ç¦»ï¼Ÿ\n\nspring æœ‰äº”å¤§éš”ç¦»çº§åˆ«ï¼Œé»˜è®¤å€¼ä¸º ISOLATION_DEFAULTï¼ˆä½¿ç”¨æ•°æ®åº“çš„è®¾ç½®ï¼‰ï¼Œå…¶ä»–å››ä¸ªéš”ç¦»çº§åˆ«å’Œæ•°æ®åº“çš„éš”ç¦»çº§åˆ«ä¸€è‡´ï¼š\n\n1. ISOLATION_DEFAULTï¼šç”¨åº•å±‚æ•°æ®åº“çš„è®¾ç½®éš”ç¦»çº§åˆ«ï¼Œæ•°æ®åº“è®¾ç½®çš„æ˜¯ä»€ä¹ˆæˆ‘å°±ç”¨ä»€ä¹ˆï¼›\n2. ISOLATION_READ_UNCOMMITTEDï¼šè¯»æœªæäº¤ï¼Œæœ€ä½éš”ç¦»çº§åˆ«ã€äº‹åŠ¡æœªæäº¤å‰ï¼Œå°±å¯è¢«å…¶ä»–äº‹åŠ¡è¯»å–ï¼ˆä¼šå‡ºç°è„è¯»ã€ä¸å¯é‡å¤è¯»ã€å¹»è¯»ï¼‰ï¼›\n3. ISOLATION_READ_COMMITTEDï¼šè¯»å·²æäº¤ï¼Œä¸€ä¸ªäº‹åŠ¡æäº¤åæ‰èƒ½è¢«å…¶ä»–äº‹åŠ¡è¯»å–åˆ°ï¼ˆä¼šé€ æˆä¸å¯é‡å¤è¯»ã€å¹»è¯»ï¼‰ï¼ŒSQL server çš„é»˜è®¤çº§åˆ«ï¼›\n4. ISOLATION_REPEATABLE_READï¼šå¯é‡å¤è¯»ï¼Œä¿è¯å¤šæ¬¡è¯»å–åŒä¸€ä¸ªæ•°æ®æ—¶ï¼Œå…¶å€¼éƒ½å’Œäº‹åŠ¡å¼€å§‹æ—¶å€™çš„å†…å®¹æ˜¯ä¸€è‡´ï¼Œç¦æ­¢è¯»å–åˆ°åˆ«çš„äº‹åŠ¡æœªæäº¤çš„æ•°æ®ï¼ˆä¼šé€ æˆå¹»è¯»ï¼‰ï¼ŒMySQL çš„é»˜è®¤çº§åˆ«ï¼›\n5. ISOLATION_SERIALIZABLEï¼šåºåˆ—åŒ–ï¼Œä»£ä»·æœ€é«˜æœ€å¯é çš„éš”ç¦»çº§åˆ«ï¼Œè¯¥éš”ç¦»çº§åˆ«èƒ½é˜²æ­¢è„è¯»ã€ä¸å¯é‡å¤è¯»ã€å¹»è¯»ã€‚\n\n## Springé¢å‘åˆ‡é¢ç¼–ç¨‹(AOP)\n\n### ä»€ä¹ˆæ˜¯AOP\n\nOOP(Object-Oriented Programming)é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼Œå…è®¸å¼€å‘è€…å®šä¹‰çºµå‘çš„å…³ç³»ï¼Œä½†å¹¶é€‚ç”¨äºå®šä¹‰æ¨ªå‘çš„å…³ç³»ï¼Œå¯¼è‡´äº†å¤§é‡ä»£ç çš„é‡å¤ï¼Œè€Œä¸åˆ©äºå„ä¸ªæ¨¡å—çš„é‡ç”¨ã€‚\n\nAOP(Aspect-Oriented Programming)ï¼Œä¸€èˆ¬ç§°ä¸ºé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼Œä½œä¸ºé¢å‘å¯¹è±¡çš„ä¸€ç§è¡¥å……ï¼Œå°†ä¸€äº›**å…¬å…±è¡Œä¸ºå’Œé€»è¾‘ï¼ŒæŠ½å–å¹¶å°è£…ä¸ºä¸€ä¸ªå¯é‡ç”¨çš„æ¨¡å—ï¼Œå‡å°‘ç³»ç»Ÿä¸­çš„é‡å¤ä»£ç ï¼Œé™ä½äº†æ¨¡å—é—´çš„è€¦åˆåº¦ï¼ŒåŒæ—¶æé«˜äº†ç³»ç»Ÿçš„å¯ç»´æŠ¤æ€§ã€‚å¯ç”¨äºæƒé™è®¤è¯ã€æ—¥å¿—ã€äº‹åŠ¡å¤„ç†ç­‰**ã€‚\n\n### Spring AOP and AspectJ AOP æœ‰ä»€ä¹ˆåŒºåˆ«ï¼ŸAOP æœ‰å“ªäº›å®ç°æ–¹å¼ï¼Ÿ\n\nAOPå®ç°çš„å…³é”®åœ¨äº ä»£ç†æ¨¡å¼ï¼ŒAOPä»£ç†ä¸»è¦åˆ†ä¸ºé™æ€ä»£ç†ï¼ˆAspectJï¼‰å’ŒåŠ¨æ€ä»£ç†ï¼ˆSpring AOPï¼‰ã€‚\n\nï¼ˆ1ï¼‰AspectJ é‡‡ç”¨é™æ€ä»£ç†æ¨¡å¼ï¼Œå±äº**ç¼–è¯‘æ—¶å¢å¼º**ï¼Œä¼šåœ¨ç¼–è¯‘é˜¶æ®µç»‡å…¥åˆ‡é¢ç”Ÿæˆç›¸åº”çš„ä»£ç†å¯¹è±¡\n\nï¼ˆ2ï¼‰Spring AOP é‡‡ç”¨åŠ¨æ€ä»£ç†æ¨¡å¼ï¼Œå±äº**è¿è¡Œæ—¶å¢å¼º**ï¼Œæ¯æ¬¡è¿è¡Œæ—¶ç»‡å…¥åˆ‡é¢åœ¨å†…å­˜ä¸­ä¸´æ—¶ç”Ÿæˆç›¸åº”çš„ä»£ç†å¯¹è±¡\n\n### JDKåŠ¨æ€ä»£ç†å’ŒCGLIBåŠ¨æ€ä»£ç†çš„åŒºåˆ«\n\nJDK åŠ¨æ€ä»£ç†ä¸»è¦æ˜¯é’ˆå¯¹ç±»å®ç°äº†æŸä¸ªæ¥å£ï¼ŒAOP åˆ™ä¼šä½¿ç”¨ JDK åŠ¨æ€ä»£ç†ã€‚åŸºäºåå°„çš„æœºåˆ¶å®ç°ï¼Œç”Ÿæˆä¸€ä¸ªå®ç°è¯¥æ¥å£çš„ä¸€ä¸ªä»£ç†ç±»ï¼Œç„¶åé€šè¿‡é‡å†™æ–¹æ³•çš„æ–¹å¼ï¼Œå®ç°å¯¹ä»£ç çš„å¢å¼ºã€‚\n\nè€Œå¦‚æœæŸä¸ªç±»æ²¡æœ‰å®ç°æ¥å£ï¼ŒAOP åˆ™ä¼šä½¿ç”¨ CGLIB ä»£ç†ã€‚åº•å±‚åŸç†æ˜¯**åŸºäº asm ç¬¬ä¸‰æ–¹æ¡†æ¶**ï¼Œé€šè¿‡ä¿®æ”¹å­—èŠ‚ç ç”Ÿæˆä¸€ä¸ªå­ç±»ï¼Œç„¶åé‡å†™çˆ¶ç±»çš„æ–¹æ³•ï¼Œå®ç°å¯¹ä»£ç çš„å¢å¼ºã€‚\n\n> ä½œè€…ï¼šé˜¿é‡Œäº‘äº‘æ –å·\n>\n> é“¾æ¥ï¼šhttps://zhuanlan.zhihu.com/p/368769721\n>\n> æ¥æºï¼šçŸ¥ä¹\n>\n> è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚\n\n### è§£é‡Šä¸€ä¸‹Spring AOPé‡Œé¢çš„å‡ ä¸ªåè¯\n\nï¼ˆ1ï¼‰åˆ‡é¢ï¼ˆAspectï¼‰ï¼šåˆ‡é¢æ˜¯é€šçŸ¥å’Œåˆ‡ç‚¹çš„ç»“åˆã€‚ åœ¨Spring AOPä¸­ï¼Œåˆ‡é¢å¯ä»¥ä½¿ç”¨é€šç”¨ç±»ï¼ˆåŸºäºæ¨¡å¼çš„é£æ ¼ï¼‰ æˆ–è€…åœ¨æ™®é€šç±»ä¸­ä»¥ @AspectJ æ³¨è§£æ¥å®ç°ã€‚\n\nï¼ˆ2ï¼‰è¿æ¥ç‚¹ï¼ˆJoin pointï¼‰ï¼šæ–¹æ³•\n\nï¼ˆ3ï¼‰é€šçŸ¥ï¼ˆAdviceï¼‰ï¼šåœ¨è¦å¢å¼ºä¸Šçš„è¿æ¥ç‚¹ä¸Šè¦è¿›è¡Œæ€æ ·çš„å¢å¼º\n\nï¼ˆ4ï¼‰åˆ‡å…¥ç‚¹ï¼ˆPointcutï¼‰ï¼šå“ªäº›è¿æ¥ç‚¹éœ€è¦å¢å¼º\n\nï¼ˆ5ï¼‰ç›®æ ‡å¯¹è±¡ï¼ˆTarget Objectï¼‰ï¼š è¢«ä»£ç†ï¼ˆproxiedï¼‰ å¯¹è±¡ã€‚\n\nï¼ˆ6ï¼‰ç»‡å…¥ï¼ˆWeavingï¼‰ï¼šç»‡å…¥æ˜¯æŠŠåˆ‡é¢åº”ç”¨åˆ°ç›®æ ‡å¯¹è±¡å¹¶åˆ›å»ºæ–°çš„ä»£ç†å¯¹è±¡çš„è¿‡ç¨‹ã€‚\n\nï¼ˆ7ï¼‰Proxyï¼ˆä»£ç†ï¼‰ï¼šä¸€ä¸ªç±»è¢«AOPç»‡å…¥å¢å¼ºåï¼Œå°±äº§ç”Ÿä¸€ä¸ªç»“æœä»£ç†ç±»ã€‚\n\n> - ç¼–è¯‘æœŸï¼šåˆ‡é¢åœ¨ç›®æ ‡ç±»ç¼–è¯‘æ—¶è¢«ç»‡å…¥ã€‚AspectJçš„ç»‡å…¥ç¼–è¯‘å™¨æ˜¯ä»¥è¿™ç§æ–¹å¼ç»‡å…¥åˆ‡é¢çš„ã€‚\n> - ç±»åŠ è½½æœŸï¼šåˆ‡é¢åœ¨ç›®æ ‡ç±»åŠ è½½åˆ°JVMæ—¶è¢«ç»‡å…¥ã€‚éœ€è¦ç‰¹æ®Šçš„ç±»åŠ è½½å™¨ï¼Œå®ƒå¯ä»¥åœ¨ç›®æ ‡ç±»è¢«å¼•å…¥åº”ç”¨ä¹‹å‰å¢å¼ºè¯¥ç›®æ ‡ç±»çš„å­—èŠ‚ç ã€‚AspectJ5çš„åŠ è½½æ—¶ç»‡å…¥å°±æ”¯æŒä»¥è¿™ç§æ–¹å¼ç»‡å…¥åˆ‡é¢ã€‚\n> - è¿è¡ŒæœŸï¼šåˆ‡é¢åœ¨åº”ç”¨è¿è¡Œçš„æŸä¸ªæ—¶åˆ»è¢«ç»‡å…¥ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œåœ¨ç»‡å…¥åˆ‡é¢æ—¶ï¼ŒAOPå®¹å™¨ä¼šä¸ºç›®æ ‡å¯¹è±¡åŠ¨æ€åœ°åˆ›å»ºä¸€ä¸ªä»£ç†å¯¹è±¡ã€‚SpringAOPå°±æ˜¯ä»¥è¿™ç§æ–¹å¼ç»‡å…¥åˆ‡é¢ã€‚\n\n### Springé€šçŸ¥æœ‰å“ªäº›ç±»å‹ï¼Ÿ\n\nåœ¨AOPæœ¯è¯­ä¸­ï¼Œåˆ‡é¢çš„å·¥ä½œè¢«ç§°ä¸ºé€šçŸ¥ï¼Œå®é™…ä¸Šæ˜¯ç¨‹åºæ‰§è¡Œæ—¶è¦é€šè¿‡SpringAOPæ¡†æ¶è§¦å‘çš„ä»£ç æ®µã€‚\n\nSpringåˆ‡é¢å¯ä»¥åº”ç”¨5ç§ç±»å‹çš„é€šçŸ¥ï¼š\n\n1. å‰ç½®é€šçŸ¥ï¼ˆBeforeï¼‰ï¼šåœ¨ç›®æ ‡æ–¹æ³•è¢«è°ƒç”¨ä¹‹å‰è°ƒç”¨é€šçŸ¥åŠŸèƒ½ï¼›\n2. åç½®é€šçŸ¥ï¼ˆAfterï¼‰ï¼šåœ¨ç›®æ ‡æ–¹æ³•å®Œæˆä¹‹åè°ƒç”¨é€šçŸ¥ï¼Œæ­¤æ—¶ä¸ä¼šå…³å¿ƒæ–¹æ³•çš„è¾“å‡ºæ˜¯ä»€ä¹ˆï¼›\n3. è¿”å›é€šçŸ¥ï¼ˆAfter-returning ï¼‰ï¼šåœ¨ç›®æ ‡æ–¹æ³•æˆåŠŸæ‰§è¡Œä¹‹åè°ƒç”¨é€šçŸ¥ï¼›\n4. å¼‚å¸¸é€šçŸ¥ï¼ˆAfter-throwingï¼‰ï¼šåœ¨ç›®æ ‡æ–¹æ³•æŠ›å‡ºå¼‚å¸¸åè°ƒç”¨é€šçŸ¥ï¼›\n5. ç¯ç»•é€šçŸ¥ï¼ˆAroundï¼‰ï¼šé€šçŸ¥åŒ…è£¹äº†è¢«é€šçŸ¥çš„æ–¹æ³•ï¼Œåœ¨è¢«é€šçŸ¥çš„æ–¹æ³•è°ƒç”¨ä¹‹å‰å’Œè°ƒç”¨ä¹‹åæ‰§è¡Œè‡ªå®šä¹‰çš„è¡Œä¸ºã€‚\n\n> åŒä¸€ä¸ªaspectï¼Œä¸åŒadviceçš„æ‰§è¡Œé¡ºåºï¼š\n>\n> â‘ æ²¡æœ‰å¼‚å¸¸æƒ…å†µä¸‹çš„æ‰§è¡Œé¡ºåºï¼š\n>\n> around before advice\tæ–¹æ³•è°ƒç”¨ä¹‹å‰è‡ªå®šä¹‰è¡Œä¸º\n> before advice\n> target method æ‰§è¡Œ\n> around after advice\tæ–¹æ³•è°ƒç”¨åè‡ªå®šä¹‰è¡Œä¸º\n> after advice\n> afterReturning\n>\n> â‘¡æœ‰å¼‚å¸¸æƒ…å†µä¸‹çš„æ‰§è¡Œé¡ºåºï¼š\n>\n> around before advice\n> before advice\n> target method æ‰§è¡Œ\n> around after advice\n> after advice\n> afterThrowing:å¼‚å¸¸å‘ç”Ÿ\n> Java.lang.RuntimeException: å¼‚å¸¸å‘ç”Ÿ\n\n### ä»€ä¹ˆæ˜¯åˆ‡é¢ Aspectï¼Ÿ\n\naspect ç”± pointcount å’Œ advice ç»„æˆï¼Œåˆ‡é¢æ˜¯é€šçŸ¥å’Œåˆ‡ç‚¹çš„ç»“åˆã€‚ \nAOP çš„å·¥ä½œé‡å¿ƒåœ¨äºå¦‚ä½•å°†å¢å¼ºç¼–ç»‡ç›®æ ‡å¯¹è±¡çš„è¿æ¥ç‚¹ä¸Š, è¿™é‡ŒåŒ…å«ä¸¤ä¸ªå·¥ä½œ:  \n\n- å¦‚ä½•é€šè¿‡ pointcut å’Œ advice å®šä½åˆ°ç‰¹å®šçš„ joinpoint ä¸Š\n- å¦‚ä½•åœ¨ advice ä¸­ç¼–å†™åˆ‡é¢ä»£ç \n\nå¯ä»¥ç®€å•åœ°è®¤ä¸º, ä½¿ç”¨ @Aspect æ³¨è§£çš„ç±»å°±æ˜¯åˆ‡é¢\n\n![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/TyporaNotes2020021212264438.png)\n","source":"_posts/Javaå…«è‚¡æ–‡ - Spring.md","raw":"---\ntitle: Javaå…«è‚¡æ–‡ - Spring\ncopyright: true\nmathjax: false\ncategories:\n  - Javaå…«è‚¡æ–‡\ndate: 2023-01-23 16:14:06\ntags:\ntoc: true\nurlname: java-spring\n---\n\n> æ•´ç†çš„Springæ¡†æ¶ç›¸å…³çŸ¥è¯†ç‚¹å’Œé¢è¯•é¢˜ï¼Œéƒ¨åˆ†å†…å®¹æ‘˜è‡ªç½‘ç»œï¼Œå¦‚æœ‰ä¾µæƒè¯·è”ç³»æˆ‘ï½\t<!--more-->\n\n## Springæ¦‚è¿°\n\n### ä»€ä¹ˆæ˜¯spring?\n\nSpringæ˜¯**ä¸€ä¸ªè½»é‡çº§Javaå¼€å‘æ¡†æ¶**ï¼Œç›®çš„æ˜¯ä¸ºäº†è§£å†³å¼€å‘ä¸­çš„**ä¸šåŠ¡é€»è¾‘å±‚å’Œå…¶ä»–å„å±‚çš„è€¦åˆé—®é¢˜**ï¼Œç®€åŒ–Javaå¼€å‘ã€‚\n\n### Springæ¡†æ¶çš„æ ¸å¿ƒæ˜¯ä»€ä¹ˆ\n\n**Springæ¡†æ¶çš„æ ¸å¿ƒ**ï¼šIoCå®¹å™¨å’ŒAOPæ¨¡å—ã€‚\né€šè¿‡IoCå®¹å™¨ç®¡ç†Java Beanå¯¹è±¡åŠå…¶ç”Ÿå‘½å‘¨æœŸä»¥åŠä»–ä»¬ä¹‹é—´çš„è€¦åˆå…³ç³»ï¼›\né€šè¿‡AOPå°†ä¸€äº›å…¬å…±è¡Œä¸ºå’Œé€»è¾‘ï¼ŒæŠ½å–å¹¶å°è£…ä¸ºä¸€ä¸ªå¯é‡ç”¨çš„æ¨¡å—ï¼Œå‡å°‘ç³»ç»Ÿä¸­çš„é‡å¤ä»£ç ï¼Œé™ä½æ¨¡å—é—´çš„è€¦åˆåº¦\n\n### Springçš„ä¼˜ç¼ºç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ\n\nä¼˜ç‚¹\n\n- æ–¹ä¾¿è§£è€¦ï¼Œç®€åŒ–å¼€å‘ï¼ˆ**IoC**ï¼‰\n\n\tSpringå°±æ˜¯ä¸€ä¸ªå¤§å·¥å‚ï¼Œå¯ä»¥å°†æ‰€æœ‰å¯¹è±¡çš„åˆ›å»ºå’Œä¾èµ–å…³ç³»çš„ç»´æŠ¤ï¼Œäº¤ç»™Springç®¡ç†ã€‚\n\n- AOPç¼–ç¨‹çš„æ”¯æŒï¼ˆ**AOP**ï¼‰\n\n\tSpringæä¾›é¢å‘åˆ‡é¢ç¼–ç¨‹ï¼Œå¯ä»¥æ–¹ä¾¿çš„å®ç°å¯¹ç¨‹åºè¿›è¡Œæƒé™æ‹¦æˆªã€è¿è¡Œç›‘æ§ç­‰åŠŸèƒ½ã€‚\n\n- å£°æ˜å¼äº‹åŠ¡çš„æ”¯æŒï¼ˆ**äº‹åŠ¡**ï¼‰\n\n\tåªéœ€è¦é€šè¿‡é…ç½®å°±å¯ä»¥å®Œæˆå¯¹äº‹åŠ¡çš„ç®¡ç†ï¼Œè€Œæ— éœ€æ‰‹åŠ¨ç¼–ç¨‹ã€‚\n\n- æ–¹ä¾¿é›†æˆå„ç§ä¼˜ç§€æ¡†æ¶ï¼ˆ**é›†æˆ**ï¼‰\n\n\tSpringä¸æ’æ–¥å„ç§ä¼˜ç§€çš„å¼€æºæ¡†æ¶ï¼Œå…¶å†…éƒ¨æä¾›äº†å¯¹å„ç§ä¼˜ç§€æ¡†æ¶çš„ç›´æ¥æ”¯æŒï¼ˆå¦‚ï¼šStrutsã€Hibernateã€MyBatisç­‰ï¼‰ã€‚\n\n\nç¼ºç‚¹\n\n- Spring**ä¾èµ–åå°„ï¼Œåå°„å½±å“æ€§èƒ½**\n\n### Spring æ¡†æ¶ä¸­éƒ½ç”¨åˆ°äº†å“ªäº›è®¾è®¡æ¨¡å¼ï¼Ÿ\n\n1. å·¥å‚æ¨¡å¼ï¼šé€šè¿‡ BeanFactory å’Œ ApplicationContext æ¥ç®¡ç† Bean å¯¹è±¡ã€‚\n2. å•ä¾‹æ¨¡å¼ï¼šBeané»˜è®¤ä¸ºå•ä¾‹æ¨¡å¼ã€‚\n3. ä»£ç†æ¨¡å¼ï¼šSpringçš„AOPåŠŸèƒ½ç”¨åˆ°äº†åŸºäºæ¥å£çš„JDKçš„åŠ¨æ€ä»£ç†å’ŒåŸºäºå­ç±»çš„CGLIBåŠ¨æ€ä»£ç†ï¼›\n\n### Springæ¡†æ¶ä¸­æœ‰å“ªäº›ä¸åŒç±»å‹çš„äº‹ä»¶\n\n**Springçš„ApplicationContext æä¾›äº†æ”¯æŒäº‹ä»¶å’Œä»£ç ä¸­ç›‘å¬å™¨çš„åŠŸèƒ½ã€‚**  \n\nå¦‚æœä¸€ä¸ªbeanå®ç°äº†`ApplicationListener`æ¥å£ï¼Œå½“ä¸€ä¸ª`ApplicationEvent` è¢«å‘å¸ƒä»¥åï¼Œbeanä¼šè‡ªåŠ¨è¢«é€šçŸ¥ã€‚\n\n```javascript\npublic class AllApplicationEventListener implements ApplicationListener < ApplicationEvent >{\n    @Override\n    public void onApplicationEvent(ApplicationEvent applicationEvent){\n        //process event\n    }\n}\n```\n\n**Spring æä¾›äº†ä»¥ä¸‹5ç§æ ‡å‡†çš„äº‹ä»¶ï¼š**\n\n- ä¸Šä¸‹æ–‡æ›´æ–°äº‹ä»¶ï¼ˆContextRefreshedEventï¼‰ï¼šè¯¥äº‹ä»¶ä¼šåœ¨ApplicationContextè¢«åˆå§‹åŒ–æˆ–è€…æ›´æ–°æ—¶å‘å¸ƒã€‚ä¹Ÿå¯ä»¥åœ¨è°ƒç”¨`ConfigurableApplicationContext` æ¥å£ä¸­çš„`refresh()`æ–¹æ³•æ—¶è¢«è§¦å‘ã€‚\n- ä¸Šä¸‹æ–‡å¼€å§‹äº‹ä»¶ï¼ˆContextStartedEventï¼‰ï¼šå½“å®¹å™¨è°ƒç”¨`ConfigurableApplicationContext`çš„`Start()`æ–¹æ³•å¼€å§‹/é‡æ–°å¼€å§‹å®¹å™¨æ—¶è§¦å‘è¯¥äº‹ä»¶ã€‚\n- ä¸Šä¸‹æ–‡åœæ­¢äº‹ä»¶ï¼ˆContextStoppedEventï¼‰ï¼šå½“å®¹å™¨è°ƒç”¨`ConfigurableApplicationContext`çš„`Stop()`æ–¹æ³•åœæ­¢å®¹å™¨æ—¶è§¦å‘è¯¥äº‹ä»¶ã€‚\n- ä¸Šä¸‹æ–‡å…³é—­äº‹ä»¶ï¼ˆContextClosedEventï¼‰ï¼šå½“`ApplicationContext`è¢«å…³é—­æ—¶è§¦å‘è¯¥äº‹ä»¶ã€‚å®¹å™¨è¢«å…³é—­æ—¶ï¼Œå…¶ç®¡ç†çš„æ‰€æœ‰å•ä¾‹Beanéƒ½è¢«é”€æ¯ã€‚\n- è¯·æ±‚å¤„ç†äº‹ä»¶ï¼ˆRequestHandledEventï¼‰ï¼šåœ¨Webåº”ç”¨ä¸­ï¼Œå½“ä¸€ä¸ªhttpè¯·æ±‚ï¼ˆrequestï¼‰ç»“æŸè§¦å‘è¯¥äº‹ä»¶ã€‚\n\n### Spring åº”ç”¨ç¨‹åºæœ‰å“ªäº›ä¸åŒç»„ä»¶ï¼Ÿ\n\nSpring åº”ç”¨ä¸€èˆ¬æœ‰ä»¥ä¸‹ç»„ä»¶ï¼š\n\n- Bean ç±» - å®ƒåŒ…å«å±æ€§ï¼Œsetter å’Œ getter æ–¹æ³•ï¼Œå‡½æ•°ç­‰ã€‚\n- Bean é…ç½®æ–‡ä»¶ - åŒ…å«ç±»çš„ä¿¡æ¯ä»¥åŠå¦‚ä½•é…ç½®å®ƒä»¬ã€‚\n- æ¥å£ - å¤„ç† Bean \n- ç”¨æˆ·ç¨‹åº - å®ƒä½¿ç”¨æ¥å£ã€‚\n\n## Springæ§åˆ¶åè½¬(IOC)\n\n### ä»€ä¹ˆæ˜¯Spring IOC å®¹å™¨ï¼Ÿ\n\nSpring IOCï¼ˆæ§åˆ¶åè½¬ï¼‰ æŠŠç»„ä»¶å¯¹è±¡æ§åˆ¶æƒäº¤ç»™å®¹å™¨ï¼Œå®¹å™¨è´Ÿè´£åˆ›å»ºå¯¹è±¡ï¼Œé…ç½®å¯¹è±¡ï¼ˆé€šè¿‡ä¾èµ–æ³¨å…¥ï¼ˆDIï¼‰ï¼Œå¹¶ä¸”ç®¡ç†è¿™äº›å¯¹è±¡çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸã€‚IoCè®©ç›¸äº’åä½œçš„ç»„ä»¶ä¿æŒæ¾è€¦åˆã€‚\n\n### Spring IoC çš„å®ç°æœºåˆ¶\n\nSpring ä¸­çš„ IoC çš„å®ç°åŸç†å°±æ˜¯**å·¥å‚æ¨¡å¼åŠ åå°„**ã€‚\n\n```java\ninterface Fruit {\n    void eat();\n}\n\nclass Apple implements Fruit {\n    public void eat(){\n        System.out.println(\"Apple\");\n    }\n}\n\nclass Orange implements Fruit {\n    public void eat(){\n        System.out.println(\"Orange\");\n    }\n}\n\nclass Factory {\n    public static Fruit getInstance(String className) {\t// ä½¿ç”¨åå°„ï¼Œç”¨å­—ç¬¦ä¸²è·å–åˆ°å®ä¾‹\n        Fruit f=null;\n        try {\n            f = (Fruit) Class.forName(className).newInstance();\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n        return f;\n    }\n}\n\nclass Client {\n    public static void main(String[] a) {\n        Fruit f = Factory.getInstance(\"io.github.dunwu.spring.Apple\");\n        if(f != null){\n            f.eat();\n        }\n    }\n}\n```\n\n### BeanFactory å’Œ ApplicationContextæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\n\nBeanFactoryå’ŒApplicationContextæ˜¯Springçš„ä¸¤å¤§æ ¸å¿ƒæ¥å£ï¼Œéƒ½å¯ä»¥å½“åšSpringçš„å®¹å™¨ã€‚\nApplicationContextæ˜¯BeanFactoryçš„å­æ¥å£ã€‚\n\n1. ä¾èµ–å…³ç³»\n\nBeanFactoryï¼šæ˜¯Springé‡Œé¢æœ€åº•å±‚çš„æ¥å£ï¼ŒåŒ…å«äº†å„ç§Beançš„å®šä¹‰ï¼Œè¯»å–beané…ç½®æ–‡æ¡£ï¼Œç®¡ç†beançš„åŠ è½½ã€å®ä¾‹åŒ–ï¼Œæ§åˆ¶beançš„ç”Ÿå‘½å‘¨æœŸï¼Œç»´æŠ¤beanä¹‹é—´çš„ä¾èµ–å…³ç³»ã€‚\n\nApplicationContextæ¥å£ä½œä¸ºBeanFactoryçš„å­æ¥å£ï¼Œé™¤äº†æä¾›BeanFactoryæ‰€å…·æœ‰çš„åŠŸèƒ½å¤–ï¼Œè¿˜æä¾›äº†æ›´å®Œæ•´çš„æ¡†æ¶åŠŸèƒ½ï¼š\n\n- æ”¯æŒå›½é™…åŒ–ã€‚\n- æ”¯æŒè®¿é—®æ–‡ä»¶èµ„æº\n- æ”¯æŒäº‹ä»¶å‘å¸ƒé€šçŸ¥\n- åŒæ—¶åŠ è½½å¤šä¸ªé…ç½®æ–‡ä»¶ã€‚\n\né…ç½®æµç¨‹ï¼š\n\n1. åŠ è½½é…ç½®æ–‡ä»¶ï¼Œè§£ææˆ BeanDefinition æ”¾åœ¨ Map é‡Œï¼Œmapä¸­å­˜æ”¾`<BeanNameï¼ŒClasså¯¹è±¡>`çš„æ˜ å°„\n2. è°ƒç”¨ getBean çš„æ—¶å€™ï¼Œä» BeanDefinition æ‰€å±çš„ Map é‡Œï¼Œæ‹¿å‡º Class å¯¹è±¡ä½¿ç”¨åå°„è¿›è¡Œå®ä¾‹åŒ–ï¼ŒåŒæ—¶ï¼Œå¦‚æœæœ‰ä¾èµ–å…³ç³»ï¼Œå°†é€’å½’è°ƒç”¨ getBean æ–¹æ³• â€”â€” å®Œæˆä¾èµ–æ³¨å…¥ã€‚\n3. åŠ è½½æ–¹å¼\n\n**BeanFactroy**é‡‡ç”¨çš„æ˜¯**å»¶è¿ŸåŠ è½½**å½¢å¼æ¥æ³¨å…¥Beançš„ï¼Œå³åªæœ‰åœ¨ä½¿ç”¨åˆ°æŸä¸ªBeanæ—¶(è°ƒç”¨getBean())ï¼Œæ‰å¯¹è¯¥Beanè¿›è¡ŒåŠ è½½å®ä¾‹åŒ–ã€‚è¿™æ ·ï¼Œæˆ‘ä»¬å°±ä¸èƒ½å‘ç°ä¸€äº›å­˜åœ¨çš„Springçš„é…ç½®é—®é¢˜ã€‚å¦‚æœBeançš„æŸä¸€ä¸ªå±æ€§æ²¡æœ‰æ³¨å…¥æˆ–è€…æ˜¯å±æ€§æ³¨å…¥é”™è¯¯ï¼ŒBeanFacotryåŠ è½½åï¼Œç›´è‡³ç¬¬ä¸€æ¬¡ä½¿ç”¨è°ƒç”¨getBeanæ–¹æ³•æ‰ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚\n\n**ApplicationContext**ï¼Œå®ƒæ˜¯åœ¨å®¹å™¨å¯åŠ¨æ—¶ï¼Œ**ä¸€æ¬¡æ€§åˆ›å»º**äº†æ‰€æœ‰çš„Beanã€‚è¿™æ ·ï¼Œåœ¨å®¹å™¨å¯åŠ¨æ—¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥**å‘ç°Springä¸­å­˜åœ¨çš„é…ç½®é”™è¯¯**ï¼Œè¿™æ ·æœ‰åˆ©äºæ£€æŸ¥æ‰€ä¾èµ–å±æ€§æ˜¯å¦æ³¨å…¥ã€‚ ApplicationContextå¯åŠ¨åé¢„è½½å…¥æ‰€æœ‰çš„å•å®ä¾‹Beanï¼Œé€šè¿‡é¢„è½½å…¥å•å®ä¾‹bean ,ç¡®ä¿å½“ä½ éœ€è¦çš„æ—¶å€™ï¼Œä½ å°±ä¸ç”¨ç­‰å¾…ï¼Œå› ä¸ºå®ƒä»¬å·²ç»åˆ›å»ºå¥½äº†ã€‚\n\nç”±äºåœ¨å®¹å™¨å¯åŠ¨æ—¶ä¸€æ¬¡æ€§åˆ›å»ºæ‰€æœ‰çš„Beanï¼Œå› æ­¤ApplicationContext æ›´åŠ å ç”¨å†…å­˜ç©ºé—´ï¼Œå½“é…ç½®çš„Beanæ¯”è¾ƒå¤šæ—¶ï¼Œç¨‹åºå¯åŠ¨è¾ƒæ…¢ã€‚\n\n#### â­BeanFactoryå’ŒFactoryBeanåŒºåˆ«ï¼Ÿ\n\nBeanFactoryï¼šæ˜¯spring IoCå®¹å™¨çš„åº•å±‚æ¥å£ï¼Œå¯ä»¥ç”¨æ¥ç®¡ç†beanåŠå…¶ç”Ÿå‘½å‘¨æœŸï¼›\n\nFactoryBeanï¼šå¦‚æœæŸä¸ª bean å®ç°äº†FactoryBeanè¿™ä¸ªæ¥å£ï¼Œé€šè¿‡ getBean æ–¹æ³•æ¥è·å– bean çš„æ—¶å€™ï¼Œå¹¶ä¸æ˜¯è¿”å›è‡ªå·±çš„å®ä¾‹ï¼Œè€Œæ˜¯è¿”å›å…¶ getObject() æ–¹æ³•çš„è¿”å›å€¼\n\n### ApplicationContexté€šå¸¸çš„å®ç°æ˜¯ä»€ä¹ˆï¼Ÿ\n\n**FileSystemXmlApplicationContext** ï¼šæ­¤å®¹å™¨ä»ä¸€ä¸ªXMLæ–‡ä»¶ä¸­åŠ è½½beansçš„å®šä¹‰ï¼ŒXML Bean é…ç½®æ–‡ä»¶çš„å…¨è·¯å¾„åå¿…é¡»æä¾›ç»™å®ƒçš„æ„é€ å‡½æ•°ã€‚\n\n**ClassPathXmlApplicationContext**ï¼šæ­¤å®¹å™¨ä¹Ÿä»ä¸€ä¸ªXMLæ–‡ä»¶ä¸­åŠ è½½beansçš„å®šä¹‰ï¼Œè¿™é‡Œï¼Œä½ éœ€è¦æ­£ç¡®è®¾ç½®classpathå› ä¸ºè¿™ä¸ªå®¹å™¨å°†åœ¨classpathé‡Œæ‰¾beané…ç½®ã€‚\n\n**AnnotationConfigApplicationContext**ï¼šå®ƒæ˜¯ç”¨äºè¯»å–æ³¨è§£åˆ›å»ºå®¹å™¨çš„\n\n### ä»€ä¹ˆæ˜¯Springçš„ä¾èµ–æ³¨å…¥ï¼Ÿ\n\nå…·ä½“å«ä¹‰æ˜¯:å½“æŸä¸ªè°ƒç”¨è€…éœ€è¦å¦ä¸€ä¸ªè¢«è°ƒç”¨è€…çš„ååŠ©æ—¶ï¼Œåœ¨ ä¼ ç»Ÿçš„ç¨‹åºè®¾è®¡è¿‡ç¨‹ä¸­ï¼Œé€šå¸¸ç”±è°ƒç”¨è€…æ¥åˆ›å»ºè¢«è°ƒç”¨è€…çš„å®ä¾‹ã€‚ä½†åœ¨Springé‡Œï¼Œåˆ›å»ºè¢«è°ƒç”¨è€…çš„å·¥ä½œä¸å†ç”±è°ƒç”¨è€…æ¥å®Œæˆï¼Œå› æ­¤ç§°ä¸ºæ§åˆ¶åè½¬ï¼›åˆ›å»ºè¢«è°ƒç”¨è€… å®ä¾‹çš„å·¥ä½œé€šå¸¸ç”±Springå®¹å™¨æ¥å®Œæˆï¼Œç„¶åæ³¨å…¥è°ƒç”¨è€…ï¼Œå› æ­¤ä¹Ÿç§°ä¸ºä¾èµ–æ³¨å…¥ã€‚\n\n### ä¾èµ–æ³¨å…¥æœ‰ä»€ä¹ˆä¼˜åŠ¿\n\nä¾èµ–æ³¨å…¥ä¹‹æ‰€ä»¥æ›´æµè¡Œæ˜¯å› ä¸ºå®ƒæ˜¯ä¸€ç§æ›´å¯å–çš„æ–¹å¼ï¼šè®©å®¹å™¨å…¨æƒè´Ÿè´£ä¾èµ–æŸ¥è¯¢ï¼Œå—ç®¡ç»„ä»¶åªéœ€è¦æš´éœ²JavaBeançš„setteræ–¹æ³•æˆ–è€…å¸¦å‚æ•°çš„æ„é€ å™¨æˆ–è€…æ¥å£ï¼Œä½¿å®¹å™¨å¯ä»¥åœ¨åˆå§‹åŒ–æ—¶ç»„è£…å¯¹è±¡çš„ä¾èµ–å…³ç³»ã€‚å…¶ä¸ä¾èµ–æŸ¥æ‰¾æ–¹å¼ç›¸æ¯”ï¼Œä¸»è¦ä¼˜åŠ¿ä¸ºï¼š\n\n- æŸ¥æ‰¾å®šä½æ“ä½œä¸åº”ç”¨ä»£ç å®Œå…¨æ— å…³ã€‚\n- ä¸ä¾èµ–äºå®¹å™¨çš„APIï¼Œå¯ä»¥å¾ˆå®¹æ˜“åœ°åœ¨ä»»ä½•å®¹å™¨ä»¥å¤–ä½¿ç”¨åº”ç”¨å¯¹è±¡ã€‚\n- ä¸éœ€è¦ç‰¹æ®Šçš„æ¥å£ï¼Œç»å¤§å¤šæ•°å¯¹è±¡å¯ä»¥åšåˆ°å®Œå…¨ä¸å¿…ä¾èµ–å®¹å™¨ã€‚\n\n### æœ‰å“ªäº›ä¸åŒç±»å‹çš„ä¾èµ–æ³¨å…¥å®ç°æ–¹å¼ï¼Ÿ\n\n**æ„é€ å™¨ä¾èµ–æ³¨å…¥**ï¼šæ„é€ å™¨ä¾èµ–æ³¨å…¥é€šè¿‡å®¹å™¨è§¦å‘ä¸€ä¸ªç±»çš„æ„é€ å™¨æ¥å®ç°çš„ï¼Œè¯¥ç±»æœ‰ä¸€ç³»åˆ—å‚æ•°ï¼Œæ¯ä¸ªå‚æ•°ä»£è¡¨ä¸€ä¸ªå¯¹å…¶ä»–ç±»çš„ä¾èµ–ã€‚\n\n**Setteræ–¹æ³•æ³¨å…¥**ï¼šSetteræ–¹æ³•æ³¨å…¥æ˜¯å®¹å™¨é€šè¿‡è°ƒç”¨æ— å‚æ„é€ å™¨æˆ–æ— å‚staticå·¥å‚ æ–¹æ³•å®ä¾‹åŒ–beanä¹‹åï¼Œè°ƒç”¨è¯¥beançš„setteræ–¹æ³•ï¼Œå³å®ç°äº†åŸºäºsetterçš„ä¾èµ–æ³¨å…¥ã€‚\n\n### æ„é€ å™¨ä¾èµ–æ³¨å…¥å’Œ setteræ–¹æ³•æ³¨å…¥çš„åŒºåˆ«\n\nï¼ˆéƒ¨åˆ†æ³¨å…¥ï¼‰åœ¨setteræ³¨å…¥,å¯ä»¥å°†ä¾èµ–é¡¹éƒ¨åˆ†æ³¨å…¥,æ„é€ æ–¹æ³•æ³¨å…¥ä¸èƒ½éƒ¨åˆ†æ³¨å…¥ã€‚\n\nï¼ˆå±æ€§è¦†ç›–ï¼‰å¦‚æœæˆ‘ä»¬ä¸ºåŒä¸€å±æ€§æä¾›setterå’Œæ„é€ æ–¹æ³•æ³¨å…¥ï¼Œsetteræ³¨å…¥å°†è¦†ç›–æ„é€ æ–¹æ³•æ³¨å…¥ã€‚ä½†æ˜¯æ„é€ æ–¹æ³•æ³¨å…¥ä¸èƒ½è¦†ç›–setteræ³¨å…¥å€¼ã€‚æ˜¾ç„¶ï¼Œæ„é€ æ–¹æ³•æ³¨å…¥è¢«ç§°ä¸ºåˆ›å»ºå®ä¾‹çš„ç¬¬ä¸€é€‰é¡¹ã€‚\n\nï¼ˆå¾ªç¯ä¾èµ–ï¼‰åœ¨æ„é€ å‡½æ•°æ³¨å…¥,å¦‚æœAå’ŒBå¯¹è±¡ç›¸äº’ä¾èµ–ï¼šAä¾èµ–äºB,Bä¹Ÿä¾èµ–äºA,æ­¤æ—¶åœ¨åˆ›å»ºå¯¹è±¡çš„Aæˆ–è€…Bæ—¶ï¼ŒSpringæŠ›å‡ºObjectCurrentlyInCreationExceptionã€‚æ‰€ä»¥Springå¯ä»¥é€šè¿‡setteræ³¨å…¥,ä»è€Œè§£å†³å¾ªç¯ä¾èµ–çš„é—®é¢˜ã€‚\n\n**æœ€å¥½çš„è§£å†³æ–¹æ¡ˆæ˜¯ç”¨æ„é€ å™¨å‚æ•°å®ç°å¼ºåˆ¶ä¾èµ–ï¼Œsetteræ–¹æ³•å®ç°å¯é€‰ä¾èµ–**\n\n### è®²ä¸€è®²Springä¸­çš„å¾ªç¯ä¾èµ–\n\nhttps://www.cnblogs.com/daimzh/p/13256413.html\n\nhttps://blog.csdn.net/weixin_49592546/article/details/108050566\n\n#### ä»€ä¹ˆæ˜¯å¾ªç¯ä¾èµ–ï¼Ÿ\n\n```java\n@Component\npublic class A {\n    // Aä¸­æ³¨å…¥äº†B\n\t@Autowired\n\tprivate B b;\n}\n\n@Component\npublic class B {\n    // Bä¸­ä¹Ÿæ³¨å…¥äº†A\n\t@Autowired\n\tprivate A a;\n}\n```\n\n#### Springæ˜¯å¦‚ä½•è§£å†³çš„å¾ªç¯ä¾èµ–ï¼Ÿ\n\n> ä»¥ä¸‹ï¼š\n>\n> ä½œè€…ï¼šé˜¿é‡Œäº‘äº‘æ –å·\n>\n> é“¾æ¥ï¼šhttps://zhuanlan.zhihu.com/p/368769721\n>\n> æ¥æºï¼šçŸ¥ä¹\n>\n> è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚\n\né¦–å…ˆï¼ŒSpring è§£å†³å¾ªç¯ä¾èµ–æœ‰ä¸¤ä¸ªå‰ææ¡ä»¶ï¼š\n\n1. ä¸å…¨æ˜¯æ„é€ å™¨æ–¹å¼çš„å¾ªç¯ä¾èµ–\n2. å¿…é¡»æ˜¯å•ä¾‹\n\nåŸºäºä¸Šé¢çš„é—®é¢˜ï¼Œæˆ‘ä»¬çŸ¥é“Beançš„ç”Ÿå‘½å‘¨æœŸï¼Œæœ¬è´¨ä¸Šè§£å†³å¾ªç¯ä¾èµ–çš„é—®é¢˜å°±æ˜¯ä¸‰çº§ç¼“å­˜ï¼Œé€šè¿‡ä¸‰çº§ç¼“å­˜æå‰æ‹¿åˆ°æœªåˆå§‹åŒ–å®Œå…¨çš„å¯¹è±¡ã€‚\n\n```java\n/** Cache of singleton objects: bean name to bean instance. */\nprivate final Map<String, Object> singletonObjects = new ConcurrentHashMap<>(256);\n/** Cache of early singleton objects: bean name to bean instance. */\nprivate final Map<String, Object> earlySingletonObjects = new HashMap<>(16);\n/** Cache of singleton factories: bean name to ObjectFactory. */\nprivate final Map<String, ObjectFactory<?>> singletonFactories = new HashMap<>(16);\n```\n\nç¬¬ä¸€çº§ç¼“å­˜ï¼šç”¨æ¥ä¿å­˜å®ä¾‹åŒ–ã€åˆå§‹åŒ–éƒ½å®Œæˆçš„å¯¹è±¡\n\nç¬¬äºŒçº§ç¼“å­˜ï¼šç”¨æ¥ä¿å­˜å®ä¾‹åŒ–å®Œæˆï¼Œä½†æ˜¯æœªåˆå§‹åŒ–å®Œæˆçš„å¯¹è±¡\n\nç¬¬ä¸‰çº§ç¼“å­˜ï¼šç”¨æ¥ä¿å­˜ä¸€ä¸ªå¯¹è±¡å·¥å‚ï¼Œæä¾›ä¸€ä¸ªåŒ¿åå†…éƒ¨ç±»ï¼Œç”¨äºåˆ›å»ºäºŒçº§ç¼“å­˜ä¸­çš„å¯¹è±¡\n\n![Springä¸‰çº§ç¼“å­˜](https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/TyporaNotesv2-dbda6a103e41cde4a54548386d6c1cc2_720w.jpg)\n\nå‡è®¾ä¸€ä¸ªç®€å•çš„å¾ªç¯ä¾èµ–åœºæ™¯ï¼ŒAã€Bäº’ç›¸ä¾èµ–ã€‚\n\n![ç®€å•çš„å¾ªç¯ä¾èµ–åœºæ™¯](https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/TyporaNotesv2-f20f1e81c8011fd99f723127cacf7430_720w.jpg)\n\nAå¯¹è±¡çš„åˆ›å»ºè¿‡ç¨‹ï¼š\n\n1. åˆ›å»ºå¯¹è±¡Aï¼Œå®ä¾‹åŒ–çš„æ—¶å€™æŠŠAå¯¹è±¡å·¥å‚æ”¾å…¥ä¸‰çº§ç¼“å­˜ï¼›\n\n![å®ä¾‹åŒ–å¯¹è±¡A](https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/TyporaNotesv2-b295374aff4235ee9c0538bf03856217_720w.jpg)\n\n\n\n2. Aæ³¨å…¥å±æ€§æ—¶ï¼Œå‘ç°ä¾èµ–Bï¼Œè½¬è€Œå»å®ä¾‹åŒ–B\n\n3. åŒæ ·åˆ›å»ºå¯¹è±¡Bï¼Œæ³¨å…¥å±æ€§æ—¶å‘ç°ä¾èµ–Aï¼Œä¾æ¬¡ä»ä¸€çº§åˆ°ä¸‰çº§ç¼“å­˜æŸ¥è¯¢Aï¼Œä»ä¸‰çº§ç¼“å­˜é€šè¿‡å¯¹è±¡å·¥å‚æ‹¿åˆ°Aï¼ŒæŠŠAæ”¾å…¥äºŒçº§ç¼“å­˜ï¼ŒåŒæ—¶åˆ é™¤ä¸‰çº§ç¼“å­˜ä¸­çš„Aï¼Œæ­¤æ—¶ï¼ŒBå·²ç»å®ä¾‹åŒ–å¹¶ä¸”åˆå§‹åŒ–å®Œæˆï¼ŒæŠŠBæ”¾å…¥ä¸€çº§ç¼“å­˜ã€‚\n\n![åˆ›å»ºå¯¹è±¡B](https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/TyporaNotesv2-51cb735fc6c02c2225d2f38b9b5b6da9_720w.jpg)\n\n4. æ¥ç€ç»§ç»­åˆ›å»ºAï¼Œé¡ºåˆ©ä»ä¸€çº§ç¼“å­˜æ‹¿åˆ°å®ä¾‹åŒ–ä¸”åˆå§‹åŒ–å®Œæˆçš„Bå¯¹è±¡ï¼ŒAå¯¹è±¡åˆ›å»ºä¹Ÿå®Œæˆï¼Œåˆ é™¤äºŒçº§ç¼“å­˜ä¸­çš„Aï¼ŒåŒæ—¶æŠŠAæ”¾å…¥ä¸€çº§ç¼“å­˜\n\n5. æœ€åï¼Œä¸€çº§ç¼“å­˜ä¸­ä¿å­˜ç€å®ä¾‹åŒ–ã€åˆå§‹åŒ–éƒ½å®Œæˆçš„Aã€Bå¯¹è±¡\n\n![æœ€ç»ˆç»“æœ](https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/TyporaNotesv2-a1eaa5d9f8bec23e373dc1b9f86ddb25_720w.jpg)\n\nå› æ­¤ï¼Œç”±äºæŠŠå®ä¾‹åŒ–å’Œåˆå§‹åŒ–çš„æµç¨‹åˆ†å¼€äº†ï¼Œæ‰€ä»¥å¦‚æœéƒ½æ˜¯ç”¨æ„é€ å™¨çš„è¯ï¼Œå°±æ²¡æ³•åˆ†ç¦»è¿™ä¸ªæ“ä½œï¼Œæ‰€ä»¥éƒ½æ˜¯æ„é€ å™¨çš„è¯å°±æ— æ³•è§£å†³å¾ªç¯ä¾èµ–çš„é—®é¢˜äº†ã€‚\n\n### 8. ä¸ºä»€ä¹ˆè¦ä¸‰çº§ç¼“å­˜ï¼ŸäºŒçº§ä¸è¡Œå—ï¼Ÿ\n\nä¸å¯ä»¥ï¼Œä¸»è¦æ˜¯ä¸ºäº†ç”Ÿæˆä»£ç†å¯¹è±¡ã€‚\n\nå› ä¸ºä¸‰çº§ç¼“å­˜ä¸­æ”¾çš„æ˜¯ç”Ÿæˆå…·ä½“å¯¹è±¡çš„å¯¹è±¡å·¥å‚ï¼Œä»–å¯ä»¥ç”Ÿæˆä»£ç†å¯¹è±¡ï¼Œä¹Ÿå¯ä»¥æ˜¯æ™®é€šçš„å®ä¾‹å¯¹è±¡ã€‚\n\nå‡è®¾åªæœ‰äºŒçº§ç¼“å­˜çš„æƒ…å†µï¼Œå¾€äºŒçº§ç¼“å­˜ä¸­æ”¾çš„æ˜¾ç¤ºä¸€ä¸ªæ™®é€šçš„Beanå¯¹è±¡ï¼Œ`BeanPostProcessor`å»ç”Ÿæˆä»£ç†å¯¹è±¡ä¹‹åï¼Œè¦†ç›–æ‰äºŒçº§ç¼“å­˜ä¸­çš„æ™®é€šBeanå¯¹è±¡ï¼Œé‚£ä¹ˆå¤šçº¿ç¨‹ç¯å¢ƒä¸‹å¯èƒ½å–åˆ°çš„å¯¹è±¡å°±ä¸ä¸€è‡´äº†ã€‚\n\n![Aä»£ç†å¯¹è±¡è¦†ç›–Aæ™®é€šBean](https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/TyporaNotesv2-e4e9050787017c7272dc313f88af9382_720w.jpg)\n\n\n\n## Spring Beans\n\n### å¦‚ä½•ç»™Spring å®¹å™¨æä¾›é…ç½®å…ƒæ•°æ®ï¼ŸSpringæœ‰å‡ ç§é…ç½®æ–¹å¼\n\nè¿™é‡Œæœ‰ä¸‰ç§é‡è¦çš„æ–¹æ³•ç»™Spring å®¹å™¨æä¾›é…ç½®å…ƒæ•°æ®ã€‚\n\n- XMLé…ç½®æ–‡ä»¶ã€‚\n- åŸºäºæ³¨è§£çš„é…ç½®ã€‚\n- åŸºäºJavaçš„é…ç½®ã€‚\n\n### Springé…ç½®æ–‡ä»¶åŒ…å«äº†å“ªäº›ä¿¡æ¯\n\nSpringé…ç½®æ–‡ä»¶æ˜¯ä¸ªXML æ–‡ä»¶ï¼Œé€šè¿‡è¯»å–æŒ‡å®šç±»çš„å…¨é™å®šç±»åã€‚åå°„åˆ›å»ºå¯¹è±¡ï¼Œä¸¢å…¥iocå®¹å™¨ä¸­ï¼Œè¯¥å¯¹è±¡å¯ä»¥é€šè¿‡idæ¥è·å–\n\n### SpringåŸºäºxmlæ³¨å…¥beançš„å‡ ç§æ–¹å¼\n\n1. Setæ–¹æ³•æ³¨å…¥ï¼š`<property name=\"xxx\" value=\"yyy\"/>`\n2. æ„é€ å™¨æ³¨å…¥ï¼š`<construtor-arg type/index/name=\"xxx\" value=\"yyy\"/>`\n3. é™æ€å·¥å‚æ³¨å…¥ï¼›factory-bean factory-method\n4. å®ä¾‹å·¥å‚ï¼› class factory-method\n\n### è§£é‡ŠSpringæ”¯æŒçš„å‡ ç§beançš„ä½œç”¨åŸŸ\n\nSpringæ¡†æ¶æ”¯æŒä»¥ä¸‹äº”ç§beançš„ä½œç”¨åŸŸï¼š\n\n- **singleton :** beanåœ¨æ¯ä¸ªSpring ioc å®¹å™¨ä¸­åªæœ‰ä¸€ä¸ªå®ä¾‹ã€‚\n- **prototype**ï¼šä¸€ä¸ªbeançš„å®šä¹‰å¯ä»¥æœ‰å¤šä¸ªå®ä¾‹ã€‚\n- **request**ï¼šæ¯æ¬¡httpè¯·æ±‚éƒ½ä¼šåˆ›å»ºä¸€ä¸ªbeanï¼Œè¯¥ä½œç”¨åŸŸä»…åœ¨åŸºäºwebçš„Spring ApplicationContextæƒ…å½¢ä¸‹æœ‰æ•ˆã€‚\n- **session**ï¼šåœ¨ä¸€ä¸ªHTTP Sessionä¸­ï¼Œä¸€ä¸ªbeanå®šä¹‰å¯¹åº”ä¸€ä¸ªå®ä¾‹ã€‚è¯¥ä½œç”¨åŸŸä»…åœ¨åŸºäºwebçš„Spring ApplicationContextæƒ…å½¢ä¸‹æœ‰æ•ˆã€‚\n- **global-session**ï¼šåœ¨ä¸€ä¸ªå…¨å±€çš„HTTP Sessionä¸­ï¼Œä¸€ä¸ªbeanå®šä¹‰å¯¹åº”ä¸€ä¸ªå®ä¾‹ã€‚è¯¥ä½œç”¨åŸŸä»…åœ¨åŸºäºwebçš„Spring ApplicationContextæƒ…å½¢ä¸‹æœ‰æ•ˆã€‚\n\n**æ³¨æ„ï¼š** ç¼ºçœçš„Spring bean çš„ä½œç”¨åŸŸæ˜¯singletonã€‚ä½¿ç”¨ prototype ä½œç”¨åŸŸéœ€è¦æ…é‡çš„æ€è€ƒï¼Œå› ä¸ºé¢‘ç¹åˆ›å»ºå’Œé”€æ¯ bean ä¼šå¸¦æ¥å¾ˆå¤§çš„æ€§èƒ½å¼€é”€ã€‚\n\n### Springæ¡†æ¶ä¸­çš„å•ä¾‹beanæ˜¯çº¿ç¨‹å®‰å…¨çš„å—ï¼Ÿ\n\nä¸æ˜¯ï¼ŒSpringæ¡†æ¶ä¸­çš„å•ä¾‹beanä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚\n\nspring ä¸­çš„ bean é»˜è®¤æ˜¯å•ä¾‹æ¨¡å¼ï¼Œspring æ¡†æ¶å¹¶æ²¡æœ‰å¯¹å•ä¾‹ bean è¿›è¡Œå¤šçº¿ç¨‹çš„å°è£…å¤„ç†ã€‚\n\nç„¶è€Œï¼Œå®é™…ä¸Šå¤§éƒ¨åˆ†æ—¶å€™ spring bean æ— çŠ¶æ€çš„ï¼ˆæ¯”å¦‚ dao ç±»ï¼‰ï¼Œæ‰€ä»¥æŸç§ç¨‹åº¦ä¸Šæ¥è¯´ bean ä¹Ÿæ˜¯å®‰å…¨çš„ï¼Œä½†å¦‚æœ bean æœ‰çŠ¶æ€çš„è¯ï¼ˆæ¯”å¦‚ view model å¯¹è±¡ï¼‰ï¼Œé‚£å°±è¦å¼€å‘è€…è‡ªå·±å»ä¿è¯çº¿ç¨‹å®‰å…¨äº†ï¼Œæœ€ç®€å•çš„å°±æ˜¯æ”¹å˜ bean çš„ä½œç”¨åŸŸï¼ŒæŠŠâ€œsingletonâ€å˜æ›´ä¸ºâ€œprototypeâ€ï¼Œè¿™æ ·è¯·æ±‚ bean ç›¸å½“äº new Bean()äº†ï¼Œæ‰€ä»¥å°±å¯ä»¥ä¿è¯çº¿ç¨‹å®‰å…¨äº†ã€‚\n\n> æœ‰çŠ¶æ€å°±æ˜¯æœ‰æ•°æ®å­˜å‚¨åŠŸèƒ½\n> æ— çŠ¶æ€å°±æ˜¯ä¸ä¼šä¿å­˜æ•°æ®\n\n### Springå¦‚ä½•å¤„ç†çº¿ç¨‹å¹¶å‘é—®é¢˜ï¼Ÿ\n\n**Springä½¿ç”¨ThreadLocalå¯¹ä¸€äº›Beançš„çº¿ç¨‹å®‰å…¨é—®é¢˜è¿›è¡Œå¤„ç†**ã€‚\n\nThreadLocalå’Œçº¿ç¨‹åŒæ­¥æœºåˆ¶éƒ½æ˜¯ä¸ºäº†è§£å†³å¤šçº¿ç¨‹ä¸­ç›¸åŒå˜é‡çš„è®¿é—®å†²çªé—®é¢˜ã€‚åŒæ­¥æœºåˆ¶é‡‡ç”¨äº†â€œæ—¶é—´æ¢ç©ºé—´â€çš„æ–¹å¼ï¼Œä»…æä¾›ä¸€ä»½å˜é‡ï¼Œä¸åŒçš„çº¿ç¨‹åœ¨è®¿é—®å‰éœ€è¦è·å–é”ï¼Œæ²¡è·å¾—é”çš„çº¿ç¨‹åˆ™éœ€è¦æ’é˜Ÿã€‚è€ŒThreadLocalé‡‡ç”¨äº†â€œç©ºé—´æ¢æ—¶é—´â€çš„æ–¹å¼ã€‚\n\nThreadLocalä¼šä¸ºæ¯ä¸€ä¸ªçº¿ç¨‹æä¾›ä¸€ä¸ªç‹¬ç«‹çš„å˜é‡å‰¯æœ¬ï¼Œä»è€Œéš”ç¦»äº†å¤šä¸ªçº¿ç¨‹å¯¹æ•°æ®çš„è®¿é—®å†²çªã€‚å› ä¸ºæ¯ä¸€ä¸ªçº¿ç¨‹éƒ½æ‹¥æœ‰è‡ªå·±çš„å˜é‡å‰¯æœ¬ï¼Œä»è€Œä¹Ÿå°±æ²¡æœ‰å¿…è¦å¯¹è¯¥å˜é‡è¿›è¡ŒåŒæ­¥äº†ã€‚ThreadLocalæä¾›äº†çº¿ç¨‹å®‰å…¨çš„å…±äº«å¯¹è±¡ï¼Œåœ¨ç¼–å†™å¤šçº¿ç¨‹ä»£ç æ—¶ï¼Œå¯ä»¥æŠŠä¸å®‰å…¨çš„å˜é‡å°è£…è¿›ThreadLocalã€‚\n\n### è§£é‡ŠSpringæ¡†æ¶ä¸­beançš„ç”Ÿå‘½å‘¨æœŸ\n\nå‚è€ƒï¼šhttps://www.cnblogs.com/javazhiyin/p/10905294.html\n\n![Springä¸­Beançš„ç”Ÿå‘½å‘¨æœŸ](https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/TyporaNotes201911012343410.png)\n\n**1ã€å®ä¾‹åŒ–Beanï¼š**\n\nå¯¹äºBeanFactoryå®¹å™¨ï¼Œå½“å®¢æˆ·å‘å®¹å™¨è¯·æ±‚ä¸€ä¸ªå°šæœªåˆå§‹åŒ–çš„beanæ—¶ï¼Œæˆ–åˆå§‹åŒ–beançš„æ—¶å€™éœ€è¦æ³¨å…¥å¦ä¸€ä¸ªå°šæœªåˆå§‹åŒ–çš„ä¾èµ–æ—¶ï¼Œå®¹å™¨å°±ä¼šè°ƒç”¨createBeanè¿›è¡Œå®ä¾‹åŒ–ã€‚\nå¯¹äºApplicationContextå®¹å™¨ï¼Œå½“å®¹å™¨å¯åŠ¨ç»“æŸåï¼Œé€šè¿‡è·å–BeanDefinitionå¯¹è±¡ä¸­çš„ä¿¡æ¯ï¼Œå®ä¾‹åŒ–æ‰€æœ‰çš„beanã€‚\n\n**2ã€ä¾èµ–æ³¨å…¥ï¼š**\n\nå®ä¾‹åŒ–åçš„å¯¹è±¡è¢«å°è£…åœ¨BeanWrapperå¯¹è±¡ä¸­ï¼Œç´§æ¥ç€ï¼ŒSpringæ ¹æ®BeanDefinitionä¸­çš„ä¿¡æ¯ ä»¥åŠ é€šè¿‡BeanWrapperæä¾›çš„è®¾ç½®å±æ€§çš„æ¥å£å®Œæˆä¾èµ–æ³¨å…¥ã€‚\n\n**3ã€å¤„ç†Awareæ¥å£ï¼ˆé…ç½®Beanå¯¹è±¡çš„idå€¼ã€å·¥å‚/ä¸Šä¸‹æ–‡ï¼‰ï¼š**\n\næ¥ç€ï¼ŒSpringä¼šæ£€æµ‹è¯¥å¯¹è±¡æ˜¯å¦å®ç°äº†xxxAwareæ¥å£ï¼Œå¹¶å°†ç›¸å…³çš„xxxAwareå®ä¾‹æ³¨å…¥ç»™Beanï¼š\n\n- å¦‚æœè¿™ä¸ªBeanå·²ç»å®ç°äº†BeanNameAwareæ¥å£ï¼Œä¼šè°ƒç”¨å®ƒå®ç°çš„setBeanName(String beanId)æ–¹æ³•ï¼Œæ­¤å¤„ä¼ é€’çš„å°±æ˜¯Springé…ç½®æ–‡ä»¶ä¸­Beançš„idå€¼ï¼›\n- å¦‚æœè¿™ä¸ªBeanå·²ç»å®ç°äº†BeanFactoryAwareæ¥å£ï¼Œä¼šè°ƒç”¨å®ƒå®ç°çš„setBeanFactory()æ–¹æ³•ï¼Œä¼ é€’çš„æ˜¯Springå·¥å‚è‡ªèº«ï¼›\n- å¦‚æœè¿™ä¸ªBeanå·²ç»å®ç°äº†ApplicationContextAwareæ¥å£ï¼Œä¼šè°ƒsetApplicationContext(ApplicationContext)æ–¹æ³•ï¼Œä¼ å…¥Springä¸Šä¸‹æ–‡ï¼›\n\n**4ã€postProcessBeforeInitializationï¼ˆåˆå§‹åŒ–å‰ç½®å¤„ç†ï¼‰ï¼š**\n\nå¦‚æœæƒ³å¯¹Beanè¿›è¡Œä¸€äº›è‡ªå®šä¹‰çš„å¤„ç†ï¼Œé‚£ä¹ˆå¯ä»¥è®©Beanå®ç°äº†BeanPostProcessoræ¥å£ï¼Œé‚£å°†ä¼šè°ƒç”¨postProcessBeforeInitialization(Object obj, String s)æ–¹æ³•ã€‚ç”±äºè¿™ä¸ªæ–¹æ³•æ˜¯åœ¨Beanåˆå§‹åŒ–ç»“æŸæ—¶è°ƒç”¨çš„ï¼Œæ‰€ä»¥å¯ä»¥è¢«åº”ç”¨äºå†…å­˜æˆ–ç¼“å­˜æŠ€æœ¯ï¼›\n\n**5ã€è‡ªå®šä¹‰åˆå§‹åŒ–init-methodï¼š**\n\nå¦‚æœBeanåœ¨Springé…ç½®æ–‡ä»¶ä¸­é…ç½®äº† init-method å±æ€§ï¼Œåˆ™ä¼šè‡ªåŠ¨è°ƒç”¨å…¶é…ç½®çš„**è‡ªå®šä¹‰åˆå§‹åŒ–**æ–¹æ³•ã€‚\n\n**6ã€postProcessAfterInitializationï¼ˆåˆå§‹åŒ–åç½®å¤„ç†ï¼‰**\n\nå¦‚æœè¿™ä¸ªBeanå®ç°äº†BeanPostProcessoræ¥å£ï¼Œå°†ä¼šè°ƒç”¨postProcessAfterInitialization(Object obj, String s)æ–¹æ³•ï¼Œ**AOPåœ¨è¿™ä¸ªæ—¶å€™è¿›è¡Œä»£ç†å¯¹è±¡çš„åˆ›å»º**ã€‚\n\n**NOW** ä»¥ä¸Šå‡ ä¸ªæ­¥éª¤å®Œæˆåï¼ŒBeanå°±å·²ç»è¢«æ­£ç¡®åˆ›å»ºäº†ï¼Œä¹‹åå°±å¯ä»¥ä½¿ç”¨è¿™ä¸ªBeanäº†ã€‚\n\n**7ã€æ¸…ç†é˜¶æ®µdestroyï¼š**\n\nå½“Beanä¸å†éœ€è¦æ—¶ï¼Œä¼šè¿›å…¥æ¸…ç†é˜¶æ®µï¼Œå¦‚æœBeanå®ç°äº†DisposableBeanè¿™ä¸ªæ¥å£ï¼Œä¼šè°ƒç”¨å…¶å®ç°çš„destroy()æ–¹æ³•ï¼›\n\n**8ã€è‡ªå®šä¹‰é”€æ¯destroy-methodï¼š**\n\næœ€åï¼Œå¦‚æœè¿™ä¸ªBeançš„Springé…ç½®ä¸­é…ç½®äº†destroy-methodå±æ€§ï¼Œä¼šè‡ªåŠ¨è°ƒç”¨å…¶é…ç½®çš„**è‡ªå®šä¹‰é”€æ¯**æ–¹æ³•ã€‚\n\n### åœ¨ Springä¸­å¦‚ä½•æ³¨å…¥ä¸€ä¸ªJavaé›†åˆï¼Ÿ\n\nç”¨`<list>`æ³¨å…¥ä¸€åˆ—å€¼ï¼Œç”¨`<map>`æ³¨å…¥ä¸€ç»„æ˜ å°„æ•°æ®ã€‚\n\n### ä»€ä¹ˆæ˜¯beanè£…é…ï¼Ÿ\n\né€šè¿‡beançš„ä¾èµ–å…³ç³»ï¼Œä½¿ç”¨ä¾èµ–æ³¨å…¥å°†springä¸­çš„beanè£…é…åœ¨ä¸€èµ·ã€‚\nspringå¯ä»¥é€šè¿‡beançš„ä¾èµ–å…³ç³»è‡ªåŠ¨å®Œæˆbeanä¹‹é—´çš„é…ç½®ã€‚\n\n### Spring è‡ªåŠ¨è£…é… bean æœ‰å“ªäº›æ–¹å¼ï¼Ÿ\n\nåœ¨springä¸­ï¼Œå¯¹è±¡æ— éœ€è‡ªå·±æŸ¥æ‰¾æˆ–åˆ›å»ºä¸å…¶å…³è”çš„å…¶ä»–å¯¹è±¡ï¼Œç”±å®¹å™¨è´Ÿè´£æŠŠéœ€è¦ç›¸äº’åä½œçš„å¯¹è±¡å¼•ç”¨èµ‹äºˆå„ä¸ªå¯¹è±¡ã€‚\n\nåœ¨Springæ¡†æ¶xmlé…ç½®ä¸­å…±æœ‰5ç§è‡ªåŠ¨è£…é…ï¼š\n\n- noï¼šé»˜è®¤çš„æ–¹å¼æ˜¯ä¸è¿›è¡Œè‡ªåŠ¨è£…é…çš„ï¼Œé€šè¿‡æ‰‹å·¥è®¾ç½®refå±æ€§æ¥è¿›è¡Œè£…é…beanã€‚\n- byNameï¼šé€šè¿‡beançš„åç§°è¿›è¡Œè‡ªåŠ¨è£…é…ï¼Œå¦‚æœä¸€ä¸ªbeançš„ property ä¸å¦ä¸€bean çš„name ç›¸åŒï¼Œå°±è¿›è¡Œè‡ªåŠ¨è£…é…ã€‚\n- byTypeï¼šé€šè¿‡å‚æ•°çš„æ•°æ®ç±»å‹è¿›è¡Œè‡ªåŠ¨è£…é…ã€‚\n- constructorï¼šåˆ©ç”¨æ„é€ å‡½æ•°è¿›è¡Œè£…é…ï¼Œå¹¶ä¸”æ„é€ å‡½æ•°çš„å‚æ•°é€šè¿‡byTypeè¿›è¡Œè£…é…ã€‚\n- autodetectï¼šè‡ªåŠ¨æ¢æµ‹ï¼Œå¦‚æœæœ‰æ„é€ æ–¹æ³•ï¼Œé€šè¿‡ constructçš„æ–¹å¼è‡ªåŠ¨è£…é…ï¼Œå¦åˆ™ä½¿ç”¨ byTypeçš„æ–¹å¼è‡ªåŠ¨è£…é…ã€‚\n\n### ä½¿ç”¨@Autowiredæ³¨è§£è‡ªåŠ¨è£…é…çš„è¿‡ç¨‹æ˜¯æ€æ ·çš„ï¼Ÿ\n\nä½¿ç”¨@Autowiredæ³¨è§£æ¥è‡ªåŠ¨è£…é…æŒ‡å®šçš„beanã€‚åœ¨ä½¿ç”¨@Autowiredæ³¨è§£ä¹‹å‰éœ€è¦åœ¨Springé…ç½®æ–‡ä»¶è¿›è¡Œé…ç½®æ³¨è§£æ‰«æ `<context:annotation-config />`ã€‚\n\nåœ¨å¯åŠ¨spring IoCæ—¶ï¼Œå®¹å™¨è‡ªåŠ¨è£…è½½äº†ä¸€ä¸ªåç½®å¤„ç†å™¨ï¼Œå½“å®¹å™¨æ‰«æåˆ°@Autowiedã€@Resourceæˆ–@Injectæ—¶ï¼Œå°±ä¼šåœ¨IoCå®¹å™¨è‡ªåŠ¨æŸ¥æ‰¾éœ€è¦çš„beanï¼Œå¹¶è£…é…ç»™è¯¥å¯¹è±¡çš„å±æ€§ã€‚åœ¨ä½¿ç”¨@Autowiredæ—¶ï¼Œé¦–å…ˆåœ¨å®¹å™¨ä¸­**æŸ¥è¯¢å¯¹åº”ç±»å‹**çš„beanï¼š\n\n- å¦‚æœå¯¹åº”ç±»å‹æŸ¥è¯¢ç»“æœåˆšå¥½ä¸ºä¸€ä¸ªï¼Œå°±å°†è¯¥beanè£…é…ç»™@AutowiredæŒ‡å®šçš„æ•°æ®ï¼›\n- å¦‚æœå¯¹åº”ç±»å‹æŸ¥è¯¢çš„ç»“æœä¸æ­¢ä¸€ä¸ªï¼Œé‚£ä¹ˆ@Autowiredä¼šæ ¹æ®åç§°æ¥æŸ¥æ‰¾ï¼›\n- å¦‚æœä¸Šè¿°æŸ¥æ‰¾çš„ç»“æœä¸ºç©ºæˆ–è€…ä¸æ­¢ä¸€ä¸ªï¼Œé‚£ä¹ˆä¼šæŠ›å‡ºå¼‚å¸¸ã€‚\n\n## Springæ³¨è§£\n\n### ä»€ä¹ˆæ˜¯åŸºäºJavaçš„Springæ³¨è§£é…ç½®? ç»™ä¸€äº›æ³¨è§£çš„ä¾‹å­\n\nåŸºäºJavaçš„é…ç½®ï¼Œå…è®¸ä½ åœ¨å°‘é‡çš„Javaæ³¨è§£çš„å¸®åŠ©ä¸‹ï¼Œè¿›è¡Œä½ çš„å¤§éƒ¨åˆ†Springé…ç½®è€Œéé€šè¿‡XMLæ–‡ä»¶ã€‚\n\nä»¥@Configuration æ³¨è§£ä¸ºä¾‹ï¼Œå®ƒç”¨æ¥æ ‡è®°ç±»å¯ä»¥å½“åšä¸€ä¸ªbeançš„å®šä¹‰ï¼Œè¢«Spring IOCå®¹å™¨ä½¿ç”¨ã€‚\n\nå¦ä¸€ä¸ªä¾‹å­æ˜¯@Beanæ³¨è§£ï¼Œå®ƒè¡¨ç¤ºæ­¤æ–¹æ³•å°†è¦è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œä½œä¸ºä¸€ä¸ªbeanæ³¨å†Œè¿›Springåº”ç”¨ä¸Šä¸‹æ–‡ã€‚\n\n```java\n@Configuration\npublic class StudentConfig {\n    @Bean\n    public StudentBean myStudent() {\n        return new StudentBean();\n    }\n}\n```\n\n### æ€æ ·å¼€å¯æ³¨è§£è£…é…ï¼Ÿ\n\næ³¨è§£è£…é…åœ¨é»˜è®¤æƒ…å†µä¸‹æ˜¯ä¸å¼€å¯çš„ï¼Œä¸ºäº†ä½¿ç”¨æ³¨è§£è£…é…ï¼Œå¿…é¡»åœ¨Springé…ç½®æ–‡ä»¶ä¸­é…ç½® `<context:annotation-config/>`ã€‚\n\n### @Component, @Controller, @Repository, @Service æœ‰ä½•åŒºåˆ«ï¼Ÿ\n\n@Componentï¼šè¿™å°† Java ç±»æ ‡è®°ä¸º beanã€‚spring çš„ç»„ä»¶æ‰«ææœºåˆ¶å¯ä»¥å°†å…¶æ‰«æå¹¶å°†å…¶æ³¨å†Œåˆ°IoCå®¹å™¨ä¸­ã€‚\n\n@Controllerï¼šè¿™å°†ä¸€ä¸ªç±»æ ‡è®°ä¸º Spring Web MVC æ§åˆ¶å™¨ã€‚æ ‡æœ‰å®ƒçš„ Bean ä¼šè‡ªåŠ¨å¯¼å…¥åˆ° IoC å®¹å™¨ä¸­ã€‚\n\n@Serviceï¼šæ­¤æ³¨è§£æ˜¯ç»„ä»¶æ³¨è§£çš„ç‰¹åŒ–ã€‚å®ƒä¸ä¼šå¯¹ @Component æ³¨è§£æä¾›ä»»ä½•å…¶ä»–è¡Œä¸ºã€‚æ‚¨å¯ä»¥åœ¨æœåŠ¡å±‚ç±»ä¸­ä½¿ç”¨ @Service è€Œä¸æ˜¯ @Componentï¼Œå› ä¸ºå®ƒä»¥æ›´å¥½çš„æ–¹å¼æŒ‡å®šäº†æ„å›¾ã€‚\n\n@Repositoryï¼šè¿™ä¸ªæ³¨è§£æ˜¯å…·æœ‰ç±»ä¼¼ç”¨é€”å’ŒåŠŸèƒ½çš„ @Component æ³¨è§£çš„ç‰¹åŒ–ã€‚å®ƒä¸º DAO æä¾›äº†é¢å¤–çš„å¥½å¤„ã€‚å®ƒå°† DAO å¯¼å…¥ IoC å®¹å™¨ï¼Œå¹¶ä½¿æœªç»æ£€æŸ¥çš„å¼‚å¸¸æœ‰èµ„æ ¼è½¬æ¢ä¸º Spring DataAccessExceptionã€‚\n\n### @Required æ³¨è§£æœ‰ä»€ä¹ˆä½œç”¨\n\n`@Required`æ³¨è§£ä½œç”¨äºBean`setter`æ–¹æ³•ä¸Šï¼Œç”¨äºæ£€æŸ¥ä¸€ä¸ªBeançš„å±æ€§çš„å€¼**åœ¨é…ç½®æœŸé—´æ˜¯å¦è¢«èµ‹äºˆæˆ–è®¾ç½®**ï¼Œå¦‚æœæœªè¢«è®¾ç½®ï¼Œå®¹å™¨å°†æŠ›å‡ºBeanInitializationExceptionã€‚ç¤ºä¾‹ï¼š\n\n```java\npublic class Employee {\n    private String name;\n    @Required\n    public void setName(String name){\n        this.name=name;\n    }\n    public string getName(){\n        return name;\n    }\n}\n```\n\n### @Autowiredå’Œ@Resourceä¹‹é—´çš„åŒºåˆ«\n\n@Autowiredå¯ç”¨äºï¼šæ„é€ å‡½æ•°ã€æˆå‘˜å˜é‡ã€Setteræ–¹æ³•\n\n@Autowiredå’Œ@Resourceä¹‹é—´çš„åŒºåˆ«\n\n- @Autowiredé»˜è®¤æ˜¯**æŒ‰ç…§ç±»å‹è£…é…æ³¨å…¥**çš„ï¼Œé»˜è®¤æƒ…å†µä¸‹å®ƒè¦æ±‚ä¾èµ–å¯¹è±¡å¿…é¡»å­˜åœ¨ï¼ˆå¯ä»¥è®¾ç½®å®ƒrequiredå±æ€§ä¸ºfalseï¼‰ã€‚\n- @Resourceé»˜è®¤æ˜¯**æŒ‰ç…§åç§°æ¥è£…é…æ³¨å…¥**çš„ï¼Œåªæœ‰å½“æ‰¾ä¸åˆ°ä¸åç§°åŒ¹é…çš„beanæ‰ä¼šæŒ‰ç…§ç±»å‹æ¥è£…é…æ³¨å…¥ã€‚\n\n### @Qualifier æ³¨è§£æœ‰ä»€ä¹ˆä½œç”¨\n\nå½“æ‚¨åˆ›å»ºå¤šä¸ªç›¸åŒç±»å‹çš„ bean å¹¶å¸Œæœ›ä»…ä½¿ç”¨å±æ€§è£…é…å…¶ä¸­ä¸€ä¸ª bean æ—¶ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨@Qualifier æ³¨è§£å’Œ @Autowired é€šè¿‡æŒ‡å®šåº”è¯¥è£…é…å“ªä¸ªç¡®åˆ‡çš„ bean æ¥æ¶ˆé™¤æ­§ä¹‰ã€‚\n\n### @RequestMapping æ³¨è§£æœ‰ä»€ä¹ˆç”¨ï¼Ÿ\n\n@RequestMapping æ³¨è§£ç”¨äºå°†ç‰¹å®š HTTP è¯·æ±‚æ–¹æ³•æ˜ å°„åˆ°å°†å¤„ç†ç›¸åº”è¯·æ±‚çš„æ§åˆ¶å™¨ä¸­çš„ç‰¹å®šç±»/æ–¹æ³•ã€‚æ­¤æ³¨é‡Šå¯åº”ç”¨äºä¸¤ä¸ªçº§åˆ«ï¼š\n\n- ç±»çº§åˆ«ï¼šæ˜ å°„è¯·æ±‚çš„ URL\n- æ–¹æ³•çº§åˆ«ï¼šæ˜ å°„ URL ä»¥åŠ HTTP è¯·æ±‚æ–¹æ³•\n\n## Springäº‹åŠ¡\n\n### Springæ”¯æŒçš„äº‹åŠ¡ç®¡ç†ç±»å‹/äº‹åŠ¡å®ç°æ–¹å¼æœ‰å“ªäº›ï¼Ÿ\n\nSpringæ”¯æŒä¸¤ç§ç±»å‹çš„äº‹åŠ¡ç®¡ç†ï¼š\n\n**ç¼–ç¨‹å¼äº‹åŠ¡ç®¡ç†**ï¼šè¿™æ„å‘³ä½ é€šè¿‡ç¼–ç¨‹çš„æ–¹å¼ç®¡ç†äº‹åŠ¡ï¼Œç»™ä½ å¸¦æ¥æå¤§çš„çµæ´»æ€§ï¼Œä½†æ˜¯éš¾ç»´æŠ¤ã€‚\n\n**å£°æ˜å¼äº‹åŠ¡ç®¡ç†**ï¼šè¿™æ„å‘³ç€ä½ å¯ä»¥å°†ä¸šåŠ¡ä»£ç å’Œäº‹åŠ¡ç®¡ç†åˆ†ç¦»ï¼Œä½ åªéœ€ç”¨æ³¨è§£å’ŒXMLé…ç½®æ¥ç®¡ç†äº‹åŠ¡ã€‚\n\n### Springäº‹åŠ¡çš„å®ç°æ–¹å¼å’Œå®ç°åŸç†\n\nSpringäº‹åŠ¡çš„æœ¬è´¨å…¶å®å°±æ˜¯æ•°æ®åº“å¯¹äº‹åŠ¡çš„æ”¯æŒï¼Œæ²¡æœ‰æ•°æ®åº“çš„äº‹åŠ¡æ”¯æŒï¼ŒSpringæ˜¯æ— æ³•æä¾›äº‹åŠ¡åŠŸèƒ½çš„ã€‚\n\n```xml\n<!-- 2ã€é…ç½®äº‹åŠ¡çš„é€šçŸ¥ä»¥åŠäº‹åŠ¡çš„å±æ€§-->\n<tx:advice id=\"txAdvice\" transaction-manager=\"transactionManager\">\n<!-- é…ç½®äº‹åŠ¡çš„å±æ€§\nisolationï¼šç”¨äºæŒ‡å®šäº‹åŠ¡çš„éš”ç¦»çº§åˆ«ã€‚é»˜è®¤å€¼æ˜¯DEFAULTï¼Œè¡¨ç¤ºä½¿ç”¨æ•°æ®åº“çš„é»˜è®¤éš”\nç¦»çº§åˆ«ã€‚\npropagationï¼šç”¨äºæŒ‡å®šäº‹åŠ¡çš„ä¼ æ’­è¡Œä¸ºã€‚é»˜è®¤å€¼æ˜¯REQUIRED(å¢åˆ æ”¹)ï¼Œè¡¨ç¤ºä¸€å®šä¼š\næœ‰äº‹åŠ¡ã€‚æŸ¥è¯¢æ–¹æ³•å¯ä»¥é€‰æ‹©SUPPORTSã€‚\nread-onlyï¼šç”¨äºæŒ‡å®šäº‹åŠ¡æ˜¯å¦åªè¯»ã€‚åªæœ‰æŸ¥è¯¢æ–¹æ³•æ‰èƒ½è®¾ç½®ä¸ºtrueã€‚é»˜è®¤å€¼æ˜¯\nfalseï¼Œè¡¨ç¤ºè¯»å†™ã€‚\ntimeoutï¼šç”¨äºæŒ‡å®šäº‹åŠ¡çš„è¶…æ—¶æ—¶é—´ï¼Œé»˜è®¤å€¼æ˜¯-1ï¼Œè¡¨ç¤ºæ°¸ä¸è¶…æ—¶ã€‚å¦‚æœæŒ‡å®šäº†æ•°å€¼ï¼Œ\nä»¥ç§’ä¸ºå•ä½ã€‚\nrollback-forï¼šç”¨äºæŒ‡å®šä¸€ä¸ªå¼‚å¸¸ï¼Œå½“äº§ç”Ÿè¯¥å¼‚å¸¸æ—¶ï¼Œäº‹åŠ¡å›æ»šï¼Œäº§ç”Ÿå…¶ä»–å¼‚å¸¸æ—¶ï¼Œ\näº‹åŠ¡ä¸å›æ»šã€‚æ²¡æœ‰é»˜è®¤å€¼ã€‚è¡¨ç¤ºä»»ä½•å¼‚å¸¸éƒ½å›æ»šã€‚\nno-rollback-forï¼šç”¨äºæŒ‡å®šä¸€ä¸ªå¼‚å¸¸ï¼Œå½“äº§ç”Ÿè¯¥å¼‚å¸¸æ—¶ï¼Œäº‹åŠ¡ä¸å›æ»šï¼Œäº§ç”Ÿå…¶ä»–å¼‚å¸¸\næ—¶äº‹åŠ¡å›æ»šã€‚æ²¡æœ‰é»˜è®¤å€¼ã€‚è¡¨ç¤ºä»»ä½•å¼‚å¸¸éƒ½å›æ»šã€‚\n-->\n<tx:attributes>\n    <!--éæŸ¥è¯¢æ–¹æ³•-->\n    <tx:method name=\"*\" propagation=\"REQUIRED\" read-only=\"false\"/>\n    <!--æŸ¥è¯¢æ–¹æ³•-->\n    <tx:method name=\"find*\" propagation=\"SUPPORTS\" read-only=\"true\"/>\n    </tx:attributes>\n</tx:advice>\n```\n\n### è¯´ä¸€ä¸‹Springçš„äº‹åŠ¡ä¼ æ’­è¡Œä¸º\n\nspringäº‹åŠ¡çš„ä¼ æ’­è¡Œä¸ºè¯´çš„æ˜¯ï¼Œå½“å¤šä¸ªäº‹åŠ¡åŒæ—¶å­˜åœ¨çš„æ—¶å€™ï¼Œspringå¦‚ä½•å¤„ç†è¿™äº›äº‹åŠ¡çš„è¡Œä¸ºã€‚\n\n> â‘  **PROPAGATION_REQUIRED**ï¼šå¦‚æœå½“å‰æ²¡æœ‰äº‹åŠ¡ï¼Œå°±åˆ›å»ºä¸€ä¸ªæ–°äº‹åŠ¡ï¼Œå¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œå°±åŠ å…¥è¯¥äº‹åŠ¡ï¼Œè¯¥è®¾ç½®æ˜¯æœ€å¸¸ç”¨çš„è®¾ç½®ã€‚ï¼ˆé»˜è®¤å€¼ï¼Œé€‚ç”¨äºéæŸ¥è¯¢æ–¹æ³•ï¼Œå¢åˆ æ”¹ï¼‰ï¼ˆäº‹åŠ¡å­˜åœ¨å°±ç”¨ä¸å­˜åœ¨è¦åˆ›å»ºï¼‰\n> â‘¡ **PROPAGATION_SUPPORTS**ï¼šæ”¯æŒå½“å‰äº‹åŠ¡ï¼Œå¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œå°±åŠ å…¥è¯¥äº‹åŠ¡ï¼Œå¦‚æœå½“å‰ä¸å­˜åœ¨äº‹åŠ¡ï¼Œå°±ä»¥éäº‹åŠ¡æ‰§è¡Œã€‚ï¼ˆé€‚ç”¨äºæŸ¥è¯¢æ–¹æ³•ï¼‰ï¼ˆäº‹åŠ¡å­˜åœ¨å°±ç”¨ä¸å­˜åœ¨å°±ä¸ç”¨ï¼‰\n> â‘¢ PROPAGATION_MANDATORYï¼šæ”¯æŒå½“å‰äº‹åŠ¡ï¼Œå¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œå°±åŠ å…¥è¯¥äº‹åŠ¡ï¼Œå¦‚æœå½“å‰ä¸å­˜åœ¨äº‹åŠ¡ï¼Œå°±æŠ›å‡ºå¼‚å¸¸ã€‚\n> â‘£ **PROPAGATION_REQUIRES_NEW**ï¼šåˆ›å»ºæ–°äº‹åŠ¡ï¼Œæ— è®ºå½“å‰å­˜ä¸å­˜åœ¨äº‹åŠ¡ï¼Œéƒ½åˆ›å»ºæ–°äº‹åŠ¡ã€‚ï¼ˆæ°¸è¿œéƒ½è¦æ–°äº‹åŠ¡ï¼‰\n> â‘¤ PROPAGATION_NOT_SUPPORTEDï¼šä»¥éäº‹åŠ¡æ–¹å¼æ‰§è¡Œæ“ä½œï¼Œå¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œå°±æŠŠå½“å‰äº‹åŠ¡æŒ‚èµ·ã€‚\n> â‘¥ PROPAGATION_NEVERï¼šä»¥éäº‹åŠ¡æ–¹å¼æ‰§è¡Œï¼Œå¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œåˆ™æŠ›å‡ºå¼‚å¸¸ã€‚\n> â‘¦ PROPAGATION_NESTEDï¼šå¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œåˆ™åœ¨åµŒå¥—äº‹åŠ¡å†…æ‰§è¡Œã€‚å¦‚æœå½“å‰æ²¡æœ‰äº‹åŠ¡ï¼Œåˆ™æŒ‰REQUIREDå±æ€§æ‰§è¡Œã€‚\n\n### è¯´ä¸€ä¸‹ spring çš„äº‹åŠ¡éš”ç¦»ï¼Ÿ\n\nspring æœ‰äº”å¤§éš”ç¦»çº§åˆ«ï¼Œé»˜è®¤å€¼ä¸º ISOLATION_DEFAULTï¼ˆä½¿ç”¨æ•°æ®åº“çš„è®¾ç½®ï¼‰ï¼Œå…¶ä»–å››ä¸ªéš”ç¦»çº§åˆ«å’Œæ•°æ®åº“çš„éš”ç¦»çº§åˆ«ä¸€è‡´ï¼š\n\n1. ISOLATION_DEFAULTï¼šç”¨åº•å±‚æ•°æ®åº“çš„è®¾ç½®éš”ç¦»çº§åˆ«ï¼Œæ•°æ®åº“è®¾ç½®çš„æ˜¯ä»€ä¹ˆæˆ‘å°±ç”¨ä»€ä¹ˆï¼›\n2. ISOLATION_READ_UNCOMMITTEDï¼šè¯»æœªæäº¤ï¼Œæœ€ä½éš”ç¦»çº§åˆ«ã€äº‹åŠ¡æœªæäº¤å‰ï¼Œå°±å¯è¢«å…¶ä»–äº‹åŠ¡è¯»å–ï¼ˆä¼šå‡ºç°è„è¯»ã€ä¸å¯é‡å¤è¯»ã€å¹»è¯»ï¼‰ï¼›\n3. ISOLATION_READ_COMMITTEDï¼šè¯»å·²æäº¤ï¼Œä¸€ä¸ªäº‹åŠ¡æäº¤åæ‰èƒ½è¢«å…¶ä»–äº‹åŠ¡è¯»å–åˆ°ï¼ˆä¼šé€ æˆä¸å¯é‡å¤è¯»ã€å¹»è¯»ï¼‰ï¼ŒSQL server çš„é»˜è®¤çº§åˆ«ï¼›\n4. ISOLATION_REPEATABLE_READï¼šå¯é‡å¤è¯»ï¼Œä¿è¯å¤šæ¬¡è¯»å–åŒä¸€ä¸ªæ•°æ®æ—¶ï¼Œå…¶å€¼éƒ½å’Œäº‹åŠ¡å¼€å§‹æ—¶å€™çš„å†…å®¹æ˜¯ä¸€è‡´ï¼Œç¦æ­¢è¯»å–åˆ°åˆ«çš„äº‹åŠ¡æœªæäº¤çš„æ•°æ®ï¼ˆä¼šé€ æˆå¹»è¯»ï¼‰ï¼ŒMySQL çš„é»˜è®¤çº§åˆ«ï¼›\n5. ISOLATION_SERIALIZABLEï¼šåºåˆ—åŒ–ï¼Œä»£ä»·æœ€é«˜æœ€å¯é çš„éš”ç¦»çº§åˆ«ï¼Œè¯¥éš”ç¦»çº§åˆ«èƒ½é˜²æ­¢è„è¯»ã€ä¸å¯é‡å¤è¯»ã€å¹»è¯»ã€‚\n\n## Springé¢å‘åˆ‡é¢ç¼–ç¨‹(AOP)\n\n### ä»€ä¹ˆæ˜¯AOP\n\nOOP(Object-Oriented Programming)é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼Œå…è®¸å¼€å‘è€…å®šä¹‰çºµå‘çš„å…³ç³»ï¼Œä½†å¹¶é€‚ç”¨äºå®šä¹‰æ¨ªå‘çš„å…³ç³»ï¼Œå¯¼è‡´äº†å¤§é‡ä»£ç çš„é‡å¤ï¼Œè€Œä¸åˆ©äºå„ä¸ªæ¨¡å—çš„é‡ç”¨ã€‚\n\nAOP(Aspect-Oriented Programming)ï¼Œä¸€èˆ¬ç§°ä¸ºé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼Œä½œä¸ºé¢å‘å¯¹è±¡çš„ä¸€ç§è¡¥å……ï¼Œå°†ä¸€äº›**å…¬å…±è¡Œä¸ºå’Œé€»è¾‘ï¼ŒæŠ½å–å¹¶å°è£…ä¸ºä¸€ä¸ªå¯é‡ç”¨çš„æ¨¡å—ï¼Œå‡å°‘ç³»ç»Ÿä¸­çš„é‡å¤ä»£ç ï¼Œé™ä½äº†æ¨¡å—é—´çš„è€¦åˆåº¦ï¼ŒåŒæ—¶æé«˜äº†ç³»ç»Ÿçš„å¯ç»´æŠ¤æ€§ã€‚å¯ç”¨äºæƒé™è®¤è¯ã€æ—¥å¿—ã€äº‹åŠ¡å¤„ç†ç­‰**ã€‚\n\n### Spring AOP and AspectJ AOP æœ‰ä»€ä¹ˆåŒºåˆ«ï¼ŸAOP æœ‰å“ªäº›å®ç°æ–¹å¼ï¼Ÿ\n\nAOPå®ç°çš„å…³é”®åœ¨äº ä»£ç†æ¨¡å¼ï¼ŒAOPä»£ç†ä¸»è¦åˆ†ä¸ºé™æ€ä»£ç†ï¼ˆAspectJï¼‰å’ŒåŠ¨æ€ä»£ç†ï¼ˆSpring AOPï¼‰ã€‚\n\nï¼ˆ1ï¼‰AspectJ é‡‡ç”¨é™æ€ä»£ç†æ¨¡å¼ï¼Œå±äº**ç¼–è¯‘æ—¶å¢å¼º**ï¼Œä¼šåœ¨ç¼–è¯‘é˜¶æ®µç»‡å…¥åˆ‡é¢ç”Ÿæˆç›¸åº”çš„ä»£ç†å¯¹è±¡\n\nï¼ˆ2ï¼‰Spring AOP é‡‡ç”¨åŠ¨æ€ä»£ç†æ¨¡å¼ï¼Œå±äº**è¿è¡Œæ—¶å¢å¼º**ï¼Œæ¯æ¬¡è¿è¡Œæ—¶ç»‡å…¥åˆ‡é¢åœ¨å†…å­˜ä¸­ä¸´æ—¶ç”Ÿæˆç›¸åº”çš„ä»£ç†å¯¹è±¡\n\n### JDKåŠ¨æ€ä»£ç†å’ŒCGLIBåŠ¨æ€ä»£ç†çš„åŒºåˆ«\n\nJDK åŠ¨æ€ä»£ç†ä¸»è¦æ˜¯é’ˆå¯¹ç±»å®ç°äº†æŸä¸ªæ¥å£ï¼ŒAOP åˆ™ä¼šä½¿ç”¨ JDK åŠ¨æ€ä»£ç†ã€‚åŸºäºåå°„çš„æœºåˆ¶å®ç°ï¼Œç”Ÿæˆä¸€ä¸ªå®ç°è¯¥æ¥å£çš„ä¸€ä¸ªä»£ç†ç±»ï¼Œç„¶åé€šè¿‡é‡å†™æ–¹æ³•çš„æ–¹å¼ï¼Œå®ç°å¯¹ä»£ç çš„å¢å¼ºã€‚\n\nè€Œå¦‚æœæŸä¸ªç±»æ²¡æœ‰å®ç°æ¥å£ï¼ŒAOP åˆ™ä¼šä½¿ç”¨ CGLIB ä»£ç†ã€‚åº•å±‚åŸç†æ˜¯**åŸºäº asm ç¬¬ä¸‰æ–¹æ¡†æ¶**ï¼Œé€šè¿‡ä¿®æ”¹å­—èŠ‚ç ç”Ÿæˆä¸€ä¸ªå­ç±»ï¼Œç„¶åé‡å†™çˆ¶ç±»çš„æ–¹æ³•ï¼Œå®ç°å¯¹ä»£ç çš„å¢å¼ºã€‚\n\n> ä½œè€…ï¼šé˜¿é‡Œäº‘äº‘æ –å·\n>\n> é“¾æ¥ï¼šhttps://zhuanlan.zhihu.com/p/368769721\n>\n> æ¥æºï¼šçŸ¥ä¹\n>\n> è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚\n\n### è§£é‡Šä¸€ä¸‹Spring AOPé‡Œé¢çš„å‡ ä¸ªåè¯\n\nï¼ˆ1ï¼‰åˆ‡é¢ï¼ˆAspectï¼‰ï¼šåˆ‡é¢æ˜¯é€šçŸ¥å’Œåˆ‡ç‚¹çš„ç»“åˆã€‚ åœ¨Spring AOPä¸­ï¼Œåˆ‡é¢å¯ä»¥ä½¿ç”¨é€šç”¨ç±»ï¼ˆåŸºäºæ¨¡å¼çš„é£æ ¼ï¼‰ æˆ–è€…åœ¨æ™®é€šç±»ä¸­ä»¥ @AspectJ æ³¨è§£æ¥å®ç°ã€‚\n\nï¼ˆ2ï¼‰è¿æ¥ç‚¹ï¼ˆJoin pointï¼‰ï¼šæ–¹æ³•\n\nï¼ˆ3ï¼‰é€šçŸ¥ï¼ˆAdviceï¼‰ï¼šåœ¨è¦å¢å¼ºä¸Šçš„è¿æ¥ç‚¹ä¸Šè¦è¿›è¡Œæ€æ ·çš„å¢å¼º\n\nï¼ˆ4ï¼‰åˆ‡å…¥ç‚¹ï¼ˆPointcutï¼‰ï¼šå“ªäº›è¿æ¥ç‚¹éœ€è¦å¢å¼º\n\nï¼ˆ5ï¼‰ç›®æ ‡å¯¹è±¡ï¼ˆTarget Objectï¼‰ï¼š è¢«ä»£ç†ï¼ˆproxiedï¼‰ å¯¹è±¡ã€‚\n\nï¼ˆ6ï¼‰ç»‡å…¥ï¼ˆWeavingï¼‰ï¼šç»‡å…¥æ˜¯æŠŠåˆ‡é¢åº”ç”¨åˆ°ç›®æ ‡å¯¹è±¡å¹¶åˆ›å»ºæ–°çš„ä»£ç†å¯¹è±¡çš„è¿‡ç¨‹ã€‚\n\nï¼ˆ7ï¼‰Proxyï¼ˆä»£ç†ï¼‰ï¼šä¸€ä¸ªç±»è¢«AOPç»‡å…¥å¢å¼ºåï¼Œå°±äº§ç”Ÿä¸€ä¸ªç»“æœä»£ç†ç±»ã€‚\n\n> - ç¼–è¯‘æœŸï¼šåˆ‡é¢åœ¨ç›®æ ‡ç±»ç¼–è¯‘æ—¶è¢«ç»‡å…¥ã€‚AspectJçš„ç»‡å…¥ç¼–è¯‘å™¨æ˜¯ä»¥è¿™ç§æ–¹å¼ç»‡å…¥åˆ‡é¢çš„ã€‚\n> - ç±»åŠ è½½æœŸï¼šåˆ‡é¢åœ¨ç›®æ ‡ç±»åŠ è½½åˆ°JVMæ—¶è¢«ç»‡å…¥ã€‚éœ€è¦ç‰¹æ®Šçš„ç±»åŠ è½½å™¨ï¼Œå®ƒå¯ä»¥åœ¨ç›®æ ‡ç±»è¢«å¼•å…¥åº”ç”¨ä¹‹å‰å¢å¼ºè¯¥ç›®æ ‡ç±»çš„å­—èŠ‚ç ã€‚AspectJ5çš„åŠ è½½æ—¶ç»‡å…¥å°±æ”¯æŒä»¥è¿™ç§æ–¹å¼ç»‡å…¥åˆ‡é¢ã€‚\n> - è¿è¡ŒæœŸï¼šåˆ‡é¢åœ¨åº”ç”¨è¿è¡Œçš„æŸä¸ªæ—¶åˆ»è¢«ç»‡å…¥ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œåœ¨ç»‡å…¥åˆ‡é¢æ—¶ï¼ŒAOPå®¹å™¨ä¼šä¸ºç›®æ ‡å¯¹è±¡åŠ¨æ€åœ°åˆ›å»ºä¸€ä¸ªä»£ç†å¯¹è±¡ã€‚SpringAOPå°±æ˜¯ä»¥è¿™ç§æ–¹å¼ç»‡å…¥åˆ‡é¢ã€‚\n\n### Springé€šçŸ¥æœ‰å“ªäº›ç±»å‹ï¼Ÿ\n\nåœ¨AOPæœ¯è¯­ä¸­ï¼Œåˆ‡é¢çš„å·¥ä½œè¢«ç§°ä¸ºé€šçŸ¥ï¼Œå®é™…ä¸Šæ˜¯ç¨‹åºæ‰§è¡Œæ—¶è¦é€šè¿‡SpringAOPæ¡†æ¶è§¦å‘çš„ä»£ç æ®µã€‚\n\nSpringåˆ‡é¢å¯ä»¥åº”ç”¨5ç§ç±»å‹çš„é€šçŸ¥ï¼š\n\n1. å‰ç½®é€šçŸ¥ï¼ˆBeforeï¼‰ï¼šåœ¨ç›®æ ‡æ–¹æ³•è¢«è°ƒç”¨ä¹‹å‰è°ƒç”¨é€šçŸ¥åŠŸèƒ½ï¼›\n2. åç½®é€šçŸ¥ï¼ˆAfterï¼‰ï¼šåœ¨ç›®æ ‡æ–¹æ³•å®Œæˆä¹‹åè°ƒç”¨é€šçŸ¥ï¼Œæ­¤æ—¶ä¸ä¼šå…³å¿ƒæ–¹æ³•çš„è¾“å‡ºæ˜¯ä»€ä¹ˆï¼›\n3. è¿”å›é€šçŸ¥ï¼ˆAfter-returning ï¼‰ï¼šåœ¨ç›®æ ‡æ–¹æ³•æˆåŠŸæ‰§è¡Œä¹‹åè°ƒç”¨é€šçŸ¥ï¼›\n4. å¼‚å¸¸é€šçŸ¥ï¼ˆAfter-throwingï¼‰ï¼šåœ¨ç›®æ ‡æ–¹æ³•æŠ›å‡ºå¼‚å¸¸åè°ƒç”¨é€šçŸ¥ï¼›\n5. ç¯ç»•é€šçŸ¥ï¼ˆAroundï¼‰ï¼šé€šçŸ¥åŒ…è£¹äº†è¢«é€šçŸ¥çš„æ–¹æ³•ï¼Œåœ¨è¢«é€šçŸ¥çš„æ–¹æ³•è°ƒç”¨ä¹‹å‰å’Œè°ƒç”¨ä¹‹åæ‰§è¡Œè‡ªå®šä¹‰çš„è¡Œä¸ºã€‚\n\n> åŒä¸€ä¸ªaspectï¼Œä¸åŒadviceçš„æ‰§è¡Œé¡ºåºï¼š\n>\n> â‘ æ²¡æœ‰å¼‚å¸¸æƒ…å†µä¸‹çš„æ‰§è¡Œé¡ºåºï¼š\n>\n> around before advice\tæ–¹æ³•è°ƒç”¨ä¹‹å‰è‡ªå®šä¹‰è¡Œä¸º\n> before advice\n> target method æ‰§è¡Œ\n> around after advice\tæ–¹æ³•è°ƒç”¨åè‡ªå®šä¹‰è¡Œä¸º\n> after advice\n> afterReturning\n>\n> â‘¡æœ‰å¼‚å¸¸æƒ…å†µä¸‹çš„æ‰§è¡Œé¡ºåºï¼š\n>\n> around before advice\n> before advice\n> target method æ‰§è¡Œ\n> around after advice\n> after advice\n> afterThrowing:å¼‚å¸¸å‘ç”Ÿ\n> Java.lang.RuntimeException: å¼‚å¸¸å‘ç”Ÿ\n\n### ä»€ä¹ˆæ˜¯åˆ‡é¢ Aspectï¼Ÿ\n\naspect ç”± pointcount å’Œ advice ç»„æˆï¼Œåˆ‡é¢æ˜¯é€šçŸ¥å’Œåˆ‡ç‚¹çš„ç»“åˆã€‚ \nAOP çš„å·¥ä½œé‡å¿ƒåœ¨äºå¦‚ä½•å°†å¢å¼ºç¼–ç»‡ç›®æ ‡å¯¹è±¡çš„è¿æ¥ç‚¹ä¸Š, è¿™é‡ŒåŒ…å«ä¸¤ä¸ªå·¥ä½œ:  \n\n- å¦‚ä½•é€šè¿‡ pointcut å’Œ advice å®šä½åˆ°ç‰¹å®šçš„ joinpoint ä¸Š\n- å¦‚ä½•åœ¨ advice ä¸­ç¼–å†™åˆ‡é¢ä»£ç \n\nå¯ä»¥ç®€å•åœ°è®¤ä¸º, ä½¿ç”¨ @Aspect æ³¨è§£çš„ç±»å°±æ˜¯åˆ‡é¢\n\n![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/TyporaNotes2020021212264438.png)\n","slug":"Javaå…«è‚¡æ–‡ - Spring","published":1,"updated":"2023-01-23T08:47:15.868Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cld8kfsiv000ezvt8dj5yb1a7","content":"<blockquote>\n<p>æ•´ç†çš„Springæ¡†æ¶ç›¸å…³çŸ¥è¯†ç‚¹å’Œé¢è¯•é¢˜ï¼Œéƒ¨åˆ†å†…å®¹æ‘˜è‡ªç½‘ç»œï¼Œå¦‚æœ‰ä¾µæƒè¯·è”ç³»æˆ‘ï½\t<span id=\"more\"></span></p>\n</blockquote>\n<h2 id=\"Springæ¦‚è¿°\"><a href=\"#Springæ¦‚è¿°\" class=\"headerlink\" title=\"Springæ¦‚è¿°\"></a>Springæ¦‚è¿°</h2><h3 id=\"ä»€ä¹ˆæ˜¯spring\"><a href=\"#ä»€ä¹ˆæ˜¯spring\" class=\"headerlink\" title=\"ä»€ä¹ˆæ˜¯spring?\"></a>ä»€ä¹ˆæ˜¯spring?</h3><p>Springæ˜¯<strong>ä¸€ä¸ªè½»é‡çº§Javaå¼€å‘æ¡†æ¶</strong>ï¼Œç›®çš„æ˜¯ä¸ºäº†è§£å†³å¼€å‘ä¸­çš„<strong>ä¸šåŠ¡é€»è¾‘å±‚å’Œå…¶ä»–å„å±‚çš„è€¦åˆé—®é¢˜</strong>ï¼Œç®€åŒ–Javaå¼€å‘ã€‚</p>\n<h3 id=\"Springæ¡†æ¶çš„æ ¸å¿ƒæ˜¯ä»€ä¹ˆ\"><a href=\"#Springæ¡†æ¶çš„æ ¸å¿ƒæ˜¯ä»€ä¹ˆ\" class=\"headerlink\" title=\"Springæ¡†æ¶çš„æ ¸å¿ƒæ˜¯ä»€ä¹ˆ\"></a>Springæ¡†æ¶çš„æ ¸å¿ƒæ˜¯ä»€ä¹ˆ</h3><p><strong>Springæ¡†æ¶çš„æ ¸å¿ƒ</strong>ï¼šIoCå®¹å™¨å’ŒAOPæ¨¡å—ã€‚<br>é€šè¿‡IoCå®¹å™¨ç®¡ç†Java Beanå¯¹è±¡åŠå…¶ç”Ÿå‘½å‘¨æœŸä»¥åŠä»–ä»¬ä¹‹é—´çš„è€¦åˆå…³ç³»ï¼›<br>é€šè¿‡AOPå°†ä¸€äº›å…¬å…±è¡Œä¸ºå’Œé€»è¾‘ï¼ŒæŠ½å–å¹¶å°è£…ä¸ºä¸€ä¸ªå¯é‡ç”¨çš„æ¨¡å—ï¼Œå‡å°‘ç³»ç»Ÿä¸­çš„é‡å¤ä»£ç ï¼Œé™ä½æ¨¡å—é—´çš„è€¦åˆåº¦</p>\n<h3 id=\"Springçš„ä¼˜ç¼ºç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ\"><a href=\"#Springçš„ä¼˜ç¼ºç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ\" class=\"headerlink\" title=\"Springçš„ä¼˜ç¼ºç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ\"></a>Springçš„ä¼˜ç¼ºç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ</h3><p>ä¼˜ç‚¹</p>\n<ul>\n<li><p>æ–¹ä¾¿è§£è€¦ï¼Œç®€åŒ–å¼€å‘ï¼ˆ<strong>IoC</strong>ï¼‰</p>\n<p>  Springå°±æ˜¯ä¸€ä¸ªå¤§å·¥å‚ï¼Œå¯ä»¥å°†æ‰€æœ‰å¯¹è±¡çš„åˆ›å»ºå’Œä¾èµ–å…³ç³»çš„ç»´æŠ¤ï¼Œäº¤ç»™Springç®¡ç†ã€‚</p>\n</li>\n<li><p>AOPç¼–ç¨‹çš„æ”¯æŒï¼ˆ<strong>AOP</strong>ï¼‰</p>\n<p>  Springæä¾›é¢å‘åˆ‡é¢ç¼–ç¨‹ï¼Œå¯ä»¥æ–¹ä¾¿çš„å®ç°å¯¹ç¨‹åºè¿›è¡Œæƒé™æ‹¦æˆªã€è¿è¡Œç›‘æ§ç­‰åŠŸèƒ½ã€‚</p>\n</li>\n<li><p>å£°æ˜å¼äº‹åŠ¡çš„æ”¯æŒï¼ˆ<strong>äº‹åŠ¡</strong>ï¼‰</p>\n<p>  åªéœ€è¦é€šè¿‡é…ç½®å°±å¯ä»¥å®Œæˆå¯¹äº‹åŠ¡çš„ç®¡ç†ï¼Œè€Œæ— éœ€æ‰‹åŠ¨ç¼–ç¨‹ã€‚</p>\n</li>\n<li><p>æ–¹ä¾¿é›†æˆå„ç§ä¼˜ç§€æ¡†æ¶ï¼ˆ<strong>é›†æˆ</strong>ï¼‰</p>\n<p>  Springä¸æ’æ–¥å„ç§ä¼˜ç§€çš„å¼€æºæ¡†æ¶ï¼Œå…¶å†…éƒ¨æä¾›äº†å¯¹å„ç§ä¼˜ç§€æ¡†æ¶çš„ç›´æ¥æ”¯æŒï¼ˆå¦‚ï¼šStrutsã€Hibernateã€MyBatisç­‰ï¼‰ã€‚</p>\n</li>\n</ul>\n<p>ç¼ºç‚¹</p>\n<ul>\n<li>Spring<strong>ä¾èµ–åå°„ï¼Œåå°„å½±å“æ€§èƒ½</strong></li>\n</ul>\n<h3 id=\"Spring-æ¡†æ¶ä¸­éƒ½ç”¨åˆ°äº†å“ªäº›è®¾è®¡æ¨¡å¼ï¼Ÿ\"><a href=\"#Spring-æ¡†æ¶ä¸­éƒ½ç”¨åˆ°äº†å“ªäº›è®¾è®¡æ¨¡å¼ï¼Ÿ\" class=\"headerlink\" title=\"Spring æ¡†æ¶ä¸­éƒ½ç”¨åˆ°äº†å“ªäº›è®¾è®¡æ¨¡å¼ï¼Ÿ\"></a>Spring æ¡†æ¶ä¸­éƒ½ç”¨åˆ°äº†å“ªäº›è®¾è®¡æ¨¡å¼ï¼Ÿ</h3><ol>\n<li>å·¥å‚æ¨¡å¼ï¼šé€šè¿‡ BeanFactory å’Œ ApplicationContext æ¥ç®¡ç† Bean å¯¹è±¡ã€‚</li>\n<li>å•ä¾‹æ¨¡å¼ï¼šBeané»˜è®¤ä¸ºå•ä¾‹æ¨¡å¼ã€‚</li>\n<li>ä»£ç†æ¨¡å¼ï¼šSpringçš„AOPåŠŸèƒ½ç”¨åˆ°äº†åŸºäºæ¥å£çš„JDKçš„åŠ¨æ€ä»£ç†å’ŒåŸºäºå­ç±»çš„CGLIBåŠ¨æ€ä»£ç†ï¼›</li>\n</ol>\n<h3 id=\"Springæ¡†æ¶ä¸­æœ‰å“ªäº›ä¸åŒç±»å‹çš„äº‹ä»¶\"><a href=\"#Springæ¡†æ¶ä¸­æœ‰å“ªäº›ä¸åŒç±»å‹çš„äº‹ä»¶\" class=\"headerlink\" title=\"Springæ¡†æ¶ä¸­æœ‰å“ªäº›ä¸åŒç±»å‹çš„äº‹ä»¶\"></a>Springæ¡†æ¶ä¸­æœ‰å“ªäº›ä¸åŒç±»å‹çš„äº‹ä»¶</h3><p><strong>Springçš„ApplicationContext æä¾›äº†æ”¯æŒäº‹ä»¶å’Œä»£ç ä¸­ç›‘å¬å™¨çš„åŠŸèƒ½ã€‚</strong>  </p>\n<p>å¦‚æœä¸€ä¸ªbeanå®ç°äº†<code>ApplicationListener</code>æ¥å£ï¼Œå½“ä¸€ä¸ª<code>ApplicationEvent</code> è¢«å‘å¸ƒä»¥åï¼Œbeanä¼šè‡ªåŠ¨è¢«é€šçŸ¥ã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public <span class=\"keyword\">class</span> <span class=\"title class_\">AllApplicationEventListener</span> implements <span class=\"title class_\">ApplicationListener</span> &lt; <span class=\"title class_\">ApplicationEvent</span> &gt;&#123;</span><br><span class=\"line\">    @<span class=\"title class_\">Override</span></span><br><span class=\"line\">    public <span class=\"keyword\">void</span> <span class=\"title function_\">onApplicationEvent</span>(<span class=\"params\">ApplicationEvent applicationEvent</span>)&#123;</span><br><span class=\"line\">        <span class=\"comment\">//process event</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><strong>Spring æä¾›äº†ä»¥ä¸‹5ç§æ ‡å‡†çš„äº‹ä»¶ï¼š</strong></p>\n<ul>\n<li>ä¸Šä¸‹æ–‡æ›´æ–°äº‹ä»¶ï¼ˆContextRefreshedEventï¼‰ï¼šè¯¥äº‹ä»¶ä¼šåœ¨ApplicationContextè¢«åˆå§‹åŒ–æˆ–è€…æ›´æ–°æ—¶å‘å¸ƒã€‚ä¹Ÿå¯ä»¥åœ¨è°ƒç”¨<code>ConfigurableApplicationContext</code> æ¥å£ä¸­çš„<code>refresh()</code>æ–¹æ³•æ—¶è¢«è§¦å‘ã€‚</li>\n<li>ä¸Šä¸‹æ–‡å¼€å§‹äº‹ä»¶ï¼ˆContextStartedEventï¼‰ï¼šå½“å®¹å™¨è°ƒç”¨<code>ConfigurableApplicationContext</code>çš„<code>Start()</code>æ–¹æ³•å¼€å§‹&#x2F;é‡æ–°å¼€å§‹å®¹å™¨æ—¶è§¦å‘è¯¥äº‹ä»¶ã€‚</li>\n<li>ä¸Šä¸‹æ–‡åœæ­¢äº‹ä»¶ï¼ˆContextStoppedEventï¼‰ï¼šå½“å®¹å™¨è°ƒç”¨<code>ConfigurableApplicationContext</code>çš„<code>Stop()</code>æ–¹æ³•åœæ­¢å®¹å™¨æ—¶è§¦å‘è¯¥äº‹ä»¶ã€‚</li>\n<li>ä¸Šä¸‹æ–‡å…³é—­äº‹ä»¶ï¼ˆContextClosedEventï¼‰ï¼šå½“<code>ApplicationContext</code>è¢«å…³é—­æ—¶è§¦å‘è¯¥äº‹ä»¶ã€‚å®¹å™¨è¢«å…³é—­æ—¶ï¼Œå…¶ç®¡ç†çš„æ‰€æœ‰å•ä¾‹Beanéƒ½è¢«é”€æ¯ã€‚</li>\n<li>è¯·æ±‚å¤„ç†äº‹ä»¶ï¼ˆRequestHandledEventï¼‰ï¼šåœ¨Webåº”ç”¨ä¸­ï¼Œå½“ä¸€ä¸ªhttpè¯·æ±‚ï¼ˆrequestï¼‰ç»“æŸè§¦å‘è¯¥äº‹ä»¶ã€‚</li>\n</ul>\n<h3 id=\"Spring-åº”ç”¨ç¨‹åºæœ‰å“ªäº›ä¸åŒç»„ä»¶ï¼Ÿ\"><a href=\"#Spring-åº”ç”¨ç¨‹åºæœ‰å“ªäº›ä¸åŒç»„ä»¶ï¼Ÿ\" class=\"headerlink\" title=\"Spring åº”ç”¨ç¨‹åºæœ‰å“ªäº›ä¸åŒç»„ä»¶ï¼Ÿ\"></a>Spring åº”ç”¨ç¨‹åºæœ‰å“ªäº›ä¸åŒç»„ä»¶ï¼Ÿ</h3><p>Spring åº”ç”¨ä¸€èˆ¬æœ‰ä»¥ä¸‹ç»„ä»¶ï¼š</p>\n<ul>\n<li>Bean ç±» - å®ƒåŒ…å«å±æ€§ï¼Œsetter å’Œ getter æ–¹æ³•ï¼Œå‡½æ•°ç­‰ã€‚</li>\n<li>Bean é…ç½®æ–‡ä»¶ - åŒ…å«ç±»çš„ä¿¡æ¯ä»¥åŠå¦‚ä½•é…ç½®å®ƒä»¬ã€‚</li>\n<li>æ¥å£ - å¤„ç† Bean </li>\n<li>ç”¨æˆ·ç¨‹åº - å®ƒä½¿ç”¨æ¥å£ã€‚</li>\n</ul>\n<h2 id=\"Springæ§åˆ¶åè½¬-IOC\"><a href=\"#Springæ§åˆ¶åè½¬-IOC\" class=\"headerlink\" title=\"Springæ§åˆ¶åè½¬(IOC)\"></a>Springæ§åˆ¶åè½¬(IOC)</h2><h3 id=\"ä»€ä¹ˆæ˜¯Spring-IOC-å®¹å™¨ï¼Ÿ\"><a href=\"#ä»€ä¹ˆæ˜¯Spring-IOC-å®¹å™¨ï¼Ÿ\" class=\"headerlink\" title=\"ä»€ä¹ˆæ˜¯Spring IOC å®¹å™¨ï¼Ÿ\"></a>ä»€ä¹ˆæ˜¯Spring IOC å®¹å™¨ï¼Ÿ</h3><p>Spring IOCï¼ˆæ§åˆ¶åè½¬ï¼‰ æŠŠç»„ä»¶å¯¹è±¡æ§åˆ¶æƒäº¤ç»™å®¹å™¨ï¼Œå®¹å™¨è´Ÿè´£åˆ›å»ºå¯¹è±¡ï¼Œé…ç½®å¯¹è±¡ï¼ˆé€šè¿‡ä¾èµ–æ³¨å…¥ï¼ˆDIï¼‰ï¼Œå¹¶ä¸”ç®¡ç†è¿™äº›å¯¹è±¡çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸã€‚IoCè®©ç›¸äº’åä½œçš„ç»„ä»¶ä¿æŒæ¾è€¦åˆã€‚</p>\n<h3 id=\"Spring-IoC-çš„å®ç°æœºåˆ¶\"><a href=\"#Spring-IoC-çš„å®ç°æœºåˆ¶\" class=\"headerlink\" title=\"Spring IoC çš„å®ç°æœºåˆ¶\"></a>Spring IoC çš„å®ç°æœºåˆ¶</h3><p>Spring ä¸­çš„ IoC çš„å®ç°åŸç†å°±æ˜¯<strong>å·¥å‚æ¨¡å¼åŠ åå°„</strong>ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">interface</span> <span class=\"title class_\">Fruit</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">void</span> <span class=\"title function_\">eat</span><span class=\"params\">()</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Apple</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">Fruit</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">eat</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;Apple&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Orange</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">Fruit</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">eat</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;Orange&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Factory</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> Fruit <span class=\"title function_\">getInstance</span><span class=\"params\">(String className)</span> &#123;\t<span class=\"comment\">// ä½¿ç”¨åå°„ï¼Œç”¨å­—ç¬¦ä¸²è·å–åˆ°å®ä¾‹</span></span><br><span class=\"line\">        Fruit f=<span class=\"literal\">null</span>;</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            f = (Fruit) Class.forName(className).newInstance();</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (Exception e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> f;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Client</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] a)</span> &#123;</span><br><span class=\"line\">        <span class=\"type\">Fruit</span> <span class=\"variable\">f</span> <span class=\"operator\">=</span> Factory.getInstance(<span class=\"string\">&quot;io.github.dunwu.spring.Apple&quot;</span>);</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(f != <span class=\"literal\">null</span>)&#123;</span><br><span class=\"line\">            f.eat();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"BeanFactory-å’Œ-ApplicationContextæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\"><a href=\"#BeanFactory-å’Œ-ApplicationContextæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\" class=\"headerlink\" title=\"BeanFactory å’Œ ApplicationContextæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\"></a>BeanFactory å’Œ ApplicationContextæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h3><p>BeanFactoryå’ŒApplicationContextæ˜¯Springçš„ä¸¤å¤§æ ¸å¿ƒæ¥å£ï¼Œéƒ½å¯ä»¥å½“åšSpringçš„å®¹å™¨ã€‚<br>ApplicationContextæ˜¯BeanFactoryçš„å­æ¥å£ã€‚</p>\n<ol>\n<li>ä¾èµ–å…³ç³»</li>\n</ol>\n<p>BeanFactoryï¼šæ˜¯Springé‡Œé¢æœ€åº•å±‚çš„æ¥å£ï¼ŒåŒ…å«äº†å„ç§Beançš„å®šä¹‰ï¼Œè¯»å–beané…ç½®æ–‡æ¡£ï¼Œç®¡ç†beançš„åŠ è½½ã€å®ä¾‹åŒ–ï¼Œæ§åˆ¶beançš„ç”Ÿå‘½å‘¨æœŸï¼Œç»´æŠ¤beanä¹‹é—´çš„ä¾èµ–å…³ç³»ã€‚</p>\n<p>ApplicationContextæ¥å£ä½œä¸ºBeanFactoryçš„å­æ¥å£ï¼Œé™¤äº†æä¾›BeanFactoryæ‰€å…·æœ‰çš„åŠŸèƒ½å¤–ï¼Œè¿˜æä¾›äº†æ›´å®Œæ•´çš„æ¡†æ¶åŠŸèƒ½ï¼š</p>\n<ul>\n<li>æ”¯æŒå›½é™…åŒ–ã€‚</li>\n<li>æ”¯æŒè®¿é—®æ–‡ä»¶èµ„æº</li>\n<li>æ”¯æŒäº‹ä»¶å‘å¸ƒé€šçŸ¥</li>\n<li>åŒæ—¶åŠ è½½å¤šä¸ªé…ç½®æ–‡ä»¶ã€‚</li>\n</ul>\n<p>é…ç½®æµç¨‹ï¼š</p>\n<ol>\n<li>åŠ è½½é…ç½®æ–‡ä»¶ï¼Œè§£ææˆ BeanDefinition æ”¾åœ¨ Map é‡Œï¼Œmapä¸­å­˜æ”¾<code>&lt;BeanNameï¼ŒClasså¯¹è±¡&gt;</code>çš„æ˜ å°„</li>\n<li>è°ƒç”¨ getBean çš„æ—¶å€™ï¼Œä» BeanDefinition æ‰€å±çš„ Map é‡Œï¼Œæ‹¿å‡º Class å¯¹è±¡ä½¿ç”¨åå°„è¿›è¡Œå®ä¾‹åŒ–ï¼ŒåŒæ—¶ï¼Œå¦‚æœæœ‰ä¾èµ–å…³ç³»ï¼Œå°†é€’å½’è°ƒç”¨ getBean æ–¹æ³• â€”â€” å®Œæˆä¾èµ–æ³¨å…¥ã€‚</li>\n<li>åŠ è½½æ–¹å¼</li>\n</ol>\n<p><strong>BeanFactroy</strong>é‡‡ç”¨çš„æ˜¯<strong>å»¶è¿ŸåŠ è½½</strong>å½¢å¼æ¥æ³¨å…¥Beançš„ï¼Œå³åªæœ‰åœ¨ä½¿ç”¨åˆ°æŸä¸ªBeanæ—¶(è°ƒç”¨getBean())ï¼Œæ‰å¯¹è¯¥Beanè¿›è¡ŒåŠ è½½å®ä¾‹åŒ–ã€‚è¿™æ ·ï¼Œæˆ‘ä»¬å°±ä¸èƒ½å‘ç°ä¸€äº›å­˜åœ¨çš„Springçš„é…ç½®é—®é¢˜ã€‚å¦‚æœBeançš„æŸä¸€ä¸ªå±æ€§æ²¡æœ‰æ³¨å…¥æˆ–è€…æ˜¯å±æ€§æ³¨å…¥é”™è¯¯ï¼ŒBeanFacotryåŠ è½½åï¼Œç›´è‡³ç¬¬ä¸€æ¬¡ä½¿ç”¨è°ƒç”¨getBeanæ–¹æ³•æ‰ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚</p>\n<p><strong>ApplicationContext</strong>ï¼Œå®ƒæ˜¯åœ¨å®¹å™¨å¯åŠ¨æ—¶ï¼Œ<strong>ä¸€æ¬¡æ€§åˆ›å»º</strong>äº†æ‰€æœ‰çš„Beanã€‚è¿™æ ·ï¼Œåœ¨å®¹å™¨å¯åŠ¨æ—¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥<strong>å‘ç°Springä¸­å­˜åœ¨çš„é…ç½®é”™è¯¯</strong>ï¼Œè¿™æ ·æœ‰åˆ©äºæ£€æŸ¥æ‰€ä¾èµ–å±æ€§æ˜¯å¦æ³¨å…¥ã€‚ ApplicationContextå¯åŠ¨åé¢„è½½å…¥æ‰€æœ‰çš„å•å®ä¾‹Beanï¼Œé€šè¿‡é¢„è½½å…¥å•å®ä¾‹bean ,ç¡®ä¿å½“ä½ éœ€è¦çš„æ—¶å€™ï¼Œä½ å°±ä¸ç”¨ç­‰å¾…ï¼Œå› ä¸ºå®ƒä»¬å·²ç»åˆ›å»ºå¥½äº†ã€‚</p>\n<p>ç”±äºåœ¨å®¹å™¨å¯åŠ¨æ—¶ä¸€æ¬¡æ€§åˆ›å»ºæ‰€æœ‰çš„Beanï¼Œå› æ­¤ApplicationContext æ›´åŠ å ç”¨å†…å­˜ç©ºé—´ï¼Œå½“é…ç½®çš„Beanæ¯”è¾ƒå¤šæ—¶ï¼Œç¨‹åºå¯åŠ¨è¾ƒæ…¢ã€‚</p>\n<h4 id=\"â­BeanFactoryå’ŒFactoryBeanåŒºåˆ«ï¼Ÿ\"><a href=\"#â­BeanFactoryå’ŒFactoryBeanåŒºåˆ«ï¼Ÿ\" class=\"headerlink\" title=\"â­BeanFactoryå’ŒFactoryBeanåŒºåˆ«ï¼Ÿ\"></a>â­BeanFactoryå’ŒFactoryBeanåŒºåˆ«ï¼Ÿ</h4><p>BeanFactoryï¼šæ˜¯spring IoCå®¹å™¨çš„åº•å±‚æ¥å£ï¼Œå¯ä»¥ç”¨æ¥ç®¡ç†beanåŠå…¶ç”Ÿå‘½å‘¨æœŸï¼›</p>\n<p>FactoryBeanï¼šå¦‚æœæŸä¸ª bean å®ç°äº†FactoryBeanè¿™ä¸ªæ¥å£ï¼Œé€šè¿‡ getBean æ–¹æ³•æ¥è·å– bean çš„æ—¶å€™ï¼Œå¹¶ä¸æ˜¯è¿”å›è‡ªå·±çš„å®ä¾‹ï¼Œè€Œæ˜¯è¿”å›å…¶ getObject() æ–¹æ³•çš„è¿”å›å€¼</p>\n<h3 id=\"ApplicationContexté€šå¸¸çš„å®ç°æ˜¯ä»€ä¹ˆï¼Ÿ\"><a href=\"#ApplicationContexté€šå¸¸çš„å®ç°æ˜¯ä»€ä¹ˆï¼Ÿ\" class=\"headerlink\" title=\"ApplicationContexté€šå¸¸çš„å®ç°æ˜¯ä»€ä¹ˆï¼Ÿ\"></a>ApplicationContexté€šå¸¸çš„å®ç°æ˜¯ä»€ä¹ˆï¼Ÿ</h3><p><strong>FileSystemXmlApplicationContext</strong> ï¼šæ­¤å®¹å™¨ä»ä¸€ä¸ªXMLæ–‡ä»¶ä¸­åŠ è½½beansçš„å®šä¹‰ï¼ŒXML Bean é…ç½®æ–‡ä»¶çš„å…¨è·¯å¾„åå¿…é¡»æä¾›ç»™å®ƒçš„æ„é€ å‡½æ•°ã€‚</p>\n<p><strong>ClassPathXmlApplicationContext</strong>ï¼šæ­¤å®¹å™¨ä¹Ÿä»ä¸€ä¸ªXMLæ–‡ä»¶ä¸­åŠ è½½beansçš„å®šä¹‰ï¼Œè¿™é‡Œï¼Œä½ éœ€è¦æ­£ç¡®è®¾ç½®classpathå› ä¸ºè¿™ä¸ªå®¹å™¨å°†åœ¨classpathé‡Œæ‰¾beané…ç½®ã€‚</p>\n<p><strong>AnnotationConfigApplicationContext</strong>ï¼šå®ƒæ˜¯ç”¨äºè¯»å–æ³¨è§£åˆ›å»ºå®¹å™¨çš„</p>\n<h3 id=\"ä»€ä¹ˆæ˜¯Springçš„ä¾èµ–æ³¨å…¥ï¼Ÿ\"><a href=\"#ä»€ä¹ˆæ˜¯Springçš„ä¾èµ–æ³¨å…¥ï¼Ÿ\" class=\"headerlink\" title=\"ä»€ä¹ˆæ˜¯Springçš„ä¾èµ–æ³¨å…¥ï¼Ÿ\"></a>ä»€ä¹ˆæ˜¯Springçš„ä¾èµ–æ³¨å…¥ï¼Ÿ</h3><p>å…·ä½“å«ä¹‰æ˜¯:å½“æŸä¸ªè°ƒç”¨è€…éœ€è¦å¦ä¸€ä¸ªè¢«è°ƒç”¨è€…çš„ååŠ©æ—¶ï¼Œåœ¨ ä¼ ç»Ÿçš„ç¨‹åºè®¾è®¡è¿‡ç¨‹ä¸­ï¼Œé€šå¸¸ç”±è°ƒç”¨è€…æ¥åˆ›å»ºè¢«è°ƒç”¨è€…çš„å®ä¾‹ã€‚ä½†åœ¨Springé‡Œï¼Œåˆ›å»ºè¢«è°ƒç”¨è€…çš„å·¥ä½œä¸å†ç”±è°ƒç”¨è€…æ¥å®Œæˆï¼Œå› æ­¤ç§°ä¸ºæ§åˆ¶åè½¬ï¼›åˆ›å»ºè¢«è°ƒç”¨è€… å®ä¾‹çš„å·¥ä½œé€šå¸¸ç”±Springå®¹å™¨æ¥å®Œæˆï¼Œç„¶åæ³¨å…¥è°ƒç”¨è€…ï¼Œå› æ­¤ä¹Ÿç§°ä¸ºä¾èµ–æ³¨å…¥ã€‚</p>\n<h3 id=\"ä¾èµ–æ³¨å…¥æœ‰ä»€ä¹ˆä¼˜åŠ¿\"><a href=\"#ä¾èµ–æ³¨å…¥æœ‰ä»€ä¹ˆä¼˜åŠ¿\" class=\"headerlink\" title=\"ä¾èµ–æ³¨å…¥æœ‰ä»€ä¹ˆä¼˜åŠ¿\"></a>ä¾èµ–æ³¨å…¥æœ‰ä»€ä¹ˆä¼˜åŠ¿</h3><p>ä¾èµ–æ³¨å…¥ä¹‹æ‰€ä»¥æ›´æµè¡Œæ˜¯å› ä¸ºå®ƒæ˜¯ä¸€ç§æ›´å¯å–çš„æ–¹å¼ï¼šè®©å®¹å™¨å…¨æƒè´Ÿè´£ä¾èµ–æŸ¥è¯¢ï¼Œå—ç®¡ç»„ä»¶åªéœ€è¦æš´éœ²JavaBeançš„setteræ–¹æ³•æˆ–è€…å¸¦å‚æ•°çš„æ„é€ å™¨æˆ–è€…æ¥å£ï¼Œä½¿å®¹å™¨å¯ä»¥åœ¨åˆå§‹åŒ–æ—¶ç»„è£…å¯¹è±¡çš„ä¾èµ–å…³ç³»ã€‚å…¶ä¸ä¾èµ–æŸ¥æ‰¾æ–¹å¼ç›¸æ¯”ï¼Œä¸»è¦ä¼˜åŠ¿ä¸ºï¼š</p>\n<ul>\n<li>æŸ¥æ‰¾å®šä½æ“ä½œä¸åº”ç”¨ä»£ç å®Œå…¨æ— å…³ã€‚</li>\n<li>ä¸ä¾èµ–äºå®¹å™¨çš„APIï¼Œå¯ä»¥å¾ˆå®¹æ˜“åœ°åœ¨ä»»ä½•å®¹å™¨ä»¥å¤–ä½¿ç”¨åº”ç”¨å¯¹è±¡ã€‚</li>\n<li>ä¸éœ€è¦ç‰¹æ®Šçš„æ¥å£ï¼Œç»å¤§å¤šæ•°å¯¹è±¡å¯ä»¥åšåˆ°å®Œå…¨ä¸å¿…ä¾èµ–å®¹å™¨ã€‚</li>\n</ul>\n<h3 id=\"æœ‰å“ªäº›ä¸åŒç±»å‹çš„ä¾èµ–æ³¨å…¥å®ç°æ–¹å¼ï¼Ÿ\"><a href=\"#æœ‰å“ªäº›ä¸åŒç±»å‹çš„ä¾èµ–æ³¨å…¥å®ç°æ–¹å¼ï¼Ÿ\" class=\"headerlink\" title=\"æœ‰å“ªäº›ä¸åŒç±»å‹çš„ä¾èµ–æ³¨å…¥å®ç°æ–¹å¼ï¼Ÿ\"></a>æœ‰å“ªäº›ä¸åŒç±»å‹çš„ä¾èµ–æ³¨å…¥å®ç°æ–¹å¼ï¼Ÿ</h3><p><strong>æ„é€ å™¨ä¾èµ–æ³¨å…¥</strong>ï¼šæ„é€ å™¨ä¾èµ–æ³¨å…¥é€šè¿‡å®¹å™¨è§¦å‘ä¸€ä¸ªç±»çš„æ„é€ å™¨æ¥å®ç°çš„ï¼Œè¯¥ç±»æœ‰ä¸€ç³»åˆ—å‚æ•°ï¼Œæ¯ä¸ªå‚æ•°ä»£è¡¨ä¸€ä¸ªå¯¹å…¶ä»–ç±»çš„ä¾èµ–ã€‚</p>\n<p><strong>Setteræ–¹æ³•æ³¨å…¥</strong>ï¼šSetteræ–¹æ³•æ³¨å…¥æ˜¯å®¹å™¨é€šè¿‡è°ƒç”¨æ— å‚æ„é€ å™¨æˆ–æ— å‚staticå·¥å‚ æ–¹æ³•å®ä¾‹åŒ–beanä¹‹åï¼Œè°ƒç”¨è¯¥beançš„setteræ–¹æ³•ï¼Œå³å®ç°äº†åŸºäºsetterçš„ä¾èµ–æ³¨å…¥ã€‚</p>\n<h3 id=\"æ„é€ å™¨ä¾èµ–æ³¨å…¥å’Œ-setteræ–¹æ³•æ³¨å…¥çš„åŒºåˆ«\"><a href=\"#æ„é€ å™¨ä¾èµ–æ³¨å…¥å’Œ-setteræ–¹æ³•æ³¨å…¥çš„åŒºåˆ«\" class=\"headerlink\" title=\"æ„é€ å™¨ä¾èµ–æ³¨å…¥å’Œ setteræ–¹æ³•æ³¨å…¥çš„åŒºåˆ«\"></a>æ„é€ å™¨ä¾èµ–æ³¨å…¥å’Œ setteræ–¹æ³•æ³¨å…¥çš„åŒºåˆ«</h3><p>ï¼ˆéƒ¨åˆ†æ³¨å…¥ï¼‰åœ¨setteræ³¨å…¥,å¯ä»¥å°†ä¾èµ–é¡¹éƒ¨åˆ†æ³¨å…¥,æ„é€ æ–¹æ³•æ³¨å…¥ä¸èƒ½éƒ¨åˆ†æ³¨å…¥ã€‚</p>\n<p>ï¼ˆå±æ€§è¦†ç›–ï¼‰å¦‚æœæˆ‘ä»¬ä¸ºåŒä¸€å±æ€§æä¾›setterå’Œæ„é€ æ–¹æ³•æ³¨å…¥ï¼Œsetteræ³¨å…¥å°†è¦†ç›–æ„é€ æ–¹æ³•æ³¨å…¥ã€‚ä½†æ˜¯æ„é€ æ–¹æ³•æ³¨å…¥ä¸èƒ½è¦†ç›–setteræ³¨å…¥å€¼ã€‚æ˜¾ç„¶ï¼Œæ„é€ æ–¹æ³•æ³¨å…¥è¢«ç§°ä¸ºåˆ›å»ºå®ä¾‹çš„ç¬¬ä¸€é€‰é¡¹ã€‚</p>\n<p>ï¼ˆå¾ªç¯ä¾èµ–ï¼‰åœ¨æ„é€ å‡½æ•°æ³¨å…¥,å¦‚æœAå’ŒBå¯¹è±¡ç›¸äº’ä¾èµ–ï¼šAä¾èµ–äºB,Bä¹Ÿä¾èµ–äºA,æ­¤æ—¶åœ¨åˆ›å»ºå¯¹è±¡çš„Aæˆ–è€…Bæ—¶ï¼ŒSpringæŠ›å‡ºObjectCurrentlyInCreationExceptionã€‚æ‰€ä»¥Springå¯ä»¥é€šè¿‡setteræ³¨å…¥,ä»è€Œè§£å†³å¾ªç¯ä¾èµ–çš„é—®é¢˜ã€‚</p>\n<p><strong>æœ€å¥½çš„è§£å†³æ–¹æ¡ˆæ˜¯ç”¨æ„é€ å™¨å‚æ•°å®ç°å¼ºåˆ¶ä¾èµ–ï¼Œsetteræ–¹æ³•å®ç°å¯é€‰ä¾èµ–</strong></p>\n<h3 id=\"è®²ä¸€è®²Springä¸­çš„å¾ªç¯ä¾èµ–\"><a href=\"#è®²ä¸€è®²Springä¸­çš„å¾ªç¯ä¾èµ–\" class=\"headerlink\" title=\"è®²ä¸€è®²Springä¸­çš„å¾ªç¯ä¾èµ–\"></a>è®²ä¸€è®²Springä¸­çš„å¾ªç¯ä¾èµ–</h3><p><a href=\"https://www.cnblogs.com/daimzh/p/13256413.html\">https://www.cnblogs.com/daimzh/p/13256413.html</a></p>\n<p><a href=\"https://blog.csdn.net/weixin_49592546/article/details/108050566\">https://blog.csdn.net/weixin_49592546/article/details/108050566</a></p>\n<h4 id=\"ä»€ä¹ˆæ˜¯å¾ªç¯ä¾èµ–ï¼Ÿ\"><a href=\"#ä»€ä¹ˆæ˜¯å¾ªç¯ä¾èµ–ï¼Ÿ\" class=\"headerlink\" title=\"ä»€ä¹ˆæ˜¯å¾ªç¯ä¾èµ–ï¼Ÿ\"></a>ä»€ä¹ˆæ˜¯å¾ªç¯ä¾èµ–ï¼Ÿ</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Component</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">A</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// Aä¸­æ³¨å…¥äº†B</span></span><br><span class=\"line\">\t<span class=\"meta\">@Autowired</span></span><br><span class=\"line\">\t<span class=\"keyword\">private</span> B b;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@Component</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">B</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// Bä¸­ä¹Ÿæ³¨å…¥äº†A</span></span><br><span class=\"line\">\t<span class=\"meta\">@Autowired</span></span><br><span class=\"line\">\t<span class=\"keyword\">private</span> A a;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Springæ˜¯å¦‚ä½•è§£å†³çš„å¾ªç¯ä¾èµ–ï¼Ÿ\"><a href=\"#Springæ˜¯å¦‚ä½•è§£å†³çš„å¾ªç¯ä¾èµ–ï¼Ÿ\" class=\"headerlink\" title=\"Springæ˜¯å¦‚ä½•è§£å†³çš„å¾ªç¯ä¾èµ–ï¼Ÿ\"></a>Springæ˜¯å¦‚ä½•è§£å†³çš„å¾ªç¯ä¾èµ–ï¼Ÿ</h4><blockquote>\n<p>ä»¥ä¸‹ï¼š</p>\n<p>ä½œè€…ï¼šé˜¿é‡Œäº‘äº‘æ –å·</p>\n<p>é“¾æ¥ï¼š<a href=\"https://zhuanlan.zhihu.com/p/368769721\">https://zhuanlan.zhihu.com/p/368769721</a></p>\n<p>æ¥æºï¼šçŸ¥ä¹</p>\n<p>è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚</p>\n</blockquote>\n<p>é¦–å…ˆï¼ŒSpring è§£å†³å¾ªç¯ä¾èµ–æœ‰ä¸¤ä¸ªå‰ææ¡ä»¶ï¼š</p>\n<ol>\n<li>ä¸å…¨æ˜¯æ„é€ å™¨æ–¹å¼çš„å¾ªç¯ä¾èµ–</li>\n<li>å¿…é¡»æ˜¯å•ä¾‹</li>\n</ol>\n<p>åŸºäºä¸Šé¢çš„é—®é¢˜ï¼Œæˆ‘ä»¬çŸ¥é“Beançš„ç”Ÿå‘½å‘¨æœŸï¼Œæœ¬è´¨ä¸Šè§£å†³å¾ªç¯ä¾èµ–çš„é—®é¢˜å°±æ˜¯ä¸‰çº§ç¼“å­˜ï¼Œé€šè¿‡ä¸‰çº§ç¼“å­˜æå‰æ‹¿åˆ°æœªåˆå§‹åŒ–å®Œå…¨çš„å¯¹è±¡ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/** Cache of singleton objects: bean name to bean instance. */</span></span><br><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">final</span> Map&lt;String, Object&gt; singletonObjects = <span class=\"keyword\">new</span> <span class=\"title class_\">ConcurrentHashMap</span>&lt;&gt;(<span class=\"number\">256</span>);</span><br><span class=\"line\"><span class=\"comment\">/** Cache of early singleton objects: bean name to bean instance. */</span></span><br><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">final</span> Map&lt;String, Object&gt; earlySingletonObjects = <span class=\"keyword\">new</span> <span class=\"title class_\">HashMap</span>&lt;&gt;(<span class=\"number\">16</span>);</span><br><span class=\"line\"><span class=\"comment\">/** Cache of singleton factories: bean name to ObjectFactory. */</span></span><br><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">final</span> Map&lt;String, ObjectFactory&lt;?&gt;&gt; singletonFactories = <span class=\"keyword\">new</span> <span class=\"title class_\">HashMap</span>&lt;&gt;(<span class=\"number\">16</span>);</span><br></pre></td></tr></table></figure>\n\n<p>ç¬¬ä¸€çº§ç¼“å­˜ï¼šç”¨æ¥ä¿å­˜å®ä¾‹åŒ–ã€åˆå§‹åŒ–éƒ½å®Œæˆçš„å¯¹è±¡</p>\n<p>ç¬¬äºŒçº§ç¼“å­˜ï¼šç”¨æ¥ä¿å­˜å®ä¾‹åŒ–å®Œæˆï¼Œä½†æ˜¯æœªåˆå§‹åŒ–å®Œæˆçš„å¯¹è±¡</p>\n<p>ç¬¬ä¸‰çº§ç¼“å­˜ï¼šç”¨æ¥ä¿å­˜ä¸€ä¸ªå¯¹è±¡å·¥å‚ï¼Œæä¾›ä¸€ä¸ªåŒ¿åå†…éƒ¨ç±»ï¼Œç”¨äºåˆ›å»ºäºŒçº§ç¼“å­˜ä¸­çš„å¯¹è±¡</p>\n<p><img src=\"https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/TyporaNotesv2-dbda6a103e41cde4a54548386d6c1cc2_720w.jpg\" alt=\"Springä¸‰çº§ç¼“å­˜\"></p>\n<p>å‡è®¾ä¸€ä¸ªç®€å•çš„å¾ªç¯ä¾èµ–åœºæ™¯ï¼ŒAã€Bäº’ç›¸ä¾èµ–ã€‚</p>\n<p><img src=\"https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/TyporaNotesv2-f20f1e81c8011fd99f723127cacf7430_720w.jpg\" alt=\"ç®€å•çš„å¾ªç¯ä¾èµ–åœºæ™¯\"></p>\n<p>Aå¯¹è±¡çš„åˆ›å»ºè¿‡ç¨‹ï¼š</p>\n<ol>\n<li>åˆ›å»ºå¯¹è±¡Aï¼Œå®ä¾‹åŒ–çš„æ—¶å€™æŠŠAå¯¹è±¡å·¥å‚æ”¾å…¥ä¸‰çº§ç¼“å­˜ï¼›</li>\n</ol>\n<p><img src=\"https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/TyporaNotesv2-b295374aff4235ee9c0538bf03856217_720w.jpg\" alt=\"å®ä¾‹åŒ–å¯¹è±¡A\"></p>\n<ol start=\"2\">\n<li><p>Aæ³¨å…¥å±æ€§æ—¶ï¼Œå‘ç°ä¾èµ–Bï¼Œè½¬è€Œå»å®ä¾‹åŒ–B</p>\n</li>\n<li><p>åŒæ ·åˆ›å»ºå¯¹è±¡Bï¼Œæ³¨å…¥å±æ€§æ—¶å‘ç°ä¾èµ–Aï¼Œä¾æ¬¡ä»ä¸€çº§åˆ°ä¸‰çº§ç¼“å­˜æŸ¥è¯¢Aï¼Œä»ä¸‰çº§ç¼“å­˜é€šè¿‡å¯¹è±¡å·¥å‚æ‹¿åˆ°Aï¼ŒæŠŠAæ”¾å…¥äºŒçº§ç¼“å­˜ï¼ŒåŒæ—¶åˆ é™¤ä¸‰çº§ç¼“å­˜ä¸­çš„Aï¼Œæ­¤æ—¶ï¼ŒBå·²ç»å®ä¾‹åŒ–å¹¶ä¸”åˆå§‹åŒ–å®Œæˆï¼ŒæŠŠBæ”¾å…¥ä¸€çº§ç¼“å­˜ã€‚</p>\n</li>\n</ol>\n<p><img src=\"https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/TyporaNotesv2-51cb735fc6c02c2225d2f38b9b5b6da9_720w.jpg\" alt=\"åˆ›å»ºå¯¹è±¡B\"></p>\n<ol start=\"4\">\n<li><p>æ¥ç€ç»§ç»­åˆ›å»ºAï¼Œé¡ºåˆ©ä»ä¸€çº§ç¼“å­˜æ‹¿åˆ°å®ä¾‹åŒ–ä¸”åˆå§‹åŒ–å®Œæˆçš„Bå¯¹è±¡ï¼ŒAå¯¹è±¡åˆ›å»ºä¹Ÿå®Œæˆï¼Œåˆ é™¤äºŒçº§ç¼“å­˜ä¸­çš„Aï¼ŒåŒæ—¶æŠŠAæ”¾å…¥ä¸€çº§ç¼“å­˜</p>\n</li>\n<li><p>æœ€åï¼Œä¸€çº§ç¼“å­˜ä¸­ä¿å­˜ç€å®ä¾‹åŒ–ã€åˆå§‹åŒ–éƒ½å®Œæˆçš„Aã€Bå¯¹è±¡</p>\n</li>\n</ol>\n<p><img src=\"https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/TyporaNotesv2-a1eaa5d9f8bec23e373dc1b9f86ddb25_720w.jpg\" alt=\"æœ€ç»ˆç»“æœ\"></p>\n<p>å› æ­¤ï¼Œç”±äºæŠŠå®ä¾‹åŒ–å’Œåˆå§‹åŒ–çš„æµç¨‹åˆ†å¼€äº†ï¼Œæ‰€ä»¥å¦‚æœéƒ½æ˜¯ç”¨æ„é€ å™¨çš„è¯ï¼Œå°±æ²¡æ³•åˆ†ç¦»è¿™ä¸ªæ“ä½œï¼Œæ‰€ä»¥éƒ½æ˜¯æ„é€ å™¨çš„è¯å°±æ— æ³•è§£å†³å¾ªç¯ä¾èµ–çš„é—®é¢˜äº†ã€‚</p>\n<h3 id=\"8-ä¸ºä»€ä¹ˆè¦ä¸‰çº§ç¼“å­˜ï¼ŸäºŒçº§ä¸è¡Œå—ï¼Ÿ\"><a href=\"#8-ä¸ºä»€ä¹ˆè¦ä¸‰çº§ç¼“å­˜ï¼ŸäºŒçº§ä¸è¡Œå—ï¼Ÿ\" class=\"headerlink\" title=\"8. ä¸ºä»€ä¹ˆè¦ä¸‰çº§ç¼“å­˜ï¼ŸäºŒçº§ä¸è¡Œå—ï¼Ÿ\"></a>8. ä¸ºä»€ä¹ˆè¦ä¸‰çº§ç¼“å­˜ï¼ŸäºŒçº§ä¸è¡Œå—ï¼Ÿ</h3><p>ä¸å¯ä»¥ï¼Œä¸»è¦æ˜¯ä¸ºäº†ç”Ÿæˆä»£ç†å¯¹è±¡ã€‚</p>\n<p>å› ä¸ºä¸‰çº§ç¼“å­˜ä¸­æ”¾çš„æ˜¯ç”Ÿæˆå…·ä½“å¯¹è±¡çš„å¯¹è±¡å·¥å‚ï¼Œä»–å¯ä»¥ç”Ÿæˆä»£ç†å¯¹è±¡ï¼Œä¹Ÿå¯ä»¥æ˜¯æ™®é€šçš„å®ä¾‹å¯¹è±¡ã€‚</p>\n<p>å‡è®¾åªæœ‰äºŒçº§ç¼“å­˜çš„æƒ…å†µï¼Œå¾€äºŒçº§ç¼“å­˜ä¸­æ”¾çš„æ˜¾ç¤ºä¸€ä¸ªæ™®é€šçš„Beanå¯¹è±¡ï¼Œ<code>BeanPostProcessor</code>å»ç”Ÿæˆä»£ç†å¯¹è±¡ä¹‹åï¼Œè¦†ç›–æ‰äºŒçº§ç¼“å­˜ä¸­çš„æ™®é€šBeanå¯¹è±¡ï¼Œé‚£ä¹ˆå¤šçº¿ç¨‹ç¯å¢ƒä¸‹å¯èƒ½å–åˆ°çš„å¯¹è±¡å°±ä¸ä¸€è‡´äº†ã€‚</p>\n<p><img src=\"https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/TyporaNotesv2-e4e9050787017c7272dc313f88af9382_720w.jpg\" alt=\"Aä»£ç†å¯¹è±¡è¦†ç›–Aæ™®é€šBean\"></p>\n<h2 id=\"Spring-Beans\"><a href=\"#Spring-Beans\" class=\"headerlink\" title=\"Spring Beans\"></a>Spring Beans</h2><h3 id=\"å¦‚ä½•ç»™Spring-å®¹å™¨æä¾›é…ç½®å…ƒæ•°æ®ï¼ŸSpringæœ‰å‡ ç§é…ç½®æ–¹å¼\"><a href=\"#å¦‚ä½•ç»™Spring-å®¹å™¨æä¾›é…ç½®å…ƒæ•°æ®ï¼ŸSpringæœ‰å‡ ç§é…ç½®æ–¹å¼\" class=\"headerlink\" title=\"å¦‚ä½•ç»™Spring å®¹å™¨æä¾›é…ç½®å…ƒæ•°æ®ï¼ŸSpringæœ‰å‡ ç§é…ç½®æ–¹å¼\"></a>å¦‚ä½•ç»™Spring å®¹å™¨æä¾›é…ç½®å…ƒæ•°æ®ï¼ŸSpringæœ‰å‡ ç§é…ç½®æ–¹å¼</h3><p>è¿™é‡Œæœ‰ä¸‰ç§é‡è¦çš„æ–¹æ³•ç»™Spring å®¹å™¨æä¾›é…ç½®å…ƒæ•°æ®ã€‚</p>\n<ul>\n<li>XMLé…ç½®æ–‡ä»¶ã€‚</li>\n<li>åŸºäºæ³¨è§£çš„é…ç½®ã€‚</li>\n<li>åŸºäºJavaçš„é…ç½®ã€‚</li>\n</ul>\n<h3 id=\"Springé…ç½®æ–‡ä»¶åŒ…å«äº†å“ªäº›ä¿¡æ¯\"><a href=\"#Springé…ç½®æ–‡ä»¶åŒ…å«äº†å“ªäº›ä¿¡æ¯\" class=\"headerlink\" title=\"Springé…ç½®æ–‡ä»¶åŒ…å«äº†å“ªäº›ä¿¡æ¯\"></a>Springé…ç½®æ–‡ä»¶åŒ…å«äº†å“ªäº›ä¿¡æ¯</h3><p>Springé…ç½®æ–‡ä»¶æ˜¯ä¸ªXML æ–‡ä»¶ï¼Œé€šè¿‡è¯»å–æŒ‡å®šç±»çš„å…¨é™å®šç±»åã€‚åå°„åˆ›å»ºå¯¹è±¡ï¼Œä¸¢å…¥iocå®¹å™¨ä¸­ï¼Œè¯¥å¯¹è±¡å¯ä»¥é€šè¿‡idæ¥è·å–</p>\n<h3 id=\"SpringåŸºäºxmlæ³¨å…¥beançš„å‡ ç§æ–¹å¼\"><a href=\"#SpringåŸºäºxmlæ³¨å…¥beançš„å‡ ç§æ–¹å¼\" class=\"headerlink\" title=\"SpringåŸºäºxmlæ³¨å…¥beançš„å‡ ç§æ–¹å¼\"></a>SpringåŸºäºxmlæ³¨å…¥beançš„å‡ ç§æ–¹å¼</h3><ol>\n<li>Setæ–¹æ³•æ³¨å…¥ï¼š<code>&lt;property name=&quot;xxx&quot; value=&quot;yyy&quot;/&gt;</code></li>\n<li>æ„é€ å™¨æ³¨å…¥ï¼š<code>&lt;construtor-arg type/index/name=&quot;xxx&quot; value=&quot;yyy&quot;/&gt;</code></li>\n<li>é™æ€å·¥å‚æ³¨å…¥ï¼›factory-bean factory-method</li>\n<li>å®ä¾‹å·¥å‚ï¼› class factory-method</li>\n</ol>\n<h3 id=\"è§£é‡ŠSpringæ”¯æŒçš„å‡ ç§beançš„ä½œç”¨åŸŸ\"><a href=\"#è§£é‡ŠSpringæ”¯æŒçš„å‡ ç§beançš„ä½œç”¨åŸŸ\" class=\"headerlink\" title=\"è§£é‡ŠSpringæ”¯æŒçš„å‡ ç§beançš„ä½œç”¨åŸŸ\"></a>è§£é‡ŠSpringæ”¯æŒçš„å‡ ç§beançš„ä½œç”¨åŸŸ</h3><p>Springæ¡†æ¶æ”¯æŒä»¥ä¸‹äº”ç§beançš„ä½œç”¨åŸŸï¼š</p>\n<ul>\n<li><strong>singleton :</strong> beanåœ¨æ¯ä¸ªSpring ioc å®¹å™¨ä¸­åªæœ‰ä¸€ä¸ªå®ä¾‹ã€‚</li>\n<li><strong>prototype</strong>ï¼šä¸€ä¸ªbeançš„å®šä¹‰å¯ä»¥æœ‰å¤šä¸ªå®ä¾‹ã€‚</li>\n<li><strong>request</strong>ï¼šæ¯æ¬¡httpè¯·æ±‚éƒ½ä¼šåˆ›å»ºä¸€ä¸ªbeanï¼Œè¯¥ä½œç”¨åŸŸä»…åœ¨åŸºäºwebçš„Spring ApplicationContextæƒ…å½¢ä¸‹æœ‰æ•ˆã€‚</li>\n<li><strong>session</strong>ï¼šåœ¨ä¸€ä¸ªHTTP Sessionä¸­ï¼Œä¸€ä¸ªbeanå®šä¹‰å¯¹åº”ä¸€ä¸ªå®ä¾‹ã€‚è¯¥ä½œç”¨åŸŸä»…åœ¨åŸºäºwebçš„Spring ApplicationContextæƒ…å½¢ä¸‹æœ‰æ•ˆã€‚</li>\n<li><strong>global-session</strong>ï¼šåœ¨ä¸€ä¸ªå…¨å±€çš„HTTP Sessionä¸­ï¼Œä¸€ä¸ªbeanå®šä¹‰å¯¹åº”ä¸€ä¸ªå®ä¾‹ã€‚è¯¥ä½œç”¨åŸŸä»…åœ¨åŸºäºwebçš„Spring ApplicationContextæƒ…å½¢ä¸‹æœ‰æ•ˆã€‚</li>\n</ul>\n<p><strong>æ³¨æ„ï¼š</strong> ç¼ºçœçš„Spring bean çš„ä½œç”¨åŸŸæ˜¯singletonã€‚ä½¿ç”¨ prototype ä½œç”¨åŸŸéœ€è¦æ…é‡çš„æ€è€ƒï¼Œå› ä¸ºé¢‘ç¹åˆ›å»ºå’Œé”€æ¯ bean ä¼šå¸¦æ¥å¾ˆå¤§çš„æ€§èƒ½å¼€é”€ã€‚</p>\n<h3 id=\"Springæ¡†æ¶ä¸­çš„å•ä¾‹beanæ˜¯çº¿ç¨‹å®‰å…¨çš„å—ï¼Ÿ\"><a href=\"#Springæ¡†æ¶ä¸­çš„å•ä¾‹beanæ˜¯çº¿ç¨‹å®‰å…¨çš„å—ï¼Ÿ\" class=\"headerlink\" title=\"Springæ¡†æ¶ä¸­çš„å•ä¾‹beanæ˜¯çº¿ç¨‹å®‰å…¨çš„å—ï¼Ÿ\"></a>Springæ¡†æ¶ä¸­çš„å•ä¾‹beanæ˜¯çº¿ç¨‹å®‰å…¨çš„å—ï¼Ÿ</h3><p>ä¸æ˜¯ï¼ŒSpringæ¡†æ¶ä¸­çš„å•ä¾‹beanä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚</p>\n<p>spring ä¸­çš„ bean é»˜è®¤æ˜¯å•ä¾‹æ¨¡å¼ï¼Œspring æ¡†æ¶å¹¶æ²¡æœ‰å¯¹å•ä¾‹ bean è¿›è¡Œå¤šçº¿ç¨‹çš„å°è£…å¤„ç†ã€‚</p>\n<p>ç„¶è€Œï¼Œå®é™…ä¸Šå¤§éƒ¨åˆ†æ—¶å€™ spring bean æ— çŠ¶æ€çš„ï¼ˆæ¯”å¦‚ dao ç±»ï¼‰ï¼Œæ‰€ä»¥æŸç§ç¨‹åº¦ä¸Šæ¥è¯´ bean ä¹Ÿæ˜¯å®‰å…¨çš„ï¼Œä½†å¦‚æœ bean æœ‰çŠ¶æ€çš„è¯ï¼ˆæ¯”å¦‚ view model å¯¹è±¡ï¼‰ï¼Œé‚£å°±è¦å¼€å‘è€…è‡ªå·±å»ä¿è¯çº¿ç¨‹å®‰å…¨äº†ï¼Œæœ€ç®€å•çš„å°±æ˜¯æ”¹å˜ bean çš„ä½œç”¨åŸŸï¼ŒæŠŠâ€œsingletonâ€å˜æ›´ä¸ºâ€œprototypeâ€ï¼Œè¿™æ ·è¯·æ±‚ bean ç›¸å½“äº new Bean()äº†ï¼Œæ‰€ä»¥å°±å¯ä»¥ä¿è¯çº¿ç¨‹å®‰å…¨äº†ã€‚</p>\n<blockquote>\n<p>æœ‰çŠ¶æ€å°±æ˜¯æœ‰æ•°æ®å­˜å‚¨åŠŸèƒ½<br>æ— çŠ¶æ€å°±æ˜¯ä¸ä¼šä¿å­˜æ•°æ®</p>\n</blockquote>\n<h3 id=\"Springå¦‚ä½•å¤„ç†çº¿ç¨‹å¹¶å‘é—®é¢˜ï¼Ÿ\"><a href=\"#Springå¦‚ä½•å¤„ç†çº¿ç¨‹å¹¶å‘é—®é¢˜ï¼Ÿ\" class=\"headerlink\" title=\"Springå¦‚ä½•å¤„ç†çº¿ç¨‹å¹¶å‘é—®é¢˜ï¼Ÿ\"></a>Springå¦‚ä½•å¤„ç†çº¿ç¨‹å¹¶å‘é—®é¢˜ï¼Ÿ</h3><p><strong>Springä½¿ç”¨ThreadLocalå¯¹ä¸€äº›Beançš„çº¿ç¨‹å®‰å…¨é—®é¢˜è¿›è¡Œå¤„ç†</strong>ã€‚</p>\n<p>ThreadLocalå’Œçº¿ç¨‹åŒæ­¥æœºåˆ¶éƒ½æ˜¯ä¸ºäº†è§£å†³å¤šçº¿ç¨‹ä¸­ç›¸åŒå˜é‡çš„è®¿é—®å†²çªé—®é¢˜ã€‚åŒæ­¥æœºåˆ¶é‡‡ç”¨äº†â€œæ—¶é—´æ¢ç©ºé—´â€çš„æ–¹å¼ï¼Œä»…æä¾›ä¸€ä»½å˜é‡ï¼Œä¸åŒçš„çº¿ç¨‹åœ¨è®¿é—®å‰éœ€è¦è·å–é”ï¼Œæ²¡è·å¾—é”çš„çº¿ç¨‹åˆ™éœ€è¦æ’é˜Ÿã€‚è€ŒThreadLocalé‡‡ç”¨äº†â€œç©ºé—´æ¢æ—¶é—´â€çš„æ–¹å¼ã€‚</p>\n<p>ThreadLocalä¼šä¸ºæ¯ä¸€ä¸ªçº¿ç¨‹æä¾›ä¸€ä¸ªç‹¬ç«‹çš„å˜é‡å‰¯æœ¬ï¼Œä»è€Œéš”ç¦»äº†å¤šä¸ªçº¿ç¨‹å¯¹æ•°æ®çš„è®¿é—®å†²çªã€‚å› ä¸ºæ¯ä¸€ä¸ªçº¿ç¨‹éƒ½æ‹¥æœ‰è‡ªå·±çš„å˜é‡å‰¯æœ¬ï¼Œä»è€Œä¹Ÿå°±æ²¡æœ‰å¿…è¦å¯¹è¯¥å˜é‡è¿›è¡ŒåŒæ­¥äº†ã€‚ThreadLocalæä¾›äº†çº¿ç¨‹å®‰å…¨çš„å…±äº«å¯¹è±¡ï¼Œåœ¨ç¼–å†™å¤šçº¿ç¨‹ä»£ç æ—¶ï¼Œå¯ä»¥æŠŠä¸å®‰å…¨çš„å˜é‡å°è£…è¿›ThreadLocalã€‚</p>\n<h3 id=\"è§£é‡ŠSpringæ¡†æ¶ä¸­beançš„ç”Ÿå‘½å‘¨æœŸ\"><a href=\"#è§£é‡ŠSpringæ¡†æ¶ä¸­beançš„ç”Ÿå‘½å‘¨æœŸ\" class=\"headerlink\" title=\"è§£é‡ŠSpringæ¡†æ¶ä¸­beançš„ç”Ÿå‘½å‘¨æœŸ\"></a>è§£é‡ŠSpringæ¡†æ¶ä¸­beançš„ç”Ÿå‘½å‘¨æœŸ</h3><p>å‚è€ƒï¼š<a href=\"https://www.cnblogs.com/javazhiyin/p/10905294.html\">https://www.cnblogs.com/javazhiyin/p/10905294.html</a></p>\n<p><img src=\"https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/TyporaNotes201911012343410.png\" alt=\"Springä¸­Beançš„ç”Ÿå‘½å‘¨æœŸ\"></p>\n<p><strong>1ã€å®ä¾‹åŒ–Beanï¼š</strong></p>\n<p>å¯¹äºBeanFactoryå®¹å™¨ï¼Œå½“å®¢æˆ·å‘å®¹å™¨è¯·æ±‚ä¸€ä¸ªå°šæœªåˆå§‹åŒ–çš„beanæ—¶ï¼Œæˆ–åˆå§‹åŒ–beançš„æ—¶å€™éœ€è¦æ³¨å…¥å¦ä¸€ä¸ªå°šæœªåˆå§‹åŒ–çš„ä¾èµ–æ—¶ï¼Œå®¹å™¨å°±ä¼šè°ƒç”¨createBeanè¿›è¡Œå®ä¾‹åŒ–ã€‚<br>å¯¹äºApplicationContextå®¹å™¨ï¼Œå½“å®¹å™¨å¯åŠ¨ç»“æŸåï¼Œé€šè¿‡è·å–BeanDefinitionå¯¹è±¡ä¸­çš„ä¿¡æ¯ï¼Œå®ä¾‹åŒ–æ‰€æœ‰çš„beanã€‚</p>\n<p><strong>2ã€ä¾èµ–æ³¨å…¥ï¼š</strong></p>\n<p>å®ä¾‹åŒ–åçš„å¯¹è±¡è¢«å°è£…åœ¨BeanWrapperå¯¹è±¡ä¸­ï¼Œç´§æ¥ç€ï¼ŒSpringæ ¹æ®BeanDefinitionä¸­çš„ä¿¡æ¯ ä»¥åŠ é€šè¿‡BeanWrapperæä¾›çš„è®¾ç½®å±æ€§çš„æ¥å£å®Œæˆä¾èµ–æ³¨å…¥ã€‚</p>\n<p><strong>3ã€å¤„ç†Awareæ¥å£ï¼ˆé…ç½®Beanå¯¹è±¡çš„idå€¼ã€å·¥å‚&#x2F;ä¸Šä¸‹æ–‡ï¼‰ï¼š</strong></p>\n<p>æ¥ç€ï¼ŒSpringä¼šæ£€æµ‹è¯¥å¯¹è±¡æ˜¯å¦å®ç°äº†xxxAwareæ¥å£ï¼Œå¹¶å°†ç›¸å…³çš„xxxAwareå®ä¾‹æ³¨å…¥ç»™Beanï¼š</p>\n<ul>\n<li>å¦‚æœè¿™ä¸ªBeanå·²ç»å®ç°äº†BeanNameAwareæ¥å£ï¼Œä¼šè°ƒç”¨å®ƒå®ç°çš„setBeanName(String beanId)æ–¹æ³•ï¼Œæ­¤å¤„ä¼ é€’çš„å°±æ˜¯Springé…ç½®æ–‡ä»¶ä¸­Beançš„idå€¼ï¼›</li>\n<li>å¦‚æœè¿™ä¸ªBeanå·²ç»å®ç°äº†BeanFactoryAwareæ¥å£ï¼Œä¼šè°ƒç”¨å®ƒå®ç°çš„setBeanFactory()æ–¹æ³•ï¼Œä¼ é€’çš„æ˜¯Springå·¥å‚è‡ªèº«ï¼›</li>\n<li>å¦‚æœè¿™ä¸ªBeanå·²ç»å®ç°äº†ApplicationContextAwareæ¥å£ï¼Œä¼šè°ƒsetApplicationContext(ApplicationContext)æ–¹æ³•ï¼Œä¼ å…¥Springä¸Šä¸‹æ–‡ï¼›</li>\n</ul>\n<p><strong>4ã€postProcessBeforeInitializationï¼ˆåˆå§‹åŒ–å‰ç½®å¤„ç†ï¼‰ï¼š</strong></p>\n<p>å¦‚æœæƒ³å¯¹Beanè¿›è¡Œä¸€äº›è‡ªå®šä¹‰çš„å¤„ç†ï¼Œé‚£ä¹ˆå¯ä»¥è®©Beanå®ç°äº†BeanPostProcessoræ¥å£ï¼Œé‚£å°†ä¼šè°ƒç”¨postProcessBeforeInitialization(Object obj, String s)æ–¹æ³•ã€‚ç”±äºè¿™ä¸ªæ–¹æ³•æ˜¯åœ¨Beanåˆå§‹åŒ–ç»“æŸæ—¶è°ƒç”¨çš„ï¼Œæ‰€ä»¥å¯ä»¥è¢«åº”ç”¨äºå†…å­˜æˆ–ç¼“å­˜æŠ€æœ¯ï¼›</p>\n<p><strong>5ã€è‡ªå®šä¹‰åˆå§‹åŒ–init-methodï¼š</strong></p>\n<p>å¦‚æœBeanåœ¨Springé…ç½®æ–‡ä»¶ä¸­é…ç½®äº† init-method å±æ€§ï¼Œåˆ™ä¼šè‡ªåŠ¨è°ƒç”¨å…¶é…ç½®çš„<strong>è‡ªå®šä¹‰åˆå§‹åŒ–</strong>æ–¹æ³•ã€‚</p>\n<p><strong>6ã€postProcessAfterInitializationï¼ˆåˆå§‹åŒ–åç½®å¤„ç†ï¼‰</strong></p>\n<p>å¦‚æœè¿™ä¸ªBeanå®ç°äº†BeanPostProcessoræ¥å£ï¼Œå°†ä¼šè°ƒç”¨postProcessAfterInitialization(Object obj, String s)æ–¹æ³•ï¼Œ<strong>AOPåœ¨è¿™ä¸ªæ—¶å€™è¿›è¡Œä»£ç†å¯¹è±¡çš„åˆ›å»º</strong>ã€‚</p>\n<p><strong>NOW</strong> ä»¥ä¸Šå‡ ä¸ªæ­¥éª¤å®Œæˆåï¼ŒBeanå°±å·²ç»è¢«æ­£ç¡®åˆ›å»ºäº†ï¼Œä¹‹åå°±å¯ä»¥ä½¿ç”¨è¿™ä¸ªBeanäº†ã€‚</p>\n<p><strong>7ã€æ¸…ç†é˜¶æ®µdestroyï¼š</strong></p>\n<p>å½“Beanä¸å†éœ€è¦æ—¶ï¼Œä¼šè¿›å…¥æ¸…ç†é˜¶æ®µï¼Œå¦‚æœBeanå®ç°äº†DisposableBeanè¿™ä¸ªæ¥å£ï¼Œä¼šè°ƒç”¨å…¶å®ç°çš„destroy()æ–¹æ³•ï¼›</p>\n<p><strong>8ã€è‡ªå®šä¹‰é”€æ¯destroy-methodï¼š</strong></p>\n<p>æœ€åï¼Œå¦‚æœè¿™ä¸ªBeançš„Springé…ç½®ä¸­é…ç½®äº†destroy-methodå±æ€§ï¼Œä¼šè‡ªåŠ¨è°ƒç”¨å…¶é…ç½®çš„<strong>è‡ªå®šä¹‰é”€æ¯</strong>æ–¹æ³•ã€‚</p>\n<h3 id=\"åœ¨-Springä¸­å¦‚ä½•æ³¨å…¥ä¸€ä¸ªJavaé›†åˆï¼Ÿ\"><a href=\"#åœ¨-Springä¸­å¦‚ä½•æ³¨å…¥ä¸€ä¸ªJavaé›†åˆï¼Ÿ\" class=\"headerlink\" title=\"åœ¨ Springä¸­å¦‚ä½•æ³¨å…¥ä¸€ä¸ªJavaé›†åˆï¼Ÿ\"></a>åœ¨ Springä¸­å¦‚ä½•æ³¨å…¥ä¸€ä¸ªJavaé›†åˆï¼Ÿ</h3><p>ç”¨<code>&lt;list&gt;</code>æ³¨å…¥ä¸€åˆ—å€¼ï¼Œç”¨<code>&lt;map&gt;</code>æ³¨å…¥ä¸€ç»„æ˜ å°„æ•°æ®ã€‚</p>\n<h3 id=\"ä»€ä¹ˆæ˜¯beanè£…é…ï¼Ÿ\"><a href=\"#ä»€ä¹ˆæ˜¯beanè£…é…ï¼Ÿ\" class=\"headerlink\" title=\"ä»€ä¹ˆæ˜¯beanè£…é…ï¼Ÿ\"></a>ä»€ä¹ˆæ˜¯beanè£…é…ï¼Ÿ</h3><p>é€šè¿‡beançš„ä¾èµ–å…³ç³»ï¼Œä½¿ç”¨ä¾èµ–æ³¨å…¥å°†springä¸­çš„beanè£…é…åœ¨ä¸€èµ·ã€‚<br>springå¯ä»¥é€šè¿‡beançš„ä¾èµ–å…³ç³»è‡ªåŠ¨å®Œæˆbeanä¹‹é—´çš„é…ç½®ã€‚</p>\n<h3 id=\"Spring-è‡ªåŠ¨è£…é…-bean-æœ‰å“ªäº›æ–¹å¼ï¼Ÿ\"><a href=\"#Spring-è‡ªåŠ¨è£…é…-bean-æœ‰å“ªäº›æ–¹å¼ï¼Ÿ\" class=\"headerlink\" title=\"Spring è‡ªåŠ¨è£…é… bean æœ‰å“ªäº›æ–¹å¼ï¼Ÿ\"></a>Spring è‡ªåŠ¨è£…é… bean æœ‰å“ªäº›æ–¹å¼ï¼Ÿ</h3><p>åœ¨springä¸­ï¼Œå¯¹è±¡æ— éœ€è‡ªå·±æŸ¥æ‰¾æˆ–åˆ›å»ºä¸å…¶å…³è”çš„å…¶ä»–å¯¹è±¡ï¼Œç”±å®¹å™¨è´Ÿè´£æŠŠéœ€è¦ç›¸äº’åä½œçš„å¯¹è±¡å¼•ç”¨èµ‹äºˆå„ä¸ªå¯¹è±¡ã€‚</p>\n<p>åœ¨Springæ¡†æ¶xmlé…ç½®ä¸­å…±æœ‰5ç§è‡ªåŠ¨è£…é…ï¼š</p>\n<ul>\n<li>noï¼šé»˜è®¤çš„æ–¹å¼æ˜¯ä¸è¿›è¡Œè‡ªåŠ¨è£…é…çš„ï¼Œé€šè¿‡æ‰‹å·¥è®¾ç½®refå±æ€§æ¥è¿›è¡Œè£…é…beanã€‚</li>\n<li>byNameï¼šé€šè¿‡beançš„åç§°è¿›è¡Œè‡ªåŠ¨è£…é…ï¼Œå¦‚æœä¸€ä¸ªbeançš„ property ä¸å¦ä¸€bean çš„name ç›¸åŒï¼Œå°±è¿›è¡Œè‡ªåŠ¨è£…é…ã€‚</li>\n<li>byTypeï¼šé€šè¿‡å‚æ•°çš„æ•°æ®ç±»å‹è¿›è¡Œè‡ªåŠ¨è£…é…ã€‚</li>\n<li>constructorï¼šåˆ©ç”¨æ„é€ å‡½æ•°è¿›è¡Œè£…é…ï¼Œå¹¶ä¸”æ„é€ å‡½æ•°çš„å‚æ•°é€šè¿‡byTypeè¿›è¡Œè£…é…ã€‚</li>\n<li>autodetectï¼šè‡ªåŠ¨æ¢æµ‹ï¼Œå¦‚æœæœ‰æ„é€ æ–¹æ³•ï¼Œé€šè¿‡ constructçš„æ–¹å¼è‡ªåŠ¨è£…é…ï¼Œå¦åˆ™ä½¿ç”¨ byTypeçš„æ–¹å¼è‡ªåŠ¨è£…é…ã€‚</li>\n</ul>\n<h3 id=\"ä½¿ç”¨-Autowiredæ³¨è§£è‡ªåŠ¨è£…é…çš„è¿‡ç¨‹æ˜¯æ€æ ·çš„ï¼Ÿ\"><a href=\"#ä½¿ç”¨-Autowiredæ³¨è§£è‡ªåŠ¨è£…é…çš„è¿‡ç¨‹æ˜¯æ€æ ·çš„ï¼Ÿ\" class=\"headerlink\" title=\"ä½¿ç”¨@Autowiredæ³¨è§£è‡ªåŠ¨è£…é…çš„è¿‡ç¨‹æ˜¯æ€æ ·çš„ï¼Ÿ\"></a>ä½¿ç”¨@Autowiredæ³¨è§£è‡ªåŠ¨è£…é…çš„è¿‡ç¨‹æ˜¯æ€æ ·çš„ï¼Ÿ</h3><p>ä½¿ç”¨@Autowiredæ³¨è§£æ¥è‡ªåŠ¨è£…é…æŒ‡å®šçš„beanã€‚åœ¨ä½¿ç”¨@Autowiredæ³¨è§£ä¹‹å‰éœ€è¦åœ¨Springé…ç½®æ–‡ä»¶è¿›è¡Œé…ç½®æ³¨è§£æ‰«æ <code>&lt;context:annotation-config /&gt;</code>ã€‚</p>\n<p>åœ¨å¯åŠ¨spring IoCæ—¶ï¼Œå®¹å™¨è‡ªåŠ¨è£…è½½äº†ä¸€ä¸ªåç½®å¤„ç†å™¨ï¼Œå½“å®¹å™¨æ‰«æåˆ°@Autowiedã€@Resourceæˆ–@Injectæ—¶ï¼Œå°±ä¼šåœ¨IoCå®¹å™¨è‡ªåŠ¨æŸ¥æ‰¾éœ€è¦çš„beanï¼Œå¹¶è£…é…ç»™è¯¥å¯¹è±¡çš„å±æ€§ã€‚åœ¨ä½¿ç”¨@Autowiredæ—¶ï¼Œé¦–å…ˆåœ¨å®¹å™¨ä¸­<strong>æŸ¥è¯¢å¯¹åº”ç±»å‹</strong>çš„beanï¼š</p>\n<ul>\n<li>å¦‚æœå¯¹åº”ç±»å‹æŸ¥è¯¢ç»“æœåˆšå¥½ä¸ºä¸€ä¸ªï¼Œå°±å°†è¯¥beanè£…é…ç»™@AutowiredæŒ‡å®šçš„æ•°æ®ï¼›</li>\n<li>å¦‚æœå¯¹åº”ç±»å‹æŸ¥è¯¢çš„ç»“æœä¸æ­¢ä¸€ä¸ªï¼Œé‚£ä¹ˆ@Autowiredä¼šæ ¹æ®åç§°æ¥æŸ¥æ‰¾ï¼›</li>\n<li>å¦‚æœä¸Šè¿°æŸ¥æ‰¾çš„ç»“æœä¸ºç©ºæˆ–è€…ä¸æ­¢ä¸€ä¸ªï¼Œé‚£ä¹ˆä¼šæŠ›å‡ºå¼‚å¸¸ã€‚</li>\n</ul>\n<h2 id=\"Springæ³¨è§£\"><a href=\"#Springæ³¨è§£\" class=\"headerlink\" title=\"Springæ³¨è§£\"></a>Springæ³¨è§£</h2><h3 id=\"ä»€ä¹ˆæ˜¯åŸºäºJavaçš„Springæ³¨è§£é…ç½®-ç»™ä¸€äº›æ³¨è§£çš„ä¾‹å­\"><a href=\"#ä»€ä¹ˆæ˜¯åŸºäºJavaçš„Springæ³¨è§£é…ç½®-ç»™ä¸€äº›æ³¨è§£çš„ä¾‹å­\" class=\"headerlink\" title=\"ä»€ä¹ˆæ˜¯åŸºäºJavaçš„Springæ³¨è§£é…ç½®? ç»™ä¸€äº›æ³¨è§£çš„ä¾‹å­\"></a>ä»€ä¹ˆæ˜¯åŸºäºJavaçš„Springæ³¨è§£é…ç½®? ç»™ä¸€äº›æ³¨è§£çš„ä¾‹å­</h3><p>åŸºäºJavaçš„é…ç½®ï¼Œå…è®¸ä½ åœ¨å°‘é‡çš„Javaæ³¨è§£çš„å¸®åŠ©ä¸‹ï¼Œè¿›è¡Œä½ çš„å¤§éƒ¨åˆ†Springé…ç½®è€Œéé€šè¿‡XMLæ–‡ä»¶ã€‚</p>\n<p>ä»¥@Configuration æ³¨è§£ä¸ºä¾‹ï¼Œå®ƒç”¨æ¥æ ‡è®°ç±»å¯ä»¥å½“åšä¸€ä¸ªbeançš„å®šä¹‰ï¼Œè¢«Spring IOCå®¹å™¨ä½¿ç”¨ã€‚</p>\n<p>å¦ä¸€ä¸ªä¾‹å­æ˜¯@Beanæ³¨è§£ï¼Œå®ƒè¡¨ç¤ºæ­¤æ–¹æ³•å°†è¦è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œä½œä¸ºä¸€ä¸ªbeanæ³¨å†Œè¿›Springåº”ç”¨ä¸Šä¸‹æ–‡ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Configuration</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">StudentConfig</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@Bean</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> StudentBean <span class=\"title function_\">myStudent</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"title class_\">StudentBean</span>();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"æ€æ ·å¼€å¯æ³¨è§£è£…é…ï¼Ÿ\"><a href=\"#æ€æ ·å¼€å¯æ³¨è§£è£…é…ï¼Ÿ\" class=\"headerlink\" title=\"æ€æ ·å¼€å¯æ³¨è§£è£…é…ï¼Ÿ\"></a>æ€æ ·å¼€å¯æ³¨è§£è£…é…ï¼Ÿ</h3><p>æ³¨è§£è£…é…åœ¨é»˜è®¤æƒ…å†µä¸‹æ˜¯ä¸å¼€å¯çš„ï¼Œä¸ºäº†ä½¿ç”¨æ³¨è§£è£…é…ï¼Œå¿…é¡»åœ¨Springé…ç½®æ–‡ä»¶ä¸­é…ç½® <code>&lt;context:annotation-config/&gt;</code>ã€‚</p>\n<h3 id=\"Component-Controller-Repository-Service-æœ‰ä½•åŒºåˆ«ï¼Ÿ\"><a href=\"#Component-Controller-Repository-Service-æœ‰ä½•åŒºåˆ«ï¼Ÿ\" class=\"headerlink\" title=\"@Component, @Controller, @Repository, @Service æœ‰ä½•åŒºåˆ«ï¼Ÿ\"></a>@Component, @Controller, @Repository, @Service æœ‰ä½•åŒºåˆ«ï¼Ÿ</h3><p>@Componentï¼šè¿™å°† Java ç±»æ ‡è®°ä¸º beanã€‚spring çš„ç»„ä»¶æ‰«ææœºåˆ¶å¯ä»¥å°†å…¶æ‰«æå¹¶å°†å…¶æ³¨å†Œåˆ°IoCå®¹å™¨ä¸­ã€‚</p>\n<p>@Controllerï¼šè¿™å°†ä¸€ä¸ªç±»æ ‡è®°ä¸º Spring Web MVC æ§åˆ¶å™¨ã€‚æ ‡æœ‰å®ƒçš„ Bean ä¼šè‡ªåŠ¨å¯¼å…¥åˆ° IoC å®¹å™¨ä¸­ã€‚</p>\n<p>@Serviceï¼šæ­¤æ³¨è§£æ˜¯ç»„ä»¶æ³¨è§£çš„ç‰¹åŒ–ã€‚å®ƒä¸ä¼šå¯¹ @Component æ³¨è§£æä¾›ä»»ä½•å…¶ä»–è¡Œä¸ºã€‚æ‚¨å¯ä»¥åœ¨æœåŠ¡å±‚ç±»ä¸­ä½¿ç”¨ @Service è€Œä¸æ˜¯ @Componentï¼Œå› ä¸ºå®ƒä»¥æ›´å¥½çš„æ–¹å¼æŒ‡å®šäº†æ„å›¾ã€‚</p>\n<p>@Repositoryï¼šè¿™ä¸ªæ³¨è§£æ˜¯å…·æœ‰ç±»ä¼¼ç”¨é€”å’ŒåŠŸèƒ½çš„ @Component æ³¨è§£çš„ç‰¹åŒ–ã€‚å®ƒä¸º DAO æä¾›äº†é¢å¤–çš„å¥½å¤„ã€‚å®ƒå°† DAO å¯¼å…¥ IoC å®¹å™¨ï¼Œå¹¶ä½¿æœªç»æ£€æŸ¥çš„å¼‚å¸¸æœ‰èµ„æ ¼è½¬æ¢ä¸º Spring DataAccessExceptionã€‚</p>\n<h3 id=\"Required-æ³¨è§£æœ‰ä»€ä¹ˆä½œç”¨\"><a href=\"#Required-æ³¨è§£æœ‰ä»€ä¹ˆä½œç”¨\" class=\"headerlink\" title=\"@Required æ³¨è§£æœ‰ä»€ä¹ˆä½œç”¨\"></a>@Required æ³¨è§£æœ‰ä»€ä¹ˆä½œç”¨</h3><p><code>@Required</code>æ³¨è§£ä½œç”¨äºBean<code>setter</code>æ–¹æ³•ä¸Šï¼Œç”¨äºæ£€æŸ¥ä¸€ä¸ªBeançš„å±æ€§çš„å€¼<strong>åœ¨é…ç½®æœŸé—´æ˜¯å¦è¢«èµ‹äºˆæˆ–è®¾ç½®</strong>ï¼Œå¦‚æœæœªè¢«è®¾ç½®ï¼Œå®¹å™¨å°†æŠ›å‡ºBeanInitializationExceptionã€‚ç¤ºä¾‹ï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">Employee</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String name;</span><br><span class=\"line\">    <span class=\"meta\">@Required</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">setName</span><span class=\"params\">(String name)</span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.name=name;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> string <span class=\"title function_\">getName</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> name;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Autowiredå’Œ-Resourceä¹‹é—´çš„åŒºåˆ«\"><a href=\"#Autowiredå’Œ-Resourceä¹‹é—´çš„åŒºåˆ«\" class=\"headerlink\" title=\"@Autowiredå’Œ@Resourceä¹‹é—´çš„åŒºåˆ«\"></a>@Autowiredå’Œ@Resourceä¹‹é—´çš„åŒºåˆ«</h3><p>@Autowiredå¯ç”¨äºï¼šæ„é€ å‡½æ•°ã€æˆå‘˜å˜é‡ã€Setteræ–¹æ³•</p>\n<p>@Autowiredå’Œ@Resourceä¹‹é—´çš„åŒºåˆ«</p>\n<ul>\n<li>@Autowiredé»˜è®¤æ˜¯<strong>æŒ‰ç…§ç±»å‹è£…é…æ³¨å…¥</strong>çš„ï¼Œé»˜è®¤æƒ…å†µä¸‹å®ƒè¦æ±‚ä¾èµ–å¯¹è±¡å¿…é¡»å­˜åœ¨ï¼ˆå¯ä»¥è®¾ç½®å®ƒrequiredå±æ€§ä¸ºfalseï¼‰ã€‚</li>\n<li>@Resourceé»˜è®¤æ˜¯<strong>æŒ‰ç…§åç§°æ¥è£…é…æ³¨å…¥</strong>çš„ï¼Œåªæœ‰å½“æ‰¾ä¸åˆ°ä¸åç§°åŒ¹é…çš„beanæ‰ä¼šæŒ‰ç…§ç±»å‹æ¥è£…é…æ³¨å…¥ã€‚</li>\n</ul>\n<h3 id=\"Qualifier-æ³¨è§£æœ‰ä»€ä¹ˆä½œç”¨\"><a href=\"#Qualifier-æ³¨è§£æœ‰ä»€ä¹ˆä½œç”¨\" class=\"headerlink\" title=\"@Qualifier æ³¨è§£æœ‰ä»€ä¹ˆä½œç”¨\"></a>@Qualifier æ³¨è§£æœ‰ä»€ä¹ˆä½œç”¨</h3><p>å½“æ‚¨åˆ›å»ºå¤šä¸ªç›¸åŒç±»å‹çš„ bean å¹¶å¸Œæœ›ä»…ä½¿ç”¨å±æ€§è£…é…å…¶ä¸­ä¸€ä¸ª bean æ—¶ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨@Qualifier æ³¨è§£å’Œ @Autowired é€šè¿‡æŒ‡å®šåº”è¯¥è£…é…å“ªä¸ªç¡®åˆ‡çš„ bean æ¥æ¶ˆé™¤æ­§ä¹‰ã€‚</p>\n<h3 id=\"RequestMapping-æ³¨è§£æœ‰ä»€ä¹ˆç”¨ï¼Ÿ\"><a href=\"#RequestMapping-æ³¨è§£æœ‰ä»€ä¹ˆç”¨ï¼Ÿ\" class=\"headerlink\" title=\"@RequestMapping æ³¨è§£æœ‰ä»€ä¹ˆç”¨ï¼Ÿ\"></a>@RequestMapping æ³¨è§£æœ‰ä»€ä¹ˆç”¨ï¼Ÿ</h3><p>@RequestMapping æ³¨è§£ç”¨äºå°†ç‰¹å®š HTTP è¯·æ±‚æ–¹æ³•æ˜ å°„åˆ°å°†å¤„ç†ç›¸åº”è¯·æ±‚çš„æ§åˆ¶å™¨ä¸­çš„ç‰¹å®šç±»&#x2F;æ–¹æ³•ã€‚æ­¤æ³¨é‡Šå¯åº”ç”¨äºä¸¤ä¸ªçº§åˆ«ï¼š</p>\n<ul>\n<li>ç±»çº§åˆ«ï¼šæ˜ å°„è¯·æ±‚çš„ URL</li>\n<li>æ–¹æ³•çº§åˆ«ï¼šæ˜ å°„ URL ä»¥åŠ HTTP è¯·æ±‚æ–¹æ³•</li>\n</ul>\n<h2 id=\"Springäº‹åŠ¡\"><a href=\"#Springäº‹åŠ¡\" class=\"headerlink\" title=\"Springäº‹åŠ¡\"></a>Springäº‹åŠ¡</h2><h3 id=\"Springæ”¯æŒçš„äº‹åŠ¡ç®¡ç†ç±»å‹-x2F-äº‹åŠ¡å®ç°æ–¹å¼æœ‰å“ªäº›ï¼Ÿ\"><a href=\"#Springæ”¯æŒçš„äº‹åŠ¡ç®¡ç†ç±»å‹-x2F-äº‹åŠ¡å®ç°æ–¹å¼æœ‰å“ªäº›ï¼Ÿ\" class=\"headerlink\" title=\"Springæ”¯æŒçš„äº‹åŠ¡ç®¡ç†ç±»å‹&#x2F;äº‹åŠ¡å®ç°æ–¹å¼æœ‰å“ªäº›ï¼Ÿ\"></a>Springæ”¯æŒçš„äº‹åŠ¡ç®¡ç†ç±»å‹&#x2F;äº‹åŠ¡å®ç°æ–¹å¼æœ‰å“ªäº›ï¼Ÿ</h3><p>Springæ”¯æŒä¸¤ç§ç±»å‹çš„äº‹åŠ¡ç®¡ç†ï¼š</p>\n<p><strong>ç¼–ç¨‹å¼äº‹åŠ¡ç®¡ç†</strong>ï¼šè¿™æ„å‘³ä½ é€šè¿‡ç¼–ç¨‹çš„æ–¹å¼ç®¡ç†äº‹åŠ¡ï¼Œç»™ä½ å¸¦æ¥æå¤§çš„çµæ´»æ€§ï¼Œä½†æ˜¯éš¾ç»´æŠ¤ã€‚</p>\n<p><strong>å£°æ˜å¼äº‹åŠ¡ç®¡ç†</strong>ï¼šè¿™æ„å‘³ç€ä½ å¯ä»¥å°†ä¸šåŠ¡ä»£ç å’Œäº‹åŠ¡ç®¡ç†åˆ†ç¦»ï¼Œä½ åªéœ€ç”¨æ³¨è§£å’ŒXMLé…ç½®æ¥ç®¡ç†äº‹åŠ¡ã€‚</p>\n<h3 id=\"Springäº‹åŠ¡çš„å®ç°æ–¹å¼å’Œå®ç°åŸç†\"><a href=\"#Springäº‹åŠ¡çš„å®ç°æ–¹å¼å’Œå®ç°åŸç†\" class=\"headerlink\" title=\"Springäº‹åŠ¡çš„å®ç°æ–¹å¼å’Œå®ç°åŸç†\"></a>Springäº‹åŠ¡çš„å®ç°æ–¹å¼å’Œå®ç°åŸç†</h3><p>Springäº‹åŠ¡çš„æœ¬è´¨å…¶å®å°±æ˜¯æ•°æ®åº“å¯¹äº‹åŠ¡çš„æ”¯æŒï¼Œæ²¡æœ‰æ•°æ®åº“çš„äº‹åŠ¡æ”¯æŒï¼ŒSpringæ˜¯æ— æ³•æä¾›äº‹åŠ¡åŠŸèƒ½çš„ã€‚</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- 2ã€é…ç½®äº‹åŠ¡çš„é€šçŸ¥ä»¥åŠäº‹åŠ¡çš„å±æ€§--&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">tx:advice</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;txAdvice&quot;</span> <span class=\"attr\">transaction-manager</span>=<span class=\"string\">&quot;transactionManager&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- é…ç½®äº‹åŠ¡çš„å±æ€§</span></span><br><span class=\"line\"><span class=\"comment\">isolationï¼šç”¨äºæŒ‡å®šäº‹åŠ¡çš„éš”ç¦»çº§åˆ«ã€‚é»˜è®¤å€¼æ˜¯DEFAULTï¼Œè¡¨ç¤ºä½¿ç”¨æ•°æ®åº“çš„é»˜è®¤éš”</span></span><br><span class=\"line\"><span class=\"comment\">ç¦»çº§åˆ«ã€‚</span></span><br><span class=\"line\"><span class=\"comment\">propagationï¼šç”¨äºæŒ‡å®šäº‹åŠ¡çš„ä¼ æ’­è¡Œä¸ºã€‚é»˜è®¤å€¼æ˜¯REQUIRED(å¢åˆ æ”¹)ï¼Œè¡¨ç¤ºä¸€å®šä¼š</span></span><br><span class=\"line\"><span class=\"comment\">æœ‰äº‹åŠ¡ã€‚æŸ¥è¯¢æ–¹æ³•å¯ä»¥é€‰æ‹©SUPPORTSã€‚</span></span><br><span class=\"line\"><span class=\"comment\">read-onlyï¼šç”¨äºæŒ‡å®šäº‹åŠ¡æ˜¯å¦åªè¯»ã€‚åªæœ‰æŸ¥è¯¢æ–¹æ³•æ‰èƒ½è®¾ç½®ä¸ºtrueã€‚é»˜è®¤å€¼æ˜¯</span></span><br><span class=\"line\"><span class=\"comment\">falseï¼Œè¡¨ç¤ºè¯»å†™ã€‚</span></span><br><span class=\"line\"><span class=\"comment\">timeoutï¼šç”¨äºæŒ‡å®šäº‹åŠ¡çš„è¶…æ—¶æ—¶é—´ï¼Œé»˜è®¤å€¼æ˜¯-1ï¼Œè¡¨ç¤ºæ°¸ä¸è¶…æ—¶ã€‚å¦‚æœæŒ‡å®šäº†æ•°å€¼ï¼Œ</span></span><br><span class=\"line\"><span class=\"comment\">ä»¥ç§’ä¸ºå•ä½ã€‚</span></span><br><span class=\"line\"><span class=\"comment\">rollback-forï¼šç”¨äºæŒ‡å®šä¸€ä¸ªå¼‚å¸¸ï¼Œå½“äº§ç”Ÿè¯¥å¼‚å¸¸æ—¶ï¼Œäº‹åŠ¡å›æ»šï¼Œäº§ç”Ÿå…¶ä»–å¼‚å¸¸æ—¶ï¼Œ</span></span><br><span class=\"line\"><span class=\"comment\">äº‹åŠ¡ä¸å›æ»šã€‚æ²¡æœ‰é»˜è®¤å€¼ã€‚è¡¨ç¤ºä»»ä½•å¼‚å¸¸éƒ½å›æ»šã€‚</span></span><br><span class=\"line\"><span class=\"comment\">no-rollback-forï¼šç”¨äºæŒ‡å®šä¸€ä¸ªå¼‚å¸¸ï¼Œå½“äº§ç”Ÿè¯¥å¼‚å¸¸æ—¶ï¼Œäº‹åŠ¡ä¸å›æ»šï¼Œäº§ç”Ÿå…¶ä»–å¼‚å¸¸</span></span><br><span class=\"line\"><span class=\"comment\">æ—¶äº‹åŠ¡å›æ»šã€‚æ²¡æœ‰é»˜è®¤å€¼ã€‚è¡¨ç¤ºä»»ä½•å¼‚å¸¸éƒ½å›æ»šã€‚</span></span><br><span class=\"line\"><span class=\"comment\">--&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">tx:attributes</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!--éæŸ¥è¯¢æ–¹æ³•--&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">tx:method</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;*&quot;</span> <span class=\"attr\">propagation</span>=<span class=\"string\">&quot;REQUIRED&quot;</span> <span class=\"attr\">read-only</span>=<span class=\"string\">&quot;false&quot;</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!--æŸ¥è¯¢æ–¹æ³•--&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">tx:method</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;find*&quot;</span> <span class=\"attr\">propagation</span>=<span class=\"string\">&quot;SUPPORTS&quot;</span> <span class=\"attr\">read-only</span>=<span class=\"string\">&quot;true&quot;</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">tx:attributes</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">tx:advice</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"è¯´ä¸€ä¸‹Springçš„äº‹åŠ¡ä¼ æ’­è¡Œä¸º\"><a href=\"#è¯´ä¸€ä¸‹Springçš„äº‹åŠ¡ä¼ æ’­è¡Œä¸º\" class=\"headerlink\" title=\"è¯´ä¸€ä¸‹Springçš„äº‹åŠ¡ä¼ æ’­è¡Œä¸º\"></a>è¯´ä¸€ä¸‹Springçš„äº‹åŠ¡ä¼ æ’­è¡Œä¸º</h3><p>springäº‹åŠ¡çš„ä¼ æ’­è¡Œä¸ºè¯´çš„æ˜¯ï¼Œå½“å¤šä¸ªäº‹åŠ¡åŒæ—¶å­˜åœ¨çš„æ—¶å€™ï¼Œspringå¦‚ä½•å¤„ç†è¿™äº›äº‹åŠ¡çš„è¡Œä¸ºã€‚</p>\n<blockquote>\n<p>â‘  <strong>PROPAGATION_REQUIRED</strong>ï¼šå¦‚æœå½“å‰æ²¡æœ‰äº‹åŠ¡ï¼Œå°±åˆ›å»ºä¸€ä¸ªæ–°äº‹åŠ¡ï¼Œå¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œå°±åŠ å…¥è¯¥äº‹åŠ¡ï¼Œè¯¥è®¾ç½®æ˜¯æœ€å¸¸ç”¨çš„è®¾ç½®ã€‚ï¼ˆé»˜è®¤å€¼ï¼Œé€‚ç”¨äºéæŸ¥è¯¢æ–¹æ³•ï¼Œå¢åˆ æ”¹ï¼‰ï¼ˆäº‹åŠ¡å­˜åœ¨å°±ç”¨ä¸å­˜åœ¨è¦åˆ›å»ºï¼‰<br>â‘¡ <strong>PROPAGATION_SUPPORTS</strong>ï¼šæ”¯æŒå½“å‰äº‹åŠ¡ï¼Œå¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œå°±åŠ å…¥è¯¥äº‹åŠ¡ï¼Œå¦‚æœå½“å‰ä¸å­˜åœ¨äº‹åŠ¡ï¼Œå°±ä»¥éäº‹åŠ¡æ‰§è¡Œã€‚ï¼ˆé€‚ç”¨äºæŸ¥è¯¢æ–¹æ³•ï¼‰ï¼ˆäº‹åŠ¡å­˜åœ¨å°±ç”¨ä¸å­˜åœ¨å°±ä¸ç”¨ï¼‰<br>â‘¢ PROPAGATION_MANDATORYï¼šæ”¯æŒå½“å‰äº‹åŠ¡ï¼Œå¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œå°±åŠ å…¥è¯¥äº‹åŠ¡ï¼Œå¦‚æœå½“å‰ä¸å­˜åœ¨äº‹åŠ¡ï¼Œå°±æŠ›å‡ºå¼‚å¸¸ã€‚<br>â‘£ <strong>PROPAGATION_REQUIRES_NEW</strong>ï¼šåˆ›å»ºæ–°äº‹åŠ¡ï¼Œæ— è®ºå½“å‰å­˜ä¸å­˜åœ¨äº‹åŠ¡ï¼Œéƒ½åˆ›å»ºæ–°äº‹åŠ¡ã€‚ï¼ˆæ°¸è¿œéƒ½è¦æ–°äº‹åŠ¡ï¼‰<br>â‘¤ PROPAGATION_NOT_SUPPORTEDï¼šä»¥éäº‹åŠ¡æ–¹å¼æ‰§è¡Œæ“ä½œï¼Œå¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œå°±æŠŠå½“å‰äº‹åŠ¡æŒ‚èµ·ã€‚<br>â‘¥ PROPAGATION_NEVERï¼šä»¥éäº‹åŠ¡æ–¹å¼æ‰§è¡Œï¼Œå¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œåˆ™æŠ›å‡ºå¼‚å¸¸ã€‚<br>â‘¦ PROPAGATION_NESTEDï¼šå¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œåˆ™åœ¨åµŒå¥—äº‹åŠ¡å†…æ‰§è¡Œã€‚å¦‚æœå½“å‰æ²¡æœ‰äº‹åŠ¡ï¼Œåˆ™æŒ‰REQUIREDå±æ€§æ‰§è¡Œã€‚</p>\n</blockquote>\n<h3 id=\"è¯´ä¸€ä¸‹-spring-çš„äº‹åŠ¡éš”ç¦»ï¼Ÿ\"><a href=\"#è¯´ä¸€ä¸‹-spring-çš„äº‹åŠ¡éš”ç¦»ï¼Ÿ\" class=\"headerlink\" title=\"è¯´ä¸€ä¸‹ spring çš„äº‹åŠ¡éš”ç¦»ï¼Ÿ\"></a>è¯´ä¸€ä¸‹ spring çš„äº‹åŠ¡éš”ç¦»ï¼Ÿ</h3><p>spring æœ‰äº”å¤§éš”ç¦»çº§åˆ«ï¼Œé»˜è®¤å€¼ä¸º ISOLATION_DEFAULTï¼ˆä½¿ç”¨æ•°æ®åº“çš„è®¾ç½®ï¼‰ï¼Œå…¶ä»–å››ä¸ªéš”ç¦»çº§åˆ«å’Œæ•°æ®åº“çš„éš”ç¦»çº§åˆ«ä¸€è‡´ï¼š</p>\n<ol>\n<li>ISOLATION_DEFAULTï¼šç”¨åº•å±‚æ•°æ®åº“çš„è®¾ç½®éš”ç¦»çº§åˆ«ï¼Œæ•°æ®åº“è®¾ç½®çš„æ˜¯ä»€ä¹ˆæˆ‘å°±ç”¨ä»€ä¹ˆï¼›</li>\n<li>ISOLATION_READ_UNCOMMITTEDï¼šè¯»æœªæäº¤ï¼Œæœ€ä½éš”ç¦»çº§åˆ«ã€äº‹åŠ¡æœªæäº¤å‰ï¼Œå°±å¯è¢«å…¶ä»–äº‹åŠ¡è¯»å–ï¼ˆä¼šå‡ºç°è„è¯»ã€ä¸å¯é‡å¤è¯»ã€å¹»è¯»ï¼‰ï¼›</li>\n<li>ISOLATION_READ_COMMITTEDï¼šè¯»å·²æäº¤ï¼Œä¸€ä¸ªäº‹åŠ¡æäº¤åæ‰èƒ½è¢«å…¶ä»–äº‹åŠ¡è¯»å–åˆ°ï¼ˆä¼šé€ æˆä¸å¯é‡å¤è¯»ã€å¹»è¯»ï¼‰ï¼ŒSQL server çš„é»˜è®¤çº§åˆ«ï¼›</li>\n<li>ISOLATION_REPEATABLE_READï¼šå¯é‡å¤è¯»ï¼Œä¿è¯å¤šæ¬¡è¯»å–åŒä¸€ä¸ªæ•°æ®æ—¶ï¼Œå…¶å€¼éƒ½å’Œäº‹åŠ¡å¼€å§‹æ—¶å€™çš„å†…å®¹æ˜¯ä¸€è‡´ï¼Œç¦æ­¢è¯»å–åˆ°åˆ«çš„äº‹åŠ¡æœªæäº¤çš„æ•°æ®ï¼ˆä¼šé€ æˆå¹»è¯»ï¼‰ï¼ŒMySQL çš„é»˜è®¤çº§åˆ«ï¼›</li>\n<li>ISOLATION_SERIALIZABLEï¼šåºåˆ—åŒ–ï¼Œä»£ä»·æœ€é«˜æœ€å¯é çš„éš”ç¦»çº§åˆ«ï¼Œè¯¥éš”ç¦»çº§åˆ«èƒ½é˜²æ­¢è„è¯»ã€ä¸å¯é‡å¤è¯»ã€å¹»è¯»ã€‚</li>\n</ol>\n<h2 id=\"Springé¢å‘åˆ‡é¢ç¼–ç¨‹-AOP\"><a href=\"#Springé¢å‘åˆ‡é¢ç¼–ç¨‹-AOP\" class=\"headerlink\" title=\"Springé¢å‘åˆ‡é¢ç¼–ç¨‹(AOP)\"></a>Springé¢å‘åˆ‡é¢ç¼–ç¨‹(AOP)</h2><h3 id=\"ä»€ä¹ˆæ˜¯AOP\"><a href=\"#ä»€ä¹ˆæ˜¯AOP\" class=\"headerlink\" title=\"ä»€ä¹ˆæ˜¯AOP\"></a>ä»€ä¹ˆæ˜¯AOP</h3><p>OOP(Object-Oriented Programming)é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼Œå…è®¸å¼€å‘è€…å®šä¹‰çºµå‘çš„å…³ç³»ï¼Œä½†å¹¶é€‚ç”¨äºå®šä¹‰æ¨ªå‘çš„å…³ç³»ï¼Œå¯¼è‡´äº†å¤§é‡ä»£ç çš„é‡å¤ï¼Œè€Œä¸åˆ©äºå„ä¸ªæ¨¡å—çš„é‡ç”¨ã€‚</p>\n<p>AOP(Aspect-Oriented Programming)ï¼Œä¸€èˆ¬ç§°ä¸ºé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼Œä½œä¸ºé¢å‘å¯¹è±¡çš„ä¸€ç§è¡¥å……ï¼Œå°†ä¸€äº›<strong>å…¬å…±è¡Œä¸ºå’Œé€»è¾‘ï¼ŒæŠ½å–å¹¶å°è£…ä¸ºä¸€ä¸ªå¯é‡ç”¨çš„æ¨¡å—ï¼Œå‡å°‘ç³»ç»Ÿä¸­çš„é‡å¤ä»£ç ï¼Œé™ä½äº†æ¨¡å—é—´çš„è€¦åˆåº¦ï¼ŒåŒæ—¶æé«˜äº†ç³»ç»Ÿçš„å¯ç»´æŠ¤æ€§ã€‚å¯ç”¨äºæƒé™è®¤è¯ã€æ—¥å¿—ã€äº‹åŠ¡å¤„ç†ç­‰</strong>ã€‚</p>\n<h3 id=\"Spring-AOP-and-AspectJ-AOP-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼ŸAOP-æœ‰å“ªäº›å®ç°æ–¹å¼ï¼Ÿ\"><a href=\"#Spring-AOP-and-AspectJ-AOP-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼ŸAOP-æœ‰å“ªäº›å®ç°æ–¹å¼ï¼Ÿ\" class=\"headerlink\" title=\"Spring AOP and AspectJ AOP æœ‰ä»€ä¹ˆåŒºåˆ«ï¼ŸAOP æœ‰å“ªäº›å®ç°æ–¹å¼ï¼Ÿ\"></a>Spring AOP and AspectJ AOP æœ‰ä»€ä¹ˆåŒºåˆ«ï¼ŸAOP æœ‰å“ªäº›å®ç°æ–¹å¼ï¼Ÿ</h3><p>AOPå®ç°çš„å…³é”®åœ¨äº ä»£ç†æ¨¡å¼ï¼ŒAOPä»£ç†ä¸»è¦åˆ†ä¸ºé™æ€ä»£ç†ï¼ˆAspectJï¼‰å’ŒåŠ¨æ€ä»£ç†ï¼ˆSpring AOPï¼‰ã€‚</p>\n<p>ï¼ˆ1ï¼‰AspectJ é‡‡ç”¨é™æ€ä»£ç†æ¨¡å¼ï¼Œå±äº<strong>ç¼–è¯‘æ—¶å¢å¼º</strong>ï¼Œä¼šåœ¨ç¼–è¯‘é˜¶æ®µç»‡å…¥åˆ‡é¢ç”Ÿæˆç›¸åº”çš„ä»£ç†å¯¹è±¡</p>\n<p>ï¼ˆ2ï¼‰Spring AOP é‡‡ç”¨åŠ¨æ€ä»£ç†æ¨¡å¼ï¼Œå±äº<strong>è¿è¡Œæ—¶å¢å¼º</strong>ï¼Œæ¯æ¬¡è¿è¡Œæ—¶ç»‡å…¥åˆ‡é¢åœ¨å†…å­˜ä¸­ä¸´æ—¶ç”Ÿæˆç›¸åº”çš„ä»£ç†å¯¹è±¡</p>\n<h3 id=\"JDKåŠ¨æ€ä»£ç†å’ŒCGLIBåŠ¨æ€ä»£ç†çš„åŒºåˆ«\"><a href=\"#JDKåŠ¨æ€ä»£ç†å’ŒCGLIBåŠ¨æ€ä»£ç†çš„åŒºåˆ«\" class=\"headerlink\" title=\"JDKåŠ¨æ€ä»£ç†å’ŒCGLIBåŠ¨æ€ä»£ç†çš„åŒºåˆ«\"></a>JDKåŠ¨æ€ä»£ç†å’ŒCGLIBåŠ¨æ€ä»£ç†çš„åŒºåˆ«</h3><p>JDK åŠ¨æ€ä»£ç†ä¸»è¦æ˜¯é’ˆå¯¹ç±»å®ç°äº†æŸä¸ªæ¥å£ï¼ŒAOP åˆ™ä¼šä½¿ç”¨ JDK åŠ¨æ€ä»£ç†ã€‚åŸºäºåå°„çš„æœºåˆ¶å®ç°ï¼Œç”Ÿæˆä¸€ä¸ªå®ç°è¯¥æ¥å£çš„ä¸€ä¸ªä»£ç†ç±»ï¼Œç„¶åé€šè¿‡é‡å†™æ–¹æ³•çš„æ–¹å¼ï¼Œå®ç°å¯¹ä»£ç çš„å¢å¼ºã€‚</p>\n<p>è€Œå¦‚æœæŸä¸ªç±»æ²¡æœ‰å®ç°æ¥å£ï¼ŒAOP åˆ™ä¼šä½¿ç”¨ CGLIB ä»£ç†ã€‚åº•å±‚åŸç†æ˜¯<strong>åŸºäº asm ç¬¬ä¸‰æ–¹æ¡†æ¶</strong>ï¼Œé€šè¿‡ä¿®æ”¹å­—èŠ‚ç ç”Ÿæˆä¸€ä¸ªå­ç±»ï¼Œç„¶åé‡å†™çˆ¶ç±»çš„æ–¹æ³•ï¼Œå®ç°å¯¹ä»£ç çš„å¢å¼ºã€‚</p>\n<blockquote>\n<p>ä½œè€…ï¼šé˜¿é‡Œäº‘äº‘æ –å·</p>\n<p>é“¾æ¥ï¼š<a href=\"https://zhuanlan.zhihu.com/p/368769721\">https://zhuanlan.zhihu.com/p/368769721</a></p>\n<p>æ¥æºï¼šçŸ¥ä¹</p>\n<p>è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚</p>\n</blockquote>\n<h3 id=\"è§£é‡Šä¸€ä¸‹Spring-AOPé‡Œé¢çš„å‡ ä¸ªåè¯\"><a href=\"#è§£é‡Šä¸€ä¸‹Spring-AOPé‡Œé¢çš„å‡ ä¸ªåè¯\" class=\"headerlink\" title=\"è§£é‡Šä¸€ä¸‹Spring AOPé‡Œé¢çš„å‡ ä¸ªåè¯\"></a>è§£é‡Šä¸€ä¸‹Spring AOPé‡Œé¢çš„å‡ ä¸ªåè¯</h3><p>ï¼ˆ1ï¼‰åˆ‡é¢ï¼ˆAspectï¼‰ï¼šåˆ‡é¢æ˜¯é€šçŸ¥å’Œåˆ‡ç‚¹çš„ç»“åˆã€‚ åœ¨Spring AOPä¸­ï¼Œåˆ‡é¢å¯ä»¥ä½¿ç”¨é€šç”¨ç±»ï¼ˆåŸºäºæ¨¡å¼çš„é£æ ¼ï¼‰ æˆ–è€…åœ¨æ™®é€šç±»ä¸­ä»¥ @AspectJ æ³¨è§£æ¥å®ç°ã€‚</p>\n<p>ï¼ˆ2ï¼‰è¿æ¥ç‚¹ï¼ˆJoin pointï¼‰ï¼šæ–¹æ³•</p>\n<p>ï¼ˆ3ï¼‰é€šçŸ¥ï¼ˆAdviceï¼‰ï¼šåœ¨è¦å¢å¼ºä¸Šçš„è¿æ¥ç‚¹ä¸Šè¦è¿›è¡Œæ€æ ·çš„å¢å¼º</p>\n<p>ï¼ˆ4ï¼‰åˆ‡å…¥ç‚¹ï¼ˆPointcutï¼‰ï¼šå“ªäº›è¿æ¥ç‚¹éœ€è¦å¢å¼º</p>\n<p>ï¼ˆ5ï¼‰ç›®æ ‡å¯¹è±¡ï¼ˆTarget Objectï¼‰ï¼š è¢«ä»£ç†ï¼ˆproxiedï¼‰ å¯¹è±¡ã€‚</p>\n<p>ï¼ˆ6ï¼‰ç»‡å…¥ï¼ˆWeavingï¼‰ï¼šç»‡å…¥æ˜¯æŠŠåˆ‡é¢åº”ç”¨åˆ°ç›®æ ‡å¯¹è±¡å¹¶åˆ›å»ºæ–°çš„ä»£ç†å¯¹è±¡çš„è¿‡ç¨‹ã€‚</p>\n<p>ï¼ˆ7ï¼‰Proxyï¼ˆä»£ç†ï¼‰ï¼šä¸€ä¸ªç±»è¢«AOPç»‡å…¥å¢å¼ºåï¼Œå°±äº§ç”Ÿä¸€ä¸ªç»“æœä»£ç†ç±»ã€‚</p>\n<blockquote>\n<ul>\n<li>ç¼–è¯‘æœŸï¼šåˆ‡é¢åœ¨ç›®æ ‡ç±»ç¼–è¯‘æ—¶è¢«ç»‡å…¥ã€‚AspectJçš„ç»‡å…¥ç¼–è¯‘å™¨æ˜¯ä»¥è¿™ç§æ–¹å¼ç»‡å…¥åˆ‡é¢çš„ã€‚</li>\n<li>ç±»åŠ è½½æœŸï¼šåˆ‡é¢åœ¨ç›®æ ‡ç±»åŠ è½½åˆ°JVMæ—¶è¢«ç»‡å…¥ã€‚éœ€è¦ç‰¹æ®Šçš„ç±»åŠ è½½å™¨ï¼Œå®ƒå¯ä»¥åœ¨ç›®æ ‡ç±»è¢«å¼•å…¥åº”ç”¨ä¹‹å‰å¢å¼ºè¯¥ç›®æ ‡ç±»çš„å­—èŠ‚ç ã€‚AspectJ5çš„åŠ è½½æ—¶ç»‡å…¥å°±æ”¯æŒä»¥è¿™ç§æ–¹å¼ç»‡å…¥åˆ‡é¢ã€‚</li>\n<li>è¿è¡ŒæœŸï¼šåˆ‡é¢åœ¨åº”ç”¨è¿è¡Œçš„æŸä¸ªæ—¶åˆ»è¢«ç»‡å…¥ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œåœ¨ç»‡å…¥åˆ‡é¢æ—¶ï¼ŒAOPå®¹å™¨ä¼šä¸ºç›®æ ‡å¯¹è±¡åŠ¨æ€åœ°åˆ›å»ºä¸€ä¸ªä»£ç†å¯¹è±¡ã€‚SpringAOPå°±æ˜¯ä»¥è¿™ç§æ–¹å¼ç»‡å…¥åˆ‡é¢ã€‚</li>\n</ul>\n</blockquote>\n<h3 id=\"Springé€šçŸ¥æœ‰å“ªäº›ç±»å‹ï¼Ÿ\"><a href=\"#Springé€šçŸ¥æœ‰å“ªäº›ç±»å‹ï¼Ÿ\" class=\"headerlink\" title=\"Springé€šçŸ¥æœ‰å“ªäº›ç±»å‹ï¼Ÿ\"></a>Springé€šçŸ¥æœ‰å“ªäº›ç±»å‹ï¼Ÿ</h3><p>åœ¨AOPæœ¯è¯­ä¸­ï¼Œåˆ‡é¢çš„å·¥ä½œè¢«ç§°ä¸ºé€šçŸ¥ï¼Œå®é™…ä¸Šæ˜¯ç¨‹åºæ‰§è¡Œæ—¶è¦é€šè¿‡SpringAOPæ¡†æ¶è§¦å‘çš„ä»£ç æ®µã€‚</p>\n<p>Springåˆ‡é¢å¯ä»¥åº”ç”¨5ç§ç±»å‹çš„é€šçŸ¥ï¼š</p>\n<ol>\n<li>å‰ç½®é€šçŸ¥ï¼ˆBeforeï¼‰ï¼šåœ¨ç›®æ ‡æ–¹æ³•è¢«è°ƒç”¨ä¹‹å‰è°ƒç”¨é€šçŸ¥åŠŸèƒ½ï¼›</li>\n<li>åç½®é€šçŸ¥ï¼ˆAfterï¼‰ï¼šåœ¨ç›®æ ‡æ–¹æ³•å®Œæˆä¹‹åè°ƒç”¨é€šçŸ¥ï¼Œæ­¤æ—¶ä¸ä¼šå…³å¿ƒæ–¹æ³•çš„è¾“å‡ºæ˜¯ä»€ä¹ˆï¼›</li>\n<li>è¿”å›é€šçŸ¥ï¼ˆAfter-returning ï¼‰ï¼šåœ¨ç›®æ ‡æ–¹æ³•æˆåŠŸæ‰§è¡Œä¹‹åè°ƒç”¨é€šçŸ¥ï¼›</li>\n<li>å¼‚å¸¸é€šçŸ¥ï¼ˆAfter-throwingï¼‰ï¼šåœ¨ç›®æ ‡æ–¹æ³•æŠ›å‡ºå¼‚å¸¸åè°ƒç”¨é€šçŸ¥ï¼›</li>\n<li>ç¯ç»•é€šçŸ¥ï¼ˆAroundï¼‰ï¼šé€šçŸ¥åŒ…è£¹äº†è¢«é€šçŸ¥çš„æ–¹æ³•ï¼Œåœ¨è¢«é€šçŸ¥çš„æ–¹æ³•è°ƒç”¨ä¹‹å‰å’Œè°ƒç”¨ä¹‹åæ‰§è¡Œè‡ªå®šä¹‰çš„è¡Œä¸ºã€‚</li>\n</ol>\n<blockquote>\n<p>åŒä¸€ä¸ªaspectï¼Œä¸åŒadviceçš„æ‰§è¡Œé¡ºåºï¼š</p>\n<p>â‘ æ²¡æœ‰å¼‚å¸¸æƒ…å†µä¸‹çš„æ‰§è¡Œé¡ºåºï¼š</p>\n<p>around before advice\tæ–¹æ³•è°ƒç”¨ä¹‹å‰è‡ªå®šä¹‰è¡Œä¸º<br>before advice<br>target method æ‰§è¡Œ<br>around after advice\tæ–¹æ³•è°ƒç”¨åè‡ªå®šä¹‰è¡Œä¸º<br>after advice<br>afterReturning</p>\n<p>â‘¡æœ‰å¼‚å¸¸æƒ…å†µä¸‹çš„æ‰§è¡Œé¡ºåºï¼š</p>\n<p>around before advice<br>before advice<br>target method æ‰§è¡Œ<br>around after advice<br>after advice<br>afterThrowing:å¼‚å¸¸å‘ç”Ÿ<br>Java.lang.RuntimeException: å¼‚å¸¸å‘ç”Ÿ</p>\n</blockquote>\n<h3 id=\"ä»€ä¹ˆæ˜¯åˆ‡é¢-Aspectï¼Ÿ\"><a href=\"#ä»€ä¹ˆæ˜¯åˆ‡é¢-Aspectï¼Ÿ\" class=\"headerlink\" title=\"ä»€ä¹ˆæ˜¯åˆ‡é¢ Aspectï¼Ÿ\"></a>ä»€ä¹ˆæ˜¯åˆ‡é¢ Aspectï¼Ÿ</h3><p>aspect ç”± pointcount å’Œ advice ç»„æˆï¼Œåˆ‡é¢æ˜¯é€šçŸ¥å’Œåˆ‡ç‚¹çš„ç»“åˆã€‚<br>AOP çš„å·¥ä½œé‡å¿ƒåœ¨äºå¦‚ä½•å°†å¢å¼ºç¼–ç»‡ç›®æ ‡å¯¹è±¡çš„è¿æ¥ç‚¹ä¸Š, è¿™é‡ŒåŒ…å«ä¸¤ä¸ªå·¥ä½œ:  </p>\n<ul>\n<li>å¦‚ä½•é€šè¿‡ pointcut å’Œ advice å®šä½åˆ°ç‰¹å®šçš„ joinpoint ä¸Š</li>\n<li>å¦‚ä½•åœ¨ advice ä¸­ç¼–å†™åˆ‡é¢ä»£ç </li>\n</ul>\n<p>å¯ä»¥ç®€å•åœ°è®¤ä¸º, ä½¿ç”¨ @Aspect æ³¨è§£çš„ç±»å°±æ˜¯åˆ‡é¢</p>\n<p><img src=\"https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/TyporaNotes2020021212264438.png\" alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\"></p>\n","site":{"data":{}},"length":15032,"excerpt":"<blockquote>\n<p>æ•´ç†çš„Springæ¡†æ¶ç›¸å…³çŸ¥è¯†ç‚¹å’Œé¢è¯•é¢˜ï¼Œéƒ¨åˆ†å†…å®¹æ‘˜è‡ªç½‘ç»œï¼Œå¦‚æœ‰ä¾µæƒè¯·è”ç³»æˆ‘ï½","more":"</p>\n</blockquote>\n<h2 id=\"Springæ¦‚è¿°\"><a href=\"#Springæ¦‚è¿°\" class=\"headerlink\" title=\"Springæ¦‚è¿°\"></a>Springæ¦‚è¿°</h2><h3 id=\"ä»€ä¹ˆæ˜¯spring\"><a href=\"#ä»€ä¹ˆæ˜¯spring\" class=\"headerlink\" title=\"ä»€ä¹ˆæ˜¯spring?\"></a>ä»€ä¹ˆæ˜¯spring?</h3><p>Springæ˜¯<strong>ä¸€ä¸ªè½»é‡çº§Javaå¼€å‘æ¡†æ¶</strong>ï¼Œç›®çš„æ˜¯ä¸ºäº†è§£å†³å¼€å‘ä¸­çš„<strong>ä¸šåŠ¡é€»è¾‘å±‚å’Œå…¶ä»–å„å±‚çš„è€¦åˆé—®é¢˜</strong>ï¼Œç®€åŒ–Javaå¼€å‘ã€‚</p>\n<h3 id=\"Springæ¡†æ¶çš„æ ¸å¿ƒæ˜¯ä»€ä¹ˆ\"><a href=\"#Springæ¡†æ¶çš„æ ¸å¿ƒæ˜¯ä»€ä¹ˆ\" class=\"headerlink\" title=\"Springæ¡†æ¶çš„æ ¸å¿ƒæ˜¯ä»€ä¹ˆ\"></a>Springæ¡†æ¶çš„æ ¸å¿ƒæ˜¯ä»€ä¹ˆ</h3><p><strong>Springæ¡†æ¶çš„æ ¸å¿ƒ</strong>ï¼šIoCå®¹å™¨å’ŒAOPæ¨¡å—ã€‚<br>é€šè¿‡IoCå®¹å™¨ç®¡ç†Java Beanå¯¹è±¡åŠå…¶ç”Ÿå‘½å‘¨æœŸä»¥åŠä»–ä»¬ä¹‹é—´çš„è€¦åˆå…³ç³»ï¼›<br>é€šè¿‡AOPå°†ä¸€äº›å…¬å…±è¡Œä¸ºå’Œé€»è¾‘ï¼ŒæŠ½å–å¹¶å°è£…ä¸ºä¸€ä¸ªå¯é‡ç”¨çš„æ¨¡å—ï¼Œå‡å°‘ç³»ç»Ÿä¸­çš„é‡å¤ä»£ç ï¼Œé™ä½æ¨¡å—é—´çš„è€¦åˆåº¦</p>\n<h3 id=\"Springçš„ä¼˜ç¼ºç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ\"><a href=\"#Springçš„ä¼˜ç¼ºç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ\" class=\"headerlink\" title=\"Springçš„ä¼˜ç¼ºç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ\"></a>Springçš„ä¼˜ç¼ºç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ</h3><p>ä¼˜ç‚¹</p>\n<ul>\n<li><p>æ–¹ä¾¿è§£è€¦ï¼Œç®€åŒ–å¼€å‘ï¼ˆ<strong>IoC</strong>ï¼‰</p>\n<p>  Springå°±æ˜¯ä¸€ä¸ªå¤§å·¥å‚ï¼Œå¯ä»¥å°†æ‰€æœ‰å¯¹è±¡çš„åˆ›å»ºå’Œä¾èµ–å…³ç³»çš„ç»´æŠ¤ï¼Œäº¤ç»™Springç®¡ç†ã€‚</p>\n</li>\n<li><p>AOPç¼–ç¨‹çš„æ”¯æŒï¼ˆ<strong>AOP</strong>ï¼‰</p>\n<p>  Springæä¾›é¢å‘åˆ‡é¢ç¼–ç¨‹ï¼Œå¯ä»¥æ–¹ä¾¿çš„å®ç°å¯¹ç¨‹åºè¿›è¡Œæƒé™æ‹¦æˆªã€è¿è¡Œç›‘æ§ç­‰åŠŸèƒ½ã€‚</p>\n</li>\n<li><p>å£°æ˜å¼äº‹åŠ¡çš„æ”¯æŒï¼ˆ<strong>äº‹åŠ¡</strong>ï¼‰</p>\n<p>  åªéœ€è¦é€šè¿‡é…ç½®å°±å¯ä»¥å®Œæˆå¯¹äº‹åŠ¡çš„ç®¡ç†ï¼Œè€Œæ— éœ€æ‰‹åŠ¨ç¼–ç¨‹ã€‚</p>\n</li>\n<li><p>æ–¹ä¾¿é›†æˆå„ç§ä¼˜ç§€æ¡†æ¶ï¼ˆ<strong>é›†æˆ</strong>ï¼‰</p>\n<p>  Springä¸æ’æ–¥å„ç§ä¼˜ç§€çš„å¼€æºæ¡†æ¶ï¼Œå…¶å†…éƒ¨æä¾›äº†å¯¹å„ç§ä¼˜ç§€æ¡†æ¶çš„ç›´æ¥æ”¯æŒï¼ˆå¦‚ï¼šStrutsã€Hibernateã€MyBatisç­‰ï¼‰ã€‚</p>\n</li>\n</ul>\n<p>ç¼ºç‚¹</p>\n<ul>\n<li>Spring<strong>ä¾èµ–åå°„ï¼Œåå°„å½±å“æ€§èƒ½</strong></li>\n</ul>\n<h3 id=\"Spring-æ¡†æ¶ä¸­éƒ½ç”¨åˆ°äº†å“ªäº›è®¾è®¡æ¨¡å¼ï¼Ÿ\"><a href=\"#Spring-æ¡†æ¶ä¸­éƒ½ç”¨åˆ°äº†å“ªäº›è®¾è®¡æ¨¡å¼ï¼Ÿ\" class=\"headerlink\" title=\"Spring æ¡†æ¶ä¸­éƒ½ç”¨åˆ°äº†å“ªäº›è®¾è®¡æ¨¡å¼ï¼Ÿ\"></a>Spring æ¡†æ¶ä¸­éƒ½ç”¨åˆ°äº†å“ªäº›è®¾è®¡æ¨¡å¼ï¼Ÿ</h3><ol>\n<li>å·¥å‚æ¨¡å¼ï¼šé€šè¿‡ BeanFactory å’Œ ApplicationContext æ¥ç®¡ç† Bean å¯¹è±¡ã€‚</li>\n<li>å•ä¾‹æ¨¡å¼ï¼šBeané»˜è®¤ä¸ºå•ä¾‹æ¨¡å¼ã€‚</li>\n<li>ä»£ç†æ¨¡å¼ï¼šSpringçš„AOPåŠŸèƒ½ç”¨åˆ°äº†åŸºäºæ¥å£çš„JDKçš„åŠ¨æ€ä»£ç†å’ŒåŸºäºå­ç±»çš„CGLIBåŠ¨æ€ä»£ç†ï¼›</li>\n</ol>\n<h3 id=\"Springæ¡†æ¶ä¸­æœ‰å“ªäº›ä¸åŒç±»å‹çš„äº‹ä»¶\"><a href=\"#Springæ¡†æ¶ä¸­æœ‰å“ªäº›ä¸åŒç±»å‹çš„äº‹ä»¶\" class=\"headerlink\" title=\"Springæ¡†æ¶ä¸­æœ‰å“ªäº›ä¸åŒç±»å‹çš„äº‹ä»¶\"></a>Springæ¡†æ¶ä¸­æœ‰å“ªäº›ä¸åŒç±»å‹çš„äº‹ä»¶</h3><p><strong>Springçš„ApplicationContext æä¾›äº†æ”¯æŒäº‹ä»¶å’Œä»£ç ä¸­ç›‘å¬å™¨çš„åŠŸèƒ½ã€‚</strong>  </p>\n<p>å¦‚æœä¸€ä¸ªbeanå®ç°äº†<code>ApplicationListener</code>æ¥å£ï¼Œå½“ä¸€ä¸ª<code>ApplicationEvent</code> è¢«å‘å¸ƒä»¥åï¼Œbeanä¼šè‡ªåŠ¨è¢«é€šçŸ¥ã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public <span class=\"keyword\">class</span> <span class=\"title class_\">AllApplicationEventListener</span> implements <span class=\"title class_\">ApplicationListener</span> &lt; <span class=\"title class_\">ApplicationEvent</span> &gt;&#123;</span><br><span class=\"line\">    @<span class=\"title class_\">Override</span></span><br><span class=\"line\">    public <span class=\"keyword\">void</span> <span class=\"title function_\">onApplicationEvent</span>(<span class=\"params\">ApplicationEvent applicationEvent</span>)&#123;</span><br><span class=\"line\">        <span class=\"comment\">//process event</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><strong>Spring æä¾›äº†ä»¥ä¸‹5ç§æ ‡å‡†çš„äº‹ä»¶ï¼š</strong></p>\n<ul>\n<li>ä¸Šä¸‹æ–‡æ›´æ–°äº‹ä»¶ï¼ˆContextRefreshedEventï¼‰ï¼šè¯¥äº‹ä»¶ä¼šåœ¨ApplicationContextè¢«åˆå§‹åŒ–æˆ–è€…æ›´æ–°æ—¶å‘å¸ƒã€‚ä¹Ÿå¯ä»¥åœ¨è°ƒç”¨<code>ConfigurableApplicationContext</code> æ¥å£ä¸­çš„<code>refresh()</code>æ–¹æ³•æ—¶è¢«è§¦å‘ã€‚</li>\n<li>ä¸Šä¸‹æ–‡å¼€å§‹äº‹ä»¶ï¼ˆContextStartedEventï¼‰ï¼šå½“å®¹å™¨è°ƒç”¨<code>ConfigurableApplicationContext</code>çš„<code>Start()</code>æ–¹æ³•å¼€å§‹&#x2F;é‡æ–°å¼€å§‹å®¹å™¨æ—¶è§¦å‘è¯¥äº‹ä»¶ã€‚</li>\n<li>ä¸Šä¸‹æ–‡åœæ­¢äº‹ä»¶ï¼ˆContextStoppedEventï¼‰ï¼šå½“å®¹å™¨è°ƒç”¨<code>ConfigurableApplicationContext</code>çš„<code>Stop()</code>æ–¹æ³•åœæ­¢å®¹å™¨æ—¶è§¦å‘è¯¥äº‹ä»¶ã€‚</li>\n<li>ä¸Šä¸‹æ–‡å…³é—­äº‹ä»¶ï¼ˆContextClosedEventï¼‰ï¼šå½“<code>ApplicationContext</code>è¢«å…³é—­æ—¶è§¦å‘è¯¥äº‹ä»¶ã€‚å®¹å™¨è¢«å…³é—­æ—¶ï¼Œå…¶ç®¡ç†çš„æ‰€æœ‰å•ä¾‹Beanéƒ½è¢«é”€æ¯ã€‚</li>\n<li>è¯·æ±‚å¤„ç†äº‹ä»¶ï¼ˆRequestHandledEventï¼‰ï¼šåœ¨Webåº”ç”¨ä¸­ï¼Œå½“ä¸€ä¸ªhttpè¯·æ±‚ï¼ˆrequestï¼‰ç»“æŸè§¦å‘è¯¥äº‹ä»¶ã€‚</li>\n</ul>\n<h3 id=\"Spring-åº”ç”¨ç¨‹åºæœ‰å“ªäº›ä¸åŒç»„ä»¶ï¼Ÿ\"><a href=\"#Spring-åº”ç”¨ç¨‹åºæœ‰å“ªäº›ä¸åŒç»„ä»¶ï¼Ÿ\" class=\"headerlink\" title=\"Spring åº”ç”¨ç¨‹åºæœ‰å“ªäº›ä¸åŒç»„ä»¶ï¼Ÿ\"></a>Spring åº”ç”¨ç¨‹åºæœ‰å“ªäº›ä¸åŒç»„ä»¶ï¼Ÿ</h3><p>Spring åº”ç”¨ä¸€èˆ¬æœ‰ä»¥ä¸‹ç»„ä»¶ï¼š</p>\n<ul>\n<li>Bean ç±» - å®ƒåŒ…å«å±æ€§ï¼Œsetter å’Œ getter æ–¹æ³•ï¼Œå‡½æ•°ç­‰ã€‚</li>\n<li>Bean é…ç½®æ–‡ä»¶ - åŒ…å«ç±»çš„ä¿¡æ¯ä»¥åŠå¦‚ä½•é…ç½®å®ƒä»¬ã€‚</li>\n<li>æ¥å£ - å¤„ç† Bean </li>\n<li>ç”¨æˆ·ç¨‹åº - å®ƒä½¿ç”¨æ¥å£ã€‚</li>\n</ul>\n<h2 id=\"Springæ§åˆ¶åè½¬-IOC\"><a href=\"#Springæ§åˆ¶åè½¬-IOC\" class=\"headerlink\" title=\"Springæ§åˆ¶åè½¬(IOC)\"></a>Springæ§åˆ¶åè½¬(IOC)</h2><h3 id=\"ä»€ä¹ˆæ˜¯Spring-IOC-å®¹å™¨ï¼Ÿ\"><a href=\"#ä»€ä¹ˆæ˜¯Spring-IOC-å®¹å™¨ï¼Ÿ\" class=\"headerlink\" title=\"ä»€ä¹ˆæ˜¯Spring IOC å®¹å™¨ï¼Ÿ\"></a>ä»€ä¹ˆæ˜¯Spring IOC å®¹å™¨ï¼Ÿ</h3><p>Spring IOCï¼ˆæ§åˆ¶åè½¬ï¼‰ æŠŠç»„ä»¶å¯¹è±¡æ§åˆ¶æƒäº¤ç»™å®¹å™¨ï¼Œå®¹å™¨è´Ÿè´£åˆ›å»ºå¯¹è±¡ï¼Œé…ç½®å¯¹è±¡ï¼ˆé€šè¿‡ä¾èµ–æ³¨å…¥ï¼ˆDIï¼‰ï¼Œå¹¶ä¸”ç®¡ç†è¿™äº›å¯¹è±¡çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸã€‚IoCè®©ç›¸äº’åä½œçš„ç»„ä»¶ä¿æŒæ¾è€¦åˆã€‚</p>\n<h3 id=\"Spring-IoC-çš„å®ç°æœºåˆ¶\"><a href=\"#Spring-IoC-çš„å®ç°æœºåˆ¶\" class=\"headerlink\" title=\"Spring IoC çš„å®ç°æœºåˆ¶\"></a>Spring IoC çš„å®ç°æœºåˆ¶</h3><p>Spring ä¸­çš„ IoC çš„å®ç°åŸç†å°±æ˜¯<strong>å·¥å‚æ¨¡å¼åŠ åå°„</strong>ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">interface</span> <span class=\"title class_\">Fruit</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">void</span> <span class=\"title function_\">eat</span><span class=\"params\">()</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Apple</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">Fruit</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">eat</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;Apple&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Orange</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">Fruit</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">eat</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;Orange&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Factory</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> Fruit <span class=\"title function_\">getInstance</span><span class=\"params\">(String className)</span> &#123;\t<span class=\"comment\">// ä½¿ç”¨åå°„ï¼Œç”¨å­—ç¬¦ä¸²è·å–åˆ°å®ä¾‹</span></span><br><span class=\"line\">        Fruit f=<span class=\"literal\">null</span>;</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            f = (Fruit) Class.forName(className).newInstance();</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (Exception e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> f;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Client</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] a)</span> &#123;</span><br><span class=\"line\">        <span class=\"type\">Fruit</span> <span class=\"variable\">f</span> <span class=\"operator\">=</span> Factory.getInstance(<span class=\"string\">&quot;io.github.dunwu.spring.Apple&quot;</span>);</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(f != <span class=\"literal\">null</span>)&#123;</span><br><span class=\"line\">            f.eat();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"BeanFactory-å’Œ-ApplicationContextæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\"><a href=\"#BeanFactory-å’Œ-ApplicationContextæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\" class=\"headerlink\" title=\"BeanFactory å’Œ ApplicationContextæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\"></a>BeanFactory å’Œ ApplicationContextæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h3><p>BeanFactoryå’ŒApplicationContextæ˜¯Springçš„ä¸¤å¤§æ ¸å¿ƒæ¥å£ï¼Œéƒ½å¯ä»¥å½“åšSpringçš„å®¹å™¨ã€‚<br>ApplicationContextæ˜¯BeanFactoryçš„å­æ¥å£ã€‚</p>\n<ol>\n<li>ä¾èµ–å…³ç³»</li>\n</ol>\n<p>BeanFactoryï¼šæ˜¯Springé‡Œé¢æœ€åº•å±‚çš„æ¥å£ï¼ŒåŒ…å«äº†å„ç§Beançš„å®šä¹‰ï¼Œè¯»å–beané…ç½®æ–‡æ¡£ï¼Œç®¡ç†beançš„åŠ è½½ã€å®ä¾‹åŒ–ï¼Œæ§åˆ¶beançš„ç”Ÿå‘½å‘¨æœŸï¼Œç»´æŠ¤beanä¹‹é—´çš„ä¾èµ–å…³ç³»ã€‚</p>\n<p>ApplicationContextæ¥å£ä½œä¸ºBeanFactoryçš„å­æ¥å£ï¼Œé™¤äº†æä¾›BeanFactoryæ‰€å…·æœ‰çš„åŠŸèƒ½å¤–ï¼Œè¿˜æä¾›äº†æ›´å®Œæ•´çš„æ¡†æ¶åŠŸèƒ½ï¼š</p>\n<ul>\n<li>æ”¯æŒå›½é™…åŒ–ã€‚</li>\n<li>æ”¯æŒè®¿é—®æ–‡ä»¶èµ„æº</li>\n<li>æ”¯æŒäº‹ä»¶å‘å¸ƒé€šçŸ¥</li>\n<li>åŒæ—¶åŠ è½½å¤šä¸ªé…ç½®æ–‡ä»¶ã€‚</li>\n</ul>\n<p>é…ç½®æµç¨‹ï¼š</p>\n<ol>\n<li>åŠ è½½é…ç½®æ–‡ä»¶ï¼Œè§£ææˆ BeanDefinition æ”¾åœ¨ Map é‡Œï¼Œmapä¸­å­˜æ”¾<code>&lt;BeanNameï¼ŒClasså¯¹è±¡&gt;</code>çš„æ˜ å°„</li>\n<li>è°ƒç”¨ getBean çš„æ—¶å€™ï¼Œä» BeanDefinition æ‰€å±çš„ Map é‡Œï¼Œæ‹¿å‡º Class å¯¹è±¡ä½¿ç”¨åå°„è¿›è¡Œå®ä¾‹åŒ–ï¼ŒåŒæ—¶ï¼Œå¦‚æœæœ‰ä¾èµ–å…³ç³»ï¼Œå°†é€’å½’è°ƒç”¨ getBean æ–¹æ³• â€”â€” å®Œæˆä¾èµ–æ³¨å…¥ã€‚</li>\n<li>åŠ è½½æ–¹å¼</li>\n</ol>\n<p><strong>BeanFactroy</strong>é‡‡ç”¨çš„æ˜¯<strong>å»¶è¿ŸåŠ è½½</strong>å½¢å¼æ¥æ³¨å…¥Beançš„ï¼Œå³åªæœ‰åœ¨ä½¿ç”¨åˆ°æŸä¸ªBeanæ—¶(è°ƒç”¨getBean())ï¼Œæ‰å¯¹è¯¥Beanè¿›è¡ŒåŠ è½½å®ä¾‹åŒ–ã€‚è¿™æ ·ï¼Œæˆ‘ä»¬å°±ä¸èƒ½å‘ç°ä¸€äº›å­˜åœ¨çš„Springçš„é…ç½®é—®é¢˜ã€‚å¦‚æœBeançš„æŸä¸€ä¸ªå±æ€§æ²¡æœ‰æ³¨å…¥æˆ–è€…æ˜¯å±æ€§æ³¨å…¥é”™è¯¯ï¼ŒBeanFacotryåŠ è½½åï¼Œç›´è‡³ç¬¬ä¸€æ¬¡ä½¿ç”¨è°ƒç”¨getBeanæ–¹æ³•æ‰ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚</p>\n<p><strong>ApplicationContext</strong>ï¼Œå®ƒæ˜¯åœ¨å®¹å™¨å¯åŠ¨æ—¶ï¼Œ<strong>ä¸€æ¬¡æ€§åˆ›å»º</strong>äº†æ‰€æœ‰çš„Beanã€‚è¿™æ ·ï¼Œåœ¨å®¹å™¨å¯åŠ¨æ—¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥<strong>å‘ç°Springä¸­å­˜åœ¨çš„é…ç½®é”™è¯¯</strong>ï¼Œè¿™æ ·æœ‰åˆ©äºæ£€æŸ¥æ‰€ä¾èµ–å±æ€§æ˜¯å¦æ³¨å…¥ã€‚ ApplicationContextå¯åŠ¨åé¢„è½½å…¥æ‰€æœ‰çš„å•å®ä¾‹Beanï¼Œé€šè¿‡é¢„è½½å…¥å•å®ä¾‹bean ,ç¡®ä¿å½“ä½ éœ€è¦çš„æ—¶å€™ï¼Œä½ å°±ä¸ç”¨ç­‰å¾…ï¼Œå› ä¸ºå®ƒä»¬å·²ç»åˆ›å»ºå¥½äº†ã€‚</p>\n<p>ç”±äºåœ¨å®¹å™¨å¯åŠ¨æ—¶ä¸€æ¬¡æ€§åˆ›å»ºæ‰€æœ‰çš„Beanï¼Œå› æ­¤ApplicationContext æ›´åŠ å ç”¨å†…å­˜ç©ºé—´ï¼Œå½“é…ç½®çš„Beanæ¯”è¾ƒå¤šæ—¶ï¼Œç¨‹åºå¯åŠ¨è¾ƒæ…¢ã€‚</p>\n<h4 id=\"â­BeanFactoryå’ŒFactoryBeanåŒºåˆ«ï¼Ÿ\"><a href=\"#â­BeanFactoryå’ŒFactoryBeanåŒºåˆ«ï¼Ÿ\" class=\"headerlink\" title=\"â­BeanFactoryå’ŒFactoryBeanåŒºåˆ«ï¼Ÿ\"></a>â­BeanFactoryå’ŒFactoryBeanåŒºåˆ«ï¼Ÿ</h4><p>BeanFactoryï¼šæ˜¯spring IoCå®¹å™¨çš„åº•å±‚æ¥å£ï¼Œå¯ä»¥ç”¨æ¥ç®¡ç†beanåŠå…¶ç”Ÿå‘½å‘¨æœŸï¼›</p>\n<p>FactoryBeanï¼šå¦‚æœæŸä¸ª bean å®ç°äº†FactoryBeanè¿™ä¸ªæ¥å£ï¼Œé€šè¿‡ getBean æ–¹æ³•æ¥è·å– bean çš„æ—¶å€™ï¼Œå¹¶ä¸æ˜¯è¿”å›è‡ªå·±çš„å®ä¾‹ï¼Œè€Œæ˜¯è¿”å›å…¶ getObject() æ–¹æ³•çš„è¿”å›å€¼</p>\n<h3 id=\"ApplicationContexté€šå¸¸çš„å®ç°æ˜¯ä»€ä¹ˆï¼Ÿ\"><a href=\"#ApplicationContexté€šå¸¸çš„å®ç°æ˜¯ä»€ä¹ˆï¼Ÿ\" class=\"headerlink\" title=\"ApplicationContexté€šå¸¸çš„å®ç°æ˜¯ä»€ä¹ˆï¼Ÿ\"></a>ApplicationContexté€šå¸¸çš„å®ç°æ˜¯ä»€ä¹ˆï¼Ÿ</h3><p><strong>FileSystemXmlApplicationContext</strong> ï¼šæ­¤å®¹å™¨ä»ä¸€ä¸ªXMLæ–‡ä»¶ä¸­åŠ è½½beansçš„å®šä¹‰ï¼ŒXML Bean é…ç½®æ–‡ä»¶çš„å…¨è·¯å¾„åå¿…é¡»æä¾›ç»™å®ƒçš„æ„é€ å‡½æ•°ã€‚</p>\n<p><strong>ClassPathXmlApplicationContext</strong>ï¼šæ­¤å®¹å™¨ä¹Ÿä»ä¸€ä¸ªXMLæ–‡ä»¶ä¸­åŠ è½½beansçš„å®šä¹‰ï¼Œè¿™é‡Œï¼Œä½ éœ€è¦æ­£ç¡®è®¾ç½®classpathå› ä¸ºè¿™ä¸ªå®¹å™¨å°†åœ¨classpathé‡Œæ‰¾beané…ç½®ã€‚</p>\n<p><strong>AnnotationConfigApplicationContext</strong>ï¼šå®ƒæ˜¯ç”¨äºè¯»å–æ³¨è§£åˆ›å»ºå®¹å™¨çš„</p>\n<h3 id=\"ä»€ä¹ˆæ˜¯Springçš„ä¾èµ–æ³¨å…¥ï¼Ÿ\"><a href=\"#ä»€ä¹ˆæ˜¯Springçš„ä¾èµ–æ³¨å…¥ï¼Ÿ\" class=\"headerlink\" title=\"ä»€ä¹ˆæ˜¯Springçš„ä¾èµ–æ³¨å…¥ï¼Ÿ\"></a>ä»€ä¹ˆæ˜¯Springçš„ä¾èµ–æ³¨å…¥ï¼Ÿ</h3><p>å…·ä½“å«ä¹‰æ˜¯:å½“æŸä¸ªè°ƒç”¨è€…éœ€è¦å¦ä¸€ä¸ªè¢«è°ƒç”¨è€…çš„ååŠ©æ—¶ï¼Œåœ¨ ä¼ ç»Ÿçš„ç¨‹åºè®¾è®¡è¿‡ç¨‹ä¸­ï¼Œé€šå¸¸ç”±è°ƒç”¨è€…æ¥åˆ›å»ºè¢«è°ƒç”¨è€…çš„å®ä¾‹ã€‚ä½†åœ¨Springé‡Œï¼Œåˆ›å»ºè¢«è°ƒç”¨è€…çš„å·¥ä½œä¸å†ç”±è°ƒç”¨è€…æ¥å®Œæˆï¼Œå› æ­¤ç§°ä¸ºæ§åˆ¶åè½¬ï¼›åˆ›å»ºè¢«è°ƒç”¨è€… å®ä¾‹çš„å·¥ä½œé€šå¸¸ç”±Springå®¹å™¨æ¥å®Œæˆï¼Œç„¶åæ³¨å…¥è°ƒç”¨è€…ï¼Œå› æ­¤ä¹Ÿç§°ä¸ºä¾èµ–æ³¨å…¥ã€‚</p>\n<h3 id=\"ä¾èµ–æ³¨å…¥æœ‰ä»€ä¹ˆä¼˜åŠ¿\"><a href=\"#ä¾èµ–æ³¨å…¥æœ‰ä»€ä¹ˆä¼˜åŠ¿\" class=\"headerlink\" title=\"ä¾èµ–æ³¨å…¥æœ‰ä»€ä¹ˆä¼˜åŠ¿\"></a>ä¾èµ–æ³¨å…¥æœ‰ä»€ä¹ˆä¼˜åŠ¿</h3><p>ä¾èµ–æ³¨å…¥ä¹‹æ‰€ä»¥æ›´æµè¡Œæ˜¯å› ä¸ºå®ƒæ˜¯ä¸€ç§æ›´å¯å–çš„æ–¹å¼ï¼šè®©å®¹å™¨å…¨æƒè´Ÿè´£ä¾èµ–æŸ¥è¯¢ï¼Œå—ç®¡ç»„ä»¶åªéœ€è¦æš´éœ²JavaBeançš„setteræ–¹æ³•æˆ–è€…å¸¦å‚æ•°çš„æ„é€ å™¨æˆ–è€…æ¥å£ï¼Œä½¿å®¹å™¨å¯ä»¥åœ¨åˆå§‹åŒ–æ—¶ç»„è£…å¯¹è±¡çš„ä¾èµ–å…³ç³»ã€‚å…¶ä¸ä¾èµ–æŸ¥æ‰¾æ–¹å¼ç›¸æ¯”ï¼Œä¸»è¦ä¼˜åŠ¿ä¸ºï¼š</p>\n<ul>\n<li>æŸ¥æ‰¾å®šä½æ“ä½œä¸åº”ç”¨ä»£ç å®Œå…¨æ— å…³ã€‚</li>\n<li>ä¸ä¾èµ–äºå®¹å™¨çš„APIï¼Œå¯ä»¥å¾ˆå®¹æ˜“åœ°åœ¨ä»»ä½•å®¹å™¨ä»¥å¤–ä½¿ç”¨åº”ç”¨å¯¹è±¡ã€‚</li>\n<li>ä¸éœ€è¦ç‰¹æ®Šçš„æ¥å£ï¼Œç»å¤§å¤šæ•°å¯¹è±¡å¯ä»¥åšåˆ°å®Œå…¨ä¸å¿…ä¾èµ–å®¹å™¨ã€‚</li>\n</ul>\n<h3 id=\"æœ‰å“ªäº›ä¸åŒç±»å‹çš„ä¾èµ–æ³¨å…¥å®ç°æ–¹å¼ï¼Ÿ\"><a href=\"#æœ‰å“ªäº›ä¸åŒç±»å‹çš„ä¾èµ–æ³¨å…¥å®ç°æ–¹å¼ï¼Ÿ\" class=\"headerlink\" title=\"æœ‰å“ªäº›ä¸åŒç±»å‹çš„ä¾èµ–æ³¨å…¥å®ç°æ–¹å¼ï¼Ÿ\"></a>æœ‰å“ªäº›ä¸åŒç±»å‹çš„ä¾èµ–æ³¨å…¥å®ç°æ–¹å¼ï¼Ÿ</h3><p><strong>æ„é€ å™¨ä¾èµ–æ³¨å…¥</strong>ï¼šæ„é€ å™¨ä¾èµ–æ³¨å…¥é€šè¿‡å®¹å™¨è§¦å‘ä¸€ä¸ªç±»çš„æ„é€ å™¨æ¥å®ç°çš„ï¼Œè¯¥ç±»æœ‰ä¸€ç³»åˆ—å‚æ•°ï¼Œæ¯ä¸ªå‚æ•°ä»£è¡¨ä¸€ä¸ªå¯¹å…¶ä»–ç±»çš„ä¾èµ–ã€‚</p>\n<p><strong>Setteræ–¹æ³•æ³¨å…¥</strong>ï¼šSetteræ–¹æ³•æ³¨å…¥æ˜¯å®¹å™¨é€šè¿‡è°ƒç”¨æ— å‚æ„é€ å™¨æˆ–æ— å‚staticå·¥å‚ æ–¹æ³•å®ä¾‹åŒ–beanä¹‹åï¼Œè°ƒç”¨è¯¥beançš„setteræ–¹æ³•ï¼Œå³å®ç°äº†åŸºäºsetterçš„ä¾èµ–æ³¨å…¥ã€‚</p>\n<h3 id=\"æ„é€ å™¨ä¾èµ–æ³¨å…¥å’Œ-setteræ–¹æ³•æ³¨å…¥çš„åŒºåˆ«\"><a href=\"#æ„é€ å™¨ä¾èµ–æ³¨å…¥å’Œ-setteræ–¹æ³•æ³¨å…¥çš„åŒºåˆ«\" class=\"headerlink\" title=\"æ„é€ å™¨ä¾èµ–æ³¨å…¥å’Œ setteræ–¹æ³•æ³¨å…¥çš„åŒºåˆ«\"></a>æ„é€ å™¨ä¾èµ–æ³¨å…¥å’Œ setteræ–¹æ³•æ³¨å…¥çš„åŒºåˆ«</h3><p>ï¼ˆéƒ¨åˆ†æ³¨å…¥ï¼‰åœ¨setteræ³¨å…¥,å¯ä»¥å°†ä¾èµ–é¡¹éƒ¨åˆ†æ³¨å…¥,æ„é€ æ–¹æ³•æ³¨å…¥ä¸èƒ½éƒ¨åˆ†æ³¨å…¥ã€‚</p>\n<p>ï¼ˆå±æ€§è¦†ç›–ï¼‰å¦‚æœæˆ‘ä»¬ä¸ºåŒä¸€å±æ€§æä¾›setterå’Œæ„é€ æ–¹æ³•æ³¨å…¥ï¼Œsetteræ³¨å…¥å°†è¦†ç›–æ„é€ æ–¹æ³•æ³¨å…¥ã€‚ä½†æ˜¯æ„é€ æ–¹æ³•æ³¨å…¥ä¸èƒ½è¦†ç›–setteræ³¨å…¥å€¼ã€‚æ˜¾ç„¶ï¼Œæ„é€ æ–¹æ³•æ³¨å…¥è¢«ç§°ä¸ºåˆ›å»ºå®ä¾‹çš„ç¬¬ä¸€é€‰é¡¹ã€‚</p>\n<p>ï¼ˆå¾ªç¯ä¾èµ–ï¼‰åœ¨æ„é€ å‡½æ•°æ³¨å…¥,å¦‚æœAå’ŒBå¯¹è±¡ç›¸äº’ä¾èµ–ï¼šAä¾èµ–äºB,Bä¹Ÿä¾èµ–äºA,æ­¤æ—¶åœ¨åˆ›å»ºå¯¹è±¡çš„Aæˆ–è€…Bæ—¶ï¼ŒSpringæŠ›å‡ºObjectCurrentlyInCreationExceptionã€‚æ‰€ä»¥Springå¯ä»¥é€šè¿‡setteræ³¨å…¥,ä»è€Œè§£å†³å¾ªç¯ä¾èµ–çš„é—®é¢˜ã€‚</p>\n<p><strong>æœ€å¥½çš„è§£å†³æ–¹æ¡ˆæ˜¯ç”¨æ„é€ å™¨å‚æ•°å®ç°å¼ºåˆ¶ä¾èµ–ï¼Œsetteræ–¹æ³•å®ç°å¯é€‰ä¾èµ–</strong></p>\n<h3 id=\"è®²ä¸€è®²Springä¸­çš„å¾ªç¯ä¾èµ–\"><a href=\"#è®²ä¸€è®²Springä¸­çš„å¾ªç¯ä¾èµ–\" class=\"headerlink\" title=\"è®²ä¸€è®²Springä¸­çš„å¾ªç¯ä¾èµ–\"></a>è®²ä¸€è®²Springä¸­çš„å¾ªç¯ä¾èµ–</h3><p><a href=\"https://www.cnblogs.com/daimzh/p/13256413.html\">https://www.cnblogs.com/daimzh/p/13256413.html</a></p>\n<p><a href=\"https://blog.csdn.net/weixin_49592546/article/details/108050566\">https://blog.csdn.net/weixin_49592546/article/details/108050566</a></p>\n<h4 id=\"ä»€ä¹ˆæ˜¯å¾ªç¯ä¾èµ–ï¼Ÿ\"><a href=\"#ä»€ä¹ˆæ˜¯å¾ªç¯ä¾èµ–ï¼Ÿ\" class=\"headerlink\" title=\"ä»€ä¹ˆæ˜¯å¾ªç¯ä¾èµ–ï¼Ÿ\"></a>ä»€ä¹ˆæ˜¯å¾ªç¯ä¾èµ–ï¼Ÿ</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Component</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">A</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// Aä¸­æ³¨å…¥äº†B</span></span><br><span class=\"line\">\t<span class=\"meta\">@Autowired</span></span><br><span class=\"line\">\t<span class=\"keyword\">private</span> B b;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@Component</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">B</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// Bä¸­ä¹Ÿæ³¨å…¥äº†A</span></span><br><span class=\"line\">\t<span class=\"meta\">@Autowired</span></span><br><span class=\"line\">\t<span class=\"keyword\">private</span> A a;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Springæ˜¯å¦‚ä½•è§£å†³çš„å¾ªç¯ä¾èµ–ï¼Ÿ\"><a href=\"#Springæ˜¯å¦‚ä½•è§£å†³çš„å¾ªç¯ä¾èµ–ï¼Ÿ\" class=\"headerlink\" title=\"Springæ˜¯å¦‚ä½•è§£å†³çš„å¾ªç¯ä¾èµ–ï¼Ÿ\"></a>Springæ˜¯å¦‚ä½•è§£å†³çš„å¾ªç¯ä¾èµ–ï¼Ÿ</h4><blockquote>\n<p>ä»¥ä¸‹ï¼š</p>\n<p>ä½œè€…ï¼šé˜¿é‡Œäº‘äº‘æ –å·</p>\n<p>é“¾æ¥ï¼š<a href=\"https://zhuanlan.zhihu.com/p/368769721\">https://zhuanlan.zhihu.com/p/368769721</a></p>\n<p>æ¥æºï¼šçŸ¥ä¹</p>\n<p>è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚</p>\n</blockquote>\n<p>é¦–å…ˆï¼ŒSpring è§£å†³å¾ªç¯ä¾èµ–æœ‰ä¸¤ä¸ªå‰ææ¡ä»¶ï¼š</p>\n<ol>\n<li>ä¸å…¨æ˜¯æ„é€ å™¨æ–¹å¼çš„å¾ªç¯ä¾èµ–</li>\n<li>å¿…é¡»æ˜¯å•ä¾‹</li>\n</ol>\n<p>åŸºäºä¸Šé¢çš„é—®é¢˜ï¼Œæˆ‘ä»¬çŸ¥é“Beançš„ç”Ÿå‘½å‘¨æœŸï¼Œæœ¬è´¨ä¸Šè§£å†³å¾ªç¯ä¾èµ–çš„é—®é¢˜å°±æ˜¯ä¸‰çº§ç¼“å­˜ï¼Œé€šè¿‡ä¸‰çº§ç¼“å­˜æå‰æ‹¿åˆ°æœªåˆå§‹åŒ–å®Œå…¨çš„å¯¹è±¡ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/** Cache of singleton objects: bean name to bean instance. */</span></span><br><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">final</span> Map&lt;String, Object&gt; singletonObjects = <span class=\"keyword\">new</span> <span class=\"title class_\">ConcurrentHashMap</span>&lt;&gt;(<span class=\"number\">256</span>);</span><br><span class=\"line\"><span class=\"comment\">/** Cache of early singleton objects: bean name to bean instance. */</span></span><br><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">final</span> Map&lt;String, Object&gt; earlySingletonObjects = <span class=\"keyword\">new</span> <span class=\"title class_\">HashMap</span>&lt;&gt;(<span class=\"number\">16</span>);</span><br><span class=\"line\"><span class=\"comment\">/** Cache of singleton factories: bean name to ObjectFactory. */</span></span><br><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">final</span> Map&lt;String, ObjectFactory&lt;?&gt;&gt; singletonFactories = <span class=\"keyword\">new</span> <span class=\"title class_\">HashMap</span>&lt;&gt;(<span class=\"number\">16</span>);</span><br></pre></td></tr></table></figure>\n\n<p>ç¬¬ä¸€çº§ç¼“å­˜ï¼šç”¨æ¥ä¿å­˜å®ä¾‹åŒ–ã€åˆå§‹åŒ–éƒ½å®Œæˆçš„å¯¹è±¡</p>\n<p>ç¬¬äºŒçº§ç¼“å­˜ï¼šç”¨æ¥ä¿å­˜å®ä¾‹åŒ–å®Œæˆï¼Œä½†æ˜¯æœªåˆå§‹åŒ–å®Œæˆçš„å¯¹è±¡</p>\n<p>ç¬¬ä¸‰çº§ç¼“å­˜ï¼šç”¨æ¥ä¿å­˜ä¸€ä¸ªå¯¹è±¡å·¥å‚ï¼Œæä¾›ä¸€ä¸ªåŒ¿åå†…éƒ¨ç±»ï¼Œç”¨äºåˆ›å»ºäºŒçº§ç¼“å­˜ä¸­çš„å¯¹è±¡</p>\n<p><img src=\"https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/TyporaNotesv2-dbda6a103e41cde4a54548386d6c1cc2_720w.jpg\" alt=\"Springä¸‰çº§ç¼“å­˜\"></p>\n<p>å‡è®¾ä¸€ä¸ªç®€å•çš„å¾ªç¯ä¾èµ–åœºæ™¯ï¼ŒAã€Bäº’ç›¸ä¾èµ–ã€‚</p>\n<p><img src=\"https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/TyporaNotesv2-f20f1e81c8011fd99f723127cacf7430_720w.jpg\" alt=\"ç®€å•çš„å¾ªç¯ä¾èµ–åœºæ™¯\"></p>\n<p>Aå¯¹è±¡çš„åˆ›å»ºè¿‡ç¨‹ï¼š</p>\n<ol>\n<li>åˆ›å»ºå¯¹è±¡Aï¼Œå®ä¾‹åŒ–çš„æ—¶å€™æŠŠAå¯¹è±¡å·¥å‚æ”¾å…¥ä¸‰çº§ç¼“å­˜ï¼›</li>\n</ol>\n<p><img src=\"https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/TyporaNotesv2-b295374aff4235ee9c0538bf03856217_720w.jpg\" alt=\"å®ä¾‹åŒ–å¯¹è±¡A\"></p>\n<ol start=\"2\">\n<li><p>Aæ³¨å…¥å±æ€§æ—¶ï¼Œå‘ç°ä¾èµ–Bï¼Œè½¬è€Œå»å®ä¾‹åŒ–B</p>\n</li>\n<li><p>åŒæ ·åˆ›å»ºå¯¹è±¡Bï¼Œæ³¨å…¥å±æ€§æ—¶å‘ç°ä¾èµ–Aï¼Œä¾æ¬¡ä»ä¸€çº§åˆ°ä¸‰çº§ç¼“å­˜æŸ¥è¯¢Aï¼Œä»ä¸‰çº§ç¼“å­˜é€šè¿‡å¯¹è±¡å·¥å‚æ‹¿åˆ°Aï¼ŒæŠŠAæ”¾å…¥äºŒçº§ç¼“å­˜ï¼ŒåŒæ—¶åˆ é™¤ä¸‰çº§ç¼“å­˜ä¸­çš„Aï¼Œæ­¤æ—¶ï¼ŒBå·²ç»å®ä¾‹åŒ–å¹¶ä¸”åˆå§‹åŒ–å®Œæˆï¼ŒæŠŠBæ”¾å…¥ä¸€çº§ç¼“å­˜ã€‚</p>\n</li>\n</ol>\n<p><img src=\"https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/TyporaNotesv2-51cb735fc6c02c2225d2f38b9b5b6da9_720w.jpg\" alt=\"åˆ›å»ºå¯¹è±¡B\"></p>\n<ol start=\"4\">\n<li><p>æ¥ç€ç»§ç»­åˆ›å»ºAï¼Œé¡ºåˆ©ä»ä¸€çº§ç¼“å­˜æ‹¿åˆ°å®ä¾‹åŒ–ä¸”åˆå§‹åŒ–å®Œæˆçš„Bå¯¹è±¡ï¼ŒAå¯¹è±¡åˆ›å»ºä¹Ÿå®Œæˆï¼Œåˆ é™¤äºŒçº§ç¼“å­˜ä¸­çš„Aï¼ŒåŒæ—¶æŠŠAæ”¾å…¥ä¸€çº§ç¼“å­˜</p>\n</li>\n<li><p>æœ€åï¼Œä¸€çº§ç¼“å­˜ä¸­ä¿å­˜ç€å®ä¾‹åŒ–ã€åˆå§‹åŒ–éƒ½å®Œæˆçš„Aã€Bå¯¹è±¡</p>\n</li>\n</ol>\n<p><img src=\"https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/TyporaNotesv2-a1eaa5d9f8bec23e373dc1b9f86ddb25_720w.jpg\" alt=\"æœ€ç»ˆç»“æœ\"></p>\n<p>å› æ­¤ï¼Œç”±äºæŠŠå®ä¾‹åŒ–å’Œåˆå§‹åŒ–çš„æµç¨‹åˆ†å¼€äº†ï¼Œæ‰€ä»¥å¦‚æœéƒ½æ˜¯ç”¨æ„é€ å™¨çš„è¯ï¼Œå°±æ²¡æ³•åˆ†ç¦»è¿™ä¸ªæ“ä½œï¼Œæ‰€ä»¥éƒ½æ˜¯æ„é€ å™¨çš„è¯å°±æ— æ³•è§£å†³å¾ªç¯ä¾èµ–çš„é—®é¢˜äº†ã€‚</p>\n<h3 id=\"8-ä¸ºä»€ä¹ˆè¦ä¸‰çº§ç¼“å­˜ï¼ŸäºŒçº§ä¸è¡Œå—ï¼Ÿ\"><a href=\"#8-ä¸ºä»€ä¹ˆè¦ä¸‰çº§ç¼“å­˜ï¼ŸäºŒçº§ä¸è¡Œå—ï¼Ÿ\" class=\"headerlink\" title=\"8. ä¸ºä»€ä¹ˆè¦ä¸‰çº§ç¼“å­˜ï¼ŸäºŒçº§ä¸è¡Œå—ï¼Ÿ\"></a>8. ä¸ºä»€ä¹ˆè¦ä¸‰çº§ç¼“å­˜ï¼ŸäºŒçº§ä¸è¡Œå—ï¼Ÿ</h3><p>ä¸å¯ä»¥ï¼Œä¸»è¦æ˜¯ä¸ºäº†ç”Ÿæˆä»£ç†å¯¹è±¡ã€‚</p>\n<p>å› ä¸ºä¸‰çº§ç¼“å­˜ä¸­æ”¾çš„æ˜¯ç”Ÿæˆå…·ä½“å¯¹è±¡çš„å¯¹è±¡å·¥å‚ï¼Œä»–å¯ä»¥ç”Ÿæˆä»£ç†å¯¹è±¡ï¼Œä¹Ÿå¯ä»¥æ˜¯æ™®é€šçš„å®ä¾‹å¯¹è±¡ã€‚</p>\n<p>å‡è®¾åªæœ‰äºŒçº§ç¼“å­˜çš„æƒ…å†µï¼Œå¾€äºŒçº§ç¼“å­˜ä¸­æ”¾çš„æ˜¾ç¤ºä¸€ä¸ªæ™®é€šçš„Beanå¯¹è±¡ï¼Œ<code>BeanPostProcessor</code>å»ç”Ÿæˆä»£ç†å¯¹è±¡ä¹‹åï¼Œè¦†ç›–æ‰äºŒçº§ç¼“å­˜ä¸­çš„æ™®é€šBeanå¯¹è±¡ï¼Œé‚£ä¹ˆå¤šçº¿ç¨‹ç¯å¢ƒä¸‹å¯èƒ½å–åˆ°çš„å¯¹è±¡å°±ä¸ä¸€è‡´äº†ã€‚</p>\n<p><img src=\"https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/TyporaNotesv2-e4e9050787017c7272dc313f88af9382_720w.jpg\" alt=\"Aä»£ç†å¯¹è±¡è¦†ç›–Aæ™®é€šBean\"></p>\n<h2 id=\"Spring-Beans\"><a href=\"#Spring-Beans\" class=\"headerlink\" title=\"Spring Beans\"></a>Spring Beans</h2><h3 id=\"å¦‚ä½•ç»™Spring-å®¹å™¨æä¾›é…ç½®å…ƒæ•°æ®ï¼ŸSpringæœ‰å‡ ç§é…ç½®æ–¹å¼\"><a href=\"#å¦‚ä½•ç»™Spring-å®¹å™¨æä¾›é…ç½®å…ƒæ•°æ®ï¼ŸSpringæœ‰å‡ ç§é…ç½®æ–¹å¼\" class=\"headerlink\" title=\"å¦‚ä½•ç»™Spring å®¹å™¨æä¾›é…ç½®å…ƒæ•°æ®ï¼ŸSpringæœ‰å‡ ç§é…ç½®æ–¹å¼\"></a>å¦‚ä½•ç»™Spring å®¹å™¨æä¾›é…ç½®å…ƒæ•°æ®ï¼ŸSpringæœ‰å‡ ç§é…ç½®æ–¹å¼</h3><p>è¿™é‡Œæœ‰ä¸‰ç§é‡è¦çš„æ–¹æ³•ç»™Spring å®¹å™¨æä¾›é…ç½®å…ƒæ•°æ®ã€‚</p>\n<ul>\n<li>XMLé…ç½®æ–‡ä»¶ã€‚</li>\n<li>åŸºäºæ³¨è§£çš„é…ç½®ã€‚</li>\n<li>åŸºäºJavaçš„é…ç½®ã€‚</li>\n</ul>\n<h3 id=\"Springé…ç½®æ–‡ä»¶åŒ…å«äº†å“ªäº›ä¿¡æ¯\"><a href=\"#Springé…ç½®æ–‡ä»¶åŒ…å«äº†å“ªäº›ä¿¡æ¯\" class=\"headerlink\" title=\"Springé…ç½®æ–‡ä»¶åŒ…å«äº†å“ªäº›ä¿¡æ¯\"></a>Springé…ç½®æ–‡ä»¶åŒ…å«äº†å“ªäº›ä¿¡æ¯</h3><p>Springé…ç½®æ–‡ä»¶æ˜¯ä¸ªXML æ–‡ä»¶ï¼Œé€šè¿‡è¯»å–æŒ‡å®šç±»çš„å…¨é™å®šç±»åã€‚åå°„åˆ›å»ºå¯¹è±¡ï¼Œä¸¢å…¥iocå®¹å™¨ä¸­ï¼Œè¯¥å¯¹è±¡å¯ä»¥é€šè¿‡idæ¥è·å–</p>\n<h3 id=\"SpringåŸºäºxmlæ³¨å…¥beançš„å‡ ç§æ–¹å¼\"><a href=\"#SpringåŸºäºxmlæ³¨å…¥beançš„å‡ ç§æ–¹å¼\" class=\"headerlink\" title=\"SpringåŸºäºxmlæ³¨å…¥beançš„å‡ ç§æ–¹å¼\"></a>SpringåŸºäºxmlæ³¨å…¥beançš„å‡ ç§æ–¹å¼</h3><ol>\n<li>Setæ–¹æ³•æ³¨å…¥ï¼š<code>&lt;property name=&quot;xxx&quot; value=&quot;yyy&quot;/&gt;</code></li>\n<li>æ„é€ å™¨æ³¨å…¥ï¼š<code>&lt;construtor-arg type/index/name=&quot;xxx&quot; value=&quot;yyy&quot;/&gt;</code></li>\n<li>é™æ€å·¥å‚æ³¨å…¥ï¼›factory-bean factory-method</li>\n<li>å®ä¾‹å·¥å‚ï¼› class factory-method</li>\n</ol>\n<h3 id=\"è§£é‡ŠSpringæ”¯æŒçš„å‡ ç§beançš„ä½œç”¨åŸŸ\"><a href=\"#è§£é‡ŠSpringæ”¯æŒçš„å‡ ç§beançš„ä½œç”¨åŸŸ\" class=\"headerlink\" title=\"è§£é‡ŠSpringæ”¯æŒçš„å‡ ç§beançš„ä½œç”¨åŸŸ\"></a>è§£é‡ŠSpringæ”¯æŒçš„å‡ ç§beançš„ä½œç”¨åŸŸ</h3><p>Springæ¡†æ¶æ”¯æŒä»¥ä¸‹äº”ç§beançš„ä½œç”¨åŸŸï¼š</p>\n<ul>\n<li><strong>singleton :</strong> beanåœ¨æ¯ä¸ªSpring ioc å®¹å™¨ä¸­åªæœ‰ä¸€ä¸ªå®ä¾‹ã€‚</li>\n<li><strong>prototype</strong>ï¼šä¸€ä¸ªbeançš„å®šä¹‰å¯ä»¥æœ‰å¤šä¸ªå®ä¾‹ã€‚</li>\n<li><strong>request</strong>ï¼šæ¯æ¬¡httpè¯·æ±‚éƒ½ä¼šåˆ›å»ºä¸€ä¸ªbeanï¼Œè¯¥ä½œç”¨åŸŸä»…åœ¨åŸºäºwebçš„Spring ApplicationContextæƒ…å½¢ä¸‹æœ‰æ•ˆã€‚</li>\n<li><strong>session</strong>ï¼šåœ¨ä¸€ä¸ªHTTP Sessionä¸­ï¼Œä¸€ä¸ªbeanå®šä¹‰å¯¹åº”ä¸€ä¸ªå®ä¾‹ã€‚è¯¥ä½œç”¨åŸŸä»…åœ¨åŸºäºwebçš„Spring ApplicationContextæƒ…å½¢ä¸‹æœ‰æ•ˆã€‚</li>\n<li><strong>global-session</strong>ï¼šåœ¨ä¸€ä¸ªå…¨å±€çš„HTTP Sessionä¸­ï¼Œä¸€ä¸ªbeanå®šä¹‰å¯¹åº”ä¸€ä¸ªå®ä¾‹ã€‚è¯¥ä½œç”¨åŸŸä»…åœ¨åŸºäºwebçš„Spring ApplicationContextæƒ…å½¢ä¸‹æœ‰æ•ˆã€‚</li>\n</ul>\n<p><strong>æ³¨æ„ï¼š</strong> ç¼ºçœçš„Spring bean çš„ä½œç”¨åŸŸæ˜¯singletonã€‚ä½¿ç”¨ prototype ä½œç”¨åŸŸéœ€è¦æ…é‡çš„æ€è€ƒï¼Œå› ä¸ºé¢‘ç¹åˆ›å»ºå’Œé”€æ¯ bean ä¼šå¸¦æ¥å¾ˆå¤§çš„æ€§èƒ½å¼€é”€ã€‚</p>\n<h3 id=\"Springæ¡†æ¶ä¸­çš„å•ä¾‹beanæ˜¯çº¿ç¨‹å®‰å…¨çš„å—ï¼Ÿ\"><a href=\"#Springæ¡†æ¶ä¸­çš„å•ä¾‹beanæ˜¯çº¿ç¨‹å®‰å…¨çš„å—ï¼Ÿ\" class=\"headerlink\" title=\"Springæ¡†æ¶ä¸­çš„å•ä¾‹beanæ˜¯çº¿ç¨‹å®‰å…¨çš„å—ï¼Ÿ\"></a>Springæ¡†æ¶ä¸­çš„å•ä¾‹beanæ˜¯çº¿ç¨‹å®‰å…¨çš„å—ï¼Ÿ</h3><p>ä¸æ˜¯ï¼ŒSpringæ¡†æ¶ä¸­çš„å•ä¾‹beanä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚</p>\n<p>spring ä¸­çš„ bean é»˜è®¤æ˜¯å•ä¾‹æ¨¡å¼ï¼Œspring æ¡†æ¶å¹¶æ²¡æœ‰å¯¹å•ä¾‹ bean è¿›è¡Œå¤šçº¿ç¨‹çš„å°è£…å¤„ç†ã€‚</p>\n<p>ç„¶è€Œï¼Œå®é™…ä¸Šå¤§éƒ¨åˆ†æ—¶å€™ spring bean æ— çŠ¶æ€çš„ï¼ˆæ¯”å¦‚ dao ç±»ï¼‰ï¼Œæ‰€ä»¥æŸç§ç¨‹åº¦ä¸Šæ¥è¯´ bean ä¹Ÿæ˜¯å®‰å…¨çš„ï¼Œä½†å¦‚æœ bean æœ‰çŠ¶æ€çš„è¯ï¼ˆæ¯”å¦‚ view model å¯¹è±¡ï¼‰ï¼Œé‚£å°±è¦å¼€å‘è€…è‡ªå·±å»ä¿è¯çº¿ç¨‹å®‰å…¨äº†ï¼Œæœ€ç®€å•çš„å°±æ˜¯æ”¹å˜ bean çš„ä½œç”¨åŸŸï¼ŒæŠŠâ€œsingletonâ€å˜æ›´ä¸ºâ€œprototypeâ€ï¼Œè¿™æ ·è¯·æ±‚ bean ç›¸å½“äº new Bean()äº†ï¼Œæ‰€ä»¥å°±å¯ä»¥ä¿è¯çº¿ç¨‹å®‰å…¨äº†ã€‚</p>\n<blockquote>\n<p>æœ‰çŠ¶æ€å°±æ˜¯æœ‰æ•°æ®å­˜å‚¨åŠŸèƒ½<br>æ— çŠ¶æ€å°±æ˜¯ä¸ä¼šä¿å­˜æ•°æ®</p>\n</blockquote>\n<h3 id=\"Springå¦‚ä½•å¤„ç†çº¿ç¨‹å¹¶å‘é—®é¢˜ï¼Ÿ\"><a href=\"#Springå¦‚ä½•å¤„ç†çº¿ç¨‹å¹¶å‘é—®é¢˜ï¼Ÿ\" class=\"headerlink\" title=\"Springå¦‚ä½•å¤„ç†çº¿ç¨‹å¹¶å‘é—®é¢˜ï¼Ÿ\"></a>Springå¦‚ä½•å¤„ç†çº¿ç¨‹å¹¶å‘é—®é¢˜ï¼Ÿ</h3><p><strong>Springä½¿ç”¨ThreadLocalå¯¹ä¸€äº›Beançš„çº¿ç¨‹å®‰å…¨é—®é¢˜è¿›è¡Œå¤„ç†</strong>ã€‚</p>\n<p>ThreadLocalå’Œçº¿ç¨‹åŒæ­¥æœºåˆ¶éƒ½æ˜¯ä¸ºäº†è§£å†³å¤šçº¿ç¨‹ä¸­ç›¸åŒå˜é‡çš„è®¿é—®å†²çªé—®é¢˜ã€‚åŒæ­¥æœºåˆ¶é‡‡ç”¨äº†â€œæ—¶é—´æ¢ç©ºé—´â€çš„æ–¹å¼ï¼Œä»…æä¾›ä¸€ä»½å˜é‡ï¼Œä¸åŒçš„çº¿ç¨‹åœ¨è®¿é—®å‰éœ€è¦è·å–é”ï¼Œæ²¡è·å¾—é”çš„çº¿ç¨‹åˆ™éœ€è¦æ’é˜Ÿã€‚è€ŒThreadLocalé‡‡ç”¨äº†â€œç©ºé—´æ¢æ—¶é—´â€çš„æ–¹å¼ã€‚</p>\n<p>ThreadLocalä¼šä¸ºæ¯ä¸€ä¸ªçº¿ç¨‹æä¾›ä¸€ä¸ªç‹¬ç«‹çš„å˜é‡å‰¯æœ¬ï¼Œä»è€Œéš”ç¦»äº†å¤šä¸ªçº¿ç¨‹å¯¹æ•°æ®çš„è®¿é—®å†²çªã€‚å› ä¸ºæ¯ä¸€ä¸ªçº¿ç¨‹éƒ½æ‹¥æœ‰è‡ªå·±çš„å˜é‡å‰¯æœ¬ï¼Œä»è€Œä¹Ÿå°±æ²¡æœ‰å¿…è¦å¯¹è¯¥å˜é‡è¿›è¡ŒåŒæ­¥äº†ã€‚ThreadLocalæä¾›äº†çº¿ç¨‹å®‰å…¨çš„å…±äº«å¯¹è±¡ï¼Œåœ¨ç¼–å†™å¤šçº¿ç¨‹ä»£ç æ—¶ï¼Œå¯ä»¥æŠŠä¸å®‰å…¨çš„å˜é‡å°è£…è¿›ThreadLocalã€‚</p>\n<h3 id=\"è§£é‡ŠSpringæ¡†æ¶ä¸­beançš„ç”Ÿå‘½å‘¨æœŸ\"><a href=\"#è§£é‡ŠSpringæ¡†æ¶ä¸­beançš„ç”Ÿå‘½å‘¨æœŸ\" class=\"headerlink\" title=\"è§£é‡ŠSpringæ¡†æ¶ä¸­beançš„ç”Ÿå‘½å‘¨æœŸ\"></a>è§£é‡ŠSpringæ¡†æ¶ä¸­beançš„ç”Ÿå‘½å‘¨æœŸ</h3><p>å‚è€ƒï¼š<a href=\"https://www.cnblogs.com/javazhiyin/p/10905294.html\">https://www.cnblogs.com/javazhiyin/p/10905294.html</a></p>\n<p><img src=\"https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/TyporaNotes201911012343410.png\" alt=\"Springä¸­Beançš„ç”Ÿå‘½å‘¨æœŸ\"></p>\n<p><strong>1ã€å®ä¾‹åŒ–Beanï¼š</strong></p>\n<p>å¯¹äºBeanFactoryå®¹å™¨ï¼Œå½“å®¢æˆ·å‘å®¹å™¨è¯·æ±‚ä¸€ä¸ªå°šæœªåˆå§‹åŒ–çš„beanæ—¶ï¼Œæˆ–åˆå§‹åŒ–beançš„æ—¶å€™éœ€è¦æ³¨å…¥å¦ä¸€ä¸ªå°šæœªåˆå§‹åŒ–çš„ä¾èµ–æ—¶ï¼Œå®¹å™¨å°±ä¼šè°ƒç”¨createBeanè¿›è¡Œå®ä¾‹åŒ–ã€‚<br>å¯¹äºApplicationContextå®¹å™¨ï¼Œå½“å®¹å™¨å¯åŠ¨ç»“æŸåï¼Œé€šè¿‡è·å–BeanDefinitionå¯¹è±¡ä¸­çš„ä¿¡æ¯ï¼Œå®ä¾‹åŒ–æ‰€æœ‰çš„beanã€‚</p>\n<p><strong>2ã€ä¾èµ–æ³¨å…¥ï¼š</strong></p>\n<p>å®ä¾‹åŒ–åçš„å¯¹è±¡è¢«å°è£…åœ¨BeanWrapperå¯¹è±¡ä¸­ï¼Œç´§æ¥ç€ï¼ŒSpringæ ¹æ®BeanDefinitionä¸­çš„ä¿¡æ¯ ä»¥åŠ é€šè¿‡BeanWrapperæä¾›çš„è®¾ç½®å±æ€§çš„æ¥å£å®Œæˆä¾èµ–æ³¨å…¥ã€‚</p>\n<p><strong>3ã€å¤„ç†Awareæ¥å£ï¼ˆé…ç½®Beanå¯¹è±¡çš„idå€¼ã€å·¥å‚&#x2F;ä¸Šä¸‹æ–‡ï¼‰ï¼š</strong></p>\n<p>æ¥ç€ï¼ŒSpringä¼šæ£€æµ‹è¯¥å¯¹è±¡æ˜¯å¦å®ç°äº†xxxAwareæ¥å£ï¼Œå¹¶å°†ç›¸å…³çš„xxxAwareå®ä¾‹æ³¨å…¥ç»™Beanï¼š</p>\n<ul>\n<li>å¦‚æœè¿™ä¸ªBeanå·²ç»å®ç°äº†BeanNameAwareæ¥å£ï¼Œä¼šè°ƒç”¨å®ƒå®ç°çš„setBeanName(String beanId)æ–¹æ³•ï¼Œæ­¤å¤„ä¼ é€’çš„å°±æ˜¯Springé…ç½®æ–‡ä»¶ä¸­Beançš„idå€¼ï¼›</li>\n<li>å¦‚æœè¿™ä¸ªBeanå·²ç»å®ç°äº†BeanFactoryAwareæ¥å£ï¼Œä¼šè°ƒç”¨å®ƒå®ç°çš„setBeanFactory()æ–¹æ³•ï¼Œä¼ é€’çš„æ˜¯Springå·¥å‚è‡ªèº«ï¼›</li>\n<li>å¦‚æœè¿™ä¸ªBeanå·²ç»å®ç°äº†ApplicationContextAwareæ¥å£ï¼Œä¼šè°ƒsetApplicationContext(ApplicationContext)æ–¹æ³•ï¼Œä¼ å…¥Springä¸Šä¸‹æ–‡ï¼›</li>\n</ul>\n<p><strong>4ã€postProcessBeforeInitializationï¼ˆåˆå§‹åŒ–å‰ç½®å¤„ç†ï¼‰ï¼š</strong></p>\n<p>å¦‚æœæƒ³å¯¹Beanè¿›è¡Œä¸€äº›è‡ªå®šä¹‰çš„å¤„ç†ï¼Œé‚£ä¹ˆå¯ä»¥è®©Beanå®ç°äº†BeanPostProcessoræ¥å£ï¼Œé‚£å°†ä¼šè°ƒç”¨postProcessBeforeInitialization(Object obj, String s)æ–¹æ³•ã€‚ç”±äºè¿™ä¸ªæ–¹æ³•æ˜¯åœ¨Beanåˆå§‹åŒ–ç»“æŸæ—¶è°ƒç”¨çš„ï¼Œæ‰€ä»¥å¯ä»¥è¢«åº”ç”¨äºå†…å­˜æˆ–ç¼“å­˜æŠ€æœ¯ï¼›</p>\n<p><strong>5ã€è‡ªå®šä¹‰åˆå§‹åŒ–init-methodï¼š</strong></p>\n<p>å¦‚æœBeanåœ¨Springé…ç½®æ–‡ä»¶ä¸­é…ç½®äº† init-method å±æ€§ï¼Œåˆ™ä¼šè‡ªåŠ¨è°ƒç”¨å…¶é…ç½®çš„<strong>è‡ªå®šä¹‰åˆå§‹åŒ–</strong>æ–¹æ³•ã€‚</p>\n<p><strong>6ã€postProcessAfterInitializationï¼ˆåˆå§‹åŒ–åç½®å¤„ç†ï¼‰</strong></p>\n<p>å¦‚æœè¿™ä¸ªBeanå®ç°äº†BeanPostProcessoræ¥å£ï¼Œå°†ä¼šè°ƒç”¨postProcessAfterInitialization(Object obj, String s)æ–¹æ³•ï¼Œ<strong>AOPåœ¨è¿™ä¸ªæ—¶å€™è¿›è¡Œä»£ç†å¯¹è±¡çš„åˆ›å»º</strong>ã€‚</p>\n<p><strong>NOW</strong> ä»¥ä¸Šå‡ ä¸ªæ­¥éª¤å®Œæˆåï¼ŒBeanå°±å·²ç»è¢«æ­£ç¡®åˆ›å»ºäº†ï¼Œä¹‹åå°±å¯ä»¥ä½¿ç”¨è¿™ä¸ªBeanäº†ã€‚</p>\n<p><strong>7ã€æ¸…ç†é˜¶æ®µdestroyï¼š</strong></p>\n<p>å½“Beanä¸å†éœ€è¦æ—¶ï¼Œä¼šè¿›å…¥æ¸…ç†é˜¶æ®µï¼Œå¦‚æœBeanå®ç°äº†DisposableBeanè¿™ä¸ªæ¥å£ï¼Œä¼šè°ƒç”¨å…¶å®ç°çš„destroy()æ–¹æ³•ï¼›</p>\n<p><strong>8ã€è‡ªå®šä¹‰é”€æ¯destroy-methodï¼š</strong></p>\n<p>æœ€åï¼Œå¦‚æœè¿™ä¸ªBeançš„Springé…ç½®ä¸­é…ç½®äº†destroy-methodå±æ€§ï¼Œä¼šè‡ªåŠ¨è°ƒç”¨å…¶é…ç½®çš„<strong>è‡ªå®šä¹‰é”€æ¯</strong>æ–¹æ³•ã€‚</p>\n<h3 id=\"åœ¨-Springä¸­å¦‚ä½•æ³¨å…¥ä¸€ä¸ªJavaé›†åˆï¼Ÿ\"><a href=\"#åœ¨-Springä¸­å¦‚ä½•æ³¨å…¥ä¸€ä¸ªJavaé›†åˆï¼Ÿ\" class=\"headerlink\" title=\"åœ¨ Springä¸­å¦‚ä½•æ³¨å…¥ä¸€ä¸ªJavaé›†åˆï¼Ÿ\"></a>åœ¨ Springä¸­å¦‚ä½•æ³¨å…¥ä¸€ä¸ªJavaé›†åˆï¼Ÿ</h3><p>ç”¨<code>&lt;list&gt;</code>æ³¨å…¥ä¸€åˆ—å€¼ï¼Œç”¨<code>&lt;map&gt;</code>æ³¨å…¥ä¸€ç»„æ˜ å°„æ•°æ®ã€‚</p>\n<h3 id=\"ä»€ä¹ˆæ˜¯beanè£…é…ï¼Ÿ\"><a href=\"#ä»€ä¹ˆæ˜¯beanè£…é…ï¼Ÿ\" class=\"headerlink\" title=\"ä»€ä¹ˆæ˜¯beanè£…é…ï¼Ÿ\"></a>ä»€ä¹ˆæ˜¯beanè£…é…ï¼Ÿ</h3><p>é€šè¿‡beançš„ä¾èµ–å…³ç³»ï¼Œä½¿ç”¨ä¾èµ–æ³¨å…¥å°†springä¸­çš„beanè£…é…åœ¨ä¸€èµ·ã€‚<br>springå¯ä»¥é€šè¿‡beançš„ä¾èµ–å…³ç³»è‡ªåŠ¨å®Œæˆbeanä¹‹é—´çš„é…ç½®ã€‚</p>\n<h3 id=\"Spring-è‡ªåŠ¨è£…é…-bean-æœ‰å“ªäº›æ–¹å¼ï¼Ÿ\"><a href=\"#Spring-è‡ªåŠ¨è£…é…-bean-æœ‰å“ªäº›æ–¹å¼ï¼Ÿ\" class=\"headerlink\" title=\"Spring è‡ªåŠ¨è£…é… bean æœ‰å“ªäº›æ–¹å¼ï¼Ÿ\"></a>Spring è‡ªåŠ¨è£…é… bean æœ‰å“ªäº›æ–¹å¼ï¼Ÿ</h3><p>åœ¨springä¸­ï¼Œå¯¹è±¡æ— éœ€è‡ªå·±æŸ¥æ‰¾æˆ–åˆ›å»ºä¸å…¶å…³è”çš„å…¶ä»–å¯¹è±¡ï¼Œç”±å®¹å™¨è´Ÿè´£æŠŠéœ€è¦ç›¸äº’åä½œçš„å¯¹è±¡å¼•ç”¨èµ‹äºˆå„ä¸ªå¯¹è±¡ã€‚</p>\n<p>åœ¨Springæ¡†æ¶xmlé…ç½®ä¸­å…±æœ‰5ç§è‡ªåŠ¨è£…é…ï¼š</p>\n<ul>\n<li>noï¼šé»˜è®¤çš„æ–¹å¼æ˜¯ä¸è¿›è¡Œè‡ªåŠ¨è£…é…çš„ï¼Œé€šè¿‡æ‰‹å·¥è®¾ç½®refå±æ€§æ¥è¿›è¡Œè£…é…beanã€‚</li>\n<li>byNameï¼šé€šè¿‡beançš„åç§°è¿›è¡Œè‡ªåŠ¨è£…é…ï¼Œå¦‚æœä¸€ä¸ªbeançš„ property ä¸å¦ä¸€bean çš„name ç›¸åŒï¼Œå°±è¿›è¡Œè‡ªåŠ¨è£…é…ã€‚</li>\n<li>byTypeï¼šé€šè¿‡å‚æ•°çš„æ•°æ®ç±»å‹è¿›è¡Œè‡ªåŠ¨è£…é…ã€‚</li>\n<li>constructorï¼šåˆ©ç”¨æ„é€ å‡½æ•°è¿›è¡Œè£…é…ï¼Œå¹¶ä¸”æ„é€ å‡½æ•°çš„å‚æ•°é€šè¿‡byTypeè¿›è¡Œè£…é…ã€‚</li>\n<li>autodetectï¼šè‡ªåŠ¨æ¢æµ‹ï¼Œå¦‚æœæœ‰æ„é€ æ–¹æ³•ï¼Œé€šè¿‡ constructçš„æ–¹å¼è‡ªåŠ¨è£…é…ï¼Œå¦åˆ™ä½¿ç”¨ byTypeçš„æ–¹å¼è‡ªåŠ¨è£…é…ã€‚</li>\n</ul>\n<h3 id=\"ä½¿ç”¨-Autowiredæ³¨è§£è‡ªåŠ¨è£…é…çš„è¿‡ç¨‹æ˜¯æ€æ ·çš„ï¼Ÿ\"><a href=\"#ä½¿ç”¨-Autowiredæ³¨è§£è‡ªåŠ¨è£…é…çš„è¿‡ç¨‹æ˜¯æ€æ ·çš„ï¼Ÿ\" class=\"headerlink\" title=\"ä½¿ç”¨@Autowiredæ³¨è§£è‡ªåŠ¨è£…é…çš„è¿‡ç¨‹æ˜¯æ€æ ·çš„ï¼Ÿ\"></a>ä½¿ç”¨@Autowiredæ³¨è§£è‡ªåŠ¨è£…é…çš„è¿‡ç¨‹æ˜¯æ€æ ·çš„ï¼Ÿ</h3><p>ä½¿ç”¨@Autowiredæ³¨è§£æ¥è‡ªåŠ¨è£…é…æŒ‡å®šçš„beanã€‚åœ¨ä½¿ç”¨@Autowiredæ³¨è§£ä¹‹å‰éœ€è¦åœ¨Springé…ç½®æ–‡ä»¶è¿›è¡Œé…ç½®æ³¨è§£æ‰«æ <code>&lt;context:annotation-config /&gt;</code>ã€‚</p>\n<p>åœ¨å¯åŠ¨spring IoCæ—¶ï¼Œå®¹å™¨è‡ªåŠ¨è£…è½½äº†ä¸€ä¸ªåç½®å¤„ç†å™¨ï¼Œå½“å®¹å™¨æ‰«æåˆ°@Autowiedã€@Resourceæˆ–@Injectæ—¶ï¼Œå°±ä¼šåœ¨IoCå®¹å™¨è‡ªåŠ¨æŸ¥æ‰¾éœ€è¦çš„beanï¼Œå¹¶è£…é…ç»™è¯¥å¯¹è±¡çš„å±æ€§ã€‚åœ¨ä½¿ç”¨@Autowiredæ—¶ï¼Œé¦–å…ˆåœ¨å®¹å™¨ä¸­<strong>æŸ¥è¯¢å¯¹åº”ç±»å‹</strong>çš„beanï¼š</p>\n<ul>\n<li>å¦‚æœå¯¹åº”ç±»å‹æŸ¥è¯¢ç»“æœåˆšå¥½ä¸ºä¸€ä¸ªï¼Œå°±å°†è¯¥beanè£…é…ç»™@AutowiredæŒ‡å®šçš„æ•°æ®ï¼›</li>\n<li>å¦‚æœå¯¹åº”ç±»å‹æŸ¥è¯¢çš„ç»“æœä¸æ­¢ä¸€ä¸ªï¼Œé‚£ä¹ˆ@Autowiredä¼šæ ¹æ®åç§°æ¥æŸ¥æ‰¾ï¼›</li>\n<li>å¦‚æœä¸Šè¿°æŸ¥æ‰¾çš„ç»“æœä¸ºç©ºæˆ–è€…ä¸æ­¢ä¸€ä¸ªï¼Œé‚£ä¹ˆä¼šæŠ›å‡ºå¼‚å¸¸ã€‚</li>\n</ul>\n<h2 id=\"Springæ³¨è§£\"><a href=\"#Springæ³¨è§£\" class=\"headerlink\" title=\"Springæ³¨è§£\"></a>Springæ³¨è§£</h2><h3 id=\"ä»€ä¹ˆæ˜¯åŸºäºJavaçš„Springæ³¨è§£é…ç½®-ç»™ä¸€äº›æ³¨è§£çš„ä¾‹å­\"><a href=\"#ä»€ä¹ˆæ˜¯åŸºäºJavaçš„Springæ³¨è§£é…ç½®-ç»™ä¸€äº›æ³¨è§£çš„ä¾‹å­\" class=\"headerlink\" title=\"ä»€ä¹ˆæ˜¯åŸºäºJavaçš„Springæ³¨è§£é…ç½®? ç»™ä¸€äº›æ³¨è§£çš„ä¾‹å­\"></a>ä»€ä¹ˆæ˜¯åŸºäºJavaçš„Springæ³¨è§£é…ç½®? ç»™ä¸€äº›æ³¨è§£çš„ä¾‹å­</h3><p>åŸºäºJavaçš„é…ç½®ï¼Œå…è®¸ä½ åœ¨å°‘é‡çš„Javaæ³¨è§£çš„å¸®åŠ©ä¸‹ï¼Œè¿›è¡Œä½ çš„å¤§éƒ¨åˆ†Springé…ç½®è€Œéé€šè¿‡XMLæ–‡ä»¶ã€‚</p>\n<p>ä»¥@Configuration æ³¨è§£ä¸ºä¾‹ï¼Œå®ƒç”¨æ¥æ ‡è®°ç±»å¯ä»¥å½“åšä¸€ä¸ªbeançš„å®šä¹‰ï¼Œè¢«Spring IOCå®¹å™¨ä½¿ç”¨ã€‚</p>\n<p>å¦ä¸€ä¸ªä¾‹å­æ˜¯@Beanæ³¨è§£ï¼Œå®ƒè¡¨ç¤ºæ­¤æ–¹æ³•å°†è¦è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œä½œä¸ºä¸€ä¸ªbeanæ³¨å†Œè¿›Springåº”ç”¨ä¸Šä¸‹æ–‡ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Configuration</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">StudentConfig</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@Bean</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> StudentBean <span class=\"title function_\">myStudent</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"title class_\">StudentBean</span>();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"æ€æ ·å¼€å¯æ³¨è§£è£…é…ï¼Ÿ\"><a href=\"#æ€æ ·å¼€å¯æ³¨è§£è£…é…ï¼Ÿ\" class=\"headerlink\" title=\"æ€æ ·å¼€å¯æ³¨è§£è£…é…ï¼Ÿ\"></a>æ€æ ·å¼€å¯æ³¨è§£è£…é…ï¼Ÿ</h3><p>æ³¨è§£è£…é…åœ¨é»˜è®¤æƒ…å†µä¸‹æ˜¯ä¸å¼€å¯çš„ï¼Œä¸ºäº†ä½¿ç”¨æ³¨è§£è£…é…ï¼Œå¿…é¡»åœ¨Springé…ç½®æ–‡ä»¶ä¸­é…ç½® <code>&lt;context:annotation-config/&gt;</code>ã€‚</p>\n<h3 id=\"Component-Controller-Repository-Service-æœ‰ä½•åŒºåˆ«ï¼Ÿ\"><a href=\"#Component-Controller-Repository-Service-æœ‰ä½•åŒºåˆ«ï¼Ÿ\" class=\"headerlink\" title=\"@Component, @Controller, @Repository, @Service æœ‰ä½•åŒºåˆ«ï¼Ÿ\"></a>@Component, @Controller, @Repository, @Service æœ‰ä½•åŒºåˆ«ï¼Ÿ</h3><p>@Componentï¼šè¿™å°† Java ç±»æ ‡è®°ä¸º beanã€‚spring çš„ç»„ä»¶æ‰«ææœºåˆ¶å¯ä»¥å°†å…¶æ‰«æå¹¶å°†å…¶æ³¨å†Œåˆ°IoCå®¹å™¨ä¸­ã€‚</p>\n<p>@Controllerï¼šè¿™å°†ä¸€ä¸ªç±»æ ‡è®°ä¸º Spring Web MVC æ§åˆ¶å™¨ã€‚æ ‡æœ‰å®ƒçš„ Bean ä¼šè‡ªåŠ¨å¯¼å…¥åˆ° IoC å®¹å™¨ä¸­ã€‚</p>\n<p>@Serviceï¼šæ­¤æ³¨è§£æ˜¯ç»„ä»¶æ³¨è§£çš„ç‰¹åŒ–ã€‚å®ƒä¸ä¼šå¯¹ @Component æ³¨è§£æä¾›ä»»ä½•å…¶ä»–è¡Œä¸ºã€‚æ‚¨å¯ä»¥åœ¨æœåŠ¡å±‚ç±»ä¸­ä½¿ç”¨ @Service è€Œä¸æ˜¯ @Componentï¼Œå› ä¸ºå®ƒä»¥æ›´å¥½çš„æ–¹å¼æŒ‡å®šäº†æ„å›¾ã€‚</p>\n<p>@Repositoryï¼šè¿™ä¸ªæ³¨è§£æ˜¯å…·æœ‰ç±»ä¼¼ç”¨é€”å’ŒåŠŸèƒ½çš„ @Component æ³¨è§£çš„ç‰¹åŒ–ã€‚å®ƒä¸º DAO æä¾›äº†é¢å¤–çš„å¥½å¤„ã€‚å®ƒå°† DAO å¯¼å…¥ IoC å®¹å™¨ï¼Œå¹¶ä½¿æœªç»æ£€æŸ¥çš„å¼‚å¸¸æœ‰èµ„æ ¼è½¬æ¢ä¸º Spring DataAccessExceptionã€‚</p>\n<h3 id=\"Required-æ³¨è§£æœ‰ä»€ä¹ˆä½œç”¨\"><a href=\"#Required-æ³¨è§£æœ‰ä»€ä¹ˆä½œç”¨\" class=\"headerlink\" title=\"@Required æ³¨è§£æœ‰ä»€ä¹ˆä½œç”¨\"></a>@Required æ³¨è§£æœ‰ä»€ä¹ˆä½œç”¨</h3><p><code>@Required</code>æ³¨è§£ä½œç”¨äºBean<code>setter</code>æ–¹æ³•ä¸Šï¼Œç”¨äºæ£€æŸ¥ä¸€ä¸ªBeançš„å±æ€§çš„å€¼<strong>åœ¨é…ç½®æœŸé—´æ˜¯å¦è¢«èµ‹äºˆæˆ–è®¾ç½®</strong>ï¼Œå¦‚æœæœªè¢«è®¾ç½®ï¼Œå®¹å™¨å°†æŠ›å‡ºBeanInitializationExceptionã€‚ç¤ºä¾‹ï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">Employee</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String name;</span><br><span class=\"line\">    <span class=\"meta\">@Required</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">setName</span><span class=\"params\">(String name)</span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.name=name;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> string <span class=\"title function_\">getName</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> name;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Autowiredå’Œ-Resourceä¹‹é—´çš„åŒºåˆ«\"><a href=\"#Autowiredå’Œ-Resourceä¹‹é—´çš„åŒºåˆ«\" class=\"headerlink\" title=\"@Autowiredå’Œ@Resourceä¹‹é—´çš„åŒºåˆ«\"></a>@Autowiredå’Œ@Resourceä¹‹é—´çš„åŒºåˆ«</h3><p>@Autowiredå¯ç”¨äºï¼šæ„é€ å‡½æ•°ã€æˆå‘˜å˜é‡ã€Setteræ–¹æ³•</p>\n<p>@Autowiredå’Œ@Resourceä¹‹é—´çš„åŒºåˆ«</p>\n<ul>\n<li>@Autowiredé»˜è®¤æ˜¯<strong>æŒ‰ç…§ç±»å‹è£…é…æ³¨å…¥</strong>çš„ï¼Œé»˜è®¤æƒ…å†µä¸‹å®ƒè¦æ±‚ä¾èµ–å¯¹è±¡å¿…é¡»å­˜åœ¨ï¼ˆå¯ä»¥è®¾ç½®å®ƒrequiredå±æ€§ä¸ºfalseï¼‰ã€‚</li>\n<li>@Resourceé»˜è®¤æ˜¯<strong>æŒ‰ç…§åç§°æ¥è£…é…æ³¨å…¥</strong>çš„ï¼Œåªæœ‰å½“æ‰¾ä¸åˆ°ä¸åç§°åŒ¹é…çš„beanæ‰ä¼šæŒ‰ç…§ç±»å‹æ¥è£…é…æ³¨å…¥ã€‚</li>\n</ul>\n<h3 id=\"Qualifier-æ³¨è§£æœ‰ä»€ä¹ˆä½œç”¨\"><a href=\"#Qualifier-æ³¨è§£æœ‰ä»€ä¹ˆä½œç”¨\" class=\"headerlink\" title=\"@Qualifier æ³¨è§£æœ‰ä»€ä¹ˆä½œç”¨\"></a>@Qualifier æ³¨è§£æœ‰ä»€ä¹ˆä½œç”¨</h3><p>å½“æ‚¨åˆ›å»ºå¤šä¸ªç›¸åŒç±»å‹çš„ bean å¹¶å¸Œæœ›ä»…ä½¿ç”¨å±æ€§è£…é…å…¶ä¸­ä¸€ä¸ª bean æ—¶ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨@Qualifier æ³¨è§£å’Œ @Autowired é€šè¿‡æŒ‡å®šåº”è¯¥è£…é…å“ªä¸ªç¡®åˆ‡çš„ bean æ¥æ¶ˆé™¤æ­§ä¹‰ã€‚</p>\n<h3 id=\"RequestMapping-æ³¨è§£æœ‰ä»€ä¹ˆç”¨ï¼Ÿ\"><a href=\"#RequestMapping-æ³¨è§£æœ‰ä»€ä¹ˆç”¨ï¼Ÿ\" class=\"headerlink\" title=\"@RequestMapping æ³¨è§£æœ‰ä»€ä¹ˆç”¨ï¼Ÿ\"></a>@RequestMapping æ³¨è§£æœ‰ä»€ä¹ˆç”¨ï¼Ÿ</h3><p>@RequestMapping æ³¨è§£ç”¨äºå°†ç‰¹å®š HTTP è¯·æ±‚æ–¹æ³•æ˜ å°„åˆ°å°†å¤„ç†ç›¸åº”è¯·æ±‚çš„æ§åˆ¶å™¨ä¸­çš„ç‰¹å®šç±»&#x2F;æ–¹æ³•ã€‚æ­¤æ³¨é‡Šå¯åº”ç”¨äºä¸¤ä¸ªçº§åˆ«ï¼š</p>\n<ul>\n<li>ç±»çº§åˆ«ï¼šæ˜ å°„è¯·æ±‚çš„ URL</li>\n<li>æ–¹æ³•çº§åˆ«ï¼šæ˜ å°„ URL ä»¥åŠ HTTP è¯·æ±‚æ–¹æ³•</li>\n</ul>\n<h2 id=\"Springäº‹åŠ¡\"><a href=\"#Springäº‹åŠ¡\" class=\"headerlink\" title=\"Springäº‹åŠ¡\"></a>Springäº‹åŠ¡</h2><h3 id=\"Springæ”¯æŒçš„äº‹åŠ¡ç®¡ç†ç±»å‹-x2F-äº‹åŠ¡å®ç°æ–¹å¼æœ‰å“ªäº›ï¼Ÿ\"><a href=\"#Springæ”¯æŒçš„äº‹åŠ¡ç®¡ç†ç±»å‹-x2F-äº‹åŠ¡å®ç°æ–¹å¼æœ‰å“ªäº›ï¼Ÿ\" class=\"headerlink\" title=\"Springæ”¯æŒçš„äº‹åŠ¡ç®¡ç†ç±»å‹&#x2F;äº‹åŠ¡å®ç°æ–¹å¼æœ‰å“ªäº›ï¼Ÿ\"></a>Springæ”¯æŒçš„äº‹åŠ¡ç®¡ç†ç±»å‹&#x2F;äº‹åŠ¡å®ç°æ–¹å¼æœ‰å“ªäº›ï¼Ÿ</h3><p>Springæ”¯æŒä¸¤ç§ç±»å‹çš„äº‹åŠ¡ç®¡ç†ï¼š</p>\n<p><strong>ç¼–ç¨‹å¼äº‹åŠ¡ç®¡ç†</strong>ï¼šè¿™æ„å‘³ä½ é€šè¿‡ç¼–ç¨‹çš„æ–¹å¼ç®¡ç†äº‹åŠ¡ï¼Œç»™ä½ å¸¦æ¥æå¤§çš„çµæ´»æ€§ï¼Œä½†æ˜¯éš¾ç»´æŠ¤ã€‚</p>\n<p><strong>å£°æ˜å¼äº‹åŠ¡ç®¡ç†</strong>ï¼šè¿™æ„å‘³ç€ä½ å¯ä»¥å°†ä¸šåŠ¡ä»£ç å’Œäº‹åŠ¡ç®¡ç†åˆ†ç¦»ï¼Œä½ åªéœ€ç”¨æ³¨è§£å’ŒXMLé…ç½®æ¥ç®¡ç†äº‹åŠ¡ã€‚</p>\n<h3 id=\"Springäº‹åŠ¡çš„å®ç°æ–¹å¼å’Œå®ç°åŸç†\"><a href=\"#Springäº‹åŠ¡çš„å®ç°æ–¹å¼å’Œå®ç°åŸç†\" class=\"headerlink\" title=\"Springäº‹åŠ¡çš„å®ç°æ–¹å¼å’Œå®ç°åŸç†\"></a>Springäº‹åŠ¡çš„å®ç°æ–¹å¼å’Œå®ç°åŸç†</h3><p>Springäº‹åŠ¡çš„æœ¬è´¨å…¶å®å°±æ˜¯æ•°æ®åº“å¯¹äº‹åŠ¡çš„æ”¯æŒï¼Œæ²¡æœ‰æ•°æ®åº“çš„äº‹åŠ¡æ”¯æŒï¼ŒSpringæ˜¯æ— æ³•æä¾›äº‹åŠ¡åŠŸèƒ½çš„ã€‚</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- 2ã€é…ç½®äº‹åŠ¡çš„é€šçŸ¥ä»¥åŠäº‹åŠ¡çš„å±æ€§--&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">tx:advice</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;txAdvice&quot;</span> <span class=\"attr\">transaction-manager</span>=<span class=\"string\">&quot;transactionManager&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- é…ç½®äº‹åŠ¡çš„å±æ€§</span></span><br><span class=\"line\"><span class=\"comment\">isolationï¼šç”¨äºæŒ‡å®šäº‹åŠ¡çš„éš”ç¦»çº§åˆ«ã€‚é»˜è®¤å€¼æ˜¯DEFAULTï¼Œè¡¨ç¤ºä½¿ç”¨æ•°æ®åº“çš„é»˜è®¤éš”</span></span><br><span class=\"line\"><span class=\"comment\">ç¦»çº§åˆ«ã€‚</span></span><br><span class=\"line\"><span class=\"comment\">propagationï¼šç”¨äºæŒ‡å®šäº‹åŠ¡çš„ä¼ æ’­è¡Œä¸ºã€‚é»˜è®¤å€¼æ˜¯REQUIRED(å¢åˆ æ”¹)ï¼Œè¡¨ç¤ºä¸€å®šä¼š</span></span><br><span class=\"line\"><span class=\"comment\">æœ‰äº‹åŠ¡ã€‚æŸ¥è¯¢æ–¹æ³•å¯ä»¥é€‰æ‹©SUPPORTSã€‚</span></span><br><span class=\"line\"><span class=\"comment\">read-onlyï¼šç”¨äºæŒ‡å®šäº‹åŠ¡æ˜¯å¦åªè¯»ã€‚åªæœ‰æŸ¥è¯¢æ–¹æ³•æ‰èƒ½è®¾ç½®ä¸ºtrueã€‚é»˜è®¤å€¼æ˜¯</span></span><br><span class=\"line\"><span class=\"comment\">falseï¼Œè¡¨ç¤ºè¯»å†™ã€‚</span></span><br><span class=\"line\"><span class=\"comment\">timeoutï¼šç”¨äºæŒ‡å®šäº‹åŠ¡çš„è¶…æ—¶æ—¶é—´ï¼Œé»˜è®¤å€¼æ˜¯-1ï¼Œè¡¨ç¤ºæ°¸ä¸è¶…æ—¶ã€‚å¦‚æœæŒ‡å®šäº†æ•°å€¼ï¼Œ</span></span><br><span class=\"line\"><span class=\"comment\">ä»¥ç§’ä¸ºå•ä½ã€‚</span></span><br><span class=\"line\"><span class=\"comment\">rollback-forï¼šç”¨äºæŒ‡å®šä¸€ä¸ªå¼‚å¸¸ï¼Œå½“äº§ç”Ÿè¯¥å¼‚å¸¸æ—¶ï¼Œäº‹åŠ¡å›æ»šï¼Œäº§ç”Ÿå…¶ä»–å¼‚å¸¸æ—¶ï¼Œ</span></span><br><span class=\"line\"><span class=\"comment\">äº‹åŠ¡ä¸å›æ»šã€‚æ²¡æœ‰é»˜è®¤å€¼ã€‚è¡¨ç¤ºä»»ä½•å¼‚å¸¸éƒ½å›æ»šã€‚</span></span><br><span class=\"line\"><span class=\"comment\">no-rollback-forï¼šç”¨äºæŒ‡å®šä¸€ä¸ªå¼‚å¸¸ï¼Œå½“äº§ç”Ÿè¯¥å¼‚å¸¸æ—¶ï¼Œäº‹åŠ¡ä¸å›æ»šï¼Œäº§ç”Ÿå…¶ä»–å¼‚å¸¸</span></span><br><span class=\"line\"><span class=\"comment\">æ—¶äº‹åŠ¡å›æ»šã€‚æ²¡æœ‰é»˜è®¤å€¼ã€‚è¡¨ç¤ºä»»ä½•å¼‚å¸¸éƒ½å›æ»šã€‚</span></span><br><span class=\"line\"><span class=\"comment\">--&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">tx:attributes</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!--éæŸ¥è¯¢æ–¹æ³•--&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">tx:method</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;*&quot;</span> <span class=\"attr\">propagation</span>=<span class=\"string\">&quot;REQUIRED&quot;</span> <span class=\"attr\">read-only</span>=<span class=\"string\">&quot;false&quot;</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!--æŸ¥è¯¢æ–¹æ³•--&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">tx:method</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;find*&quot;</span> <span class=\"attr\">propagation</span>=<span class=\"string\">&quot;SUPPORTS&quot;</span> <span class=\"attr\">read-only</span>=<span class=\"string\">&quot;true&quot;</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">tx:attributes</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">tx:advice</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"è¯´ä¸€ä¸‹Springçš„äº‹åŠ¡ä¼ æ’­è¡Œä¸º\"><a href=\"#è¯´ä¸€ä¸‹Springçš„äº‹åŠ¡ä¼ æ’­è¡Œä¸º\" class=\"headerlink\" title=\"è¯´ä¸€ä¸‹Springçš„äº‹åŠ¡ä¼ æ’­è¡Œä¸º\"></a>è¯´ä¸€ä¸‹Springçš„äº‹åŠ¡ä¼ æ’­è¡Œä¸º</h3><p>springäº‹åŠ¡çš„ä¼ æ’­è¡Œä¸ºè¯´çš„æ˜¯ï¼Œå½“å¤šä¸ªäº‹åŠ¡åŒæ—¶å­˜åœ¨çš„æ—¶å€™ï¼Œspringå¦‚ä½•å¤„ç†è¿™äº›äº‹åŠ¡çš„è¡Œä¸ºã€‚</p>\n<blockquote>\n<p>â‘  <strong>PROPAGATION_REQUIRED</strong>ï¼šå¦‚æœå½“å‰æ²¡æœ‰äº‹åŠ¡ï¼Œå°±åˆ›å»ºä¸€ä¸ªæ–°äº‹åŠ¡ï¼Œå¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œå°±åŠ å…¥è¯¥äº‹åŠ¡ï¼Œè¯¥è®¾ç½®æ˜¯æœ€å¸¸ç”¨çš„è®¾ç½®ã€‚ï¼ˆé»˜è®¤å€¼ï¼Œé€‚ç”¨äºéæŸ¥è¯¢æ–¹æ³•ï¼Œå¢åˆ æ”¹ï¼‰ï¼ˆäº‹åŠ¡å­˜åœ¨å°±ç”¨ä¸å­˜åœ¨è¦åˆ›å»ºï¼‰<br>â‘¡ <strong>PROPAGATION_SUPPORTS</strong>ï¼šæ”¯æŒå½“å‰äº‹åŠ¡ï¼Œå¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œå°±åŠ å…¥è¯¥äº‹åŠ¡ï¼Œå¦‚æœå½“å‰ä¸å­˜åœ¨äº‹åŠ¡ï¼Œå°±ä»¥éäº‹åŠ¡æ‰§è¡Œã€‚ï¼ˆé€‚ç”¨äºæŸ¥è¯¢æ–¹æ³•ï¼‰ï¼ˆäº‹åŠ¡å­˜åœ¨å°±ç”¨ä¸å­˜åœ¨å°±ä¸ç”¨ï¼‰<br>â‘¢ PROPAGATION_MANDATORYï¼šæ”¯æŒå½“å‰äº‹åŠ¡ï¼Œå¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œå°±åŠ å…¥è¯¥äº‹åŠ¡ï¼Œå¦‚æœå½“å‰ä¸å­˜åœ¨äº‹åŠ¡ï¼Œå°±æŠ›å‡ºå¼‚å¸¸ã€‚<br>â‘£ <strong>PROPAGATION_REQUIRES_NEW</strong>ï¼šåˆ›å»ºæ–°äº‹åŠ¡ï¼Œæ— è®ºå½“å‰å­˜ä¸å­˜åœ¨äº‹åŠ¡ï¼Œéƒ½åˆ›å»ºæ–°äº‹åŠ¡ã€‚ï¼ˆæ°¸è¿œéƒ½è¦æ–°äº‹åŠ¡ï¼‰<br>â‘¤ PROPAGATION_NOT_SUPPORTEDï¼šä»¥éäº‹åŠ¡æ–¹å¼æ‰§è¡Œæ“ä½œï¼Œå¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œå°±æŠŠå½“å‰äº‹åŠ¡æŒ‚èµ·ã€‚<br>â‘¥ PROPAGATION_NEVERï¼šä»¥éäº‹åŠ¡æ–¹å¼æ‰§è¡Œï¼Œå¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œåˆ™æŠ›å‡ºå¼‚å¸¸ã€‚<br>â‘¦ PROPAGATION_NESTEDï¼šå¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œåˆ™åœ¨åµŒå¥—äº‹åŠ¡å†…æ‰§è¡Œã€‚å¦‚æœå½“å‰æ²¡æœ‰äº‹åŠ¡ï¼Œåˆ™æŒ‰REQUIREDå±æ€§æ‰§è¡Œã€‚</p>\n</blockquote>\n<h3 id=\"è¯´ä¸€ä¸‹-spring-çš„äº‹åŠ¡éš”ç¦»ï¼Ÿ\"><a href=\"#è¯´ä¸€ä¸‹-spring-çš„äº‹åŠ¡éš”ç¦»ï¼Ÿ\" class=\"headerlink\" title=\"è¯´ä¸€ä¸‹ spring çš„äº‹åŠ¡éš”ç¦»ï¼Ÿ\"></a>è¯´ä¸€ä¸‹ spring çš„äº‹åŠ¡éš”ç¦»ï¼Ÿ</h3><p>spring æœ‰äº”å¤§éš”ç¦»çº§åˆ«ï¼Œé»˜è®¤å€¼ä¸º ISOLATION_DEFAULTï¼ˆä½¿ç”¨æ•°æ®åº“çš„è®¾ç½®ï¼‰ï¼Œå…¶ä»–å››ä¸ªéš”ç¦»çº§åˆ«å’Œæ•°æ®åº“çš„éš”ç¦»çº§åˆ«ä¸€è‡´ï¼š</p>\n<ol>\n<li>ISOLATION_DEFAULTï¼šç”¨åº•å±‚æ•°æ®åº“çš„è®¾ç½®éš”ç¦»çº§åˆ«ï¼Œæ•°æ®åº“è®¾ç½®çš„æ˜¯ä»€ä¹ˆæˆ‘å°±ç”¨ä»€ä¹ˆï¼›</li>\n<li>ISOLATION_READ_UNCOMMITTEDï¼šè¯»æœªæäº¤ï¼Œæœ€ä½éš”ç¦»çº§åˆ«ã€äº‹åŠ¡æœªæäº¤å‰ï¼Œå°±å¯è¢«å…¶ä»–äº‹åŠ¡è¯»å–ï¼ˆä¼šå‡ºç°è„è¯»ã€ä¸å¯é‡å¤è¯»ã€å¹»è¯»ï¼‰ï¼›</li>\n<li>ISOLATION_READ_COMMITTEDï¼šè¯»å·²æäº¤ï¼Œä¸€ä¸ªäº‹åŠ¡æäº¤åæ‰èƒ½è¢«å…¶ä»–äº‹åŠ¡è¯»å–åˆ°ï¼ˆä¼šé€ æˆä¸å¯é‡å¤è¯»ã€å¹»è¯»ï¼‰ï¼ŒSQL server çš„é»˜è®¤çº§åˆ«ï¼›</li>\n<li>ISOLATION_REPEATABLE_READï¼šå¯é‡å¤è¯»ï¼Œä¿è¯å¤šæ¬¡è¯»å–åŒä¸€ä¸ªæ•°æ®æ—¶ï¼Œå…¶å€¼éƒ½å’Œäº‹åŠ¡å¼€å§‹æ—¶å€™çš„å†…å®¹æ˜¯ä¸€è‡´ï¼Œç¦æ­¢è¯»å–åˆ°åˆ«çš„äº‹åŠ¡æœªæäº¤çš„æ•°æ®ï¼ˆä¼šé€ æˆå¹»è¯»ï¼‰ï¼ŒMySQL çš„é»˜è®¤çº§åˆ«ï¼›</li>\n<li>ISOLATION_SERIALIZABLEï¼šåºåˆ—åŒ–ï¼Œä»£ä»·æœ€é«˜æœ€å¯é çš„éš”ç¦»çº§åˆ«ï¼Œè¯¥éš”ç¦»çº§åˆ«èƒ½é˜²æ­¢è„è¯»ã€ä¸å¯é‡å¤è¯»ã€å¹»è¯»ã€‚</li>\n</ol>\n<h2 id=\"Springé¢å‘åˆ‡é¢ç¼–ç¨‹-AOP\"><a href=\"#Springé¢å‘åˆ‡é¢ç¼–ç¨‹-AOP\" class=\"headerlink\" title=\"Springé¢å‘åˆ‡é¢ç¼–ç¨‹(AOP)\"></a>Springé¢å‘åˆ‡é¢ç¼–ç¨‹(AOP)</h2><h3 id=\"ä»€ä¹ˆæ˜¯AOP\"><a href=\"#ä»€ä¹ˆæ˜¯AOP\" class=\"headerlink\" title=\"ä»€ä¹ˆæ˜¯AOP\"></a>ä»€ä¹ˆæ˜¯AOP</h3><p>OOP(Object-Oriented Programming)é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼Œå…è®¸å¼€å‘è€…å®šä¹‰çºµå‘çš„å…³ç³»ï¼Œä½†å¹¶é€‚ç”¨äºå®šä¹‰æ¨ªå‘çš„å…³ç³»ï¼Œå¯¼è‡´äº†å¤§é‡ä»£ç çš„é‡å¤ï¼Œè€Œä¸åˆ©äºå„ä¸ªæ¨¡å—çš„é‡ç”¨ã€‚</p>\n<p>AOP(Aspect-Oriented Programming)ï¼Œä¸€èˆ¬ç§°ä¸ºé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼Œä½œä¸ºé¢å‘å¯¹è±¡çš„ä¸€ç§è¡¥å……ï¼Œå°†ä¸€äº›<strong>å…¬å…±è¡Œä¸ºå’Œé€»è¾‘ï¼ŒæŠ½å–å¹¶å°è£…ä¸ºä¸€ä¸ªå¯é‡ç”¨çš„æ¨¡å—ï¼Œå‡å°‘ç³»ç»Ÿä¸­çš„é‡å¤ä»£ç ï¼Œé™ä½äº†æ¨¡å—é—´çš„è€¦åˆåº¦ï¼ŒåŒæ—¶æé«˜äº†ç³»ç»Ÿçš„å¯ç»´æŠ¤æ€§ã€‚å¯ç”¨äºæƒé™è®¤è¯ã€æ—¥å¿—ã€äº‹åŠ¡å¤„ç†ç­‰</strong>ã€‚</p>\n<h3 id=\"Spring-AOP-and-AspectJ-AOP-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼ŸAOP-æœ‰å“ªäº›å®ç°æ–¹å¼ï¼Ÿ\"><a href=\"#Spring-AOP-and-AspectJ-AOP-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼ŸAOP-æœ‰å“ªäº›å®ç°æ–¹å¼ï¼Ÿ\" class=\"headerlink\" title=\"Spring AOP and AspectJ AOP æœ‰ä»€ä¹ˆåŒºåˆ«ï¼ŸAOP æœ‰å“ªäº›å®ç°æ–¹å¼ï¼Ÿ\"></a>Spring AOP and AspectJ AOP æœ‰ä»€ä¹ˆåŒºåˆ«ï¼ŸAOP æœ‰å“ªäº›å®ç°æ–¹å¼ï¼Ÿ</h3><p>AOPå®ç°çš„å…³é”®åœ¨äº ä»£ç†æ¨¡å¼ï¼ŒAOPä»£ç†ä¸»è¦åˆ†ä¸ºé™æ€ä»£ç†ï¼ˆAspectJï¼‰å’ŒåŠ¨æ€ä»£ç†ï¼ˆSpring AOPï¼‰ã€‚</p>\n<p>ï¼ˆ1ï¼‰AspectJ é‡‡ç”¨é™æ€ä»£ç†æ¨¡å¼ï¼Œå±äº<strong>ç¼–è¯‘æ—¶å¢å¼º</strong>ï¼Œä¼šåœ¨ç¼–è¯‘é˜¶æ®µç»‡å…¥åˆ‡é¢ç”Ÿæˆç›¸åº”çš„ä»£ç†å¯¹è±¡</p>\n<p>ï¼ˆ2ï¼‰Spring AOP é‡‡ç”¨åŠ¨æ€ä»£ç†æ¨¡å¼ï¼Œå±äº<strong>è¿è¡Œæ—¶å¢å¼º</strong>ï¼Œæ¯æ¬¡è¿è¡Œæ—¶ç»‡å…¥åˆ‡é¢åœ¨å†…å­˜ä¸­ä¸´æ—¶ç”Ÿæˆç›¸åº”çš„ä»£ç†å¯¹è±¡</p>\n<h3 id=\"JDKåŠ¨æ€ä»£ç†å’ŒCGLIBåŠ¨æ€ä»£ç†çš„åŒºåˆ«\"><a href=\"#JDKåŠ¨æ€ä»£ç†å’ŒCGLIBåŠ¨æ€ä»£ç†çš„åŒºåˆ«\" class=\"headerlink\" title=\"JDKåŠ¨æ€ä»£ç†å’ŒCGLIBåŠ¨æ€ä»£ç†çš„åŒºåˆ«\"></a>JDKåŠ¨æ€ä»£ç†å’ŒCGLIBåŠ¨æ€ä»£ç†çš„åŒºåˆ«</h3><p>JDK åŠ¨æ€ä»£ç†ä¸»è¦æ˜¯é’ˆå¯¹ç±»å®ç°äº†æŸä¸ªæ¥å£ï¼ŒAOP åˆ™ä¼šä½¿ç”¨ JDK åŠ¨æ€ä»£ç†ã€‚åŸºäºåå°„çš„æœºåˆ¶å®ç°ï¼Œç”Ÿæˆä¸€ä¸ªå®ç°è¯¥æ¥å£çš„ä¸€ä¸ªä»£ç†ç±»ï¼Œç„¶åé€šè¿‡é‡å†™æ–¹æ³•çš„æ–¹å¼ï¼Œå®ç°å¯¹ä»£ç çš„å¢å¼ºã€‚</p>\n<p>è€Œå¦‚æœæŸä¸ªç±»æ²¡æœ‰å®ç°æ¥å£ï¼ŒAOP åˆ™ä¼šä½¿ç”¨ CGLIB ä»£ç†ã€‚åº•å±‚åŸç†æ˜¯<strong>åŸºäº asm ç¬¬ä¸‰æ–¹æ¡†æ¶</strong>ï¼Œé€šè¿‡ä¿®æ”¹å­—èŠ‚ç ç”Ÿæˆä¸€ä¸ªå­ç±»ï¼Œç„¶åé‡å†™çˆ¶ç±»çš„æ–¹æ³•ï¼Œå®ç°å¯¹ä»£ç çš„å¢å¼ºã€‚</p>\n<blockquote>\n<p>ä½œè€…ï¼šé˜¿é‡Œäº‘äº‘æ –å·</p>\n<p>é“¾æ¥ï¼š<a href=\"https://zhuanlan.zhihu.com/p/368769721\">https://zhuanlan.zhihu.com/p/368769721</a></p>\n<p>æ¥æºï¼šçŸ¥ä¹</p>\n<p>è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚</p>\n</blockquote>\n<h3 id=\"è§£é‡Šä¸€ä¸‹Spring-AOPé‡Œé¢çš„å‡ ä¸ªåè¯\"><a href=\"#è§£é‡Šä¸€ä¸‹Spring-AOPé‡Œé¢çš„å‡ ä¸ªåè¯\" class=\"headerlink\" title=\"è§£é‡Šä¸€ä¸‹Spring AOPé‡Œé¢çš„å‡ ä¸ªåè¯\"></a>è§£é‡Šä¸€ä¸‹Spring AOPé‡Œé¢çš„å‡ ä¸ªåè¯</h3><p>ï¼ˆ1ï¼‰åˆ‡é¢ï¼ˆAspectï¼‰ï¼šåˆ‡é¢æ˜¯é€šçŸ¥å’Œåˆ‡ç‚¹çš„ç»“åˆã€‚ åœ¨Spring AOPä¸­ï¼Œåˆ‡é¢å¯ä»¥ä½¿ç”¨é€šç”¨ç±»ï¼ˆåŸºäºæ¨¡å¼çš„é£æ ¼ï¼‰ æˆ–è€…åœ¨æ™®é€šç±»ä¸­ä»¥ @AspectJ æ³¨è§£æ¥å®ç°ã€‚</p>\n<p>ï¼ˆ2ï¼‰è¿æ¥ç‚¹ï¼ˆJoin pointï¼‰ï¼šæ–¹æ³•</p>\n<p>ï¼ˆ3ï¼‰é€šçŸ¥ï¼ˆAdviceï¼‰ï¼šåœ¨è¦å¢å¼ºä¸Šçš„è¿æ¥ç‚¹ä¸Šè¦è¿›è¡Œæ€æ ·çš„å¢å¼º</p>\n<p>ï¼ˆ4ï¼‰åˆ‡å…¥ç‚¹ï¼ˆPointcutï¼‰ï¼šå“ªäº›è¿æ¥ç‚¹éœ€è¦å¢å¼º</p>\n<p>ï¼ˆ5ï¼‰ç›®æ ‡å¯¹è±¡ï¼ˆTarget Objectï¼‰ï¼š è¢«ä»£ç†ï¼ˆproxiedï¼‰ å¯¹è±¡ã€‚</p>\n<p>ï¼ˆ6ï¼‰ç»‡å…¥ï¼ˆWeavingï¼‰ï¼šç»‡å…¥æ˜¯æŠŠåˆ‡é¢åº”ç”¨åˆ°ç›®æ ‡å¯¹è±¡å¹¶åˆ›å»ºæ–°çš„ä»£ç†å¯¹è±¡çš„è¿‡ç¨‹ã€‚</p>\n<p>ï¼ˆ7ï¼‰Proxyï¼ˆä»£ç†ï¼‰ï¼šä¸€ä¸ªç±»è¢«AOPç»‡å…¥å¢å¼ºåï¼Œå°±äº§ç”Ÿä¸€ä¸ªç»“æœä»£ç†ç±»ã€‚</p>\n<blockquote>\n<ul>\n<li>ç¼–è¯‘æœŸï¼šåˆ‡é¢åœ¨ç›®æ ‡ç±»ç¼–è¯‘æ—¶è¢«ç»‡å…¥ã€‚AspectJçš„ç»‡å…¥ç¼–è¯‘å™¨æ˜¯ä»¥è¿™ç§æ–¹å¼ç»‡å…¥åˆ‡é¢çš„ã€‚</li>\n<li>ç±»åŠ è½½æœŸï¼šåˆ‡é¢åœ¨ç›®æ ‡ç±»åŠ è½½åˆ°JVMæ—¶è¢«ç»‡å…¥ã€‚éœ€è¦ç‰¹æ®Šçš„ç±»åŠ è½½å™¨ï¼Œå®ƒå¯ä»¥åœ¨ç›®æ ‡ç±»è¢«å¼•å…¥åº”ç”¨ä¹‹å‰å¢å¼ºè¯¥ç›®æ ‡ç±»çš„å­—èŠ‚ç ã€‚AspectJ5çš„åŠ è½½æ—¶ç»‡å…¥å°±æ”¯æŒä»¥è¿™ç§æ–¹å¼ç»‡å…¥åˆ‡é¢ã€‚</li>\n<li>è¿è¡ŒæœŸï¼šåˆ‡é¢åœ¨åº”ç”¨è¿è¡Œçš„æŸä¸ªæ—¶åˆ»è¢«ç»‡å…¥ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œåœ¨ç»‡å…¥åˆ‡é¢æ—¶ï¼ŒAOPå®¹å™¨ä¼šä¸ºç›®æ ‡å¯¹è±¡åŠ¨æ€åœ°åˆ›å»ºä¸€ä¸ªä»£ç†å¯¹è±¡ã€‚SpringAOPå°±æ˜¯ä»¥è¿™ç§æ–¹å¼ç»‡å…¥åˆ‡é¢ã€‚</li>\n</ul>\n</blockquote>\n<h3 id=\"Springé€šçŸ¥æœ‰å“ªäº›ç±»å‹ï¼Ÿ\"><a href=\"#Springé€šçŸ¥æœ‰å“ªäº›ç±»å‹ï¼Ÿ\" class=\"headerlink\" title=\"Springé€šçŸ¥æœ‰å“ªäº›ç±»å‹ï¼Ÿ\"></a>Springé€šçŸ¥æœ‰å“ªäº›ç±»å‹ï¼Ÿ</h3><p>åœ¨AOPæœ¯è¯­ä¸­ï¼Œåˆ‡é¢çš„å·¥ä½œè¢«ç§°ä¸ºé€šçŸ¥ï¼Œå®é™…ä¸Šæ˜¯ç¨‹åºæ‰§è¡Œæ—¶è¦é€šè¿‡SpringAOPæ¡†æ¶è§¦å‘çš„ä»£ç æ®µã€‚</p>\n<p>Springåˆ‡é¢å¯ä»¥åº”ç”¨5ç§ç±»å‹çš„é€šçŸ¥ï¼š</p>\n<ol>\n<li>å‰ç½®é€šçŸ¥ï¼ˆBeforeï¼‰ï¼šåœ¨ç›®æ ‡æ–¹æ³•è¢«è°ƒç”¨ä¹‹å‰è°ƒç”¨é€šçŸ¥åŠŸèƒ½ï¼›</li>\n<li>åç½®é€šçŸ¥ï¼ˆAfterï¼‰ï¼šåœ¨ç›®æ ‡æ–¹æ³•å®Œæˆä¹‹åè°ƒç”¨é€šçŸ¥ï¼Œæ­¤æ—¶ä¸ä¼šå…³å¿ƒæ–¹æ³•çš„è¾“å‡ºæ˜¯ä»€ä¹ˆï¼›</li>\n<li>è¿”å›é€šçŸ¥ï¼ˆAfter-returning ï¼‰ï¼šåœ¨ç›®æ ‡æ–¹æ³•æˆåŠŸæ‰§è¡Œä¹‹åè°ƒç”¨é€šçŸ¥ï¼›</li>\n<li>å¼‚å¸¸é€šçŸ¥ï¼ˆAfter-throwingï¼‰ï¼šåœ¨ç›®æ ‡æ–¹æ³•æŠ›å‡ºå¼‚å¸¸åè°ƒç”¨é€šçŸ¥ï¼›</li>\n<li>ç¯ç»•é€šçŸ¥ï¼ˆAroundï¼‰ï¼šé€šçŸ¥åŒ…è£¹äº†è¢«é€šçŸ¥çš„æ–¹æ³•ï¼Œåœ¨è¢«é€šçŸ¥çš„æ–¹æ³•è°ƒç”¨ä¹‹å‰å’Œè°ƒç”¨ä¹‹åæ‰§è¡Œè‡ªå®šä¹‰çš„è¡Œä¸ºã€‚</li>\n</ol>\n<blockquote>\n<p>åŒä¸€ä¸ªaspectï¼Œä¸åŒadviceçš„æ‰§è¡Œé¡ºåºï¼š</p>\n<p>â‘ æ²¡æœ‰å¼‚å¸¸æƒ…å†µä¸‹çš„æ‰§è¡Œé¡ºåºï¼š</p>\n<p>around before advice\tæ–¹æ³•è°ƒç”¨ä¹‹å‰è‡ªå®šä¹‰è¡Œä¸º<br>before advice<br>target method æ‰§è¡Œ<br>around after advice\tæ–¹æ³•è°ƒç”¨åè‡ªå®šä¹‰è¡Œä¸º<br>after advice<br>afterReturning</p>\n<p>â‘¡æœ‰å¼‚å¸¸æƒ…å†µä¸‹çš„æ‰§è¡Œé¡ºåºï¼š</p>\n<p>around before advice<br>before advice<br>target method æ‰§è¡Œ<br>around after advice<br>after advice<br>afterThrowing:å¼‚å¸¸å‘ç”Ÿ<br>Java.lang.RuntimeException: å¼‚å¸¸å‘ç”Ÿ</p>\n</blockquote>\n<h3 id=\"ä»€ä¹ˆæ˜¯åˆ‡é¢-Aspectï¼Ÿ\"><a href=\"#ä»€ä¹ˆæ˜¯åˆ‡é¢-Aspectï¼Ÿ\" class=\"headerlink\" title=\"ä»€ä¹ˆæ˜¯åˆ‡é¢ Aspectï¼Ÿ\"></a>ä»€ä¹ˆæ˜¯åˆ‡é¢ Aspectï¼Ÿ</h3><p>aspect ç”± pointcount å’Œ advice ç»„æˆï¼Œåˆ‡é¢æ˜¯é€šçŸ¥å’Œåˆ‡ç‚¹çš„ç»“åˆã€‚<br>AOP çš„å·¥ä½œé‡å¿ƒåœ¨äºå¦‚ä½•å°†å¢å¼ºç¼–ç»‡ç›®æ ‡å¯¹è±¡çš„è¿æ¥ç‚¹ä¸Š, è¿™é‡ŒåŒ…å«ä¸¤ä¸ªå·¥ä½œ:  </p>\n<ul>\n<li>å¦‚ä½•é€šè¿‡ pointcut å’Œ advice å®šä½åˆ°ç‰¹å®šçš„ joinpoint ä¸Š</li>\n<li>å¦‚ä½•åœ¨ advice ä¸­ç¼–å†™åˆ‡é¢ä»£ç </li>\n</ul>\n<p>å¯ä»¥ç®€å•åœ°è®¤ä¸º, ä½¿ç”¨ @Aspect æ³¨è§£çš„ç±»å°±æ˜¯åˆ‡é¢</p>\n<p><img src=\"https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/TyporaNotes2020021212264438.png\" alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\"></p>"},{"title":"Javaå…«è‚¡æ–‡ - SpringMVC","copyright":true,"mathjax":false,"date":"2023-01-23T08:14:20.000Z","toc":true,"urlname":"java-springmvc","_content":"\n> æ•´ç†çš„SpringMVCç›¸å…³çŸ¥è¯†ç‚¹å’Œé¢è¯•é¢˜ï¼Œéƒ¨åˆ†å†…å®¹æ‘˜è‡ªç½‘ç»œï¼Œå¦‚æœ‰ä¾µæƒè¯·è”ç³»æˆ‘ï½<!--more-->\n\n## æ¦‚è¿°\n\n### ä»€ä¹ˆæ˜¯Spring MVCï¼Ÿç®€å•ä»‹ç»ä¸‹ä½ å¯¹Spring MVCçš„ç†è§£ï¼Ÿ\n\nSpring MVCæ˜¯ä¸€ä¸ªåŸºäºJavaçš„å®ç°äº†MVCè®¾è®¡æ¨¡å¼çš„è¯·æ±‚é©±åŠ¨ç±»å‹çš„è½»é‡çº§Webæ¡†æ¶ï¼Œé€šè¿‡æŠŠæ¨¡å‹-è§†å›¾-æ§åˆ¶å™¨åˆ†ç¦»ï¼Œå°†webå±‚è¿›è¡ŒèŒè´£è§£è€¦ï¼Œç®€åŒ–å¼€å‘ã€‚\n\n## æ ¸å¿ƒç»„ä»¶\n\n### Spring MVCçš„ä¸»è¦ç»„ä»¶ï¼Ÿ\n\nï¼ˆ1ï¼‰å‰ç«¯æ§åˆ¶å™¨ DispatcherServletï¼ˆä¸éœ€è¦ç¨‹åºå‘˜å¼€å‘ï¼‰\n\nä½œç”¨ï¼šæ¥æ”¶è¯·æ±‚ã€å“åº”ç»“æœï¼Œç›¸å½“äºè½¬å‘å™¨ï¼Œæœ‰äº†DispatcherServlet å°±å‡å°‘äº†å…¶å®ƒç»„ä»¶ä¹‹é—´çš„è€¦åˆåº¦ã€‚\n\nï¼ˆ2ï¼‰å¤„ç†å™¨æ˜ å°„å™¨HandlerMappingï¼ˆä¸éœ€è¦ç¨‹åºå‘˜å¼€å‘ï¼‰\n\nä½œç”¨ï¼šæ ¹æ®è¯·æ±‚çš„URLæ¥æŸ¥æ‰¾Handler\n\nï¼ˆ3ï¼‰å¤„ç†å™¨é€‚é…å™¨HandlerAdapter\n\næ³¨æ„ï¼šåœ¨ç¼–å†™Handlerçš„æ—¶å€™è¦æŒ‰ç…§HandlerAdapterè¦æ±‚çš„è§„åˆ™å»ç¼–å†™ï¼Œè¿™æ ·é€‚é…å™¨HandlerAdapteræ‰å¯ä»¥æ­£ç¡®çš„å»æ‰§è¡ŒHandlerã€‚\n\nï¼ˆ4ï¼‰å¤„ç†å™¨Handlerï¼ˆéœ€è¦ç¨‹åºå‘˜å¼€å‘ï¼‰\n\nï¼ˆ5ï¼‰è§†å›¾è§£æå™¨ ViewResolverï¼ˆä¸éœ€è¦ç¨‹åºå‘˜å¼€å‘ï¼‰\n\nä½œç”¨ï¼šè¿›è¡Œè§†å›¾çš„è§£æï¼Œæ ¹æ®è§†å›¾é€»è¾‘åè§£ææˆçœŸæ­£çš„è§†å›¾ï¼ˆviewï¼‰\n\nï¼ˆ6ï¼‰è§†å›¾Viewï¼ˆéœ€è¦ç¨‹åºå‘˜å¼€å‘jspï¼‰\n\nViewæ˜¯ä¸€ä¸ªæ¥å£ï¼Œ å®ƒçš„å®ç°ç±»æ”¯æŒä¸åŒçš„è§†å›¾ç±»å‹ï¼ˆjspï¼Œfreemarkerï¼Œpdfç­‰ç­‰ï¼‰\n\n### ä»€ä¹ˆæ˜¯DispatcherServlet\n\nSpringçš„MVCæ¡†æ¶æ˜¯å›´ç»•DispatcherServletæ¥è®¾è®¡çš„ï¼Œå®ƒç”¨æ¥å¤„ç†æ‰€æœ‰çš„HTTPè¯·æ±‚å’Œå“åº”ã€‚\n\n### ä»€ä¹ˆæ˜¯Spring MVCæ¡†æ¶çš„æ§åˆ¶å™¨ï¼Ÿ\n\næ§åˆ¶å™¨ä½¿ç”¨@Controlleræ³¨è§£ï¼Œå¹¶ä¸”æä¾›äº†@RequestMappingæ³¨è§£ï¼Œé€šè¿‡è§£æurlä¸­çš„è·¯å¾„ï¼Œå¯ä»¥æ‰¾åˆ°ç›¸åº”çš„æ§åˆ¶å™¨è¿›è¡Œé€»è¾‘å¤„ç†ï¼Œå“åº”æ•°æ®ç­‰ã€‚\n\n### Spring MVCçš„æ§åˆ¶å™¨æ˜¯ä¸æ˜¯å•ä¾‹æ¨¡å¼,å¦‚æœæ˜¯,æœ‰ä»€ä¹ˆé—®é¢˜,æ€ä¹ˆè§£å†³ï¼Ÿ\n\nå•ä¾‹æ¨¡å¼,æ‰€ä»¥åœ¨å¤šçº¿ç¨‹è®¿é—®çš„æ—¶å€™æœ‰çº¿ç¨‹å®‰å…¨é—®é¢˜,ä¸è¦ç”¨åŒæ­¥,ä¼šå½±å“æ€§èƒ½çš„ï¼Œè§£å†³æ–¹æ¡ˆæ˜¯åœ¨æ§åˆ¶å™¨ä¿æŒæ§åˆ¶å™¨æ— çŠ¶æ€ï¼ˆä¸è¦å†™å­—æ®µï¼‰ã€‚\n\n## å·¥ä½œåŸç†\n\n### è¯·æè¿°Spring MVCçš„å·¥ä½œæµç¨‹ï¼Ÿæè¿°ä¸€ä¸‹ DispatcherServlet çš„å·¥ä½œæµç¨‹ï¼Ÿ\n\n1. ç”¨æˆ·å‘é€è¯·æ±‚è‡³å‰ç«¯æ§åˆ¶å™¨DispatcherServletï¼›\n2. DispatcherServletæ”¶åˆ°è¯·æ±‚åï¼Œè°ƒç”¨HandlerMappingå¤„ç†å™¨æ˜ å°„å™¨ï¼Œè¯·æ±‚è·å–Handlerï¼›\n3. HandlerMappingå¤„ç†å™¨æ˜ å°„å™¨æ ¹æ®è¯·æ±‚url**æ‰¾åˆ°å…·ä½“çš„å¤„ç†å™¨**ï¼Œç”Ÿæˆå¤„ç†å™¨å¯¹è±¡åŠå¤„ç†å™¨æ‹¦æˆªå™¨(å¦‚æœæœ‰åˆ™ç”Ÿæˆ)ä¸€å¹¶è¿”å›ç»™DispatcherServletï¼›\n4. DispatcherServlet è°ƒç”¨ HandlerAdapterå¤„ç†å™¨é€‚é…å™¨ï¼›\n5. HandlerAdapter ç»è¿‡é€‚é… **è°ƒç”¨å…·ä½“å¤„ç†å™¨**(Handlerï¼Œä¹Ÿå«åç«¯æ§åˆ¶å™¨)ï¼›\n6. Handleræ‰§è¡Œå®Œæˆè¿”å›ModelAndViewï¼›\n7. HandlerAdapterå°†Handleræ‰§è¡Œç»“æœModelAndViewè¿”å›ç»™DispatcherServletï¼›\n8. DispatcherServletå°†ModelAndViewä¼ ç»™ViewResolverè§†å›¾è§£æå™¨è¿›è¡Œè§£æï¼›\n9. ViewResolverè§£æåè¿”å›å…·ä½“Viewï¼›\n10. DispatcherServletå¯¹Viewè¿›è¡Œæ¸²æŸ“æˆä¸ºè§†å›¾ï¼ˆå³å°†æ¨¡å‹æ•°æ®å¡«å……è‡³è§†å›¾ä¸­ï¼‰ï¼›\n11. DispatcherServletå“åº”ç”¨æˆ·ã€‚\n\n![Spring MVCçš„å·¥ä½œæµç¨‹](https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/TyporaNotes20200208211439106.png)\n\n## å¸¸ç”¨æ³¨è§£\n\n### æ³¨è§£åŸç†æ˜¯ä»€ä¹ˆ\n\næ³¨è§£æœ¬è´¨æ˜¯ä¸€ä¸ªç»§æ‰¿äº†Annotationçš„ç‰¹æ®Šæ¥å£ï¼Œå…¶å…·ä½“å®ç°ç±»æ˜¯Javaè¿è¡Œæ—¶ç”Ÿæˆçš„åŠ¨æ€ä»£ç†ç±»ã€‚æˆ‘ä»¬é€šè¿‡åå°„è·å–æ³¨è§£æ—¶ï¼Œè¿”å›çš„æ˜¯Javaè¿è¡Œæ—¶ç”Ÿæˆçš„åŠ¨æ€ä»£ç†å¯¹è±¡ã€‚é€šè¿‡ä»£ç†å¯¹è±¡è°ƒç”¨è‡ªå®šä¹‰æ³¨è§£çš„æ–¹æ³•ã€‚\n\n### Spring MVCå¸¸ç”¨çš„æ³¨è§£æœ‰å“ªäº›ï¼Ÿ\n\n@RequestMappingï¼šç”¨äºå¤„ç†è¯·æ±‚ url æ˜ å°„çš„æ³¨è§£ï¼Œå¯ç”¨äºç±»æˆ–æ–¹æ³•ä¸Šã€‚ç”¨äºç±»ä¸Šï¼Œåˆ™è¡¨ç¤ºç±»ä¸­çš„æ‰€æœ‰å“åº”è¯·æ±‚çš„æ–¹æ³•éƒ½æ˜¯ä»¥è¯¥åœ°å€ä½œä¸ºçˆ¶è·¯å¾„ã€‚\n\n@RequestBodyï¼šæ³¨è§£å®ç°æ¥æ”¶httpè¯·æ±‚çš„jsonæ•°æ®ï¼Œå°†jsonè½¬æ¢ä¸ºjavaå¯¹è±¡ã€‚\n\n@ResponseBodyï¼šæ³¨è§£å®ç°å°†controlleræ–¹æ³•è¿”å›å¯¹è±¡è½¬åŒ–ä¸ºjsonå¯¹è±¡å“åº”ç»™å®¢æˆ·ã€‚\n\n### Sping MVCä¸­çš„æ§åˆ¶å™¨çš„æ³¨è§£ä¸€èˆ¬ç”¨å“ªä¸ª,æœ‰æ²¡æœ‰åˆ«çš„æ³¨è§£å¯ä»¥æ›¿ä»£ï¼Ÿ\n\nç­”ï¼šä¸€èˆ¬ç”¨@Controlleræ³¨è§£ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨@RestControllerï¼Œ@RestControlleræ³¨è§£ç›¸å½“äº@ResponseBody ï¼‹ @Controllerï¼Œ@ResponseBody ç”¨äºè¿”å›jsonæ•°æ®ï¼‹ @Controller ç”¨äºè¡¨æ˜æ§åˆ¶å™¨\n\n### @Controlleræ³¨è§£çš„ä½œç”¨\n\n@Controller ç”¨äºæ ‡è®°åœ¨ä¸€ä¸ªç±»ä¸Šï¼Œä½¿ç”¨å®ƒæ ‡è®°çš„ç±»å°±æ˜¯ä¸€ä¸ªSpring MVC Controller å¯¹è±¡ã€‚é€šè¿‡è¯·æ±‚çš„urlå’Œ@RequestMapping æ³¨è§£å¯¹åº”åˆ°å®é™…å¤„ç†è¯·æ±‚çš„å¤„ç†å™¨ã€‚éœ€è¦å¼€å¯mvcæ³¨è§£æ‰«ææ‰¾åˆ°@Controllerçš„æ§åˆ¶å™¨ã€‚\n\n### @RequestMappingæ³¨è§£çš„ä½œç”¨\n\nRequestMappingæ˜¯ä¸€ä¸ªç”¨æ¥å¤„ç†è¯·æ±‚åœ°å€æ˜ å°„çš„æ³¨è§£ï¼Œå¯ç”¨äºç±»æˆ–æ–¹æ³•ä¸Šã€‚\n\nç”¨äºç±»ä¸Šï¼Œè¡¨ç¤ºç±»ä¸­çš„æ‰€æœ‰å“åº”è¯·æ±‚çš„æ–¹æ³•éƒ½æ˜¯ä»¥è¯¥åœ°å€ä½œä¸ºçˆ¶è·¯å¾„ã€‚\n\nRequestMappingæ³¨è§£æœ‰å…­ä¸ªå±æ€§ï¼š\n\n**path/valueï¼Œ method**\n\n* valueï¼š æŒ‡å®šè¯·æ±‚çš„å®é™…åœ°å€ï¼ŒæŒ‡å®šçš„åœ°å€å¯ä»¥æ˜¯URI Template æ¨¡å¼ï¼ˆåé¢å°†ä¼šè¯´æ˜ï¼‰ï¼›\n\n* methodï¼š æŒ‡å®šè¯·æ±‚çš„methodç±»å‹ï¼Œ GETã€POSTã€PUTã€DELETEç­‰ï¼›\n\n**consumesï¼Œproduces**\n\n* consumesï¼š æŒ‡å®šå¤„ç†è¯·æ±‚çš„æäº¤å†…å®¹ç±»å‹ï¼ˆContent-Typeï¼‰ï¼Œä¾‹å¦‚application/json, text/html;\n\n* produces: æŒ‡å®šè¿”å›çš„å†…å®¹ç±»å‹ï¼Œä»…å½“requestè¯·æ±‚å¤´ä¸­çš„(Accept)ç±»å‹ä¸­åŒ…å«è¯¥æŒ‡å®šç±»å‹æ‰è¿”å›ï¼›\n\n**paramsï¼Œheaders**\n\n* paramsï¼š æŒ‡å®šrequestä¸­å¿…é¡»åŒ…å«æŸäº›å‚æ•°å€¼æ—¶ï¼Œæ‰è®©è¯¥æ–¹æ³•å¤„ç†ã€‚\n\n* headersï¼š æŒ‡å®šrequestä¸­å¿…é¡»åŒ…å«æŸäº›æŒ‡å®šçš„headerå€¼ï¼Œæ‰èƒ½è®©è¯¥æ–¹æ³•å¤„ç†è¯·æ±‚ã€‚\n\n### @PathVariableå’Œ@RequestParamçš„åŒºåˆ«\n\n@PathVariableä½œç”¨ï¼š ç”¨äºç»‘å®šurlä¸­çš„å ä½ç¬¦ã€‚ä¾‹å¦‚ï¼šè¯·æ±‚urlä¸­ /delete/{id}ï¼Œè¿™ä¸ª{id}å°±æ˜¯urlå ä½ç¬¦ã€‚\n\n```java\n/**\n* æ ¹æ®path /anno/testPathVariable/10 æ‰¾åˆ° testPathVariable æ–¹æ³•\n* ç„¶åï¼Œå…¶ä¸­çš„10å°±æ˜¯sidå ä½ç¬¦æ‰€å çš„ä½ç½®çš„æ•°æ®ï¼Œç„¶åé€šè¿‡@PathVaribaleæ³¨è§£å°†å…¶èµ‹å€¼ç»™ id\n*/\n@RequestMapping(path = \"testPathVariable/{sid}\")\npublic String testPathVariable(@PathVariable(value = \"sid\") String id) {\n    System.out.println(\"æ‰§è¡Œäº†testPathVariable...\");\n    System.out.println(id);\n    return \"success\";\n}\n```\n\n@RequestParamä½œç”¨ï¼š æŠŠè¯·æ±‚ä¸­æŒ‡å®šåç§°çš„å‚æ•°ç»™æ§åˆ¶å™¨ä¸­çš„å½¢å‚èµ‹å€¼ã€‚\n\n```java\n// Controllerä¸­çš„ä»£ç ï¼š\n@RequestMapping(path = \"/testRequestParam\")\npublic String testRequestParam(@RequestParam(value = \"name\") String username) {\n    // æŠŠè¯·æ±‚ä¸­æŒ‡å®šçš„nameèµ‹å€¼ç»™æ§åˆ¶å™¨ä¸­çš„å½¢å‚username\n    System.out.println(\"æ‰§è¡Œäº†testRequestParam...\");\n    System.out.println(username);\n    return \"success\";\n}\n```\n\n## å…¶ä»–\n\n### Spring MVCæ€ä¹ˆæ ·è®¾å®šè½¬å‘å’Œé‡å®šå‘çš„ï¼Ÿ\n\nï¼ˆ1ï¼‰è½¬å‘ï¼šä½¿ç”¨forward\nforwardæ˜¯æŒ‡å†…éƒ¨è½¬å‘ï¼Œç›¸å½“äºæœåŠ¡å™¨å†…éƒ¨æ–¹æ³•è·³è½¬è°ƒç”¨ã€‚è¯·æ±‚ä¸€æ¬¡æœåŠ¡å™¨ã€‚è½¬å‘åœ°å€ä¸å˜ã€‚\n\nï¼ˆ2ï¼‰é‡å®šå‘ï¼šä½¿ç”¨redirect\né‡å®šå‘æ˜¯æŒ‡å½“æµè§ˆå™¨è¯·æ±‚ä¸€ä¸ªURLæ—¶ï¼ŒæœåŠ¡å™¨è¿”å›ä¸€ä¸ªé‡å®šå‘æŒ‡ä»¤ï¼Œå‘Šè¯‰æµè§ˆå™¨åœ°å€å·²ç»å˜äº†ï¼Œéº»çƒ¦ä½¿ç”¨æ–°çš„URLå†é‡æ–°å‘é€æ–°è¯·æ±‚ã€‚è¯·æ±‚ä¸¤æ¬¡æœåŠ¡å™¨ã€‚é‡å®šå‘åœ°å€æ”¹å˜ã€‚\n\n### Spring MVCæ€ä¹ˆå’ŒAJAXç›¸äº’è°ƒç”¨çš„ï¼Ÿ\n\né€šè¿‡Jacksonæˆ–è€…æ˜¯fastjsonå°±å¯ä»¥æŠŠJavaé‡Œé¢çš„å¯¹è±¡ç›´æ¥è½¬åŒ–æˆJså¯ä»¥è¯†åˆ«çš„Jsonå¯¹è±¡ï¼Œæ¥è¿›è¡Œä¼ è¾“ã€‚\n\n### å¦‚ä½•è§£å†³POSTè¯·æ±‚ä¸­æ–‡ä¹±ç é—®é¢˜ï¼ŒGETçš„åˆå¦‚ä½•å¤„ç†å‘¢ï¼Ÿ\n\nï¼ˆ1ï¼‰è§£å†³postè¯·æ±‚ä¹±ç é—®é¢˜ï¼š\n\nåœ¨web.xmlä¸­é…ç½®ä¸€ä¸ªCharacterEncodingFilterè¿‡æ»¤å™¨ï¼Œè®¾ç½®æˆutf-8ï¼›\n\n```xml\n<filter>\n    <filter-name>CharacterEncodingFilter</filter-name>\n    <filter-class>org.springframework.web.filter.CharacterEncodingFilter</filter-class>\n\n    <init-param>\n        <param-name>encoding</param-name>\n        <param-value>utf-8</param-value>\n    </init-param>\n</filter>\n\n<filter-mapping>\n    <filter-name>CharacterEncodingFilter</filter-name>\n    <url-pattern>/*</url-pattern>\n</filter-mapping>\n```\n\nï¼ˆ2ï¼‰getè¯·æ±‚ä¸­æ–‡å‚æ•°å‡ºç°ä¹±ç è§£å†³æ–¹æ³•æœ‰ä¸¤ä¸ªï¼š\n\nä¿®æ”¹tomcaté…ç½®æ–‡ä»¶æ·»åŠ ç¼–ç ä¸å·¥ç¨‹ç¼–ç ä¸€è‡´ï¼Œå¦‚ä¸‹ï¼š\n\n```xml\n<ConnectorURIEncoding=\"utf-8\" connectionTimeout=\"20000\" port=\"8080\" protocol=\"HTTP/1.1\" redirectPort=\"8443\"/>\n```\n\n### Spring MVCçš„å¼‚å¸¸å¤„ç†\n\nå¯ä»¥å°†å¼‚å¸¸æŠ›ç»™Springæ¡†æ¶ï¼Œç”±Springæ¡†æ¶æ¥å¤„ç†ï¼›æˆ‘ä»¬åªéœ€è¦é…ç½®ç®€å•çš„å¼‚å¸¸å¤„ç†å™¨ï¼Œåœ¨å¼‚å¸¸å¤„ç†å™¨ä¸­æ·»è§†å›¾é¡µé¢å³å¯ã€‚\n\n### å¦‚æœåœ¨æ‹¦æˆªè¯·æ±‚ä¸­ï¼Œæˆ‘æƒ³æ‹¦æˆªgetæ–¹å¼æäº¤çš„æ–¹æ³•,æ€ä¹ˆé…ç½®\n\nç­”ï¼šå¯ä»¥åœ¨@RequestMappingæ³¨è§£é‡Œé¢åŠ ä¸Šmethod=RequestMethod.GETã€‚\n\n### æ€æ ·åœ¨æ–¹æ³•é‡Œé¢å¾—åˆ°Request,æˆ–è€…Sessionï¼Ÿ\n\nç­”ï¼šç›´æ¥åœ¨æ–¹æ³•çš„å½¢å‚ä¸­å£°æ˜request,Spring MVCå°±è‡ªåŠ¨æŠŠrequestå¯¹è±¡ä¼ å…¥ã€‚\n\n### å¦‚æœæƒ³åœ¨æ‹¦æˆªçš„æ–¹æ³•é‡Œé¢å¾—åˆ°ä»å‰å°ä¼ å…¥çš„å‚æ•°,æ€ä¹ˆå¾—åˆ°ï¼Ÿ\n\nç›´æ¥åœ¨å½¢å‚é‡Œé¢å£°æ˜è¿™ä¸ªå‚æ•°å°±å¯ä»¥,ä½†å¿…é¡»åå­—å’Œä¼ è¿‡æ¥çš„å‚æ•°ä¸€æ ·ã€‚\næˆ–è€…ä½¿ç”¨ RequestParamæ³¨è§£å°†å‰å°çš„å‚æ•°åAä¼ ç»™å½¢å‚ä¸­çš„å‚æ•°B\n\n### å¦‚æœå‰å°æœ‰å¾ˆå¤šä¸ªå‚æ•°ä¼ å…¥,å¹¶ä¸”è¿™äº›å‚æ•°éƒ½æ˜¯ä¸€ä¸ªå¯¹è±¡çš„,é‚£ä¹ˆæ€ä¹ˆæ ·å¿«é€Ÿå¾—åˆ°è¿™ä¸ªå¯¹è±¡ï¼Ÿ\n\nç›´æ¥åœ¨æ–¹æ³•ä¸­å£°æ˜è¿™ä¸ªå¯¹è±¡,Spring MVCå°±è‡ªåŠ¨ä¼šæŠŠå±æ€§èµ‹å€¼åˆ°è¿™ä¸ªå¯¹è±¡é‡Œé¢ã€‚\n\n### Spring MVCä¸­å‡½æ•°çš„è¿”å›å€¼æ˜¯ä»€ä¹ˆï¼Ÿ\n\nè¿”å›å€¼å¯ä»¥æœ‰å¾ˆå¤šç±»å‹,æœ‰String, ModelAndViewï¼ˆè§†å›¾å’Œæ•°æ®åˆå¹¶åœ¨ä¸€èµ·ï¼‰ã€‚\n\n### Spring MVCç”¨ä»€ä¹ˆå¯¹è±¡ä»åå°å‘å‰å°ä¼ é€’æ•°æ®çš„ï¼Ÿ\n\né€šè¿‡ModelMapå¯¹è±¡,å¯ä»¥åœ¨è¿™ä¸ªå¯¹è±¡é‡Œé¢è°ƒç”¨putæ–¹æ³•,æŠŠå¯¹è±¡åŠ åˆ°é‡Œé¢,å‰å°å°±å¯ä»¥é€šè¿‡elè¡¨è¾¾å¼æ‹¿åˆ°ã€‚\n\n### æ€ä¹ˆæ ·æŠŠModelMapé‡Œé¢çš„æ•°æ®æ”¾å…¥Sessioné‡Œé¢ï¼Ÿ\n\nå¯ä»¥åœ¨ç±»ä¸Šé¢åŠ ä¸Š@SessionAttributesæ³¨è§£,é‡Œé¢åŒ…å«çš„å­—ç¬¦ä¸²å°±æ˜¯è¦æ”¾å…¥sessioné‡Œé¢çš„keyã€‚\n\n### Spring MVCé‡Œé¢æ‹¦æˆªå™¨æ˜¯æ€ä¹ˆå†™çš„\n\næœ‰ä¸¤ç§å†™æ³•,ä¸€ç§æ˜¯å®ç°HandlerInterceptoræ¥å£ï¼Œé‡å†™prehandleç­‰æ–¹æ³•ï¼Œç„¶åé…ç½®æ‹¦æˆªå™¨\n","source":"_posts/Javaå…«è‚¡æ–‡ - SpringMVC.md","raw":"---\ntitle: Javaå…«è‚¡æ–‡ - SpringMVC\ncopyright: true\nmathjax: false\ncategories:\n  - Javaå…«è‚¡æ–‡\ndate: 2023-01-23 16:14:20\ntags:\ntoc: true\nurlname: java-springmvc\n---\n\n> æ•´ç†çš„SpringMVCç›¸å…³çŸ¥è¯†ç‚¹å’Œé¢è¯•é¢˜ï¼Œéƒ¨åˆ†å†…å®¹æ‘˜è‡ªç½‘ç»œï¼Œå¦‚æœ‰ä¾µæƒè¯·è”ç³»æˆ‘ï½<!--more-->\n\n## æ¦‚è¿°\n\n### ä»€ä¹ˆæ˜¯Spring MVCï¼Ÿç®€å•ä»‹ç»ä¸‹ä½ å¯¹Spring MVCçš„ç†è§£ï¼Ÿ\n\nSpring MVCæ˜¯ä¸€ä¸ªåŸºäºJavaçš„å®ç°äº†MVCè®¾è®¡æ¨¡å¼çš„è¯·æ±‚é©±åŠ¨ç±»å‹çš„è½»é‡çº§Webæ¡†æ¶ï¼Œé€šè¿‡æŠŠæ¨¡å‹-è§†å›¾-æ§åˆ¶å™¨åˆ†ç¦»ï¼Œå°†webå±‚è¿›è¡ŒèŒè´£è§£è€¦ï¼Œç®€åŒ–å¼€å‘ã€‚\n\n## æ ¸å¿ƒç»„ä»¶\n\n### Spring MVCçš„ä¸»è¦ç»„ä»¶ï¼Ÿ\n\nï¼ˆ1ï¼‰å‰ç«¯æ§åˆ¶å™¨ DispatcherServletï¼ˆä¸éœ€è¦ç¨‹åºå‘˜å¼€å‘ï¼‰\n\nä½œç”¨ï¼šæ¥æ”¶è¯·æ±‚ã€å“åº”ç»“æœï¼Œç›¸å½“äºè½¬å‘å™¨ï¼Œæœ‰äº†DispatcherServlet å°±å‡å°‘äº†å…¶å®ƒç»„ä»¶ä¹‹é—´çš„è€¦åˆåº¦ã€‚\n\nï¼ˆ2ï¼‰å¤„ç†å™¨æ˜ å°„å™¨HandlerMappingï¼ˆä¸éœ€è¦ç¨‹åºå‘˜å¼€å‘ï¼‰\n\nä½œç”¨ï¼šæ ¹æ®è¯·æ±‚çš„URLæ¥æŸ¥æ‰¾Handler\n\nï¼ˆ3ï¼‰å¤„ç†å™¨é€‚é…å™¨HandlerAdapter\n\næ³¨æ„ï¼šåœ¨ç¼–å†™Handlerçš„æ—¶å€™è¦æŒ‰ç…§HandlerAdapterè¦æ±‚çš„è§„åˆ™å»ç¼–å†™ï¼Œè¿™æ ·é€‚é…å™¨HandlerAdapteræ‰å¯ä»¥æ­£ç¡®çš„å»æ‰§è¡ŒHandlerã€‚\n\nï¼ˆ4ï¼‰å¤„ç†å™¨Handlerï¼ˆéœ€è¦ç¨‹åºå‘˜å¼€å‘ï¼‰\n\nï¼ˆ5ï¼‰è§†å›¾è§£æå™¨ ViewResolverï¼ˆä¸éœ€è¦ç¨‹åºå‘˜å¼€å‘ï¼‰\n\nä½œç”¨ï¼šè¿›è¡Œè§†å›¾çš„è§£æï¼Œæ ¹æ®è§†å›¾é€»è¾‘åè§£ææˆçœŸæ­£çš„è§†å›¾ï¼ˆviewï¼‰\n\nï¼ˆ6ï¼‰è§†å›¾Viewï¼ˆéœ€è¦ç¨‹åºå‘˜å¼€å‘jspï¼‰\n\nViewæ˜¯ä¸€ä¸ªæ¥å£ï¼Œ å®ƒçš„å®ç°ç±»æ”¯æŒä¸åŒçš„è§†å›¾ç±»å‹ï¼ˆjspï¼Œfreemarkerï¼Œpdfç­‰ç­‰ï¼‰\n\n### ä»€ä¹ˆæ˜¯DispatcherServlet\n\nSpringçš„MVCæ¡†æ¶æ˜¯å›´ç»•DispatcherServletæ¥è®¾è®¡çš„ï¼Œå®ƒç”¨æ¥å¤„ç†æ‰€æœ‰çš„HTTPè¯·æ±‚å’Œå“åº”ã€‚\n\n### ä»€ä¹ˆæ˜¯Spring MVCæ¡†æ¶çš„æ§åˆ¶å™¨ï¼Ÿ\n\næ§åˆ¶å™¨ä½¿ç”¨@Controlleræ³¨è§£ï¼Œå¹¶ä¸”æä¾›äº†@RequestMappingæ³¨è§£ï¼Œé€šè¿‡è§£æurlä¸­çš„è·¯å¾„ï¼Œå¯ä»¥æ‰¾åˆ°ç›¸åº”çš„æ§åˆ¶å™¨è¿›è¡Œé€»è¾‘å¤„ç†ï¼Œå“åº”æ•°æ®ç­‰ã€‚\n\n### Spring MVCçš„æ§åˆ¶å™¨æ˜¯ä¸æ˜¯å•ä¾‹æ¨¡å¼,å¦‚æœæ˜¯,æœ‰ä»€ä¹ˆé—®é¢˜,æ€ä¹ˆè§£å†³ï¼Ÿ\n\nå•ä¾‹æ¨¡å¼,æ‰€ä»¥åœ¨å¤šçº¿ç¨‹è®¿é—®çš„æ—¶å€™æœ‰çº¿ç¨‹å®‰å…¨é—®é¢˜,ä¸è¦ç”¨åŒæ­¥,ä¼šå½±å“æ€§èƒ½çš„ï¼Œè§£å†³æ–¹æ¡ˆæ˜¯åœ¨æ§åˆ¶å™¨ä¿æŒæ§åˆ¶å™¨æ— çŠ¶æ€ï¼ˆä¸è¦å†™å­—æ®µï¼‰ã€‚\n\n## å·¥ä½œåŸç†\n\n### è¯·æè¿°Spring MVCçš„å·¥ä½œæµç¨‹ï¼Ÿæè¿°ä¸€ä¸‹ DispatcherServlet çš„å·¥ä½œæµç¨‹ï¼Ÿ\n\n1. ç”¨æˆ·å‘é€è¯·æ±‚è‡³å‰ç«¯æ§åˆ¶å™¨DispatcherServletï¼›\n2. DispatcherServletæ”¶åˆ°è¯·æ±‚åï¼Œè°ƒç”¨HandlerMappingå¤„ç†å™¨æ˜ å°„å™¨ï¼Œè¯·æ±‚è·å–Handlerï¼›\n3. HandlerMappingå¤„ç†å™¨æ˜ å°„å™¨æ ¹æ®è¯·æ±‚url**æ‰¾åˆ°å…·ä½“çš„å¤„ç†å™¨**ï¼Œç”Ÿæˆå¤„ç†å™¨å¯¹è±¡åŠå¤„ç†å™¨æ‹¦æˆªå™¨(å¦‚æœæœ‰åˆ™ç”Ÿæˆ)ä¸€å¹¶è¿”å›ç»™DispatcherServletï¼›\n4. DispatcherServlet è°ƒç”¨ HandlerAdapterå¤„ç†å™¨é€‚é…å™¨ï¼›\n5. HandlerAdapter ç»è¿‡é€‚é… **è°ƒç”¨å…·ä½“å¤„ç†å™¨**(Handlerï¼Œä¹Ÿå«åç«¯æ§åˆ¶å™¨)ï¼›\n6. Handleræ‰§è¡Œå®Œæˆè¿”å›ModelAndViewï¼›\n7. HandlerAdapterå°†Handleræ‰§è¡Œç»“æœModelAndViewè¿”å›ç»™DispatcherServletï¼›\n8. DispatcherServletå°†ModelAndViewä¼ ç»™ViewResolverè§†å›¾è§£æå™¨è¿›è¡Œè§£æï¼›\n9. ViewResolverè§£æåè¿”å›å…·ä½“Viewï¼›\n10. DispatcherServletå¯¹Viewè¿›è¡Œæ¸²æŸ“æˆä¸ºè§†å›¾ï¼ˆå³å°†æ¨¡å‹æ•°æ®å¡«å……è‡³è§†å›¾ä¸­ï¼‰ï¼›\n11. DispatcherServletå“åº”ç”¨æˆ·ã€‚\n\n![Spring MVCçš„å·¥ä½œæµç¨‹](https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/TyporaNotes20200208211439106.png)\n\n## å¸¸ç”¨æ³¨è§£\n\n### æ³¨è§£åŸç†æ˜¯ä»€ä¹ˆ\n\næ³¨è§£æœ¬è´¨æ˜¯ä¸€ä¸ªç»§æ‰¿äº†Annotationçš„ç‰¹æ®Šæ¥å£ï¼Œå…¶å…·ä½“å®ç°ç±»æ˜¯Javaè¿è¡Œæ—¶ç”Ÿæˆçš„åŠ¨æ€ä»£ç†ç±»ã€‚æˆ‘ä»¬é€šè¿‡åå°„è·å–æ³¨è§£æ—¶ï¼Œè¿”å›çš„æ˜¯Javaè¿è¡Œæ—¶ç”Ÿæˆçš„åŠ¨æ€ä»£ç†å¯¹è±¡ã€‚é€šè¿‡ä»£ç†å¯¹è±¡è°ƒç”¨è‡ªå®šä¹‰æ³¨è§£çš„æ–¹æ³•ã€‚\n\n### Spring MVCå¸¸ç”¨çš„æ³¨è§£æœ‰å“ªäº›ï¼Ÿ\n\n@RequestMappingï¼šç”¨äºå¤„ç†è¯·æ±‚ url æ˜ å°„çš„æ³¨è§£ï¼Œå¯ç”¨äºç±»æˆ–æ–¹æ³•ä¸Šã€‚ç”¨äºç±»ä¸Šï¼Œåˆ™è¡¨ç¤ºç±»ä¸­çš„æ‰€æœ‰å“åº”è¯·æ±‚çš„æ–¹æ³•éƒ½æ˜¯ä»¥è¯¥åœ°å€ä½œä¸ºçˆ¶è·¯å¾„ã€‚\n\n@RequestBodyï¼šæ³¨è§£å®ç°æ¥æ”¶httpè¯·æ±‚çš„jsonæ•°æ®ï¼Œå°†jsonè½¬æ¢ä¸ºjavaå¯¹è±¡ã€‚\n\n@ResponseBodyï¼šæ³¨è§£å®ç°å°†controlleræ–¹æ³•è¿”å›å¯¹è±¡è½¬åŒ–ä¸ºjsonå¯¹è±¡å“åº”ç»™å®¢æˆ·ã€‚\n\n### Sping MVCä¸­çš„æ§åˆ¶å™¨çš„æ³¨è§£ä¸€èˆ¬ç”¨å“ªä¸ª,æœ‰æ²¡æœ‰åˆ«çš„æ³¨è§£å¯ä»¥æ›¿ä»£ï¼Ÿ\n\nç­”ï¼šä¸€èˆ¬ç”¨@Controlleræ³¨è§£ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨@RestControllerï¼Œ@RestControlleræ³¨è§£ç›¸å½“äº@ResponseBody ï¼‹ @Controllerï¼Œ@ResponseBody ç”¨äºè¿”å›jsonæ•°æ®ï¼‹ @Controller ç”¨äºè¡¨æ˜æ§åˆ¶å™¨\n\n### @Controlleræ³¨è§£çš„ä½œç”¨\n\n@Controller ç”¨äºæ ‡è®°åœ¨ä¸€ä¸ªç±»ä¸Šï¼Œä½¿ç”¨å®ƒæ ‡è®°çš„ç±»å°±æ˜¯ä¸€ä¸ªSpring MVC Controller å¯¹è±¡ã€‚é€šè¿‡è¯·æ±‚çš„urlå’Œ@RequestMapping æ³¨è§£å¯¹åº”åˆ°å®é™…å¤„ç†è¯·æ±‚çš„å¤„ç†å™¨ã€‚éœ€è¦å¼€å¯mvcæ³¨è§£æ‰«ææ‰¾åˆ°@Controllerçš„æ§åˆ¶å™¨ã€‚\n\n### @RequestMappingæ³¨è§£çš„ä½œç”¨\n\nRequestMappingæ˜¯ä¸€ä¸ªç”¨æ¥å¤„ç†è¯·æ±‚åœ°å€æ˜ å°„çš„æ³¨è§£ï¼Œå¯ç”¨äºç±»æˆ–æ–¹æ³•ä¸Šã€‚\n\nç”¨äºç±»ä¸Šï¼Œè¡¨ç¤ºç±»ä¸­çš„æ‰€æœ‰å“åº”è¯·æ±‚çš„æ–¹æ³•éƒ½æ˜¯ä»¥è¯¥åœ°å€ä½œä¸ºçˆ¶è·¯å¾„ã€‚\n\nRequestMappingæ³¨è§£æœ‰å…­ä¸ªå±æ€§ï¼š\n\n**path/valueï¼Œ method**\n\n* valueï¼š æŒ‡å®šè¯·æ±‚çš„å®é™…åœ°å€ï¼ŒæŒ‡å®šçš„åœ°å€å¯ä»¥æ˜¯URI Template æ¨¡å¼ï¼ˆåé¢å°†ä¼šè¯´æ˜ï¼‰ï¼›\n\n* methodï¼š æŒ‡å®šè¯·æ±‚çš„methodç±»å‹ï¼Œ GETã€POSTã€PUTã€DELETEç­‰ï¼›\n\n**consumesï¼Œproduces**\n\n* consumesï¼š æŒ‡å®šå¤„ç†è¯·æ±‚çš„æäº¤å†…å®¹ç±»å‹ï¼ˆContent-Typeï¼‰ï¼Œä¾‹å¦‚application/json, text/html;\n\n* produces: æŒ‡å®šè¿”å›çš„å†…å®¹ç±»å‹ï¼Œä»…å½“requestè¯·æ±‚å¤´ä¸­çš„(Accept)ç±»å‹ä¸­åŒ…å«è¯¥æŒ‡å®šç±»å‹æ‰è¿”å›ï¼›\n\n**paramsï¼Œheaders**\n\n* paramsï¼š æŒ‡å®šrequestä¸­å¿…é¡»åŒ…å«æŸäº›å‚æ•°å€¼æ—¶ï¼Œæ‰è®©è¯¥æ–¹æ³•å¤„ç†ã€‚\n\n* headersï¼š æŒ‡å®šrequestä¸­å¿…é¡»åŒ…å«æŸäº›æŒ‡å®šçš„headerå€¼ï¼Œæ‰èƒ½è®©è¯¥æ–¹æ³•å¤„ç†è¯·æ±‚ã€‚\n\n### @PathVariableå’Œ@RequestParamçš„åŒºåˆ«\n\n@PathVariableä½œç”¨ï¼š ç”¨äºç»‘å®šurlä¸­çš„å ä½ç¬¦ã€‚ä¾‹å¦‚ï¼šè¯·æ±‚urlä¸­ /delete/{id}ï¼Œè¿™ä¸ª{id}å°±æ˜¯urlå ä½ç¬¦ã€‚\n\n```java\n/**\n* æ ¹æ®path /anno/testPathVariable/10 æ‰¾åˆ° testPathVariable æ–¹æ³•\n* ç„¶åï¼Œå…¶ä¸­çš„10å°±æ˜¯sidå ä½ç¬¦æ‰€å çš„ä½ç½®çš„æ•°æ®ï¼Œç„¶åé€šè¿‡@PathVaribaleæ³¨è§£å°†å…¶èµ‹å€¼ç»™ id\n*/\n@RequestMapping(path = \"testPathVariable/{sid}\")\npublic String testPathVariable(@PathVariable(value = \"sid\") String id) {\n    System.out.println(\"æ‰§è¡Œäº†testPathVariable...\");\n    System.out.println(id);\n    return \"success\";\n}\n```\n\n@RequestParamä½œç”¨ï¼š æŠŠè¯·æ±‚ä¸­æŒ‡å®šåç§°çš„å‚æ•°ç»™æ§åˆ¶å™¨ä¸­çš„å½¢å‚èµ‹å€¼ã€‚\n\n```java\n// Controllerä¸­çš„ä»£ç ï¼š\n@RequestMapping(path = \"/testRequestParam\")\npublic String testRequestParam(@RequestParam(value = \"name\") String username) {\n    // æŠŠè¯·æ±‚ä¸­æŒ‡å®šçš„nameèµ‹å€¼ç»™æ§åˆ¶å™¨ä¸­çš„å½¢å‚username\n    System.out.println(\"æ‰§è¡Œäº†testRequestParam...\");\n    System.out.println(username);\n    return \"success\";\n}\n```\n\n## å…¶ä»–\n\n### Spring MVCæ€ä¹ˆæ ·è®¾å®šè½¬å‘å’Œé‡å®šå‘çš„ï¼Ÿ\n\nï¼ˆ1ï¼‰è½¬å‘ï¼šä½¿ç”¨forward\nforwardæ˜¯æŒ‡å†…éƒ¨è½¬å‘ï¼Œç›¸å½“äºæœåŠ¡å™¨å†…éƒ¨æ–¹æ³•è·³è½¬è°ƒç”¨ã€‚è¯·æ±‚ä¸€æ¬¡æœåŠ¡å™¨ã€‚è½¬å‘åœ°å€ä¸å˜ã€‚\n\nï¼ˆ2ï¼‰é‡å®šå‘ï¼šä½¿ç”¨redirect\né‡å®šå‘æ˜¯æŒ‡å½“æµè§ˆå™¨è¯·æ±‚ä¸€ä¸ªURLæ—¶ï¼ŒæœåŠ¡å™¨è¿”å›ä¸€ä¸ªé‡å®šå‘æŒ‡ä»¤ï¼Œå‘Šè¯‰æµè§ˆå™¨åœ°å€å·²ç»å˜äº†ï¼Œéº»çƒ¦ä½¿ç”¨æ–°çš„URLå†é‡æ–°å‘é€æ–°è¯·æ±‚ã€‚è¯·æ±‚ä¸¤æ¬¡æœåŠ¡å™¨ã€‚é‡å®šå‘åœ°å€æ”¹å˜ã€‚\n\n### Spring MVCæ€ä¹ˆå’ŒAJAXç›¸äº’è°ƒç”¨çš„ï¼Ÿ\n\né€šè¿‡Jacksonæˆ–è€…æ˜¯fastjsonå°±å¯ä»¥æŠŠJavaé‡Œé¢çš„å¯¹è±¡ç›´æ¥è½¬åŒ–æˆJså¯ä»¥è¯†åˆ«çš„Jsonå¯¹è±¡ï¼Œæ¥è¿›è¡Œä¼ è¾“ã€‚\n\n### å¦‚ä½•è§£å†³POSTè¯·æ±‚ä¸­æ–‡ä¹±ç é—®é¢˜ï¼ŒGETçš„åˆå¦‚ä½•å¤„ç†å‘¢ï¼Ÿ\n\nï¼ˆ1ï¼‰è§£å†³postè¯·æ±‚ä¹±ç é—®é¢˜ï¼š\n\nåœ¨web.xmlä¸­é…ç½®ä¸€ä¸ªCharacterEncodingFilterè¿‡æ»¤å™¨ï¼Œè®¾ç½®æˆutf-8ï¼›\n\n```xml\n<filter>\n    <filter-name>CharacterEncodingFilter</filter-name>\n    <filter-class>org.springframework.web.filter.CharacterEncodingFilter</filter-class>\n\n    <init-param>\n        <param-name>encoding</param-name>\n        <param-value>utf-8</param-value>\n    </init-param>\n</filter>\n\n<filter-mapping>\n    <filter-name>CharacterEncodingFilter</filter-name>\n    <url-pattern>/*</url-pattern>\n</filter-mapping>\n```\n\nï¼ˆ2ï¼‰getè¯·æ±‚ä¸­æ–‡å‚æ•°å‡ºç°ä¹±ç è§£å†³æ–¹æ³•æœ‰ä¸¤ä¸ªï¼š\n\nä¿®æ”¹tomcaté…ç½®æ–‡ä»¶æ·»åŠ ç¼–ç ä¸å·¥ç¨‹ç¼–ç ä¸€è‡´ï¼Œå¦‚ä¸‹ï¼š\n\n```xml\n<ConnectorURIEncoding=\"utf-8\" connectionTimeout=\"20000\" port=\"8080\" protocol=\"HTTP/1.1\" redirectPort=\"8443\"/>\n```\n\n### Spring MVCçš„å¼‚å¸¸å¤„ç†\n\nå¯ä»¥å°†å¼‚å¸¸æŠ›ç»™Springæ¡†æ¶ï¼Œç”±Springæ¡†æ¶æ¥å¤„ç†ï¼›æˆ‘ä»¬åªéœ€è¦é…ç½®ç®€å•çš„å¼‚å¸¸å¤„ç†å™¨ï¼Œåœ¨å¼‚å¸¸å¤„ç†å™¨ä¸­æ·»è§†å›¾é¡µé¢å³å¯ã€‚\n\n### å¦‚æœåœ¨æ‹¦æˆªè¯·æ±‚ä¸­ï¼Œæˆ‘æƒ³æ‹¦æˆªgetæ–¹å¼æäº¤çš„æ–¹æ³•,æ€ä¹ˆé…ç½®\n\nç­”ï¼šå¯ä»¥åœ¨@RequestMappingæ³¨è§£é‡Œé¢åŠ ä¸Šmethod=RequestMethod.GETã€‚\n\n### æ€æ ·åœ¨æ–¹æ³•é‡Œé¢å¾—åˆ°Request,æˆ–è€…Sessionï¼Ÿ\n\nç­”ï¼šç›´æ¥åœ¨æ–¹æ³•çš„å½¢å‚ä¸­å£°æ˜request,Spring MVCå°±è‡ªåŠ¨æŠŠrequestå¯¹è±¡ä¼ å…¥ã€‚\n\n### å¦‚æœæƒ³åœ¨æ‹¦æˆªçš„æ–¹æ³•é‡Œé¢å¾—åˆ°ä»å‰å°ä¼ å…¥çš„å‚æ•°,æ€ä¹ˆå¾—åˆ°ï¼Ÿ\n\nç›´æ¥åœ¨å½¢å‚é‡Œé¢å£°æ˜è¿™ä¸ªå‚æ•°å°±å¯ä»¥,ä½†å¿…é¡»åå­—å’Œä¼ è¿‡æ¥çš„å‚æ•°ä¸€æ ·ã€‚\næˆ–è€…ä½¿ç”¨ RequestParamæ³¨è§£å°†å‰å°çš„å‚æ•°åAä¼ ç»™å½¢å‚ä¸­çš„å‚æ•°B\n\n### å¦‚æœå‰å°æœ‰å¾ˆå¤šä¸ªå‚æ•°ä¼ å…¥,å¹¶ä¸”è¿™äº›å‚æ•°éƒ½æ˜¯ä¸€ä¸ªå¯¹è±¡çš„,é‚£ä¹ˆæ€ä¹ˆæ ·å¿«é€Ÿå¾—åˆ°è¿™ä¸ªå¯¹è±¡ï¼Ÿ\n\nç›´æ¥åœ¨æ–¹æ³•ä¸­å£°æ˜è¿™ä¸ªå¯¹è±¡,Spring MVCå°±è‡ªåŠ¨ä¼šæŠŠå±æ€§èµ‹å€¼åˆ°è¿™ä¸ªå¯¹è±¡é‡Œé¢ã€‚\n\n### Spring MVCä¸­å‡½æ•°çš„è¿”å›å€¼æ˜¯ä»€ä¹ˆï¼Ÿ\n\nè¿”å›å€¼å¯ä»¥æœ‰å¾ˆå¤šç±»å‹,æœ‰String, ModelAndViewï¼ˆè§†å›¾å’Œæ•°æ®åˆå¹¶åœ¨ä¸€èµ·ï¼‰ã€‚\n\n### Spring MVCç”¨ä»€ä¹ˆå¯¹è±¡ä»åå°å‘å‰å°ä¼ é€’æ•°æ®çš„ï¼Ÿ\n\né€šè¿‡ModelMapå¯¹è±¡,å¯ä»¥åœ¨è¿™ä¸ªå¯¹è±¡é‡Œé¢è°ƒç”¨putæ–¹æ³•,æŠŠå¯¹è±¡åŠ åˆ°é‡Œé¢,å‰å°å°±å¯ä»¥é€šè¿‡elè¡¨è¾¾å¼æ‹¿åˆ°ã€‚\n\n### æ€ä¹ˆæ ·æŠŠModelMapé‡Œé¢çš„æ•°æ®æ”¾å…¥Sessioné‡Œé¢ï¼Ÿ\n\nå¯ä»¥åœ¨ç±»ä¸Šé¢åŠ ä¸Š@SessionAttributesæ³¨è§£,é‡Œé¢åŒ…å«çš„å­—ç¬¦ä¸²å°±æ˜¯è¦æ”¾å…¥sessioné‡Œé¢çš„keyã€‚\n\n### Spring MVCé‡Œé¢æ‹¦æˆªå™¨æ˜¯æ€ä¹ˆå†™çš„\n\næœ‰ä¸¤ç§å†™æ³•,ä¸€ç§æ˜¯å®ç°HandlerInterceptoræ¥å£ï¼Œé‡å†™prehandleç­‰æ–¹æ³•ï¼Œç„¶åé…ç½®æ‹¦æˆªå™¨\n","slug":"Javaå…«è‚¡æ–‡ - SpringMVC","published":1,"updated":"2023-01-23T08:47:22.666Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cld8kfsiw000fzvt8477edsy8","content":"<blockquote>\n<p>æ•´ç†çš„SpringMVCç›¸å…³çŸ¥è¯†ç‚¹å’Œé¢è¯•é¢˜ï¼Œéƒ¨åˆ†å†…å®¹æ‘˜è‡ªç½‘ç»œï¼Œå¦‚æœ‰ä¾µæƒè¯·è”ç³»æˆ‘ï½<span id=\"more\"></span></p>\n</blockquote>\n<h2 id=\"æ¦‚è¿°\"><a href=\"#æ¦‚è¿°\" class=\"headerlink\" title=\"æ¦‚è¿°\"></a>æ¦‚è¿°</h2><h3 id=\"ä»€ä¹ˆæ˜¯Spring-MVCï¼Ÿç®€å•ä»‹ç»ä¸‹ä½ å¯¹Spring-MVCçš„ç†è§£ï¼Ÿ\"><a href=\"#ä»€ä¹ˆæ˜¯Spring-MVCï¼Ÿç®€å•ä»‹ç»ä¸‹ä½ å¯¹Spring-MVCçš„ç†è§£ï¼Ÿ\" class=\"headerlink\" title=\"ä»€ä¹ˆæ˜¯Spring MVCï¼Ÿç®€å•ä»‹ç»ä¸‹ä½ å¯¹Spring MVCçš„ç†è§£ï¼Ÿ\"></a>ä»€ä¹ˆæ˜¯Spring MVCï¼Ÿç®€å•ä»‹ç»ä¸‹ä½ å¯¹Spring MVCçš„ç†è§£ï¼Ÿ</h3><p>Spring MVCæ˜¯ä¸€ä¸ªåŸºäºJavaçš„å®ç°äº†MVCè®¾è®¡æ¨¡å¼çš„è¯·æ±‚é©±åŠ¨ç±»å‹çš„è½»é‡çº§Webæ¡†æ¶ï¼Œé€šè¿‡æŠŠæ¨¡å‹-è§†å›¾-æ§åˆ¶å™¨åˆ†ç¦»ï¼Œå°†webå±‚è¿›è¡ŒèŒè´£è§£è€¦ï¼Œç®€åŒ–å¼€å‘ã€‚</p>\n<h2 id=\"æ ¸å¿ƒç»„ä»¶\"><a href=\"#æ ¸å¿ƒç»„ä»¶\" class=\"headerlink\" title=\"æ ¸å¿ƒç»„ä»¶\"></a>æ ¸å¿ƒç»„ä»¶</h2><h3 id=\"Spring-MVCçš„ä¸»è¦ç»„ä»¶ï¼Ÿ\"><a href=\"#Spring-MVCçš„ä¸»è¦ç»„ä»¶ï¼Ÿ\" class=\"headerlink\" title=\"Spring MVCçš„ä¸»è¦ç»„ä»¶ï¼Ÿ\"></a>Spring MVCçš„ä¸»è¦ç»„ä»¶ï¼Ÿ</h3><p>ï¼ˆ1ï¼‰å‰ç«¯æ§åˆ¶å™¨ DispatcherServletï¼ˆä¸éœ€è¦ç¨‹åºå‘˜å¼€å‘ï¼‰</p>\n<p>ä½œç”¨ï¼šæ¥æ”¶è¯·æ±‚ã€å“åº”ç»“æœï¼Œç›¸å½“äºè½¬å‘å™¨ï¼Œæœ‰äº†DispatcherServlet å°±å‡å°‘äº†å…¶å®ƒç»„ä»¶ä¹‹é—´çš„è€¦åˆåº¦ã€‚</p>\n<p>ï¼ˆ2ï¼‰å¤„ç†å™¨æ˜ å°„å™¨HandlerMappingï¼ˆä¸éœ€è¦ç¨‹åºå‘˜å¼€å‘ï¼‰</p>\n<p>ä½œç”¨ï¼šæ ¹æ®è¯·æ±‚çš„URLæ¥æŸ¥æ‰¾Handler</p>\n<p>ï¼ˆ3ï¼‰å¤„ç†å™¨é€‚é…å™¨HandlerAdapter</p>\n<p>æ³¨æ„ï¼šåœ¨ç¼–å†™Handlerçš„æ—¶å€™è¦æŒ‰ç…§HandlerAdapterè¦æ±‚çš„è§„åˆ™å»ç¼–å†™ï¼Œè¿™æ ·é€‚é…å™¨HandlerAdapteræ‰å¯ä»¥æ­£ç¡®çš„å»æ‰§è¡ŒHandlerã€‚</p>\n<p>ï¼ˆ4ï¼‰å¤„ç†å™¨Handlerï¼ˆéœ€è¦ç¨‹åºå‘˜å¼€å‘ï¼‰</p>\n<p>ï¼ˆ5ï¼‰è§†å›¾è§£æå™¨ ViewResolverï¼ˆä¸éœ€è¦ç¨‹åºå‘˜å¼€å‘ï¼‰</p>\n<p>ä½œç”¨ï¼šè¿›è¡Œè§†å›¾çš„è§£æï¼Œæ ¹æ®è§†å›¾é€»è¾‘åè§£ææˆçœŸæ­£çš„è§†å›¾ï¼ˆviewï¼‰</p>\n<p>ï¼ˆ6ï¼‰è§†å›¾Viewï¼ˆéœ€è¦ç¨‹åºå‘˜å¼€å‘jspï¼‰</p>\n<p>Viewæ˜¯ä¸€ä¸ªæ¥å£ï¼Œ å®ƒçš„å®ç°ç±»æ”¯æŒä¸åŒçš„è§†å›¾ç±»å‹ï¼ˆjspï¼Œfreemarkerï¼Œpdfç­‰ç­‰ï¼‰</p>\n<h3 id=\"ä»€ä¹ˆæ˜¯DispatcherServlet\"><a href=\"#ä»€ä¹ˆæ˜¯DispatcherServlet\" class=\"headerlink\" title=\"ä»€ä¹ˆæ˜¯DispatcherServlet\"></a>ä»€ä¹ˆæ˜¯DispatcherServlet</h3><p>Springçš„MVCæ¡†æ¶æ˜¯å›´ç»•DispatcherServletæ¥è®¾è®¡çš„ï¼Œå®ƒç”¨æ¥å¤„ç†æ‰€æœ‰çš„HTTPè¯·æ±‚å’Œå“åº”ã€‚</p>\n<h3 id=\"ä»€ä¹ˆæ˜¯Spring-MVCæ¡†æ¶çš„æ§åˆ¶å™¨ï¼Ÿ\"><a href=\"#ä»€ä¹ˆæ˜¯Spring-MVCæ¡†æ¶çš„æ§åˆ¶å™¨ï¼Ÿ\" class=\"headerlink\" title=\"ä»€ä¹ˆæ˜¯Spring MVCæ¡†æ¶çš„æ§åˆ¶å™¨ï¼Ÿ\"></a>ä»€ä¹ˆæ˜¯Spring MVCæ¡†æ¶çš„æ§åˆ¶å™¨ï¼Ÿ</h3><p>æ§åˆ¶å™¨ä½¿ç”¨@Controlleræ³¨è§£ï¼Œå¹¶ä¸”æä¾›äº†@RequestMappingæ³¨è§£ï¼Œé€šè¿‡è§£æurlä¸­çš„è·¯å¾„ï¼Œå¯ä»¥æ‰¾åˆ°ç›¸åº”çš„æ§åˆ¶å™¨è¿›è¡Œé€»è¾‘å¤„ç†ï¼Œå“åº”æ•°æ®ç­‰ã€‚</p>\n<h3 id=\"Spring-MVCçš„æ§åˆ¶å™¨æ˜¯ä¸æ˜¯å•ä¾‹æ¨¡å¼-å¦‚æœæ˜¯-æœ‰ä»€ä¹ˆé—®é¢˜-æ€ä¹ˆè§£å†³ï¼Ÿ\"><a href=\"#Spring-MVCçš„æ§åˆ¶å™¨æ˜¯ä¸æ˜¯å•ä¾‹æ¨¡å¼-å¦‚æœæ˜¯-æœ‰ä»€ä¹ˆé—®é¢˜-æ€ä¹ˆè§£å†³ï¼Ÿ\" class=\"headerlink\" title=\"Spring MVCçš„æ§åˆ¶å™¨æ˜¯ä¸æ˜¯å•ä¾‹æ¨¡å¼,å¦‚æœæ˜¯,æœ‰ä»€ä¹ˆé—®é¢˜,æ€ä¹ˆè§£å†³ï¼Ÿ\"></a>Spring MVCçš„æ§åˆ¶å™¨æ˜¯ä¸æ˜¯å•ä¾‹æ¨¡å¼,å¦‚æœæ˜¯,æœ‰ä»€ä¹ˆé—®é¢˜,æ€ä¹ˆè§£å†³ï¼Ÿ</h3><p>å•ä¾‹æ¨¡å¼,æ‰€ä»¥åœ¨å¤šçº¿ç¨‹è®¿é—®çš„æ—¶å€™æœ‰çº¿ç¨‹å®‰å…¨é—®é¢˜,ä¸è¦ç”¨åŒæ­¥,ä¼šå½±å“æ€§èƒ½çš„ï¼Œè§£å†³æ–¹æ¡ˆæ˜¯åœ¨æ§åˆ¶å™¨ä¿æŒæ§åˆ¶å™¨æ— çŠ¶æ€ï¼ˆä¸è¦å†™å­—æ®µï¼‰ã€‚</p>\n<h2 id=\"å·¥ä½œåŸç†\"><a href=\"#å·¥ä½œåŸç†\" class=\"headerlink\" title=\"å·¥ä½œåŸç†\"></a>å·¥ä½œåŸç†</h2><h3 id=\"è¯·æè¿°Spring-MVCçš„å·¥ä½œæµç¨‹ï¼Ÿæè¿°ä¸€ä¸‹-DispatcherServlet-çš„å·¥ä½œæµç¨‹ï¼Ÿ\"><a href=\"#è¯·æè¿°Spring-MVCçš„å·¥ä½œæµç¨‹ï¼Ÿæè¿°ä¸€ä¸‹-DispatcherServlet-çš„å·¥ä½œæµç¨‹ï¼Ÿ\" class=\"headerlink\" title=\"è¯·æè¿°Spring MVCçš„å·¥ä½œæµç¨‹ï¼Ÿæè¿°ä¸€ä¸‹ DispatcherServlet çš„å·¥ä½œæµç¨‹ï¼Ÿ\"></a>è¯·æè¿°Spring MVCçš„å·¥ä½œæµç¨‹ï¼Ÿæè¿°ä¸€ä¸‹ DispatcherServlet çš„å·¥ä½œæµç¨‹ï¼Ÿ</h3><ol>\n<li>ç”¨æˆ·å‘é€è¯·æ±‚è‡³å‰ç«¯æ§åˆ¶å™¨DispatcherServletï¼›</li>\n<li>DispatcherServletæ”¶åˆ°è¯·æ±‚åï¼Œè°ƒç”¨HandlerMappingå¤„ç†å™¨æ˜ å°„å™¨ï¼Œè¯·æ±‚è·å–Handlerï¼›</li>\n<li>HandlerMappingå¤„ç†å™¨æ˜ å°„å™¨æ ¹æ®è¯·æ±‚url<strong>æ‰¾åˆ°å…·ä½“çš„å¤„ç†å™¨</strong>ï¼Œç”Ÿæˆå¤„ç†å™¨å¯¹è±¡åŠå¤„ç†å™¨æ‹¦æˆªå™¨(å¦‚æœæœ‰åˆ™ç”Ÿæˆ)ä¸€å¹¶è¿”å›ç»™DispatcherServletï¼›</li>\n<li>DispatcherServlet è°ƒç”¨ HandlerAdapterå¤„ç†å™¨é€‚é…å™¨ï¼›</li>\n<li>HandlerAdapter ç»è¿‡é€‚é… <strong>è°ƒç”¨å…·ä½“å¤„ç†å™¨</strong>(Handlerï¼Œä¹Ÿå«åç«¯æ§åˆ¶å™¨)ï¼›</li>\n<li>Handleræ‰§è¡Œå®Œæˆè¿”å›ModelAndViewï¼›</li>\n<li>HandlerAdapterå°†Handleræ‰§è¡Œç»“æœModelAndViewè¿”å›ç»™DispatcherServletï¼›</li>\n<li>DispatcherServletå°†ModelAndViewä¼ ç»™ViewResolverè§†å›¾è§£æå™¨è¿›è¡Œè§£æï¼›</li>\n<li>ViewResolverè§£æåè¿”å›å…·ä½“Viewï¼›</li>\n<li>DispatcherServletå¯¹Viewè¿›è¡Œæ¸²æŸ“æˆä¸ºè§†å›¾ï¼ˆå³å°†æ¨¡å‹æ•°æ®å¡«å……è‡³è§†å›¾ä¸­ï¼‰ï¼›</li>\n<li>DispatcherServletå“åº”ç”¨æˆ·ã€‚</li>\n</ol>\n<p><img src=\"https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/TyporaNotes20200208211439106.png\" alt=\"Spring MVCçš„å·¥ä½œæµç¨‹\"></p>\n<h2 id=\"å¸¸ç”¨æ³¨è§£\"><a href=\"#å¸¸ç”¨æ³¨è§£\" class=\"headerlink\" title=\"å¸¸ç”¨æ³¨è§£\"></a>å¸¸ç”¨æ³¨è§£</h2><h3 id=\"æ³¨è§£åŸç†æ˜¯ä»€ä¹ˆ\"><a href=\"#æ³¨è§£åŸç†æ˜¯ä»€ä¹ˆ\" class=\"headerlink\" title=\"æ³¨è§£åŸç†æ˜¯ä»€ä¹ˆ\"></a>æ³¨è§£åŸç†æ˜¯ä»€ä¹ˆ</h3><p>æ³¨è§£æœ¬è´¨æ˜¯ä¸€ä¸ªç»§æ‰¿äº†Annotationçš„ç‰¹æ®Šæ¥å£ï¼Œå…¶å…·ä½“å®ç°ç±»æ˜¯Javaè¿è¡Œæ—¶ç”Ÿæˆçš„åŠ¨æ€ä»£ç†ç±»ã€‚æˆ‘ä»¬é€šè¿‡åå°„è·å–æ³¨è§£æ—¶ï¼Œè¿”å›çš„æ˜¯Javaè¿è¡Œæ—¶ç”Ÿæˆçš„åŠ¨æ€ä»£ç†å¯¹è±¡ã€‚é€šè¿‡ä»£ç†å¯¹è±¡è°ƒç”¨è‡ªå®šä¹‰æ³¨è§£çš„æ–¹æ³•ã€‚</p>\n<h3 id=\"Spring-MVCå¸¸ç”¨çš„æ³¨è§£æœ‰å“ªäº›ï¼Ÿ\"><a href=\"#Spring-MVCå¸¸ç”¨çš„æ³¨è§£æœ‰å“ªäº›ï¼Ÿ\" class=\"headerlink\" title=\"Spring MVCå¸¸ç”¨çš„æ³¨è§£æœ‰å“ªäº›ï¼Ÿ\"></a>Spring MVCå¸¸ç”¨çš„æ³¨è§£æœ‰å“ªäº›ï¼Ÿ</h3><p>@RequestMappingï¼šç”¨äºå¤„ç†è¯·æ±‚ url æ˜ å°„çš„æ³¨è§£ï¼Œå¯ç”¨äºç±»æˆ–æ–¹æ³•ä¸Šã€‚ç”¨äºç±»ä¸Šï¼Œåˆ™è¡¨ç¤ºç±»ä¸­çš„æ‰€æœ‰å“åº”è¯·æ±‚çš„æ–¹æ³•éƒ½æ˜¯ä»¥è¯¥åœ°å€ä½œä¸ºçˆ¶è·¯å¾„ã€‚</p>\n<p>@RequestBodyï¼šæ³¨è§£å®ç°æ¥æ”¶httpè¯·æ±‚çš„jsonæ•°æ®ï¼Œå°†jsonè½¬æ¢ä¸ºjavaå¯¹è±¡ã€‚</p>\n<p>@ResponseBodyï¼šæ³¨è§£å®ç°å°†controlleræ–¹æ³•è¿”å›å¯¹è±¡è½¬åŒ–ä¸ºjsonå¯¹è±¡å“åº”ç»™å®¢æˆ·ã€‚</p>\n<h3 id=\"Sping-MVCä¸­çš„æ§åˆ¶å™¨çš„æ³¨è§£ä¸€èˆ¬ç”¨å“ªä¸ª-æœ‰æ²¡æœ‰åˆ«çš„æ³¨è§£å¯ä»¥æ›¿ä»£ï¼Ÿ\"><a href=\"#Sping-MVCä¸­çš„æ§åˆ¶å™¨çš„æ³¨è§£ä¸€èˆ¬ç”¨å“ªä¸ª-æœ‰æ²¡æœ‰åˆ«çš„æ³¨è§£å¯ä»¥æ›¿ä»£ï¼Ÿ\" class=\"headerlink\" title=\"Sping MVCä¸­çš„æ§åˆ¶å™¨çš„æ³¨è§£ä¸€èˆ¬ç”¨å“ªä¸ª,æœ‰æ²¡æœ‰åˆ«çš„æ³¨è§£å¯ä»¥æ›¿ä»£ï¼Ÿ\"></a>Sping MVCä¸­çš„æ§åˆ¶å™¨çš„æ³¨è§£ä¸€èˆ¬ç”¨å“ªä¸ª,æœ‰æ²¡æœ‰åˆ«çš„æ³¨è§£å¯ä»¥æ›¿ä»£ï¼Ÿ</h3><p>ç­”ï¼šä¸€èˆ¬ç”¨@Controlleræ³¨è§£ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨@RestControllerï¼Œ@RestControlleræ³¨è§£ç›¸å½“äº@ResponseBody ï¼‹ @Controllerï¼Œ@ResponseBody ç”¨äºè¿”å›jsonæ•°æ®ï¼‹ @Controller ç”¨äºè¡¨æ˜æ§åˆ¶å™¨</p>\n<h3 id=\"Controlleræ³¨è§£çš„ä½œç”¨\"><a href=\"#Controlleræ³¨è§£çš„ä½œç”¨\" class=\"headerlink\" title=\"@Controlleræ³¨è§£çš„ä½œç”¨\"></a>@Controlleræ³¨è§£çš„ä½œç”¨</h3><p>@Controller ç”¨äºæ ‡è®°åœ¨ä¸€ä¸ªç±»ä¸Šï¼Œä½¿ç”¨å®ƒæ ‡è®°çš„ç±»å°±æ˜¯ä¸€ä¸ªSpring MVC Controller å¯¹è±¡ã€‚é€šè¿‡è¯·æ±‚çš„urlå’Œ@RequestMapping æ³¨è§£å¯¹åº”åˆ°å®é™…å¤„ç†è¯·æ±‚çš„å¤„ç†å™¨ã€‚éœ€è¦å¼€å¯mvcæ³¨è§£æ‰«ææ‰¾åˆ°@Controllerçš„æ§åˆ¶å™¨ã€‚</p>\n<h3 id=\"RequestMappingæ³¨è§£çš„ä½œç”¨\"><a href=\"#RequestMappingæ³¨è§£çš„ä½œç”¨\" class=\"headerlink\" title=\"@RequestMappingæ³¨è§£çš„ä½œç”¨\"></a>@RequestMappingæ³¨è§£çš„ä½œç”¨</h3><p>RequestMappingæ˜¯ä¸€ä¸ªç”¨æ¥å¤„ç†è¯·æ±‚åœ°å€æ˜ å°„çš„æ³¨è§£ï¼Œå¯ç”¨äºç±»æˆ–æ–¹æ³•ä¸Šã€‚</p>\n<p>ç”¨äºç±»ä¸Šï¼Œè¡¨ç¤ºç±»ä¸­çš„æ‰€æœ‰å“åº”è¯·æ±‚çš„æ–¹æ³•éƒ½æ˜¯ä»¥è¯¥åœ°å€ä½œä¸ºçˆ¶è·¯å¾„ã€‚</p>\n<p>RequestMappingæ³¨è§£æœ‰å…­ä¸ªå±æ€§ï¼š</p>\n<p><strong>path&#x2F;valueï¼Œ method</strong></p>\n<ul>\n<li><p>valueï¼š æŒ‡å®šè¯·æ±‚çš„å®é™…åœ°å€ï¼ŒæŒ‡å®šçš„åœ°å€å¯ä»¥æ˜¯URI Template æ¨¡å¼ï¼ˆåé¢å°†ä¼šè¯´æ˜ï¼‰ï¼›</p>\n</li>\n<li><p>methodï¼š æŒ‡å®šè¯·æ±‚çš„methodç±»å‹ï¼Œ GETã€POSTã€PUTã€DELETEç­‰ï¼›</p>\n</li>\n</ul>\n<p><strong>consumesï¼Œproduces</strong></p>\n<ul>\n<li><p>consumesï¼š æŒ‡å®šå¤„ç†è¯·æ±‚çš„æäº¤å†…å®¹ç±»å‹ï¼ˆContent-Typeï¼‰ï¼Œä¾‹å¦‚application&#x2F;json, text&#x2F;html;</p>\n</li>\n<li><p>produces: æŒ‡å®šè¿”å›çš„å†…å®¹ç±»å‹ï¼Œä»…å½“requestè¯·æ±‚å¤´ä¸­çš„(Accept)ç±»å‹ä¸­åŒ…å«è¯¥æŒ‡å®šç±»å‹æ‰è¿”å›ï¼›</p>\n</li>\n</ul>\n<p><strong>paramsï¼Œheaders</strong></p>\n<ul>\n<li><p>paramsï¼š æŒ‡å®šrequestä¸­å¿…é¡»åŒ…å«æŸäº›å‚æ•°å€¼æ—¶ï¼Œæ‰è®©è¯¥æ–¹æ³•å¤„ç†ã€‚</p>\n</li>\n<li><p>headersï¼š æŒ‡å®šrequestä¸­å¿…é¡»åŒ…å«æŸäº›æŒ‡å®šçš„headerå€¼ï¼Œæ‰èƒ½è®©è¯¥æ–¹æ³•å¤„ç†è¯·æ±‚ã€‚</p>\n</li>\n</ul>\n<h3 id=\"PathVariableå’Œ-RequestParamçš„åŒºåˆ«\"><a href=\"#PathVariableå’Œ-RequestParamçš„åŒºåˆ«\" class=\"headerlink\" title=\"@PathVariableå’Œ@RequestParamçš„åŒºåˆ«\"></a>@PathVariableå’Œ@RequestParamçš„åŒºåˆ«</h3><p>@PathVariableä½œç”¨ï¼š ç”¨äºç»‘å®šurlä¸­çš„å ä½ç¬¦ã€‚ä¾‹å¦‚ï¼šè¯·æ±‚urlä¸­ &#x2F;delete&#x2F;{id}ï¼Œè¿™ä¸ª{id}å°±æ˜¯urlå ä½ç¬¦ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">* æ ¹æ®path /anno/testPathVariable/10 æ‰¾åˆ° testPathVariable æ–¹æ³•</span></span><br><span class=\"line\"><span class=\"comment\">* ç„¶åï¼Œå…¶ä¸­çš„10å°±æ˜¯sidå ä½ç¬¦æ‰€å çš„ä½ç½®çš„æ•°æ®ï¼Œç„¶åé€šè¿‡<span class=\"doctag\">@PathVaribale</span>æ³¨è§£å°†å…¶èµ‹å€¼ç»™ id</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\"><span class=\"meta\">@RequestMapping(path = &quot;testPathVariable/&#123;sid&#125;&quot;)</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> String <span class=\"title function_\">testPathVariable</span><span class=\"params\">(<span class=\"meta\">@PathVariable(value = &quot;sid&quot;)</span> String id)</span> &#123;</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;æ‰§è¡Œäº†testPathVariable...&quot;</span>);</span><br><span class=\"line\">    System.out.println(id);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">&quot;success&quot;</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>@RequestParamä½œç”¨ï¼š æŠŠè¯·æ±‚ä¸­æŒ‡å®šåç§°çš„å‚æ•°ç»™æ§åˆ¶å™¨ä¸­çš„å½¢å‚èµ‹å€¼ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// Controllerä¸­çš„ä»£ç ï¼š</span></span><br><span class=\"line\"><span class=\"meta\">@RequestMapping(path = &quot;/testRequestParam&quot;)</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> String <span class=\"title function_\">testRequestParam</span><span class=\"params\">(<span class=\"meta\">@RequestParam(value = &quot;name&quot;)</span> String username)</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// æŠŠè¯·æ±‚ä¸­æŒ‡å®šçš„nameèµ‹å€¼ç»™æ§åˆ¶å™¨ä¸­çš„å½¢å‚username</span></span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;æ‰§è¡Œäº†testRequestParam...&quot;</span>);</span><br><span class=\"line\">    System.out.println(username);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">&quot;success&quot;</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"å…¶ä»–\"><a href=\"#å…¶ä»–\" class=\"headerlink\" title=\"å…¶ä»–\"></a>å…¶ä»–</h2><h3 id=\"Spring-MVCæ€ä¹ˆæ ·è®¾å®šè½¬å‘å’Œé‡å®šå‘çš„ï¼Ÿ\"><a href=\"#Spring-MVCæ€ä¹ˆæ ·è®¾å®šè½¬å‘å’Œé‡å®šå‘çš„ï¼Ÿ\" class=\"headerlink\" title=\"Spring MVCæ€ä¹ˆæ ·è®¾å®šè½¬å‘å’Œé‡å®šå‘çš„ï¼Ÿ\"></a>Spring MVCæ€ä¹ˆæ ·è®¾å®šè½¬å‘å’Œé‡å®šå‘çš„ï¼Ÿ</h3><p>ï¼ˆ1ï¼‰è½¬å‘ï¼šä½¿ç”¨forward<br>forwardæ˜¯æŒ‡å†…éƒ¨è½¬å‘ï¼Œç›¸å½“äºæœåŠ¡å™¨å†…éƒ¨æ–¹æ³•è·³è½¬è°ƒç”¨ã€‚è¯·æ±‚ä¸€æ¬¡æœåŠ¡å™¨ã€‚è½¬å‘åœ°å€ä¸å˜ã€‚</p>\n<p>ï¼ˆ2ï¼‰é‡å®šå‘ï¼šä½¿ç”¨redirect<br>é‡å®šå‘æ˜¯æŒ‡å½“æµè§ˆå™¨è¯·æ±‚ä¸€ä¸ªURLæ—¶ï¼ŒæœåŠ¡å™¨è¿”å›ä¸€ä¸ªé‡å®šå‘æŒ‡ä»¤ï¼Œå‘Šè¯‰æµè§ˆå™¨åœ°å€å·²ç»å˜äº†ï¼Œéº»çƒ¦ä½¿ç”¨æ–°çš„URLå†é‡æ–°å‘é€æ–°è¯·æ±‚ã€‚è¯·æ±‚ä¸¤æ¬¡æœåŠ¡å™¨ã€‚é‡å®šå‘åœ°å€æ”¹å˜ã€‚</p>\n<h3 id=\"Spring-MVCæ€ä¹ˆå’ŒAJAXç›¸äº’è°ƒç”¨çš„ï¼Ÿ\"><a href=\"#Spring-MVCæ€ä¹ˆå’ŒAJAXç›¸äº’è°ƒç”¨çš„ï¼Ÿ\" class=\"headerlink\" title=\"Spring MVCæ€ä¹ˆå’ŒAJAXç›¸äº’è°ƒç”¨çš„ï¼Ÿ\"></a>Spring MVCæ€ä¹ˆå’ŒAJAXç›¸äº’è°ƒç”¨çš„ï¼Ÿ</h3><p>é€šè¿‡Jacksonæˆ–è€…æ˜¯fastjsonå°±å¯ä»¥æŠŠJavaé‡Œé¢çš„å¯¹è±¡ç›´æ¥è½¬åŒ–æˆJså¯ä»¥è¯†åˆ«çš„Jsonå¯¹è±¡ï¼Œæ¥è¿›è¡Œä¼ è¾“ã€‚</p>\n<h3 id=\"å¦‚ä½•è§£å†³POSTè¯·æ±‚ä¸­æ–‡ä¹±ç é—®é¢˜ï¼ŒGETçš„åˆå¦‚ä½•å¤„ç†å‘¢ï¼Ÿ\"><a href=\"#å¦‚ä½•è§£å†³POSTè¯·æ±‚ä¸­æ–‡ä¹±ç é—®é¢˜ï¼ŒGETçš„åˆå¦‚ä½•å¤„ç†å‘¢ï¼Ÿ\" class=\"headerlink\" title=\"å¦‚ä½•è§£å†³POSTè¯·æ±‚ä¸­æ–‡ä¹±ç é—®é¢˜ï¼ŒGETçš„åˆå¦‚ä½•å¤„ç†å‘¢ï¼Ÿ\"></a>å¦‚ä½•è§£å†³POSTè¯·æ±‚ä¸­æ–‡ä¹±ç é—®é¢˜ï¼ŒGETçš„åˆå¦‚ä½•å¤„ç†å‘¢ï¼Ÿ</h3><p>ï¼ˆ1ï¼‰è§£å†³postè¯·æ±‚ä¹±ç é—®é¢˜ï¼š</p>\n<p>åœ¨web.xmlä¸­é…ç½®ä¸€ä¸ªCharacterEncodingFilterè¿‡æ»¤å™¨ï¼Œè®¾ç½®æˆutf-8ï¼›</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">filter</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">filter-name</span>&gt;</span>CharacterEncodingFilter<span class=\"tag\">&lt;/<span class=\"name\">filter-name</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">filter-class</span>&gt;</span>org.springframework.web.filter.CharacterEncodingFilter<span class=\"tag\">&lt;/<span class=\"name\">filter-class</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">init-param</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">param-name</span>&gt;</span>encoding<span class=\"tag\">&lt;/<span class=\"name\">param-name</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">param-value</span>&gt;</span>utf-8<span class=\"tag\">&lt;/<span class=\"name\">param-value</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">init-param</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">filter</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">filter-mapping</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">filter-name</span>&gt;</span>CharacterEncodingFilter<span class=\"tag\">&lt;/<span class=\"name\">filter-name</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">url-pattern</span>&gt;</span>/*<span class=\"tag\">&lt;/<span class=\"name\">url-pattern</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">filter-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>ï¼ˆ2ï¼‰getè¯·æ±‚ä¸­æ–‡å‚æ•°å‡ºç°ä¹±ç è§£å†³æ–¹æ³•æœ‰ä¸¤ä¸ªï¼š</p>\n<p>ä¿®æ”¹tomcaté…ç½®æ–‡ä»¶æ·»åŠ ç¼–ç ä¸å·¥ç¨‹ç¼–ç ä¸€è‡´ï¼Œå¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;ConnectorURIEncoding=&quot;utf-8&quot; connectionTimeout=&quot;20000&quot; port=&quot;8080&quot; protocol=&quot;HTTP/1.1&quot; redirectPort=&quot;8443&quot;/&gt;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Spring-MVCçš„å¼‚å¸¸å¤„ç†\"><a href=\"#Spring-MVCçš„å¼‚å¸¸å¤„ç†\" class=\"headerlink\" title=\"Spring MVCçš„å¼‚å¸¸å¤„ç†\"></a>Spring MVCçš„å¼‚å¸¸å¤„ç†</h3><p>å¯ä»¥å°†å¼‚å¸¸æŠ›ç»™Springæ¡†æ¶ï¼Œç”±Springæ¡†æ¶æ¥å¤„ç†ï¼›æˆ‘ä»¬åªéœ€è¦é…ç½®ç®€å•çš„å¼‚å¸¸å¤„ç†å™¨ï¼Œåœ¨å¼‚å¸¸å¤„ç†å™¨ä¸­æ·»è§†å›¾é¡µé¢å³å¯ã€‚</p>\n<h3 id=\"å¦‚æœåœ¨æ‹¦æˆªè¯·æ±‚ä¸­ï¼Œæˆ‘æƒ³æ‹¦æˆªgetæ–¹å¼æäº¤çš„æ–¹æ³•-æ€ä¹ˆé…ç½®\"><a href=\"#å¦‚æœåœ¨æ‹¦æˆªè¯·æ±‚ä¸­ï¼Œæˆ‘æƒ³æ‹¦æˆªgetæ–¹å¼æäº¤çš„æ–¹æ³•-æ€ä¹ˆé…ç½®\" class=\"headerlink\" title=\"å¦‚æœåœ¨æ‹¦æˆªè¯·æ±‚ä¸­ï¼Œæˆ‘æƒ³æ‹¦æˆªgetæ–¹å¼æäº¤çš„æ–¹æ³•,æ€ä¹ˆé…ç½®\"></a>å¦‚æœåœ¨æ‹¦æˆªè¯·æ±‚ä¸­ï¼Œæˆ‘æƒ³æ‹¦æˆªgetæ–¹å¼æäº¤çš„æ–¹æ³•,æ€ä¹ˆé…ç½®</h3><p>ç­”ï¼šå¯ä»¥åœ¨@RequestMappingæ³¨è§£é‡Œé¢åŠ ä¸Šmethod&#x3D;RequestMethod.GETã€‚</p>\n<h3 id=\"æ€æ ·åœ¨æ–¹æ³•é‡Œé¢å¾—åˆ°Request-æˆ–è€…Sessionï¼Ÿ\"><a href=\"#æ€æ ·åœ¨æ–¹æ³•é‡Œé¢å¾—åˆ°Request-æˆ–è€…Sessionï¼Ÿ\" class=\"headerlink\" title=\"æ€æ ·åœ¨æ–¹æ³•é‡Œé¢å¾—åˆ°Request,æˆ–è€…Sessionï¼Ÿ\"></a>æ€æ ·åœ¨æ–¹æ³•é‡Œé¢å¾—åˆ°Request,æˆ–è€…Sessionï¼Ÿ</h3><p>ç­”ï¼šç›´æ¥åœ¨æ–¹æ³•çš„å½¢å‚ä¸­å£°æ˜request,Spring MVCå°±è‡ªåŠ¨æŠŠrequestå¯¹è±¡ä¼ å…¥ã€‚</p>\n<h3 id=\"å¦‚æœæƒ³åœ¨æ‹¦æˆªçš„æ–¹æ³•é‡Œé¢å¾—åˆ°ä»å‰å°ä¼ å…¥çš„å‚æ•°-æ€ä¹ˆå¾—åˆ°ï¼Ÿ\"><a href=\"#å¦‚æœæƒ³åœ¨æ‹¦æˆªçš„æ–¹æ³•é‡Œé¢å¾—åˆ°ä»å‰å°ä¼ å…¥çš„å‚æ•°-æ€ä¹ˆå¾—åˆ°ï¼Ÿ\" class=\"headerlink\" title=\"å¦‚æœæƒ³åœ¨æ‹¦æˆªçš„æ–¹æ³•é‡Œé¢å¾—åˆ°ä»å‰å°ä¼ å…¥çš„å‚æ•°,æ€ä¹ˆå¾—åˆ°ï¼Ÿ\"></a>å¦‚æœæƒ³åœ¨æ‹¦æˆªçš„æ–¹æ³•é‡Œé¢å¾—åˆ°ä»å‰å°ä¼ å…¥çš„å‚æ•°,æ€ä¹ˆå¾—åˆ°ï¼Ÿ</h3><p>ç›´æ¥åœ¨å½¢å‚é‡Œé¢å£°æ˜è¿™ä¸ªå‚æ•°å°±å¯ä»¥,ä½†å¿…é¡»åå­—å’Œä¼ è¿‡æ¥çš„å‚æ•°ä¸€æ ·ã€‚<br>æˆ–è€…ä½¿ç”¨ RequestParamæ³¨è§£å°†å‰å°çš„å‚æ•°åAä¼ ç»™å½¢å‚ä¸­çš„å‚æ•°B</p>\n<h3 id=\"å¦‚æœå‰å°æœ‰å¾ˆå¤šä¸ªå‚æ•°ä¼ å…¥-å¹¶ä¸”è¿™äº›å‚æ•°éƒ½æ˜¯ä¸€ä¸ªå¯¹è±¡çš„-é‚£ä¹ˆæ€ä¹ˆæ ·å¿«é€Ÿå¾—åˆ°è¿™ä¸ªå¯¹è±¡ï¼Ÿ\"><a href=\"#å¦‚æœå‰å°æœ‰å¾ˆå¤šä¸ªå‚æ•°ä¼ å…¥-å¹¶ä¸”è¿™äº›å‚æ•°éƒ½æ˜¯ä¸€ä¸ªå¯¹è±¡çš„-é‚£ä¹ˆæ€ä¹ˆæ ·å¿«é€Ÿå¾—åˆ°è¿™ä¸ªå¯¹è±¡ï¼Ÿ\" class=\"headerlink\" title=\"å¦‚æœå‰å°æœ‰å¾ˆå¤šä¸ªå‚æ•°ä¼ å…¥,å¹¶ä¸”è¿™äº›å‚æ•°éƒ½æ˜¯ä¸€ä¸ªå¯¹è±¡çš„,é‚£ä¹ˆæ€ä¹ˆæ ·å¿«é€Ÿå¾—åˆ°è¿™ä¸ªå¯¹è±¡ï¼Ÿ\"></a>å¦‚æœå‰å°æœ‰å¾ˆå¤šä¸ªå‚æ•°ä¼ å…¥,å¹¶ä¸”è¿™äº›å‚æ•°éƒ½æ˜¯ä¸€ä¸ªå¯¹è±¡çš„,é‚£ä¹ˆæ€ä¹ˆæ ·å¿«é€Ÿå¾—åˆ°è¿™ä¸ªå¯¹è±¡ï¼Ÿ</h3><p>ç›´æ¥åœ¨æ–¹æ³•ä¸­å£°æ˜è¿™ä¸ªå¯¹è±¡,Spring MVCå°±è‡ªåŠ¨ä¼šæŠŠå±æ€§èµ‹å€¼åˆ°è¿™ä¸ªå¯¹è±¡é‡Œé¢ã€‚</p>\n<h3 id=\"Spring-MVCä¸­å‡½æ•°çš„è¿”å›å€¼æ˜¯ä»€ä¹ˆï¼Ÿ\"><a href=\"#Spring-MVCä¸­å‡½æ•°çš„è¿”å›å€¼æ˜¯ä»€ä¹ˆï¼Ÿ\" class=\"headerlink\" title=\"Spring MVCä¸­å‡½æ•°çš„è¿”å›å€¼æ˜¯ä»€ä¹ˆï¼Ÿ\"></a>Spring MVCä¸­å‡½æ•°çš„è¿”å›å€¼æ˜¯ä»€ä¹ˆï¼Ÿ</h3><p>è¿”å›å€¼å¯ä»¥æœ‰å¾ˆå¤šç±»å‹,æœ‰String, ModelAndViewï¼ˆè§†å›¾å’Œæ•°æ®åˆå¹¶åœ¨ä¸€èµ·ï¼‰ã€‚</p>\n<h3 id=\"Spring-MVCç”¨ä»€ä¹ˆå¯¹è±¡ä»åå°å‘å‰å°ä¼ é€’æ•°æ®çš„ï¼Ÿ\"><a href=\"#Spring-MVCç”¨ä»€ä¹ˆå¯¹è±¡ä»åå°å‘å‰å°ä¼ é€’æ•°æ®çš„ï¼Ÿ\" class=\"headerlink\" title=\"Spring MVCç”¨ä»€ä¹ˆå¯¹è±¡ä»åå°å‘å‰å°ä¼ é€’æ•°æ®çš„ï¼Ÿ\"></a>Spring MVCç”¨ä»€ä¹ˆå¯¹è±¡ä»åå°å‘å‰å°ä¼ é€’æ•°æ®çš„ï¼Ÿ</h3><p>é€šè¿‡ModelMapå¯¹è±¡,å¯ä»¥åœ¨è¿™ä¸ªå¯¹è±¡é‡Œé¢è°ƒç”¨putæ–¹æ³•,æŠŠå¯¹è±¡åŠ åˆ°é‡Œé¢,å‰å°å°±å¯ä»¥é€šè¿‡elè¡¨è¾¾å¼æ‹¿åˆ°ã€‚</p>\n<h3 id=\"æ€ä¹ˆæ ·æŠŠModelMapé‡Œé¢çš„æ•°æ®æ”¾å…¥Sessioné‡Œé¢ï¼Ÿ\"><a href=\"#æ€ä¹ˆæ ·æŠŠModelMapé‡Œé¢çš„æ•°æ®æ”¾å…¥Sessioné‡Œé¢ï¼Ÿ\" class=\"headerlink\" title=\"æ€ä¹ˆæ ·æŠŠModelMapé‡Œé¢çš„æ•°æ®æ”¾å…¥Sessioné‡Œé¢ï¼Ÿ\"></a>æ€ä¹ˆæ ·æŠŠModelMapé‡Œé¢çš„æ•°æ®æ”¾å…¥Sessioné‡Œé¢ï¼Ÿ</h3><p>å¯ä»¥åœ¨ç±»ä¸Šé¢åŠ ä¸Š@SessionAttributesæ³¨è§£,é‡Œé¢åŒ…å«çš„å­—ç¬¦ä¸²å°±æ˜¯è¦æ”¾å…¥sessioné‡Œé¢çš„keyã€‚</p>\n<h3 id=\"Spring-MVCé‡Œé¢æ‹¦æˆªå™¨æ˜¯æ€ä¹ˆå†™çš„\"><a href=\"#Spring-MVCé‡Œé¢æ‹¦æˆªå™¨æ˜¯æ€ä¹ˆå†™çš„\" class=\"headerlink\" title=\"Spring MVCé‡Œé¢æ‹¦æˆªå™¨æ˜¯æ€ä¹ˆå†™çš„\"></a>Spring MVCé‡Œé¢æ‹¦æˆªå™¨æ˜¯æ€ä¹ˆå†™çš„</h3><p>æœ‰ä¸¤ç§å†™æ³•,ä¸€ç§æ˜¯å®ç°HandlerInterceptoræ¥å£ï¼Œé‡å†™prehandleç­‰æ–¹æ³•ï¼Œç„¶åé…ç½®æ‹¦æˆªå™¨</p>\n","site":{"data":{}},"length":5011,"excerpt":"<blockquote>\n<p>æ•´ç†çš„SpringMVCç›¸å…³çŸ¥è¯†ç‚¹å’Œé¢è¯•é¢˜ï¼Œéƒ¨åˆ†å†…å®¹æ‘˜è‡ªç½‘ç»œï¼Œå¦‚æœ‰ä¾µæƒè¯·è”ç³»æˆ‘ï½","more":"</p>\n</blockquote>\n<h2 id=\"æ¦‚è¿°\"><a href=\"#æ¦‚è¿°\" class=\"headerlink\" title=\"æ¦‚è¿°\"></a>æ¦‚è¿°</h2><h3 id=\"ä»€ä¹ˆæ˜¯Spring-MVCï¼Ÿç®€å•ä»‹ç»ä¸‹ä½ å¯¹Spring-MVCçš„ç†è§£ï¼Ÿ\"><a href=\"#ä»€ä¹ˆæ˜¯Spring-MVCï¼Ÿç®€å•ä»‹ç»ä¸‹ä½ å¯¹Spring-MVCçš„ç†è§£ï¼Ÿ\" class=\"headerlink\" title=\"ä»€ä¹ˆæ˜¯Spring MVCï¼Ÿç®€å•ä»‹ç»ä¸‹ä½ å¯¹Spring MVCçš„ç†è§£ï¼Ÿ\"></a>ä»€ä¹ˆæ˜¯Spring MVCï¼Ÿç®€å•ä»‹ç»ä¸‹ä½ å¯¹Spring MVCçš„ç†è§£ï¼Ÿ</h3><p>Spring MVCæ˜¯ä¸€ä¸ªåŸºäºJavaçš„å®ç°äº†MVCè®¾è®¡æ¨¡å¼çš„è¯·æ±‚é©±åŠ¨ç±»å‹çš„è½»é‡çº§Webæ¡†æ¶ï¼Œé€šè¿‡æŠŠæ¨¡å‹-è§†å›¾-æ§åˆ¶å™¨åˆ†ç¦»ï¼Œå°†webå±‚è¿›è¡ŒèŒè´£è§£è€¦ï¼Œç®€åŒ–å¼€å‘ã€‚</p>\n<h2 id=\"æ ¸å¿ƒç»„ä»¶\"><a href=\"#æ ¸å¿ƒç»„ä»¶\" class=\"headerlink\" title=\"æ ¸å¿ƒç»„ä»¶\"></a>æ ¸å¿ƒç»„ä»¶</h2><h3 id=\"Spring-MVCçš„ä¸»è¦ç»„ä»¶ï¼Ÿ\"><a href=\"#Spring-MVCçš„ä¸»è¦ç»„ä»¶ï¼Ÿ\" class=\"headerlink\" title=\"Spring MVCçš„ä¸»è¦ç»„ä»¶ï¼Ÿ\"></a>Spring MVCçš„ä¸»è¦ç»„ä»¶ï¼Ÿ</h3><p>ï¼ˆ1ï¼‰å‰ç«¯æ§åˆ¶å™¨ DispatcherServletï¼ˆä¸éœ€è¦ç¨‹åºå‘˜å¼€å‘ï¼‰</p>\n<p>ä½œç”¨ï¼šæ¥æ”¶è¯·æ±‚ã€å“åº”ç»“æœï¼Œç›¸å½“äºè½¬å‘å™¨ï¼Œæœ‰äº†DispatcherServlet å°±å‡å°‘äº†å…¶å®ƒç»„ä»¶ä¹‹é—´çš„è€¦åˆåº¦ã€‚</p>\n<p>ï¼ˆ2ï¼‰å¤„ç†å™¨æ˜ å°„å™¨HandlerMappingï¼ˆä¸éœ€è¦ç¨‹åºå‘˜å¼€å‘ï¼‰</p>\n<p>ä½œç”¨ï¼šæ ¹æ®è¯·æ±‚çš„URLæ¥æŸ¥æ‰¾Handler</p>\n<p>ï¼ˆ3ï¼‰å¤„ç†å™¨é€‚é…å™¨HandlerAdapter</p>\n<p>æ³¨æ„ï¼šåœ¨ç¼–å†™Handlerçš„æ—¶å€™è¦æŒ‰ç…§HandlerAdapterè¦æ±‚çš„è§„åˆ™å»ç¼–å†™ï¼Œè¿™æ ·é€‚é…å™¨HandlerAdapteræ‰å¯ä»¥æ­£ç¡®çš„å»æ‰§è¡ŒHandlerã€‚</p>\n<p>ï¼ˆ4ï¼‰å¤„ç†å™¨Handlerï¼ˆéœ€è¦ç¨‹åºå‘˜å¼€å‘ï¼‰</p>\n<p>ï¼ˆ5ï¼‰è§†å›¾è§£æå™¨ ViewResolverï¼ˆä¸éœ€è¦ç¨‹åºå‘˜å¼€å‘ï¼‰</p>\n<p>ä½œç”¨ï¼šè¿›è¡Œè§†å›¾çš„è§£æï¼Œæ ¹æ®è§†å›¾é€»è¾‘åè§£ææˆçœŸæ­£çš„è§†å›¾ï¼ˆviewï¼‰</p>\n<p>ï¼ˆ6ï¼‰è§†å›¾Viewï¼ˆéœ€è¦ç¨‹åºå‘˜å¼€å‘jspï¼‰</p>\n<p>Viewæ˜¯ä¸€ä¸ªæ¥å£ï¼Œ å®ƒçš„å®ç°ç±»æ”¯æŒä¸åŒçš„è§†å›¾ç±»å‹ï¼ˆjspï¼Œfreemarkerï¼Œpdfç­‰ç­‰ï¼‰</p>\n<h3 id=\"ä»€ä¹ˆæ˜¯DispatcherServlet\"><a href=\"#ä»€ä¹ˆæ˜¯DispatcherServlet\" class=\"headerlink\" title=\"ä»€ä¹ˆæ˜¯DispatcherServlet\"></a>ä»€ä¹ˆæ˜¯DispatcherServlet</h3><p>Springçš„MVCæ¡†æ¶æ˜¯å›´ç»•DispatcherServletæ¥è®¾è®¡çš„ï¼Œå®ƒç”¨æ¥å¤„ç†æ‰€æœ‰çš„HTTPè¯·æ±‚å’Œå“åº”ã€‚</p>\n<h3 id=\"ä»€ä¹ˆæ˜¯Spring-MVCæ¡†æ¶çš„æ§åˆ¶å™¨ï¼Ÿ\"><a href=\"#ä»€ä¹ˆæ˜¯Spring-MVCæ¡†æ¶çš„æ§åˆ¶å™¨ï¼Ÿ\" class=\"headerlink\" title=\"ä»€ä¹ˆæ˜¯Spring MVCæ¡†æ¶çš„æ§åˆ¶å™¨ï¼Ÿ\"></a>ä»€ä¹ˆæ˜¯Spring MVCæ¡†æ¶çš„æ§åˆ¶å™¨ï¼Ÿ</h3><p>æ§åˆ¶å™¨ä½¿ç”¨@Controlleræ³¨è§£ï¼Œå¹¶ä¸”æä¾›äº†@RequestMappingæ³¨è§£ï¼Œé€šè¿‡è§£æurlä¸­çš„è·¯å¾„ï¼Œå¯ä»¥æ‰¾åˆ°ç›¸åº”çš„æ§åˆ¶å™¨è¿›è¡Œé€»è¾‘å¤„ç†ï¼Œå“åº”æ•°æ®ç­‰ã€‚</p>\n<h3 id=\"Spring-MVCçš„æ§åˆ¶å™¨æ˜¯ä¸æ˜¯å•ä¾‹æ¨¡å¼-å¦‚æœæ˜¯-æœ‰ä»€ä¹ˆé—®é¢˜-æ€ä¹ˆè§£å†³ï¼Ÿ\"><a href=\"#Spring-MVCçš„æ§åˆ¶å™¨æ˜¯ä¸æ˜¯å•ä¾‹æ¨¡å¼-å¦‚æœæ˜¯-æœ‰ä»€ä¹ˆé—®é¢˜-æ€ä¹ˆè§£å†³ï¼Ÿ\" class=\"headerlink\" title=\"Spring MVCçš„æ§åˆ¶å™¨æ˜¯ä¸æ˜¯å•ä¾‹æ¨¡å¼,å¦‚æœæ˜¯,æœ‰ä»€ä¹ˆé—®é¢˜,æ€ä¹ˆè§£å†³ï¼Ÿ\"></a>Spring MVCçš„æ§åˆ¶å™¨æ˜¯ä¸æ˜¯å•ä¾‹æ¨¡å¼,å¦‚æœæ˜¯,æœ‰ä»€ä¹ˆé—®é¢˜,æ€ä¹ˆè§£å†³ï¼Ÿ</h3><p>å•ä¾‹æ¨¡å¼,æ‰€ä»¥åœ¨å¤šçº¿ç¨‹è®¿é—®çš„æ—¶å€™æœ‰çº¿ç¨‹å®‰å…¨é—®é¢˜,ä¸è¦ç”¨åŒæ­¥,ä¼šå½±å“æ€§èƒ½çš„ï¼Œè§£å†³æ–¹æ¡ˆæ˜¯åœ¨æ§åˆ¶å™¨ä¿æŒæ§åˆ¶å™¨æ— çŠ¶æ€ï¼ˆä¸è¦å†™å­—æ®µï¼‰ã€‚</p>\n<h2 id=\"å·¥ä½œåŸç†\"><a href=\"#å·¥ä½œåŸç†\" class=\"headerlink\" title=\"å·¥ä½œåŸç†\"></a>å·¥ä½œåŸç†</h2><h3 id=\"è¯·æè¿°Spring-MVCçš„å·¥ä½œæµç¨‹ï¼Ÿæè¿°ä¸€ä¸‹-DispatcherServlet-çš„å·¥ä½œæµç¨‹ï¼Ÿ\"><a href=\"#è¯·æè¿°Spring-MVCçš„å·¥ä½œæµç¨‹ï¼Ÿæè¿°ä¸€ä¸‹-DispatcherServlet-çš„å·¥ä½œæµç¨‹ï¼Ÿ\" class=\"headerlink\" title=\"è¯·æè¿°Spring MVCçš„å·¥ä½œæµç¨‹ï¼Ÿæè¿°ä¸€ä¸‹ DispatcherServlet çš„å·¥ä½œæµç¨‹ï¼Ÿ\"></a>è¯·æè¿°Spring MVCçš„å·¥ä½œæµç¨‹ï¼Ÿæè¿°ä¸€ä¸‹ DispatcherServlet çš„å·¥ä½œæµç¨‹ï¼Ÿ</h3><ol>\n<li>ç”¨æˆ·å‘é€è¯·æ±‚è‡³å‰ç«¯æ§åˆ¶å™¨DispatcherServletï¼›</li>\n<li>DispatcherServletæ”¶åˆ°è¯·æ±‚åï¼Œè°ƒç”¨HandlerMappingå¤„ç†å™¨æ˜ å°„å™¨ï¼Œè¯·æ±‚è·å–Handlerï¼›</li>\n<li>HandlerMappingå¤„ç†å™¨æ˜ å°„å™¨æ ¹æ®è¯·æ±‚url<strong>æ‰¾åˆ°å…·ä½“çš„å¤„ç†å™¨</strong>ï¼Œç”Ÿæˆå¤„ç†å™¨å¯¹è±¡åŠå¤„ç†å™¨æ‹¦æˆªå™¨(å¦‚æœæœ‰åˆ™ç”Ÿæˆ)ä¸€å¹¶è¿”å›ç»™DispatcherServletï¼›</li>\n<li>DispatcherServlet è°ƒç”¨ HandlerAdapterå¤„ç†å™¨é€‚é…å™¨ï¼›</li>\n<li>HandlerAdapter ç»è¿‡é€‚é… <strong>è°ƒç”¨å…·ä½“å¤„ç†å™¨</strong>(Handlerï¼Œä¹Ÿå«åç«¯æ§åˆ¶å™¨)ï¼›</li>\n<li>Handleræ‰§è¡Œå®Œæˆè¿”å›ModelAndViewï¼›</li>\n<li>HandlerAdapterå°†Handleræ‰§è¡Œç»“æœModelAndViewè¿”å›ç»™DispatcherServletï¼›</li>\n<li>DispatcherServletå°†ModelAndViewä¼ ç»™ViewResolverè§†å›¾è§£æå™¨è¿›è¡Œè§£æï¼›</li>\n<li>ViewResolverè§£æåè¿”å›å…·ä½“Viewï¼›</li>\n<li>DispatcherServletå¯¹Viewè¿›è¡Œæ¸²æŸ“æˆä¸ºè§†å›¾ï¼ˆå³å°†æ¨¡å‹æ•°æ®å¡«å……è‡³è§†å›¾ä¸­ï¼‰ï¼›</li>\n<li>DispatcherServletå“åº”ç”¨æˆ·ã€‚</li>\n</ol>\n<p><img src=\"https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/TyporaNotes20200208211439106.png\" alt=\"Spring MVCçš„å·¥ä½œæµç¨‹\"></p>\n<h2 id=\"å¸¸ç”¨æ³¨è§£\"><a href=\"#å¸¸ç”¨æ³¨è§£\" class=\"headerlink\" title=\"å¸¸ç”¨æ³¨è§£\"></a>å¸¸ç”¨æ³¨è§£</h2><h3 id=\"æ³¨è§£åŸç†æ˜¯ä»€ä¹ˆ\"><a href=\"#æ³¨è§£åŸç†æ˜¯ä»€ä¹ˆ\" class=\"headerlink\" title=\"æ³¨è§£åŸç†æ˜¯ä»€ä¹ˆ\"></a>æ³¨è§£åŸç†æ˜¯ä»€ä¹ˆ</h3><p>æ³¨è§£æœ¬è´¨æ˜¯ä¸€ä¸ªç»§æ‰¿äº†Annotationçš„ç‰¹æ®Šæ¥å£ï¼Œå…¶å…·ä½“å®ç°ç±»æ˜¯Javaè¿è¡Œæ—¶ç”Ÿæˆçš„åŠ¨æ€ä»£ç†ç±»ã€‚æˆ‘ä»¬é€šè¿‡åå°„è·å–æ³¨è§£æ—¶ï¼Œè¿”å›çš„æ˜¯Javaè¿è¡Œæ—¶ç”Ÿæˆçš„åŠ¨æ€ä»£ç†å¯¹è±¡ã€‚é€šè¿‡ä»£ç†å¯¹è±¡è°ƒç”¨è‡ªå®šä¹‰æ³¨è§£çš„æ–¹æ³•ã€‚</p>\n<h3 id=\"Spring-MVCå¸¸ç”¨çš„æ³¨è§£æœ‰å“ªäº›ï¼Ÿ\"><a href=\"#Spring-MVCå¸¸ç”¨çš„æ³¨è§£æœ‰å“ªäº›ï¼Ÿ\" class=\"headerlink\" title=\"Spring MVCå¸¸ç”¨çš„æ³¨è§£æœ‰å“ªäº›ï¼Ÿ\"></a>Spring MVCå¸¸ç”¨çš„æ³¨è§£æœ‰å“ªäº›ï¼Ÿ</h3><p>@RequestMappingï¼šç”¨äºå¤„ç†è¯·æ±‚ url æ˜ å°„çš„æ³¨è§£ï¼Œå¯ç”¨äºç±»æˆ–æ–¹æ³•ä¸Šã€‚ç”¨äºç±»ä¸Šï¼Œåˆ™è¡¨ç¤ºç±»ä¸­çš„æ‰€æœ‰å“åº”è¯·æ±‚çš„æ–¹æ³•éƒ½æ˜¯ä»¥è¯¥åœ°å€ä½œä¸ºçˆ¶è·¯å¾„ã€‚</p>\n<p>@RequestBodyï¼šæ³¨è§£å®ç°æ¥æ”¶httpè¯·æ±‚çš„jsonæ•°æ®ï¼Œå°†jsonè½¬æ¢ä¸ºjavaå¯¹è±¡ã€‚</p>\n<p>@ResponseBodyï¼šæ³¨è§£å®ç°å°†controlleræ–¹æ³•è¿”å›å¯¹è±¡è½¬åŒ–ä¸ºjsonå¯¹è±¡å“åº”ç»™å®¢æˆ·ã€‚</p>\n<h3 id=\"Sping-MVCä¸­çš„æ§åˆ¶å™¨çš„æ³¨è§£ä¸€èˆ¬ç”¨å“ªä¸ª-æœ‰æ²¡æœ‰åˆ«çš„æ³¨è§£å¯ä»¥æ›¿ä»£ï¼Ÿ\"><a href=\"#Sping-MVCä¸­çš„æ§åˆ¶å™¨çš„æ³¨è§£ä¸€èˆ¬ç”¨å“ªä¸ª-æœ‰æ²¡æœ‰åˆ«çš„æ³¨è§£å¯ä»¥æ›¿ä»£ï¼Ÿ\" class=\"headerlink\" title=\"Sping MVCä¸­çš„æ§åˆ¶å™¨çš„æ³¨è§£ä¸€èˆ¬ç”¨å“ªä¸ª,æœ‰æ²¡æœ‰åˆ«çš„æ³¨è§£å¯ä»¥æ›¿ä»£ï¼Ÿ\"></a>Sping MVCä¸­çš„æ§åˆ¶å™¨çš„æ³¨è§£ä¸€èˆ¬ç”¨å“ªä¸ª,æœ‰æ²¡æœ‰åˆ«çš„æ³¨è§£å¯ä»¥æ›¿ä»£ï¼Ÿ</h3><p>ç­”ï¼šä¸€èˆ¬ç”¨@Controlleræ³¨è§£ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨@RestControllerï¼Œ@RestControlleræ³¨è§£ç›¸å½“äº@ResponseBody ï¼‹ @Controllerï¼Œ@ResponseBody ç”¨äºè¿”å›jsonæ•°æ®ï¼‹ @Controller ç”¨äºè¡¨æ˜æ§åˆ¶å™¨</p>\n<h3 id=\"Controlleræ³¨è§£çš„ä½œç”¨\"><a href=\"#Controlleræ³¨è§£çš„ä½œç”¨\" class=\"headerlink\" title=\"@Controlleræ³¨è§£çš„ä½œç”¨\"></a>@Controlleræ³¨è§£çš„ä½œç”¨</h3><p>@Controller ç”¨äºæ ‡è®°åœ¨ä¸€ä¸ªç±»ä¸Šï¼Œä½¿ç”¨å®ƒæ ‡è®°çš„ç±»å°±æ˜¯ä¸€ä¸ªSpring MVC Controller å¯¹è±¡ã€‚é€šè¿‡è¯·æ±‚çš„urlå’Œ@RequestMapping æ³¨è§£å¯¹åº”åˆ°å®é™…å¤„ç†è¯·æ±‚çš„å¤„ç†å™¨ã€‚éœ€è¦å¼€å¯mvcæ³¨è§£æ‰«ææ‰¾åˆ°@Controllerçš„æ§åˆ¶å™¨ã€‚</p>\n<h3 id=\"RequestMappingæ³¨è§£çš„ä½œç”¨\"><a href=\"#RequestMappingæ³¨è§£çš„ä½œç”¨\" class=\"headerlink\" title=\"@RequestMappingæ³¨è§£çš„ä½œç”¨\"></a>@RequestMappingæ³¨è§£çš„ä½œç”¨</h3><p>RequestMappingæ˜¯ä¸€ä¸ªç”¨æ¥å¤„ç†è¯·æ±‚åœ°å€æ˜ å°„çš„æ³¨è§£ï¼Œå¯ç”¨äºç±»æˆ–æ–¹æ³•ä¸Šã€‚</p>\n<p>ç”¨äºç±»ä¸Šï¼Œè¡¨ç¤ºç±»ä¸­çš„æ‰€æœ‰å“åº”è¯·æ±‚çš„æ–¹æ³•éƒ½æ˜¯ä»¥è¯¥åœ°å€ä½œä¸ºçˆ¶è·¯å¾„ã€‚</p>\n<p>RequestMappingæ³¨è§£æœ‰å…­ä¸ªå±æ€§ï¼š</p>\n<p><strong>path&#x2F;valueï¼Œ method</strong></p>\n<ul>\n<li><p>valueï¼š æŒ‡å®šè¯·æ±‚çš„å®é™…åœ°å€ï¼ŒæŒ‡å®šçš„åœ°å€å¯ä»¥æ˜¯URI Template æ¨¡å¼ï¼ˆåé¢å°†ä¼šè¯´æ˜ï¼‰ï¼›</p>\n</li>\n<li><p>methodï¼š æŒ‡å®šè¯·æ±‚çš„methodç±»å‹ï¼Œ GETã€POSTã€PUTã€DELETEç­‰ï¼›</p>\n</li>\n</ul>\n<p><strong>consumesï¼Œproduces</strong></p>\n<ul>\n<li><p>consumesï¼š æŒ‡å®šå¤„ç†è¯·æ±‚çš„æäº¤å†…å®¹ç±»å‹ï¼ˆContent-Typeï¼‰ï¼Œä¾‹å¦‚application&#x2F;json, text&#x2F;html;</p>\n</li>\n<li><p>produces: æŒ‡å®šè¿”å›çš„å†…å®¹ç±»å‹ï¼Œä»…å½“requestè¯·æ±‚å¤´ä¸­çš„(Accept)ç±»å‹ä¸­åŒ…å«è¯¥æŒ‡å®šç±»å‹æ‰è¿”å›ï¼›</p>\n</li>\n</ul>\n<p><strong>paramsï¼Œheaders</strong></p>\n<ul>\n<li><p>paramsï¼š æŒ‡å®šrequestä¸­å¿…é¡»åŒ…å«æŸäº›å‚æ•°å€¼æ—¶ï¼Œæ‰è®©è¯¥æ–¹æ³•å¤„ç†ã€‚</p>\n</li>\n<li><p>headersï¼š æŒ‡å®šrequestä¸­å¿…é¡»åŒ…å«æŸäº›æŒ‡å®šçš„headerå€¼ï¼Œæ‰èƒ½è®©è¯¥æ–¹æ³•å¤„ç†è¯·æ±‚ã€‚</p>\n</li>\n</ul>\n<h3 id=\"PathVariableå’Œ-RequestParamçš„åŒºåˆ«\"><a href=\"#PathVariableå’Œ-RequestParamçš„åŒºåˆ«\" class=\"headerlink\" title=\"@PathVariableå’Œ@RequestParamçš„åŒºåˆ«\"></a>@PathVariableå’Œ@RequestParamçš„åŒºåˆ«</h3><p>@PathVariableä½œç”¨ï¼š ç”¨äºç»‘å®šurlä¸­çš„å ä½ç¬¦ã€‚ä¾‹å¦‚ï¼šè¯·æ±‚urlä¸­ &#x2F;delete&#x2F;{id}ï¼Œè¿™ä¸ª{id}å°±æ˜¯urlå ä½ç¬¦ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">* æ ¹æ®path /anno/testPathVariable/10 æ‰¾åˆ° testPathVariable æ–¹æ³•</span></span><br><span class=\"line\"><span class=\"comment\">* ç„¶åï¼Œå…¶ä¸­çš„10å°±æ˜¯sidå ä½ç¬¦æ‰€å çš„ä½ç½®çš„æ•°æ®ï¼Œç„¶åé€šè¿‡<span class=\"doctag\">@PathVaribale</span>æ³¨è§£å°†å…¶èµ‹å€¼ç»™ id</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\"><span class=\"meta\">@RequestMapping(path = &quot;testPathVariable/&#123;sid&#125;&quot;)</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> String <span class=\"title function_\">testPathVariable</span><span class=\"params\">(<span class=\"meta\">@PathVariable(value = &quot;sid&quot;)</span> String id)</span> &#123;</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;æ‰§è¡Œäº†testPathVariable...&quot;</span>);</span><br><span class=\"line\">    System.out.println(id);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">&quot;success&quot;</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>@RequestParamä½œç”¨ï¼š æŠŠè¯·æ±‚ä¸­æŒ‡å®šåç§°çš„å‚æ•°ç»™æ§åˆ¶å™¨ä¸­çš„å½¢å‚èµ‹å€¼ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// Controllerä¸­çš„ä»£ç ï¼š</span></span><br><span class=\"line\"><span class=\"meta\">@RequestMapping(path = &quot;/testRequestParam&quot;)</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> String <span class=\"title function_\">testRequestParam</span><span class=\"params\">(<span class=\"meta\">@RequestParam(value = &quot;name&quot;)</span> String username)</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// æŠŠè¯·æ±‚ä¸­æŒ‡å®šçš„nameèµ‹å€¼ç»™æ§åˆ¶å™¨ä¸­çš„å½¢å‚username</span></span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;æ‰§è¡Œäº†testRequestParam...&quot;</span>);</span><br><span class=\"line\">    System.out.println(username);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">&quot;success&quot;</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"å…¶ä»–\"><a href=\"#å…¶ä»–\" class=\"headerlink\" title=\"å…¶ä»–\"></a>å…¶ä»–</h2><h3 id=\"Spring-MVCæ€ä¹ˆæ ·è®¾å®šè½¬å‘å’Œé‡å®šå‘çš„ï¼Ÿ\"><a href=\"#Spring-MVCæ€ä¹ˆæ ·è®¾å®šè½¬å‘å’Œé‡å®šå‘çš„ï¼Ÿ\" class=\"headerlink\" title=\"Spring MVCæ€ä¹ˆæ ·è®¾å®šè½¬å‘å’Œé‡å®šå‘çš„ï¼Ÿ\"></a>Spring MVCæ€ä¹ˆæ ·è®¾å®šè½¬å‘å’Œé‡å®šå‘çš„ï¼Ÿ</h3><p>ï¼ˆ1ï¼‰è½¬å‘ï¼šä½¿ç”¨forward<br>forwardæ˜¯æŒ‡å†…éƒ¨è½¬å‘ï¼Œç›¸å½“äºæœåŠ¡å™¨å†…éƒ¨æ–¹æ³•è·³è½¬è°ƒç”¨ã€‚è¯·æ±‚ä¸€æ¬¡æœåŠ¡å™¨ã€‚è½¬å‘åœ°å€ä¸å˜ã€‚</p>\n<p>ï¼ˆ2ï¼‰é‡å®šå‘ï¼šä½¿ç”¨redirect<br>é‡å®šå‘æ˜¯æŒ‡å½“æµè§ˆå™¨è¯·æ±‚ä¸€ä¸ªURLæ—¶ï¼ŒæœåŠ¡å™¨è¿”å›ä¸€ä¸ªé‡å®šå‘æŒ‡ä»¤ï¼Œå‘Šè¯‰æµè§ˆå™¨åœ°å€å·²ç»å˜äº†ï¼Œéº»çƒ¦ä½¿ç”¨æ–°çš„URLå†é‡æ–°å‘é€æ–°è¯·æ±‚ã€‚è¯·æ±‚ä¸¤æ¬¡æœåŠ¡å™¨ã€‚é‡å®šå‘åœ°å€æ”¹å˜ã€‚</p>\n<h3 id=\"Spring-MVCæ€ä¹ˆå’ŒAJAXç›¸äº’è°ƒç”¨çš„ï¼Ÿ\"><a href=\"#Spring-MVCæ€ä¹ˆå’ŒAJAXç›¸äº’è°ƒç”¨çš„ï¼Ÿ\" class=\"headerlink\" title=\"Spring MVCæ€ä¹ˆå’ŒAJAXç›¸äº’è°ƒç”¨çš„ï¼Ÿ\"></a>Spring MVCæ€ä¹ˆå’ŒAJAXç›¸äº’è°ƒç”¨çš„ï¼Ÿ</h3><p>é€šè¿‡Jacksonæˆ–è€…æ˜¯fastjsonå°±å¯ä»¥æŠŠJavaé‡Œé¢çš„å¯¹è±¡ç›´æ¥è½¬åŒ–æˆJså¯ä»¥è¯†åˆ«çš„Jsonå¯¹è±¡ï¼Œæ¥è¿›è¡Œä¼ è¾“ã€‚</p>\n<h3 id=\"å¦‚ä½•è§£å†³POSTè¯·æ±‚ä¸­æ–‡ä¹±ç é—®é¢˜ï¼ŒGETçš„åˆå¦‚ä½•å¤„ç†å‘¢ï¼Ÿ\"><a href=\"#å¦‚ä½•è§£å†³POSTè¯·æ±‚ä¸­æ–‡ä¹±ç é—®é¢˜ï¼ŒGETçš„åˆå¦‚ä½•å¤„ç†å‘¢ï¼Ÿ\" class=\"headerlink\" title=\"å¦‚ä½•è§£å†³POSTè¯·æ±‚ä¸­æ–‡ä¹±ç é—®é¢˜ï¼ŒGETçš„åˆå¦‚ä½•å¤„ç†å‘¢ï¼Ÿ\"></a>å¦‚ä½•è§£å†³POSTè¯·æ±‚ä¸­æ–‡ä¹±ç é—®é¢˜ï¼ŒGETçš„åˆå¦‚ä½•å¤„ç†å‘¢ï¼Ÿ</h3><p>ï¼ˆ1ï¼‰è§£å†³postè¯·æ±‚ä¹±ç é—®é¢˜ï¼š</p>\n<p>åœ¨web.xmlä¸­é…ç½®ä¸€ä¸ªCharacterEncodingFilterè¿‡æ»¤å™¨ï¼Œè®¾ç½®æˆutf-8ï¼›</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">filter</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">filter-name</span>&gt;</span>CharacterEncodingFilter<span class=\"tag\">&lt;/<span class=\"name\">filter-name</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">filter-class</span>&gt;</span>org.springframework.web.filter.CharacterEncodingFilter<span class=\"tag\">&lt;/<span class=\"name\">filter-class</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">init-param</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">param-name</span>&gt;</span>encoding<span class=\"tag\">&lt;/<span class=\"name\">param-name</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">param-value</span>&gt;</span>utf-8<span class=\"tag\">&lt;/<span class=\"name\">param-value</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">init-param</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">filter</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">filter-mapping</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">filter-name</span>&gt;</span>CharacterEncodingFilter<span class=\"tag\">&lt;/<span class=\"name\">filter-name</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">url-pattern</span>&gt;</span>/*<span class=\"tag\">&lt;/<span class=\"name\">url-pattern</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">filter-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>ï¼ˆ2ï¼‰getè¯·æ±‚ä¸­æ–‡å‚æ•°å‡ºç°ä¹±ç è§£å†³æ–¹æ³•æœ‰ä¸¤ä¸ªï¼š</p>\n<p>ä¿®æ”¹tomcaté…ç½®æ–‡ä»¶æ·»åŠ ç¼–ç ä¸å·¥ç¨‹ç¼–ç ä¸€è‡´ï¼Œå¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;ConnectorURIEncoding=&quot;utf-8&quot; connectionTimeout=&quot;20000&quot; port=&quot;8080&quot; protocol=&quot;HTTP/1.1&quot; redirectPort=&quot;8443&quot;/&gt;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Spring-MVCçš„å¼‚å¸¸å¤„ç†\"><a href=\"#Spring-MVCçš„å¼‚å¸¸å¤„ç†\" class=\"headerlink\" title=\"Spring MVCçš„å¼‚å¸¸å¤„ç†\"></a>Spring MVCçš„å¼‚å¸¸å¤„ç†</h3><p>å¯ä»¥å°†å¼‚å¸¸æŠ›ç»™Springæ¡†æ¶ï¼Œç”±Springæ¡†æ¶æ¥å¤„ç†ï¼›æˆ‘ä»¬åªéœ€è¦é…ç½®ç®€å•çš„å¼‚å¸¸å¤„ç†å™¨ï¼Œåœ¨å¼‚å¸¸å¤„ç†å™¨ä¸­æ·»è§†å›¾é¡µé¢å³å¯ã€‚</p>\n<h3 id=\"å¦‚æœåœ¨æ‹¦æˆªè¯·æ±‚ä¸­ï¼Œæˆ‘æƒ³æ‹¦æˆªgetæ–¹å¼æäº¤çš„æ–¹æ³•-æ€ä¹ˆé…ç½®\"><a href=\"#å¦‚æœåœ¨æ‹¦æˆªè¯·æ±‚ä¸­ï¼Œæˆ‘æƒ³æ‹¦æˆªgetæ–¹å¼æäº¤çš„æ–¹æ³•-æ€ä¹ˆé…ç½®\" class=\"headerlink\" title=\"å¦‚æœåœ¨æ‹¦æˆªè¯·æ±‚ä¸­ï¼Œæˆ‘æƒ³æ‹¦æˆªgetæ–¹å¼æäº¤çš„æ–¹æ³•,æ€ä¹ˆé…ç½®\"></a>å¦‚æœåœ¨æ‹¦æˆªè¯·æ±‚ä¸­ï¼Œæˆ‘æƒ³æ‹¦æˆªgetæ–¹å¼æäº¤çš„æ–¹æ³•,æ€ä¹ˆé…ç½®</h3><p>ç­”ï¼šå¯ä»¥åœ¨@RequestMappingæ³¨è§£é‡Œé¢åŠ ä¸Šmethod&#x3D;RequestMethod.GETã€‚</p>\n<h3 id=\"æ€æ ·åœ¨æ–¹æ³•é‡Œé¢å¾—åˆ°Request-æˆ–è€…Sessionï¼Ÿ\"><a href=\"#æ€æ ·åœ¨æ–¹æ³•é‡Œé¢å¾—åˆ°Request-æˆ–è€…Sessionï¼Ÿ\" class=\"headerlink\" title=\"æ€æ ·åœ¨æ–¹æ³•é‡Œé¢å¾—åˆ°Request,æˆ–è€…Sessionï¼Ÿ\"></a>æ€æ ·åœ¨æ–¹æ³•é‡Œé¢å¾—åˆ°Request,æˆ–è€…Sessionï¼Ÿ</h3><p>ç­”ï¼šç›´æ¥åœ¨æ–¹æ³•çš„å½¢å‚ä¸­å£°æ˜request,Spring MVCå°±è‡ªåŠ¨æŠŠrequestå¯¹è±¡ä¼ å…¥ã€‚</p>\n<h3 id=\"å¦‚æœæƒ³åœ¨æ‹¦æˆªçš„æ–¹æ³•é‡Œé¢å¾—åˆ°ä»å‰å°ä¼ å…¥çš„å‚æ•°-æ€ä¹ˆå¾—åˆ°ï¼Ÿ\"><a href=\"#å¦‚æœæƒ³åœ¨æ‹¦æˆªçš„æ–¹æ³•é‡Œé¢å¾—åˆ°ä»å‰å°ä¼ å…¥çš„å‚æ•°-æ€ä¹ˆå¾—åˆ°ï¼Ÿ\" class=\"headerlink\" title=\"å¦‚æœæƒ³åœ¨æ‹¦æˆªçš„æ–¹æ³•é‡Œé¢å¾—åˆ°ä»å‰å°ä¼ å…¥çš„å‚æ•°,æ€ä¹ˆå¾—åˆ°ï¼Ÿ\"></a>å¦‚æœæƒ³åœ¨æ‹¦æˆªçš„æ–¹æ³•é‡Œé¢å¾—åˆ°ä»å‰å°ä¼ å…¥çš„å‚æ•°,æ€ä¹ˆå¾—åˆ°ï¼Ÿ</h3><p>ç›´æ¥åœ¨å½¢å‚é‡Œé¢å£°æ˜è¿™ä¸ªå‚æ•°å°±å¯ä»¥,ä½†å¿…é¡»åå­—å’Œä¼ è¿‡æ¥çš„å‚æ•°ä¸€æ ·ã€‚<br>æˆ–è€…ä½¿ç”¨ RequestParamæ³¨è§£å°†å‰å°çš„å‚æ•°åAä¼ ç»™å½¢å‚ä¸­çš„å‚æ•°B</p>\n<h3 id=\"å¦‚æœå‰å°æœ‰å¾ˆå¤šä¸ªå‚æ•°ä¼ å…¥-å¹¶ä¸”è¿™äº›å‚æ•°éƒ½æ˜¯ä¸€ä¸ªå¯¹è±¡çš„-é‚£ä¹ˆæ€ä¹ˆæ ·å¿«é€Ÿå¾—åˆ°è¿™ä¸ªå¯¹è±¡ï¼Ÿ\"><a href=\"#å¦‚æœå‰å°æœ‰å¾ˆå¤šä¸ªå‚æ•°ä¼ å…¥-å¹¶ä¸”è¿™äº›å‚æ•°éƒ½æ˜¯ä¸€ä¸ªå¯¹è±¡çš„-é‚£ä¹ˆæ€ä¹ˆæ ·å¿«é€Ÿå¾—åˆ°è¿™ä¸ªå¯¹è±¡ï¼Ÿ\" class=\"headerlink\" title=\"å¦‚æœå‰å°æœ‰å¾ˆå¤šä¸ªå‚æ•°ä¼ å…¥,å¹¶ä¸”è¿™äº›å‚æ•°éƒ½æ˜¯ä¸€ä¸ªå¯¹è±¡çš„,é‚£ä¹ˆæ€ä¹ˆæ ·å¿«é€Ÿå¾—åˆ°è¿™ä¸ªå¯¹è±¡ï¼Ÿ\"></a>å¦‚æœå‰å°æœ‰å¾ˆå¤šä¸ªå‚æ•°ä¼ å…¥,å¹¶ä¸”è¿™äº›å‚æ•°éƒ½æ˜¯ä¸€ä¸ªå¯¹è±¡çš„,é‚£ä¹ˆæ€ä¹ˆæ ·å¿«é€Ÿå¾—åˆ°è¿™ä¸ªå¯¹è±¡ï¼Ÿ</h3><p>ç›´æ¥åœ¨æ–¹æ³•ä¸­å£°æ˜è¿™ä¸ªå¯¹è±¡,Spring MVCå°±è‡ªåŠ¨ä¼šæŠŠå±æ€§èµ‹å€¼åˆ°è¿™ä¸ªå¯¹è±¡é‡Œé¢ã€‚</p>\n<h3 id=\"Spring-MVCä¸­å‡½æ•°çš„è¿”å›å€¼æ˜¯ä»€ä¹ˆï¼Ÿ\"><a href=\"#Spring-MVCä¸­å‡½æ•°çš„è¿”å›å€¼æ˜¯ä»€ä¹ˆï¼Ÿ\" class=\"headerlink\" title=\"Spring MVCä¸­å‡½æ•°çš„è¿”å›å€¼æ˜¯ä»€ä¹ˆï¼Ÿ\"></a>Spring MVCä¸­å‡½æ•°çš„è¿”å›å€¼æ˜¯ä»€ä¹ˆï¼Ÿ</h3><p>è¿”å›å€¼å¯ä»¥æœ‰å¾ˆå¤šç±»å‹,æœ‰String, ModelAndViewï¼ˆè§†å›¾å’Œæ•°æ®åˆå¹¶åœ¨ä¸€èµ·ï¼‰ã€‚</p>\n<h3 id=\"Spring-MVCç”¨ä»€ä¹ˆå¯¹è±¡ä»åå°å‘å‰å°ä¼ é€’æ•°æ®çš„ï¼Ÿ\"><a href=\"#Spring-MVCç”¨ä»€ä¹ˆå¯¹è±¡ä»åå°å‘å‰å°ä¼ é€’æ•°æ®çš„ï¼Ÿ\" class=\"headerlink\" title=\"Spring MVCç”¨ä»€ä¹ˆå¯¹è±¡ä»åå°å‘å‰å°ä¼ é€’æ•°æ®çš„ï¼Ÿ\"></a>Spring MVCç”¨ä»€ä¹ˆå¯¹è±¡ä»åå°å‘å‰å°ä¼ é€’æ•°æ®çš„ï¼Ÿ</h3><p>é€šè¿‡ModelMapå¯¹è±¡,å¯ä»¥åœ¨è¿™ä¸ªå¯¹è±¡é‡Œé¢è°ƒç”¨putæ–¹æ³•,æŠŠå¯¹è±¡åŠ åˆ°é‡Œé¢,å‰å°å°±å¯ä»¥é€šè¿‡elè¡¨è¾¾å¼æ‹¿åˆ°ã€‚</p>\n<h3 id=\"æ€ä¹ˆæ ·æŠŠModelMapé‡Œé¢çš„æ•°æ®æ”¾å…¥Sessioné‡Œé¢ï¼Ÿ\"><a href=\"#æ€ä¹ˆæ ·æŠŠModelMapé‡Œé¢çš„æ•°æ®æ”¾å…¥Sessioné‡Œé¢ï¼Ÿ\" class=\"headerlink\" title=\"æ€ä¹ˆæ ·æŠŠModelMapé‡Œé¢çš„æ•°æ®æ”¾å…¥Sessioné‡Œé¢ï¼Ÿ\"></a>æ€ä¹ˆæ ·æŠŠModelMapé‡Œé¢çš„æ•°æ®æ”¾å…¥Sessioné‡Œé¢ï¼Ÿ</h3><p>å¯ä»¥åœ¨ç±»ä¸Šé¢åŠ ä¸Š@SessionAttributesæ³¨è§£,é‡Œé¢åŒ…å«çš„å­—ç¬¦ä¸²å°±æ˜¯è¦æ”¾å…¥sessioné‡Œé¢çš„keyã€‚</p>\n<h3 id=\"Spring-MVCé‡Œé¢æ‹¦æˆªå™¨æ˜¯æ€ä¹ˆå†™çš„\"><a href=\"#Spring-MVCé‡Œé¢æ‹¦æˆªå™¨æ˜¯æ€ä¹ˆå†™çš„\" class=\"headerlink\" title=\"Spring MVCé‡Œé¢æ‹¦æˆªå™¨æ˜¯æ€ä¹ˆå†™çš„\"></a>Spring MVCé‡Œé¢æ‹¦æˆªå™¨æ˜¯æ€ä¹ˆå†™çš„</h3><p>æœ‰ä¸¤ç§å†™æ³•,ä¸€ç§æ˜¯å®ç°HandlerInterceptoræ¥å£ï¼Œé‡å†™prehandleç­‰æ–¹æ³•ï¼Œç„¶åé…ç½®æ‹¦æˆªå™¨</p>"},{"title":"Javaå…«è‚¡æ–‡ - Javaé›†åˆ","copyright":true,"mathjax":false,"date":"2023-01-23T02:06:52.000Z","toc":true,"urlname":"java-collection","_content":"\n> æ•´ç†çš„Javaé›†åˆç›¸å…³çŸ¥è¯†ç‚¹å’Œé¢è¯•é¢˜ï¼Œéƒ¨åˆ†å†…å®¹æ‘˜è‡ªç½‘ç»œï¼Œå¦‚æœ‰ä¾µæƒè¯·è”ç³»æˆ‘ï½\t<!--more-->\n\n## é›†åˆå®¹å™¨æ¦‚è¿°\n\n### ä»€ä¹ˆæ˜¯é›†åˆ\n\nç”¨äºå­˜å‚¨æ•°æ®çš„å®¹å™¨ã€‚\n\n### é›†åˆå’Œæ•°ç»„çš„åŒºåˆ«\n\n- æ•°ç»„æ˜¯å›ºå®šé•¿åº¦çš„ï¼›é›†åˆå¯å˜é•¿åº¦çš„ã€‚\n- æ•°ç»„å¯ä»¥å­˜å‚¨åŸºæœ¬æ•°æ®ç±»å‹ï¼Œä¹Ÿå¯ä»¥å­˜å‚¨å¼•ç”¨æ•°æ®ç±»å‹ï¼›é›†åˆåªèƒ½å­˜å‚¨å¼•ç”¨æ•°æ®ç±»å‹ã€‚\n\n### å¸¸ç”¨çš„é›†åˆç±»æœ‰å“ªäº›ï¼Ÿ\n\nCollectionæ¥å£å’ŒMapæ¥å£æ˜¯æ‰€æœ‰é›†åˆæ¡†æ¶çš„çˆ¶æ¥å£ã€‚\n\nCollectionæ¥å£ï¼šå­æ¥å£åŒ…æ‹¬Setæ¥å£å’ŒListæ¥å£\n\n1. Setæ¥å£çš„å®ç°ç±»ä¸»è¦æœ‰ï¼šHashSetã€TreeSetã€LinkedHashSetç­‰ï¼›\n2. Listæ¥å£çš„å®ç°ç±»ä¸»è¦æœ‰ï¼šArrayListã€LinkedListã€Stackä»¥åŠVectorç­‰ã€‚\n\nMapæ¥å£ï¼šå®ç°ç±»ä¸»è¦æœ‰HashMapã€TreeMapã€HashTableã€ConcurrentHashMapä»¥åŠPropertiesç­‰ã€‚\n\n### Listã€Setã€Mapä¸‰è€…çš„åŒºåˆ«ï¼Ÿ\n\n![Collectionæ¶æ„](https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/TyporaNotesaHR0cHM6Ly9pbWcyMDE4LmNuYmxvZ3MuY29tL290aGVyLzE0MDgxODMvMjAxOTExLzE0MDgxODMtMjAxOTExMTkxODQxNDk1NTktMTU3MTU5NTY2OC5qcGc.png)\n\nListå’ŒSetä¸¤å¤§æ¥å£æ˜¯Collectionçš„å­æ¥å£\n\n- Listï¼šæœ‰åºå®¹å™¨ï¼Œå…ƒç´ å¯ä»¥é‡å¤ï¼Œå¯ä»¥æ’å…¥å¤šä¸ªnullå…ƒç´ ï¼Œå…ƒç´ éƒ½æœ‰ç´¢å¼•ï¼›\n\tå¸¸ç”¨å®ç°ç±»ï¼šArrayListã€LinkedList å’Œ Vectorã€‚\n\t\n- Setï¼šæ— åºå®¹å™¨ï¼Œä¸å¯ä»¥å­˜å‚¨é‡å¤å…ƒç´ ï¼Œåªå…è®¸å­˜å…¥ä¸€ä¸ªnullå…ƒç´ ï¼Œå¿…é¡»ä¿è¯å…ƒç´ å”¯ä¸€æ€§ï¼›\n\n\tå¸¸ç”¨å®ç°ç±»ï¼šHashSetã€LinkedHashSet ä»¥åŠ TreeSetã€‚\n\n* Mapæ˜¯ä¸€ä¸ªé”®å€¼å¯¹é›†åˆï¼Œå­˜å‚¨é”®ã€å€¼å’Œä¹‹é—´çš„æ˜ å°„ã€‚ keyæ— åºï¼Œå”¯ä¸€ï¼›value ä¸è¦æ±‚æœ‰åºï¼Œå…è®¸é‡å¤ï¼›\n\n\tå¸¸ç”¨å®ç°ç±»ï¼šHashMapã€TreeMapã€HashTableã€LinkedHashMapã€ConcurrentHashMapã€‚\n\n### é›†åˆæ¡†æ¶åº•å±‚æ•°æ®ç»“æ„\n\n#### Collection\n\n1. List\n\n- Arraylistï¼š Objectæ•°ç»„\n- Vectorï¼š Objectæ•°ç»„\n- LinkedListï¼š åŒå‘é“¾è¡¨\n\n2. Set\n\n- HashSetï¼ˆæ— åºï¼Œå”¯ä¸€ï¼‰ï¼šåŸºäº HashMap å®ç°çš„ï¼Œåº•å±‚é‡‡ç”¨ HashMap æ¥ä¿å­˜å…ƒç´ \n- LinkedHashSetï¼š LinkedHashSet ç»§æ‰¿äº HashSetï¼Œå¹¶ä¸”å…¶å†…éƒ¨æ˜¯é€šè¿‡ LinkedHashMap æ¥å®ç°çš„ã€‚\n- TreeSetï¼ˆæœ‰åºï¼Œå”¯ä¸€ï¼‰ï¼š çº¢é»‘æ ‘(è‡ªå¹³è¡¡çš„æ’åºäºŒå‰æ ‘)\n\n#### Map\n\n- HashMapï¼š JDK1.8ä¹‹å‰HashMapç”±æ•°ç»„+é“¾è¡¨ç»„æˆçš„ï¼Œæ•°ç»„æ˜¯HashMapçš„ä¸»ä½“ï¼Œé“¾è¡¨åˆ™æ˜¯ä¸»è¦ä¸ºäº†è§£å†³å“ˆå¸Œå†²çªè€Œå­˜åœ¨çš„ï¼ˆâ€œæ‹‰é“¾æ³•â€è§£å†³å†²çªï¼‰ã€‚JDK1.8ä»¥ååœ¨è§£å†³å“ˆå¸Œå†²çªæ—¶æœ‰äº†è¾ƒå¤§çš„å˜åŒ–ï¼Œå½“é“¾è¡¨é•¿åº¦å¤§äºé˜ˆå€¼ï¼ˆé»˜è®¤ä¸º8ï¼‰ï¼Œä¸”æ•°ç»„é•¿åº¦å¤§äº 64ï¼Œå°†é“¾è¡¨è½¬åŒ–ä¸ºçº¢é»‘æ ‘ï¼Œä»¥å‡å°‘æœç´¢æ—¶é—´ï¼Œå¦åˆ™æ‰©å®¹æ•°ç»„ã€‚\n- LinkedHashMapï¼šLinkedHashMap ç»§æ‰¿è‡ª HashMapï¼Œæ‰€ä»¥å®ƒçš„åº•å±‚ç”±æ•°ç»„å’Œé“¾è¡¨æˆ–çº¢é»‘æ ‘ç»„æˆã€‚å¦å¤–ï¼ŒLinkedHashMap åœ¨ä¸Šé¢ç»“æ„çš„åŸºç¡€ä¸Šï¼Œå¢åŠ äº†ä¸€æ¡åŒå‘é“¾è¡¨ï¼Œä½¿å¾—ä¸Šé¢çš„ç»“æ„å¯ä»¥ä¿æŒé”®å€¼å¯¹çš„æ’å…¥é¡ºåºã€‚åŒæ—¶é€šè¿‡å¯¹é“¾è¡¨è¿›è¡Œç›¸åº”çš„æ“ä½œï¼Œå®ç°äº†è®¿é—®é¡ºåºç›¸å…³é€»è¾‘ã€‚\n- HashTableï¼š æ•°ç»„+é“¾è¡¨ç»„æˆçš„ï¼Œæ•°ç»„æ˜¯ HashMap çš„ä¸»ä½“ï¼Œé“¾è¡¨åˆ™æ˜¯ä¸»è¦ä¸ºäº†è§£å†³å“ˆå¸Œå†²çªè€Œå­˜åœ¨çš„\n- TreeMapï¼š çº¢é»‘æ ‘ï¼ˆè‡ªå¹³è¡¡çš„æ’åºäºŒå‰æ ‘ï¼‰\n\n### å“ªäº›é›†åˆç±»æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Ÿ\n\nvector å’Œ hashtableï¼Œé€šè¿‡åœ¨æ–¹æ³•ä¸ŠåŠ  synchronized å…³é”®å­—å®ç°çº¿ç¨‹å®‰å…¨\n\n### Javaé›†åˆçš„å¿«é€Ÿå¤±è´¥æœºåˆ¶ â€œfail-fastâ€ï¼Ÿ\n\nfail-fastæ˜¯Javaé›†åˆçš„ä¸€ç§**é”™è¯¯æ£€æµ‹æœºåˆ¶**ï¼Œå½“å¤šä¸ªçº¿ç¨‹å¯¹åŒä¸€ä¸ªé›†åˆçš„å†…å®¹è¿›è¡Œæ“ä½œæ—¶ï¼Œå°±å¯èƒ½ä¼šäº§ç”Ÿfail-fastäº‹ä»¶ã€‚\n\nä¾‹å¦‚ï¼šå‡è®¾å­˜åœ¨ä¸¤ä¸ªçº¿ç¨‹ï¼ˆçº¿ç¨‹1ã€çº¿ç¨‹2ï¼‰ï¼Œçº¿ç¨‹1é€šè¿‡Iteratoråœ¨éå†é›†åˆAä¸­çš„å…ƒç´ ï¼Œåœ¨æŸä¸ªæ—¶å€™çº¿ç¨‹2ä¿®æ”¹äº†é›†åˆAçš„ç»“æ„ï¼ˆaddã€removeã€clearç­‰ç»“æ„ä¸Šçš„ä¿®æ”¹ï¼Œè€Œä¸æ˜¯ç®€å•çš„ä¿®æ”¹é›†åˆå…ƒç´ çš„å†…å®¹ï¼‰ï¼Œé‚£ä¹ˆè¿™ä¸ªæ—¶å€™ç¨‹åºå°±ä¼šæŠ›å‡º **ConcurrentModificationException** å¼‚å¸¸ï¼Œä»è€Œäº§ç”Ÿfail-fastäº‹ä»¶ã€‚\n\nåŸå› ï¼šè¿­ä»£å™¨åœ¨éå†æ—¶ç›´æ¥è®¿é—®é›†åˆä¸­çš„å†…å®¹ï¼Œå¹¶ä¸”åœ¨éå†è¿‡ç¨‹ä¸­ä½¿ç”¨ä¸€ä¸ª modCount å˜é‡ã€‚æ¯å½“è¿­ä»£å™¨ä½¿ç”¨hashNext()/next()éå†ä¸‹ä¸€ä¸ªå…ƒç´ ä¹‹å‰ï¼Œéƒ½ä¼šæ£€æµ‹modCountå˜é‡æ˜¯å¦ä¸ºexpectedmodCountå€¼ï¼Œæ˜¯çš„è¯å°±è¿”å›éå†ï¼›å¦åˆ™æŠ›å‡ºå¼‚å¸¸ï¼Œç»ˆæ­¢éå†ã€‚é›†åˆåœ¨è¢«éå†æœŸé—´å¦‚æœå†…å®¹å‘ç”Ÿå˜åŒ–ï¼Œå°±ä¼šæ”¹å˜modCountçš„å€¼ï¼Œä»è€ŒmodCountä¸ç­‰äºexpectedmodCountå€¼æŠ›å‡ºå¼‚å¸¸ï¼Œä¹Ÿå°±æ˜¯äº§ç”Ÿäº†fail-fastäº‹ä»¶ã€‚\n\nè§£å†³åŠæ³•ï¼š\n\n1. åœ¨éå†è¿‡ç¨‹ä¸­ï¼Œæ‰€æœ‰æ¶‰åŠåˆ°æ”¹å˜modCountå€¼çš„åœ°æ–¹å…¨éƒ¨åŠ ä¸Šsynchronizedï¼›\n2. ä½¿ç”¨Java.util.concurrentä¸‹çš„CopyOnWriteArrayListæ¥æ›¿æ¢ArrayListï¼›\n3. ä½¿ç”¨Java.util.concurrentä¸‹çš„ConcurrentHashMapæ¥æ›¿æ¢HashMapã€‚\n\n### æ€ä¹ˆç¡®ä¿ä¸€ä¸ªé›†åˆä¸èƒ½è¢«ä¿®æ”¹ï¼Ÿ\n\nå¯ä»¥ä½¿ç”¨ Collections. unmodifiableCollection(Collection c) æ–¹æ³•æ¥åˆ›å»ºä¸€ä¸ªåªè¯»é›†åˆï¼Œè¿™æ ·æ”¹å˜é›†åˆçš„ä»»ä½•æ“ä½œéƒ½ä¼šæŠ›å‡º Java. lang. UnsupportedOperationException å¼‚å¸¸ã€‚\n\n```Java\nList<String> list = new ArrayList<>();\nlist. add(\"x\");\nCollection<String> clist = Collections. unmodifiableCollection(list);\nclist.add(\"y\"); // è¿è¡Œæ—¶æ­¤è¡ŒæŠ¥é”™\nSystem.out.println(list. size());\n```\n\n## Collectionæ¥å£\n\n### Listæ¥å£\n\n#### è¿­ä»£å™¨ Iterator æ˜¯ä»€ä¹ˆï¼Ÿ\n\nCollectionæ¥å£å®ç°äº†Iterableæ¥å£ï¼Œé€šè¿‡å®ç°Iterableæ¥å£ä¸­çš„iterator()æ–¹æ³•è¿”å›Iteratoræ¥å£çš„å®ä¾‹ï¼Œé€šè¿‡iteratorå¯¹é›†åˆçš„å…ƒç´ è¿›è¡Œè¿­ä»£æ“ä½œã€‚\n\n#### Iterator æ€ä¹ˆä½¿ç”¨ï¼Ÿæœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼Ÿ\n\n```Java\nList<String> list = new ArrayList<>();\nIterator<String> it = list.iterator();\nwhile(it.hasNext()){\n    String obj = it.next();\n    System.out.println(obj);\n}\n```\n\nIterator çš„ç‰¹ç‚¹æ˜¯åªèƒ½å•å‘éå†ï¼Œä½†æ˜¯æ›´åŠ å®‰å…¨ï¼Œå› ä¸ºå®ƒå¯ä»¥ç¡®ä¿ï¼Œåœ¨å½“å‰éå†çš„é›†åˆå…ƒç´ è¢«æ›´æ”¹çš„æ—¶å€™ï¼Œå°±ä¼šæŠ›å‡º ConcurrentModificationException å¼‚å¸¸ã€‚\n\n#### å¦‚ä½•è¾¹éå†è¾¹ç§»é™¤ Collection ä¸­çš„å…ƒç´ ï¼Ÿ\n\nè¾¹éå†è¾¹ä¿®æ”¹ Collection çš„å”¯ä¸€æ­£ç¡®æ–¹å¼æ˜¯ä½¿ç”¨ Iterator.remove() æ–¹æ³•ï¼Œå¦‚ä¸‹ï¼š\n\n```java\nIterator<Integer> it = list.iterator();\nwhile(it.hasNext()){\n   // do something\n   it.remove();\n}\n```\n\nä¸€ç§æœ€å¸¸è§çš„**é”™è¯¯**ä»£ç å¦‚ä¸‹ï¼š\n\n```java\nList<String> list = new ArrayList<>();\nlist.add(\"1\");\nlist.add(\"2\");\nlist.add(\"3\");\nlist.add(\"4\");\nlist.add(\"5\");\nint cnt = 0;\nfor (String item : list) {\n  System.out.println(++cnt);\n  list.remove(item);\n}\nSystem.out.println(Arrays.toString(list.toArray()));\n```\n\nè¿è¡Œä»¥ä¸Šé”™è¯¯ä»£ç ä¼šæŠ¥ **ConcurrentModificationException å¼‚å¸¸**ã€‚\nè¿™æ˜¯å› ä¸ºå½“ä½¿ç”¨ foreach(for(Integer i : list)) è¯­å¥æ—¶ï¼Œä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªiterator æ¥éå†è¯¥ listï¼Œä½†åŒæ—¶è¯¥ list æ­£åœ¨è¢« Iterator.remove() ä¿®æ”¹ã€‚é›†åˆå‘ç”Ÿç»“æ„æ€§å˜åŒ–ï¼Œæ ¹æ®fail-fastæœºåˆ¶ï¼Œä¼šæŠ›å¼‚å¸¸ã€‚\n\n#### éå†ä¸€ä¸ª List æœ‰å“ªäº›ä¸åŒçš„æ–¹å¼ï¼Ÿ\n\n1. for å¾ªç¯ï¼Œç»´æŠ¤ä¸€ä¸ªè®¡æ•°å™¨ï¼›\n2. è¿­ä»£å™¨ï¼ŒIteratorã€‚Collectionæ¥å£å®ç°äº†Iterableæ¥å£ï¼Œé€šè¿‡å®ç°Iterableæ¥å£ä¸­çš„iterator()æ–¹æ³•è¿”å›Iteratoræ¥å£çš„å®ä¾‹ï¼Œé€šè¿‡iteratorå¯¹é›†åˆçš„å…ƒç´ è¿›è¡Œè¿­ä»£æ“ä½œï¼›\n3. å¢å¼ºforå¾ªç¯ã€‚å¢å¼ºforå¾ªç¯foreach å†…éƒ¨ä¹Ÿæ˜¯é‡‡ç”¨äº† Iterator çš„æ–¹å¼å®ç°ï¼Œä½¿ç”¨æ—¶ä¸éœ€è¦æ˜¾å¼å£°æ˜ Iterator æˆ–è®¡æ•°å™¨ã€‚\n\tä¼˜ç‚¹æ˜¯ä»£ç ç®€æ´ï¼Œä¸æ˜“å‡ºé”™ï¼›ç¼ºç‚¹æ˜¯åªèƒ½åšç®€å•çš„éå†ï¼Œä¸èƒ½åœ¨éå†è¿‡ç¨‹ä¸­æ“ä½œæ•°æ®é›†åˆï¼Œä¾‹å¦‚åˆ é™¤ã€æ›¿æ¢ã€‚\n\n#### è¯´ä¸€ä¸‹ ArrayList çš„ä¼˜ç¼ºç‚¹\n\n**ArrayList æ¯”è¾ƒé€‚åˆé¡ºåºæ·»åŠ ã€éšæœºè®¿é—®çš„åœºæ™¯ã€‚**\n\nArrayListçš„ä¼˜ç‚¹å¦‚ä¸‹ï¼š\n\n- ArrayList åº•å±‚ä»¥æ•°ç»„å®ç°ï¼Œæ˜¯ä¸€ç§éšæœºè®¿é—®æ¨¡å¼ã€‚ArrayList å®ç°äº† RandomAccess æ¥å£ï¼Œæ ‡è®° List å®ç°æ˜¯å¦æ”¯æŒ Random Accessï¼Œå¯¼è‡´å®ƒå¯ä»¥éšæœºè®¿é—®çš„æ ¹æœ¬åŸå› æ˜¯å®ƒåº•å±‚æ˜¯æ•°ç»„ç»“æ„ï¼Œæ•°ç»„å¯ä»¥é€šè¿‡ä¸‹æ ‡è·å–ç›¸åº”çš„å€¼ï¼Œè€Œ RandomAccess åªæ˜¯ä¸€ä¸ªæ ‡è®°ã€‚å› æ­¤æŸ¥æ‰¾çš„æ—¶å€™éå¸¸å¿«ã€‚å¯ä»¥ç”¨ for å¾ªç¯é€šè¿‡ä¸‹æ ‡è·å–å…ƒç´ ã€‚\n- ArrayList åœ¨é¡ºåºæ·»åŠ ä¸€ä¸ªå…ƒç´ çš„æ—¶å€™éå¸¸æ–¹ä¾¿ã€‚\n\nArrayList çš„ç¼ºç‚¹å¦‚ä¸‹ï¼š\n\n- å‘**ä¸­é—´æŸä¸ªä½ç½®åˆ é™¤**å…ƒç´ çš„æ—¶å€™ï¼Œéœ€è¦åšå…ƒç´ å¤åˆ¶æ“ä½œã€‚å¦‚æœè¦å¤åˆ¶çš„å…ƒç´ å¾ˆå¤šï¼Œé‚£ä¹ˆå°±ä¼šæ¯”è¾ƒè€—è´¹æ€§èƒ½ï¼›\n- å‘**ä¸­é—´æŸä¸ªä½ç½®æ’å…¥**å…ƒç´ çš„æ—¶å€™ï¼Œä¹Ÿéœ€è¦åšå…ƒç´ å¤åˆ¶æ“ä½œï¼Œç¼ºç‚¹åŒä¸Šã€‚\n\n#### å¦‚ä½•å®ç°æ•°ç»„å’Œ List ä¹‹é—´çš„è½¬æ¢ï¼Ÿ\n\n- æ•°ç»„è½¬ Listï¼šä½¿ç”¨ Arrays. asList(array) è¿›è¡Œè½¬æ¢ã€‚\n- List è½¬æ•°ç»„ï¼šä½¿ç”¨ List è‡ªå¸¦çš„ toArray() æ–¹æ³•ã€‚\n\n```Java\n// list to array\nList<String> list = new ArrayList<String>();\nlist.add(\"123\");\nlist.add(\"456\");\nlist.toArray(new String[0]);\n\n// array to list\nString[] array = new String[]{\"123\", \"456\"};\nArrays.asList(array);\n```\n\n#### ArrayList å’Œ LinkedList çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ\n\n- åº•å±‚å®ç°ï¼šArrayList æ˜¯åŠ¨æ€æ•°ç»„çš„æ•°æ®ç»“æ„å®ç°ï¼Œè€Œ LinkedList æ˜¯åŒå‘é“¾è¡¨çš„æ•°æ®ç»“æ„å®ç°ï¼›\n- è®¿é—®å’Œå¢åˆ å…ƒç´ æ•ˆç‡ï¼šArrayList éšæœºè®¿é—®å’Œé¡ºåºæ’å…¥/åˆ é™¤å…ƒç´ æ•ˆç‡æ›´é«˜ï¼›\n- å†…å­˜å ç”¨ï¼šLinkedList æ¯” ArrayList æ›´å å†…å­˜ï¼Œå› ä¸º LinkedList çš„èŠ‚ç‚¹é™¤äº†å­˜å‚¨æ•°æ®ï¼Œè¿˜å­˜å‚¨äº†ä¸¤ä¸ªå¼•ç”¨ï¼Œä¸€ä¸ªæŒ‡å‘å‰ä¸€ä¸ªå…ƒç´ ï¼Œä¸€ä¸ªæŒ‡å‘åä¸€ä¸ªå…ƒç´ ï¼›\n- çº¿ç¨‹å®‰å…¨ï¼šArrayList å’Œ LinkedList éƒ½æ˜¯ä¸åŒæ­¥çš„ï¼Œä¹Ÿå°±æ˜¯ä¸ä¿è¯çº¿ç¨‹å®‰å…¨ã€‚\n\nç»¼åˆæ¥è¯´ï¼Œåœ¨éœ€è¦**é¢‘ç¹è¯»å–**é›†åˆä¸­çš„å…ƒç´ æ—¶ï¼Œæ›´æ¨èä½¿ç”¨ ArrayListï¼Œè€Œåœ¨**æ’å…¥å’Œåˆ é™¤æ“ä½œè¾ƒå¤š**æ—¶ï¼Œæ›´æ¨èä½¿ç”¨ LinkedListã€‚\n\n#### ArrayList å’Œ Vector çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ\n\nä¸»è¦åŒºåˆ«æ˜¯çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼š\nVector ä½¿ç”¨äº† synchronized æ¥å®ç°çº¿ç¨‹åŒæ­¥ï¼ˆæ€§èƒ½å·®ï¼‰ï¼Œæ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œè€Œ ArrayList æ˜¯éçº¿ç¨‹å®‰å…¨çš„ã€‚\n\n#### å¤šçº¿ç¨‹åœºæ™¯ä¸‹å¦‚ä½•ä½¿ç”¨ ArrayListï¼Ÿ\n\nå¯ä»¥ç”¨ Java.util.concurrent.CopyOnWriteArrayList æ›¿æ¢ ArrayListã€‚\n\n#### ä¸ºä»€ä¹ˆ ArrayList çš„ elementData åŠ ä¸Š transient ä¿®é¥°ï¼Ÿ\n\nArrayList å®ç°äº† Serializable æ¥å£ï¼Œè¿™æ„å‘³ç€ ArrayList æ”¯æŒåºåˆ—åŒ–ã€‚\nå¯¹äº elementDataï¼Œç”±äº elementData å¯èƒ½æœ‰å¤šä½™çš„å®¹é‡ï¼ˆå®¹é‡ä¸è¶³ä¼šæ‰©å®¹æˆ1.5å€å¤§å°ï¼Œæ‰©å®¹ä¹‹åé™¤äº†æ–°åŠ \nçš„å…ƒç´ ä»¥å¤–è¿˜æœ‰å¤šçš„ç©ºé—´æ²¡æœ‰æ”¾å…ƒç´ ï¼Œæ¯”å¦‚ç°åœ¨å®¹é‡æ˜¯15ï¼Œè€Œé›†åˆé‡Œé¢åªå­˜äº†11ä¸ªå…ƒç´ ï¼‰ï¼Œä¸å¯¹ elementData åŠ ä¸Š transient ä¿®é¥°ï¼Œè€Œæ˜¯æ‰‹åŠ¨è¿›è¡Œåºåˆ—åŒ–ï¼Œå¯ä»¥ä¿è¯åªåºåˆ—åŒ–å®é™…å­˜å‚¨çš„é‚£äº›å…ƒç´ ï¼ˆ11ä¸ªå…ƒç´ ï¼‰ï¼Œè€Œä¸æ˜¯æ•´ä¸ªæ•°ç»„ï¼Œä»è€ŒèŠ‚çœç©ºé—´å’Œæ—¶é—´ã€‚\n\n### â­ArrayListæ‰©å®¹æœºåˆ¶\n\n> **æ€»ç»“ï¼š**\n>\n> * åˆå§‹åŒ–å¦‚æœä½¿ç”¨æ— å‚æ„é€ å™¨çš„è¯ï¼š\n>\n> \tåœ¨ç¬¬ä¸€æ¬¡æ·»åŠ å…ƒç´ çš„æ—¶å€™ï¼Œå°†æ•°ç»„å®¹é‡è®¾ç½®ä¸º10ï¼Œç„¶åè¿›è¡Œæ·»åŠ ã€‚\n>\n> \tä¸€ç›´æ·»åŠ ï¼Œç›´åˆ°è¦æ·»åŠ çš„å…ƒç´ è¶…å‡ºå½“å‰æ•°ç»„å®¹é‡äº†ï¼Œè¿›å…¥æ‰©å®¹ï¼Œå°†æ•°ç»„é•¿åº¦æ‰©å®¹ä¸º1.5å€é•¿åº¦ï¼Œç„¶åè¿›è¡Œæ·»åŠ ã€‚\n>\n> * åˆå§‹åŒ–å¦‚æœä½¿ç”¨æœ‰å‚æ„é€ å™¨çš„è¯ï¼š\n>\n> \té‚£ä¹ˆæ¯æ¬¡æ·»åŠ å…ƒç´ åªéœ€è¦åˆ¤æ–­æ˜¯å¦éœ€è¦æ‰©å®¹å³å¯ï¼Œä¸éœ€è¦ç¬¬ä¸€æ¬¡çš„åˆå§‹åŒ–ä¸º10çš„åˆ¤æ–­ã€‚\n\n#### 1. å…ˆä» ArrayList çš„æ„é€ å‡½æ•°è¯´èµ·\n\n**ï¼ˆJDK8ï¼‰ArrayList æœ‰ä¸‰ç§æ–¹å¼æ¥åˆå§‹åŒ–ï¼Œæ„é€ æ–¹æ³•æºç å¦‚ä¸‹ï¼š**\n\n```java\n    /**\n     * é»˜è®¤åˆå§‹å®¹é‡å¤§å°\n     */\n    private static final int DEFAULT_CAPACITY = 10;\n\n\n    private static final Object[] DEFAULTCAPACITY_EMPTY_ELEMENTDATA = {};\n\n    /**\n     *é»˜è®¤æ„é€ å‡½æ•°ï¼Œä½¿ç”¨åˆå§‹å®¹é‡10æ„é€ ä¸€ä¸ªç©ºåˆ—è¡¨(æ— å‚æ•°æ„é€ )\n     */\n    public ArrayList() {\n        this.elementData = DEFAULTCAPACITY_EMPTY_ELEMENTDATA;\n    }\n\n    /**\n     * å¸¦åˆå§‹å®¹é‡å‚æ•°çš„æ„é€ å‡½æ•°ã€‚ï¼ˆç”¨æˆ·è‡ªå·±æŒ‡å®šå®¹é‡ï¼‰\n     */\n    public ArrayList(int initialCapacity) {\n        if (initialCapacity > 0) {//åˆå§‹å®¹é‡å¤§äº0\n            //åˆ›å»ºinitialCapacityå¤§å°çš„æ•°ç»„\n            this.elementData = new Object[initialCapacity];\n        } else if (initialCapacity == 0) {//åˆå§‹å®¹é‡ç­‰äº0\n            //åˆ›å»ºç©ºæ•°ç»„\n            this.elementData = EMPTY_ELEMENTDATA;\n        } else {//åˆå§‹å®¹é‡å°äº0ï¼ŒæŠ›å‡ºå¼‚å¸¸\n            throw new IllegalArgumentException(\"Illegal Capacity: \"+\n                                               initialCapacity);\n        }\n    }\n\n\n   /**\n    *æ„é€ åŒ…å«æŒ‡å®šcollectionå…ƒç´ çš„åˆ—è¡¨ï¼Œè¿™äº›å…ƒç´ åˆ©ç”¨è¯¥é›†åˆçš„è¿­ä»£å™¨æŒ‰é¡ºåºè¿”å›\n    *å¦‚æœæŒ‡å®šçš„é›†åˆä¸ºnullï¼Œthrows NullPointerExceptionã€‚\n    */\n     public ArrayList(Collection<? extends E> c) {\n        elementData = c.toArray();\n        if ((size = elementData.length) != 0) {\n            // c.toArray might (incorrectly) not return Object[] (see 6260652)\n            if (elementData.getClass() != Object[].class)\n                elementData = Arrays.copyOf(elementData, size, Object[].class);\n        } else {\n            // replace with empty array.\n            this.elementData = EMPTY_ELEMENTDATA;\n        }\n    }\n```\n\n**ä»¥æ— å‚æ•°æ„é€ æ–¹æ³•åˆ›å»º ArrayList æ—¶ï¼Œå®é™…ä¸Šåˆå§‹åŒ–èµ‹å€¼çš„æ˜¯ä¸€ä¸ªç©ºæ•°ç»„ã€‚å½“çœŸæ­£å¯¹æ•°ç»„è¿›è¡Œæ·»åŠ å…ƒç´ æ“ä½œæ—¶ï¼Œæ‰çœŸæ­£åˆ†é…å®¹é‡ã€‚å³å‘æ•°ç»„ä¸­æ·»åŠ ç¬¬ä¸€ä¸ªå…ƒç´ æ—¶ï¼Œæ•°ç»„å®¹é‡æ‰©ä¸º 10ã€‚** \n\n> è¡¥å……ï¼šJDK6 new æ— å‚æ„é€ çš„ `ArrayList` å¯¹è±¡æ—¶ï¼Œç›´æ¥åˆ›å»ºäº†é•¿åº¦æ˜¯ 10 çš„ `Object[]` æ•°ç»„ elementData ã€‚\n\n#### 2. ä¸€æ­¥ä¸€æ­¥åˆ†æ ArrayList æ‰©å®¹æœºåˆ¶\n\nè¿™é‡Œä»¥æ— å‚æ„é€ å‡½æ•°åˆ›å»ºçš„ ArrayList ä¸ºä¾‹åˆ†æ\n\n##### 2.1.  `add` \n\n```java\n    /**\n     * å°†æŒ‡å®šçš„å…ƒç´ è¿½åŠ åˆ°æ­¤åˆ—è¡¨çš„æœ«å°¾ã€‚\n     */\n    public boolean add(E e) {\n   // æ·»åŠ å…ƒç´ ä¹‹å‰ï¼Œå…ˆè°ƒç”¨ensureCapacityInternalæ–¹æ³•\n        ensureCapacityInternal(size + 1);  // Increments modCount!!\n        // è¿™é‡Œçœ‹åˆ°ArrayListæ·»åŠ å…ƒç´ çš„å®è´¨å°±ç›¸å½“äºä¸ºæ•°ç»„èµ‹å€¼\n        elementData[size++] = e;\n        return true;\n    }\n```\n\n##### 2.2. `ensureCapacityInternal()` \n\nï¼ˆJDK7ï¼‰å¯ä»¥çœ‹åˆ° `add` æ–¹æ³• é¦–å…ˆè°ƒç”¨äº†`ensureCapacityInternal(size + 1)`\n\n```java\n   //å¾—åˆ°æœ€å°æ‰©å®¹é‡\n    private void ensureCapacityInternal(int minCapacity) {\n        if (elementData == DEFAULTCAPACITY_EMPTY_ELEMENTDATA) {\n            // è·å–é»˜è®¤çš„å®¹é‡å’Œä¼ å…¥å‚æ•°çš„è¾ƒå¤§å€¼\n            minCapacity = Math.max(DEFAULT_CAPACITY, minCapacity);\n        }\n\n        ensureExplicitCapacity(minCapacity);\n    }\n```\n\n**å½“ è¦ add è¿›ç¬¬ 1 ä¸ªå…ƒç´ æ—¶ï¼ŒminCapacity ä¸º 1ï¼Œåœ¨ Math.max()æ–¹æ³•æ¯”è¾ƒåï¼ŒminCapacity ä¸º 10ã€‚**\n\n> æ­¤å¤„å’Œåç»­ JDK8 ä»£ç æ ¼å¼åŒ–ç•¥æœ‰ä¸åŒï¼Œæ ¸å¿ƒä»£ç åŸºæœ¬ä¸€æ ·ã€‚\n\n##### 2.3. `ensureExplicitCapacity()` \n\nå¦‚æœè°ƒç”¨ `ensureCapacityInternal()` æ–¹æ³•å°±ä¸€å®šä¼šè¿›å…¥ï¼ˆæ‰§è¡Œï¼‰è¿™ä¸ªæ–¹æ³•\n\n```java\n  //åˆ¤æ–­æ˜¯å¦éœ€è¦æ‰©å®¹\n    private void ensureExplicitCapacity(int minCapacity) {\n        modCount++;\n\n        // overflow-conscious code\n        if (minCapacity - elementData.length > 0)\n            //è°ƒç”¨growæ–¹æ³•è¿›è¡Œæ‰©å®¹ï¼Œè°ƒç”¨æ­¤æ–¹æ³•ä»£è¡¨å·²ç»å¼€å§‹æ‰©å®¹äº†\n            grow(minCapacity);\n    }\n```\n\næˆ‘ä»¬æ¥ä»”ç»†åˆ†æä¸€ä¸‹ï¼š\n\n- å½“æˆ‘ä»¬è¦ add è¿›ç¬¬ 1 ä¸ªå…ƒç´ åˆ° ArrayList æ—¶ï¼ŒelementData.length ä¸º 0 ï¼ˆå› ä¸ºè¿˜æ˜¯ä¸€ä¸ªç©ºçš„ listï¼‰ï¼Œå› ä¸ºæ‰§è¡Œäº† `ensureCapacityInternal()` æ–¹æ³• ï¼Œæ‰€ä»¥ minCapacity æ­¤æ—¶ä¸º 10ã€‚æ­¤æ—¶ï¼Œ`minCapacity - elementData.length > 0`æˆç«‹ï¼Œæ‰€ä»¥ä¼šè¿›å…¥ `grow(minCapacity)` æ–¹æ³•ã€‚\n- å½“ add ç¬¬ 2 ä¸ªå…ƒç´ æ—¶ï¼ŒminCapacity ä¸º 2ï¼Œæ­¤æ—¶ elementData.length(å®¹é‡)åœ¨æ·»åŠ ç¬¬ä¸€ä¸ªå…ƒç´ åæ‰©å®¹æˆ 10 äº†ã€‚æ­¤æ—¶ï¼Œ`minCapacity - elementData.length > 0` ä¸æˆç«‹ï¼Œæ‰€ä»¥ä¸ä¼šè¿›å…¥ ï¼ˆæ‰§è¡Œï¼‰`grow(minCapacity)` æ–¹æ³•ã€‚\n- æ·»åŠ ç¬¬ 3ã€4Â·Â·Â·åˆ°ç¬¬ 10 ä¸ªå…ƒç´ æ—¶ï¼Œä¾ç„¶ä¸ä¼šæ‰§è¡Œ grow æ–¹æ³•ï¼Œæ•°ç»„å®¹é‡éƒ½ä¸º 10ã€‚\n\nç›´åˆ°æ·»åŠ ç¬¬ 11 ä¸ªå…ƒç´ ï¼ŒminCapacity(ä¸º 11)æ¯” elementData.lengthï¼ˆä¸º 10ï¼‰è¦å¤§ã€‚è¿›å…¥ grow æ–¹æ³•è¿›è¡Œæ‰©å®¹ã€‚\n\n##### 2.4. `grow()` \n\n```java\n    /**\n     * è¦åˆ†é…çš„æœ€å¤§æ•°ç»„å¤§å°\n     */\n    private static final int MAX_ARRAY_SIZE = Integer.MAX_VALUE - 8;\n\n    /**\n     * ArrayListæ‰©å®¹çš„æ ¸å¿ƒæ–¹æ³•ã€‚\n     */\n    private void grow(int minCapacity) {\n        // oldCapacityä¸ºæ—§å®¹é‡ï¼ŒnewCapacityä¸ºæ–°å®¹é‡\n        int oldCapacity = elementData.length;\n        //å°†oldCapacity å³ç§»ä¸€ä½ï¼Œå…¶æ•ˆæœç›¸å½“äºoldCapacity /2ï¼Œ\n        //æˆ‘ä»¬çŸ¥é“ä½è¿ç®—çš„é€Ÿåº¦è¿œè¿œå¿«äºæ•´é™¤è¿ç®—ï¼Œæ•´å¥è¿ç®—å¼çš„ç»“æœå°±æ˜¯å°†æ–°å®¹é‡æ›´æ–°ä¸ºæ—§å®¹é‡çš„1.5å€ï¼Œ\n        int newCapacity = oldCapacity + (oldCapacity >> 1);\n        //ç„¶åæ£€æŸ¥æ–°å®¹é‡æ˜¯å¦å¤§äºæœ€å°éœ€è¦å®¹é‡ï¼Œè‹¥è¿˜æ˜¯å°äºæœ€å°éœ€è¦å®¹é‡ï¼Œé‚£ä¹ˆå°±æŠŠæœ€å°éœ€è¦å®¹é‡å½“ä½œæ•°ç»„çš„æ–°å®¹é‡ï¼Œ\n        if (newCapacity - minCapacity < 0)\n            newCapacity = minCapacity;\n       // å¦‚æœæ–°å®¹é‡å¤§äº MAX_ARRAY_SIZE,è¿›å…¥(æ‰§è¡Œ) `hugeCapacity()` æ–¹æ³•æ¥æ¯”è¾ƒ minCapacity å’Œ MAX_ARRAY_SIZEï¼Œ\n       //å¦‚æœminCapacityå¤§äºæœ€å¤§å®¹é‡ï¼Œåˆ™æ–°å®¹é‡åˆ™ä¸º`Integer.MAX_VALUE`ï¼Œå¦åˆ™ï¼Œæ–°å®¹é‡å¤§å°åˆ™ä¸º MAX_ARRAY_SIZE å³ä¸º `Integer.MAX_VALUE - 8`ã€‚\n        if (newCapacity - MAX_ARRAY_SIZE > 0)\n            newCapacity = hugeCapacity(minCapacity);\n        // minCapacity is usually close to size, so this is a win:\n        elementData = Arrays.copyOf(elementData, newCapacity);\n    }\n```\n\n**int newCapacity = oldCapacity + (oldCapacity >> 1),æ‰€ä»¥ ArrayList æ¯æ¬¡æ‰©å®¹ä¹‹åå®¹é‡éƒ½ä¼šå˜ä¸ºåŸæ¥çš„ 1.5 å€å·¦å³ï¼ˆoldCapacity ä¸ºå¶æ•°å°±æ˜¯ 1.5 å€ï¼Œå¦åˆ™æ˜¯ 1.5 å€å·¦å³ï¼‰** \n\n**æˆ‘ä»¬å†æ¥é€šè¿‡ä¾‹å­æ¢ç©¶ä¸€ä¸‹grow() æ–¹æ³• ï¼š**\n\n- å½“ add ç¬¬ 1 ä¸ªå…ƒç´ æ—¶ï¼ŒoldCapacity ä¸º 0ï¼Œç»æ¯”è¾ƒåç¬¬ä¸€ä¸ª if åˆ¤æ–­æˆç«‹ï¼ŒnewCapacity = minCapacity(ä¸º 10)ã€‚ä½†æ˜¯ç¬¬äºŒä¸ª if åˆ¤æ–­ä¸ä¼šæˆç«‹ï¼Œå³ newCapacity ä¸æ¯” MAX_ARRAY_SIZE å¤§ï¼Œåˆ™ä¸ä¼šè¿›å…¥ `hugeCapacity` æ–¹æ³•ã€‚æ•°ç»„å®¹é‡ä¸º 10ï¼Œadd æ–¹æ³•ä¸­ return true,size å¢ä¸º 1ã€‚\n- å½“ add ç¬¬ 11 ä¸ªå…ƒç´ è¿›å…¥ grow æ–¹æ³•æ—¶ï¼ŒnewCapacity ä¸º 15ï¼Œæ¯” minCapacityï¼ˆä¸º 11ï¼‰å¤§ï¼Œç¬¬ä¸€ä¸ª if åˆ¤æ–­ä¸æˆç«‹ã€‚æ–°å®¹é‡æ²¡æœ‰å¤§äºæ•°ç»„æœ€å¤§ sizeï¼Œä¸ä¼šè¿›å…¥ hugeCapacity æ–¹æ³•ã€‚æ•°ç»„å®¹é‡æ‰©ä¸º 15ï¼Œadd æ–¹æ³•ä¸­ return true,size å¢ä¸º 11ã€‚\n- ä»¥æ­¤ç±»æ¨Â·Â·Â·Â·Â·Â·\n\n##### 2.5. `hugeCapacity()` \n\nä»ä¸Šé¢ `grow()` æ–¹æ³•æºç æˆ‘ä»¬çŸ¥é“ï¼š å¦‚æœæ–°å®¹é‡å¤§äº MAX_ARRAY_SIZE,è¿›å…¥(æ‰§è¡Œ) `hugeCapacity()` æ–¹æ³•æ¥æ¯”è¾ƒ minCapacity å’Œ MAX_ARRAY_SIZEï¼Œå¦‚æœ minCapacity å¤§äºæœ€å¤§å®¹é‡ï¼Œåˆ™æ–°å®¹é‡åˆ™ä¸º`Integer.MAX_VALUE`ï¼Œå¦åˆ™ï¼Œæ–°å®¹é‡å¤§å°åˆ™ä¸º MAX_ARRAY_SIZE å³ä¸º `Integer.MAX_VALUE - 8`ã€‚\n\n```java\n    private static int hugeCapacity(int minCapacity) {\n        if (minCapacity < 0) // overflow\n            throw new OutOfMemoryError();\n        //å¯¹minCapacityå’ŒMAX_ARRAY_SIZEè¿›è¡Œæ¯”è¾ƒ\n        //è‹¥minCapacityå¤§ï¼Œå°†Integer.MAX_VALUEä½œä¸ºæ–°æ•°ç»„çš„å¤§å°\n        //è‹¥MAX_ARRAY_SIZEå¤§ï¼Œå°†MAX_ARRAY_SIZEä½œä¸ºæ–°æ•°ç»„çš„å¤§å°\n        //MAX_ARRAY_SIZE = Integer.MAX_VALUE - 8;\n        return (minCapacity > MAX_ARRAY_SIZE) ?\n            Integer.MAX_VALUE :\n            MAX_ARRAY_SIZE;\n    }\n```\n\n### Setæ¥å£\n\n#### HashSet çš„å®ç°åŸç†ï¼Ÿ\n\nHashSet æ˜¯åŸºäº HashMap å®ç°çš„ï¼ŒHashSetçš„å€¼å­˜æ”¾äºHashMapçš„keyä¸Šï¼ŒHashMapçš„valueç»Ÿä¸€ä¸ºObjectå¸¸é‡PRESENTï¼Œç”±äº HashMap çš„ key ä¸å…è®¸é‡å¤ï¼Œè€Œ HashSet ä¸å…è®¸é‡å¤çš„å€¼ï¼Œå› æ­¤ HashSet å¯ä»¥åŸºäº HashMap å®ç°ï¼ŒåŸºæœ¬ä¸Šéƒ½æ˜¯ç›´æ¥è°ƒç”¨åº•å±‚ HashMap çš„ç›¸å…³æ–¹æ³•æ¥å®Œæˆã€‚\n\n#### HashSetæ˜¯å¦‚ä½•ä¿è¯æ•°æ®ä¸å¯é‡å¤çš„ï¼Ÿ\n\nå½“ä½ æŠŠå¯¹è±¡åŠ å…¥ hashSet æ—¶ï¼ŒhashSet ä¼šå…ˆè®¡ç®—å¯¹è±¡çš„ hashcode å€¼æ¥åˆ¤æ–­å¯¹è±¡åŠ å…¥çš„ä½ç½®ï¼Œå¦‚æœå‘ç°æœ‰ç›¸åŒ hashcode å€¼çš„å¯¹è±¡ï¼Œè¿™æ—¶ä¼šè°ƒç”¨ equals()æ–¹æ³•æ¥æ£€æŸ¥ hashcode ç›¸ç­‰çš„å¯¹è±¡æ˜¯å¦çœŸçš„ç›¸åŒã€‚å¦‚æœä¸¤è€…ç›¸åŒï¼Œè¡¨æ˜å·²ç»æœ‰äº†ç›¸åŒçš„å¯¹è±¡äº†ï¼ŒhashSet å°±ä¸ä¼šè®©å…¶åŠ å…¥æ“ä½œæˆåŠŸã€‚å¦‚æœä¸åŒçš„è¯ï¼Œå°±ä¼šé‡æ–°æ•£åˆ—åˆ°å…¶ä»–ä½ç½®ã€‚ \n\n```java\n// Dummy value to associate with an Object in the backing Map\nprivate static final Object PRESENT = new Object();\nprivate transient HashMap<E,Object> map;\n\npublic HashSet() {\n    map = new HashMap<>();\n}\n\npublic boolean add(E e) {\n    // è°ƒç”¨HashMapçš„putæ–¹æ³•,PRESENTæ˜¯ä¸€ä¸ªè‡³å§‹è‡³ç»ˆéƒ½ç›¸åŒçš„è™šå€¼\n\treturn map.put(e, PRESENT)==null;\n}\n```\n\n#### åªé‡å†™ hashCode å¯ä»¥å—ï¼Ÿ\n\nä¸¤ä¸ªå¯¹è±¡çš„ hashCode ç›¸åŒï¼Œä½†æ˜¯å†…å®¹å¯èƒ½ä¸åŒï¼Œåœ¨ set ä¸­æ˜æ˜åº”è¯¥æ˜¯ä¸¤ä¸ªä¸åŒçš„å¯¹è±¡ï¼Œè¿™æ—¶å€™åªé€šè¿‡ hashCode åˆ¤æ–­ä»–ä¿©ç›¸åŒä¼šå¯¼è‡´åªæ’å…¥ä¸€ä¸ªå…ƒç´ ã€‚\n\n#### åªé‡å†™ equalså¯ä»¥å—ï¼Ÿ\n\nå¦‚æœåœ¨é‡å†™ equals æ—¶ï¼Œä¸é‡å†™ hashCodeï¼Œå°±ä¼šå¼•èµ·æ¯”å¦‚è¯´å°†ä¸¤ä¸ªç›¸ç­‰çš„è‡ªå®šä¹‰å¯¹è±¡å­˜å‚¨åœ¨ Set é›†åˆæ—¶ï¼Œä¼šå°†è¿™ä¸¤ä¸ªå¯¹è±¡éƒ½è¿›è¡Œæ’å…¥ã€‚ï¼ˆæ— æ³•å»é‡ï¼‰\n\n## Mapæ¥å£\n\n### HashMapçº¿ç¨‹ä¸å®‰å…¨çš„ä¸»è¦ä½“ç°ï¼Ÿ\n\n1. åœ¨jdk1.7ä¸­ï¼Œåœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ï¼Œ**æ‰©å®¹**æ—¶ä¼šé€ æˆæ­»é“¾ã€‚\n\n\t> ä½œè€…ï¼šç£Šå“¥\n\t> é“¾æ¥ï¼šhttps://www.zhihu.com/question/394039290/answer/2314917909\n\t> æ¥æºï¼šçŸ¥ä¹\n\n\t1.1ã€\n\n\tæ­»å¾ªç¯æ˜¯å› ä¸ºå¹¶å‘HashMapæ‰©å®¹å¯¼è‡´çš„ï¼Œå¹¶å‘æ‰©å®¹çš„ç¬¬ä¸€æ­¥ï¼Œçº¿ç¨‹T1å’Œçº¿ç¨‹T2è¦å¯¹HashMapè¿›è¡Œæ‰©å®¹æ“ä½œï¼Œæ­¤æ—¶T1å’ŒT2æŒ‡å‘çš„æ˜¯é“¾è¡¨çš„å¤´ç»“ç‚¹å…ƒç´ Aï¼Œè€ŒT1å’ŒT2çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼Œä¹Ÿå°±æ˜¯T1.nextå’ŒT2.nextæŒ‡å‘çš„æ˜¯BèŠ‚ç‚¹ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š \n\n\t![å¤šçº¿ç¨‹æ‰©å®¹å¯¼è‡´æ­»å¾ªç¯é—®é¢˜-1](https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/v2-e0b4f5ea00cb277bde490f315b9b387f_720w.jpg)\n\n\t1.2ã€\n\n\tæ­»å¾ªç¯çš„ç¬¬äºŒæ­¥æ“ä½œæ˜¯ï¼Œçº¿ç¨‹T2æ—¶é—´ç‰‡ç”¨å®Œè¿›å…¥ä¼‘çœ çŠ¶æ€ï¼Œè€Œçº¿ç¨‹T1å¼€å§‹æ‰§è¡Œæ‰©å®¹æ“ä½œï¼Œä¸€ç›´åˆ°çº¿ç¨‹T1æ‰©å®¹å®Œæˆåï¼Œçº¿ç¨‹T2æ‰è¢«å”¤é†’ï¼Œæ‰©å®¹ä¹‹åçš„åœºæ™¯å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š \n\n\t![å¤šçº¿ç¨‹æ‰©å®¹å¯¼è‡´æ­»å¾ªç¯é—®é¢˜-2](https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/v2-5f78d8ac8af1efc79e7d79a1f3fdc154_r.jpg)\n\n\t ä»ä¸Šå›¾å¯çŸ¥çº¿ç¨‹T1æ‰§è¡Œä¹‹åï¼Œ**å› ä¸ºæ˜¯å¤´æ’æ³•ï¼Œæ‰€ä»¥HashMapçš„é¡ºåºå·²ç»å‘ç”Ÿäº†æ”¹å˜**ï¼Œä½†çº¿ç¨‹T2å¯¹äºå‘ç”Ÿçš„ä¸€åˆ‡æ˜¯ä¸å¯çŸ¥çš„ï¼Œæ‰€ä»¥å®ƒçš„æŒ‡å‘å…ƒç´ ä¾ç„¶æ²¡å˜ï¼Œå¦‚ä¸Šå›¾å±•ç¤ºçš„é‚£æ ·ï¼ŒT2æŒ‡å‘çš„æ˜¯Aå…ƒç´ ï¼ŒT2.nextæŒ‡å‘çš„èŠ‚ç‚¹æ˜¯Bå…ƒç´ ã€‚\n\n\t1.3ã€\n\n\tå½“çº¿ç¨‹T1æ‰§è¡Œå®Œï¼Œè€Œçº¿ç¨‹T2æ¢å¤æ‰§è¡Œæ—¶ï¼Œæ­»å¾ªç¯å°±å»ºç«‹äº†ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š \n\n\t![å¤šçº¿ç¨‹æ‰©å®¹å¯¼è‡´æ­»å¾ªç¯é—®é¢˜-3](https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/v2-bd4a753db8c985119aa4dcd4356609cf_720w.jpg)\n\n\t å› ä¸ºT1æ‰§è¡Œå®Œæ‰©å®¹ä¹‹åBèŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹æ˜¯Aï¼Œè€ŒT2çº¿ç¨‹æŒ‡å‘çš„é¦–èŠ‚ç‚¹æ˜¯Aï¼Œç¬¬äºŒä¸ªèŠ‚ç‚¹æ˜¯Bï¼Œè¿™ä¸ªé¡ºåºåˆšå¥½å’ŒT1æ‰©å®Œå®¹å®Œä¹‹åçš„èŠ‚ç‚¹é¡ºåºæ˜¯ç›¸åçš„ã€‚**T1æ‰§è¡Œå®Œä¹‹åçš„é¡ºåºæ˜¯Båˆ°Aï¼Œè€ŒT2çš„é¡ºåºæ˜¯Aåˆ°Bï¼Œè¿™æ ·AèŠ‚ç‚¹å’ŒBèŠ‚ç‚¹å°±å½¢æˆæ­»å¾ªç¯äº†**ï¼Œè¿™å°±æ˜¯HashMapæ­»å¾ªç¯å¯¼è‡´çš„åŸå› ã€‚\n\n2. åœ¨jdk1.8ä¸­ï¼Œåœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ï¼Œ**æ’å…¥**æ—¶ä¼šå‘ç”Ÿæ•°æ®è¦†ç›–çš„æƒ…å†µï¼ˆ**å°¾æ’æ³•**ï¼‰ã€‚\n\n### HashMapåœ¨JDK1.7å’ŒJDK1.8ä¸­æœ‰å“ªäº›ä¸åŒï¼Ÿ\n\n| ä¸åŒ                         | JDK 1.7                                                      | JDK 1.8                                                      |\n| ---------------------------- | ------------------------------------------------------------ | ------------------------------------------------------------ |\n| **å­˜å‚¨ç»“æ„**                 | æ•°ç»„ + é“¾è¡¨                                                  | æ•°ç»„ + é“¾è¡¨ + çº¢é»‘æ ‘                                         |\n| **hashå€¼è®¡ç®—æ–¹å¼**           | æ‰°åŠ¨å¤„ç† = 4æ¬¡ä½è¿ç®— + 5æ¬¡å¼‚æˆ–è¿ç®—                           | æ‰°åŠ¨å¤„ç† = 1æ¬¡ä½è¿ç®— + 1æ¬¡å¼‚æˆ–è¿ç®—                           |\n| **å­˜æ”¾æ•°æ®çš„è§„åˆ™**           | æ— å†²çªæ—¶ï¼Œå­˜æ”¾æ•°ç»„ï¼›<br />å†²çªæ—¶ï¼Œå­˜æ”¾é“¾è¡¨                   | æ— å†²çªæ—¶ï¼Œå­˜æ”¾æ•°ç»„ï¼›<br />å†²çª & é“¾è¡¨é•¿åº¦ < 8ï¼šæ’å…¥å•é“¾è¡¨ï¼›<br />é“¾è¡¨é•¿åº¦>8ï¼Œå…ˆå°è¯•æ‰©å®¹æ•°ç»„ï¼Œæ•°ç»„é•¿åº¦å¤§äº64<br />é“¾è¡¨è½¬ä¸ºçº¢é»‘æ ‘ï¼Œæ’å…¥åˆ°çº¢é»‘æ ‘ |\n| **æ’å…¥æ•°æ®æ–¹å¼**             | å¤´æ’æ³•                                                       | å°¾æ’æ³•                                                       |\n| **æ‰©å®¹åå­˜å‚¨ä½ç½®çš„è®¡ç®—æ–¹å¼** | æŒ‰ç…§åŸæ¥æ–¹æ³•é‡æ–°è¿›è¡Œè®¡ç®—<br />hashCodeã€æ‰°åŠ¨å‡½æ•°ã€ä¸è¿ç®—h&length-1 | æ ¹æ®å…ƒç´ çš„hashå€¼è¿›è¡Œåˆ¤æ–­ <br />æ‰©å®¹åçš„ä½ç½®=åŸä½ç½® or åŸä½ç½® + æ—§å®¹é‡ |\n\n### HashMapçš„hashç®—æ³•\n\n#### ä»€ä¹ˆæ˜¯å“ˆå¸Œï¼Ÿ\n\nHashï¼Œå°±æ˜¯æŠŠä»»æ„é•¿åº¦çš„è¾“å…¥é€šè¿‡æ•£åˆ—ç®—æ³•ï¼Œå˜æ¢æˆå›ºå®šé•¿åº¦çš„è¾“å‡ºï¼Œè¯¥è¾“å‡ºå°±æ˜¯æ•£åˆ—å€¼ï¼ˆå“ˆå¸Œå€¼ï¼‰ï¼›\n\nhash å€¼ä¸åŒï¼Œè¾“å…¥ä¸€å®šä¸åŒï¼›è¾“å…¥ä¸åŒï¼Œhash å€¼å¯èƒ½ç›¸åŒï¼ˆå³å“ˆå¸Œç¢°æ’ï¼‰\n\n#### ä»€ä¹ˆæ˜¯å“ˆå¸Œå†²çªï¼Ÿ\n\nå½“ä¸¤ä¸ªä¸åŒçš„è¾“å…¥å€¼ï¼Œæ ¹æ®åŒä¸€æ•£åˆ—å‡½æ•°è®¡ç®—å‡ºç›¸åŒçš„æ•£åˆ—å€¼çš„ç°è±¡ï¼Œæˆ‘ä»¬å°±æŠŠå®ƒå«åšå“ˆå¸Œç¢°æ’/å†²çªã€‚\n\n#### HashMapçš„æ•°æ®ç»“æ„\n\nåº•å±‚æ•°æ®ç»“æ„ï¼šæ•°ç»„+é“¾è¡¨\n**æ•°ç»„çš„ç‰¹ç‚¹æ˜¯ï¼šæ–¹ä¾¿æŸ¥æ‰¾ï¼›é“¾è¡¨çš„ç‰¹ç‚¹æ˜¯ï¼šæ–¹ä¾¿æ’å…¥åˆ é™¤**\næ‰€ä»¥æˆ‘ä»¬å°†æ•°ç»„å’Œé“¾è¡¨ç»“åˆåœ¨ä¸€èµ·ï¼Œå‘æŒ¥ä¸¤è€…å„è‡ªçš„ä¼˜åŠ¿ï¼Œä½¿ç”¨ä¸€ç§å«åš**é“¾åœ°å€æ³•**çš„æ–¹å¼å¯ä»¥è§£å†³å“ˆå¸Œå†²çª\n\n> è§£å†³å“ˆå¸Œå†²çªçš„å…¶ä»–æ–¹æ³•ï¼š\n> å¼€æ”¾å®šå€æ³•ï¼ˆå†²çªäº†é€šè¿‡æŸç§æ–¹å¼æ•£åˆ—åˆ°å¦ä¸€ä¸ªä¸å†²çªçš„ä½ç½®ä¸Šï¼‰ï¼›\n> å†å“ˆå¸Œæ³•ï¼ˆæ„é€ å¤šä¸ªä¸åŒçš„å“ˆå¸Œå‡½æ•°ï¼‰ã€‚\n\n![HashMapæ•°æ®ç»“æ„](https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/TyporaNotesaHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy83ODk2ODkwLWM2NmE0YmQ4OTA3ZjQ5ZjYucG5n.png)\n\n#### æ‰°åŠ¨å¤„ç†\n\nç”±äºè®¡ç®—ä¸‹æ ‡æ—¶ï¼Œé€šè¿‡ h & (length - 1)ï¼Œç”±äºhashå€¼èŒƒå›´å¾ˆå¤§ï¼Œè€Œæ•°ç»„é•¿åº¦ç›¸å¯¹æ¥è¯´å°å¾—å¤šï¼Œå¯¼è‡´è¿›è¡Œä¸è¿ç®—æ—¶å‚ä¸è¿ç®—çš„åªæœ‰hashå€¼çš„ä½ä½ï¼Œ**é«˜ä½æ˜¯æ²¡æœ‰èµ·åˆ°ä»»ä½•ä½œç”¨çš„**ï¼Œè¿™å°†ä¼šå¤§å¤§å¢åŠ å“ˆå¸Œç¢°æ’çš„æ¦‚ç‡ã€‚æ‰€ä»¥æˆ‘ä»¬çš„æ€è·¯å°±æ˜¯è®©hashCodeå€¼çš„é«˜ä½ä¹Ÿå‚ä¸è¿ç®—ï¼Œè¿›ä¸€æ­¥é™ä½hashç¢°æ’çš„æ¦‚ç‡ï¼Œä½¿å¾—**æ•°æ®åˆ†å¸ƒæ›´å¹³å‡**ï¼Œæˆ‘ä»¬æŠŠè¿™æ ·çš„æ“ä½œç§°ä¸º**æ‰°åŠ¨**ï¼Œåœ¨**JDK 1.8**ä¸­çš„hash()å‡½æ•°å¦‚ä¸‹ï¼š\n\n```java\nstatic final int hash(Object key) {\n    int h;\n    return (key == null) ? 0 : (h = key.hashCode()) ^ (h >>> 16);\n    // ä¸è‡ªå·±å³ç§»16ä½è¿›è¡Œå¼‚æˆ–è¿ç®—ï¼ˆé«˜ä½ä½å¼‚æˆ–ï¼‰\n}\n```\n\nè¿™æ¯”åœ¨**JDK 1.7**ä¸­ï¼Œæ›´ä¸ºç®€æ´ï¼Œ**ç›¸æ¯”åœ¨1.7ä¸­çš„4æ¬¡ä½è¿ç®—ï¼Œ5æ¬¡å¼‚æˆ–è¿ç®—ï¼ˆ9æ¬¡æ‰°åŠ¨ï¼‰ï¼Œåœ¨1.8ä¸­ï¼Œåªè¿›è¡Œäº†1æ¬¡ä½è¿ç®—å’Œ1æ¬¡å¼‚æˆ–è¿ç®—ï¼ˆ2æ¬¡æ‰°åŠ¨ï¼‰**ï¼›\n\n#### ä¸‹æ ‡è®¡ç®—\n\nåœ¨å¾—åˆ°hashå€¼ä¹‹åï¼Œæˆ‘ä»¬è¦æŠŠè¿™äº›hashå€¼æ˜ å°„åˆ°ç›¸åº”çš„æ•°ç»„ä¸‹æ ‡ä¸Šï¼Œé‚£ä¹ˆå°±å¯ä»¥è€ƒè™‘ä½¿ç”¨ hash % length\n\nè€Œ hash % length==hash & (length-1) å¹¶ä¸”å‰ææ˜¯ length æ˜¯2çš„ n æ¬¡æ–¹ã€‚\nç”±äºé‡‡ç”¨äºŒè¿›åˆ¶ä½æ“ä½œ &ï¼Œç›¸å¯¹äº%èƒ½å¤Ÿæé«˜è¿ç®—æ•ˆç‡ï¼Œå› æ­¤å¯ä»¥å°† HashMap çš„é•¿åº¦è®¾è®¡ä¸º 2 çš„å¹‚æ¬¡æ–¹ã€‚ï¼ˆåˆå§‹åŒ–ä¸º16ï¼Œå¦‚æœæŒ‡å®šåˆå§‹åŒ–å®¹é‡çš„å€¼ï¼Œä¼šæ‰©å®¹è‡³ç¬¬ä¸€ä¸ªå¤§äºè¯¥å®¹é‡çš„ 2 çš„å¹‚æ¬¡æ–¹ä½œä¸ºæ•°ç»„å®¹é‡ï¼‰\n\n```java\nstatic int indexFor(int h, int length){\n     return h & (length - 1);\n}\n```\n\n#### ä¸ºä»€ä¹ˆè¦å°†æ•°ç»„é•¿åº¦è®¾ç½®ä¸º 2 çš„næ¬¡å¹‚å‘¢ï¼Ÿ\n\nå½“æ•°ç»„é•¿åº¦ä¸º2çš„næ¬¡å¹‚çš„æ—¶å€™ï¼Œä¸åŒçš„keyä¸1111ï¼ˆnä¸ªï¼‰è¿›è¡Œä¸é¢„ç®—å¾—åˆ°ç›¸åŒä¸‹æ ‡çš„å‡ ç‡è¾ƒå°ï¼Œå‘ç”Ÿç¢°æ’çš„å‡ ç‡å°ã€‚ \n\n#### JDK1.8æ–°å¢çº¢é»‘æ ‘\n\nä¸ºäº†è§£å†³ä¸€æ¡é“¾ä¸Šçš„å…ƒç´ è¿‡å¤šï¼ŒæŸ¥æ‰¾æ•ˆç‡ä½çš„é—®é¢˜ï¼Œå°†é“¾è¡¨è½¬åŒ–ä¸ºçº¢é»‘æ ‘ï¼Œéå†å¤æ‚åº¦é™ä½è‡³O(logn)ï¼›\n\n#### HashMapæ˜¯ä½¿ç”¨äº†å“ªäº›æ–¹æ³•æ¥æœ‰æ•ˆè§£å†³å“ˆå¸Œå†²çªçš„ï¼Ÿ\n\n1. ä½¿ç”¨é“¾åœ°å€æ³•ï¼ˆä½¿ç”¨æ•£åˆ—è¡¨ï¼‰æ¥é“¾æ¥æ‹¥æœ‰ç›¸åŒhashå€¼çš„æ•°æ®ï¼›\n2. ä½¿ç”¨2æ¬¡æ‰°åŠ¨å‡½æ•°ï¼ˆ1æ¬¡ä½è¿ç®—å’Œ1æ¬¡å¼‚æˆ–è¿ç®—ï¼‰æ¥é™ä½å“ˆå¸Œå†²çªçš„æ¦‚ç‡ï¼Œä½¿å¾—æ•°æ®åˆ†å¸ƒæ›´å¹³å‡ï¼›\n3. å¼•å…¥çº¢é»‘æ ‘è¿›ä¸€æ­¥é™ä½éå†çš„æ—¶é—´å¤æ‚åº¦ï¼Œä½¿å¾—éå†æ›´å¿«ã€‚\n\n### HashMapçš„getæ–¹æ³•çš„å…·ä½“æµç¨‹ï¼Ÿ\n\n1. å…ˆä½¿ç”¨keyçš„hashCodeã€æ‰°åŠ¨å¤„ç†ã€ä¸æ•°ç»„é•¿åº¦-1 è¿›è¡Œä¸è¿ç®—ï¼ˆå¯¹æ•°ç»„é•¿åº¦å»ä½™ï¼‰å¾—åˆ°æ§½ä½ï¼›\n2. åˆ¤æ–­é¦–ç»“ç‚¹ï¼Œå¦‚æœé¦–ç»“ç‚¹å’Œkeyçš„ **hashå€¼** ï¼ˆhashCodeå€¼ç»è¿‡æ‰°åŠ¨å‡½æ•°å¤„ç†åçš„å€¼ï¼‰ç›¸ç­‰ï¼Œå¹¶ä¸”ä¸¤è€…çš„ **keyå€¼åœ°å€ç›¸ç­‰ã€equalsç›¸ç­‰**ï¼Œåˆ™è¿”å›é¦–ç»“ç‚¹ï¼›\n3. å¦åˆ™ï¼Œåˆ™çº¢é»‘æ ‘æˆ–è€…é“¾è¡¨ä¸­è¿›è¡ŒæŸ¥æ‰¾ï¼ŒæŸ¥æ‰¾æ—¶åˆ¤æ–­ä¸¤ä¸ªkeyçš„hashå€¼ã€keyå€¼åœ°å€ç›¸ç­‰ã€equalsæ˜¯å¦éƒ½ç›¸ç­‰ã€‚\n\n```java\npublic V get(Object key) {\n    Node<K,V> e;\n    return (e = getNode(hash(key), key)) == null ? null : e.value;\n}\n\nfinal Node<K,V> getNode(int hash, Object key) {\n    Node<K,V>[] tab; Node<K,V> first, e; int n; K k;\n    \n    //Nodeæ•°ç»„ä¸ä¸ºç©ºï¼Œæ•°ç»„é•¿åº¦å¤§äº0ï¼Œæ•°ç»„å¯¹åº”ä¸‹æ ‡çš„Nodeä¸ä¸ºç©º\n    if ((tab = table) != null && (n = tab.length) > 0 &&\n        //ä¹Ÿæ˜¯é€šè¿‡ hash & (length - 1) æ¥æ›¿ä»£ hash % length çš„\n        (first = tab[(n - 1) & hash]) != null) {\n        \n        //å…ˆå’Œç¬¬ä¸€ä¸ªç»“ç‚¹æ¯”ï¼Œhashå€¼ç›¸ç­‰ä¸”keyä¸ä¸ºç©ºï¼Œkeyçš„ç¬¬ä¸€ä¸ªç»“ç‚¹çš„keyçš„å¯¹è±¡åœ°å€å’Œå€¼å‡ç›¸ç­‰\n        //åˆ™è¿”å›ç¬¬ä¸€ä¸ªç»“ç‚¹\n        if (first.hash == hash && // always check first node\n            ((k = first.key) == key || (key != null && key.equals(k))))\n            return first;\n        //å¦‚æœkeyå’Œç¬¬ä¸€ä¸ªç»“ç‚¹ä¸åŒ¹é…ï¼Œåˆ™çœ‹.nextæ˜¯å¦ä¸ºç©ºï¼Œä¸ä¸ºnullåˆ™ç»§ç»­ï¼Œä¸ºç©ºåˆ™è¿”å›null\n        if ((e = first.next) != null) {\n            //å¦‚æœæ­¤æ—¶æ˜¯çº¢é»‘æ ‘çš„ç»“æ„ï¼Œåˆ™è¿›è¡Œå¤„ç†getTreeNode()æ–¹æ³•æœç´¢key\n            if (first instanceof TreeNode)\n                return ((TreeNode<K,V>)first).getTreeNode(hash, key);\n            //æ˜¯é“¾è¡¨ç»“æ„çš„è¯å°±ä¸€ä¸ªä¸€ä¸ªéå†ï¼Œç›´åˆ°æ‰¾åˆ°keyå¯¹åº”çš„ç»“ç‚¹ï¼Œ\n            //æˆ–è€…eçš„ä¸‹ä¸€ä¸ªç»“ç‚¹ä¸ºnullé€€å‡ºå¾ªç¯\n            do {\n                if (e.hash == hash &&\n                    ((k = e.key) == key || (key != null && key.equals(k))))\n                    return e;\n            } while ((e = e.next) != null);\n        }\n    }\n    return null;\n}\n```\n\n### HashMapçš„putæ–¹æ³•çš„å…·ä½“æµç¨‹ï¼Ÿ\n\n1. å¦‚æœtableæœªåˆå§‹åŒ–æˆ–è€…é•¿åº¦ä¸º0ç©ºåˆ™æ‰§è¡Œresize()è¿›è¡Œæ‰©å®¹ï¼Œè½¬å‘â‘¡\n2. æ ¹æ®é”®å€¼keyè®¡ç®—hashå€¼å¾—åˆ°æ’å…¥çš„æ•°ç»„ç´¢å¼•iï¼Œå¦‚æœtable[i]==nullï¼Œå³æ•°ç»„è¯¥ä½ç½®ä¸Šæ²¡æœ‰å…ƒç´ ï¼Œç›´æ¥æ–°å»ºèŠ‚ç‚¹æ’å…¥ï¼Œè½¬å‘â‘¥åˆ¤æ–­æ˜¯å¦éœ€è¦æ‰©å®¹ï¼Œå¦‚æœtable[i]ä¸ä¸ºç©ºï¼Œè½¬å‘â‘¢ï¼›\n3. åˆ¤æ–­table[i]çš„é¦–ä¸ªå…ƒç´ æ˜¯å¦å’Œkeyä¸€æ ·ï¼Œå¦‚æœç›¸åŒï¼ˆhashCodeç›¸åŒã€keyåœ°å€ç›¸åŒã€equalsç›¸åŒï¼‰ç›´æ¥è¦†ç›–valueï¼Œå¦åˆ™è½¬å‘â‘£ï¼›\n4. åˆ¤æ–­table[i] æ˜¯å¦ä¸ºtreeNodeï¼Œå³table[i] æ˜¯å¦æ˜¯çº¢é»‘æ ‘ï¼Œå¦‚æœæ˜¯çº¢é»‘æ ‘ï¼Œåˆ™ç›´æ¥åœ¨æ ‘ä¸­æ’å…¥é”®å€¼å¯¹ï¼Œå¦åˆ™è½¬å‘â‘¤ï¼›\n5. éå†table[i]ï¼Œåˆ¤æ–­é“¾è¡¨é•¿åº¦æ˜¯å¦å¤§äº8ï¼Œå¤§äº8çš„è¯æŠŠé“¾è¡¨è½¬æ¢ä¸ºçº¢é»‘æ ‘ï¼Œåœ¨çº¢é»‘æ ‘ä¸­æ‰§è¡Œæ’å…¥æ“ä½œï¼Œå¦åˆ™è¿›è¡Œé“¾è¡¨çš„æ’å…¥æ“ä½œï¼›éå†è¿‡ç¨‹ä¸­è‹¥å‘ç°keyå·²ç»å­˜åœ¨ç›´æ¥è¦†ç›–valueå³å¯ï¼›\n6. æ’å…¥æˆåŠŸåï¼Œåˆ¤æ–­å®é™…å­˜åœ¨çš„é”®å€¼å¯¹æ•°é‡sizeæ˜¯å¦è¶…å‡ºå½“å‰æœ€å¤§å®¹é‡thresholdï¼Œå¦‚æœè¶…è¿‡ï¼Œè¿›è¡Œæ‰©å®¹ã€‚\n\n```java\npublic V put(K key, V value) {\n    return putVal(hash(key), key, value, false, true);\n}\n\nstatic final int hash(Object key) {\n    int h;\n    return (key == null) ? 0 : (h = key.hashCode()) ^ (h >>> 16);\n}\n\n//å®ç°Map.putå’Œç›¸å…³æ–¹æ³•\nfinal V putVal(int hash, K key, V value, boolean onlyIfAbsent,\n                   boolean evict) {\n    Node<K,V>[] tab; Node<K,V> p; int n, i;\n    // æ­¥éª¤â‘ ï¼štabä¸ºç©ºåˆ™åˆ›å»º \n    // tableæœªåˆå§‹åŒ–æˆ–è€…é•¿åº¦ä¸º0ï¼Œè¿›è¡Œæ‰©å®¹\n    if ((tab = table) == null || (n = tab.length) == 0)\n        n = (tab = resize()).length;\n    // æ­¥éª¤â‘¡ï¼šè®¡ç®—indexï¼Œå¹¶å¯¹nullåšå¤„ç†  \n    // (n - 1) & hash ç¡®å®šå…ƒç´ å­˜æ”¾åœ¨å“ªä¸ªæ¡¶ä¸­ï¼Œæ¡¶ä¸ºç©ºï¼Œæ–°ç”Ÿæˆç»“ç‚¹æ”¾å…¥æ¡¶ä¸­(æ­¤æ—¶ï¼Œè¿™ä¸ªç»“ç‚¹æ˜¯æ”¾åœ¨æ•°ç»„ä¸­)\n    if ((p = tab[i = (n - 1) & hash]) == null)\n        tab[i] = newNode(hash, key, value, null);\n    // æ¡¶ä¸­å·²ç»å­˜åœ¨å…ƒç´ \n    else {\n        Node<K,V> e; K k;\n        // æ­¥éª¤â‘¢ï¼šèŠ‚ç‚¹keyå­˜åœ¨ï¼Œç›´æ¥è¦†ç›–value \n        // æ¯”è¾ƒæ¡¶ä¸­ç¬¬ä¸€ä¸ªå…ƒç´ (æ•°ç»„ä¸­çš„ç»“ç‚¹)çš„hashå€¼ç›¸ç­‰ï¼Œkeyç›¸ç­‰\n        if (p.hash == hash &&\n            ((k = p.key) == key || (key != null && key.equals(k))))\n                // å°†ç¬¬ä¸€ä¸ªå…ƒç´ èµ‹å€¼ç»™eï¼Œç”¨eæ¥è®°å½•\n                e = p;\n        // æ­¥éª¤â‘£ï¼šåˆ¤æ–­è¯¥é“¾ä¸ºçº¢é»‘æ ‘ \n        // hashå€¼ä¸ç›¸ç­‰ï¼Œå³keyä¸ç›¸ç­‰ï¼›ä¸ºçº¢é»‘æ ‘ç»“ç‚¹\n        // å¦‚æœå½“å‰å…ƒç´ ç±»å‹ä¸ºTreeNodeï¼Œè¡¨ç¤ºä¸ºçº¢é»‘æ ‘ï¼ŒputTreeValè¿”å›å¾…å­˜æ”¾çš„node, eå¯èƒ½ä¸ºnull\n        else if (p instanceof TreeNode)\n            // æ”¾å…¥æ ‘ä¸­\n            e = ((TreeNode<K,V>)p).putTreeVal(this, tab, hash, key, value);\n        // æ­¥éª¤â‘¤ï¼šè¯¥é“¾ä¸ºé“¾è¡¨ \n        // ä¸ºé“¾è¡¨ç»“ç‚¹\n        else {\n            // åœ¨é“¾è¡¨æœ€æœ«æ’å…¥ç»“ç‚¹\n            for (int binCount = 0; ; ++binCount) {\n                // åˆ°è¾¾é“¾è¡¨çš„å°¾éƒ¨\n                \n                //åˆ¤æ–­è¯¥é“¾è¡¨å°¾éƒ¨æŒ‡é’ˆæ˜¯ä¸æ˜¯ç©ºçš„\n                if ((e = p.next) == null) {\n                    // åœ¨å°¾éƒ¨æ’å…¥æ–°ç»“ç‚¹\n                    p.next = newNode(hash, key, value, null);\n                    //åˆ¤æ–­é“¾è¡¨çš„é•¿åº¦æ˜¯å¦è¾¾åˆ°è½¬åŒ–çº¢é»‘æ ‘çš„ä¸´ç•Œå€¼ï¼Œä¸´ç•Œå€¼ä¸º8\n                    if (binCount >= TREEIFY_THRESHOLD - 1) // -1 for 1st\n                        //é“¾è¡¨ç»“æ„è½¬æ ‘å½¢ç»“æ„\n                        treeifyBin(tab, hash);\n                    // è·³å‡ºå¾ªç¯\n                    break;\n                }\n                // åˆ¤æ–­é“¾è¡¨ä¸­ç»“ç‚¹çš„keyå€¼ä¸æ’å…¥çš„å…ƒç´ çš„keyå€¼æ˜¯å¦ç›¸ç­‰\n                if (e.hash == hash &&\n                    ((k = e.key) == key || (key != null && key.equals(k))))\n                    // ç›¸ç­‰ï¼Œè·³å‡ºå¾ªç¯\n                    break;\n                // ç”¨äºéå†æ¡¶ä¸­çš„é“¾è¡¨ï¼Œä¸å‰é¢çš„e = p.nextç»„åˆï¼Œå¯ä»¥éå†é“¾è¡¨\n                p = e;\n            }\n        }\n        //åˆ¤æ–­å½“å‰çš„keyå·²ç»å­˜åœ¨çš„æƒ…å†µä¸‹ï¼Œå†æ¥ä¸€ä¸ªç›¸åŒçš„hashå€¼ã€keyå€¼æ—¶ï¼Œè¿”å›æ–°æ¥çš„valueè¿™ä¸ªå€¼\n        if (e != null) { \n            // è®°å½•eçš„value\n            V oldValue = e.value;\n            // onlyIfAbsentä¸ºfalseæˆ–è€…æ—§å€¼ä¸ºnull\n            if (!onlyIfAbsent || oldValue == null)\n                //ç”¨æ–°å€¼æ›¿æ¢æ—§å€¼\n                e.value = value;\n            // è®¿é—®åå›è°ƒ\n            afterNodeAccess(e);\n            // è¿”å›æ—§å€¼\n            return oldValue;\n        }\n    }\n    // ç»“æ„æ€§ä¿®æ”¹\n    ++modCount;\n    // æ­¥éª¤â‘¥ï¼šè¶…è¿‡æœ€å¤§å®¹é‡å°±æ‰©å®¹ \n    // å®é™…å¤§å°å¤§äºé˜ˆå€¼åˆ™æ‰©å®¹\n    if (++size > threshold)\n        resize();\n    // æ’å…¥åå›è°ƒ\n    afterNodeInsertion(evict);\n    return null;\n}\n```\n\n### HashMapçš„æ‰©å®¹æ“ä½œæ˜¯æ€ä¹ˆå®ç°çš„ï¼Ÿ\n\nâ‘ .åœ¨jdk1.8ä¸­ï¼Œresizeæ–¹æ³•æ˜¯åœ¨hashmapä¸­çš„é”®å€¼å¯¹ï¼ˆå…ƒç´ æ•°é‡ï¼‰å¤§äºé˜€å€¼æ—¶ï¼ˆé˜ˆå€¼ä¸ºå®¹é‡*è´Ÿè½½å› å­ï¼‰æ‰©å®¹ä¸ºåŸå®¹é‡çš„2å€ï¼Œæˆ–è€…åˆå§‹åŒ–æ—¶ï¼ˆæ‰©å®¹ä¸º16ï¼‰ï¼Œå°±è°ƒç”¨resizeæ–¹æ³•è¿›è¡Œæ‰©å®¹ï¼›\n\nâ‘¡.åœ¨1.7ä¸­ï¼Œæ‰©å®¹ä¹‹åéœ€è¦é‡æ–°å»è®¡ç®—å…¶Hashå€¼ï¼Œæ ¹æ®Hashå€¼å¯¹å…¶è¿›è¡Œåˆ†å‘ï¼Œä½†åœ¨1.8ç‰ˆæœ¬ä¸­ï¼Œåˆ™æ˜¯æ ¹æ®åœ¨åŒä¸€ä¸ªæ¡¶çš„ä½ç½®ä¸­è¿›è¡Œåˆ¤æ–­(e.hash & oldCap)æ˜¯å¦ä¸º0ï¼Œé‡æ–°è¿›è¡Œhashåˆ†é…åï¼Œè¯¥å…ƒç´ hashå€¼ä¸æ—§å®¹é‡ä¸è¿ç®—ä¸º0åˆ™ç•™åœ¨åŸå§‹ä½ç½®ï¼Œhashå€¼ä¸æ—§å®¹é‡ä¸è¿ç®—ä¸º1åˆ™ç§»åŠ¨åˆ° åŸä½ç½® + oldCap è¿™ä¸ªä½ç½®ä¸Š\n\n![HashMapçš„resizeæ“ä½œ](https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/TyporaNotes20190128152700351.png)\n\n```java\nfinal Node<K,V>[] resize() {\n    Node<K,V>[] oldTab = table;//oldTabæŒ‡å‘hashæ¡¶æ•°ç»„\n    int oldCap = (oldTab == null) ? 0 : oldTab.length;\n    int oldThr = threshold;\n    int newCap, newThr = 0;\n    if (oldCap > 0) {//å¦‚æœoldCapä¸ä¸ºç©ºçš„è¯ï¼Œå°±æ˜¯hashæ¡¶æ•°ç»„ä¸ä¸ºç©º\n        if (oldCap >= MAXIMUM_CAPACITY) {//å¦‚æœå¤§äºæœ€å¤§å®¹é‡äº†ï¼Œå°±èµ‹å€¼ä¸ºæ•´æ•°æœ€å¤§çš„é˜€å€¼\n            threshold = Integer.MAX_VALUE;\n            return oldTab;//è¿”å›\n        }//å¦‚æœå½“å‰hashæ¡¶æ•°ç»„çš„é•¿åº¦åœ¨æ‰©å®¹åä»ç„¶å°äºæœ€å¤§å®¹é‡ å¹¶ä¸”oldCapå¤§äºé»˜è®¤å€¼16\n        else if ((newCap = oldCap << 1) < MAXIMUM_CAPACITY &&\n                 oldCap >= DEFAULT_INITIAL_CAPACITY)\n            newThr = oldThr << 1; // double threshold åŒå€æ‰©å®¹é˜€å€¼threshold\n    }\n    // æ—§çš„å®¹é‡ä¸º0ï¼Œä½†thresholdå¤§äºé›¶ï¼Œä»£è¡¨æœ‰å‚æ„é€ æœ‰capä¼ å…¥ï¼Œthresholdå·²ç»è¢«åˆå§‹åŒ–æˆæœ€å°2çš„næ¬¡å¹‚\n    // ç›´æ¥å°†è¯¥å€¼èµ‹ç»™æ–°çš„å®¹é‡\n    else if (oldThr > 0) // initial capacity was placed in threshold\n        newCap = oldThr;\n    // æ— å‚æ„é€ åˆ›å»ºçš„mapï¼Œç»™å‡ºé»˜è®¤å®¹é‡å’Œthreshold 16, 16*0.75\n    else {               // zero initial threshold signifies using defaults\n        newCap = DEFAULT_INITIAL_CAPACITY;\n        newThr = (int)(DEFAULT_LOAD_FACTOR * DEFAULT_INITIAL_CAPACITY);\n    }\n    // æ–°çš„threshold = æ–°çš„cap * 0.75\n    if (newThr == 0) {\n        float ft = (float)newCap * loadFactor;\n        newThr = (newCap < MAXIMUM_CAPACITY && ft < (float)MAXIMUM_CAPACITY ?\n                  (int)ft : Integer.MAX_VALUE);\n    }\n    threshold = newThr;\n    // è®¡ç®—å‡ºæ–°çš„æ•°ç»„é•¿åº¦åèµ‹ç»™å½“å‰æˆå‘˜å˜é‡table\n    @SuppressWarnings({\"rawtypes\",\"unchecked\"})\n        Node<K,V>[] newTab = (Node<K,V>[])new Node[newCap];//æ–°å»ºhashæ¡¶æ•°ç»„\n    table = newTab;//å°†æ–°æ•°ç»„çš„å€¼å¤åˆ¶ç»™æ—§çš„hashæ¡¶æ•°ç»„\n    // å¦‚æœåŸå…ˆçš„æ•°ç»„æ²¡æœ‰åˆå§‹åŒ–ï¼Œé‚£ä¹ˆresizeçš„åˆå§‹åŒ–å·¥ä½œåˆ°æ­¤ç»“æŸï¼Œå¦åˆ™è¿›å…¥æ‰©å®¹å…ƒç´ é‡æ’é€»è¾‘ï¼Œä½¿å…¶å‡åŒ€çš„åˆ†æ•£\n    if (oldTab != null) {\n        // éå†æ–°æ•°ç»„çš„æ‰€æœ‰æ¡¶ä¸‹æ ‡\n        for (int j = 0; j < oldCap; ++j) {\n            Node<K,V> e;\n            if ((e = oldTab[j]) != null) {\n                // æ—§æ•°ç»„çš„æ¡¶ä¸‹æ ‡èµ‹ç»™ä¸´æ—¶å˜é‡eï¼Œå¹¶ä¸”è§£é™¤æ—§æ•°ç»„ä¸­çš„å¼•ç”¨ï¼Œå¦åˆ™å°±æ•°ç»„æ— æ³•è¢«GCå›æ”¶\n                oldTab[j] = null;\n                // å¦‚æœe.next==nullï¼Œä»£è¡¨æ¡¶ä¸­å°±ä¸€ä¸ªå…ƒç´ ï¼Œä¸å­˜åœ¨é“¾è¡¨æˆ–è€…çº¢é»‘æ ‘\n                if (e.next == null)\n                    // ç”¨åŒæ ·çš„hashæ˜ å°„ç®—æ³•æŠŠè¯¥å…ƒç´ åŠ å…¥æ–°çš„æ•°ç»„\n                    newTab[e.hash & (newCap - 1)] = e;\n                // å¦‚æœeæ˜¯TreeNodeå¹¶ä¸”e.next!=nullï¼Œé‚£ä¹ˆå¤„ç†æ ‘ä¸­å…ƒç´ çš„é‡æ’\n                else if (e instanceof TreeNode)\n                    ((TreeNode<K,V>)e).split(this, newTab, j, oldCap);\n                // eæ˜¯é“¾è¡¨çš„å¤´å¹¶ä¸”e.next!=nullï¼Œé‚£ä¹ˆå¤„ç†é“¾è¡¨ä¸­å…ƒç´ é‡æ’\n                else { // preserve order\n                    // loHead,loTail ä»£è¡¨æ‰©å®¹åä¸ç”¨å˜æ¢ä¸‹æ ‡ï¼Œè§æ³¨1\n                    Node<K,V> loHead = null, loTail = null;\n                    // hiHead,hiTail ä»£è¡¨æ‰©å®¹åå˜æ¢ä¸‹æ ‡ï¼Œè§æ³¨1\n                    Node<K,V> hiHead = null, hiTail = null;\n                    Node<K,V> next;\n                    // éå†é“¾è¡¨\n                    do {             \n                        next = e.next;\n                        if ((e.hash & oldCap) == 0) {\n                            if (loTail == null)\n                                // åˆå§‹åŒ–headæŒ‡å‘é“¾è¡¨å½“å‰å…ƒç´ eï¼Œeä¸ä¸€å®šæ˜¯é“¾è¡¨çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œåˆå§‹åŒ–åloHead\n                                // ä»£è¡¨ä¸‹æ ‡ä¿æŒä¸å˜çš„é“¾è¡¨çš„å¤´å…ƒç´ \n                                loHead = e;\n                            else                                \n                                // loTail.nextæŒ‡å‘å½“å‰e\n                                loTail.next = e;\n                            // loTailæŒ‡å‘å½“å‰çš„å…ƒç´ e\n                            // åˆå§‹åŒ–åï¼ŒloTailå’ŒloHeadæŒ‡å‘ç›¸åŒçš„å†…å­˜ï¼Œæ‰€ä»¥å½“loTail.nextæŒ‡å‘ä¸‹ä¸€ä¸ªå…ƒç´ æ—¶ï¼Œ\n                            // åº•å±‚æ•°ç»„ä¸­çš„å…ƒç´ çš„nextå¼•ç”¨ä¹Ÿç›¸åº”å‘ç”Ÿå˜åŒ–ï¼Œé€ æˆlowHead.next.next.....\n                            // è·ŸéšloTailåŒæ­¥ï¼Œä½¿å¾—lowHeadå¯ä»¥é“¾æ¥åˆ°æ‰€æœ‰å±äºè¯¥é“¾è¡¨çš„å…ƒç´ ã€‚\n                            loTail = e;                           \n                        }\n                        else {\n                            if (hiTail == null)\n                                // åˆå§‹åŒ–headæŒ‡å‘é“¾è¡¨å½“å‰å…ƒç´ e, åˆå§‹åŒ–åhiHeadä»£è¡¨ä¸‹æ ‡æ›´æ”¹çš„é“¾è¡¨å¤´å…ƒç´ \n                                hiHead = e;\n                            else\n                                hiTail.next = e;\n                            hiTail = e;\n                        }\n                    } while ((e = next) != null);\n                    // éå†ç»“æŸ, å°†tailæŒ‡å‘nullï¼Œå¹¶æŠŠé“¾è¡¨å¤´æ”¾å…¥æ–°æ•°ç»„çš„ç›¸åº”ä¸‹æ ‡ï¼Œå½¢æˆæ–°çš„æ˜ å°„ã€‚\n                    if (loTail != null) {\n                        loTail.next = null;\n                        newTab[j] = loHead;\n                    }\n                    if (hiTail != null) {\n                        hiTail.next = null;\n                        newTab[j + oldCap] = hiHead;\n                    }\n                }\n            }\n        }\n    }\n    return newTab;\n}\n```\n\n### HashMapè´Ÿè½½å› å­ä¸ºä»€ä¹ˆè®¾ç½®ä¸º 0.75?\n\nhashmapçš„æºç ä¸­æœ‰ä¸€æ®µæ³¨é‡Šè§£é‡Šäº†ä¸ºä»€ä¹ˆè®¾ç½®ä¸º0.75ï¼Œæ˜¯**ç©ºé—´å’Œæ—¶é—´æ•ˆç‡çš„æŠ˜ä¸­è€ƒè™‘**ã€‚\n\n### èƒ½å¦ä½¿ç”¨ä»»ä½•ç±»ä½œä¸º Map çš„ keyï¼Ÿ\n\nå¯ä»¥ä½¿ç”¨ä»»ä½•ç±»ä½œä¸º Map çš„ keyï¼Œå‰ææ˜¯è¯¥ç±»é‡å†™äº†hashCodeå’Œequalsæ–¹æ³•ã€‚é‡å†™hashCode() æ˜¯ä¸ºäº†è®¡ç®—æ•°æ®çš„å­˜å‚¨ä½ç½®ï¼Œé‡å†™equalsæ–¹æ³•æ˜¯ä¸ºäº†ç¡®ä¿keyåœ¨å“ˆå¸Œè¡¨ä¸­çš„å”¯ä¸€æ€§ã€‚æœ€ç»ˆç›®çš„æ˜¯ä¸ºäº†ä¿è¯ Map ä¸­é”®keyçš„å”¯ä¸€æ€§ã€‚\n\n### ä¸ºä»€ä¹ˆHashMapä¸­Stringã€Integerè¿™æ ·çš„åŒ…è£…ç±»é€‚åˆä½œä¸ºkeyï¼Ÿ\n\né‡å†™äº†hashCodeå’Œequalsæ–¹æ³•ï¼Œä¿è¯äº† Map ä¸­é”®**keyçš„å”¯ä¸€æ€§**ã€‚å¹¶ä¸”ä»–ä»¬éƒ½ä¸å¯å˜ï¼Œå¯ä»¥å°†å®ƒä»¬çš„hashå€¼**ç¼“å­˜ä¸‹æ¥ï¼Œæé«˜æ•ˆç‡**ã€‚\n\n### HashMap ä¸ HashTable æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\n\n1. **çº¿ç¨‹å®‰å…¨**ï¼š HashMap æ˜¯éçº¿ç¨‹å®‰å…¨çš„ï¼ŒHashTable æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå†…éƒ¨çš„æ–¹æ³•åŸºæœ¬éƒ½ç»è¿‡ `synchronized` ä¿®é¥°ï¼›\n2. **æ•ˆç‡**ï¼š å› ä¸ºçº¿ç¨‹å®‰å…¨çš„é—®é¢˜ synchronizedï¼ŒHashMap è¦æ¯” HashTable æ•ˆç‡é«˜ä¸€ç‚¹ï¼›\n3. **å¯¹Null key å’ŒNull valueçš„æ”¯æŒ**ï¼š HashMap ä¸­ï¼Œnull å¯ä»¥ä½œä¸ºé”®ï¼Œè¿™æ ·çš„é”®åªæœ‰ä¸€ä¸ªï¼Œå¯ä»¥æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªé”®æ‰€å¯¹åº”çš„å€¼ä¸º nullã€‚ä½†æ˜¯åœ¨ HashTable ä¸­ put è¿›çš„é”®å€¼åªè¦æœ‰ä¸€ä¸ª nullï¼Œç›´æ¥æŠ›NullPointerExceptionï¼›\n4. **åˆå§‹å®¹é‡å¤§å°å’Œæ¯æ¬¡æ‰©å……å®¹é‡å¤§å°çš„ä¸åŒ **ï¼š \n\tâ‘ åˆ›å»ºæ—¶å¦‚æœä¸æŒ‡å®šå®¹é‡åˆå§‹å€¼ï¼ŒHashTable é»˜è®¤çš„åˆå§‹å¤§å°ä¸º11ï¼Œä¹‹åæ¯æ¬¡æ‰©å……ï¼Œå®¹é‡å˜ä¸ºåŸæ¥çš„2n+1ã€‚HashMap é»˜è®¤çš„åˆå§‹åŒ–å¤§å°ä¸º16ã€‚ä¹‹åæ¯æ¬¡æ‰©å……ï¼Œå®¹é‡å˜ä¸ºåŸæ¥çš„2å€ï¼›\n\tâ‘¡åˆ›å»ºæ—¶å¦‚æœç»™å®šäº†å®¹é‡åˆå§‹å€¼ï¼Œé‚£ä¹ˆ HashTable ä¼šç›´æ¥ä½¿ç”¨ä½ ç»™å®šçš„å¤§å°ï¼Œè€Œ HashMap ä¼šå°†å…¶æ‰©å……ä¸º2çš„å¹‚æ¬¡æ–¹å¤§å°ã€‚ä¹Ÿå°±æ˜¯è¯´ HashMap æ€»æ˜¯ä½¿ç”¨2çš„å¹‚ä½œä¸ºå“ˆå¸Œè¡¨çš„å¤§å°ï¼›\n5. **åº•å±‚æ•°æ®ç»“æ„**ï¼š JDK1.8 ä»¥åçš„ HashMap åœ¨è§£å†³å“ˆå¸Œå†²çªæ—¶æœ‰äº†è¾ƒå¤§çš„å˜åŒ–ï¼Œå½“é“¾è¡¨é•¿åº¦å¤§äºé˜ˆå€¼ï¼ˆé»˜è®¤ä¸º8ï¼‰æ—¶ï¼Œå°†é“¾è¡¨è½¬åŒ–ä¸ºçº¢é»‘æ ‘ï¼Œä»¥å‡å°‘æœç´¢æ—¶é—´ã€‚HashTable æ²¡æœ‰è¿™æ ·çš„æœºåˆ¶ã€‚\n\n### ConcurrentHashMap å’Œ HashTable çš„åŒºåˆ«ï¼Ÿ\n\nConcurrentHashMap å’Œ HashTable çš„åŒºåˆ«ä¸»è¦ä½“ç°åœ¨å®ç°çº¿ç¨‹å®‰å…¨çš„æ–¹å¼ä¸Šä¸åŒã€‚\n\n- **åº•å±‚æ•°æ®ç»“æ„**ï¼š \n\tJDK1.7çš„ ConcurrentHashMap åº•å±‚é‡‡ç”¨ **åˆ†æ®µçš„æ•°ç»„+é“¾è¡¨** å®ç°ï¼ŒJDK1.8 é‡‡ç”¨çš„æ•°æ®ç»“æ„è·ŸHashMap1.8çš„ç»“æ„ä¸€æ ·ï¼Œæ•°ç»„+é“¾è¡¨/çº¢é»‘äºŒå‰æ ‘ã€‚\n\tHashTable å’Œ JDK1.8 ä¹‹å‰çš„ HashMap çš„åº•å±‚æ•°æ®ç»“æ„ç±»ä¼¼éƒ½æ˜¯é‡‡ç”¨ **æ•°ç»„+é“¾è¡¨** çš„å½¢å¼ï¼Œæ•°ç»„æ˜¯ HashMap çš„ä¸»ä½“ï¼Œé“¾è¡¨åˆ™æ˜¯ä¸»è¦ä¸ºäº†è§£å†³å“ˆå¸Œå†²çªè€Œå­˜åœ¨çš„ï¼›\n- **å®ç°çº¿ç¨‹å®‰å…¨çš„æ–¹å¼ï¼ˆé‡è¦ï¼‰**ï¼š \n\tâ‘  **åœ¨JDK1.7çš„æ—¶å€™ï¼ŒConcurrentHashMapä½¿ç”¨åˆ†æ®µé”** å¯¹æ•´ä¸ªæ¡¶æ•°ç»„è¿›è¡Œäº†åˆ†å‰²åˆ†æ®µ(Segmenté”ç»§æ‰¿ReentrantLock)ï¼Œæ¯ä¸€æŠŠé”åªé”å®¹å™¨å…¶ä¸­ä¸€éƒ¨åˆ†æ•°æ®ï¼Œå¤šçº¿ç¨‹è®¿é—®å®¹å™¨é‡Œä¸åŒæ•°æ®æ®µçš„æ•°æ®ï¼Œå°±ä¸ä¼šå­˜åœ¨é”ç«äº‰ï¼Œæé«˜å¹¶å‘è®¿é—®ç‡ã€‚ï¼ˆé»˜è®¤åˆ†é…16ä¸ªSegmentï¼Œæ¯”HashTableæ•ˆç‡æé«˜16å€ã€‚ï¼‰\n\t**åˆ°äº† JDK1.8 çš„æ—¶å€™å·²ç»æ‘’å¼ƒäº†Segmentçš„æ¦‚å¿µï¼Œè€Œæ˜¯ç›´æ¥ç”¨ Node æ•°ç»„+é“¾è¡¨+çº¢é»‘æ ‘çš„æ•°æ®ç»“æ„æ¥å®ç°ï¼Œå¹¶å‘æ§åˆ¶ä½¿ç”¨ synchronized å’Œ CAS æ¥æ“ä½œï¼Œsynchronizedåªé”å®šå½“å‰é“¾è¡¨æˆ–çº¢é»‘æ ‘çš„é¦–èŠ‚ç‚¹ã€‚ï¼ˆJDK1.6ä»¥å å¯¹ synchronizedé”åšäº†å¾ˆå¤šä¼˜åŒ–ï¼‰** æ•´ä¸ªçœ‹èµ·æ¥å°±åƒæ˜¯ä¼˜åŒ–è¿‡ä¸”çº¿ç¨‹å®‰å…¨çš„ HashMap\n\tâ‘¡ **HashTable(å…¨è¡¨é”)** :ä½¿ç”¨ synchronized æ¥ä¿è¯çº¿ç¨‹å®‰å…¨ï¼Œæ•ˆç‡éå¸¸ä½ä¸‹ã€‚å½“ä¸€ä¸ªçº¿ç¨‹è®¿é—®åŒæ­¥æ–¹æ³•æ—¶ï¼Œå…¶ä»–çº¿ç¨‹ä¹Ÿè®¿é—®åŒæ­¥æ–¹æ³•ï¼Œå¯èƒ½ä¼šè¿›å…¥é˜»å¡æˆ–è½®è¯¢çŠ¶æ€ï¼Œå¦‚ä½¿ç”¨ put æ·»åŠ å…ƒç´ ï¼Œå¦ä¸€ä¸ªçº¿ç¨‹ä¸èƒ½ä½¿ç”¨ put æ·»åŠ å…ƒç´ ï¼Œä¹Ÿä¸èƒ½ä½¿ç”¨ getï¼Œç«äº‰ä¼šè¶Šæ¥è¶Šæ¿€çƒˆæ•ˆç‡è¶Šä½ã€‚\n- â­**Jdk1.7é‡‡ç”¨åˆ†æ®µé”ï¼Œé”ç²’åº¦è¾ƒå¤§ï¼Œå®¹æ˜“å‘ç”Ÿå†²çªï¼Œå¹¶å‘é‡ä½ï¼›å› æ­¤ Jdk1.8 é‡‡ç”¨åªé”å®šæ¡¶çš„é¦–ç»“ç‚¹ï¼Œé”çš„åŠ›åº¦è¾ƒä½ï¼Œä¸å®¹æ˜“å‘ç”Ÿå†²çªï¼Œå¹¶å‘é‡é«˜ã€‚**\n\n**ä¸¤è€…çš„å¯¹æ¯”å›¾**ï¼š\n\nHashTable:\n\n![HashTableå…¨è¡¨é”](https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/TyporaNotesaHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAxOC84LzIzLzE2NTY2NzdhNmYyNTYxOTY.png)\n\nJDK1.7çš„ConcurrentHashMapï¼š\n\n![JDK1.7çš„ConcurrentHashMapåˆ†æ®µé”](https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/TyporaNotesaHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAxOC84LzIzLzE2NTY2NzdhNmYwMDhiZTQ.png)\n\nJDK1.8çš„ConcurrentHashMapï¼ˆTreeBin: çº¢é»‘äºŒå‰æ ‘èŠ‚ç‚¹ Node: é“¾è¡¨èŠ‚ç‚¹ï¼‰ï¼š\n\n![JDK1.8çš„ConcurrentHashMapåˆ†æ®µé”](https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/TyporaNotesaHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAxOC84LzIzLzE2NTY2NzdhNmYxNGUwMzk.png)\n","source":"_posts/Javaå…«è‚¡æ–‡ - Javaé›†åˆ.md","raw":"---\ntitle: Javaå…«è‚¡æ–‡ - Javaé›†åˆ\ncopyright: true\nmathjax: false\ncategories:\n  - Javaå…«è‚¡æ–‡\ndate: 2023-01-23 10:06:52\ntags:\ntoc: true\nurlname: java-collection\n---\n\n> æ•´ç†çš„Javaé›†åˆç›¸å…³çŸ¥è¯†ç‚¹å’Œé¢è¯•é¢˜ï¼Œéƒ¨åˆ†å†…å®¹æ‘˜è‡ªç½‘ç»œï¼Œå¦‚æœ‰ä¾µæƒè¯·è”ç³»æˆ‘ï½\t<!--more-->\n\n## é›†åˆå®¹å™¨æ¦‚è¿°\n\n### ä»€ä¹ˆæ˜¯é›†åˆ\n\nç”¨äºå­˜å‚¨æ•°æ®çš„å®¹å™¨ã€‚\n\n### é›†åˆå’Œæ•°ç»„çš„åŒºåˆ«\n\n- æ•°ç»„æ˜¯å›ºå®šé•¿åº¦çš„ï¼›é›†åˆå¯å˜é•¿åº¦çš„ã€‚\n- æ•°ç»„å¯ä»¥å­˜å‚¨åŸºæœ¬æ•°æ®ç±»å‹ï¼Œä¹Ÿå¯ä»¥å­˜å‚¨å¼•ç”¨æ•°æ®ç±»å‹ï¼›é›†åˆåªèƒ½å­˜å‚¨å¼•ç”¨æ•°æ®ç±»å‹ã€‚\n\n### å¸¸ç”¨çš„é›†åˆç±»æœ‰å“ªäº›ï¼Ÿ\n\nCollectionæ¥å£å’ŒMapæ¥å£æ˜¯æ‰€æœ‰é›†åˆæ¡†æ¶çš„çˆ¶æ¥å£ã€‚\n\nCollectionæ¥å£ï¼šå­æ¥å£åŒ…æ‹¬Setæ¥å£å’ŒListæ¥å£\n\n1. Setæ¥å£çš„å®ç°ç±»ä¸»è¦æœ‰ï¼šHashSetã€TreeSetã€LinkedHashSetç­‰ï¼›\n2. Listæ¥å£çš„å®ç°ç±»ä¸»è¦æœ‰ï¼šArrayListã€LinkedListã€Stackä»¥åŠVectorç­‰ã€‚\n\nMapæ¥å£ï¼šå®ç°ç±»ä¸»è¦æœ‰HashMapã€TreeMapã€HashTableã€ConcurrentHashMapä»¥åŠPropertiesç­‰ã€‚\n\n### Listã€Setã€Mapä¸‰è€…çš„åŒºåˆ«ï¼Ÿ\n\n![Collectionæ¶æ„](https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/TyporaNotesaHR0cHM6Ly9pbWcyMDE4LmNuYmxvZ3MuY29tL290aGVyLzE0MDgxODMvMjAxOTExLzE0MDgxODMtMjAxOTExMTkxODQxNDk1NTktMTU3MTU5NTY2OC5qcGc.png)\n\nListå’ŒSetä¸¤å¤§æ¥å£æ˜¯Collectionçš„å­æ¥å£\n\n- Listï¼šæœ‰åºå®¹å™¨ï¼Œå…ƒç´ å¯ä»¥é‡å¤ï¼Œå¯ä»¥æ’å…¥å¤šä¸ªnullå…ƒç´ ï¼Œå…ƒç´ éƒ½æœ‰ç´¢å¼•ï¼›\n\tå¸¸ç”¨å®ç°ç±»ï¼šArrayListã€LinkedList å’Œ Vectorã€‚\n\t\n- Setï¼šæ— åºå®¹å™¨ï¼Œä¸å¯ä»¥å­˜å‚¨é‡å¤å…ƒç´ ï¼Œåªå…è®¸å­˜å…¥ä¸€ä¸ªnullå…ƒç´ ï¼Œå¿…é¡»ä¿è¯å…ƒç´ å”¯ä¸€æ€§ï¼›\n\n\tå¸¸ç”¨å®ç°ç±»ï¼šHashSetã€LinkedHashSet ä»¥åŠ TreeSetã€‚\n\n* Mapæ˜¯ä¸€ä¸ªé”®å€¼å¯¹é›†åˆï¼Œå­˜å‚¨é”®ã€å€¼å’Œä¹‹é—´çš„æ˜ å°„ã€‚ keyæ— åºï¼Œå”¯ä¸€ï¼›value ä¸è¦æ±‚æœ‰åºï¼Œå…è®¸é‡å¤ï¼›\n\n\tå¸¸ç”¨å®ç°ç±»ï¼šHashMapã€TreeMapã€HashTableã€LinkedHashMapã€ConcurrentHashMapã€‚\n\n### é›†åˆæ¡†æ¶åº•å±‚æ•°æ®ç»“æ„\n\n#### Collection\n\n1. List\n\n- Arraylistï¼š Objectæ•°ç»„\n- Vectorï¼š Objectæ•°ç»„\n- LinkedListï¼š åŒå‘é“¾è¡¨\n\n2. Set\n\n- HashSetï¼ˆæ— åºï¼Œå”¯ä¸€ï¼‰ï¼šåŸºäº HashMap å®ç°çš„ï¼Œåº•å±‚é‡‡ç”¨ HashMap æ¥ä¿å­˜å…ƒç´ \n- LinkedHashSetï¼š LinkedHashSet ç»§æ‰¿äº HashSetï¼Œå¹¶ä¸”å…¶å†…éƒ¨æ˜¯é€šè¿‡ LinkedHashMap æ¥å®ç°çš„ã€‚\n- TreeSetï¼ˆæœ‰åºï¼Œå”¯ä¸€ï¼‰ï¼š çº¢é»‘æ ‘(è‡ªå¹³è¡¡çš„æ’åºäºŒå‰æ ‘)\n\n#### Map\n\n- HashMapï¼š JDK1.8ä¹‹å‰HashMapç”±æ•°ç»„+é“¾è¡¨ç»„æˆçš„ï¼Œæ•°ç»„æ˜¯HashMapçš„ä¸»ä½“ï¼Œé“¾è¡¨åˆ™æ˜¯ä¸»è¦ä¸ºäº†è§£å†³å“ˆå¸Œå†²çªè€Œå­˜åœ¨çš„ï¼ˆâ€œæ‹‰é“¾æ³•â€è§£å†³å†²çªï¼‰ã€‚JDK1.8ä»¥ååœ¨è§£å†³å“ˆå¸Œå†²çªæ—¶æœ‰äº†è¾ƒå¤§çš„å˜åŒ–ï¼Œå½“é“¾è¡¨é•¿åº¦å¤§äºé˜ˆå€¼ï¼ˆé»˜è®¤ä¸º8ï¼‰ï¼Œä¸”æ•°ç»„é•¿åº¦å¤§äº 64ï¼Œå°†é“¾è¡¨è½¬åŒ–ä¸ºçº¢é»‘æ ‘ï¼Œä»¥å‡å°‘æœç´¢æ—¶é—´ï¼Œå¦åˆ™æ‰©å®¹æ•°ç»„ã€‚\n- LinkedHashMapï¼šLinkedHashMap ç»§æ‰¿è‡ª HashMapï¼Œæ‰€ä»¥å®ƒçš„åº•å±‚ç”±æ•°ç»„å’Œé“¾è¡¨æˆ–çº¢é»‘æ ‘ç»„æˆã€‚å¦å¤–ï¼ŒLinkedHashMap åœ¨ä¸Šé¢ç»“æ„çš„åŸºç¡€ä¸Šï¼Œå¢åŠ äº†ä¸€æ¡åŒå‘é“¾è¡¨ï¼Œä½¿å¾—ä¸Šé¢çš„ç»“æ„å¯ä»¥ä¿æŒé”®å€¼å¯¹çš„æ’å…¥é¡ºåºã€‚åŒæ—¶é€šè¿‡å¯¹é“¾è¡¨è¿›è¡Œç›¸åº”çš„æ“ä½œï¼Œå®ç°äº†è®¿é—®é¡ºåºç›¸å…³é€»è¾‘ã€‚\n- HashTableï¼š æ•°ç»„+é“¾è¡¨ç»„æˆçš„ï¼Œæ•°ç»„æ˜¯ HashMap çš„ä¸»ä½“ï¼Œé“¾è¡¨åˆ™æ˜¯ä¸»è¦ä¸ºäº†è§£å†³å“ˆå¸Œå†²çªè€Œå­˜åœ¨çš„\n- TreeMapï¼š çº¢é»‘æ ‘ï¼ˆè‡ªå¹³è¡¡çš„æ’åºäºŒå‰æ ‘ï¼‰\n\n### å“ªäº›é›†åˆç±»æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Ÿ\n\nvector å’Œ hashtableï¼Œé€šè¿‡åœ¨æ–¹æ³•ä¸ŠåŠ  synchronized å…³é”®å­—å®ç°çº¿ç¨‹å®‰å…¨\n\n### Javaé›†åˆçš„å¿«é€Ÿå¤±è´¥æœºåˆ¶ â€œfail-fastâ€ï¼Ÿ\n\nfail-fastæ˜¯Javaé›†åˆçš„ä¸€ç§**é”™è¯¯æ£€æµ‹æœºåˆ¶**ï¼Œå½“å¤šä¸ªçº¿ç¨‹å¯¹åŒä¸€ä¸ªé›†åˆçš„å†…å®¹è¿›è¡Œæ“ä½œæ—¶ï¼Œå°±å¯èƒ½ä¼šäº§ç”Ÿfail-fastäº‹ä»¶ã€‚\n\nä¾‹å¦‚ï¼šå‡è®¾å­˜åœ¨ä¸¤ä¸ªçº¿ç¨‹ï¼ˆçº¿ç¨‹1ã€çº¿ç¨‹2ï¼‰ï¼Œçº¿ç¨‹1é€šè¿‡Iteratoråœ¨éå†é›†åˆAä¸­çš„å…ƒç´ ï¼Œåœ¨æŸä¸ªæ—¶å€™çº¿ç¨‹2ä¿®æ”¹äº†é›†åˆAçš„ç»“æ„ï¼ˆaddã€removeã€clearç­‰ç»“æ„ä¸Šçš„ä¿®æ”¹ï¼Œè€Œä¸æ˜¯ç®€å•çš„ä¿®æ”¹é›†åˆå…ƒç´ çš„å†…å®¹ï¼‰ï¼Œé‚£ä¹ˆè¿™ä¸ªæ—¶å€™ç¨‹åºå°±ä¼šæŠ›å‡º **ConcurrentModificationException** å¼‚å¸¸ï¼Œä»è€Œäº§ç”Ÿfail-fastäº‹ä»¶ã€‚\n\nåŸå› ï¼šè¿­ä»£å™¨åœ¨éå†æ—¶ç›´æ¥è®¿é—®é›†åˆä¸­çš„å†…å®¹ï¼Œå¹¶ä¸”åœ¨éå†è¿‡ç¨‹ä¸­ä½¿ç”¨ä¸€ä¸ª modCount å˜é‡ã€‚æ¯å½“è¿­ä»£å™¨ä½¿ç”¨hashNext()/next()éå†ä¸‹ä¸€ä¸ªå…ƒç´ ä¹‹å‰ï¼Œéƒ½ä¼šæ£€æµ‹modCountå˜é‡æ˜¯å¦ä¸ºexpectedmodCountå€¼ï¼Œæ˜¯çš„è¯å°±è¿”å›éå†ï¼›å¦åˆ™æŠ›å‡ºå¼‚å¸¸ï¼Œç»ˆæ­¢éå†ã€‚é›†åˆåœ¨è¢«éå†æœŸé—´å¦‚æœå†…å®¹å‘ç”Ÿå˜åŒ–ï¼Œå°±ä¼šæ”¹å˜modCountçš„å€¼ï¼Œä»è€ŒmodCountä¸ç­‰äºexpectedmodCountå€¼æŠ›å‡ºå¼‚å¸¸ï¼Œä¹Ÿå°±æ˜¯äº§ç”Ÿäº†fail-fastäº‹ä»¶ã€‚\n\nè§£å†³åŠæ³•ï¼š\n\n1. åœ¨éå†è¿‡ç¨‹ä¸­ï¼Œæ‰€æœ‰æ¶‰åŠåˆ°æ”¹å˜modCountå€¼çš„åœ°æ–¹å…¨éƒ¨åŠ ä¸Šsynchronizedï¼›\n2. ä½¿ç”¨Java.util.concurrentä¸‹çš„CopyOnWriteArrayListæ¥æ›¿æ¢ArrayListï¼›\n3. ä½¿ç”¨Java.util.concurrentä¸‹çš„ConcurrentHashMapæ¥æ›¿æ¢HashMapã€‚\n\n### æ€ä¹ˆç¡®ä¿ä¸€ä¸ªé›†åˆä¸èƒ½è¢«ä¿®æ”¹ï¼Ÿ\n\nå¯ä»¥ä½¿ç”¨ Collections. unmodifiableCollection(Collection c) æ–¹æ³•æ¥åˆ›å»ºä¸€ä¸ªåªè¯»é›†åˆï¼Œè¿™æ ·æ”¹å˜é›†åˆçš„ä»»ä½•æ“ä½œéƒ½ä¼šæŠ›å‡º Java. lang. UnsupportedOperationException å¼‚å¸¸ã€‚\n\n```Java\nList<String> list = new ArrayList<>();\nlist. add(\"x\");\nCollection<String> clist = Collections. unmodifiableCollection(list);\nclist.add(\"y\"); // è¿è¡Œæ—¶æ­¤è¡ŒæŠ¥é”™\nSystem.out.println(list. size());\n```\n\n## Collectionæ¥å£\n\n### Listæ¥å£\n\n#### è¿­ä»£å™¨ Iterator æ˜¯ä»€ä¹ˆï¼Ÿ\n\nCollectionæ¥å£å®ç°äº†Iterableæ¥å£ï¼Œé€šè¿‡å®ç°Iterableæ¥å£ä¸­çš„iterator()æ–¹æ³•è¿”å›Iteratoræ¥å£çš„å®ä¾‹ï¼Œé€šè¿‡iteratorå¯¹é›†åˆçš„å…ƒç´ è¿›è¡Œè¿­ä»£æ“ä½œã€‚\n\n#### Iterator æ€ä¹ˆä½¿ç”¨ï¼Ÿæœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼Ÿ\n\n```Java\nList<String> list = new ArrayList<>();\nIterator<String> it = list.iterator();\nwhile(it.hasNext()){\n    String obj = it.next();\n    System.out.println(obj);\n}\n```\n\nIterator çš„ç‰¹ç‚¹æ˜¯åªèƒ½å•å‘éå†ï¼Œä½†æ˜¯æ›´åŠ å®‰å…¨ï¼Œå› ä¸ºå®ƒå¯ä»¥ç¡®ä¿ï¼Œåœ¨å½“å‰éå†çš„é›†åˆå…ƒç´ è¢«æ›´æ”¹çš„æ—¶å€™ï¼Œå°±ä¼šæŠ›å‡º ConcurrentModificationException å¼‚å¸¸ã€‚\n\n#### å¦‚ä½•è¾¹éå†è¾¹ç§»é™¤ Collection ä¸­çš„å…ƒç´ ï¼Ÿ\n\nè¾¹éå†è¾¹ä¿®æ”¹ Collection çš„å”¯ä¸€æ­£ç¡®æ–¹å¼æ˜¯ä½¿ç”¨ Iterator.remove() æ–¹æ³•ï¼Œå¦‚ä¸‹ï¼š\n\n```java\nIterator<Integer> it = list.iterator();\nwhile(it.hasNext()){\n   // do something\n   it.remove();\n}\n```\n\nä¸€ç§æœ€å¸¸è§çš„**é”™è¯¯**ä»£ç å¦‚ä¸‹ï¼š\n\n```java\nList<String> list = new ArrayList<>();\nlist.add(\"1\");\nlist.add(\"2\");\nlist.add(\"3\");\nlist.add(\"4\");\nlist.add(\"5\");\nint cnt = 0;\nfor (String item : list) {\n  System.out.println(++cnt);\n  list.remove(item);\n}\nSystem.out.println(Arrays.toString(list.toArray()));\n```\n\nè¿è¡Œä»¥ä¸Šé”™è¯¯ä»£ç ä¼šæŠ¥ **ConcurrentModificationException å¼‚å¸¸**ã€‚\nè¿™æ˜¯å› ä¸ºå½“ä½¿ç”¨ foreach(for(Integer i : list)) è¯­å¥æ—¶ï¼Œä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªiterator æ¥éå†è¯¥ listï¼Œä½†åŒæ—¶è¯¥ list æ­£åœ¨è¢« Iterator.remove() ä¿®æ”¹ã€‚é›†åˆå‘ç”Ÿç»“æ„æ€§å˜åŒ–ï¼Œæ ¹æ®fail-fastæœºåˆ¶ï¼Œä¼šæŠ›å¼‚å¸¸ã€‚\n\n#### éå†ä¸€ä¸ª List æœ‰å“ªäº›ä¸åŒçš„æ–¹å¼ï¼Ÿ\n\n1. for å¾ªç¯ï¼Œç»´æŠ¤ä¸€ä¸ªè®¡æ•°å™¨ï¼›\n2. è¿­ä»£å™¨ï¼ŒIteratorã€‚Collectionæ¥å£å®ç°äº†Iterableæ¥å£ï¼Œé€šè¿‡å®ç°Iterableæ¥å£ä¸­çš„iterator()æ–¹æ³•è¿”å›Iteratoræ¥å£çš„å®ä¾‹ï¼Œé€šè¿‡iteratorå¯¹é›†åˆçš„å…ƒç´ è¿›è¡Œè¿­ä»£æ“ä½œï¼›\n3. å¢å¼ºforå¾ªç¯ã€‚å¢å¼ºforå¾ªç¯foreach å†…éƒ¨ä¹Ÿæ˜¯é‡‡ç”¨äº† Iterator çš„æ–¹å¼å®ç°ï¼Œä½¿ç”¨æ—¶ä¸éœ€è¦æ˜¾å¼å£°æ˜ Iterator æˆ–è®¡æ•°å™¨ã€‚\n\tä¼˜ç‚¹æ˜¯ä»£ç ç®€æ´ï¼Œä¸æ˜“å‡ºé”™ï¼›ç¼ºç‚¹æ˜¯åªèƒ½åšç®€å•çš„éå†ï¼Œä¸èƒ½åœ¨éå†è¿‡ç¨‹ä¸­æ“ä½œæ•°æ®é›†åˆï¼Œä¾‹å¦‚åˆ é™¤ã€æ›¿æ¢ã€‚\n\n#### è¯´ä¸€ä¸‹ ArrayList çš„ä¼˜ç¼ºç‚¹\n\n**ArrayList æ¯”è¾ƒé€‚åˆé¡ºåºæ·»åŠ ã€éšæœºè®¿é—®çš„åœºæ™¯ã€‚**\n\nArrayListçš„ä¼˜ç‚¹å¦‚ä¸‹ï¼š\n\n- ArrayList åº•å±‚ä»¥æ•°ç»„å®ç°ï¼Œæ˜¯ä¸€ç§éšæœºè®¿é—®æ¨¡å¼ã€‚ArrayList å®ç°äº† RandomAccess æ¥å£ï¼Œæ ‡è®° List å®ç°æ˜¯å¦æ”¯æŒ Random Accessï¼Œå¯¼è‡´å®ƒå¯ä»¥éšæœºè®¿é—®çš„æ ¹æœ¬åŸå› æ˜¯å®ƒåº•å±‚æ˜¯æ•°ç»„ç»“æ„ï¼Œæ•°ç»„å¯ä»¥é€šè¿‡ä¸‹æ ‡è·å–ç›¸åº”çš„å€¼ï¼Œè€Œ RandomAccess åªæ˜¯ä¸€ä¸ªæ ‡è®°ã€‚å› æ­¤æŸ¥æ‰¾çš„æ—¶å€™éå¸¸å¿«ã€‚å¯ä»¥ç”¨ for å¾ªç¯é€šè¿‡ä¸‹æ ‡è·å–å…ƒç´ ã€‚\n- ArrayList åœ¨é¡ºåºæ·»åŠ ä¸€ä¸ªå…ƒç´ çš„æ—¶å€™éå¸¸æ–¹ä¾¿ã€‚\n\nArrayList çš„ç¼ºç‚¹å¦‚ä¸‹ï¼š\n\n- å‘**ä¸­é—´æŸä¸ªä½ç½®åˆ é™¤**å…ƒç´ çš„æ—¶å€™ï¼Œéœ€è¦åšå…ƒç´ å¤åˆ¶æ“ä½œã€‚å¦‚æœè¦å¤åˆ¶çš„å…ƒç´ å¾ˆå¤šï¼Œé‚£ä¹ˆå°±ä¼šæ¯”è¾ƒè€—è´¹æ€§èƒ½ï¼›\n- å‘**ä¸­é—´æŸä¸ªä½ç½®æ’å…¥**å…ƒç´ çš„æ—¶å€™ï¼Œä¹Ÿéœ€è¦åšå…ƒç´ å¤åˆ¶æ“ä½œï¼Œç¼ºç‚¹åŒä¸Šã€‚\n\n#### å¦‚ä½•å®ç°æ•°ç»„å’Œ List ä¹‹é—´çš„è½¬æ¢ï¼Ÿ\n\n- æ•°ç»„è½¬ Listï¼šä½¿ç”¨ Arrays. asList(array) è¿›è¡Œè½¬æ¢ã€‚\n- List è½¬æ•°ç»„ï¼šä½¿ç”¨ List è‡ªå¸¦çš„ toArray() æ–¹æ³•ã€‚\n\n```Java\n// list to array\nList<String> list = new ArrayList<String>();\nlist.add(\"123\");\nlist.add(\"456\");\nlist.toArray(new String[0]);\n\n// array to list\nString[] array = new String[]{\"123\", \"456\"};\nArrays.asList(array);\n```\n\n#### ArrayList å’Œ LinkedList çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ\n\n- åº•å±‚å®ç°ï¼šArrayList æ˜¯åŠ¨æ€æ•°ç»„çš„æ•°æ®ç»“æ„å®ç°ï¼Œè€Œ LinkedList æ˜¯åŒå‘é“¾è¡¨çš„æ•°æ®ç»“æ„å®ç°ï¼›\n- è®¿é—®å’Œå¢åˆ å…ƒç´ æ•ˆç‡ï¼šArrayList éšæœºè®¿é—®å’Œé¡ºåºæ’å…¥/åˆ é™¤å…ƒç´ æ•ˆç‡æ›´é«˜ï¼›\n- å†…å­˜å ç”¨ï¼šLinkedList æ¯” ArrayList æ›´å å†…å­˜ï¼Œå› ä¸º LinkedList çš„èŠ‚ç‚¹é™¤äº†å­˜å‚¨æ•°æ®ï¼Œè¿˜å­˜å‚¨äº†ä¸¤ä¸ªå¼•ç”¨ï¼Œä¸€ä¸ªæŒ‡å‘å‰ä¸€ä¸ªå…ƒç´ ï¼Œä¸€ä¸ªæŒ‡å‘åä¸€ä¸ªå…ƒç´ ï¼›\n- çº¿ç¨‹å®‰å…¨ï¼šArrayList å’Œ LinkedList éƒ½æ˜¯ä¸åŒæ­¥çš„ï¼Œä¹Ÿå°±æ˜¯ä¸ä¿è¯çº¿ç¨‹å®‰å…¨ã€‚\n\nç»¼åˆæ¥è¯´ï¼Œåœ¨éœ€è¦**é¢‘ç¹è¯»å–**é›†åˆä¸­çš„å…ƒç´ æ—¶ï¼Œæ›´æ¨èä½¿ç”¨ ArrayListï¼Œè€Œåœ¨**æ’å…¥å’Œåˆ é™¤æ“ä½œè¾ƒå¤š**æ—¶ï¼Œæ›´æ¨èä½¿ç”¨ LinkedListã€‚\n\n#### ArrayList å’Œ Vector çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ\n\nä¸»è¦åŒºåˆ«æ˜¯çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼š\nVector ä½¿ç”¨äº† synchronized æ¥å®ç°çº¿ç¨‹åŒæ­¥ï¼ˆæ€§èƒ½å·®ï¼‰ï¼Œæ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œè€Œ ArrayList æ˜¯éçº¿ç¨‹å®‰å…¨çš„ã€‚\n\n#### å¤šçº¿ç¨‹åœºæ™¯ä¸‹å¦‚ä½•ä½¿ç”¨ ArrayListï¼Ÿ\n\nå¯ä»¥ç”¨ Java.util.concurrent.CopyOnWriteArrayList æ›¿æ¢ ArrayListã€‚\n\n#### ä¸ºä»€ä¹ˆ ArrayList çš„ elementData åŠ ä¸Š transient ä¿®é¥°ï¼Ÿ\n\nArrayList å®ç°äº† Serializable æ¥å£ï¼Œè¿™æ„å‘³ç€ ArrayList æ”¯æŒåºåˆ—åŒ–ã€‚\nå¯¹äº elementDataï¼Œç”±äº elementData å¯èƒ½æœ‰å¤šä½™çš„å®¹é‡ï¼ˆå®¹é‡ä¸è¶³ä¼šæ‰©å®¹æˆ1.5å€å¤§å°ï¼Œæ‰©å®¹ä¹‹åé™¤äº†æ–°åŠ \nçš„å…ƒç´ ä»¥å¤–è¿˜æœ‰å¤šçš„ç©ºé—´æ²¡æœ‰æ”¾å…ƒç´ ï¼Œæ¯”å¦‚ç°åœ¨å®¹é‡æ˜¯15ï¼Œè€Œé›†åˆé‡Œé¢åªå­˜äº†11ä¸ªå…ƒç´ ï¼‰ï¼Œä¸å¯¹ elementData åŠ ä¸Š transient ä¿®é¥°ï¼Œè€Œæ˜¯æ‰‹åŠ¨è¿›è¡Œåºåˆ—åŒ–ï¼Œå¯ä»¥ä¿è¯åªåºåˆ—åŒ–å®é™…å­˜å‚¨çš„é‚£äº›å…ƒç´ ï¼ˆ11ä¸ªå…ƒç´ ï¼‰ï¼Œè€Œä¸æ˜¯æ•´ä¸ªæ•°ç»„ï¼Œä»è€ŒèŠ‚çœç©ºé—´å’Œæ—¶é—´ã€‚\n\n### â­ArrayListæ‰©å®¹æœºåˆ¶\n\n> **æ€»ç»“ï¼š**\n>\n> * åˆå§‹åŒ–å¦‚æœä½¿ç”¨æ— å‚æ„é€ å™¨çš„è¯ï¼š\n>\n> \tåœ¨ç¬¬ä¸€æ¬¡æ·»åŠ å…ƒç´ çš„æ—¶å€™ï¼Œå°†æ•°ç»„å®¹é‡è®¾ç½®ä¸º10ï¼Œç„¶åè¿›è¡Œæ·»åŠ ã€‚\n>\n> \tä¸€ç›´æ·»åŠ ï¼Œç›´åˆ°è¦æ·»åŠ çš„å…ƒç´ è¶…å‡ºå½“å‰æ•°ç»„å®¹é‡äº†ï¼Œè¿›å…¥æ‰©å®¹ï¼Œå°†æ•°ç»„é•¿åº¦æ‰©å®¹ä¸º1.5å€é•¿åº¦ï¼Œç„¶åè¿›è¡Œæ·»åŠ ã€‚\n>\n> * åˆå§‹åŒ–å¦‚æœä½¿ç”¨æœ‰å‚æ„é€ å™¨çš„è¯ï¼š\n>\n> \té‚£ä¹ˆæ¯æ¬¡æ·»åŠ å…ƒç´ åªéœ€è¦åˆ¤æ–­æ˜¯å¦éœ€è¦æ‰©å®¹å³å¯ï¼Œä¸éœ€è¦ç¬¬ä¸€æ¬¡çš„åˆå§‹åŒ–ä¸º10çš„åˆ¤æ–­ã€‚\n\n#### 1. å…ˆä» ArrayList çš„æ„é€ å‡½æ•°è¯´èµ·\n\n**ï¼ˆJDK8ï¼‰ArrayList æœ‰ä¸‰ç§æ–¹å¼æ¥åˆå§‹åŒ–ï¼Œæ„é€ æ–¹æ³•æºç å¦‚ä¸‹ï¼š**\n\n```java\n    /**\n     * é»˜è®¤åˆå§‹å®¹é‡å¤§å°\n     */\n    private static final int DEFAULT_CAPACITY = 10;\n\n\n    private static final Object[] DEFAULTCAPACITY_EMPTY_ELEMENTDATA = {};\n\n    /**\n     *é»˜è®¤æ„é€ å‡½æ•°ï¼Œä½¿ç”¨åˆå§‹å®¹é‡10æ„é€ ä¸€ä¸ªç©ºåˆ—è¡¨(æ— å‚æ•°æ„é€ )\n     */\n    public ArrayList() {\n        this.elementData = DEFAULTCAPACITY_EMPTY_ELEMENTDATA;\n    }\n\n    /**\n     * å¸¦åˆå§‹å®¹é‡å‚æ•°çš„æ„é€ å‡½æ•°ã€‚ï¼ˆç”¨æˆ·è‡ªå·±æŒ‡å®šå®¹é‡ï¼‰\n     */\n    public ArrayList(int initialCapacity) {\n        if (initialCapacity > 0) {//åˆå§‹å®¹é‡å¤§äº0\n            //åˆ›å»ºinitialCapacityå¤§å°çš„æ•°ç»„\n            this.elementData = new Object[initialCapacity];\n        } else if (initialCapacity == 0) {//åˆå§‹å®¹é‡ç­‰äº0\n            //åˆ›å»ºç©ºæ•°ç»„\n            this.elementData = EMPTY_ELEMENTDATA;\n        } else {//åˆå§‹å®¹é‡å°äº0ï¼ŒæŠ›å‡ºå¼‚å¸¸\n            throw new IllegalArgumentException(\"Illegal Capacity: \"+\n                                               initialCapacity);\n        }\n    }\n\n\n   /**\n    *æ„é€ åŒ…å«æŒ‡å®šcollectionå…ƒç´ çš„åˆ—è¡¨ï¼Œè¿™äº›å…ƒç´ åˆ©ç”¨è¯¥é›†åˆçš„è¿­ä»£å™¨æŒ‰é¡ºåºè¿”å›\n    *å¦‚æœæŒ‡å®šçš„é›†åˆä¸ºnullï¼Œthrows NullPointerExceptionã€‚\n    */\n     public ArrayList(Collection<? extends E> c) {\n        elementData = c.toArray();\n        if ((size = elementData.length) != 0) {\n            // c.toArray might (incorrectly) not return Object[] (see 6260652)\n            if (elementData.getClass() != Object[].class)\n                elementData = Arrays.copyOf(elementData, size, Object[].class);\n        } else {\n            // replace with empty array.\n            this.elementData = EMPTY_ELEMENTDATA;\n        }\n    }\n```\n\n**ä»¥æ— å‚æ•°æ„é€ æ–¹æ³•åˆ›å»º ArrayList æ—¶ï¼Œå®é™…ä¸Šåˆå§‹åŒ–èµ‹å€¼çš„æ˜¯ä¸€ä¸ªç©ºæ•°ç»„ã€‚å½“çœŸæ­£å¯¹æ•°ç»„è¿›è¡Œæ·»åŠ å…ƒç´ æ“ä½œæ—¶ï¼Œæ‰çœŸæ­£åˆ†é…å®¹é‡ã€‚å³å‘æ•°ç»„ä¸­æ·»åŠ ç¬¬ä¸€ä¸ªå…ƒç´ æ—¶ï¼Œæ•°ç»„å®¹é‡æ‰©ä¸º 10ã€‚** \n\n> è¡¥å……ï¼šJDK6 new æ— å‚æ„é€ çš„ `ArrayList` å¯¹è±¡æ—¶ï¼Œç›´æ¥åˆ›å»ºäº†é•¿åº¦æ˜¯ 10 çš„ `Object[]` æ•°ç»„ elementData ã€‚\n\n#### 2. ä¸€æ­¥ä¸€æ­¥åˆ†æ ArrayList æ‰©å®¹æœºåˆ¶\n\nè¿™é‡Œä»¥æ— å‚æ„é€ å‡½æ•°åˆ›å»ºçš„ ArrayList ä¸ºä¾‹åˆ†æ\n\n##### 2.1.  `add` \n\n```java\n    /**\n     * å°†æŒ‡å®šçš„å…ƒç´ è¿½åŠ åˆ°æ­¤åˆ—è¡¨çš„æœ«å°¾ã€‚\n     */\n    public boolean add(E e) {\n   // æ·»åŠ å…ƒç´ ä¹‹å‰ï¼Œå…ˆè°ƒç”¨ensureCapacityInternalæ–¹æ³•\n        ensureCapacityInternal(size + 1);  // Increments modCount!!\n        // è¿™é‡Œçœ‹åˆ°ArrayListæ·»åŠ å…ƒç´ çš„å®è´¨å°±ç›¸å½“äºä¸ºæ•°ç»„èµ‹å€¼\n        elementData[size++] = e;\n        return true;\n    }\n```\n\n##### 2.2. `ensureCapacityInternal()` \n\nï¼ˆJDK7ï¼‰å¯ä»¥çœ‹åˆ° `add` æ–¹æ³• é¦–å…ˆè°ƒç”¨äº†`ensureCapacityInternal(size + 1)`\n\n```java\n   //å¾—åˆ°æœ€å°æ‰©å®¹é‡\n    private void ensureCapacityInternal(int minCapacity) {\n        if (elementData == DEFAULTCAPACITY_EMPTY_ELEMENTDATA) {\n            // è·å–é»˜è®¤çš„å®¹é‡å’Œä¼ å…¥å‚æ•°çš„è¾ƒå¤§å€¼\n            minCapacity = Math.max(DEFAULT_CAPACITY, minCapacity);\n        }\n\n        ensureExplicitCapacity(minCapacity);\n    }\n```\n\n**å½“ è¦ add è¿›ç¬¬ 1 ä¸ªå…ƒç´ æ—¶ï¼ŒminCapacity ä¸º 1ï¼Œåœ¨ Math.max()æ–¹æ³•æ¯”è¾ƒåï¼ŒminCapacity ä¸º 10ã€‚**\n\n> æ­¤å¤„å’Œåç»­ JDK8 ä»£ç æ ¼å¼åŒ–ç•¥æœ‰ä¸åŒï¼Œæ ¸å¿ƒä»£ç åŸºæœ¬ä¸€æ ·ã€‚\n\n##### 2.3. `ensureExplicitCapacity()` \n\nå¦‚æœè°ƒç”¨ `ensureCapacityInternal()` æ–¹æ³•å°±ä¸€å®šä¼šè¿›å…¥ï¼ˆæ‰§è¡Œï¼‰è¿™ä¸ªæ–¹æ³•\n\n```java\n  //åˆ¤æ–­æ˜¯å¦éœ€è¦æ‰©å®¹\n    private void ensureExplicitCapacity(int minCapacity) {\n        modCount++;\n\n        // overflow-conscious code\n        if (minCapacity - elementData.length > 0)\n            //è°ƒç”¨growæ–¹æ³•è¿›è¡Œæ‰©å®¹ï¼Œè°ƒç”¨æ­¤æ–¹æ³•ä»£è¡¨å·²ç»å¼€å§‹æ‰©å®¹äº†\n            grow(minCapacity);\n    }\n```\n\næˆ‘ä»¬æ¥ä»”ç»†åˆ†æä¸€ä¸‹ï¼š\n\n- å½“æˆ‘ä»¬è¦ add è¿›ç¬¬ 1 ä¸ªå…ƒç´ åˆ° ArrayList æ—¶ï¼ŒelementData.length ä¸º 0 ï¼ˆå› ä¸ºè¿˜æ˜¯ä¸€ä¸ªç©ºçš„ listï¼‰ï¼Œå› ä¸ºæ‰§è¡Œäº† `ensureCapacityInternal()` æ–¹æ³• ï¼Œæ‰€ä»¥ minCapacity æ­¤æ—¶ä¸º 10ã€‚æ­¤æ—¶ï¼Œ`minCapacity - elementData.length > 0`æˆç«‹ï¼Œæ‰€ä»¥ä¼šè¿›å…¥ `grow(minCapacity)` æ–¹æ³•ã€‚\n- å½“ add ç¬¬ 2 ä¸ªå…ƒç´ æ—¶ï¼ŒminCapacity ä¸º 2ï¼Œæ­¤æ—¶ elementData.length(å®¹é‡)åœ¨æ·»åŠ ç¬¬ä¸€ä¸ªå…ƒç´ åæ‰©å®¹æˆ 10 äº†ã€‚æ­¤æ—¶ï¼Œ`minCapacity - elementData.length > 0` ä¸æˆç«‹ï¼Œæ‰€ä»¥ä¸ä¼šè¿›å…¥ ï¼ˆæ‰§è¡Œï¼‰`grow(minCapacity)` æ–¹æ³•ã€‚\n- æ·»åŠ ç¬¬ 3ã€4Â·Â·Â·åˆ°ç¬¬ 10 ä¸ªå…ƒç´ æ—¶ï¼Œä¾ç„¶ä¸ä¼šæ‰§è¡Œ grow æ–¹æ³•ï¼Œæ•°ç»„å®¹é‡éƒ½ä¸º 10ã€‚\n\nç›´åˆ°æ·»åŠ ç¬¬ 11 ä¸ªå…ƒç´ ï¼ŒminCapacity(ä¸º 11)æ¯” elementData.lengthï¼ˆä¸º 10ï¼‰è¦å¤§ã€‚è¿›å…¥ grow æ–¹æ³•è¿›è¡Œæ‰©å®¹ã€‚\n\n##### 2.4. `grow()` \n\n```java\n    /**\n     * è¦åˆ†é…çš„æœ€å¤§æ•°ç»„å¤§å°\n     */\n    private static final int MAX_ARRAY_SIZE = Integer.MAX_VALUE - 8;\n\n    /**\n     * ArrayListæ‰©å®¹çš„æ ¸å¿ƒæ–¹æ³•ã€‚\n     */\n    private void grow(int minCapacity) {\n        // oldCapacityä¸ºæ—§å®¹é‡ï¼ŒnewCapacityä¸ºæ–°å®¹é‡\n        int oldCapacity = elementData.length;\n        //å°†oldCapacity å³ç§»ä¸€ä½ï¼Œå…¶æ•ˆæœç›¸å½“äºoldCapacity /2ï¼Œ\n        //æˆ‘ä»¬çŸ¥é“ä½è¿ç®—çš„é€Ÿåº¦è¿œè¿œå¿«äºæ•´é™¤è¿ç®—ï¼Œæ•´å¥è¿ç®—å¼çš„ç»“æœå°±æ˜¯å°†æ–°å®¹é‡æ›´æ–°ä¸ºæ—§å®¹é‡çš„1.5å€ï¼Œ\n        int newCapacity = oldCapacity + (oldCapacity >> 1);\n        //ç„¶åæ£€æŸ¥æ–°å®¹é‡æ˜¯å¦å¤§äºæœ€å°éœ€è¦å®¹é‡ï¼Œè‹¥è¿˜æ˜¯å°äºæœ€å°éœ€è¦å®¹é‡ï¼Œé‚£ä¹ˆå°±æŠŠæœ€å°éœ€è¦å®¹é‡å½“ä½œæ•°ç»„çš„æ–°å®¹é‡ï¼Œ\n        if (newCapacity - minCapacity < 0)\n            newCapacity = minCapacity;\n       // å¦‚æœæ–°å®¹é‡å¤§äº MAX_ARRAY_SIZE,è¿›å…¥(æ‰§è¡Œ) `hugeCapacity()` æ–¹æ³•æ¥æ¯”è¾ƒ minCapacity å’Œ MAX_ARRAY_SIZEï¼Œ\n       //å¦‚æœminCapacityå¤§äºæœ€å¤§å®¹é‡ï¼Œåˆ™æ–°å®¹é‡åˆ™ä¸º`Integer.MAX_VALUE`ï¼Œå¦åˆ™ï¼Œæ–°å®¹é‡å¤§å°åˆ™ä¸º MAX_ARRAY_SIZE å³ä¸º `Integer.MAX_VALUE - 8`ã€‚\n        if (newCapacity - MAX_ARRAY_SIZE > 0)\n            newCapacity = hugeCapacity(minCapacity);\n        // minCapacity is usually close to size, so this is a win:\n        elementData = Arrays.copyOf(elementData, newCapacity);\n    }\n```\n\n**int newCapacity = oldCapacity + (oldCapacity >> 1),æ‰€ä»¥ ArrayList æ¯æ¬¡æ‰©å®¹ä¹‹åå®¹é‡éƒ½ä¼šå˜ä¸ºåŸæ¥çš„ 1.5 å€å·¦å³ï¼ˆoldCapacity ä¸ºå¶æ•°å°±æ˜¯ 1.5 å€ï¼Œå¦åˆ™æ˜¯ 1.5 å€å·¦å³ï¼‰** \n\n**æˆ‘ä»¬å†æ¥é€šè¿‡ä¾‹å­æ¢ç©¶ä¸€ä¸‹grow() æ–¹æ³• ï¼š**\n\n- å½“ add ç¬¬ 1 ä¸ªå…ƒç´ æ—¶ï¼ŒoldCapacity ä¸º 0ï¼Œç»æ¯”è¾ƒåç¬¬ä¸€ä¸ª if åˆ¤æ–­æˆç«‹ï¼ŒnewCapacity = minCapacity(ä¸º 10)ã€‚ä½†æ˜¯ç¬¬äºŒä¸ª if åˆ¤æ–­ä¸ä¼šæˆç«‹ï¼Œå³ newCapacity ä¸æ¯” MAX_ARRAY_SIZE å¤§ï¼Œåˆ™ä¸ä¼šè¿›å…¥ `hugeCapacity` æ–¹æ³•ã€‚æ•°ç»„å®¹é‡ä¸º 10ï¼Œadd æ–¹æ³•ä¸­ return true,size å¢ä¸º 1ã€‚\n- å½“ add ç¬¬ 11 ä¸ªå…ƒç´ è¿›å…¥ grow æ–¹æ³•æ—¶ï¼ŒnewCapacity ä¸º 15ï¼Œæ¯” minCapacityï¼ˆä¸º 11ï¼‰å¤§ï¼Œç¬¬ä¸€ä¸ª if åˆ¤æ–­ä¸æˆç«‹ã€‚æ–°å®¹é‡æ²¡æœ‰å¤§äºæ•°ç»„æœ€å¤§ sizeï¼Œä¸ä¼šè¿›å…¥ hugeCapacity æ–¹æ³•ã€‚æ•°ç»„å®¹é‡æ‰©ä¸º 15ï¼Œadd æ–¹æ³•ä¸­ return true,size å¢ä¸º 11ã€‚\n- ä»¥æ­¤ç±»æ¨Â·Â·Â·Â·Â·Â·\n\n##### 2.5. `hugeCapacity()` \n\nä»ä¸Šé¢ `grow()` æ–¹æ³•æºç æˆ‘ä»¬çŸ¥é“ï¼š å¦‚æœæ–°å®¹é‡å¤§äº MAX_ARRAY_SIZE,è¿›å…¥(æ‰§è¡Œ) `hugeCapacity()` æ–¹æ³•æ¥æ¯”è¾ƒ minCapacity å’Œ MAX_ARRAY_SIZEï¼Œå¦‚æœ minCapacity å¤§äºæœ€å¤§å®¹é‡ï¼Œåˆ™æ–°å®¹é‡åˆ™ä¸º`Integer.MAX_VALUE`ï¼Œå¦åˆ™ï¼Œæ–°å®¹é‡å¤§å°åˆ™ä¸º MAX_ARRAY_SIZE å³ä¸º `Integer.MAX_VALUE - 8`ã€‚\n\n```java\n    private static int hugeCapacity(int minCapacity) {\n        if (minCapacity < 0) // overflow\n            throw new OutOfMemoryError();\n        //å¯¹minCapacityå’ŒMAX_ARRAY_SIZEè¿›è¡Œæ¯”è¾ƒ\n        //è‹¥minCapacityå¤§ï¼Œå°†Integer.MAX_VALUEä½œä¸ºæ–°æ•°ç»„çš„å¤§å°\n        //è‹¥MAX_ARRAY_SIZEå¤§ï¼Œå°†MAX_ARRAY_SIZEä½œä¸ºæ–°æ•°ç»„çš„å¤§å°\n        //MAX_ARRAY_SIZE = Integer.MAX_VALUE - 8;\n        return (minCapacity > MAX_ARRAY_SIZE) ?\n            Integer.MAX_VALUE :\n            MAX_ARRAY_SIZE;\n    }\n```\n\n### Setæ¥å£\n\n#### HashSet çš„å®ç°åŸç†ï¼Ÿ\n\nHashSet æ˜¯åŸºäº HashMap å®ç°çš„ï¼ŒHashSetçš„å€¼å­˜æ”¾äºHashMapçš„keyä¸Šï¼ŒHashMapçš„valueç»Ÿä¸€ä¸ºObjectå¸¸é‡PRESENTï¼Œç”±äº HashMap çš„ key ä¸å…è®¸é‡å¤ï¼Œè€Œ HashSet ä¸å…è®¸é‡å¤çš„å€¼ï¼Œå› æ­¤ HashSet å¯ä»¥åŸºäº HashMap å®ç°ï¼ŒåŸºæœ¬ä¸Šéƒ½æ˜¯ç›´æ¥è°ƒç”¨åº•å±‚ HashMap çš„ç›¸å…³æ–¹æ³•æ¥å®Œæˆã€‚\n\n#### HashSetæ˜¯å¦‚ä½•ä¿è¯æ•°æ®ä¸å¯é‡å¤çš„ï¼Ÿ\n\nå½“ä½ æŠŠå¯¹è±¡åŠ å…¥ hashSet æ—¶ï¼ŒhashSet ä¼šå…ˆè®¡ç®—å¯¹è±¡çš„ hashcode å€¼æ¥åˆ¤æ–­å¯¹è±¡åŠ å…¥çš„ä½ç½®ï¼Œå¦‚æœå‘ç°æœ‰ç›¸åŒ hashcode å€¼çš„å¯¹è±¡ï¼Œè¿™æ—¶ä¼šè°ƒç”¨ equals()æ–¹æ³•æ¥æ£€æŸ¥ hashcode ç›¸ç­‰çš„å¯¹è±¡æ˜¯å¦çœŸçš„ç›¸åŒã€‚å¦‚æœä¸¤è€…ç›¸åŒï¼Œè¡¨æ˜å·²ç»æœ‰äº†ç›¸åŒçš„å¯¹è±¡äº†ï¼ŒhashSet å°±ä¸ä¼šè®©å…¶åŠ å…¥æ“ä½œæˆåŠŸã€‚å¦‚æœä¸åŒçš„è¯ï¼Œå°±ä¼šé‡æ–°æ•£åˆ—åˆ°å…¶ä»–ä½ç½®ã€‚ \n\n```java\n// Dummy value to associate with an Object in the backing Map\nprivate static final Object PRESENT = new Object();\nprivate transient HashMap<E,Object> map;\n\npublic HashSet() {\n    map = new HashMap<>();\n}\n\npublic boolean add(E e) {\n    // è°ƒç”¨HashMapçš„putæ–¹æ³•,PRESENTæ˜¯ä¸€ä¸ªè‡³å§‹è‡³ç»ˆéƒ½ç›¸åŒçš„è™šå€¼\n\treturn map.put(e, PRESENT)==null;\n}\n```\n\n#### åªé‡å†™ hashCode å¯ä»¥å—ï¼Ÿ\n\nä¸¤ä¸ªå¯¹è±¡çš„ hashCode ç›¸åŒï¼Œä½†æ˜¯å†…å®¹å¯èƒ½ä¸åŒï¼Œåœ¨ set ä¸­æ˜æ˜åº”è¯¥æ˜¯ä¸¤ä¸ªä¸åŒçš„å¯¹è±¡ï¼Œè¿™æ—¶å€™åªé€šè¿‡ hashCode åˆ¤æ–­ä»–ä¿©ç›¸åŒä¼šå¯¼è‡´åªæ’å…¥ä¸€ä¸ªå…ƒç´ ã€‚\n\n#### åªé‡å†™ equalså¯ä»¥å—ï¼Ÿ\n\nå¦‚æœåœ¨é‡å†™ equals æ—¶ï¼Œä¸é‡å†™ hashCodeï¼Œå°±ä¼šå¼•èµ·æ¯”å¦‚è¯´å°†ä¸¤ä¸ªç›¸ç­‰çš„è‡ªå®šä¹‰å¯¹è±¡å­˜å‚¨åœ¨ Set é›†åˆæ—¶ï¼Œä¼šå°†è¿™ä¸¤ä¸ªå¯¹è±¡éƒ½è¿›è¡Œæ’å…¥ã€‚ï¼ˆæ— æ³•å»é‡ï¼‰\n\n## Mapæ¥å£\n\n### HashMapçº¿ç¨‹ä¸å®‰å…¨çš„ä¸»è¦ä½“ç°ï¼Ÿ\n\n1. åœ¨jdk1.7ä¸­ï¼Œåœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ï¼Œ**æ‰©å®¹**æ—¶ä¼šé€ æˆæ­»é“¾ã€‚\n\n\t> ä½œè€…ï¼šç£Šå“¥\n\t> é“¾æ¥ï¼šhttps://www.zhihu.com/question/394039290/answer/2314917909\n\t> æ¥æºï¼šçŸ¥ä¹\n\n\t1.1ã€\n\n\tæ­»å¾ªç¯æ˜¯å› ä¸ºå¹¶å‘HashMapæ‰©å®¹å¯¼è‡´çš„ï¼Œå¹¶å‘æ‰©å®¹çš„ç¬¬ä¸€æ­¥ï¼Œçº¿ç¨‹T1å’Œçº¿ç¨‹T2è¦å¯¹HashMapè¿›è¡Œæ‰©å®¹æ“ä½œï¼Œæ­¤æ—¶T1å’ŒT2æŒ‡å‘çš„æ˜¯é“¾è¡¨çš„å¤´ç»“ç‚¹å…ƒç´ Aï¼Œè€ŒT1å’ŒT2çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼Œä¹Ÿå°±æ˜¯T1.nextå’ŒT2.nextæŒ‡å‘çš„æ˜¯BèŠ‚ç‚¹ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š \n\n\t![å¤šçº¿ç¨‹æ‰©å®¹å¯¼è‡´æ­»å¾ªç¯é—®é¢˜-1](https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/v2-e0b4f5ea00cb277bde490f315b9b387f_720w.jpg)\n\n\t1.2ã€\n\n\tæ­»å¾ªç¯çš„ç¬¬äºŒæ­¥æ“ä½œæ˜¯ï¼Œçº¿ç¨‹T2æ—¶é—´ç‰‡ç”¨å®Œè¿›å…¥ä¼‘çœ çŠ¶æ€ï¼Œè€Œçº¿ç¨‹T1å¼€å§‹æ‰§è¡Œæ‰©å®¹æ“ä½œï¼Œä¸€ç›´åˆ°çº¿ç¨‹T1æ‰©å®¹å®Œæˆåï¼Œçº¿ç¨‹T2æ‰è¢«å”¤é†’ï¼Œæ‰©å®¹ä¹‹åçš„åœºæ™¯å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š \n\n\t![å¤šçº¿ç¨‹æ‰©å®¹å¯¼è‡´æ­»å¾ªç¯é—®é¢˜-2](https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/v2-5f78d8ac8af1efc79e7d79a1f3fdc154_r.jpg)\n\n\t ä»ä¸Šå›¾å¯çŸ¥çº¿ç¨‹T1æ‰§è¡Œä¹‹åï¼Œ**å› ä¸ºæ˜¯å¤´æ’æ³•ï¼Œæ‰€ä»¥HashMapçš„é¡ºåºå·²ç»å‘ç”Ÿäº†æ”¹å˜**ï¼Œä½†çº¿ç¨‹T2å¯¹äºå‘ç”Ÿçš„ä¸€åˆ‡æ˜¯ä¸å¯çŸ¥çš„ï¼Œæ‰€ä»¥å®ƒçš„æŒ‡å‘å…ƒç´ ä¾ç„¶æ²¡å˜ï¼Œå¦‚ä¸Šå›¾å±•ç¤ºçš„é‚£æ ·ï¼ŒT2æŒ‡å‘çš„æ˜¯Aå…ƒç´ ï¼ŒT2.nextæŒ‡å‘çš„èŠ‚ç‚¹æ˜¯Bå…ƒç´ ã€‚\n\n\t1.3ã€\n\n\tå½“çº¿ç¨‹T1æ‰§è¡Œå®Œï¼Œè€Œçº¿ç¨‹T2æ¢å¤æ‰§è¡Œæ—¶ï¼Œæ­»å¾ªç¯å°±å»ºç«‹äº†ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š \n\n\t![å¤šçº¿ç¨‹æ‰©å®¹å¯¼è‡´æ­»å¾ªç¯é—®é¢˜-3](https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/v2-bd4a753db8c985119aa4dcd4356609cf_720w.jpg)\n\n\t å› ä¸ºT1æ‰§è¡Œå®Œæ‰©å®¹ä¹‹åBèŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹æ˜¯Aï¼Œè€ŒT2çº¿ç¨‹æŒ‡å‘çš„é¦–èŠ‚ç‚¹æ˜¯Aï¼Œç¬¬äºŒä¸ªèŠ‚ç‚¹æ˜¯Bï¼Œè¿™ä¸ªé¡ºåºåˆšå¥½å’ŒT1æ‰©å®Œå®¹å®Œä¹‹åçš„èŠ‚ç‚¹é¡ºåºæ˜¯ç›¸åçš„ã€‚**T1æ‰§è¡Œå®Œä¹‹åçš„é¡ºåºæ˜¯Båˆ°Aï¼Œè€ŒT2çš„é¡ºåºæ˜¯Aåˆ°Bï¼Œè¿™æ ·AèŠ‚ç‚¹å’ŒBèŠ‚ç‚¹å°±å½¢æˆæ­»å¾ªç¯äº†**ï¼Œè¿™å°±æ˜¯HashMapæ­»å¾ªç¯å¯¼è‡´çš„åŸå› ã€‚\n\n2. åœ¨jdk1.8ä¸­ï¼Œåœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ï¼Œ**æ’å…¥**æ—¶ä¼šå‘ç”Ÿæ•°æ®è¦†ç›–çš„æƒ…å†µï¼ˆ**å°¾æ’æ³•**ï¼‰ã€‚\n\n### HashMapåœ¨JDK1.7å’ŒJDK1.8ä¸­æœ‰å“ªäº›ä¸åŒï¼Ÿ\n\n| ä¸åŒ                         | JDK 1.7                                                      | JDK 1.8                                                      |\n| ---------------------------- | ------------------------------------------------------------ | ------------------------------------------------------------ |\n| **å­˜å‚¨ç»“æ„**                 | æ•°ç»„ + é“¾è¡¨                                                  | æ•°ç»„ + é“¾è¡¨ + çº¢é»‘æ ‘                                         |\n| **hashå€¼è®¡ç®—æ–¹å¼**           | æ‰°åŠ¨å¤„ç† = 4æ¬¡ä½è¿ç®— + 5æ¬¡å¼‚æˆ–è¿ç®—                           | æ‰°åŠ¨å¤„ç† = 1æ¬¡ä½è¿ç®— + 1æ¬¡å¼‚æˆ–è¿ç®—                           |\n| **å­˜æ”¾æ•°æ®çš„è§„åˆ™**           | æ— å†²çªæ—¶ï¼Œå­˜æ”¾æ•°ç»„ï¼›<br />å†²çªæ—¶ï¼Œå­˜æ”¾é“¾è¡¨                   | æ— å†²çªæ—¶ï¼Œå­˜æ”¾æ•°ç»„ï¼›<br />å†²çª & é“¾è¡¨é•¿åº¦ < 8ï¼šæ’å…¥å•é“¾è¡¨ï¼›<br />é“¾è¡¨é•¿åº¦>8ï¼Œå…ˆå°è¯•æ‰©å®¹æ•°ç»„ï¼Œæ•°ç»„é•¿åº¦å¤§äº64<br />é“¾è¡¨è½¬ä¸ºçº¢é»‘æ ‘ï¼Œæ’å…¥åˆ°çº¢é»‘æ ‘ |\n| **æ’å…¥æ•°æ®æ–¹å¼**             | å¤´æ’æ³•                                                       | å°¾æ’æ³•                                                       |\n| **æ‰©å®¹åå­˜å‚¨ä½ç½®çš„è®¡ç®—æ–¹å¼** | æŒ‰ç…§åŸæ¥æ–¹æ³•é‡æ–°è¿›è¡Œè®¡ç®—<br />hashCodeã€æ‰°åŠ¨å‡½æ•°ã€ä¸è¿ç®—h&length-1 | æ ¹æ®å…ƒç´ çš„hashå€¼è¿›è¡Œåˆ¤æ–­ <br />æ‰©å®¹åçš„ä½ç½®=åŸä½ç½® or åŸä½ç½® + æ—§å®¹é‡ |\n\n### HashMapçš„hashç®—æ³•\n\n#### ä»€ä¹ˆæ˜¯å“ˆå¸Œï¼Ÿ\n\nHashï¼Œå°±æ˜¯æŠŠä»»æ„é•¿åº¦çš„è¾“å…¥é€šè¿‡æ•£åˆ—ç®—æ³•ï¼Œå˜æ¢æˆå›ºå®šé•¿åº¦çš„è¾“å‡ºï¼Œè¯¥è¾“å‡ºå°±æ˜¯æ•£åˆ—å€¼ï¼ˆå“ˆå¸Œå€¼ï¼‰ï¼›\n\nhash å€¼ä¸åŒï¼Œè¾“å…¥ä¸€å®šä¸åŒï¼›è¾“å…¥ä¸åŒï¼Œhash å€¼å¯èƒ½ç›¸åŒï¼ˆå³å“ˆå¸Œç¢°æ’ï¼‰\n\n#### ä»€ä¹ˆæ˜¯å“ˆå¸Œå†²çªï¼Ÿ\n\nå½“ä¸¤ä¸ªä¸åŒçš„è¾“å…¥å€¼ï¼Œæ ¹æ®åŒä¸€æ•£åˆ—å‡½æ•°è®¡ç®—å‡ºç›¸åŒçš„æ•£åˆ—å€¼çš„ç°è±¡ï¼Œæˆ‘ä»¬å°±æŠŠå®ƒå«åšå“ˆå¸Œç¢°æ’/å†²çªã€‚\n\n#### HashMapçš„æ•°æ®ç»“æ„\n\nåº•å±‚æ•°æ®ç»“æ„ï¼šæ•°ç»„+é“¾è¡¨\n**æ•°ç»„çš„ç‰¹ç‚¹æ˜¯ï¼šæ–¹ä¾¿æŸ¥æ‰¾ï¼›é“¾è¡¨çš„ç‰¹ç‚¹æ˜¯ï¼šæ–¹ä¾¿æ’å…¥åˆ é™¤**\næ‰€ä»¥æˆ‘ä»¬å°†æ•°ç»„å’Œé“¾è¡¨ç»“åˆåœ¨ä¸€èµ·ï¼Œå‘æŒ¥ä¸¤è€…å„è‡ªçš„ä¼˜åŠ¿ï¼Œä½¿ç”¨ä¸€ç§å«åš**é“¾åœ°å€æ³•**çš„æ–¹å¼å¯ä»¥è§£å†³å“ˆå¸Œå†²çª\n\n> è§£å†³å“ˆå¸Œå†²çªçš„å…¶ä»–æ–¹æ³•ï¼š\n> å¼€æ”¾å®šå€æ³•ï¼ˆå†²çªäº†é€šè¿‡æŸç§æ–¹å¼æ•£åˆ—åˆ°å¦ä¸€ä¸ªä¸å†²çªçš„ä½ç½®ä¸Šï¼‰ï¼›\n> å†å“ˆå¸Œæ³•ï¼ˆæ„é€ å¤šä¸ªä¸åŒçš„å“ˆå¸Œå‡½æ•°ï¼‰ã€‚\n\n![HashMapæ•°æ®ç»“æ„](https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/TyporaNotesaHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy83ODk2ODkwLWM2NmE0YmQ4OTA3ZjQ5ZjYucG5n.png)\n\n#### æ‰°åŠ¨å¤„ç†\n\nç”±äºè®¡ç®—ä¸‹æ ‡æ—¶ï¼Œé€šè¿‡ h & (length - 1)ï¼Œç”±äºhashå€¼èŒƒå›´å¾ˆå¤§ï¼Œè€Œæ•°ç»„é•¿åº¦ç›¸å¯¹æ¥è¯´å°å¾—å¤šï¼Œå¯¼è‡´è¿›è¡Œä¸è¿ç®—æ—¶å‚ä¸è¿ç®—çš„åªæœ‰hashå€¼çš„ä½ä½ï¼Œ**é«˜ä½æ˜¯æ²¡æœ‰èµ·åˆ°ä»»ä½•ä½œç”¨çš„**ï¼Œè¿™å°†ä¼šå¤§å¤§å¢åŠ å“ˆå¸Œç¢°æ’çš„æ¦‚ç‡ã€‚æ‰€ä»¥æˆ‘ä»¬çš„æ€è·¯å°±æ˜¯è®©hashCodeå€¼çš„é«˜ä½ä¹Ÿå‚ä¸è¿ç®—ï¼Œè¿›ä¸€æ­¥é™ä½hashç¢°æ’çš„æ¦‚ç‡ï¼Œä½¿å¾—**æ•°æ®åˆ†å¸ƒæ›´å¹³å‡**ï¼Œæˆ‘ä»¬æŠŠè¿™æ ·çš„æ“ä½œç§°ä¸º**æ‰°åŠ¨**ï¼Œåœ¨**JDK 1.8**ä¸­çš„hash()å‡½æ•°å¦‚ä¸‹ï¼š\n\n```java\nstatic final int hash(Object key) {\n    int h;\n    return (key == null) ? 0 : (h = key.hashCode()) ^ (h >>> 16);\n    // ä¸è‡ªå·±å³ç§»16ä½è¿›è¡Œå¼‚æˆ–è¿ç®—ï¼ˆé«˜ä½ä½å¼‚æˆ–ï¼‰\n}\n```\n\nè¿™æ¯”åœ¨**JDK 1.7**ä¸­ï¼Œæ›´ä¸ºç®€æ´ï¼Œ**ç›¸æ¯”åœ¨1.7ä¸­çš„4æ¬¡ä½è¿ç®—ï¼Œ5æ¬¡å¼‚æˆ–è¿ç®—ï¼ˆ9æ¬¡æ‰°åŠ¨ï¼‰ï¼Œåœ¨1.8ä¸­ï¼Œåªè¿›è¡Œäº†1æ¬¡ä½è¿ç®—å’Œ1æ¬¡å¼‚æˆ–è¿ç®—ï¼ˆ2æ¬¡æ‰°åŠ¨ï¼‰**ï¼›\n\n#### ä¸‹æ ‡è®¡ç®—\n\nåœ¨å¾—åˆ°hashå€¼ä¹‹åï¼Œæˆ‘ä»¬è¦æŠŠè¿™äº›hashå€¼æ˜ å°„åˆ°ç›¸åº”çš„æ•°ç»„ä¸‹æ ‡ä¸Šï¼Œé‚£ä¹ˆå°±å¯ä»¥è€ƒè™‘ä½¿ç”¨ hash % length\n\nè€Œ hash % length==hash & (length-1) å¹¶ä¸”å‰ææ˜¯ length æ˜¯2çš„ n æ¬¡æ–¹ã€‚\nç”±äºé‡‡ç”¨äºŒè¿›åˆ¶ä½æ“ä½œ &ï¼Œç›¸å¯¹äº%èƒ½å¤Ÿæé«˜è¿ç®—æ•ˆç‡ï¼Œå› æ­¤å¯ä»¥å°† HashMap çš„é•¿åº¦è®¾è®¡ä¸º 2 çš„å¹‚æ¬¡æ–¹ã€‚ï¼ˆåˆå§‹åŒ–ä¸º16ï¼Œå¦‚æœæŒ‡å®šåˆå§‹åŒ–å®¹é‡çš„å€¼ï¼Œä¼šæ‰©å®¹è‡³ç¬¬ä¸€ä¸ªå¤§äºè¯¥å®¹é‡çš„ 2 çš„å¹‚æ¬¡æ–¹ä½œä¸ºæ•°ç»„å®¹é‡ï¼‰\n\n```java\nstatic int indexFor(int h, int length){\n     return h & (length - 1);\n}\n```\n\n#### ä¸ºä»€ä¹ˆè¦å°†æ•°ç»„é•¿åº¦è®¾ç½®ä¸º 2 çš„næ¬¡å¹‚å‘¢ï¼Ÿ\n\nå½“æ•°ç»„é•¿åº¦ä¸º2çš„næ¬¡å¹‚çš„æ—¶å€™ï¼Œä¸åŒçš„keyä¸1111ï¼ˆnä¸ªï¼‰è¿›è¡Œä¸é¢„ç®—å¾—åˆ°ç›¸åŒä¸‹æ ‡çš„å‡ ç‡è¾ƒå°ï¼Œå‘ç”Ÿç¢°æ’çš„å‡ ç‡å°ã€‚ \n\n#### JDK1.8æ–°å¢çº¢é»‘æ ‘\n\nä¸ºäº†è§£å†³ä¸€æ¡é“¾ä¸Šçš„å…ƒç´ è¿‡å¤šï¼ŒæŸ¥æ‰¾æ•ˆç‡ä½çš„é—®é¢˜ï¼Œå°†é“¾è¡¨è½¬åŒ–ä¸ºçº¢é»‘æ ‘ï¼Œéå†å¤æ‚åº¦é™ä½è‡³O(logn)ï¼›\n\n#### HashMapæ˜¯ä½¿ç”¨äº†å“ªäº›æ–¹æ³•æ¥æœ‰æ•ˆè§£å†³å“ˆå¸Œå†²çªçš„ï¼Ÿ\n\n1. ä½¿ç”¨é“¾åœ°å€æ³•ï¼ˆä½¿ç”¨æ•£åˆ—è¡¨ï¼‰æ¥é“¾æ¥æ‹¥æœ‰ç›¸åŒhashå€¼çš„æ•°æ®ï¼›\n2. ä½¿ç”¨2æ¬¡æ‰°åŠ¨å‡½æ•°ï¼ˆ1æ¬¡ä½è¿ç®—å’Œ1æ¬¡å¼‚æˆ–è¿ç®—ï¼‰æ¥é™ä½å“ˆå¸Œå†²çªçš„æ¦‚ç‡ï¼Œä½¿å¾—æ•°æ®åˆ†å¸ƒæ›´å¹³å‡ï¼›\n3. å¼•å…¥çº¢é»‘æ ‘è¿›ä¸€æ­¥é™ä½éå†çš„æ—¶é—´å¤æ‚åº¦ï¼Œä½¿å¾—éå†æ›´å¿«ã€‚\n\n### HashMapçš„getæ–¹æ³•çš„å…·ä½“æµç¨‹ï¼Ÿ\n\n1. å…ˆä½¿ç”¨keyçš„hashCodeã€æ‰°åŠ¨å¤„ç†ã€ä¸æ•°ç»„é•¿åº¦-1 è¿›è¡Œä¸è¿ç®—ï¼ˆå¯¹æ•°ç»„é•¿åº¦å»ä½™ï¼‰å¾—åˆ°æ§½ä½ï¼›\n2. åˆ¤æ–­é¦–ç»“ç‚¹ï¼Œå¦‚æœé¦–ç»“ç‚¹å’Œkeyçš„ **hashå€¼** ï¼ˆhashCodeå€¼ç»è¿‡æ‰°åŠ¨å‡½æ•°å¤„ç†åçš„å€¼ï¼‰ç›¸ç­‰ï¼Œå¹¶ä¸”ä¸¤è€…çš„ **keyå€¼åœ°å€ç›¸ç­‰ã€equalsç›¸ç­‰**ï¼Œåˆ™è¿”å›é¦–ç»“ç‚¹ï¼›\n3. å¦åˆ™ï¼Œåˆ™çº¢é»‘æ ‘æˆ–è€…é“¾è¡¨ä¸­è¿›è¡ŒæŸ¥æ‰¾ï¼ŒæŸ¥æ‰¾æ—¶åˆ¤æ–­ä¸¤ä¸ªkeyçš„hashå€¼ã€keyå€¼åœ°å€ç›¸ç­‰ã€equalsæ˜¯å¦éƒ½ç›¸ç­‰ã€‚\n\n```java\npublic V get(Object key) {\n    Node<K,V> e;\n    return (e = getNode(hash(key), key)) == null ? null : e.value;\n}\n\nfinal Node<K,V> getNode(int hash, Object key) {\n    Node<K,V>[] tab; Node<K,V> first, e; int n; K k;\n    \n    //Nodeæ•°ç»„ä¸ä¸ºç©ºï¼Œæ•°ç»„é•¿åº¦å¤§äº0ï¼Œæ•°ç»„å¯¹åº”ä¸‹æ ‡çš„Nodeä¸ä¸ºç©º\n    if ((tab = table) != null && (n = tab.length) > 0 &&\n        //ä¹Ÿæ˜¯é€šè¿‡ hash & (length - 1) æ¥æ›¿ä»£ hash % length çš„\n        (first = tab[(n - 1) & hash]) != null) {\n        \n        //å…ˆå’Œç¬¬ä¸€ä¸ªç»“ç‚¹æ¯”ï¼Œhashå€¼ç›¸ç­‰ä¸”keyä¸ä¸ºç©ºï¼Œkeyçš„ç¬¬ä¸€ä¸ªç»“ç‚¹çš„keyçš„å¯¹è±¡åœ°å€å’Œå€¼å‡ç›¸ç­‰\n        //åˆ™è¿”å›ç¬¬ä¸€ä¸ªç»“ç‚¹\n        if (first.hash == hash && // always check first node\n            ((k = first.key) == key || (key != null && key.equals(k))))\n            return first;\n        //å¦‚æœkeyå’Œç¬¬ä¸€ä¸ªç»“ç‚¹ä¸åŒ¹é…ï¼Œåˆ™çœ‹.nextæ˜¯å¦ä¸ºç©ºï¼Œä¸ä¸ºnullåˆ™ç»§ç»­ï¼Œä¸ºç©ºåˆ™è¿”å›null\n        if ((e = first.next) != null) {\n            //å¦‚æœæ­¤æ—¶æ˜¯çº¢é»‘æ ‘çš„ç»“æ„ï¼Œåˆ™è¿›è¡Œå¤„ç†getTreeNode()æ–¹æ³•æœç´¢key\n            if (first instanceof TreeNode)\n                return ((TreeNode<K,V>)first).getTreeNode(hash, key);\n            //æ˜¯é“¾è¡¨ç»“æ„çš„è¯å°±ä¸€ä¸ªä¸€ä¸ªéå†ï¼Œç›´åˆ°æ‰¾åˆ°keyå¯¹åº”çš„ç»“ç‚¹ï¼Œ\n            //æˆ–è€…eçš„ä¸‹ä¸€ä¸ªç»“ç‚¹ä¸ºnullé€€å‡ºå¾ªç¯\n            do {\n                if (e.hash == hash &&\n                    ((k = e.key) == key || (key != null && key.equals(k))))\n                    return e;\n            } while ((e = e.next) != null);\n        }\n    }\n    return null;\n}\n```\n\n### HashMapçš„putæ–¹æ³•çš„å…·ä½“æµç¨‹ï¼Ÿ\n\n1. å¦‚æœtableæœªåˆå§‹åŒ–æˆ–è€…é•¿åº¦ä¸º0ç©ºåˆ™æ‰§è¡Œresize()è¿›è¡Œæ‰©å®¹ï¼Œè½¬å‘â‘¡\n2. æ ¹æ®é”®å€¼keyè®¡ç®—hashå€¼å¾—åˆ°æ’å…¥çš„æ•°ç»„ç´¢å¼•iï¼Œå¦‚æœtable[i]==nullï¼Œå³æ•°ç»„è¯¥ä½ç½®ä¸Šæ²¡æœ‰å…ƒç´ ï¼Œç›´æ¥æ–°å»ºèŠ‚ç‚¹æ’å…¥ï¼Œè½¬å‘â‘¥åˆ¤æ–­æ˜¯å¦éœ€è¦æ‰©å®¹ï¼Œå¦‚æœtable[i]ä¸ä¸ºç©ºï¼Œè½¬å‘â‘¢ï¼›\n3. åˆ¤æ–­table[i]çš„é¦–ä¸ªå…ƒç´ æ˜¯å¦å’Œkeyä¸€æ ·ï¼Œå¦‚æœç›¸åŒï¼ˆhashCodeç›¸åŒã€keyåœ°å€ç›¸åŒã€equalsç›¸åŒï¼‰ç›´æ¥è¦†ç›–valueï¼Œå¦åˆ™è½¬å‘â‘£ï¼›\n4. åˆ¤æ–­table[i] æ˜¯å¦ä¸ºtreeNodeï¼Œå³table[i] æ˜¯å¦æ˜¯çº¢é»‘æ ‘ï¼Œå¦‚æœæ˜¯çº¢é»‘æ ‘ï¼Œåˆ™ç›´æ¥åœ¨æ ‘ä¸­æ’å…¥é”®å€¼å¯¹ï¼Œå¦åˆ™è½¬å‘â‘¤ï¼›\n5. éå†table[i]ï¼Œåˆ¤æ–­é“¾è¡¨é•¿åº¦æ˜¯å¦å¤§äº8ï¼Œå¤§äº8çš„è¯æŠŠé“¾è¡¨è½¬æ¢ä¸ºçº¢é»‘æ ‘ï¼Œåœ¨çº¢é»‘æ ‘ä¸­æ‰§è¡Œæ’å…¥æ“ä½œï¼Œå¦åˆ™è¿›è¡Œé“¾è¡¨çš„æ’å…¥æ“ä½œï¼›éå†è¿‡ç¨‹ä¸­è‹¥å‘ç°keyå·²ç»å­˜åœ¨ç›´æ¥è¦†ç›–valueå³å¯ï¼›\n6. æ’å…¥æˆåŠŸåï¼Œåˆ¤æ–­å®é™…å­˜åœ¨çš„é”®å€¼å¯¹æ•°é‡sizeæ˜¯å¦è¶…å‡ºå½“å‰æœ€å¤§å®¹é‡thresholdï¼Œå¦‚æœè¶…è¿‡ï¼Œè¿›è¡Œæ‰©å®¹ã€‚\n\n```java\npublic V put(K key, V value) {\n    return putVal(hash(key), key, value, false, true);\n}\n\nstatic final int hash(Object key) {\n    int h;\n    return (key == null) ? 0 : (h = key.hashCode()) ^ (h >>> 16);\n}\n\n//å®ç°Map.putå’Œç›¸å…³æ–¹æ³•\nfinal V putVal(int hash, K key, V value, boolean onlyIfAbsent,\n                   boolean evict) {\n    Node<K,V>[] tab; Node<K,V> p; int n, i;\n    // æ­¥éª¤â‘ ï¼štabä¸ºç©ºåˆ™åˆ›å»º \n    // tableæœªåˆå§‹åŒ–æˆ–è€…é•¿åº¦ä¸º0ï¼Œè¿›è¡Œæ‰©å®¹\n    if ((tab = table) == null || (n = tab.length) == 0)\n        n = (tab = resize()).length;\n    // æ­¥éª¤â‘¡ï¼šè®¡ç®—indexï¼Œå¹¶å¯¹nullåšå¤„ç†  \n    // (n - 1) & hash ç¡®å®šå…ƒç´ å­˜æ”¾åœ¨å“ªä¸ªæ¡¶ä¸­ï¼Œæ¡¶ä¸ºç©ºï¼Œæ–°ç”Ÿæˆç»“ç‚¹æ”¾å…¥æ¡¶ä¸­(æ­¤æ—¶ï¼Œè¿™ä¸ªç»“ç‚¹æ˜¯æ”¾åœ¨æ•°ç»„ä¸­)\n    if ((p = tab[i = (n - 1) & hash]) == null)\n        tab[i] = newNode(hash, key, value, null);\n    // æ¡¶ä¸­å·²ç»å­˜åœ¨å…ƒç´ \n    else {\n        Node<K,V> e; K k;\n        // æ­¥éª¤â‘¢ï¼šèŠ‚ç‚¹keyå­˜åœ¨ï¼Œç›´æ¥è¦†ç›–value \n        // æ¯”è¾ƒæ¡¶ä¸­ç¬¬ä¸€ä¸ªå…ƒç´ (æ•°ç»„ä¸­çš„ç»“ç‚¹)çš„hashå€¼ç›¸ç­‰ï¼Œkeyç›¸ç­‰\n        if (p.hash == hash &&\n            ((k = p.key) == key || (key != null && key.equals(k))))\n                // å°†ç¬¬ä¸€ä¸ªå…ƒç´ èµ‹å€¼ç»™eï¼Œç”¨eæ¥è®°å½•\n                e = p;\n        // æ­¥éª¤â‘£ï¼šåˆ¤æ–­è¯¥é“¾ä¸ºçº¢é»‘æ ‘ \n        // hashå€¼ä¸ç›¸ç­‰ï¼Œå³keyä¸ç›¸ç­‰ï¼›ä¸ºçº¢é»‘æ ‘ç»“ç‚¹\n        // å¦‚æœå½“å‰å…ƒç´ ç±»å‹ä¸ºTreeNodeï¼Œè¡¨ç¤ºä¸ºçº¢é»‘æ ‘ï¼ŒputTreeValè¿”å›å¾…å­˜æ”¾çš„node, eå¯èƒ½ä¸ºnull\n        else if (p instanceof TreeNode)\n            // æ”¾å…¥æ ‘ä¸­\n            e = ((TreeNode<K,V>)p).putTreeVal(this, tab, hash, key, value);\n        // æ­¥éª¤â‘¤ï¼šè¯¥é“¾ä¸ºé“¾è¡¨ \n        // ä¸ºé“¾è¡¨ç»“ç‚¹\n        else {\n            // åœ¨é“¾è¡¨æœ€æœ«æ’å…¥ç»“ç‚¹\n            for (int binCount = 0; ; ++binCount) {\n                // åˆ°è¾¾é“¾è¡¨çš„å°¾éƒ¨\n                \n                //åˆ¤æ–­è¯¥é“¾è¡¨å°¾éƒ¨æŒ‡é’ˆæ˜¯ä¸æ˜¯ç©ºçš„\n                if ((e = p.next) == null) {\n                    // åœ¨å°¾éƒ¨æ’å…¥æ–°ç»“ç‚¹\n                    p.next = newNode(hash, key, value, null);\n                    //åˆ¤æ–­é“¾è¡¨çš„é•¿åº¦æ˜¯å¦è¾¾åˆ°è½¬åŒ–çº¢é»‘æ ‘çš„ä¸´ç•Œå€¼ï¼Œä¸´ç•Œå€¼ä¸º8\n                    if (binCount >= TREEIFY_THRESHOLD - 1) // -1 for 1st\n                        //é“¾è¡¨ç»“æ„è½¬æ ‘å½¢ç»“æ„\n                        treeifyBin(tab, hash);\n                    // è·³å‡ºå¾ªç¯\n                    break;\n                }\n                // åˆ¤æ–­é“¾è¡¨ä¸­ç»“ç‚¹çš„keyå€¼ä¸æ’å…¥çš„å…ƒç´ çš„keyå€¼æ˜¯å¦ç›¸ç­‰\n                if (e.hash == hash &&\n                    ((k = e.key) == key || (key != null && key.equals(k))))\n                    // ç›¸ç­‰ï¼Œè·³å‡ºå¾ªç¯\n                    break;\n                // ç”¨äºéå†æ¡¶ä¸­çš„é“¾è¡¨ï¼Œä¸å‰é¢çš„e = p.nextç»„åˆï¼Œå¯ä»¥éå†é“¾è¡¨\n                p = e;\n            }\n        }\n        //åˆ¤æ–­å½“å‰çš„keyå·²ç»å­˜åœ¨çš„æƒ…å†µä¸‹ï¼Œå†æ¥ä¸€ä¸ªç›¸åŒçš„hashå€¼ã€keyå€¼æ—¶ï¼Œè¿”å›æ–°æ¥çš„valueè¿™ä¸ªå€¼\n        if (e != null) { \n            // è®°å½•eçš„value\n            V oldValue = e.value;\n            // onlyIfAbsentä¸ºfalseæˆ–è€…æ—§å€¼ä¸ºnull\n            if (!onlyIfAbsent || oldValue == null)\n                //ç”¨æ–°å€¼æ›¿æ¢æ—§å€¼\n                e.value = value;\n            // è®¿é—®åå›è°ƒ\n            afterNodeAccess(e);\n            // è¿”å›æ—§å€¼\n            return oldValue;\n        }\n    }\n    // ç»“æ„æ€§ä¿®æ”¹\n    ++modCount;\n    // æ­¥éª¤â‘¥ï¼šè¶…è¿‡æœ€å¤§å®¹é‡å°±æ‰©å®¹ \n    // å®é™…å¤§å°å¤§äºé˜ˆå€¼åˆ™æ‰©å®¹\n    if (++size > threshold)\n        resize();\n    // æ’å…¥åå›è°ƒ\n    afterNodeInsertion(evict);\n    return null;\n}\n```\n\n### HashMapçš„æ‰©å®¹æ“ä½œæ˜¯æ€ä¹ˆå®ç°çš„ï¼Ÿ\n\nâ‘ .åœ¨jdk1.8ä¸­ï¼Œresizeæ–¹æ³•æ˜¯åœ¨hashmapä¸­çš„é”®å€¼å¯¹ï¼ˆå…ƒç´ æ•°é‡ï¼‰å¤§äºé˜€å€¼æ—¶ï¼ˆé˜ˆå€¼ä¸ºå®¹é‡*è´Ÿè½½å› å­ï¼‰æ‰©å®¹ä¸ºåŸå®¹é‡çš„2å€ï¼Œæˆ–è€…åˆå§‹åŒ–æ—¶ï¼ˆæ‰©å®¹ä¸º16ï¼‰ï¼Œå°±è°ƒç”¨resizeæ–¹æ³•è¿›è¡Œæ‰©å®¹ï¼›\n\nâ‘¡.åœ¨1.7ä¸­ï¼Œæ‰©å®¹ä¹‹åéœ€è¦é‡æ–°å»è®¡ç®—å…¶Hashå€¼ï¼Œæ ¹æ®Hashå€¼å¯¹å…¶è¿›è¡Œåˆ†å‘ï¼Œä½†åœ¨1.8ç‰ˆæœ¬ä¸­ï¼Œåˆ™æ˜¯æ ¹æ®åœ¨åŒä¸€ä¸ªæ¡¶çš„ä½ç½®ä¸­è¿›è¡Œåˆ¤æ–­(e.hash & oldCap)æ˜¯å¦ä¸º0ï¼Œé‡æ–°è¿›è¡Œhashåˆ†é…åï¼Œè¯¥å…ƒç´ hashå€¼ä¸æ—§å®¹é‡ä¸è¿ç®—ä¸º0åˆ™ç•™åœ¨åŸå§‹ä½ç½®ï¼Œhashå€¼ä¸æ—§å®¹é‡ä¸è¿ç®—ä¸º1åˆ™ç§»åŠ¨åˆ° åŸä½ç½® + oldCap è¿™ä¸ªä½ç½®ä¸Š\n\n![HashMapçš„resizeæ“ä½œ](https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/TyporaNotes20190128152700351.png)\n\n```java\nfinal Node<K,V>[] resize() {\n    Node<K,V>[] oldTab = table;//oldTabæŒ‡å‘hashæ¡¶æ•°ç»„\n    int oldCap = (oldTab == null) ? 0 : oldTab.length;\n    int oldThr = threshold;\n    int newCap, newThr = 0;\n    if (oldCap > 0) {//å¦‚æœoldCapä¸ä¸ºç©ºçš„è¯ï¼Œå°±æ˜¯hashæ¡¶æ•°ç»„ä¸ä¸ºç©º\n        if (oldCap >= MAXIMUM_CAPACITY) {//å¦‚æœå¤§äºæœ€å¤§å®¹é‡äº†ï¼Œå°±èµ‹å€¼ä¸ºæ•´æ•°æœ€å¤§çš„é˜€å€¼\n            threshold = Integer.MAX_VALUE;\n            return oldTab;//è¿”å›\n        }//å¦‚æœå½“å‰hashæ¡¶æ•°ç»„çš„é•¿åº¦åœ¨æ‰©å®¹åä»ç„¶å°äºæœ€å¤§å®¹é‡ å¹¶ä¸”oldCapå¤§äºé»˜è®¤å€¼16\n        else if ((newCap = oldCap << 1) < MAXIMUM_CAPACITY &&\n                 oldCap >= DEFAULT_INITIAL_CAPACITY)\n            newThr = oldThr << 1; // double threshold åŒå€æ‰©å®¹é˜€å€¼threshold\n    }\n    // æ—§çš„å®¹é‡ä¸º0ï¼Œä½†thresholdå¤§äºé›¶ï¼Œä»£è¡¨æœ‰å‚æ„é€ æœ‰capä¼ å…¥ï¼Œthresholdå·²ç»è¢«åˆå§‹åŒ–æˆæœ€å°2çš„næ¬¡å¹‚\n    // ç›´æ¥å°†è¯¥å€¼èµ‹ç»™æ–°çš„å®¹é‡\n    else if (oldThr > 0) // initial capacity was placed in threshold\n        newCap = oldThr;\n    // æ— å‚æ„é€ åˆ›å»ºçš„mapï¼Œç»™å‡ºé»˜è®¤å®¹é‡å’Œthreshold 16, 16*0.75\n    else {               // zero initial threshold signifies using defaults\n        newCap = DEFAULT_INITIAL_CAPACITY;\n        newThr = (int)(DEFAULT_LOAD_FACTOR * DEFAULT_INITIAL_CAPACITY);\n    }\n    // æ–°çš„threshold = æ–°çš„cap * 0.75\n    if (newThr == 0) {\n        float ft = (float)newCap * loadFactor;\n        newThr = (newCap < MAXIMUM_CAPACITY && ft < (float)MAXIMUM_CAPACITY ?\n                  (int)ft : Integer.MAX_VALUE);\n    }\n    threshold = newThr;\n    // è®¡ç®—å‡ºæ–°çš„æ•°ç»„é•¿åº¦åèµ‹ç»™å½“å‰æˆå‘˜å˜é‡table\n    @SuppressWarnings({\"rawtypes\",\"unchecked\"})\n        Node<K,V>[] newTab = (Node<K,V>[])new Node[newCap];//æ–°å»ºhashæ¡¶æ•°ç»„\n    table = newTab;//å°†æ–°æ•°ç»„çš„å€¼å¤åˆ¶ç»™æ—§çš„hashæ¡¶æ•°ç»„\n    // å¦‚æœåŸå…ˆçš„æ•°ç»„æ²¡æœ‰åˆå§‹åŒ–ï¼Œé‚£ä¹ˆresizeçš„åˆå§‹åŒ–å·¥ä½œåˆ°æ­¤ç»“æŸï¼Œå¦åˆ™è¿›å…¥æ‰©å®¹å…ƒç´ é‡æ’é€»è¾‘ï¼Œä½¿å…¶å‡åŒ€çš„åˆ†æ•£\n    if (oldTab != null) {\n        // éå†æ–°æ•°ç»„çš„æ‰€æœ‰æ¡¶ä¸‹æ ‡\n        for (int j = 0; j < oldCap; ++j) {\n            Node<K,V> e;\n            if ((e = oldTab[j]) != null) {\n                // æ—§æ•°ç»„çš„æ¡¶ä¸‹æ ‡èµ‹ç»™ä¸´æ—¶å˜é‡eï¼Œå¹¶ä¸”è§£é™¤æ—§æ•°ç»„ä¸­çš„å¼•ç”¨ï¼Œå¦åˆ™å°±æ•°ç»„æ— æ³•è¢«GCå›æ”¶\n                oldTab[j] = null;\n                // å¦‚æœe.next==nullï¼Œä»£è¡¨æ¡¶ä¸­å°±ä¸€ä¸ªå…ƒç´ ï¼Œä¸å­˜åœ¨é“¾è¡¨æˆ–è€…çº¢é»‘æ ‘\n                if (e.next == null)\n                    // ç”¨åŒæ ·çš„hashæ˜ å°„ç®—æ³•æŠŠè¯¥å…ƒç´ åŠ å…¥æ–°çš„æ•°ç»„\n                    newTab[e.hash & (newCap - 1)] = e;\n                // å¦‚æœeæ˜¯TreeNodeå¹¶ä¸”e.next!=nullï¼Œé‚£ä¹ˆå¤„ç†æ ‘ä¸­å…ƒç´ çš„é‡æ’\n                else if (e instanceof TreeNode)\n                    ((TreeNode<K,V>)e).split(this, newTab, j, oldCap);\n                // eæ˜¯é“¾è¡¨çš„å¤´å¹¶ä¸”e.next!=nullï¼Œé‚£ä¹ˆå¤„ç†é“¾è¡¨ä¸­å…ƒç´ é‡æ’\n                else { // preserve order\n                    // loHead,loTail ä»£è¡¨æ‰©å®¹åä¸ç”¨å˜æ¢ä¸‹æ ‡ï¼Œè§æ³¨1\n                    Node<K,V> loHead = null, loTail = null;\n                    // hiHead,hiTail ä»£è¡¨æ‰©å®¹åå˜æ¢ä¸‹æ ‡ï¼Œè§æ³¨1\n                    Node<K,V> hiHead = null, hiTail = null;\n                    Node<K,V> next;\n                    // éå†é“¾è¡¨\n                    do {             \n                        next = e.next;\n                        if ((e.hash & oldCap) == 0) {\n                            if (loTail == null)\n                                // åˆå§‹åŒ–headæŒ‡å‘é“¾è¡¨å½“å‰å…ƒç´ eï¼Œeä¸ä¸€å®šæ˜¯é“¾è¡¨çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œåˆå§‹åŒ–åloHead\n                                // ä»£è¡¨ä¸‹æ ‡ä¿æŒä¸å˜çš„é“¾è¡¨çš„å¤´å…ƒç´ \n                                loHead = e;\n                            else                                \n                                // loTail.nextæŒ‡å‘å½“å‰e\n                                loTail.next = e;\n                            // loTailæŒ‡å‘å½“å‰çš„å…ƒç´ e\n                            // åˆå§‹åŒ–åï¼ŒloTailå’ŒloHeadæŒ‡å‘ç›¸åŒçš„å†…å­˜ï¼Œæ‰€ä»¥å½“loTail.nextæŒ‡å‘ä¸‹ä¸€ä¸ªå…ƒç´ æ—¶ï¼Œ\n                            // åº•å±‚æ•°ç»„ä¸­çš„å…ƒç´ çš„nextå¼•ç”¨ä¹Ÿç›¸åº”å‘ç”Ÿå˜åŒ–ï¼Œé€ æˆlowHead.next.next.....\n                            // è·ŸéšloTailåŒæ­¥ï¼Œä½¿å¾—lowHeadå¯ä»¥é“¾æ¥åˆ°æ‰€æœ‰å±äºè¯¥é“¾è¡¨çš„å…ƒç´ ã€‚\n                            loTail = e;                           \n                        }\n                        else {\n                            if (hiTail == null)\n                                // åˆå§‹åŒ–headæŒ‡å‘é“¾è¡¨å½“å‰å…ƒç´ e, åˆå§‹åŒ–åhiHeadä»£è¡¨ä¸‹æ ‡æ›´æ”¹çš„é“¾è¡¨å¤´å…ƒç´ \n                                hiHead = e;\n                            else\n                                hiTail.next = e;\n                            hiTail = e;\n                        }\n                    } while ((e = next) != null);\n                    // éå†ç»“æŸ, å°†tailæŒ‡å‘nullï¼Œå¹¶æŠŠé“¾è¡¨å¤´æ”¾å…¥æ–°æ•°ç»„çš„ç›¸åº”ä¸‹æ ‡ï¼Œå½¢æˆæ–°çš„æ˜ å°„ã€‚\n                    if (loTail != null) {\n                        loTail.next = null;\n                        newTab[j] = loHead;\n                    }\n                    if (hiTail != null) {\n                        hiTail.next = null;\n                        newTab[j + oldCap] = hiHead;\n                    }\n                }\n            }\n        }\n    }\n    return newTab;\n}\n```\n\n### HashMapè´Ÿè½½å› å­ä¸ºä»€ä¹ˆè®¾ç½®ä¸º 0.75?\n\nhashmapçš„æºç ä¸­æœ‰ä¸€æ®µæ³¨é‡Šè§£é‡Šäº†ä¸ºä»€ä¹ˆè®¾ç½®ä¸º0.75ï¼Œæ˜¯**ç©ºé—´å’Œæ—¶é—´æ•ˆç‡çš„æŠ˜ä¸­è€ƒè™‘**ã€‚\n\n### èƒ½å¦ä½¿ç”¨ä»»ä½•ç±»ä½œä¸º Map çš„ keyï¼Ÿ\n\nå¯ä»¥ä½¿ç”¨ä»»ä½•ç±»ä½œä¸º Map çš„ keyï¼Œå‰ææ˜¯è¯¥ç±»é‡å†™äº†hashCodeå’Œequalsæ–¹æ³•ã€‚é‡å†™hashCode() æ˜¯ä¸ºäº†è®¡ç®—æ•°æ®çš„å­˜å‚¨ä½ç½®ï¼Œé‡å†™equalsæ–¹æ³•æ˜¯ä¸ºäº†ç¡®ä¿keyåœ¨å“ˆå¸Œè¡¨ä¸­çš„å”¯ä¸€æ€§ã€‚æœ€ç»ˆç›®çš„æ˜¯ä¸ºäº†ä¿è¯ Map ä¸­é”®keyçš„å”¯ä¸€æ€§ã€‚\n\n### ä¸ºä»€ä¹ˆHashMapä¸­Stringã€Integerè¿™æ ·çš„åŒ…è£…ç±»é€‚åˆä½œä¸ºkeyï¼Ÿ\n\né‡å†™äº†hashCodeå’Œequalsæ–¹æ³•ï¼Œä¿è¯äº† Map ä¸­é”®**keyçš„å”¯ä¸€æ€§**ã€‚å¹¶ä¸”ä»–ä»¬éƒ½ä¸å¯å˜ï¼Œå¯ä»¥å°†å®ƒä»¬çš„hashå€¼**ç¼“å­˜ä¸‹æ¥ï¼Œæé«˜æ•ˆç‡**ã€‚\n\n### HashMap ä¸ HashTable æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\n\n1. **çº¿ç¨‹å®‰å…¨**ï¼š HashMap æ˜¯éçº¿ç¨‹å®‰å…¨çš„ï¼ŒHashTable æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå†…éƒ¨çš„æ–¹æ³•åŸºæœ¬éƒ½ç»è¿‡ `synchronized` ä¿®é¥°ï¼›\n2. **æ•ˆç‡**ï¼š å› ä¸ºçº¿ç¨‹å®‰å…¨çš„é—®é¢˜ synchronizedï¼ŒHashMap è¦æ¯” HashTable æ•ˆç‡é«˜ä¸€ç‚¹ï¼›\n3. **å¯¹Null key å’ŒNull valueçš„æ”¯æŒ**ï¼š HashMap ä¸­ï¼Œnull å¯ä»¥ä½œä¸ºé”®ï¼Œè¿™æ ·çš„é”®åªæœ‰ä¸€ä¸ªï¼Œå¯ä»¥æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªé”®æ‰€å¯¹åº”çš„å€¼ä¸º nullã€‚ä½†æ˜¯åœ¨ HashTable ä¸­ put è¿›çš„é”®å€¼åªè¦æœ‰ä¸€ä¸ª nullï¼Œç›´æ¥æŠ›NullPointerExceptionï¼›\n4. **åˆå§‹å®¹é‡å¤§å°å’Œæ¯æ¬¡æ‰©å……å®¹é‡å¤§å°çš„ä¸åŒ **ï¼š \n\tâ‘ åˆ›å»ºæ—¶å¦‚æœä¸æŒ‡å®šå®¹é‡åˆå§‹å€¼ï¼ŒHashTable é»˜è®¤çš„åˆå§‹å¤§å°ä¸º11ï¼Œä¹‹åæ¯æ¬¡æ‰©å……ï¼Œå®¹é‡å˜ä¸ºåŸæ¥çš„2n+1ã€‚HashMap é»˜è®¤çš„åˆå§‹åŒ–å¤§å°ä¸º16ã€‚ä¹‹åæ¯æ¬¡æ‰©å……ï¼Œå®¹é‡å˜ä¸ºåŸæ¥çš„2å€ï¼›\n\tâ‘¡åˆ›å»ºæ—¶å¦‚æœç»™å®šäº†å®¹é‡åˆå§‹å€¼ï¼Œé‚£ä¹ˆ HashTable ä¼šç›´æ¥ä½¿ç”¨ä½ ç»™å®šçš„å¤§å°ï¼Œè€Œ HashMap ä¼šå°†å…¶æ‰©å……ä¸º2çš„å¹‚æ¬¡æ–¹å¤§å°ã€‚ä¹Ÿå°±æ˜¯è¯´ HashMap æ€»æ˜¯ä½¿ç”¨2çš„å¹‚ä½œä¸ºå“ˆå¸Œè¡¨çš„å¤§å°ï¼›\n5. **åº•å±‚æ•°æ®ç»“æ„**ï¼š JDK1.8 ä»¥åçš„ HashMap åœ¨è§£å†³å“ˆå¸Œå†²çªæ—¶æœ‰äº†è¾ƒå¤§çš„å˜åŒ–ï¼Œå½“é“¾è¡¨é•¿åº¦å¤§äºé˜ˆå€¼ï¼ˆé»˜è®¤ä¸º8ï¼‰æ—¶ï¼Œå°†é“¾è¡¨è½¬åŒ–ä¸ºçº¢é»‘æ ‘ï¼Œä»¥å‡å°‘æœç´¢æ—¶é—´ã€‚HashTable æ²¡æœ‰è¿™æ ·çš„æœºåˆ¶ã€‚\n\n### ConcurrentHashMap å’Œ HashTable çš„åŒºåˆ«ï¼Ÿ\n\nConcurrentHashMap å’Œ HashTable çš„åŒºåˆ«ä¸»è¦ä½“ç°åœ¨å®ç°çº¿ç¨‹å®‰å…¨çš„æ–¹å¼ä¸Šä¸åŒã€‚\n\n- **åº•å±‚æ•°æ®ç»“æ„**ï¼š \n\tJDK1.7çš„ ConcurrentHashMap åº•å±‚é‡‡ç”¨ **åˆ†æ®µçš„æ•°ç»„+é“¾è¡¨** å®ç°ï¼ŒJDK1.8 é‡‡ç”¨çš„æ•°æ®ç»“æ„è·ŸHashMap1.8çš„ç»“æ„ä¸€æ ·ï¼Œæ•°ç»„+é“¾è¡¨/çº¢é»‘äºŒå‰æ ‘ã€‚\n\tHashTable å’Œ JDK1.8 ä¹‹å‰çš„ HashMap çš„åº•å±‚æ•°æ®ç»“æ„ç±»ä¼¼éƒ½æ˜¯é‡‡ç”¨ **æ•°ç»„+é“¾è¡¨** çš„å½¢å¼ï¼Œæ•°ç»„æ˜¯ HashMap çš„ä¸»ä½“ï¼Œé“¾è¡¨åˆ™æ˜¯ä¸»è¦ä¸ºäº†è§£å†³å“ˆå¸Œå†²çªè€Œå­˜åœ¨çš„ï¼›\n- **å®ç°çº¿ç¨‹å®‰å…¨çš„æ–¹å¼ï¼ˆé‡è¦ï¼‰**ï¼š \n\tâ‘  **åœ¨JDK1.7çš„æ—¶å€™ï¼ŒConcurrentHashMapä½¿ç”¨åˆ†æ®µé”** å¯¹æ•´ä¸ªæ¡¶æ•°ç»„è¿›è¡Œäº†åˆ†å‰²åˆ†æ®µ(Segmenté”ç»§æ‰¿ReentrantLock)ï¼Œæ¯ä¸€æŠŠé”åªé”å®¹å™¨å…¶ä¸­ä¸€éƒ¨åˆ†æ•°æ®ï¼Œå¤šçº¿ç¨‹è®¿é—®å®¹å™¨é‡Œä¸åŒæ•°æ®æ®µçš„æ•°æ®ï¼Œå°±ä¸ä¼šå­˜åœ¨é”ç«äº‰ï¼Œæé«˜å¹¶å‘è®¿é—®ç‡ã€‚ï¼ˆé»˜è®¤åˆ†é…16ä¸ªSegmentï¼Œæ¯”HashTableæ•ˆç‡æé«˜16å€ã€‚ï¼‰\n\t**åˆ°äº† JDK1.8 çš„æ—¶å€™å·²ç»æ‘’å¼ƒäº†Segmentçš„æ¦‚å¿µï¼Œè€Œæ˜¯ç›´æ¥ç”¨ Node æ•°ç»„+é“¾è¡¨+çº¢é»‘æ ‘çš„æ•°æ®ç»“æ„æ¥å®ç°ï¼Œå¹¶å‘æ§åˆ¶ä½¿ç”¨ synchronized å’Œ CAS æ¥æ“ä½œï¼Œsynchronizedåªé”å®šå½“å‰é“¾è¡¨æˆ–çº¢é»‘æ ‘çš„é¦–èŠ‚ç‚¹ã€‚ï¼ˆJDK1.6ä»¥å å¯¹ synchronizedé”åšäº†å¾ˆå¤šä¼˜åŒ–ï¼‰** æ•´ä¸ªçœ‹èµ·æ¥å°±åƒæ˜¯ä¼˜åŒ–è¿‡ä¸”çº¿ç¨‹å®‰å…¨çš„ HashMap\n\tâ‘¡ **HashTable(å…¨è¡¨é”)** :ä½¿ç”¨ synchronized æ¥ä¿è¯çº¿ç¨‹å®‰å…¨ï¼Œæ•ˆç‡éå¸¸ä½ä¸‹ã€‚å½“ä¸€ä¸ªçº¿ç¨‹è®¿é—®åŒæ­¥æ–¹æ³•æ—¶ï¼Œå…¶ä»–çº¿ç¨‹ä¹Ÿè®¿é—®åŒæ­¥æ–¹æ³•ï¼Œå¯èƒ½ä¼šè¿›å…¥é˜»å¡æˆ–è½®è¯¢çŠ¶æ€ï¼Œå¦‚ä½¿ç”¨ put æ·»åŠ å…ƒç´ ï¼Œå¦ä¸€ä¸ªçº¿ç¨‹ä¸èƒ½ä½¿ç”¨ put æ·»åŠ å…ƒç´ ï¼Œä¹Ÿä¸èƒ½ä½¿ç”¨ getï¼Œç«äº‰ä¼šè¶Šæ¥è¶Šæ¿€çƒˆæ•ˆç‡è¶Šä½ã€‚\n- â­**Jdk1.7é‡‡ç”¨åˆ†æ®µé”ï¼Œé”ç²’åº¦è¾ƒå¤§ï¼Œå®¹æ˜“å‘ç”Ÿå†²çªï¼Œå¹¶å‘é‡ä½ï¼›å› æ­¤ Jdk1.8 é‡‡ç”¨åªé”å®šæ¡¶çš„é¦–ç»“ç‚¹ï¼Œé”çš„åŠ›åº¦è¾ƒä½ï¼Œä¸å®¹æ˜“å‘ç”Ÿå†²çªï¼Œå¹¶å‘é‡é«˜ã€‚**\n\n**ä¸¤è€…çš„å¯¹æ¯”å›¾**ï¼š\n\nHashTable:\n\n![HashTableå…¨è¡¨é”](https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/TyporaNotesaHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAxOC84LzIzLzE2NTY2NzdhNmYyNTYxOTY.png)\n\nJDK1.7çš„ConcurrentHashMapï¼š\n\n![JDK1.7çš„ConcurrentHashMapåˆ†æ®µé”](https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/TyporaNotesaHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAxOC84LzIzLzE2NTY2NzdhNmYwMDhiZTQ.png)\n\nJDK1.8çš„ConcurrentHashMapï¼ˆTreeBin: çº¢é»‘äºŒå‰æ ‘èŠ‚ç‚¹ Node: é“¾è¡¨èŠ‚ç‚¹ï¼‰ï¼š\n\n![JDK1.8çš„ConcurrentHashMapåˆ†æ®µé”](https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/TyporaNotesaHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAxOC84LzIzLzE2NTY2NzdhNmYxNGUwMzk.png)\n","slug":"Javaå…«è‚¡æ–‡ - Javaé›†åˆ","published":1,"updated":"2023-01-23T08:46:48.897Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cld8kfsix000hzvt8ghzo4q37","content":"<blockquote>\n<p>æ•´ç†çš„Javaé›†åˆç›¸å…³çŸ¥è¯†ç‚¹å’Œé¢è¯•é¢˜ï¼Œéƒ¨åˆ†å†…å®¹æ‘˜è‡ªç½‘ç»œï¼Œå¦‚æœ‰ä¾µæƒè¯·è”ç³»æˆ‘ï½\t<span id=\"more\"></span></p>\n</blockquote>\n<h2 id=\"é›†åˆå®¹å™¨æ¦‚è¿°\"><a href=\"#é›†åˆå®¹å™¨æ¦‚è¿°\" class=\"headerlink\" title=\"é›†åˆå®¹å™¨æ¦‚è¿°\"></a>é›†åˆå®¹å™¨æ¦‚è¿°</h2><h3 id=\"ä»€ä¹ˆæ˜¯é›†åˆ\"><a href=\"#ä»€ä¹ˆæ˜¯é›†åˆ\" class=\"headerlink\" title=\"ä»€ä¹ˆæ˜¯é›†åˆ\"></a>ä»€ä¹ˆæ˜¯é›†åˆ</h3><p>ç”¨äºå­˜å‚¨æ•°æ®çš„å®¹å™¨ã€‚</p>\n<h3 id=\"é›†åˆå’Œæ•°ç»„çš„åŒºåˆ«\"><a href=\"#é›†åˆå’Œæ•°ç»„çš„åŒºåˆ«\" class=\"headerlink\" title=\"é›†åˆå’Œæ•°ç»„çš„åŒºåˆ«\"></a>é›†åˆå’Œæ•°ç»„çš„åŒºåˆ«</h3><ul>\n<li>æ•°ç»„æ˜¯å›ºå®šé•¿åº¦çš„ï¼›é›†åˆå¯å˜é•¿åº¦çš„ã€‚</li>\n<li>æ•°ç»„å¯ä»¥å­˜å‚¨åŸºæœ¬æ•°æ®ç±»å‹ï¼Œä¹Ÿå¯ä»¥å­˜å‚¨å¼•ç”¨æ•°æ®ç±»å‹ï¼›é›†åˆåªèƒ½å­˜å‚¨å¼•ç”¨æ•°æ®ç±»å‹ã€‚</li>\n</ul>\n<h3 id=\"å¸¸ç”¨çš„é›†åˆç±»æœ‰å“ªäº›ï¼Ÿ\"><a href=\"#å¸¸ç”¨çš„é›†åˆç±»æœ‰å“ªäº›ï¼Ÿ\" class=\"headerlink\" title=\"å¸¸ç”¨çš„é›†åˆç±»æœ‰å“ªäº›ï¼Ÿ\"></a>å¸¸ç”¨çš„é›†åˆç±»æœ‰å“ªäº›ï¼Ÿ</h3><p>Collectionæ¥å£å’ŒMapæ¥å£æ˜¯æ‰€æœ‰é›†åˆæ¡†æ¶çš„çˆ¶æ¥å£ã€‚</p>\n<p>Collectionæ¥å£ï¼šå­æ¥å£åŒ…æ‹¬Setæ¥å£å’ŒListæ¥å£</p>\n<ol>\n<li>Setæ¥å£çš„å®ç°ç±»ä¸»è¦æœ‰ï¼šHashSetã€TreeSetã€LinkedHashSetç­‰ï¼›</li>\n<li>Listæ¥å£çš„å®ç°ç±»ä¸»è¦æœ‰ï¼šArrayListã€LinkedListã€Stackä»¥åŠVectorç­‰ã€‚</li>\n</ol>\n<p>Mapæ¥å£ï¼šå®ç°ç±»ä¸»è¦æœ‰HashMapã€TreeMapã€HashTableã€ConcurrentHashMapä»¥åŠPropertiesç­‰ã€‚</p>\n<h3 id=\"Listã€Setã€Mapä¸‰è€…çš„åŒºåˆ«ï¼Ÿ\"><a href=\"#Listã€Setã€Mapä¸‰è€…çš„åŒºåˆ«ï¼Ÿ\" class=\"headerlink\" title=\"Listã€Setã€Mapä¸‰è€…çš„åŒºåˆ«ï¼Ÿ\"></a>Listã€Setã€Mapä¸‰è€…çš„åŒºåˆ«ï¼Ÿ</h3><p><img src=\"https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/TyporaNotesaHR0cHM6Ly9pbWcyMDE4LmNuYmxvZ3MuY29tL290aGVyLzE0MDgxODMvMjAxOTExLzE0MDgxODMtMjAxOTExMTkxODQxNDk1NTktMTU3MTU5NTY2OC5qcGc.png\" alt=\"Collectionæ¶æ„\"></p>\n<p>Listå’ŒSetä¸¤å¤§æ¥å£æ˜¯Collectionçš„å­æ¥å£</p>\n<ul>\n<li><p>Listï¼šæœ‰åºå®¹å™¨ï¼Œå…ƒç´ å¯ä»¥é‡å¤ï¼Œå¯ä»¥æ’å…¥å¤šä¸ªnullå…ƒç´ ï¼Œå…ƒç´ éƒ½æœ‰ç´¢å¼•ï¼›<br>  å¸¸ç”¨å®ç°ç±»ï¼šArrayListã€LinkedList å’Œ Vectorã€‚</p>\n</li>\n<li><p>Setï¼šæ— åºå®¹å™¨ï¼Œä¸å¯ä»¥å­˜å‚¨é‡å¤å…ƒç´ ï¼Œåªå…è®¸å­˜å…¥ä¸€ä¸ªnullå…ƒç´ ï¼Œå¿…é¡»ä¿è¯å…ƒç´ å”¯ä¸€æ€§ï¼›</p>\n<p>  å¸¸ç”¨å®ç°ç±»ï¼šHashSetã€LinkedHashSet ä»¥åŠ TreeSetã€‚</p>\n</li>\n</ul>\n<ul>\n<li><p>Mapæ˜¯ä¸€ä¸ªé”®å€¼å¯¹é›†åˆï¼Œå­˜å‚¨é”®ã€å€¼å’Œä¹‹é—´çš„æ˜ å°„ã€‚ keyæ— åºï¼Œå”¯ä¸€ï¼›value ä¸è¦æ±‚æœ‰åºï¼Œå…è®¸é‡å¤ï¼›</p>\n<p>  å¸¸ç”¨å®ç°ç±»ï¼šHashMapã€TreeMapã€HashTableã€LinkedHashMapã€ConcurrentHashMapã€‚</p>\n</li>\n</ul>\n<h3 id=\"é›†åˆæ¡†æ¶åº•å±‚æ•°æ®ç»“æ„\"><a href=\"#é›†åˆæ¡†æ¶åº•å±‚æ•°æ®ç»“æ„\" class=\"headerlink\" title=\"é›†åˆæ¡†æ¶åº•å±‚æ•°æ®ç»“æ„\"></a>é›†åˆæ¡†æ¶åº•å±‚æ•°æ®ç»“æ„</h3><h4 id=\"Collection\"><a href=\"#Collection\" class=\"headerlink\" title=\"Collection\"></a>Collection</h4><ol>\n<li>List</li>\n</ol>\n<ul>\n<li>Arraylistï¼š Objectæ•°ç»„</li>\n<li>Vectorï¼š Objectæ•°ç»„</li>\n<li>LinkedListï¼š åŒå‘é“¾è¡¨</li>\n</ul>\n<ol start=\"2\">\n<li>Set</li>\n</ol>\n<ul>\n<li>HashSetï¼ˆæ— åºï¼Œå”¯ä¸€ï¼‰ï¼šåŸºäº HashMap å®ç°çš„ï¼Œåº•å±‚é‡‡ç”¨ HashMap æ¥ä¿å­˜å…ƒç´ </li>\n<li>LinkedHashSetï¼š LinkedHashSet ç»§æ‰¿äº HashSetï¼Œå¹¶ä¸”å…¶å†…éƒ¨æ˜¯é€šè¿‡ LinkedHashMap æ¥å®ç°çš„ã€‚</li>\n<li>TreeSetï¼ˆæœ‰åºï¼Œå”¯ä¸€ï¼‰ï¼š çº¢é»‘æ ‘(è‡ªå¹³è¡¡çš„æ’åºäºŒå‰æ ‘)</li>\n</ul>\n<h4 id=\"Map\"><a href=\"#Map\" class=\"headerlink\" title=\"Map\"></a>Map</h4><ul>\n<li>HashMapï¼š JDK1.8ä¹‹å‰HashMapç”±æ•°ç»„+é“¾è¡¨ç»„æˆçš„ï¼Œæ•°ç»„æ˜¯HashMapçš„ä¸»ä½“ï¼Œé“¾è¡¨åˆ™æ˜¯ä¸»è¦ä¸ºäº†è§£å†³å“ˆå¸Œå†²çªè€Œå­˜åœ¨çš„ï¼ˆâ€œæ‹‰é“¾æ³•â€è§£å†³å†²çªï¼‰ã€‚JDK1.8ä»¥ååœ¨è§£å†³å“ˆå¸Œå†²çªæ—¶æœ‰äº†è¾ƒå¤§çš„å˜åŒ–ï¼Œå½“é“¾è¡¨é•¿åº¦å¤§äºé˜ˆå€¼ï¼ˆé»˜è®¤ä¸º8ï¼‰ï¼Œä¸”æ•°ç»„é•¿åº¦å¤§äº 64ï¼Œå°†é“¾è¡¨è½¬åŒ–ä¸ºçº¢é»‘æ ‘ï¼Œä»¥å‡å°‘æœç´¢æ—¶é—´ï¼Œå¦åˆ™æ‰©å®¹æ•°ç»„ã€‚</li>\n<li>LinkedHashMapï¼šLinkedHashMap ç»§æ‰¿è‡ª HashMapï¼Œæ‰€ä»¥å®ƒçš„åº•å±‚ç”±æ•°ç»„å’Œé“¾è¡¨æˆ–çº¢é»‘æ ‘ç»„æˆã€‚å¦å¤–ï¼ŒLinkedHashMap åœ¨ä¸Šé¢ç»“æ„çš„åŸºç¡€ä¸Šï¼Œå¢åŠ äº†ä¸€æ¡åŒå‘é“¾è¡¨ï¼Œä½¿å¾—ä¸Šé¢çš„ç»“æ„å¯ä»¥ä¿æŒé”®å€¼å¯¹çš„æ’å…¥é¡ºåºã€‚åŒæ—¶é€šè¿‡å¯¹é“¾è¡¨è¿›è¡Œç›¸åº”çš„æ“ä½œï¼Œå®ç°äº†è®¿é—®é¡ºåºç›¸å…³é€»è¾‘ã€‚</li>\n<li>HashTableï¼š æ•°ç»„+é“¾è¡¨ç»„æˆçš„ï¼Œæ•°ç»„æ˜¯ HashMap çš„ä¸»ä½“ï¼Œé“¾è¡¨åˆ™æ˜¯ä¸»è¦ä¸ºäº†è§£å†³å“ˆå¸Œå†²çªè€Œå­˜åœ¨çš„</li>\n<li>TreeMapï¼š çº¢é»‘æ ‘ï¼ˆè‡ªå¹³è¡¡çš„æ’åºäºŒå‰æ ‘ï¼‰</li>\n</ul>\n<h3 id=\"å“ªäº›é›†åˆç±»æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Ÿ\"><a href=\"#å“ªäº›é›†åˆç±»æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Ÿ\" class=\"headerlink\" title=\"å“ªäº›é›†åˆç±»æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Ÿ\"></a>å“ªäº›é›†åˆç±»æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Ÿ</h3><p>vector å’Œ hashtableï¼Œé€šè¿‡åœ¨æ–¹æ³•ä¸ŠåŠ  synchronized å…³é”®å­—å®ç°çº¿ç¨‹å®‰å…¨</p>\n<h3 id=\"Javaé›†åˆçš„å¿«é€Ÿå¤±è´¥æœºåˆ¶-â€œfail-fastâ€ï¼Ÿ\"><a href=\"#Javaé›†åˆçš„å¿«é€Ÿå¤±è´¥æœºåˆ¶-â€œfail-fastâ€ï¼Ÿ\" class=\"headerlink\" title=\"Javaé›†åˆçš„å¿«é€Ÿå¤±è´¥æœºåˆ¶ â€œfail-fastâ€ï¼Ÿ\"></a>Javaé›†åˆçš„å¿«é€Ÿå¤±è´¥æœºåˆ¶ â€œfail-fastâ€ï¼Ÿ</h3><p>fail-fastæ˜¯Javaé›†åˆçš„ä¸€ç§<strong>é”™è¯¯æ£€æµ‹æœºåˆ¶</strong>ï¼Œå½“å¤šä¸ªçº¿ç¨‹å¯¹åŒä¸€ä¸ªé›†åˆçš„å†…å®¹è¿›è¡Œæ“ä½œæ—¶ï¼Œå°±å¯èƒ½ä¼šäº§ç”Ÿfail-fastäº‹ä»¶ã€‚</p>\n<p>ä¾‹å¦‚ï¼šå‡è®¾å­˜åœ¨ä¸¤ä¸ªçº¿ç¨‹ï¼ˆçº¿ç¨‹1ã€çº¿ç¨‹2ï¼‰ï¼Œçº¿ç¨‹1é€šè¿‡Iteratoråœ¨éå†é›†åˆAä¸­çš„å…ƒç´ ï¼Œåœ¨æŸä¸ªæ—¶å€™çº¿ç¨‹2ä¿®æ”¹äº†é›†åˆAçš„ç»“æ„ï¼ˆaddã€removeã€clearç­‰ç»“æ„ä¸Šçš„ä¿®æ”¹ï¼Œè€Œä¸æ˜¯ç®€å•çš„ä¿®æ”¹é›†åˆå…ƒç´ çš„å†…å®¹ï¼‰ï¼Œé‚£ä¹ˆè¿™ä¸ªæ—¶å€™ç¨‹åºå°±ä¼šæŠ›å‡º <strong>ConcurrentModificationException</strong> å¼‚å¸¸ï¼Œä»è€Œäº§ç”Ÿfail-fastäº‹ä»¶ã€‚</p>\n<p>åŸå› ï¼šè¿­ä»£å™¨åœ¨éå†æ—¶ç›´æ¥è®¿é—®é›†åˆä¸­çš„å†…å®¹ï¼Œå¹¶ä¸”åœ¨éå†è¿‡ç¨‹ä¸­ä½¿ç”¨ä¸€ä¸ª modCount å˜é‡ã€‚æ¯å½“è¿­ä»£å™¨ä½¿ç”¨hashNext()&#x2F;next()éå†ä¸‹ä¸€ä¸ªå…ƒç´ ä¹‹å‰ï¼Œéƒ½ä¼šæ£€æµ‹modCountå˜é‡æ˜¯å¦ä¸ºexpectedmodCountå€¼ï¼Œæ˜¯çš„è¯å°±è¿”å›éå†ï¼›å¦åˆ™æŠ›å‡ºå¼‚å¸¸ï¼Œç»ˆæ­¢éå†ã€‚é›†åˆåœ¨è¢«éå†æœŸé—´å¦‚æœå†…å®¹å‘ç”Ÿå˜åŒ–ï¼Œå°±ä¼šæ”¹å˜modCountçš„å€¼ï¼Œä»è€ŒmodCountä¸ç­‰äºexpectedmodCountå€¼æŠ›å‡ºå¼‚å¸¸ï¼Œä¹Ÿå°±æ˜¯äº§ç”Ÿäº†fail-fastäº‹ä»¶ã€‚</p>\n<p>è§£å†³åŠæ³•ï¼š</p>\n<ol>\n<li>åœ¨éå†è¿‡ç¨‹ä¸­ï¼Œæ‰€æœ‰æ¶‰åŠåˆ°æ”¹å˜modCountå€¼çš„åœ°æ–¹å…¨éƒ¨åŠ ä¸Šsynchronizedï¼›</li>\n<li>ä½¿ç”¨Java.util.concurrentä¸‹çš„CopyOnWriteArrayListæ¥æ›¿æ¢ArrayListï¼›</li>\n<li>ä½¿ç”¨Java.util.concurrentä¸‹çš„ConcurrentHashMapæ¥æ›¿æ¢HashMapã€‚</li>\n</ol>\n<h3 id=\"æ€ä¹ˆç¡®ä¿ä¸€ä¸ªé›†åˆä¸èƒ½è¢«ä¿®æ”¹ï¼Ÿ\"><a href=\"#æ€ä¹ˆç¡®ä¿ä¸€ä¸ªé›†åˆä¸èƒ½è¢«ä¿®æ”¹ï¼Ÿ\" class=\"headerlink\" title=\"æ€ä¹ˆç¡®ä¿ä¸€ä¸ªé›†åˆä¸èƒ½è¢«ä¿®æ”¹ï¼Ÿ\"></a>æ€ä¹ˆç¡®ä¿ä¸€ä¸ªé›†åˆä¸èƒ½è¢«ä¿®æ”¹ï¼Ÿ</h3><p>å¯ä»¥ä½¿ç”¨ Collections. unmodifiableCollection(Collection c) æ–¹æ³•æ¥åˆ›å»ºä¸€ä¸ªåªè¯»é›†åˆï¼Œè¿™æ ·æ”¹å˜é›†åˆçš„ä»»ä½•æ“ä½œéƒ½ä¼šæŠ›å‡º Java. lang. UnsupportedOperationException å¼‚å¸¸ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">List&lt;String&gt; list = <span class=\"keyword\">new</span> <span class=\"title class_\">ArrayList</span>&lt;&gt;();</span><br><span class=\"line\">list. add(<span class=\"string\">&quot;x&quot;</span>);</span><br><span class=\"line\">Collection&lt;String&gt; clist = Collections. unmodifiableCollection(list);</span><br><span class=\"line\">clist.add(<span class=\"string\">&quot;y&quot;</span>); <span class=\"comment\">// è¿è¡Œæ—¶æ­¤è¡ŒæŠ¥é”™</span></span><br><span class=\"line\">System.out.println(list. size());</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Collectionæ¥å£\"><a href=\"#Collectionæ¥å£\" class=\"headerlink\" title=\"Collectionæ¥å£\"></a>Collectionæ¥å£</h2><h3 id=\"Listæ¥å£\"><a href=\"#Listæ¥å£\" class=\"headerlink\" title=\"Listæ¥å£\"></a>Listæ¥å£</h3><h4 id=\"è¿­ä»£å™¨-Iterator-æ˜¯ä»€ä¹ˆï¼Ÿ\"><a href=\"#è¿­ä»£å™¨-Iterator-æ˜¯ä»€ä¹ˆï¼Ÿ\" class=\"headerlink\" title=\"è¿­ä»£å™¨ Iterator æ˜¯ä»€ä¹ˆï¼Ÿ\"></a>è¿­ä»£å™¨ Iterator æ˜¯ä»€ä¹ˆï¼Ÿ</h4><p>Collectionæ¥å£å®ç°äº†Iterableæ¥å£ï¼Œé€šè¿‡å®ç°Iterableæ¥å£ä¸­çš„iterator()æ–¹æ³•è¿”å›Iteratoræ¥å£çš„å®ä¾‹ï¼Œé€šè¿‡iteratorå¯¹é›†åˆçš„å…ƒç´ è¿›è¡Œè¿­ä»£æ“ä½œã€‚</p>\n<h4 id=\"Iterator-æ€ä¹ˆä½¿ç”¨ï¼Ÿæœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼Ÿ\"><a href=\"#Iterator-æ€ä¹ˆä½¿ç”¨ï¼Ÿæœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼Ÿ\" class=\"headerlink\" title=\"Iterator æ€ä¹ˆä½¿ç”¨ï¼Ÿæœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼Ÿ\"></a>Iterator æ€ä¹ˆä½¿ç”¨ï¼Ÿæœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼Ÿ</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">List&lt;String&gt; list = <span class=\"keyword\">new</span> <span class=\"title class_\">ArrayList</span>&lt;&gt;();</span><br><span class=\"line\">Iterator&lt;String&gt; it = list.iterator();</span><br><span class=\"line\"><span class=\"keyword\">while</span>(it.hasNext())&#123;</span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">obj</span> <span class=\"operator\">=</span> it.next();</span><br><span class=\"line\">    System.out.println(obj);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>Iterator çš„ç‰¹ç‚¹æ˜¯åªèƒ½å•å‘éå†ï¼Œä½†æ˜¯æ›´åŠ å®‰å…¨ï¼Œå› ä¸ºå®ƒå¯ä»¥ç¡®ä¿ï¼Œåœ¨å½“å‰éå†çš„é›†åˆå…ƒç´ è¢«æ›´æ”¹çš„æ—¶å€™ï¼Œå°±ä¼šæŠ›å‡º ConcurrentModificationException å¼‚å¸¸ã€‚</p>\n<h4 id=\"å¦‚ä½•è¾¹éå†è¾¹ç§»é™¤-Collection-ä¸­çš„å…ƒç´ ï¼Ÿ\"><a href=\"#å¦‚ä½•è¾¹éå†è¾¹ç§»é™¤-Collection-ä¸­çš„å…ƒç´ ï¼Ÿ\" class=\"headerlink\" title=\"å¦‚ä½•è¾¹éå†è¾¹ç§»é™¤ Collection ä¸­çš„å…ƒç´ ï¼Ÿ\"></a>å¦‚ä½•è¾¹éå†è¾¹ç§»é™¤ Collection ä¸­çš„å…ƒç´ ï¼Ÿ</h4><p>è¾¹éå†è¾¹ä¿®æ”¹ Collection çš„å”¯ä¸€æ­£ç¡®æ–¹å¼æ˜¯ä½¿ç”¨ Iterator.remove() æ–¹æ³•ï¼Œå¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Iterator&lt;Integer&gt; it = list.iterator();</span><br><span class=\"line\"><span class=\"keyword\">while</span>(it.hasNext())&#123;</span><br><span class=\"line\">   <span class=\"comment\">// do something</span></span><br><span class=\"line\">   it.remove();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ä¸€ç§æœ€å¸¸è§çš„<strong>é”™è¯¯</strong>ä»£ç å¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">List&lt;String&gt; list = <span class=\"keyword\">new</span> <span class=\"title class_\">ArrayList</span>&lt;&gt;();</span><br><span class=\"line\">list.add(<span class=\"string\">&quot;1&quot;</span>);</span><br><span class=\"line\">list.add(<span class=\"string\">&quot;2&quot;</span>);</span><br><span class=\"line\">list.add(<span class=\"string\">&quot;3&quot;</span>);</span><br><span class=\"line\">list.add(<span class=\"string\">&quot;4&quot;</span>);</span><br><span class=\"line\">list.add(<span class=\"string\">&quot;5&quot;</span>);</span><br><span class=\"line\"><span class=\"type\">int</span> <span class=\"variable\">cnt</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>;</span><br><span class=\"line\"><span class=\"keyword\">for</span> (String item : list) &#123;</span><br><span class=\"line\">  System.out.println(++cnt);</span><br><span class=\"line\">  list.remove(item);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">System.out.println(Arrays.toString(list.toArray()));</span><br></pre></td></tr></table></figure>\n\n<p>è¿è¡Œä»¥ä¸Šé”™è¯¯ä»£ç ä¼šæŠ¥ <strong>ConcurrentModificationException å¼‚å¸¸</strong>ã€‚<br>è¿™æ˜¯å› ä¸ºå½“ä½¿ç”¨ foreach(for(Integer i : list)) è¯­å¥æ—¶ï¼Œä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªiterator æ¥éå†è¯¥ listï¼Œä½†åŒæ—¶è¯¥ list æ­£åœ¨è¢« Iterator.remove() ä¿®æ”¹ã€‚é›†åˆå‘ç”Ÿç»“æ„æ€§å˜åŒ–ï¼Œæ ¹æ®fail-fastæœºåˆ¶ï¼Œä¼šæŠ›å¼‚å¸¸ã€‚</p>\n<h4 id=\"éå†ä¸€ä¸ª-List-æœ‰å“ªäº›ä¸åŒçš„æ–¹å¼ï¼Ÿ\"><a href=\"#éå†ä¸€ä¸ª-List-æœ‰å“ªäº›ä¸åŒçš„æ–¹å¼ï¼Ÿ\" class=\"headerlink\" title=\"éå†ä¸€ä¸ª List æœ‰å“ªäº›ä¸åŒçš„æ–¹å¼ï¼Ÿ\"></a>éå†ä¸€ä¸ª List æœ‰å“ªäº›ä¸åŒçš„æ–¹å¼ï¼Ÿ</h4><ol>\n<li>for å¾ªç¯ï¼Œç»´æŠ¤ä¸€ä¸ªè®¡æ•°å™¨ï¼›</li>\n<li>è¿­ä»£å™¨ï¼ŒIteratorã€‚Collectionæ¥å£å®ç°äº†Iterableæ¥å£ï¼Œé€šè¿‡å®ç°Iterableæ¥å£ä¸­çš„iterator()æ–¹æ³•è¿”å›Iteratoræ¥å£çš„å®ä¾‹ï¼Œé€šè¿‡iteratorå¯¹é›†åˆçš„å…ƒç´ è¿›è¡Œè¿­ä»£æ“ä½œï¼›</li>\n<li>å¢å¼ºforå¾ªç¯ã€‚å¢å¼ºforå¾ªç¯foreach å†…éƒ¨ä¹Ÿæ˜¯é‡‡ç”¨äº† Iterator çš„æ–¹å¼å®ç°ï¼Œä½¿ç”¨æ—¶ä¸éœ€è¦æ˜¾å¼å£°æ˜ Iterator æˆ–è®¡æ•°å™¨ã€‚<br> ä¼˜ç‚¹æ˜¯ä»£ç ç®€æ´ï¼Œä¸æ˜“å‡ºé”™ï¼›ç¼ºç‚¹æ˜¯åªèƒ½åšç®€å•çš„éå†ï¼Œä¸èƒ½åœ¨éå†è¿‡ç¨‹ä¸­æ“ä½œæ•°æ®é›†åˆï¼Œä¾‹å¦‚åˆ é™¤ã€æ›¿æ¢ã€‚</li>\n</ol>\n<h4 id=\"è¯´ä¸€ä¸‹-ArrayList-çš„ä¼˜ç¼ºç‚¹\"><a href=\"#è¯´ä¸€ä¸‹-ArrayList-çš„ä¼˜ç¼ºç‚¹\" class=\"headerlink\" title=\"è¯´ä¸€ä¸‹ ArrayList çš„ä¼˜ç¼ºç‚¹\"></a>è¯´ä¸€ä¸‹ ArrayList çš„ä¼˜ç¼ºç‚¹</h4><p><strong>ArrayList æ¯”è¾ƒé€‚åˆé¡ºåºæ·»åŠ ã€éšæœºè®¿é—®çš„åœºæ™¯ã€‚</strong></p>\n<p>ArrayListçš„ä¼˜ç‚¹å¦‚ä¸‹ï¼š</p>\n<ul>\n<li>ArrayList åº•å±‚ä»¥æ•°ç»„å®ç°ï¼Œæ˜¯ä¸€ç§éšæœºè®¿é—®æ¨¡å¼ã€‚ArrayList å®ç°äº† RandomAccess æ¥å£ï¼Œæ ‡è®° List å®ç°æ˜¯å¦æ”¯æŒ Random Accessï¼Œå¯¼è‡´å®ƒå¯ä»¥éšæœºè®¿é—®çš„æ ¹æœ¬åŸå› æ˜¯å®ƒåº•å±‚æ˜¯æ•°ç»„ç»“æ„ï¼Œæ•°ç»„å¯ä»¥é€šè¿‡ä¸‹æ ‡è·å–ç›¸åº”çš„å€¼ï¼Œè€Œ RandomAccess åªæ˜¯ä¸€ä¸ªæ ‡è®°ã€‚å› æ­¤æŸ¥æ‰¾çš„æ—¶å€™éå¸¸å¿«ã€‚å¯ä»¥ç”¨ for å¾ªç¯é€šè¿‡ä¸‹æ ‡è·å–å…ƒç´ ã€‚</li>\n<li>ArrayList åœ¨é¡ºåºæ·»åŠ ä¸€ä¸ªå…ƒç´ çš„æ—¶å€™éå¸¸æ–¹ä¾¿ã€‚</li>\n</ul>\n<p>ArrayList çš„ç¼ºç‚¹å¦‚ä¸‹ï¼š</p>\n<ul>\n<li>å‘<strong>ä¸­é—´æŸä¸ªä½ç½®åˆ é™¤</strong>å…ƒç´ çš„æ—¶å€™ï¼Œéœ€è¦åšå…ƒç´ å¤åˆ¶æ“ä½œã€‚å¦‚æœè¦å¤åˆ¶çš„å…ƒç´ å¾ˆå¤šï¼Œé‚£ä¹ˆå°±ä¼šæ¯”è¾ƒè€—è´¹æ€§èƒ½ï¼›</li>\n<li>å‘<strong>ä¸­é—´æŸä¸ªä½ç½®æ’å…¥</strong>å…ƒç´ çš„æ—¶å€™ï¼Œä¹Ÿéœ€è¦åšå…ƒç´ å¤åˆ¶æ“ä½œï¼Œç¼ºç‚¹åŒä¸Šã€‚</li>\n</ul>\n<h4 id=\"å¦‚ä½•å®ç°æ•°ç»„å’Œ-List-ä¹‹é—´çš„è½¬æ¢ï¼Ÿ\"><a href=\"#å¦‚ä½•å®ç°æ•°ç»„å’Œ-List-ä¹‹é—´çš„è½¬æ¢ï¼Ÿ\" class=\"headerlink\" title=\"å¦‚ä½•å®ç°æ•°ç»„å’Œ List ä¹‹é—´çš„è½¬æ¢ï¼Ÿ\"></a>å¦‚ä½•å®ç°æ•°ç»„å’Œ List ä¹‹é—´çš„è½¬æ¢ï¼Ÿ</h4><ul>\n<li>æ•°ç»„è½¬ Listï¼šä½¿ç”¨ Arrays. asList(array) è¿›è¡Œè½¬æ¢ã€‚</li>\n<li>List è½¬æ•°ç»„ï¼šä½¿ç”¨ List è‡ªå¸¦çš„ toArray() æ–¹æ³•ã€‚</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// list to array</span></span><br><span class=\"line\">List&lt;String&gt; list = <span class=\"keyword\">new</span> <span class=\"title class_\">ArrayList</span>&lt;String&gt;();</span><br><span class=\"line\">list.add(<span class=\"string\">&quot;123&quot;</span>);</span><br><span class=\"line\">list.add(<span class=\"string\">&quot;456&quot;</span>);</span><br><span class=\"line\">list.toArray(<span class=\"keyword\">new</span> <span class=\"title class_\">String</span>[<span class=\"number\">0</span>]);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// array to list</span></span><br><span class=\"line\">String[] array = <span class=\"keyword\">new</span> <span class=\"title class_\">String</span>[]&#123;<span class=\"string\">&quot;123&quot;</span>, <span class=\"string\">&quot;456&quot;</span>&#125;;</span><br><span class=\"line\">Arrays.asList(array);</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"ArrayList-å’Œ-LinkedList-çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ\"><a href=\"#ArrayList-å’Œ-LinkedList-çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ\" class=\"headerlink\" title=\"ArrayList å’Œ LinkedList çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ\"></a>ArrayList å’Œ LinkedList çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</h4><ul>\n<li>åº•å±‚å®ç°ï¼šArrayList æ˜¯åŠ¨æ€æ•°ç»„çš„æ•°æ®ç»“æ„å®ç°ï¼Œè€Œ LinkedList æ˜¯åŒå‘é“¾è¡¨çš„æ•°æ®ç»“æ„å®ç°ï¼›</li>\n<li>è®¿é—®å’Œå¢åˆ å…ƒç´ æ•ˆç‡ï¼šArrayList éšæœºè®¿é—®å’Œé¡ºåºæ’å…¥&#x2F;åˆ é™¤å…ƒç´ æ•ˆç‡æ›´é«˜ï¼›</li>\n<li>å†…å­˜å ç”¨ï¼šLinkedList æ¯” ArrayList æ›´å å†…å­˜ï¼Œå› ä¸º LinkedList çš„èŠ‚ç‚¹é™¤äº†å­˜å‚¨æ•°æ®ï¼Œè¿˜å­˜å‚¨äº†ä¸¤ä¸ªå¼•ç”¨ï¼Œä¸€ä¸ªæŒ‡å‘å‰ä¸€ä¸ªå…ƒç´ ï¼Œä¸€ä¸ªæŒ‡å‘åä¸€ä¸ªå…ƒç´ ï¼›</li>\n<li>çº¿ç¨‹å®‰å…¨ï¼šArrayList å’Œ LinkedList éƒ½æ˜¯ä¸åŒæ­¥çš„ï¼Œä¹Ÿå°±æ˜¯ä¸ä¿è¯çº¿ç¨‹å®‰å…¨ã€‚</li>\n</ul>\n<p>ç»¼åˆæ¥è¯´ï¼Œåœ¨éœ€è¦<strong>é¢‘ç¹è¯»å–</strong>é›†åˆä¸­çš„å…ƒç´ æ—¶ï¼Œæ›´æ¨èä½¿ç”¨ ArrayListï¼Œè€Œåœ¨<strong>æ’å…¥å’Œåˆ é™¤æ“ä½œè¾ƒå¤š</strong>æ—¶ï¼Œæ›´æ¨èä½¿ç”¨ LinkedListã€‚</p>\n<h4 id=\"ArrayList-å’Œ-Vector-çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ\"><a href=\"#ArrayList-å’Œ-Vector-çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ\" class=\"headerlink\" title=\"ArrayList å’Œ Vector çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ\"></a>ArrayList å’Œ Vector çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</h4><p>ä¸»è¦åŒºåˆ«æ˜¯çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼š<br>Vector ä½¿ç”¨äº† synchronized æ¥å®ç°çº¿ç¨‹åŒæ­¥ï¼ˆæ€§èƒ½å·®ï¼‰ï¼Œæ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œè€Œ ArrayList æ˜¯éçº¿ç¨‹å®‰å…¨çš„ã€‚</p>\n<h4 id=\"å¤šçº¿ç¨‹åœºæ™¯ä¸‹å¦‚ä½•ä½¿ç”¨-ArrayListï¼Ÿ\"><a href=\"#å¤šçº¿ç¨‹åœºæ™¯ä¸‹å¦‚ä½•ä½¿ç”¨-ArrayListï¼Ÿ\" class=\"headerlink\" title=\"å¤šçº¿ç¨‹åœºæ™¯ä¸‹å¦‚ä½•ä½¿ç”¨ ArrayListï¼Ÿ\"></a>å¤šçº¿ç¨‹åœºæ™¯ä¸‹å¦‚ä½•ä½¿ç”¨ ArrayListï¼Ÿ</h4><p>å¯ä»¥ç”¨ Java.util.concurrent.CopyOnWriteArrayList æ›¿æ¢ ArrayListã€‚</p>\n<h4 id=\"ä¸ºä»€ä¹ˆ-ArrayList-çš„-elementData-åŠ ä¸Š-transient-ä¿®é¥°ï¼Ÿ\"><a href=\"#ä¸ºä»€ä¹ˆ-ArrayList-çš„-elementData-åŠ ä¸Š-transient-ä¿®é¥°ï¼Ÿ\" class=\"headerlink\" title=\"ä¸ºä»€ä¹ˆ ArrayList çš„ elementData åŠ ä¸Š transient ä¿®é¥°ï¼Ÿ\"></a>ä¸ºä»€ä¹ˆ ArrayList çš„ elementData åŠ ä¸Š transient ä¿®é¥°ï¼Ÿ</h4><p>ArrayList å®ç°äº† Serializable æ¥å£ï¼Œè¿™æ„å‘³ç€ ArrayList æ”¯æŒåºåˆ—åŒ–ã€‚<br>å¯¹äº elementDataï¼Œç”±äº elementData å¯èƒ½æœ‰å¤šä½™çš„å®¹é‡ï¼ˆå®¹é‡ä¸è¶³ä¼šæ‰©å®¹æˆ1.5å€å¤§å°ï¼Œæ‰©å®¹ä¹‹åé™¤äº†æ–°åŠ <br>çš„å…ƒç´ ä»¥å¤–è¿˜æœ‰å¤šçš„ç©ºé—´æ²¡æœ‰æ”¾å…ƒç´ ï¼Œæ¯”å¦‚ç°åœ¨å®¹é‡æ˜¯15ï¼Œè€Œé›†åˆé‡Œé¢åªå­˜äº†11ä¸ªå…ƒç´ ï¼‰ï¼Œä¸å¯¹ elementData åŠ ä¸Š transient ä¿®é¥°ï¼Œè€Œæ˜¯æ‰‹åŠ¨è¿›è¡Œåºåˆ—åŒ–ï¼Œå¯ä»¥ä¿è¯åªåºåˆ—åŒ–å®é™…å­˜å‚¨çš„é‚£äº›å…ƒç´ ï¼ˆ11ä¸ªå…ƒç´ ï¼‰ï¼Œè€Œä¸æ˜¯æ•´ä¸ªæ•°ç»„ï¼Œä»è€ŒèŠ‚çœç©ºé—´å’Œæ—¶é—´ã€‚</p>\n<h3 id=\"â­ArrayListæ‰©å®¹æœºåˆ¶\"><a href=\"#â­ArrayListæ‰©å®¹æœºåˆ¶\" class=\"headerlink\" title=\"â­ArrayListæ‰©å®¹æœºåˆ¶\"></a>â­ArrayListæ‰©å®¹æœºåˆ¶</h3><blockquote>\n<p><strong>æ€»ç»“ï¼š</strong></p>\n<ul>\n<li><p>åˆå§‹åŒ–å¦‚æœä½¿ç”¨æ— å‚æ„é€ å™¨çš„è¯ï¼š</p>\n<p>  åœ¨ç¬¬ä¸€æ¬¡æ·»åŠ å…ƒç´ çš„æ—¶å€™ï¼Œå°†æ•°ç»„å®¹é‡è®¾ç½®ä¸º10ï¼Œç„¶åè¿›è¡Œæ·»åŠ ã€‚</p>\n<p>  ä¸€ç›´æ·»åŠ ï¼Œç›´åˆ°è¦æ·»åŠ çš„å…ƒç´ è¶…å‡ºå½“å‰æ•°ç»„å®¹é‡äº†ï¼Œè¿›å…¥æ‰©å®¹ï¼Œå°†æ•°ç»„é•¿åº¦æ‰©å®¹ä¸º1.5å€é•¿åº¦ï¼Œç„¶åè¿›è¡Œæ·»åŠ ã€‚</p>\n</li>\n<li><p>åˆå§‹åŒ–å¦‚æœä½¿ç”¨æœ‰å‚æ„é€ å™¨çš„è¯ï¼š</p>\n<p>  é‚£ä¹ˆæ¯æ¬¡æ·»åŠ å…ƒç´ åªéœ€è¦åˆ¤æ–­æ˜¯å¦éœ€è¦æ‰©å®¹å³å¯ï¼Œä¸éœ€è¦ç¬¬ä¸€æ¬¡çš„åˆå§‹åŒ–ä¸º10çš„åˆ¤æ–­ã€‚</p>\n</li>\n</ul>\n</blockquote>\n<h4 id=\"1-å…ˆä»-ArrayList-çš„æ„é€ å‡½æ•°è¯´èµ·\"><a href=\"#1-å…ˆä»-ArrayList-çš„æ„é€ å‡½æ•°è¯´èµ·\" class=\"headerlink\" title=\"1. å…ˆä» ArrayList çš„æ„é€ å‡½æ•°è¯´èµ·\"></a>1. å…ˆä» ArrayList çš„æ„é€ å‡½æ•°è¯´èµ·</h4><p><strong>ï¼ˆJDK8ï¼‰ArrayList æœ‰ä¸‰ç§æ–¹å¼æ¥åˆå§‹åŒ–ï¼Œæ„é€ æ–¹æ³•æºç å¦‚ä¸‹ï¼š</strong></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * é»˜è®¤åˆå§‹å®¹é‡å¤§å°</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\"> <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"type\">int</span> <span class=\"variable\">DEFAULT_CAPACITY</span> <span class=\"operator\">=</span> <span class=\"number\">10</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"> <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> Object[] DEFAULTCAPACITY_EMPTY_ELEMENTDATA = &#123;&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"> <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  *é»˜è®¤æ„é€ å‡½æ•°ï¼Œä½¿ç”¨åˆå§‹å®¹é‡10æ„é€ ä¸€ä¸ªç©ºåˆ—è¡¨(æ— å‚æ•°æ„é€ )</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\"> <span class=\"keyword\">public</span> <span class=\"title function_\">ArrayList</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">     <span class=\"built_in\">this</span>.elementData = DEFAULTCAPACITY_EMPTY_ELEMENTDATA;</span><br><span class=\"line\"> &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"> <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * å¸¦åˆå§‹å®¹é‡å‚æ•°çš„æ„é€ å‡½æ•°ã€‚ï¼ˆç”¨æˆ·è‡ªå·±æŒ‡å®šå®¹é‡ï¼‰</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\"> <span class=\"keyword\">public</span> <span class=\"title function_\">ArrayList</span><span class=\"params\">(<span class=\"type\">int</span> initialCapacity)</span> &#123;</span><br><span class=\"line\">     <span class=\"keyword\">if</span> (initialCapacity &gt; <span class=\"number\">0</span>) &#123;<span class=\"comment\">//åˆå§‹å®¹é‡å¤§äº0</span></span><br><span class=\"line\">         <span class=\"comment\">//åˆ›å»ºinitialCapacityå¤§å°çš„æ•°ç»„</span></span><br><span class=\"line\">         <span class=\"built_in\">this</span>.elementData = <span class=\"keyword\">new</span> <span class=\"title class_\">Object</span>[initialCapacity];</span><br><span class=\"line\">     &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (initialCapacity == <span class=\"number\">0</span>) &#123;<span class=\"comment\">//åˆå§‹å®¹é‡ç­‰äº0</span></span><br><span class=\"line\">         <span class=\"comment\">//åˆ›å»ºç©ºæ•°ç»„</span></span><br><span class=\"line\">         <span class=\"built_in\">this</span>.elementData = EMPTY_ELEMENTDATA;</span><br><span class=\"line\">     &#125; <span class=\"keyword\">else</span> &#123;<span class=\"comment\">//åˆå§‹å®¹é‡å°äº0ï¼ŒæŠ›å‡ºå¼‚å¸¸</span></span><br><span class=\"line\">         <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"title class_\">IllegalArgumentException</span>(<span class=\"string\">&quot;Illegal Capacity: &quot;</span>+</span><br><span class=\"line\">                                            initialCapacity);</span><br><span class=\"line\">     &#125;</span><br><span class=\"line\"> &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> *æ„é€ åŒ…å«æŒ‡å®šcollectionå…ƒç´ çš„åˆ—è¡¨ï¼Œè¿™äº›å…ƒç´ åˆ©ç”¨è¯¥é›†åˆçš„è¿­ä»£å™¨æŒ‰é¡ºåºè¿”å›</span></span><br><span class=\"line\"><span class=\"comment\"> *å¦‚æœæŒ‡å®šçš„é›†åˆä¸ºnullï¼Œthrows NullPointerExceptionã€‚</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"title function_\">ArrayList</span><span class=\"params\">(Collection&lt;? extends E&gt; c)</span> &#123;</span><br><span class=\"line\">     elementData = c.toArray();</span><br><span class=\"line\">     <span class=\"keyword\">if</span> ((size = elementData.length) != <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">         <span class=\"comment\">// c.toArray might (incorrectly) not return Object[] (see 6260652)</span></span><br><span class=\"line\">         <span class=\"keyword\">if</span> (elementData.getClass() != Object[].class)</span><br><span class=\"line\">             elementData = Arrays.copyOf(elementData, size, Object[].class);</span><br><span class=\"line\">     &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">         <span class=\"comment\">// replace with empty array.</span></span><br><span class=\"line\">         <span class=\"built_in\">this</span>.elementData = EMPTY_ELEMENTDATA;</span><br><span class=\"line\">     &#125;</span><br><span class=\"line\"> &#125;</span><br></pre></td></tr></table></figure>\n\n<p><strong>ä»¥æ— å‚æ•°æ„é€ æ–¹æ³•åˆ›å»º ArrayList æ—¶ï¼Œå®é™…ä¸Šåˆå§‹åŒ–èµ‹å€¼çš„æ˜¯ä¸€ä¸ªç©ºæ•°ç»„ã€‚å½“çœŸæ­£å¯¹æ•°ç»„è¿›è¡Œæ·»åŠ å…ƒç´ æ“ä½œæ—¶ï¼Œæ‰çœŸæ­£åˆ†é…å®¹é‡ã€‚å³å‘æ•°ç»„ä¸­æ·»åŠ ç¬¬ä¸€ä¸ªå…ƒç´ æ—¶ï¼Œæ•°ç»„å®¹é‡æ‰©ä¸º 10ã€‚</strong> </p>\n<blockquote>\n<p>è¡¥å……ï¼šJDK6 new æ— å‚æ„é€ çš„ <code>ArrayList</code> å¯¹è±¡æ—¶ï¼Œç›´æ¥åˆ›å»ºäº†é•¿åº¦æ˜¯ 10 çš„ <code>Object[]</code> æ•°ç»„ elementData ã€‚</p>\n</blockquote>\n<h4 id=\"2-ä¸€æ­¥ä¸€æ­¥åˆ†æ-ArrayList-æ‰©å®¹æœºåˆ¶\"><a href=\"#2-ä¸€æ­¥ä¸€æ­¥åˆ†æ-ArrayList-æ‰©å®¹æœºåˆ¶\" class=\"headerlink\" title=\"2. ä¸€æ­¥ä¸€æ­¥åˆ†æ ArrayList æ‰©å®¹æœºåˆ¶\"></a>2. ä¸€æ­¥ä¸€æ­¥åˆ†æ ArrayList æ‰©å®¹æœºåˆ¶</h4><p>è¿™é‡Œä»¥æ— å‚æ„é€ å‡½æ•°åˆ›å»ºçš„ ArrayList ä¸ºä¾‹åˆ†æ</p>\n<h5 id=\"2-1-add\"><a href=\"#2-1-add\" class=\"headerlink\" title=\"2.1.  add\"></a>2.1.  <code>add</code></h5><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * å°†æŒ‡å®šçš„å…ƒç´ è¿½åŠ åˆ°æ­¤åˆ—è¡¨çš„æœ«å°¾ã€‚</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\"> <span class=\"keyword\">public</span> <span class=\"type\">boolean</span> <span class=\"title function_\">add</span><span class=\"params\">(E e)</span> &#123;</span><br><span class=\"line\"><span class=\"comment\">// æ·»åŠ å…ƒç´ ä¹‹å‰ï¼Œå…ˆè°ƒç”¨ensureCapacityInternalæ–¹æ³•</span></span><br><span class=\"line\">     ensureCapacityInternal(size + <span class=\"number\">1</span>);  <span class=\"comment\">// Increments modCount!!</span></span><br><span class=\"line\">     <span class=\"comment\">// è¿™é‡Œçœ‹åˆ°ArrayListæ·»åŠ å…ƒç´ çš„å®è´¨å°±ç›¸å½“äºä¸ºæ•°ç»„èµ‹å€¼</span></span><br><span class=\"line\">     elementData[size++] = e;</span><br><span class=\"line\">     <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\"> &#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"2-2-ensureCapacityInternal\"><a href=\"#2-2-ensureCapacityInternal\" class=\"headerlink\" title=\"2.2. ensureCapacityInternal()\"></a>2.2. <code>ensureCapacityInternal()</code></h5><p>ï¼ˆJDK7ï¼‰å¯ä»¥çœ‹åˆ° <code>add</code> æ–¹æ³• é¦–å…ˆè°ƒç”¨äº†<code>ensureCapacityInternal(size + 1)</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//å¾—åˆ°æœ€å°æ‰©å®¹é‡</span></span><br><span class=\"line\"> <span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title function_\">ensureCapacityInternal</span><span class=\"params\">(<span class=\"type\">int</span> minCapacity)</span> &#123;</span><br><span class=\"line\">     <span class=\"keyword\">if</span> (elementData == DEFAULTCAPACITY_EMPTY_ELEMENTDATA) &#123;</span><br><span class=\"line\">         <span class=\"comment\">// è·å–é»˜è®¤çš„å®¹é‡å’Œä¼ å…¥å‚æ•°çš„è¾ƒå¤§å€¼</span></span><br><span class=\"line\">         minCapacity = Math.max(DEFAULT_CAPACITY, minCapacity);</span><br><span class=\"line\">     &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">     ensureExplicitCapacity(minCapacity);</span><br><span class=\"line\"> &#125;</span><br></pre></td></tr></table></figure>\n\n<p><strong>å½“ è¦ add è¿›ç¬¬ 1 ä¸ªå…ƒç´ æ—¶ï¼ŒminCapacity ä¸º 1ï¼Œåœ¨ Math.max()æ–¹æ³•æ¯”è¾ƒåï¼ŒminCapacity ä¸º 10ã€‚</strong></p>\n<blockquote>\n<p>æ­¤å¤„å’Œåç»­ JDK8 ä»£ç æ ¼å¼åŒ–ç•¥æœ‰ä¸åŒï¼Œæ ¸å¿ƒä»£ç åŸºæœ¬ä¸€æ ·ã€‚</p>\n</blockquote>\n<h5 id=\"2-3-ensureExplicitCapacity\"><a href=\"#2-3-ensureExplicitCapacity\" class=\"headerlink\" title=\"2.3. ensureExplicitCapacity()\"></a>2.3. <code>ensureExplicitCapacity()</code></h5><p>å¦‚æœè°ƒç”¨ <code>ensureCapacityInternal()</code> æ–¹æ³•å°±ä¸€å®šä¼šè¿›å…¥ï¼ˆæ‰§è¡Œï¼‰è¿™ä¸ªæ–¹æ³•</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//åˆ¤æ–­æ˜¯å¦éœ€è¦æ‰©å®¹</span></span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title function_\">ensureExplicitCapacity</span><span class=\"params\">(<span class=\"type\">int</span> minCapacity)</span> &#123;</span><br><span class=\"line\">      modCount++;</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"comment\">// overflow-conscious code</span></span><br><span class=\"line\">      <span class=\"keyword\">if</span> (minCapacity - elementData.length &gt; <span class=\"number\">0</span>)</span><br><span class=\"line\">          <span class=\"comment\">//è°ƒç”¨growæ–¹æ³•è¿›è¡Œæ‰©å®¹ï¼Œè°ƒç”¨æ­¤æ–¹æ³•ä»£è¡¨å·²ç»å¼€å§‹æ‰©å®¹äº†</span></span><br><span class=\"line\">          grow(minCapacity);</span><br><span class=\"line\">  &#125;</span><br></pre></td></tr></table></figure>\n\n<p>æˆ‘ä»¬æ¥ä»”ç»†åˆ†æä¸€ä¸‹ï¼š</p>\n<ul>\n<li>å½“æˆ‘ä»¬è¦ add è¿›ç¬¬ 1 ä¸ªå…ƒç´ åˆ° ArrayList æ—¶ï¼ŒelementData.length ä¸º 0 ï¼ˆå› ä¸ºè¿˜æ˜¯ä¸€ä¸ªç©ºçš„ listï¼‰ï¼Œå› ä¸ºæ‰§è¡Œäº† <code>ensureCapacityInternal()</code> æ–¹æ³• ï¼Œæ‰€ä»¥ minCapacity æ­¤æ—¶ä¸º 10ã€‚æ­¤æ—¶ï¼Œ<code>minCapacity - elementData.length &gt; 0</code>æˆç«‹ï¼Œæ‰€ä»¥ä¼šè¿›å…¥ <code>grow(minCapacity)</code> æ–¹æ³•ã€‚</li>\n<li>å½“ add ç¬¬ 2 ä¸ªå…ƒç´ æ—¶ï¼ŒminCapacity ä¸º 2ï¼Œæ­¤æ—¶ elementData.length(å®¹é‡)åœ¨æ·»åŠ ç¬¬ä¸€ä¸ªå…ƒç´ åæ‰©å®¹æˆ 10 äº†ã€‚æ­¤æ—¶ï¼Œ<code>minCapacity - elementData.length &gt; 0</code> ä¸æˆç«‹ï¼Œæ‰€ä»¥ä¸ä¼šè¿›å…¥ ï¼ˆæ‰§è¡Œï¼‰<code>grow(minCapacity)</code> æ–¹æ³•ã€‚</li>\n<li>æ·»åŠ ç¬¬ 3ã€4Â·Â·Â·åˆ°ç¬¬ 10 ä¸ªå…ƒç´ æ—¶ï¼Œä¾ç„¶ä¸ä¼šæ‰§è¡Œ grow æ–¹æ³•ï¼Œæ•°ç»„å®¹é‡éƒ½ä¸º 10ã€‚</li>\n</ul>\n<p>ç›´åˆ°æ·»åŠ ç¬¬ 11 ä¸ªå…ƒç´ ï¼ŒminCapacity(ä¸º 11)æ¯” elementData.lengthï¼ˆä¸º 10ï¼‰è¦å¤§ã€‚è¿›å…¥ grow æ–¹æ³•è¿›è¡Œæ‰©å®¹ã€‚</p>\n<h5 id=\"2-4-grow\"><a href=\"#2-4-grow\" class=\"headerlink\" title=\"2.4. grow()\"></a>2.4. <code>grow()</code></h5><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * è¦åˆ†é…çš„æœ€å¤§æ•°ç»„å¤§å°</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"type\">int</span> <span class=\"variable\">MAX_ARRAY_SIZE</span> <span class=\"operator\">=</span> Integer.MAX_VALUE - <span class=\"number\">8</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * ArrayListæ‰©å®¹çš„æ ¸å¿ƒæ–¹æ³•ã€‚</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title function_\">grow</span><span class=\"params\">(<span class=\"type\">int</span> minCapacity)</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// oldCapacityä¸ºæ—§å®¹é‡ï¼ŒnewCapacityä¸ºæ–°å®¹é‡</span></span><br><span class=\"line\">    <span class=\"type\">int</span> <span class=\"variable\">oldCapacity</span> <span class=\"operator\">=</span> elementData.length;</span><br><span class=\"line\">    <span class=\"comment\">//å°†oldCapacity å³ç§»ä¸€ä½ï¼Œå…¶æ•ˆæœç›¸å½“äºoldCapacity /2ï¼Œ</span></span><br><span class=\"line\">    <span class=\"comment\">//æˆ‘ä»¬çŸ¥é“ä½è¿ç®—çš„é€Ÿåº¦è¿œè¿œå¿«äºæ•´é™¤è¿ç®—ï¼Œæ•´å¥è¿ç®—å¼çš„ç»“æœå°±æ˜¯å°†æ–°å®¹é‡æ›´æ–°ä¸ºæ—§å®¹é‡çš„1.5å€ï¼Œ</span></span><br><span class=\"line\">    <span class=\"type\">int</span> <span class=\"variable\">newCapacity</span> <span class=\"operator\">=</span> oldCapacity + (oldCapacity &gt;&gt; <span class=\"number\">1</span>);</span><br><span class=\"line\">    <span class=\"comment\">//ç„¶åæ£€æŸ¥æ–°å®¹é‡æ˜¯å¦å¤§äºæœ€å°éœ€è¦å®¹é‡ï¼Œè‹¥è¿˜æ˜¯å°äºæœ€å°éœ€è¦å®¹é‡ï¼Œé‚£ä¹ˆå°±æŠŠæœ€å°éœ€è¦å®¹é‡å½“ä½œæ•°ç»„çš„æ–°å®¹é‡ï¼Œ</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (newCapacity - minCapacity &lt; <span class=\"number\">0</span>)</span><br><span class=\"line\">        newCapacity = minCapacity;</span><br><span class=\"line\">   <span class=\"comment\">// å¦‚æœæ–°å®¹é‡å¤§äº MAX_ARRAY_SIZE,è¿›å…¥(æ‰§è¡Œ) `hugeCapacity()` æ–¹æ³•æ¥æ¯”è¾ƒ minCapacity å’Œ MAX_ARRAY_SIZEï¼Œ</span></span><br><span class=\"line\">   <span class=\"comment\">//å¦‚æœminCapacityå¤§äºæœ€å¤§å®¹é‡ï¼Œåˆ™æ–°å®¹é‡åˆ™ä¸º`Integer.MAX_VALUE`ï¼Œå¦åˆ™ï¼Œæ–°å®¹é‡å¤§å°åˆ™ä¸º MAX_ARRAY_SIZE å³ä¸º `Integer.MAX_VALUE - 8`ã€‚</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (newCapacity - MAX_ARRAY_SIZE &gt; <span class=\"number\">0</span>)</span><br><span class=\"line\">        newCapacity = hugeCapacity(minCapacity);</span><br><span class=\"line\">    <span class=\"comment\">// minCapacity is usually close to size, so this is a win:</span></span><br><span class=\"line\">    elementData = Arrays.copyOf(elementData, newCapacity);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><strong>int newCapacity &#x3D; oldCapacity + (oldCapacity &gt;&gt; 1),æ‰€ä»¥ ArrayList æ¯æ¬¡æ‰©å®¹ä¹‹åå®¹é‡éƒ½ä¼šå˜ä¸ºåŸæ¥çš„ 1.5 å€å·¦å³ï¼ˆoldCapacity ä¸ºå¶æ•°å°±æ˜¯ 1.5 å€ï¼Œå¦åˆ™æ˜¯ 1.5 å€å·¦å³ï¼‰</strong> </p>\n<p><strong>æˆ‘ä»¬å†æ¥é€šè¿‡ä¾‹å­æ¢ç©¶ä¸€ä¸‹grow() æ–¹æ³• ï¼š</strong></p>\n<ul>\n<li>å½“ add ç¬¬ 1 ä¸ªå…ƒç´ æ—¶ï¼ŒoldCapacity ä¸º 0ï¼Œç»æ¯”è¾ƒåç¬¬ä¸€ä¸ª if åˆ¤æ–­æˆç«‹ï¼ŒnewCapacity &#x3D; minCapacity(ä¸º 10)ã€‚ä½†æ˜¯ç¬¬äºŒä¸ª if åˆ¤æ–­ä¸ä¼šæˆç«‹ï¼Œå³ newCapacity ä¸æ¯” MAX_ARRAY_SIZE å¤§ï¼Œåˆ™ä¸ä¼šè¿›å…¥ <code>hugeCapacity</code> æ–¹æ³•ã€‚æ•°ç»„å®¹é‡ä¸º 10ï¼Œadd æ–¹æ³•ä¸­ return true,size å¢ä¸º 1ã€‚</li>\n<li>å½“ add ç¬¬ 11 ä¸ªå…ƒç´ è¿›å…¥ grow æ–¹æ³•æ—¶ï¼ŒnewCapacity ä¸º 15ï¼Œæ¯” minCapacityï¼ˆä¸º 11ï¼‰å¤§ï¼Œç¬¬ä¸€ä¸ª if åˆ¤æ–­ä¸æˆç«‹ã€‚æ–°å®¹é‡æ²¡æœ‰å¤§äºæ•°ç»„æœ€å¤§ sizeï¼Œä¸ä¼šè¿›å…¥ hugeCapacity æ–¹æ³•ã€‚æ•°ç»„å®¹é‡æ‰©ä¸º 15ï¼Œadd æ–¹æ³•ä¸­ return true,size å¢ä¸º 11ã€‚</li>\n<li>ä»¥æ­¤ç±»æ¨Â·Â·Â·Â·Â·Â·</li>\n</ul>\n<h5 id=\"2-5-hugeCapacity\"><a href=\"#2-5-hugeCapacity\" class=\"headerlink\" title=\"2.5. hugeCapacity()\"></a>2.5. <code>hugeCapacity()</code></h5><p>ä»ä¸Šé¢ <code>grow()</code> æ–¹æ³•æºç æˆ‘ä»¬çŸ¥é“ï¼š å¦‚æœæ–°å®¹é‡å¤§äº MAX_ARRAY_SIZE,è¿›å…¥(æ‰§è¡Œ) <code>hugeCapacity()</code> æ–¹æ³•æ¥æ¯”è¾ƒ minCapacity å’Œ MAX_ARRAY_SIZEï¼Œå¦‚æœ minCapacity å¤§äºæœ€å¤§å®¹é‡ï¼Œåˆ™æ–°å®¹é‡åˆ™ä¸º<code>Integer.MAX_VALUE</code>ï¼Œå¦åˆ™ï¼Œæ–°å®¹é‡å¤§å°åˆ™ä¸º MAX_ARRAY_SIZE å³ä¸º <code>Integer.MAX_VALUE - 8</code>ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"type\">int</span> <span class=\"title function_\">hugeCapacity</span><span class=\"params\">(<span class=\"type\">int</span> minCapacity)</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (minCapacity &lt; <span class=\"number\">0</span>) <span class=\"comment\">// overflow</span></span><br><span class=\"line\">        <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"title class_\">OutOfMemoryError</span>();</span><br><span class=\"line\">    <span class=\"comment\">//å¯¹minCapacityå’ŒMAX_ARRAY_SIZEè¿›è¡Œæ¯”è¾ƒ</span></span><br><span class=\"line\">    <span class=\"comment\">//è‹¥minCapacityå¤§ï¼Œå°†Integer.MAX_VALUEä½œä¸ºæ–°æ•°ç»„çš„å¤§å°</span></span><br><span class=\"line\">    <span class=\"comment\">//è‹¥MAX_ARRAY_SIZEå¤§ï¼Œå°†MAX_ARRAY_SIZEä½œä¸ºæ–°æ•°ç»„çš„å¤§å°</span></span><br><span class=\"line\">    <span class=\"comment\">//MAX_ARRAY_SIZE = Integer.MAX_VALUE - 8;</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> (minCapacity &gt; MAX_ARRAY_SIZE) ?</span><br><span class=\"line\">        Integer.MAX_VALUE :</span><br><span class=\"line\">        MAX_ARRAY_SIZE;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Setæ¥å£\"><a href=\"#Setæ¥å£\" class=\"headerlink\" title=\"Setæ¥å£\"></a>Setæ¥å£</h3><h4 id=\"HashSet-çš„å®ç°åŸç†ï¼Ÿ\"><a href=\"#HashSet-çš„å®ç°åŸç†ï¼Ÿ\" class=\"headerlink\" title=\"HashSet çš„å®ç°åŸç†ï¼Ÿ\"></a>HashSet çš„å®ç°åŸç†ï¼Ÿ</h4><p>HashSet æ˜¯åŸºäº HashMap å®ç°çš„ï¼ŒHashSetçš„å€¼å­˜æ”¾äºHashMapçš„keyä¸Šï¼ŒHashMapçš„valueç»Ÿä¸€ä¸ºObjectå¸¸é‡PRESENTï¼Œç”±äº HashMap çš„ key ä¸å…è®¸é‡å¤ï¼Œè€Œ HashSet ä¸å…è®¸é‡å¤çš„å€¼ï¼Œå› æ­¤ HashSet å¯ä»¥åŸºäº HashMap å®ç°ï¼ŒåŸºæœ¬ä¸Šéƒ½æ˜¯ç›´æ¥è°ƒç”¨åº•å±‚ HashMap çš„ç›¸å…³æ–¹æ³•æ¥å®Œæˆã€‚</p>\n<h4 id=\"HashSetæ˜¯å¦‚ä½•ä¿è¯æ•°æ®ä¸å¯é‡å¤çš„ï¼Ÿ\"><a href=\"#HashSetæ˜¯å¦‚ä½•ä¿è¯æ•°æ®ä¸å¯é‡å¤çš„ï¼Ÿ\" class=\"headerlink\" title=\"HashSetæ˜¯å¦‚ä½•ä¿è¯æ•°æ®ä¸å¯é‡å¤çš„ï¼Ÿ\"></a>HashSetæ˜¯å¦‚ä½•ä¿è¯æ•°æ®ä¸å¯é‡å¤çš„ï¼Ÿ</h4><p>å½“ä½ æŠŠå¯¹è±¡åŠ å…¥ hashSet æ—¶ï¼ŒhashSet ä¼šå…ˆè®¡ç®—å¯¹è±¡çš„ hashcode å€¼æ¥åˆ¤æ–­å¯¹è±¡åŠ å…¥çš„ä½ç½®ï¼Œå¦‚æœå‘ç°æœ‰ç›¸åŒ hashcode å€¼çš„å¯¹è±¡ï¼Œè¿™æ—¶ä¼šè°ƒç”¨ equals()æ–¹æ³•æ¥æ£€æŸ¥ hashcode ç›¸ç­‰çš„å¯¹è±¡æ˜¯å¦çœŸçš„ç›¸åŒã€‚å¦‚æœä¸¤è€…ç›¸åŒï¼Œè¡¨æ˜å·²ç»æœ‰äº†ç›¸åŒçš„å¯¹è±¡äº†ï¼ŒhashSet å°±ä¸ä¼šè®©å…¶åŠ å…¥æ“ä½œæˆåŠŸã€‚å¦‚æœä¸åŒçš„è¯ï¼Œå°±ä¼šé‡æ–°æ•£åˆ—åˆ°å…¶ä»–ä½ç½®ã€‚ </p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// Dummy value to associate with an Object in the backing Map</span></span><br><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"type\">Object</span> <span class=\"variable\">PRESENT</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Object</span>();</span><br><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">transient</span> HashMap&lt;E,Object&gt; map;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"title function_\">HashSet</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">    map = <span class=\"keyword\">new</span> <span class=\"title class_\">HashMap</span>&lt;&gt;();</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"type\">boolean</span> <span class=\"title function_\">add</span><span class=\"params\">(E e)</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// è°ƒç”¨HashMapçš„putæ–¹æ³•,PRESENTæ˜¯ä¸€ä¸ªè‡³å§‹è‡³ç»ˆéƒ½ç›¸åŒçš„è™šå€¼</span></span><br><span class=\"line\">\t<span class=\"keyword\">return</span> map.put(e, PRESENT)==<span class=\"literal\">null</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"åªé‡å†™-hashCode-å¯ä»¥å—ï¼Ÿ\"><a href=\"#åªé‡å†™-hashCode-å¯ä»¥å—ï¼Ÿ\" class=\"headerlink\" title=\"åªé‡å†™ hashCode å¯ä»¥å—ï¼Ÿ\"></a>åªé‡å†™ hashCode å¯ä»¥å—ï¼Ÿ</h4><p>ä¸¤ä¸ªå¯¹è±¡çš„ hashCode ç›¸åŒï¼Œä½†æ˜¯å†…å®¹å¯èƒ½ä¸åŒï¼Œåœ¨ set ä¸­æ˜æ˜åº”è¯¥æ˜¯ä¸¤ä¸ªä¸åŒçš„å¯¹è±¡ï¼Œè¿™æ—¶å€™åªé€šè¿‡ hashCode åˆ¤æ–­ä»–ä¿©ç›¸åŒä¼šå¯¼è‡´åªæ’å…¥ä¸€ä¸ªå…ƒç´ ã€‚</p>\n<h4 id=\"åªé‡å†™-equalså¯ä»¥å—ï¼Ÿ\"><a href=\"#åªé‡å†™-equalså¯ä»¥å—ï¼Ÿ\" class=\"headerlink\" title=\"åªé‡å†™ equalså¯ä»¥å—ï¼Ÿ\"></a>åªé‡å†™ equalså¯ä»¥å—ï¼Ÿ</h4><p>å¦‚æœåœ¨é‡å†™ equals æ—¶ï¼Œä¸é‡å†™ hashCodeï¼Œå°±ä¼šå¼•èµ·æ¯”å¦‚è¯´å°†ä¸¤ä¸ªç›¸ç­‰çš„è‡ªå®šä¹‰å¯¹è±¡å­˜å‚¨åœ¨ Set é›†åˆæ—¶ï¼Œä¼šå°†è¿™ä¸¤ä¸ªå¯¹è±¡éƒ½è¿›è¡Œæ’å…¥ã€‚ï¼ˆæ— æ³•å»é‡ï¼‰</p>\n<h2 id=\"Mapæ¥å£\"><a href=\"#Mapæ¥å£\" class=\"headerlink\" title=\"Mapæ¥å£\"></a>Mapæ¥å£</h2><h3 id=\"HashMapçº¿ç¨‹ä¸å®‰å…¨çš„ä¸»è¦ä½“ç°ï¼Ÿ\"><a href=\"#HashMapçº¿ç¨‹ä¸å®‰å…¨çš„ä¸»è¦ä½“ç°ï¼Ÿ\" class=\"headerlink\" title=\"HashMapçº¿ç¨‹ä¸å®‰å…¨çš„ä¸»è¦ä½“ç°ï¼Ÿ\"></a>HashMapçº¿ç¨‹ä¸å®‰å…¨çš„ä¸»è¦ä½“ç°ï¼Ÿ</h3><ol>\n<li><p>åœ¨jdk1.7ä¸­ï¼Œåœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ï¼Œ<strong>æ‰©å®¹</strong>æ—¶ä¼šé€ æˆæ­»é“¾ã€‚</p>\n<blockquote>\n<p>ä½œè€…ï¼šç£Šå“¥<br>é“¾æ¥ï¼š<a href=\"https://www.zhihu.com/question/394039290/answer/2314917909\">https://www.zhihu.com/question/394039290/answer/2314917909</a><br>æ¥æºï¼šçŸ¥ä¹</p>\n</blockquote>\n<p> 1.1ã€</p>\n<p> æ­»å¾ªç¯æ˜¯å› ä¸ºå¹¶å‘HashMapæ‰©å®¹å¯¼è‡´çš„ï¼Œå¹¶å‘æ‰©å®¹çš„ç¬¬ä¸€æ­¥ï¼Œçº¿ç¨‹T1å’Œçº¿ç¨‹T2è¦å¯¹HashMapè¿›è¡Œæ‰©å®¹æ“ä½œï¼Œæ­¤æ—¶T1å’ŒT2æŒ‡å‘çš„æ˜¯é“¾è¡¨çš„å¤´ç»“ç‚¹å…ƒç´ Aï¼Œè€ŒT1å’ŒT2çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼Œä¹Ÿå°±æ˜¯T1.nextå’ŒT2.nextæŒ‡å‘çš„æ˜¯BèŠ‚ç‚¹ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š </p>\n<p> <img src=\"https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/v2-e0b4f5ea00cb277bde490f315b9b387f_720w.jpg\" alt=\"å¤šçº¿ç¨‹æ‰©å®¹å¯¼è‡´æ­»å¾ªç¯é—®é¢˜-1\"></p>\n<p> 1.2ã€</p>\n<p> æ­»å¾ªç¯çš„ç¬¬äºŒæ­¥æ“ä½œæ˜¯ï¼Œçº¿ç¨‹T2æ—¶é—´ç‰‡ç”¨å®Œè¿›å…¥ä¼‘çœ çŠ¶æ€ï¼Œè€Œçº¿ç¨‹T1å¼€å§‹æ‰§è¡Œæ‰©å®¹æ“ä½œï¼Œä¸€ç›´åˆ°çº¿ç¨‹T1æ‰©å®¹å®Œæˆåï¼Œçº¿ç¨‹T2æ‰è¢«å”¤é†’ï¼Œæ‰©å®¹ä¹‹åçš„åœºæ™¯å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š </p>\n<p> <img src=\"https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/v2-5f78d8ac8af1efc79e7d79a1f3fdc154_r.jpg\" alt=\"å¤šçº¿ç¨‹æ‰©å®¹å¯¼è‡´æ­»å¾ªç¯é—®é¢˜-2\"></p>\n<p>  ä»ä¸Šå›¾å¯çŸ¥çº¿ç¨‹T1æ‰§è¡Œä¹‹åï¼Œ<strong>å› ä¸ºæ˜¯å¤´æ’æ³•ï¼Œæ‰€ä»¥HashMapçš„é¡ºåºå·²ç»å‘ç”Ÿäº†æ”¹å˜</strong>ï¼Œä½†çº¿ç¨‹T2å¯¹äºå‘ç”Ÿçš„ä¸€åˆ‡æ˜¯ä¸å¯çŸ¥çš„ï¼Œæ‰€ä»¥å®ƒçš„æŒ‡å‘å…ƒç´ ä¾ç„¶æ²¡å˜ï¼Œå¦‚ä¸Šå›¾å±•ç¤ºçš„é‚£æ ·ï¼ŒT2æŒ‡å‘çš„æ˜¯Aå…ƒç´ ï¼ŒT2.nextæŒ‡å‘çš„èŠ‚ç‚¹æ˜¯Bå…ƒç´ ã€‚</p>\n<p> 1.3ã€</p>\n<p> å½“çº¿ç¨‹T1æ‰§è¡Œå®Œï¼Œè€Œçº¿ç¨‹T2æ¢å¤æ‰§è¡Œæ—¶ï¼Œæ­»å¾ªç¯å°±å»ºç«‹äº†ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š </p>\n<p> <img src=\"https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/v2-bd4a753db8c985119aa4dcd4356609cf_720w.jpg\" alt=\"å¤šçº¿ç¨‹æ‰©å®¹å¯¼è‡´æ­»å¾ªç¯é—®é¢˜-3\"></p>\n<p>  å› ä¸ºT1æ‰§è¡Œå®Œæ‰©å®¹ä¹‹åBèŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹æ˜¯Aï¼Œè€ŒT2çº¿ç¨‹æŒ‡å‘çš„é¦–èŠ‚ç‚¹æ˜¯Aï¼Œç¬¬äºŒä¸ªèŠ‚ç‚¹æ˜¯Bï¼Œè¿™ä¸ªé¡ºåºåˆšå¥½å’ŒT1æ‰©å®Œå®¹å®Œä¹‹åçš„èŠ‚ç‚¹é¡ºåºæ˜¯ç›¸åçš„ã€‚<strong>T1æ‰§è¡Œå®Œä¹‹åçš„é¡ºåºæ˜¯Båˆ°Aï¼Œè€ŒT2çš„é¡ºåºæ˜¯Aåˆ°Bï¼Œè¿™æ ·AèŠ‚ç‚¹å’ŒBèŠ‚ç‚¹å°±å½¢æˆæ­»å¾ªç¯äº†</strong>ï¼Œè¿™å°±æ˜¯HashMapæ­»å¾ªç¯å¯¼è‡´çš„åŸå› ã€‚</p>\n</li>\n<li><p>åœ¨jdk1.8ä¸­ï¼Œåœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ï¼Œ<strong>æ’å…¥</strong>æ—¶ä¼šå‘ç”Ÿæ•°æ®è¦†ç›–çš„æƒ…å†µï¼ˆ<strong>å°¾æ’æ³•</strong>ï¼‰ã€‚</p>\n</li>\n</ol>\n<h3 id=\"HashMapåœ¨JDK1-7å’ŒJDK1-8ä¸­æœ‰å“ªäº›ä¸åŒï¼Ÿ\"><a href=\"#HashMapåœ¨JDK1-7å’ŒJDK1-8ä¸­æœ‰å“ªäº›ä¸åŒï¼Ÿ\" class=\"headerlink\" title=\"HashMapåœ¨JDK1.7å’ŒJDK1.8ä¸­æœ‰å“ªäº›ä¸åŒï¼Ÿ\"></a>HashMapåœ¨JDK1.7å’ŒJDK1.8ä¸­æœ‰å“ªäº›ä¸åŒï¼Ÿ</h3><table>\n<thead>\n<tr>\n<th>ä¸åŒ</th>\n<th>JDK 1.7</th>\n<th>JDK 1.8</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><strong>å­˜å‚¨ç»“æ„</strong></td>\n<td>æ•°ç»„ + é“¾è¡¨</td>\n<td>æ•°ç»„ + é“¾è¡¨ + çº¢é»‘æ ‘</td>\n</tr>\n<tr>\n<td><strong>hashå€¼è®¡ç®—æ–¹å¼</strong></td>\n<td>æ‰°åŠ¨å¤„ç† &#x3D; 4æ¬¡ä½è¿ç®— + 5æ¬¡å¼‚æˆ–è¿ç®—</td>\n<td>æ‰°åŠ¨å¤„ç† &#x3D; 1æ¬¡ä½è¿ç®— + 1æ¬¡å¼‚æˆ–è¿ç®—</td>\n</tr>\n<tr>\n<td><strong>å­˜æ”¾æ•°æ®çš„è§„åˆ™</strong></td>\n<td>æ— å†²çªæ—¶ï¼Œå­˜æ”¾æ•°ç»„ï¼›<br />å†²çªæ—¶ï¼Œå­˜æ”¾é“¾è¡¨</td>\n<td>æ— å†²çªæ—¶ï¼Œå­˜æ”¾æ•°ç»„ï¼›<br />å†²çª &amp; é“¾è¡¨é•¿åº¦ &lt; 8ï¼šæ’å…¥å•é“¾è¡¨ï¼›<br />é“¾è¡¨é•¿åº¦&gt;8ï¼Œå…ˆå°è¯•æ‰©å®¹æ•°ç»„ï¼Œæ•°ç»„é•¿åº¦å¤§äº64<br />é“¾è¡¨è½¬ä¸ºçº¢é»‘æ ‘ï¼Œæ’å…¥åˆ°çº¢é»‘æ ‘</td>\n</tr>\n<tr>\n<td><strong>æ’å…¥æ•°æ®æ–¹å¼</strong></td>\n<td>å¤´æ’æ³•</td>\n<td>å°¾æ’æ³•</td>\n</tr>\n<tr>\n<td><strong>æ‰©å®¹åå­˜å‚¨ä½ç½®çš„è®¡ç®—æ–¹å¼</strong></td>\n<td>æŒ‰ç…§åŸæ¥æ–¹æ³•é‡æ–°è¿›è¡Œè®¡ç®—<br />hashCodeã€æ‰°åŠ¨å‡½æ•°ã€ä¸è¿ç®—h&amp;length-1</td>\n<td>æ ¹æ®å…ƒç´ çš„hashå€¼è¿›è¡Œåˆ¤æ–­ <br />æ‰©å®¹åçš„ä½ç½®&#x3D;åŸä½ç½® or åŸä½ç½® + æ—§å®¹é‡</td>\n</tr>\n</tbody></table>\n<h3 id=\"HashMapçš„hashç®—æ³•\"><a href=\"#HashMapçš„hashç®—æ³•\" class=\"headerlink\" title=\"HashMapçš„hashç®—æ³•\"></a>HashMapçš„hashç®—æ³•</h3><h4 id=\"ä»€ä¹ˆæ˜¯å“ˆå¸Œï¼Ÿ\"><a href=\"#ä»€ä¹ˆæ˜¯å“ˆå¸Œï¼Ÿ\" class=\"headerlink\" title=\"ä»€ä¹ˆæ˜¯å“ˆå¸Œï¼Ÿ\"></a>ä»€ä¹ˆæ˜¯å“ˆå¸Œï¼Ÿ</h4><p>Hashï¼Œå°±æ˜¯æŠŠä»»æ„é•¿åº¦çš„è¾“å…¥é€šè¿‡æ•£åˆ—ç®—æ³•ï¼Œå˜æ¢æˆå›ºå®šé•¿åº¦çš„è¾“å‡ºï¼Œè¯¥è¾“å‡ºå°±æ˜¯æ•£åˆ—å€¼ï¼ˆå“ˆå¸Œå€¼ï¼‰ï¼›</p>\n<p>hash å€¼ä¸åŒï¼Œè¾“å…¥ä¸€å®šä¸åŒï¼›è¾“å…¥ä¸åŒï¼Œhash å€¼å¯èƒ½ç›¸åŒï¼ˆå³å“ˆå¸Œç¢°æ’ï¼‰</p>\n<h4 id=\"ä»€ä¹ˆæ˜¯å“ˆå¸Œå†²çªï¼Ÿ\"><a href=\"#ä»€ä¹ˆæ˜¯å“ˆå¸Œå†²çªï¼Ÿ\" class=\"headerlink\" title=\"ä»€ä¹ˆæ˜¯å“ˆå¸Œå†²çªï¼Ÿ\"></a>ä»€ä¹ˆæ˜¯å“ˆå¸Œå†²çªï¼Ÿ</h4><p>å½“ä¸¤ä¸ªä¸åŒçš„è¾“å…¥å€¼ï¼Œæ ¹æ®åŒä¸€æ•£åˆ—å‡½æ•°è®¡ç®—å‡ºç›¸åŒçš„æ•£åˆ—å€¼çš„ç°è±¡ï¼Œæˆ‘ä»¬å°±æŠŠå®ƒå«åšå“ˆå¸Œç¢°æ’&#x2F;å†²çªã€‚</p>\n<h4 id=\"HashMapçš„æ•°æ®ç»“æ„\"><a href=\"#HashMapçš„æ•°æ®ç»“æ„\" class=\"headerlink\" title=\"HashMapçš„æ•°æ®ç»“æ„\"></a>HashMapçš„æ•°æ®ç»“æ„</h4><p>åº•å±‚æ•°æ®ç»“æ„ï¼šæ•°ç»„+é“¾è¡¨<br><strong>æ•°ç»„çš„ç‰¹ç‚¹æ˜¯ï¼šæ–¹ä¾¿æŸ¥æ‰¾ï¼›é“¾è¡¨çš„ç‰¹ç‚¹æ˜¯ï¼šæ–¹ä¾¿æ’å…¥åˆ é™¤</strong><br>æ‰€ä»¥æˆ‘ä»¬å°†æ•°ç»„å’Œé“¾è¡¨ç»“åˆåœ¨ä¸€èµ·ï¼Œå‘æŒ¥ä¸¤è€…å„è‡ªçš„ä¼˜åŠ¿ï¼Œä½¿ç”¨ä¸€ç§å«åš<strong>é“¾åœ°å€æ³•</strong>çš„æ–¹å¼å¯ä»¥è§£å†³å“ˆå¸Œå†²çª</p>\n<blockquote>\n<p>è§£å†³å“ˆå¸Œå†²çªçš„å…¶ä»–æ–¹æ³•ï¼š<br>å¼€æ”¾å®šå€æ³•ï¼ˆå†²çªäº†é€šè¿‡æŸç§æ–¹å¼æ•£åˆ—åˆ°å¦ä¸€ä¸ªä¸å†²çªçš„ä½ç½®ä¸Šï¼‰ï¼›<br>å†å“ˆå¸Œæ³•ï¼ˆæ„é€ å¤šä¸ªä¸åŒçš„å“ˆå¸Œå‡½æ•°ï¼‰ã€‚</p>\n</blockquote>\n<p><img src=\"https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/TyporaNotesaHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy83ODk2ODkwLWM2NmE0YmQ4OTA3ZjQ5ZjYucG5n.png\" alt=\"HashMapæ•°æ®ç»“æ„\"></p>\n<h4 id=\"æ‰°åŠ¨å¤„ç†\"><a href=\"#æ‰°åŠ¨å¤„ç†\" class=\"headerlink\" title=\"æ‰°åŠ¨å¤„ç†\"></a>æ‰°åŠ¨å¤„ç†</h4><p>ç”±äºè®¡ç®—ä¸‹æ ‡æ—¶ï¼Œé€šè¿‡ h &amp; (length - 1)ï¼Œç”±äºhashå€¼èŒƒå›´å¾ˆå¤§ï¼Œè€Œæ•°ç»„é•¿åº¦ç›¸å¯¹æ¥è¯´å°å¾—å¤šï¼Œå¯¼è‡´è¿›è¡Œä¸è¿ç®—æ—¶å‚ä¸è¿ç®—çš„åªæœ‰hashå€¼çš„ä½ä½ï¼Œ<strong>é«˜ä½æ˜¯æ²¡æœ‰èµ·åˆ°ä»»ä½•ä½œç”¨çš„</strong>ï¼Œè¿™å°†ä¼šå¤§å¤§å¢åŠ å“ˆå¸Œç¢°æ’çš„æ¦‚ç‡ã€‚æ‰€ä»¥æˆ‘ä»¬çš„æ€è·¯å°±æ˜¯è®©hashCodeå€¼çš„é«˜ä½ä¹Ÿå‚ä¸è¿ç®—ï¼Œè¿›ä¸€æ­¥é™ä½hashç¢°æ’çš„æ¦‚ç‡ï¼Œä½¿å¾—<strong>æ•°æ®åˆ†å¸ƒæ›´å¹³å‡</strong>ï¼Œæˆ‘ä»¬æŠŠè¿™æ ·çš„æ“ä½œç§°ä¸º<strong>æ‰°åŠ¨</strong>ï¼Œåœ¨<strong>JDK 1.8</strong>ä¸­çš„hash()å‡½æ•°å¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"type\">int</span> <span class=\"title function_\">hash</span><span class=\"params\">(Object key)</span> &#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> h;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> (key == <span class=\"literal\">null</span>) ? <span class=\"number\">0</span> : (h = key.hashCode()) ^ (h &gt;&gt;&gt; <span class=\"number\">16</span>);</span><br><span class=\"line\">    <span class=\"comment\">// ä¸è‡ªå·±å³ç§»16ä½è¿›è¡Œå¼‚æˆ–è¿ç®—ï¼ˆé«˜ä½ä½å¼‚æˆ–ï¼‰</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>è¿™æ¯”åœ¨<strong>JDK 1.7</strong>ä¸­ï¼Œæ›´ä¸ºç®€æ´ï¼Œ<strong>ç›¸æ¯”åœ¨1.7ä¸­çš„4æ¬¡ä½è¿ç®—ï¼Œ5æ¬¡å¼‚æˆ–è¿ç®—ï¼ˆ9æ¬¡æ‰°åŠ¨ï¼‰ï¼Œåœ¨1.8ä¸­ï¼Œåªè¿›è¡Œäº†1æ¬¡ä½è¿ç®—å’Œ1æ¬¡å¼‚æˆ–è¿ç®—ï¼ˆ2æ¬¡æ‰°åŠ¨ï¼‰</strong>ï¼›</p>\n<h4 id=\"ä¸‹æ ‡è®¡ç®—\"><a href=\"#ä¸‹æ ‡è®¡ç®—\" class=\"headerlink\" title=\"ä¸‹æ ‡è®¡ç®—\"></a>ä¸‹æ ‡è®¡ç®—</h4><p>åœ¨å¾—åˆ°hashå€¼ä¹‹åï¼Œæˆ‘ä»¬è¦æŠŠè¿™äº›hashå€¼æ˜ å°„åˆ°ç›¸åº”çš„æ•°ç»„ä¸‹æ ‡ä¸Šï¼Œé‚£ä¹ˆå°±å¯ä»¥è€ƒè™‘ä½¿ç”¨ hash % length</p>\n<p>è€Œ hash % length&#x3D;&#x3D;hash &amp; (length-1) å¹¶ä¸”å‰ææ˜¯ length æ˜¯2çš„ n æ¬¡æ–¹ã€‚<br>ç”±äºé‡‡ç”¨äºŒè¿›åˆ¶ä½æ“ä½œ &amp;ï¼Œç›¸å¯¹äº%èƒ½å¤Ÿæé«˜è¿ç®—æ•ˆç‡ï¼Œå› æ­¤å¯ä»¥å°† HashMap çš„é•¿åº¦è®¾è®¡ä¸º 2 çš„å¹‚æ¬¡æ–¹ã€‚ï¼ˆåˆå§‹åŒ–ä¸º16ï¼Œå¦‚æœæŒ‡å®šåˆå§‹åŒ–å®¹é‡çš„å€¼ï¼Œä¼šæ‰©å®¹è‡³ç¬¬ä¸€ä¸ªå¤§äºè¯¥å®¹é‡çš„ 2 çš„å¹‚æ¬¡æ–¹ä½œä¸ºæ•°ç»„å®¹é‡ï¼‰</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">static</span> <span class=\"type\">int</span> <span class=\"title function_\">indexFor</span><span class=\"params\">(<span class=\"type\">int</span> h, <span class=\"type\">int</span> length)</span>&#123;</span><br><span class=\"line\">     <span class=\"keyword\">return</span> h &amp; (length - <span class=\"number\">1</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"ä¸ºä»€ä¹ˆè¦å°†æ•°ç»„é•¿åº¦è®¾ç½®ä¸º-2-çš„næ¬¡å¹‚å‘¢ï¼Ÿ\"><a href=\"#ä¸ºä»€ä¹ˆè¦å°†æ•°ç»„é•¿åº¦è®¾ç½®ä¸º-2-çš„næ¬¡å¹‚å‘¢ï¼Ÿ\" class=\"headerlink\" title=\"ä¸ºä»€ä¹ˆè¦å°†æ•°ç»„é•¿åº¦è®¾ç½®ä¸º 2 çš„næ¬¡å¹‚å‘¢ï¼Ÿ\"></a>ä¸ºä»€ä¹ˆè¦å°†æ•°ç»„é•¿åº¦è®¾ç½®ä¸º 2 çš„næ¬¡å¹‚å‘¢ï¼Ÿ</h4><p>å½“æ•°ç»„é•¿åº¦ä¸º2çš„næ¬¡å¹‚çš„æ—¶å€™ï¼Œä¸åŒçš„keyä¸1111ï¼ˆnä¸ªï¼‰è¿›è¡Œä¸é¢„ç®—å¾—åˆ°ç›¸åŒä¸‹æ ‡çš„å‡ ç‡è¾ƒå°ï¼Œå‘ç”Ÿç¢°æ’çš„å‡ ç‡å°ã€‚ </p>\n<h4 id=\"JDK1-8æ–°å¢çº¢é»‘æ ‘\"><a href=\"#JDK1-8æ–°å¢çº¢é»‘æ ‘\" class=\"headerlink\" title=\"JDK1.8æ–°å¢çº¢é»‘æ ‘\"></a>JDK1.8æ–°å¢çº¢é»‘æ ‘</h4><p>ä¸ºäº†è§£å†³ä¸€æ¡é“¾ä¸Šçš„å…ƒç´ è¿‡å¤šï¼ŒæŸ¥æ‰¾æ•ˆç‡ä½çš„é—®é¢˜ï¼Œå°†é“¾è¡¨è½¬åŒ–ä¸ºçº¢é»‘æ ‘ï¼Œéå†å¤æ‚åº¦é™ä½è‡³O(logn)ï¼›</p>\n<h4 id=\"HashMapæ˜¯ä½¿ç”¨äº†å“ªäº›æ–¹æ³•æ¥æœ‰æ•ˆè§£å†³å“ˆå¸Œå†²çªçš„ï¼Ÿ\"><a href=\"#HashMapæ˜¯ä½¿ç”¨äº†å“ªäº›æ–¹æ³•æ¥æœ‰æ•ˆè§£å†³å“ˆå¸Œå†²çªçš„ï¼Ÿ\" class=\"headerlink\" title=\"HashMapæ˜¯ä½¿ç”¨äº†å“ªäº›æ–¹æ³•æ¥æœ‰æ•ˆè§£å†³å“ˆå¸Œå†²çªçš„ï¼Ÿ\"></a>HashMapæ˜¯ä½¿ç”¨äº†å“ªäº›æ–¹æ³•æ¥æœ‰æ•ˆè§£å†³å“ˆå¸Œå†²çªçš„ï¼Ÿ</h4><ol>\n<li>ä½¿ç”¨é“¾åœ°å€æ³•ï¼ˆä½¿ç”¨æ•£åˆ—è¡¨ï¼‰æ¥é“¾æ¥æ‹¥æœ‰ç›¸åŒhashå€¼çš„æ•°æ®ï¼›</li>\n<li>ä½¿ç”¨2æ¬¡æ‰°åŠ¨å‡½æ•°ï¼ˆ1æ¬¡ä½è¿ç®—å’Œ1æ¬¡å¼‚æˆ–è¿ç®—ï¼‰æ¥é™ä½å“ˆå¸Œå†²çªçš„æ¦‚ç‡ï¼Œä½¿å¾—æ•°æ®åˆ†å¸ƒæ›´å¹³å‡ï¼›</li>\n<li>å¼•å…¥çº¢é»‘æ ‘è¿›ä¸€æ­¥é™ä½éå†çš„æ—¶é—´å¤æ‚åº¦ï¼Œä½¿å¾—éå†æ›´å¿«ã€‚</li>\n</ol>\n<h3 id=\"HashMapçš„getæ–¹æ³•çš„å…·ä½“æµç¨‹ï¼Ÿ\"><a href=\"#HashMapçš„getæ–¹æ³•çš„å…·ä½“æµç¨‹ï¼Ÿ\" class=\"headerlink\" title=\"HashMapçš„getæ–¹æ³•çš„å…·ä½“æµç¨‹ï¼Ÿ\"></a>HashMapçš„getæ–¹æ³•çš„å…·ä½“æµç¨‹ï¼Ÿ</h3><ol>\n<li>å…ˆä½¿ç”¨keyçš„hashCodeã€æ‰°åŠ¨å¤„ç†ã€ä¸æ•°ç»„é•¿åº¦-1 è¿›è¡Œä¸è¿ç®—ï¼ˆå¯¹æ•°ç»„é•¿åº¦å»ä½™ï¼‰å¾—åˆ°æ§½ä½ï¼›</li>\n<li>åˆ¤æ–­é¦–ç»“ç‚¹ï¼Œå¦‚æœé¦–ç»“ç‚¹å’Œkeyçš„ <strong>hashå€¼</strong> ï¼ˆhashCodeå€¼ç»è¿‡æ‰°åŠ¨å‡½æ•°å¤„ç†åçš„å€¼ï¼‰ç›¸ç­‰ï¼Œå¹¶ä¸”ä¸¤è€…çš„ <strong>keyå€¼åœ°å€ç›¸ç­‰ã€equalsç›¸ç­‰</strong>ï¼Œåˆ™è¿”å›é¦–ç»“ç‚¹ï¼›</li>\n<li>å¦åˆ™ï¼Œåˆ™çº¢é»‘æ ‘æˆ–è€…é“¾è¡¨ä¸­è¿›è¡ŒæŸ¥æ‰¾ï¼ŒæŸ¥æ‰¾æ—¶åˆ¤æ–­ä¸¤ä¸ªkeyçš„hashå€¼ã€keyå€¼åœ°å€ç›¸ç­‰ã€equalsæ˜¯å¦éƒ½ç›¸ç­‰ã€‚</li>\n</ol>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> V <span class=\"title function_\">get</span><span class=\"params\">(Object key)</span> &#123;</span><br><span class=\"line\">    Node&lt;K,V&gt; e;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> (e = getNode(hash(key), key)) == <span class=\"literal\">null</span> ? <span class=\"literal\">null</span> : e.value;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">final</span> Node&lt;K,V&gt; <span class=\"title function_\">getNode</span><span class=\"params\">(<span class=\"type\">int</span> hash, Object key)</span> &#123;</span><br><span class=\"line\">    Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; first, e; <span class=\"type\">int</span> n; K k;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">//Nodeæ•°ç»„ä¸ä¸ºç©ºï¼Œæ•°ç»„é•¿åº¦å¤§äº0ï¼Œæ•°ç»„å¯¹åº”ä¸‹æ ‡çš„Nodeä¸ä¸ºç©º</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> ((tab = table) != <span class=\"literal\">null</span> &amp;&amp; (n = tab.length) &gt; <span class=\"number\">0</span> &amp;&amp;</span><br><span class=\"line\">        <span class=\"comment\">//ä¹Ÿæ˜¯é€šè¿‡ hash &amp; (length - 1) æ¥æ›¿ä»£ hash % length çš„</span></span><br><span class=\"line\">        (first = tab[(n - <span class=\"number\">1</span>) &amp; hash]) != <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"comment\">//å…ˆå’Œç¬¬ä¸€ä¸ªç»“ç‚¹æ¯”ï¼Œhashå€¼ç›¸ç­‰ä¸”keyä¸ä¸ºç©ºï¼Œkeyçš„ç¬¬ä¸€ä¸ªç»“ç‚¹çš„keyçš„å¯¹è±¡åœ°å€å’Œå€¼å‡ç›¸ç­‰</span></span><br><span class=\"line\">        <span class=\"comment\">//åˆ™è¿”å›ç¬¬ä¸€ä¸ªç»“ç‚¹</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (first.hash == hash &amp;&amp; <span class=\"comment\">// always check first node</span></span><br><span class=\"line\">            ((k = first.key) == key || (key != <span class=\"literal\">null</span> &amp;&amp; key.equals(k))))</span><br><span class=\"line\">            <span class=\"keyword\">return</span> first;</span><br><span class=\"line\">        <span class=\"comment\">//å¦‚æœkeyå’Œç¬¬ä¸€ä¸ªç»“ç‚¹ä¸åŒ¹é…ï¼Œåˆ™çœ‹.nextæ˜¯å¦ä¸ºç©ºï¼Œä¸ä¸ºnullåˆ™ç»§ç»­ï¼Œä¸ºç©ºåˆ™è¿”å›null</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> ((e = first.next) != <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">            <span class=\"comment\">//å¦‚æœæ­¤æ—¶æ˜¯çº¢é»‘æ ‘çš„ç»“æ„ï¼Œåˆ™è¿›è¡Œå¤„ç†getTreeNode()æ–¹æ³•æœç´¢key</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> (first <span class=\"keyword\">instanceof</span> TreeNode)</span><br><span class=\"line\">                <span class=\"keyword\">return</span> ((TreeNode&lt;K,V&gt;)first).getTreeNode(hash, key);</span><br><span class=\"line\">            <span class=\"comment\">//æ˜¯é“¾è¡¨ç»“æ„çš„è¯å°±ä¸€ä¸ªä¸€ä¸ªéå†ï¼Œç›´åˆ°æ‰¾åˆ°keyå¯¹åº”çš„ç»“ç‚¹ï¼Œ</span></span><br><span class=\"line\">            <span class=\"comment\">//æˆ–è€…eçš„ä¸‹ä¸€ä¸ªç»“ç‚¹ä¸ºnullé€€å‡ºå¾ªç¯</span></span><br><span class=\"line\">            <span class=\"keyword\">do</span> &#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (e.hash == hash &amp;&amp;</span><br><span class=\"line\">                    ((k = e.key) == key || (key != <span class=\"literal\">null</span> &amp;&amp; key.equals(k))))</span><br><span class=\"line\">                    <span class=\"keyword\">return</span> e;</span><br><span class=\"line\">            &#125; <span class=\"keyword\">while</span> ((e = e.next) != <span class=\"literal\">null</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">null</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"HashMapçš„putæ–¹æ³•çš„å…·ä½“æµç¨‹ï¼Ÿ\"><a href=\"#HashMapçš„putæ–¹æ³•çš„å…·ä½“æµç¨‹ï¼Ÿ\" class=\"headerlink\" title=\"HashMapçš„putæ–¹æ³•çš„å…·ä½“æµç¨‹ï¼Ÿ\"></a>HashMapçš„putæ–¹æ³•çš„å…·ä½“æµç¨‹ï¼Ÿ</h3><ol>\n<li>å¦‚æœtableæœªåˆå§‹åŒ–æˆ–è€…é•¿åº¦ä¸º0ç©ºåˆ™æ‰§è¡Œresize()è¿›è¡Œæ‰©å®¹ï¼Œè½¬å‘â‘¡</li>\n<li>æ ¹æ®é”®å€¼keyè®¡ç®—hashå€¼å¾—åˆ°æ’å…¥çš„æ•°ç»„ç´¢å¼•iï¼Œå¦‚æœtable[i]&#x3D;&#x3D;nullï¼Œå³æ•°ç»„è¯¥ä½ç½®ä¸Šæ²¡æœ‰å…ƒç´ ï¼Œç›´æ¥æ–°å»ºèŠ‚ç‚¹æ’å…¥ï¼Œè½¬å‘â‘¥åˆ¤æ–­æ˜¯å¦éœ€è¦æ‰©å®¹ï¼Œå¦‚æœtable[i]ä¸ä¸ºç©ºï¼Œè½¬å‘â‘¢ï¼›</li>\n<li>åˆ¤æ–­table[i]çš„é¦–ä¸ªå…ƒç´ æ˜¯å¦å’Œkeyä¸€æ ·ï¼Œå¦‚æœç›¸åŒï¼ˆhashCodeç›¸åŒã€keyåœ°å€ç›¸åŒã€equalsç›¸åŒï¼‰ç›´æ¥è¦†ç›–valueï¼Œå¦åˆ™è½¬å‘â‘£ï¼›</li>\n<li>åˆ¤æ–­table[i] æ˜¯å¦ä¸ºtreeNodeï¼Œå³table[i] æ˜¯å¦æ˜¯çº¢é»‘æ ‘ï¼Œå¦‚æœæ˜¯çº¢é»‘æ ‘ï¼Œåˆ™ç›´æ¥åœ¨æ ‘ä¸­æ’å…¥é”®å€¼å¯¹ï¼Œå¦åˆ™è½¬å‘â‘¤ï¼›</li>\n<li>éå†table[i]ï¼Œåˆ¤æ–­é“¾è¡¨é•¿åº¦æ˜¯å¦å¤§äº8ï¼Œå¤§äº8çš„è¯æŠŠé“¾è¡¨è½¬æ¢ä¸ºçº¢é»‘æ ‘ï¼Œåœ¨çº¢é»‘æ ‘ä¸­æ‰§è¡Œæ’å…¥æ“ä½œï¼Œå¦åˆ™è¿›è¡Œé“¾è¡¨çš„æ’å…¥æ“ä½œï¼›éå†è¿‡ç¨‹ä¸­è‹¥å‘ç°keyå·²ç»å­˜åœ¨ç›´æ¥è¦†ç›–valueå³å¯ï¼›</li>\n<li>æ’å…¥æˆåŠŸåï¼Œåˆ¤æ–­å®é™…å­˜åœ¨çš„é”®å€¼å¯¹æ•°é‡sizeæ˜¯å¦è¶…å‡ºå½“å‰æœ€å¤§å®¹é‡thresholdï¼Œå¦‚æœè¶…è¿‡ï¼Œè¿›è¡Œæ‰©å®¹ã€‚</li>\n</ol>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> V <span class=\"title function_\">put</span><span class=\"params\">(K key, V value)</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> putVal(hash(key), key, value, <span class=\"literal\">false</span>, <span class=\"literal\">true</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"type\">int</span> <span class=\"title function_\">hash</span><span class=\"params\">(Object key)</span> &#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> h;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> (key == <span class=\"literal\">null</span>) ? <span class=\"number\">0</span> : (h = key.hashCode()) ^ (h &gt;&gt;&gt; <span class=\"number\">16</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//å®ç°Map.putå’Œç›¸å…³æ–¹æ³•</span></span><br><span class=\"line\"><span class=\"keyword\">final</span> V <span class=\"title function_\">putVal</span><span class=\"params\">(<span class=\"type\">int</span> hash, K key, V value, <span class=\"type\">boolean</span> onlyIfAbsent,</span></span><br><span class=\"line\"><span class=\"params\">                   <span class=\"type\">boolean</span> evict)</span> &#123;</span><br><span class=\"line\">    Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; p; <span class=\"type\">int</span> n, i;</span><br><span class=\"line\">    <span class=\"comment\">// æ­¥éª¤â‘ ï¼štabä¸ºç©ºåˆ™åˆ›å»º </span></span><br><span class=\"line\">    <span class=\"comment\">// tableæœªåˆå§‹åŒ–æˆ–è€…é•¿åº¦ä¸º0ï¼Œè¿›è¡Œæ‰©å®¹</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> ((tab = table) == <span class=\"literal\">null</span> || (n = tab.length) == <span class=\"number\">0</span>)</span><br><span class=\"line\">        n = (tab = resize()).length;</span><br><span class=\"line\">    <span class=\"comment\">// æ­¥éª¤â‘¡ï¼šè®¡ç®—indexï¼Œå¹¶å¯¹nullåšå¤„ç†  </span></span><br><span class=\"line\">    <span class=\"comment\">// (n - 1) &amp; hash ç¡®å®šå…ƒç´ å­˜æ”¾åœ¨å“ªä¸ªæ¡¶ä¸­ï¼Œæ¡¶ä¸ºç©ºï¼Œæ–°ç”Ÿæˆç»“ç‚¹æ”¾å…¥æ¡¶ä¸­(æ­¤æ—¶ï¼Œè¿™ä¸ªç»“ç‚¹æ˜¯æ”¾åœ¨æ•°ç»„ä¸­)</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> ((p = tab[i = (n - <span class=\"number\">1</span>) &amp; hash]) == <span class=\"literal\">null</span>)</span><br><span class=\"line\">        tab[i] = newNode(hash, key, value, <span class=\"literal\">null</span>);</span><br><span class=\"line\">    <span class=\"comment\">// æ¡¶ä¸­å·²ç»å­˜åœ¨å…ƒç´ </span></span><br><span class=\"line\">    <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        Node&lt;K,V&gt; e; K k;</span><br><span class=\"line\">        <span class=\"comment\">// æ­¥éª¤â‘¢ï¼šèŠ‚ç‚¹keyå­˜åœ¨ï¼Œç›´æ¥è¦†ç›–value </span></span><br><span class=\"line\">        <span class=\"comment\">// æ¯”è¾ƒæ¡¶ä¸­ç¬¬ä¸€ä¸ªå…ƒç´ (æ•°ç»„ä¸­çš„ç»“ç‚¹)çš„hashå€¼ç›¸ç­‰ï¼Œkeyç›¸ç­‰</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (p.hash == hash &amp;&amp;</span><br><span class=\"line\">            ((k = p.key) == key || (key != <span class=\"literal\">null</span> &amp;&amp; key.equals(k))))</span><br><span class=\"line\">                <span class=\"comment\">// å°†ç¬¬ä¸€ä¸ªå…ƒç´ èµ‹å€¼ç»™eï¼Œç”¨eæ¥è®°å½•</span></span><br><span class=\"line\">                e = p;</span><br><span class=\"line\">        <span class=\"comment\">// æ­¥éª¤â‘£ï¼šåˆ¤æ–­è¯¥é“¾ä¸ºçº¢é»‘æ ‘ </span></span><br><span class=\"line\">        <span class=\"comment\">// hashå€¼ä¸ç›¸ç­‰ï¼Œå³keyä¸ç›¸ç­‰ï¼›ä¸ºçº¢é»‘æ ‘ç»“ç‚¹</span></span><br><span class=\"line\">        <span class=\"comment\">// å¦‚æœå½“å‰å…ƒç´ ç±»å‹ä¸ºTreeNodeï¼Œè¡¨ç¤ºä¸ºçº¢é»‘æ ‘ï¼ŒputTreeValè¿”å›å¾…å­˜æ”¾çš„node, eå¯èƒ½ä¸ºnull</span></span><br><span class=\"line\">        <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (p <span class=\"keyword\">instanceof</span> TreeNode)</span><br><span class=\"line\">            <span class=\"comment\">// æ”¾å…¥æ ‘ä¸­</span></span><br><span class=\"line\">            e = ((TreeNode&lt;K,V&gt;)p).putTreeVal(<span class=\"built_in\">this</span>, tab, hash, key, value);</span><br><span class=\"line\">        <span class=\"comment\">// æ­¥éª¤â‘¤ï¼šè¯¥é“¾ä¸ºé“¾è¡¨ </span></span><br><span class=\"line\">        <span class=\"comment\">// ä¸ºé“¾è¡¨ç»“ç‚¹</span></span><br><span class=\"line\">        <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            <span class=\"comment\">// åœ¨é“¾è¡¨æœ€æœ«æ’å…¥ç»“ç‚¹</span></span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">binCount</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>; ; ++binCount) &#123;</span><br><span class=\"line\">                <span class=\"comment\">// åˆ°è¾¾é“¾è¡¨çš„å°¾éƒ¨</span></span><br><span class=\"line\">                </span><br><span class=\"line\">                <span class=\"comment\">//åˆ¤æ–­è¯¥é“¾è¡¨å°¾éƒ¨æŒ‡é’ˆæ˜¯ä¸æ˜¯ç©ºçš„</span></span><br><span class=\"line\">                <span class=\"keyword\">if</span> ((e = p.next) == <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">                    <span class=\"comment\">// åœ¨å°¾éƒ¨æ’å…¥æ–°ç»“ç‚¹</span></span><br><span class=\"line\">                    p.next = newNode(hash, key, value, <span class=\"literal\">null</span>);</span><br><span class=\"line\">                    <span class=\"comment\">//åˆ¤æ–­é“¾è¡¨çš„é•¿åº¦æ˜¯å¦è¾¾åˆ°è½¬åŒ–çº¢é»‘æ ‘çš„ä¸´ç•Œå€¼ï¼Œä¸´ç•Œå€¼ä¸º8</span></span><br><span class=\"line\">                    <span class=\"keyword\">if</span> (binCount &gt;= TREEIFY_THRESHOLD - <span class=\"number\">1</span>) <span class=\"comment\">// -1 for 1st</span></span><br><span class=\"line\">                        <span class=\"comment\">//é“¾è¡¨ç»“æ„è½¬æ ‘å½¢ç»“æ„</span></span><br><span class=\"line\">                        treeifyBin(tab, hash);</span><br><span class=\"line\">                    <span class=\"comment\">// è·³å‡ºå¾ªç¯</span></span><br><span class=\"line\">                    <span class=\"keyword\">break</span>;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                <span class=\"comment\">// åˆ¤æ–­é“¾è¡¨ä¸­ç»“ç‚¹çš„keyå€¼ä¸æ’å…¥çš„å…ƒç´ çš„keyå€¼æ˜¯å¦ç›¸ç­‰</span></span><br><span class=\"line\">                <span class=\"keyword\">if</span> (e.hash == hash &amp;&amp;</span><br><span class=\"line\">                    ((k = e.key) == key || (key != <span class=\"literal\">null</span> &amp;&amp; key.equals(k))))</span><br><span class=\"line\">                    <span class=\"comment\">// ç›¸ç­‰ï¼Œè·³å‡ºå¾ªç¯</span></span><br><span class=\"line\">                    <span class=\"keyword\">break</span>;</span><br><span class=\"line\">                <span class=\"comment\">// ç”¨äºéå†æ¡¶ä¸­çš„é“¾è¡¨ï¼Œä¸å‰é¢çš„e = p.nextç»„åˆï¼Œå¯ä»¥éå†é“¾è¡¨</span></span><br><span class=\"line\">                p = e;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">//åˆ¤æ–­å½“å‰çš„keyå·²ç»å­˜åœ¨çš„æƒ…å†µä¸‹ï¼Œå†æ¥ä¸€ä¸ªç›¸åŒçš„hashå€¼ã€keyå€¼æ—¶ï¼Œè¿”å›æ–°æ¥çš„valueè¿™ä¸ªå€¼</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (e != <span class=\"literal\">null</span>) &#123; </span><br><span class=\"line\">            <span class=\"comment\">// è®°å½•eçš„value</span></span><br><span class=\"line\">            <span class=\"type\">V</span> <span class=\"variable\">oldValue</span> <span class=\"operator\">=</span> e.value;</span><br><span class=\"line\">            <span class=\"comment\">// onlyIfAbsentä¸ºfalseæˆ–è€…æ—§å€¼ä¸ºnull</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> (!onlyIfAbsent || oldValue == <span class=\"literal\">null</span>)</span><br><span class=\"line\">                <span class=\"comment\">//ç”¨æ–°å€¼æ›¿æ¢æ—§å€¼</span></span><br><span class=\"line\">                e.value = value;</span><br><span class=\"line\">            <span class=\"comment\">// è®¿é—®åå›è°ƒ</span></span><br><span class=\"line\">            afterNodeAccess(e);</span><br><span class=\"line\">            <span class=\"comment\">// è¿”å›æ—§å€¼</span></span><br><span class=\"line\">            <span class=\"keyword\">return</span> oldValue;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// ç»“æ„æ€§ä¿®æ”¹</span></span><br><span class=\"line\">    ++modCount;</span><br><span class=\"line\">    <span class=\"comment\">// æ­¥éª¤â‘¥ï¼šè¶…è¿‡æœ€å¤§å®¹é‡å°±æ‰©å®¹ </span></span><br><span class=\"line\">    <span class=\"comment\">// å®é™…å¤§å°å¤§äºé˜ˆå€¼åˆ™æ‰©å®¹</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (++size &gt; threshold)</span><br><span class=\"line\">        resize();</span><br><span class=\"line\">    <span class=\"comment\">// æ’å…¥åå›è°ƒ</span></span><br><span class=\"line\">    afterNodeInsertion(evict);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">null</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"HashMapçš„æ‰©å®¹æ“ä½œæ˜¯æ€ä¹ˆå®ç°çš„ï¼Ÿ\"><a href=\"#HashMapçš„æ‰©å®¹æ“ä½œæ˜¯æ€ä¹ˆå®ç°çš„ï¼Ÿ\" class=\"headerlink\" title=\"HashMapçš„æ‰©å®¹æ“ä½œæ˜¯æ€ä¹ˆå®ç°çš„ï¼Ÿ\"></a>HashMapçš„æ‰©å®¹æ“ä½œæ˜¯æ€ä¹ˆå®ç°çš„ï¼Ÿ</h3><p>â‘ .åœ¨jdk1.8ä¸­ï¼Œresizeæ–¹æ³•æ˜¯åœ¨hashmapä¸­çš„é”®å€¼å¯¹ï¼ˆå…ƒç´ æ•°é‡ï¼‰å¤§äºé˜€å€¼æ—¶ï¼ˆé˜ˆå€¼ä¸ºå®¹é‡*è´Ÿè½½å› å­ï¼‰æ‰©å®¹ä¸ºåŸå®¹é‡çš„2å€ï¼Œæˆ–è€…åˆå§‹åŒ–æ—¶ï¼ˆæ‰©å®¹ä¸º16ï¼‰ï¼Œå°±è°ƒç”¨resizeæ–¹æ³•è¿›è¡Œæ‰©å®¹ï¼›</p>\n<p>â‘¡.åœ¨1.7ä¸­ï¼Œæ‰©å®¹ä¹‹åéœ€è¦é‡æ–°å»è®¡ç®—å…¶Hashå€¼ï¼Œæ ¹æ®Hashå€¼å¯¹å…¶è¿›è¡Œåˆ†å‘ï¼Œä½†åœ¨1.8ç‰ˆæœ¬ä¸­ï¼Œåˆ™æ˜¯æ ¹æ®åœ¨åŒä¸€ä¸ªæ¡¶çš„ä½ç½®ä¸­è¿›è¡Œåˆ¤æ–­(e.hash &amp; oldCap)æ˜¯å¦ä¸º0ï¼Œé‡æ–°è¿›è¡Œhashåˆ†é…åï¼Œè¯¥å…ƒç´ hashå€¼ä¸æ—§å®¹é‡ä¸è¿ç®—ä¸º0åˆ™ç•™åœ¨åŸå§‹ä½ç½®ï¼Œhashå€¼ä¸æ—§å®¹é‡ä¸è¿ç®—ä¸º1åˆ™ç§»åŠ¨åˆ° åŸä½ç½® + oldCap è¿™ä¸ªä½ç½®ä¸Š</p>\n<p><img src=\"https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/TyporaNotes20190128152700351.png\" alt=\"HashMapçš„resizeæ“ä½œ\"></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">final</span> Node&lt;K,V&gt;[] resize() &#123;</span><br><span class=\"line\">    Node&lt;K,V&gt;[] oldTab = table;<span class=\"comment\">//oldTabæŒ‡å‘hashæ¡¶æ•°ç»„</span></span><br><span class=\"line\">    <span class=\"type\">int</span> <span class=\"variable\">oldCap</span> <span class=\"operator\">=</span> (oldTab == <span class=\"literal\">null</span>) ? <span class=\"number\">0</span> : oldTab.length;</span><br><span class=\"line\">    <span class=\"type\">int</span> <span class=\"variable\">oldThr</span> <span class=\"operator\">=</span> threshold;</span><br><span class=\"line\">    <span class=\"type\">int</span> newCap, newThr = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (oldCap &gt; <span class=\"number\">0</span>) &#123;<span class=\"comment\">//å¦‚æœoldCapä¸ä¸ºç©ºçš„è¯ï¼Œå°±æ˜¯hashæ¡¶æ•°ç»„ä¸ä¸ºç©º</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (oldCap &gt;= MAXIMUM_CAPACITY) &#123;<span class=\"comment\">//å¦‚æœå¤§äºæœ€å¤§å®¹é‡äº†ï¼Œå°±èµ‹å€¼ä¸ºæ•´æ•°æœ€å¤§çš„é˜€å€¼</span></span><br><span class=\"line\">            threshold = Integer.MAX_VALUE;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> oldTab;<span class=\"comment\">//è¿”å›</span></span><br><span class=\"line\">        &#125;<span class=\"comment\">//å¦‚æœå½“å‰hashæ¡¶æ•°ç»„çš„é•¿åº¦åœ¨æ‰©å®¹åä»ç„¶å°äºæœ€å¤§å®¹é‡ å¹¶ä¸”oldCapå¤§äºé»˜è®¤å€¼16</span></span><br><span class=\"line\">        <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> ((newCap = oldCap &lt;&lt; <span class=\"number\">1</span>) &lt; MAXIMUM_CAPACITY &amp;&amp;</span><br><span class=\"line\">                 oldCap &gt;= DEFAULT_INITIAL_CAPACITY)</span><br><span class=\"line\">            newThr = oldThr &lt;&lt; <span class=\"number\">1</span>; <span class=\"comment\">// double threshold åŒå€æ‰©å®¹é˜€å€¼threshold</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// æ—§çš„å®¹é‡ä¸º0ï¼Œä½†thresholdå¤§äºé›¶ï¼Œä»£è¡¨æœ‰å‚æ„é€ æœ‰capä¼ å…¥ï¼Œthresholdå·²ç»è¢«åˆå§‹åŒ–æˆæœ€å°2çš„næ¬¡å¹‚</span></span><br><span class=\"line\">    <span class=\"comment\">// ç›´æ¥å°†è¯¥å€¼èµ‹ç»™æ–°çš„å®¹é‡</span></span><br><span class=\"line\">    <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (oldThr &gt; <span class=\"number\">0</span>) <span class=\"comment\">// initial capacity was placed in threshold</span></span><br><span class=\"line\">        newCap = oldThr;</span><br><span class=\"line\">    <span class=\"comment\">// æ— å‚æ„é€ åˆ›å»ºçš„mapï¼Œç»™å‡ºé»˜è®¤å®¹é‡å’Œthreshold 16, 16*0.75</span></span><br><span class=\"line\">    <span class=\"keyword\">else</span> &#123;               <span class=\"comment\">// zero initial threshold signifies using defaults</span></span><br><span class=\"line\">        newCap = DEFAULT_INITIAL_CAPACITY;</span><br><span class=\"line\">        newThr = (<span class=\"type\">int</span>)(DEFAULT_LOAD_FACTOR * DEFAULT_INITIAL_CAPACITY);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// æ–°çš„threshold = æ–°çš„cap * 0.75</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (newThr == <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">        <span class=\"type\">float</span> <span class=\"variable\">ft</span> <span class=\"operator\">=</span> (<span class=\"type\">float</span>)newCap * loadFactor;</span><br><span class=\"line\">        newThr = (newCap &lt; MAXIMUM_CAPACITY &amp;&amp; ft &lt; (<span class=\"type\">float</span>)MAXIMUM_CAPACITY ?</span><br><span class=\"line\">                  (<span class=\"type\">int</span>)ft : Integer.MAX_VALUE);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    threshold = newThr;</span><br><span class=\"line\">    <span class=\"comment\">// è®¡ç®—å‡ºæ–°çš„æ•°ç»„é•¿åº¦åèµ‹ç»™å½“å‰æˆå‘˜å˜é‡table</span></span><br><span class=\"line\">    <span class=\"meta\">@SuppressWarnings(&#123;&quot;rawtypes&quot;,&quot;unchecked&quot;&#125;)</span></span><br><span class=\"line\">        Node&lt;K,V&gt;[] newTab = (Node&lt;K,V&gt;[])<span class=\"keyword\">new</span> <span class=\"title class_\">Node</span>[newCap];<span class=\"comment\">//æ–°å»ºhashæ¡¶æ•°ç»„</span></span><br><span class=\"line\">    table = newTab;<span class=\"comment\">//å°†æ–°æ•°ç»„çš„å€¼å¤åˆ¶ç»™æ—§çš„hashæ¡¶æ•°ç»„</span></span><br><span class=\"line\">    <span class=\"comment\">// å¦‚æœåŸå…ˆçš„æ•°ç»„æ²¡æœ‰åˆå§‹åŒ–ï¼Œé‚£ä¹ˆresizeçš„åˆå§‹åŒ–å·¥ä½œåˆ°æ­¤ç»“æŸï¼Œå¦åˆ™è¿›å…¥æ‰©å®¹å…ƒç´ é‡æ’é€»è¾‘ï¼Œä½¿å…¶å‡åŒ€çš„åˆ†æ•£</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (oldTab != <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// éå†æ–°æ•°ç»„çš„æ‰€æœ‰æ¡¶ä¸‹æ ‡</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">j</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>; j &lt; oldCap; ++j) &#123;</span><br><span class=\"line\">            Node&lt;K,V&gt; e;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> ((e = oldTab[j]) != <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">                <span class=\"comment\">// æ—§æ•°ç»„çš„æ¡¶ä¸‹æ ‡èµ‹ç»™ä¸´æ—¶å˜é‡eï¼Œå¹¶ä¸”è§£é™¤æ—§æ•°ç»„ä¸­çš„å¼•ç”¨ï¼Œå¦åˆ™å°±æ•°ç»„æ— æ³•è¢«GCå›æ”¶</span></span><br><span class=\"line\">                oldTab[j] = <span class=\"literal\">null</span>;</span><br><span class=\"line\">                <span class=\"comment\">// å¦‚æœe.next==nullï¼Œä»£è¡¨æ¡¶ä¸­å°±ä¸€ä¸ªå…ƒç´ ï¼Œä¸å­˜åœ¨é“¾è¡¨æˆ–è€…çº¢é»‘æ ‘</span></span><br><span class=\"line\">                <span class=\"keyword\">if</span> (e.next == <span class=\"literal\">null</span>)</span><br><span class=\"line\">                    <span class=\"comment\">// ç”¨åŒæ ·çš„hashæ˜ å°„ç®—æ³•æŠŠè¯¥å…ƒç´ åŠ å…¥æ–°çš„æ•°ç»„</span></span><br><span class=\"line\">                    newTab[e.hash &amp; (newCap - <span class=\"number\">1</span>)] = e;</span><br><span class=\"line\">                <span class=\"comment\">// å¦‚æœeæ˜¯TreeNodeå¹¶ä¸”e.next!=nullï¼Œé‚£ä¹ˆå¤„ç†æ ‘ä¸­å…ƒç´ çš„é‡æ’</span></span><br><span class=\"line\">                <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (e <span class=\"keyword\">instanceof</span> TreeNode)</span><br><span class=\"line\">                    ((TreeNode&lt;K,V&gt;)e).split(<span class=\"built_in\">this</span>, newTab, j, oldCap);</span><br><span class=\"line\">                <span class=\"comment\">// eæ˜¯é“¾è¡¨çš„å¤´å¹¶ä¸”e.next!=nullï¼Œé‚£ä¹ˆå¤„ç†é“¾è¡¨ä¸­å…ƒç´ é‡æ’</span></span><br><span class=\"line\">                <span class=\"keyword\">else</span> &#123; <span class=\"comment\">// preserve order</span></span><br><span class=\"line\">                    <span class=\"comment\">// loHead,loTail ä»£è¡¨æ‰©å®¹åä¸ç”¨å˜æ¢ä¸‹æ ‡ï¼Œè§æ³¨1</span></span><br><span class=\"line\">                    Node&lt;K,V&gt; loHead = <span class=\"literal\">null</span>, loTail = <span class=\"literal\">null</span>;</span><br><span class=\"line\">                    <span class=\"comment\">// hiHead,hiTail ä»£è¡¨æ‰©å®¹åå˜æ¢ä¸‹æ ‡ï¼Œè§æ³¨1</span></span><br><span class=\"line\">                    Node&lt;K,V&gt; hiHead = <span class=\"literal\">null</span>, hiTail = <span class=\"literal\">null</span>;</span><br><span class=\"line\">                    Node&lt;K,V&gt; next;</span><br><span class=\"line\">                    <span class=\"comment\">// éå†é“¾è¡¨</span></span><br><span class=\"line\">                    <span class=\"keyword\">do</span> &#123;             </span><br><span class=\"line\">                        next = e.next;</span><br><span class=\"line\">                        <span class=\"keyword\">if</span> ((e.hash &amp; oldCap) == <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">                            <span class=\"keyword\">if</span> (loTail == <span class=\"literal\">null</span>)</span><br><span class=\"line\">                                <span class=\"comment\">// åˆå§‹åŒ–headæŒ‡å‘é“¾è¡¨å½“å‰å…ƒç´ eï¼Œeä¸ä¸€å®šæ˜¯é“¾è¡¨çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œåˆå§‹åŒ–åloHead</span></span><br><span class=\"line\">                                <span class=\"comment\">// ä»£è¡¨ä¸‹æ ‡ä¿æŒä¸å˜çš„é“¾è¡¨çš„å¤´å…ƒç´ </span></span><br><span class=\"line\">                                loHead = e;</span><br><span class=\"line\">                            <span class=\"keyword\">else</span>                                </span><br><span class=\"line\">                                <span class=\"comment\">// loTail.nextæŒ‡å‘å½“å‰e</span></span><br><span class=\"line\">                                loTail.next = e;</span><br><span class=\"line\">                            <span class=\"comment\">// loTailæŒ‡å‘å½“å‰çš„å…ƒç´ e</span></span><br><span class=\"line\">                            <span class=\"comment\">// åˆå§‹åŒ–åï¼ŒloTailå’ŒloHeadæŒ‡å‘ç›¸åŒçš„å†…å­˜ï¼Œæ‰€ä»¥å½“loTail.nextæŒ‡å‘ä¸‹ä¸€ä¸ªå…ƒç´ æ—¶ï¼Œ</span></span><br><span class=\"line\">                            <span class=\"comment\">// åº•å±‚æ•°ç»„ä¸­çš„å…ƒç´ çš„nextå¼•ç”¨ä¹Ÿç›¸åº”å‘ç”Ÿå˜åŒ–ï¼Œé€ æˆlowHead.next.next.....</span></span><br><span class=\"line\">                            <span class=\"comment\">// è·ŸéšloTailåŒæ­¥ï¼Œä½¿å¾—lowHeadå¯ä»¥é“¾æ¥åˆ°æ‰€æœ‰å±äºè¯¥é“¾è¡¨çš„å…ƒç´ ã€‚</span></span><br><span class=\"line\">                            loTail = e;                           </span><br><span class=\"line\">                        &#125;</span><br><span class=\"line\">                        <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                            <span class=\"keyword\">if</span> (hiTail == <span class=\"literal\">null</span>)</span><br><span class=\"line\">                                <span class=\"comment\">// åˆå§‹åŒ–headæŒ‡å‘é“¾è¡¨å½“å‰å…ƒç´ e, åˆå§‹åŒ–åhiHeadä»£è¡¨ä¸‹æ ‡æ›´æ”¹çš„é“¾è¡¨å¤´å…ƒç´ </span></span><br><span class=\"line\">                                hiHead = e;</span><br><span class=\"line\">                            <span class=\"keyword\">else</span></span><br><span class=\"line\">                                hiTail.next = e;</span><br><span class=\"line\">                            hiTail = e;</span><br><span class=\"line\">                        &#125;</span><br><span class=\"line\">                    &#125; <span class=\"keyword\">while</span> ((e = next) != <span class=\"literal\">null</span>);</span><br><span class=\"line\">                    <span class=\"comment\">// éå†ç»“æŸ, å°†tailæŒ‡å‘nullï¼Œå¹¶æŠŠé“¾è¡¨å¤´æ”¾å…¥æ–°æ•°ç»„çš„ç›¸åº”ä¸‹æ ‡ï¼Œå½¢æˆæ–°çš„æ˜ å°„ã€‚</span></span><br><span class=\"line\">                    <span class=\"keyword\">if</span> (loTail != <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">                        loTail.next = <span class=\"literal\">null</span>;</span><br><span class=\"line\">                        newTab[j] = loHead;</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                    <span class=\"keyword\">if</span> (hiTail != <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">                        hiTail.next = <span class=\"literal\">null</span>;</span><br><span class=\"line\">                        newTab[j + oldCap] = hiHead;</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> newTab;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"HashMapè´Ÿè½½å› å­ä¸ºä»€ä¹ˆè®¾ç½®ä¸º-0-75\"><a href=\"#HashMapè´Ÿè½½å› å­ä¸ºä»€ä¹ˆè®¾ç½®ä¸º-0-75\" class=\"headerlink\" title=\"HashMapè´Ÿè½½å› å­ä¸ºä»€ä¹ˆè®¾ç½®ä¸º 0.75?\"></a>HashMapè´Ÿè½½å› å­ä¸ºä»€ä¹ˆè®¾ç½®ä¸º 0.75?</h3><p>hashmapçš„æºç ä¸­æœ‰ä¸€æ®µæ³¨é‡Šè§£é‡Šäº†ä¸ºä»€ä¹ˆè®¾ç½®ä¸º0.75ï¼Œæ˜¯<strong>ç©ºé—´å’Œæ—¶é—´æ•ˆç‡çš„æŠ˜ä¸­è€ƒè™‘</strong>ã€‚</p>\n<h3 id=\"èƒ½å¦ä½¿ç”¨ä»»ä½•ç±»ä½œä¸º-Map-çš„-keyï¼Ÿ\"><a href=\"#èƒ½å¦ä½¿ç”¨ä»»ä½•ç±»ä½œä¸º-Map-çš„-keyï¼Ÿ\" class=\"headerlink\" title=\"èƒ½å¦ä½¿ç”¨ä»»ä½•ç±»ä½œä¸º Map çš„ keyï¼Ÿ\"></a>èƒ½å¦ä½¿ç”¨ä»»ä½•ç±»ä½œä¸º Map çš„ keyï¼Ÿ</h3><p>å¯ä»¥ä½¿ç”¨ä»»ä½•ç±»ä½œä¸º Map çš„ keyï¼Œå‰ææ˜¯è¯¥ç±»é‡å†™äº†hashCodeå’Œequalsæ–¹æ³•ã€‚é‡å†™hashCode() æ˜¯ä¸ºäº†è®¡ç®—æ•°æ®çš„å­˜å‚¨ä½ç½®ï¼Œé‡å†™equalsæ–¹æ³•æ˜¯ä¸ºäº†ç¡®ä¿keyåœ¨å“ˆå¸Œè¡¨ä¸­çš„å”¯ä¸€æ€§ã€‚æœ€ç»ˆç›®çš„æ˜¯ä¸ºäº†ä¿è¯ Map ä¸­é”®keyçš„å”¯ä¸€æ€§ã€‚</p>\n<h3 id=\"ä¸ºä»€ä¹ˆHashMapä¸­Stringã€Integerè¿™æ ·çš„åŒ…è£…ç±»é€‚åˆä½œä¸ºkeyï¼Ÿ\"><a href=\"#ä¸ºä»€ä¹ˆHashMapä¸­Stringã€Integerè¿™æ ·çš„åŒ…è£…ç±»é€‚åˆä½œä¸ºkeyï¼Ÿ\" class=\"headerlink\" title=\"ä¸ºä»€ä¹ˆHashMapä¸­Stringã€Integerè¿™æ ·çš„åŒ…è£…ç±»é€‚åˆä½œä¸ºkeyï¼Ÿ\"></a>ä¸ºä»€ä¹ˆHashMapä¸­Stringã€Integerè¿™æ ·çš„åŒ…è£…ç±»é€‚åˆä½œä¸ºkeyï¼Ÿ</h3><p>é‡å†™äº†hashCodeå’Œequalsæ–¹æ³•ï¼Œä¿è¯äº† Map ä¸­é”®<strong>keyçš„å”¯ä¸€æ€§</strong>ã€‚å¹¶ä¸”ä»–ä»¬éƒ½ä¸å¯å˜ï¼Œå¯ä»¥å°†å®ƒä»¬çš„hashå€¼<strong>ç¼“å­˜ä¸‹æ¥ï¼Œæé«˜æ•ˆç‡</strong>ã€‚</p>\n<h3 id=\"HashMap-ä¸-HashTable-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\"><a href=\"#HashMap-ä¸-HashTable-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\" class=\"headerlink\" title=\"HashMap ä¸ HashTable æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\"></a>HashMap ä¸ HashTable æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h3><ol>\n<li><strong>çº¿ç¨‹å®‰å…¨</strong>ï¼š HashMap æ˜¯éçº¿ç¨‹å®‰å…¨çš„ï¼ŒHashTable æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå†…éƒ¨çš„æ–¹æ³•åŸºæœ¬éƒ½ç»è¿‡ <code>synchronized</code> ä¿®é¥°ï¼›</li>\n<li><strong>æ•ˆç‡</strong>ï¼š å› ä¸ºçº¿ç¨‹å®‰å…¨çš„é—®é¢˜ synchronizedï¼ŒHashMap è¦æ¯” HashTable æ•ˆç‡é«˜ä¸€ç‚¹ï¼›</li>\n<li><strong>å¯¹Null key å’ŒNull valueçš„æ”¯æŒ</strong>ï¼š HashMap ä¸­ï¼Œnull å¯ä»¥ä½œä¸ºé”®ï¼Œè¿™æ ·çš„é”®åªæœ‰ä¸€ä¸ªï¼Œå¯ä»¥æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªé”®æ‰€å¯¹åº”çš„å€¼ä¸º nullã€‚ä½†æ˜¯åœ¨ HashTable ä¸­ put è¿›çš„é”®å€¼åªè¦æœ‰ä¸€ä¸ª nullï¼Œç›´æ¥æŠ›NullPointerExceptionï¼›</li>\n<li>**åˆå§‹å®¹é‡å¤§å°å’Œæ¯æ¬¡æ‰©å……å®¹é‡å¤§å°çš„ä¸åŒ **ï¼š<br> â‘ åˆ›å»ºæ—¶å¦‚æœä¸æŒ‡å®šå®¹é‡åˆå§‹å€¼ï¼ŒHashTable é»˜è®¤çš„åˆå§‹å¤§å°ä¸º11ï¼Œä¹‹åæ¯æ¬¡æ‰©å……ï¼Œå®¹é‡å˜ä¸ºåŸæ¥çš„2n+1ã€‚HashMap é»˜è®¤çš„åˆå§‹åŒ–å¤§å°ä¸º16ã€‚ä¹‹åæ¯æ¬¡æ‰©å……ï¼Œå®¹é‡å˜ä¸ºåŸæ¥çš„2å€ï¼›<br> â‘¡åˆ›å»ºæ—¶å¦‚æœç»™å®šäº†å®¹é‡åˆå§‹å€¼ï¼Œé‚£ä¹ˆ HashTable ä¼šç›´æ¥ä½¿ç”¨ä½ ç»™å®šçš„å¤§å°ï¼Œè€Œ HashMap ä¼šå°†å…¶æ‰©å……ä¸º2çš„å¹‚æ¬¡æ–¹å¤§å°ã€‚ä¹Ÿå°±æ˜¯è¯´ HashMap æ€»æ˜¯ä½¿ç”¨2çš„å¹‚ä½œä¸ºå“ˆå¸Œè¡¨çš„å¤§å°ï¼›</li>\n<li><strong>åº•å±‚æ•°æ®ç»“æ„</strong>ï¼š JDK1.8 ä»¥åçš„ HashMap åœ¨è§£å†³å“ˆå¸Œå†²çªæ—¶æœ‰äº†è¾ƒå¤§çš„å˜åŒ–ï¼Œå½“é“¾è¡¨é•¿åº¦å¤§äºé˜ˆå€¼ï¼ˆé»˜è®¤ä¸º8ï¼‰æ—¶ï¼Œå°†é“¾è¡¨è½¬åŒ–ä¸ºçº¢é»‘æ ‘ï¼Œä»¥å‡å°‘æœç´¢æ—¶é—´ã€‚HashTable æ²¡æœ‰è¿™æ ·çš„æœºåˆ¶ã€‚</li>\n</ol>\n<h3 id=\"ConcurrentHashMap-å’Œ-HashTable-çš„åŒºåˆ«ï¼Ÿ\"><a href=\"#ConcurrentHashMap-å’Œ-HashTable-çš„åŒºåˆ«ï¼Ÿ\" class=\"headerlink\" title=\"ConcurrentHashMap å’Œ HashTable çš„åŒºåˆ«ï¼Ÿ\"></a>ConcurrentHashMap å’Œ HashTable çš„åŒºåˆ«ï¼Ÿ</h3><p>ConcurrentHashMap å’Œ HashTable çš„åŒºåˆ«ä¸»è¦ä½“ç°åœ¨å®ç°çº¿ç¨‹å®‰å…¨çš„æ–¹å¼ä¸Šä¸åŒã€‚</p>\n<ul>\n<li><strong>åº•å±‚æ•°æ®ç»“æ„</strong>ï¼š<br>  JDK1.7çš„ ConcurrentHashMap åº•å±‚é‡‡ç”¨ <strong>åˆ†æ®µçš„æ•°ç»„+é“¾è¡¨</strong> å®ç°ï¼ŒJDK1.8 é‡‡ç”¨çš„æ•°æ®ç»“æ„è·ŸHashMap1.8çš„ç»“æ„ä¸€æ ·ï¼Œæ•°ç»„+é“¾è¡¨&#x2F;çº¢é»‘äºŒå‰æ ‘ã€‚<br>  HashTable å’Œ JDK1.8 ä¹‹å‰çš„ HashMap çš„åº•å±‚æ•°æ®ç»“æ„ç±»ä¼¼éƒ½æ˜¯é‡‡ç”¨ <strong>æ•°ç»„+é“¾è¡¨</strong> çš„å½¢å¼ï¼Œæ•°ç»„æ˜¯ HashMap çš„ä¸»ä½“ï¼Œé“¾è¡¨åˆ™æ˜¯ä¸»è¦ä¸ºäº†è§£å†³å“ˆå¸Œå†²çªè€Œå­˜åœ¨çš„ï¼›</li>\n<li><strong>å®ç°çº¿ç¨‹å®‰å…¨çš„æ–¹å¼ï¼ˆé‡è¦ï¼‰</strong>ï¼š<br>  â‘  <strong>åœ¨JDK1.7çš„æ—¶å€™ï¼ŒConcurrentHashMapä½¿ç”¨åˆ†æ®µé”</strong> å¯¹æ•´ä¸ªæ¡¶æ•°ç»„è¿›è¡Œäº†åˆ†å‰²åˆ†æ®µ(Segmenté”ç»§æ‰¿ReentrantLock)ï¼Œæ¯ä¸€æŠŠé”åªé”å®¹å™¨å…¶ä¸­ä¸€éƒ¨åˆ†æ•°æ®ï¼Œå¤šçº¿ç¨‹è®¿é—®å®¹å™¨é‡Œä¸åŒæ•°æ®æ®µçš„æ•°æ®ï¼Œå°±ä¸ä¼šå­˜åœ¨é”ç«äº‰ï¼Œæé«˜å¹¶å‘è®¿é—®ç‡ã€‚ï¼ˆé»˜è®¤åˆ†é…16ä¸ªSegmentï¼Œæ¯”HashTableæ•ˆç‡æé«˜16å€ã€‚ï¼‰<br>  <strong>åˆ°äº† JDK1.8 çš„æ—¶å€™å·²ç»æ‘’å¼ƒäº†Segmentçš„æ¦‚å¿µï¼Œè€Œæ˜¯ç›´æ¥ç”¨ Node æ•°ç»„+é“¾è¡¨+çº¢é»‘æ ‘çš„æ•°æ®ç»“æ„æ¥å®ç°ï¼Œå¹¶å‘æ§åˆ¶ä½¿ç”¨ synchronized å’Œ CAS æ¥æ“ä½œï¼Œsynchronizedåªé”å®šå½“å‰é“¾è¡¨æˆ–çº¢é»‘æ ‘çš„é¦–èŠ‚ç‚¹ã€‚ï¼ˆJDK1.6ä»¥å å¯¹ synchronizedé”åšäº†å¾ˆå¤šä¼˜åŒ–ï¼‰</strong> æ•´ä¸ªçœ‹èµ·æ¥å°±åƒæ˜¯ä¼˜åŒ–è¿‡ä¸”çº¿ç¨‹å®‰å…¨çš„ HashMap<br>  â‘¡ <strong>HashTable(å…¨è¡¨é”)</strong> :ä½¿ç”¨ synchronized æ¥ä¿è¯çº¿ç¨‹å®‰å…¨ï¼Œæ•ˆç‡éå¸¸ä½ä¸‹ã€‚å½“ä¸€ä¸ªçº¿ç¨‹è®¿é—®åŒæ­¥æ–¹æ³•æ—¶ï¼Œå…¶ä»–çº¿ç¨‹ä¹Ÿè®¿é—®åŒæ­¥æ–¹æ³•ï¼Œå¯èƒ½ä¼šè¿›å…¥é˜»å¡æˆ–è½®è¯¢çŠ¶æ€ï¼Œå¦‚ä½¿ç”¨ put æ·»åŠ å…ƒç´ ï¼Œå¦ä¸€ä¸ªçº¿ç¨‹ä¸èƒ½ä½¿ç”¨ put æ·»åŠ å…ƒç´ ï¼Œä¹Ÿä¸èƒ½ä½¿ç”¨ getï¼Œç«äº‰ä¼šè¶Šæ¥è¶Šæ¿€çƒˆæ•ˆç‡è¶Šä½ã€‚</li>\n<li>â­<strong>Jdk1.7é‡‡ç”¨åˆ†æ®µé”ï¼Œé”ç²’åº¦è¾ƒå¤§ï¼Œå®¹æ˜“å‘ç”Ÿå†²çªï¼Œå¹¶å‘é‡ä½ï¼›å› æ­¤ Jdk1.8 é‡‡ç”¨åªé”å®šæ¡¶çš„é¦–ç»“ç‚¹ï¼Œé”çš„åŠ›åº¦è¾ƒä½ï¼Œä¸å®¹æ˜“å‘ç”Ÿå†²çªï¼Œå¹¶å‘é‡é«˜ã€‚</strong></li>\n</ul>\n<p><strong>ä¸¤è€…çš„å¯¹æ¯”å›¾</strong>ï¼š</p>\n<p>HashTable:</p>\n<p><img src=\"https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/TyporaNotesaHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAxOC84LzIzLzE2NTY2NzdhNmYyNTYxOTY.png\" alt=\"HashTableå…¨è¡¨é”\"></p>\n<p>JDK1.7çš„ConcurrentHashMapï¼š</p>\n<p><img src=\"https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/TyporaNotesaHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAxOC84LzIzLzE2NTY2NzdhNmYwMDhiZTQ.png\" alt=\"JDK1.7çš„ConcurrentHashMapåˆ†æ®µé”\"></p>\n<p>JDK1.8çš„ConcurrentHashMapï¼ˆTreeBin: çº¢é»‘äºŒå‰æ ‘èŠ‚ç‚¹ Node: é“¾è¡¨èŠ‚ç‚¹ï¼‰ï¼š</p>\n<p><img src=\"https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/TyporaNotesaHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAxOC84LzIzLzE2NTY2NzdhNmYxNGUwMzk.png\" alt=\"JDK1.8çš„ConcurrentHashMapåˆ†æ®µé”\"></p>\n","site":{"data":{}},"length":21285,"excerpt":"<blockquote>\n<p>æ•´ç†çš„Javaé›†åˆç›¸å…³çŸ¥è¯†ç‚¹å’Œé¢è¯•é¢˜ï¼Œéƒ¨åˆ†å†…å®¹æ‘˜è‡ªç½‘ç»œï¼Œå¦‚æœ‰ä¾µæƒè¯·è”ç³»æˆ‘ï½","more":"</p>\n</blockquote>\n<h2 id=\"é›†åˆå®¹å™¨æ¦‚è¿°\"><a href=\"#é›†åˆå®¹å™¨æ¦‚è¿°\" class=\"headerlink\" title=\"é›†åˆå®¹å™¨æ¦‚è¿°\"></a>é›†åˆå®¹å™¨æ¦‚è¿°</h2><h3 id=\"ä»€ä¹ˆæ˜¯é›†åˆ\"><a href=\"#ä»€ä¹ˆæ˜¯é›†åˆ\" class=\"headerlink\" title=\"ä»€ä¹ˆæ˜¯é›†åˆ\"></a>ä»€ä¹ˆæ˜¯é›†åˆ</h3><p>ç”¨äºå­˜å‚¨æ•°æ®çš„å®¹å™¨ã€‚</p>\n<h3 id=\"é›†åˆå’Œæ•°ç»„çš„åŒºåˆ«\"><a href=\"#é›†åˆå’Œæ•°ç»„çš„åŒºåˆ«\" class=\"headerlink\" title=\"é›†åˆå’Œæ•°ç»„çš„åŒºåˆ«\"></a>é›†åˆå’Œæ•°ç»„çš„åŒºåˆ«</h3><ul>\n<li>æ•°ç»„æ˜¯å›ºå®šé•¿åº¦çš„ï¼›é›†åˆå¯å˜é•¿åº¦çš„ã€‚</li>\n<li>æ•°ç»„å¯ä»¥å­˜å‚¨åŸºæœ¬æ•°æ®ç±»å‹ï¼Œä¹Ÿå¯ä»¥å­˜å‚¨å¼•ç”¨æ•°æ®ç±»å‹ï¼›é›†åˆåªèƒ½å­˜å‚¨å¼•ç”¨æ•°æ®ç±»å‹ã€‚</li>\n</ul>\n<h3 id=\"å¸¸ç”¨çš„é›†åˆç±»æœ‰å“ªäº›ï¼Ÿ\"><a href=\"#å¸¸ç”¨çš„é›†åˆç±»æœ‰å“ªäº›ï¼Ÿ\" class=\"headerlink\" title=\"å¸¸ç”¨çš„é›†åˆç±»æœ‰å“ªäº›ï¼Ÿ\"></a>å¸¸ç”¨çš„é›†åˆç±»æœ‰å“ªäº›ï¼Ÿ</h3><p>Collectionæ¥å£å’ŒMapæ¥å£æ˜¯æ‰€æœ‰é›†åˆæ¡†æ¶çš„çˆ¶æ¥å£ã€‚</p>\n<p>Collectionæ¥å£ï¼šå­æ¥å£åŒ…æ‹¬Setæ¥å£å’ŒListæ¥å£</p>\n<ol>\n<li>Setæ¥å£çš„å®ç°ç±»ä¸»è¦æœ‰ï¼šHashSetã€TreeSetã€LinkedHashSetç­‰ï¼›</li>\n<li>Listæ¥å£çš„å®ç°ç±»ä¸»è¦æœ‰ï¼šArrayListã€LinkedListã€Stackä»¥åŠVectorç­‰ã€‚</li>\n</ol>\n<p>Mapæ¥å£ï¼šå®ç°ç±»ä¸»è¦æœ‰HashMapã€TreeMapã€HashTableã€ConcurrentHashMapä»¥åŠPropertiesç­‰ã€‚</p>\n<h3 id=\"Listã€Setã€Mapä¸‰è€…çš„åŒºåˆ«ï¼Ÿ\"><a href=\"#Listã€Setã€Mapä¸‰è€…çš„åŒºåˆ«ï¼Ÿ\" class=\"headerlink\" title=\"Listã€Setã€Mapä¸‰è€…çš„åŒºåˆ«ï¼Ÿ\"></a>Listã€Setã€Mapä¸‰è€…çš„åŒºåˆ«ï¼Ÿ</h3><p><img src=\"https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/TyporaNotesaHR0cHM6Ly9pbWcyMDE4LmNuYmxvZ3MuY29tL290aGVyLzE0MDgxODMvMjAxOTExLzE0MDgxODMtMjAxOTExMTkxODQxNDk1NTktMTU3MTU5NTY2OC5qcGc.png\" alt=\"Collectionæ¶æ„\"></p>\n<p>Listå’ŒSetä¸¤å¤§æ¥å£æ˜¯Collectionçš„å­æ¥å£</p>\n<ul>\n<li><p>Listï¼šæœ‰åºå®¹å™¨ï¼Œå…ƒç´ å¯ä»¥é‡å¤ï¼Œå¯ä»¥æ’å…¥å¤šä¸ªnullå…ƒç´ ï¼Œå…ƒç´ éƒ½æœ‰ç´¢å¼•ï¼›<br>  å¸¸ç”¨å®ç°ç±»ï¼šArrayListã€LinkedList å’Œ Vectorã€‚</p>\n</li>\n<li><p>Setï¼šæ— åºå®¹å™¨ï¼Œä¸å¯ä»¥å­˜å‚¨é‡å¤å…ƒç´ ï¼Œåªå…è®¸å­˜å…¥ä¸€ä¸ªnullå…ƒç´ ï¼Œå¿…é¡»ä¿è¯å…ƒç´ å”¯ä¸€æ€§ï¼›</p>\n<p>  å¸¸ç”¨å®ç°ç±»ï¼šHashSetã€LinkedHashSet ä»¥åŠ TreeSetã€‚</p>\n</li>\n</ul>\n<ul>\n<li><p>Mapæ˜¯ä¸€ä¸ªé”®å€¼å¯¹é›†åˆï¼Œå­˜å‚¨é”®ã€å€¼å’Œä¹‹é—´çš„æ˜ å°„ã€‚ keyæ— åºï¼Œå”¯ä¸€ï¼›value ä¸è¦æ±‚æœ‰åºï¼Œå…è®¸é‡å¤ï¼›</p>\n<p>  å¸¸ç”¨å®ç°ç±»ï¼šHashMapã€TreeMapã€HashTableã€LinkedHashMapã€ConcurrentHashMapã€‚</p>\n</li>\n</ul>\n<h3 id=\"é›†åˆæ¡†æ¶åº•å±‚æ•°æ®ç»“æ„\"><a href=\"#é›†åˆæ¡†æ¶åº•å±‚æ•°æ®ç»“æ„\" class=\"headerlink\" title=\"é›†åˆæ¡†æ¶åº•å±‚æ•°æ®ç»“æ„\"></a>é›†åˆæ¡†æ¶åº•å±‚æ•°æ®ç»“æ„</h3><h4 id=\"Collection\"><a href=\"#Collection\" class=\"headerlink\" title=\"Collection\"></a>Collection</h4><ol>\n<li>List</li>\n</ol>\n<ul>\n<li>Arraylistï¼š Objectæ•°ç»„</li>\n<li>Vectorï¼š Objectæ•°ç»„</li>\n<li>LinkedListï¼š åŒå‘é“¾è¡¨</li>\n</ul>\n<ol start=\"2\">\n<li>Set</li>\n</ol>\n<ul>\n<li>HashSetï¼ˆæ— åºï¼Œå”¯ä¸€ï¼‰ï¼šåŸºäº HashMap å®ç°çš„ï¼Œåº•å±‚é‡‡ç”¨ HashMap æ¥ä¿å­˜å…ƒç´ </li>\n<li>LinkedHashSetï¼š LinkedHashSet ç»§æ‰¿äº HashSetï¼Œå¹¶ä¸”å…¶å†…éƒ¨æ˜¯é€šè¿‡ LinkedHashMap æ¥å®ç°çš„ã€‚</li>\n<li>TreeSetï¼ˆæœ‰åºï¼Œå”¯ä¸€ï¼‰ï¼š çº¢é»‘æ ‘(è‡ªå¹³è¡¡çš„æ’åºäºŒå‰æ ‘)</li>\n</ul>\n<h4 id=\"Map\"><a href=\"#Map\" class=\"headerlink\" title=\"Map\"></a>Map</h4><ul>\n<li>HashMapï¼š JDK1.8ä¹‹å‰HashMapç”±æ•°ç»„+é“¾è¡¨ç»„æˆçš„ï¼Œæ•°ç»„æ˜¯HashMapçš„ä¸»ä½“ï¼Œé“¾è¡¨åˆ™æ˜¯ä¸»è¦ä¸ºäº†è§£å†³å“ˆå¸Œå†²çªè€Œå­˜åœ¨çš„ï¼ˆâ€œæ‹‰é“¾æ³•â€è§£å†³å†²çªï¼‰ã€‚JDK1.8ä»¥ååœ¨è§£å†³å“ˆå¸Œå†²çªæ—¶æœ‰äº†è¾ƒå¤§çš„å˜åŒ–ï¼Œå½“é“¾è¡¨é•¿åº¦å¤§äºé˜ˆå€¼ï¼ˆé»˜è®¤ä¸º8ï¼‰ï¼Œä¸”æ•°ç»„é•¿åº¦å¤§äº 64ï¼Œå°†é“¾è¡¨è½¬åŒ–ä¸ºçº¢é»‘æ ‘ï¼Œä»¥å‡å°‘æœç´¢æ—¶é—´ï¼Œå¦åˆ™æ‰©å®¹æ•°ç»„ã€‚</li>\n<li>LinkedHashMapï¼šLinkedHashMap ç»§æ‰¿è‡ª HashMapï¼Œæ‰€ä»¥å®ƒçš„åº•å±‚ç”±æ•°ç»„å’Œé“¾è¡¨æˆ–çº¢é»‘æ ‘ç»„æˆã€‚å¦å¤–ï¼ŒLinkedHashMap åœ¨ä¸Šé¢ç»“æ„çš„åŸºç¡€ä¸Šï¼Œå¢åŠ äº†ä¸€æ¡åŒå‘é“¾è¡¨ï¼Œä½¿å¾—ä¸Šé¢çš„ç»“æ„å¯ä»¥ä¿æŒé”®å€¼å¯¹çš„æ’å…¥é¡ºåºã€‚åŒæ—¶é€šè¿‡å¯¹é“¾è¡¨è¿›è¡Œç›¸åº”çš„æ“ä½œï¼Œå®ç°äº†è®¿é—®é¡ºåºç›¸å…³é€»è¾‘ã€‚</li>\n<li>HashTableï¼š æ•°ç»„+é“¾è¡¨ç»„æˆçš„ï¼Œæ•°ç»„æ˜¯ HashMap çš„ä¸»ä½“ï¼Œé“¾è¡¨åˆ™æ˜¯ä¸»è¦ä¸ºäº†è§£å†³å“ˆå¸Œå†²çªè€Œå­˜åœ¨çš„</li>\n<li>TreeMapï¼š çº¢é»‘æ ‘ï¼ˆè‡ªå¹³è¡¡çš„æ’åºäºŒå‰æ ‘ï¼‰</li>\n</ul>\n<h3 id=\"å“ªäº›é›†åˆç±»æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Ÿ\"><a href=\"#å“ªäº›é›†åˆç±»æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Ÿ\" class=\"headerlink\" title=\"å“ªäº›é›†åˆç±»æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Ÿ\"></a>å“ªäº›é›†åˆç±»æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Ÿ</h3><p>vector å’Œ hashtableï¼Œé€šè¿‡åœ¨æ–¹æ³•ä¸ŠåŠ  synchronized å…³é”®å­—å®ç°çº¿ç¨‹å®‰å…¨</p>\n<h3 id=\"Javaé›†åˆçš„å¿«é€Ÿå¤±è´¥æœºåˆ¶-â€œfail-fastâ€ï¼Ÿ\"><a href=\"#Javaé›†åˆçš„å¿«é€Ÿå¤±è´¥æœºåˆ¶-â€œfail-fastâ€ï¼Ÿ\" class=\"headerlink\" title=\"Javaé›†åˆçš„å¿«é€Ÿå¤±è´¥æœºåˆ¶ â€œfail-fastâ€ï¼Ÿ\"></a>Javaé›†åˆçš„å¿«é€Ÿå¤±è´¥æœºåˆ¶ â€œfail-fastâ€ï¼Ÿ</h3><p>fail-fastæ˜¯Javaé›†åˆçš„ä¸€ç§<strong>é”™è¯¯æ£€æµ‹æœºåˆ¶</strong>ï¼Œå½“å¤šä¸ªçº¿ç¨‹å¯¹åŒä¸€ä¸ªé›†åˆçš„å†…å®¹è¿›è¡Œæ“ä½œæ—¶ï¼Œå°±å¯èƒ½ä¼šäº§ç”Ÿfail-fastäº‹ä»¶ã€‚</p>\n<p>ä¾‹å¦‚ï¼šå‡è®¾å­˜åœ¨ä¸¤ä¸ªçº¿ç¨‹ï¼ˆçº¿ç¨‹1ã€çº¿ç¨‹2ï¼‰ï¼Œçº¿ç¨‹1é€šè¿‡Iteratoråœ¨éå†é›†åˆAä¸­çš„å…ƒç´ ï¼Œåœ¨æŸä¸ªæ—¶å€™çº¿ç¨‹2ä¿®æ”¹äº†é›†åˆAçš„ç»“æ„ï¼ˆaddã€removeã€clearç­‰ç»“æ„ä¸Šçš„ä¿®æ”¹ï¼Œè€Œä¸æ˜¯ç®€å•çš„ä¿®æ”¹é›†åˆå…ƒç´ çš„å†…å®¹ï¼‰ï¼Œé‚£ä¹ˆè¿™ä¸ªæ—¶å€™ç¨‹åºå°±ä¼šæŠ›å‡º <strong>ConcurrentModificationException</strong> å¼‚å¸¸ï¼Œä»è€Œäº§ç”Ÿfail-fastäº‹ä»¶ã€‚</p>\n<p>åŸå› ï¼šè¿­ä»£å™¨åœ¨éå†æ—¶ç›´æ¥è®¿é—®é›†åˆä¸­çš„å†…å®¹ï¼Œå¹¶ä¸”åœ¨éå†è¿‡ç¨‹ä¸­ä½¿ç”¨ä¸€ä¸ª modCount å˜é‡ã€‚æ¯å½“è¿­ä»£å™¨ä½¿ç”¨hashNext()&#x2F;next()éå†ä¸‹ä¸€ä¸ªå…ƒç´ ä¹‹å‰ï¼Œéƒ½ä¼šæ£€æµ‹modCountå˜é‡æ˜¯å¦ä¸ºexpectedmodCountå€¼ï¼Œæ˜¯çš„è¯å°±è¿”å›éå†ï¼›å¦åˆ™æŠ›å‡ºå¼‚å¸¸ï¼Œç»ˆæ­¢éå†ã€‚é›†åˆåœ¨è¢«éå†æœŸé—´å¦‚æœå†…å®¹å‘ç”Ÿå˜åŒ–ï¼Œå°±ä¼šæ”¹å˜modCountçš„å€¼ï¼Œä»è€ŒmodCountä¸ç­‰äºexpectedmodCountå€¼æŠ›å‡ºå¼‚å¸¸ï¼Œä¹Ÿå°±æ˜¯äº§ç”Ÿäº†fail-fastäº‹ä»¶ã€‚</p>\n<p>è§£å†³åŠæ³•ï¼š</p>\n<ol>\n<li>åœ¨éå†è¿‡ç¨‹ä¸­ï¼Œæ‰€æœ‰æ¶‰åŠåˆ°æ”¹å˜modCountå€¼çš„åœ°æ–¹å…¨éƒ¨åŠ ä¸Šsynchronizedï¼›</li>\n<li>ä½¿ç”¨Java.util.concurrentä¸‹çš„CopyOnWriteArrayListæ¥æ›¿æ¢ArrayListï¼›</li>\n<li>ä½¿ç”¨Java.util.concurrentä¸‹çš„ConcurrentHashMapæ¥æ›¿æ¢HashMapã€‚</li>\n</ol>\n<h3 id=\"æ€ä¹ˆç¡®ä¿ä¸€ä¸ªé›†åˆä¸èƒ½è¢«ä¿®æ”¹ï¼Ÿ\"><a href=\"#æ€ä¹ˆç¡®ä¿ä¸€ä¸ªé›†åˆä¸èƒ½è¢«ä¿®æ”¹ï¼Ÿ\" class=\"headerlink\" title=\"æ€ä¹ˆç¡®ä¿ä¸€ä¸ªé›†åˆä¸èƒ½è¢«ä¿®æ”¹ï¼Ÿ\"></a>æ€ä¹ˆç¡®ä¿ä¸€ä¸ªé›†åˆä¸èƒ½è¢«ä¿®æ”¹ï¼Ÿ</h3><p>å¯ä»¥ä½¿ç”¨ Collections. unmodifiableCollection(Collection c) æ–¹æ³•æ¥åˆ›å»ºä¸€ä¸ªåªè¯»é›†åˆï¼Œè¿™æ ·æ”¹å˜é›†åˆçš„ä»»ä½•æ“ä½œéƒ½ä¼šæŠ›å‡º Java. lang. UnsupportedOperationException å¼‚å¸¸ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">List&lt;String&gt; list = <span class=\"keyword\">new</span> <span class=\"title class_\">ArrayList</span>&lt;&gt;();</span><br><span class=\"line\">list. add(<span class=\"string\">&quot;x&quot;</span>);</span><br><span class=\"line\">Collection&lt;String&gt; clist = Collections. unmodifiableCollection(list);</span><br><span class=\"line\">clist.add(<span class=\"string\">&quot;y&quot;</span>); <span class=\"comment\">// è¿è¡Œæ—¶æ­¤è¡ŒæŠ¥é”™</span></span><br><span class=\"line\">System.out.println(list. size());</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Collectionæ¥å£\"><a href=\"#Collectionæ¥å£\" class=\"headerlink\" title=\"Collectionæ¥å£\"></a>Collectionæ¥å£</h2><h3 id=\"Listæ¥å£\"><a href=\"#Listæ¥å£\" class=\"headerlink\" title=\"Listæ¥å£\"></a>Listæ¥å£</h3><h4 id=\"è¿­ä»£å™¨-Iterator-æ˜¯ä»€ä¹ˆï¼Ÿ\"><a href=\"#è¿­ä»£å™¨-Iterator-æ˜¯ä»€ä¹ˆï¼Ÿ\" class=\"headerlink\" title=\"è¿­ä»£å™¨ Iterator æ˜¯ä»€ä¹ˆï¼Ÿ\"></a>è¿­ä»£å™¨ Iterator æ˜¯ä»€ä¹ˆï¼Ÿ</h4><p>Collectionæ¥å£å®ç°äº†Iterableæ¥å£ï¼Œé€šè¿‡å®ç°Iterableæ¥å£ä¸­çš„iterator()æ–¹æ³•è¿”å›Iteratoræ¥å£çš„å®ä¾‹ï¼Œé€šè¿‡iteratorå¯¹é›†åˆçš„å…ƒç´ è¿›è¡Œè¿­ä»£æ“ä½œã€‚</p>\n<h4 id=\"Iterator-æ€ä¹ˆä½¿ç”¨ï¼Ÿæœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼Ÿ\"><a href=\"#Iterator-æ€ä¹ˆä½¿ç”¨ï¼Ÿæœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼Ÿ\" class=\"headerlink\" title=\"Iterator æ€ä¹ˆä½¿ç”¨ï¼Ÿæœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼Ÿ\"></a>Iterator æ€ä¹ˆä½¿ç”¨ï¼Ÿæœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼Ÿ</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">List&lt;String&gt; list = <span class=\"keyword\">new</span> <span class=\"title class_\">ArrayList</span>&lt;&gt;();</span><br><span class=\"line\">Iterator&lt;String&gt; it = list.iterator();</span><br><span class=\"line\"><span class=\"keyword\">while</span>(it.hasNext())&#123;</span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">obj</span> <span class=\"operator\">=</span> it.next();</span><br><span class=\"line\">    System.out.println(obj);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>Iterator çš„ç‰¹ç‚¹æ˜¯åªèƒ½å•å‘éå†ï¼Œä½†æ˜¯æ›´åŠ å®‰å…¨ï¼Œå› ä¸ºå®ƒå¯ä»¥ç¡®ä¿ï¼Œåœ¨å½“å‰éå†çš„é›†åˆå…ƒç´ è¢«æ›´æ”¹çš„æ—¶å€™ï¼Œå°±ä¼šæŠ›å‡º ConcurrentModificationException å¼‚å¸¸ã€‚</p>\n<h4 id=\"å¦‚ä½•è¾¹éå†è¾¹ç§»é™¤-Collection-ä¸­çš„å…ƒç´ ï¼Ÿ\"><a href=\"#å¦‚ä½•è¾¹éå†è¾¹ç§»é™¤-Collection-ä¸­çš„å…ƒç´ ï¼Ÿ\" class=\"headerlink\" title=\"å¦‚ä½•è¾¹éå†è¾¹ç§»é™¤ Collection ä¸­çš„å…ƒç´ ï¼Ÿ\"></a>å¦‚ä½•è¾¹éå†è¾¹ç§»é™¤ Collection ä¸­çš„å…ƒç´ ï¼Ÿ</h4><p>è¾¹éå†è¾¹ä¿®æ”¹ Collection çš„å”¯ä¸€æ­£ç¡®æ–¹å¼æ˜¯ä½¿ç”¨ Iterator.remove() æ–¹æ³•ï¼Œå¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Iterator&lt;Integer&gt; it = list.iterator();</span><br><span class=\"line\"><span class=\"keyword\">while</span>(it.hasNext())&#123;</span><br><span class=\"line\">   <span class=\"comment\">// do something</span></span><br><span class=\"line\">   it.remove();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ä¸€ç§æœ€å¸¸è§çš„<strong>é”™è¯¯</strong>ä»£ç å¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">List&lt;String&gt; list = <span class=\"keyword\">new</span> <span class=\"title class_\">ArrayList</span>&lt;&gt;();</span><br><span class=\"line\">list.add(<span class=\"string\">&quot;1&quot;</span>);</span><br><span class=\"line\">list.add(<span class=\"string\">&quot;2&quot;</span>);</span><br><span class=\"line\">list.add(<span class=\"string\">&quot;3&quot;</span>);</span><br><span class=\"line\">list.add(<span class=\"string\">&quot;4&quot;</span>);</span><br><span class=\"line\">list.add(<span class=\"string\">&quot;5&quot;</span>);</span><br><span class=\"line\"><span class=\"type\">int</span> <span class=\"variable\">cnt</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>;</span><br><span class=\"line\"><span class=\"keyword\">for</span> (String item : list) &#123;</span><br><span class=\"line\">  System.out.println(++cnt);</span><br><span class=\"line\">  list.remove(item);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">System.out.println(Arrays.toString(list.toArray()));</span><br></pre></td></tr></table></figure>\n\n<p>è¿è¡Œä»¥ä¸Šé”™è¯¯ä»£ç ä¼šæŠ¥ <strong>ConcurrentModificationException å¼‚å¸¸</strong>ã€‚<br>è¿™æ˜¯å› ä¸ºå½“ä½¿ç”¨ foreach(for(Integer i : list)) è¯­å¥æ—¶ï¼Œä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªiterator æ¥éå†è¯¥ listï¼Œä½†åŒæ—¶è¯¥ list æ­£åœ¨è¢« Iterator.remove() ä¿®æ”¹ã€‚é›†åˆå‘ç”Ÿç»“æ„æ€§å˜åŒ–ï¼Œæ ¹æ®fail-fastæœºåˆ¶ï¼Œä¼šæŠ›å¼‚å¸¸ã€‚</p>\n<h4 id=\"éå†ä¸€ä¸ª-List-æœ‰å“ªäº›ä¸åŒçš„æ–¹å¼ï¼Ÿ\"><a href=\"#éå†ä¸€ä¸ª-List-æœ‰å“ªäº›ä¸åŒçš„æ–¹å¼ï¼Ÿ\" class=\"headerlink\" title=\"éå†ä¸€ä¸ª List æœ‰å“ªäº›ä¸åŒçš„æ–¹å¼ï¼Ÿ\"></a>éå†ä¸€ä¸ª List æœ‰å“ªäº›ä¸åŒçš„æ–¹å¼ï¼Ÿ</h4><ol>\n<li>for å¾ªç¯ï¼Œç»´æŠ¤ä¸€ä¸ªè®¡æ•°å™¨ï¼›</li>\n<li>è¿­ä»£å™¨ï¼ŒIteratorã€‚Collectionæ¥å£å®ç°äº†Iterableæ¥å£ï¼Œé€šè¿‡å®ç°Iterableæ¥å£ä¸­çš„iterator()æ–¹æ³•è¿”å›Iteratoræ¥å£çš„å®ä¾‹ï¼Œé€šè¿‡iteratorå¯¹é›†åˆçš„å…ƒç´ è¿›è¡Œè¿­ä»£æ“ä½œï¼›</li>\n<li>å¢å¼ºforå¾ªç¯ã€‚å¢å¼ºforå¾ªç¯foreach å†…éƒ¨ä¹Ÿæ˜¯é‡‡ç”¨äº† Iterator çš„æ–¹å¼å®ç°ï¼Œä½¿ç”¨æ—¶ä¸éœ€è¦æ˜¾å¼å£°æ˜ Iterator æˆ–è®¡æ•°å™¨ã€‚<br> ä¼˜ç‚¹æ˜¯ä»£ç ç®€æ´ï¼Œä¸æ˜“å‡ºé”™ï¼›ç¼ºç‚¹æ˜¯åªèƒ½åšç®€å•çš„éå†ï¼Œä¸èƒ½åœ¨éå†è¿‡ç¨‹ä¸­æ“ä½œæ•°æ®é›†åˆï¼Œä¾‹å¦‚åˆ é™¤ã€æ›¿æ¢ã€‚</li>\n</ol>\n<h4 id=\"è¯´ä¸€ä¸‹-ArrayList-çš„ä¼˜ç¼ºç‚¹\"><a href=\"#è¯´ä¸€ä¸‹-ArrayList-çš„ä¼˜ç¼ºç‚¹\" class=\"headerlink\" title=\"è¯´ä¸€ä¸‹ ArrayList çš„ä¼˜ç¼ºç‚¹\"></a>è¯´ä¸€ä¸‹ ArrayList çš„ä¼˜ç¼ºç‚¹</h4><p><strong>ArrayList æ¯”è¾ƒé€‚åˆé¡ºåºæ·»åŠ ã€éšæœºè®¿é—®çš„åœºæ™¯ã€‚</strong></p>\n<p>ArrayListçš„ä¼˜ç‚¹å¦‚ä¸‹ï¼š</p>\n<ul>\n<li>ArrayList åº•å±‚ä»¥æ•°ç»„å®ç°ï¼Œæ˜¯ä¸€ç§éšæœºè®¿é—®æ¨¡å¼ã€‚ArrayList å®ç°äº† RandomAccess æ¥å£ï¼Œæ ‡è®° List å®ç°æ˜¯å¦æ”¯æŒ Random Accessï¼Œå¯¼è‡´å®ƒå¯ä»¥éšæœºè®¿é—®çš„æ ¹æœ¬åŸå› æ˜¯å®ƒåº•å±‚æ˜¯æ•°ç»„ç»“æ„ï¼Œæ•°ç»„å¯ä»¥é€šè¿‡ä¸‹æ ‡è·å–ç›¸åº”çš„å€¼ï¼Œè€Œ RandomAccess åªæ˜¯ä¸€ä¸ªæ ‡è®°ã€‚å› æ­¤æŸ¥æ‰¾çš„æ—¶å€™éå¸¸å¿«ã€‚å¯ä»¥ç”¨ for å¾ªç¯é€šè¿‡ä¸‹æ ‡è·å–å…ƒç´ ã€‚</li>\n<li>ArrayList åœ¨é¡ºåºæ·»åŠ ä¸€ä¸ªå…ƒç´ çš„æ—¶å€™éå¸¸æ–¹ä¾¿ã€‚</li>\n</ul>\n<p>ArrayList çš„ç¼ºç‚¹å¦‚ä¸‹ï¼š</p>\n<ul>\n<li>å‘<strong>ä¸­é—´æŸä¸ªä½ç½®åˆ é™¤</strong>å…ƒç´ çš„æ—¶å€™ï¼Œéœ€è¦åšå…ƒç´ å¤åˆ¶æ“ä½œã€‚å¦‚æœè¦å¤åˆ¶çš„å…ƒç´ å¾ˆå¤šï¼Œé‚£ä¹ˆå°±ä¼šæ¯”è¾ƒè€—è´¹æ€§èƒ½ï¼›</li>\n<li>å‘<strong>ä¸­é—´æŸä¸ªä½ç½®æ’å…¥</strong>å…ƒç´ çš„æ—¶å€™ï¼Œä¹Ÿéœ€è¦åšå…ƒç´ å¤åˆ¶æ“ä½œï¼Œç¼ºç‚¹åŒä¸Šã€‚</li>\n</ul>\n<h4 id=\"å¦‚ä½•å®ç°æ•°ç»„å’Œ-List-ä¹‹é—´çš„è½¬æ¢ï¼Ÿ\"><a href=\"#å¦‚ä½•å®ç°æ•°ç»„å’Œ-List-ä¹‹é—´çš„è½¬æ¢ï¼Ÿ\" class=\"headerlink\" title=\"å¦‚ä½•å®ç°æ•°ç»„å’Œ List ä¹‹é—´çš„è½¬æ¢ï¼Ÿ\"></a>å¦‚ä½•å®ç°æ•°ç»„å’Œ List ä¹‹é—´çš„è½¬æ¢ï¼Ÿ</h4><ul>\n<li>æ•°ç»„è½¬ Listï¼šä½¿ç”¨ Arrays. asList(array) è¿›è¡Œè½¬æ¢ã€‚</li>\n<li>List è½¬æ•°ç»„ï¼šä½¿ç”¨ List è‡ªå¸¦çš„ toArray() æ–¹æ³•ã€‚</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// list to array</span></span><br><span class=\"line\">List&lt;String&gt; list = <span class=\"keyword\">new</span> <span class=\"title class_\">ArrayList</span>&lt;String&gt;();</span><br><span class=\"line\">list.add(<span class=\"string\">&quot;123&quot;</span>);</span><br><span class=\"line\">list.add(<span class=\"string\">&quot;456&quot;</span>);</span><br><span class=\"line\">list.toArray(<span class=\"keyword\">new</span> <span class=\"title class_\">String</span>[<span class=\"number\">0</span>]);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// array to list</span></span><br><span class=\"line\">String[] array = <span class=\"keyword\">new</span> <span class=\"title class_\">String</span>[]&#123;<span class=\"string\">&quot;123&quot;</span>, <span class=\"string\">&quot;456&quot;</span>&#125;;</span><br><span class=\"line\">Arrays.asList(array);</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"ArrayList-å’Œ-LinkedList-çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ\"><a href=\"#ArrayList-å’Œ-LinkedList-çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ\" class=\"headerlink\" title=\"ArrayList å’Œ LinkedList çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ\"></a>ArrayList å’Œ LinkedList çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</h4><ul>\n<li>åº•å±‚å®ç°ï¼šArrayList æ˜¯åŠ¨æ€æ•°ç»„çš„æ•°æ®ç»“æ„å®ç°ï¼Œè€Œ LinkedList æ˜¯åŒå‘é“¾è¡¨çš„æ•°æ®ç»“æ„å®ç°ï¼›</li>\n<li>è®¿é—®å’Œå¢åˆ å…ƒç´ æ•ˆç‡ï¼šArrayList éšæœºè®¿é—®å’Œé¡ºåºæ’å…¥&#x2F;åˆ é™¤å…ƒç´ æ•ˆç‡æ›´é«˜ï¼›</li>\n<li>å†…å­˜å ç”¨ï¼šLinkedList æ¯” ArrayList æ›´å å†…å­˜ï¼Œå› ä¸º LinkedList çš„èŠ‚ç‚¹é™¤äº†å­˜å‚¨æ•°æ®ï¼Œè¿˜å­˜å‚¨äº†ä¸¤ä¸ªå¼•ç”¨ï¼Œä¸€ä¸ªæŒ‡å‘å‰ä¸€ä¸ªå…ƒç´ ï¼Œä¸€ä¸ªæŒ‡å‘åä¸€ä¸ªå…ƒç´ ï¼›</li>\n<li>çº¿ç¨‹å®‰å…¨ï¼šArrayList å’Œ LinkedList éƒ½æ˜¯ä¸åŒæ­¥çš„ï¼Œä¹Ÿå°±æ˜¯ä¸ä¿è¯çº¿ç¨‹å®‰å…¨ã€‚</li>\n</ul>\n<p>ç»¼åˆæ¥è¯´ï¼Œåœ¨éœ€è¦<strong>é¢‘ç¹è¯»å–</strong>é›†åˆä¸­çš„å…ƒç´ æ—¶ï¼Œæ›´æ¨èä½¿ç”¨ ArrayListï¼Œè€Œåœ¨<strong>æ’å…¥å’Œåˆ é™¤æ“ä½œè¾ƒå¤š</strong>æ—¶ï¼Œæ›´æ¨èä½¿ç”¨ LinkedListã€‚</p>\n<h4 id=\"ArrayList-å’Œ-Vector-çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ\"><a href=\"#ArrayList-å’Œ-Vector-çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ\" class=\"headerlink\" title=\"ArrayList å’Œ Vector çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ\"></a>ArrayList å’Œ Vector çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</h4><p>ä¸»è¦åŒºåˆ«æ˜¯çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼š<br>Vector ä½¿ç”¨äº† synchronized æ¥å®ç°çº¿ç¨‹åŒæ­¥ï¼ˆæ€§èƒ½å·®ï¼‰ï¼Œæ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œè€Œ ArrayList æ˜¯éçº¿ç¨‹å®‰å…¨çš„ã€‚</p>\n<h4 id=\"å¤šçº¿ç¨‹åœºæ™¯ä¸‹å¦‚ä½•ä½¿ç”¨-ArrayListï¼Ÿ\"><a href=\"#å¤šçº¿ç¨‹åœºæ™¯ä¸‹å¦‚ä½•ä½¿ç”¨-ArrayListï¼Ÿ\" class=\"headerlink\" title=\"å¤šçº¿ç¨‹åœºæ™¯ä¸‹å¦‚ä½•ä½¿ç”¨ ArrayListï¼Ÿ\"></a>å¤šçº¿ç¨‹åœºæ™¯ä¸‹å¦‚ä½•ä½¿ç”¨ ArrayListï¼Ÿ</h4><p>å¯ä»¥ç”¨ Java.util.concurrent.CopyOnWriteArrayList æ›¿æ¢ ArrayListã€‚</p>\n<h4 id=\"ä¸ºä»€ä¹ˆ-ArrayList-çš„-elementData-åŠ ä¸Š-transient-ä¿®é¥°ï¼Ÿ\"><a href=\"#ä¸ºä»€ä¹ˆ-ArrayList-çš„-elementData-åŠ ä¸Š-transient-ä¿®é¥°ï¼Ÿ\" class=\"headerlink\" title=\"ä¸ºä»€ä¹ˆ ArrayList çš„ elementData åŠ ä¸Š transient ä¿®é¥°ï¼Ÿ\"></a>ä¸ºä»€ä¹ˆ ArrayList çš„ elementData åŠ ä¸Š transient ä¿®é¥°ï¼Ÿ</h4><p>ArrayList å®ç°äº† Serializable æ¥å£ï¼Œè¿™æ„å‘³ç€ ArrayList æ”¯æŒåºåˆ—åŒ–ã€‚<br>å¯¹äº elementDataï¼Œç”±äº elementData å¯èƒ½æœ‰å¤šä½™çš„å®¹é‡ï¼ˆå®¹é‡ä¸è¶³ä¼šæ‰©å®¹æˆ1.5å€å¤§å°ï¼Œæ‰©å®¹ä¹‹åé™¤äº†æ–°åŠ <br>çš„å…ƒç´ ä»¥å¤–è¿˜æœ‰å¤šçš„ç©ºé—´æ²¡æœ‰æ”¾å…ƒç´ ï¼Œæ¯”å¦‚ç°åœ¨å®¹é‡æ˜¯15ï¼Œè€Œé›†åˆé‡Œé¢åªå­˜äº†11ä¸ªå…ƒç´ ï¼‰ï¼Œä¸å¯¹ elementData åŠ ä¸Š transient ä¿®é¥°ï¼Œè€Œæ˜¯æ‰‹åŠ¨è¿›è¡Œåºåˆ—åŒ–ï¼Œå¯ä»¥ä¿è¯åªåºåˆ—åŒ–å®é™…å­˜å‚¨çš„é‚£äº›å…ƒç´ ï¼ˆ11ä¸ªå…ƒç´ ï¼‰ï¼Œè€Œä¸æ˜¯æ•´ä¸ªæ•°ç»„ï¼Œä»è€ŒèŠ‚çœç©ºé—´å’Œæ—¶é—´ã€‚</p>\n<h3 id=\"â­ArrayListæ‰©å®¹æœºåˆ¶\"><a href=\"#â­ArrayListæ‰©å®¹æœºåˆ¶\" class=\"headerlink\" title=\"â­ArrayListæ‰©å®¹æœºåˆ¶\"></a>â­ArrayListæ‰©å®¹æœºåˆ¶</h3><blockquote>\n<p><strong>æ€»ç»“ï¼š</strong></p>\n<ul>\n<li><p>åˆå§‹åŒ–å¦‚æœä½¿ç”¨æ— å‚æ„é€ å™¨çš„è¯ï¼š</p>\n<p>  åœ¨ç¬¬ä¸€æ¬¡æ·»åŠ å…ƒç´ çš„æ—¶å€™ï¼Œå°†æ•°ç»„å®¹é‡è®¾ç½®ä¸º10ï¼Œç„¶åè¿›è¡Œæ·»åŠ ã€‚</p>\n<p>  ä¸€ç›´æ·»åŠ ï¼Œç›´åˆ°è¦æ·»åŠ çš„å…ƒç´ è¶…å‡ºå½“å‰æ•°ç»„å®¹é‡äº†ï¼Œè¿›å…¥æ‰©å®¹ï¼Œå°†æ•°ç»„é•¿åº¦æ‰©å®¹ä¸º1.5å€é•¿åº¦ï¼Œç„¶åè¿›è¡Œæ·»åŠ ã€‚</p>\n</li>\n<li><p>åˆå§‹åŒ–å¦‚æœä½¿ç”¨æœ‰å‚æ„é€ å™¨çš„è¯ï¼š</p>\n<p>  é‚£ä¹ˆæ¯æ¬¡æ·»åŠ å…ƒç´ åªéœ€è¦åˆ¤æ–­æ˜¯å¦éœ€è¦æ‰©å®¹å³å¯ï¼Œä¸éœ€è¦ç¬¬ä¸€æ¬¡çš„åˆå§‹åŒ–ä¸º10çš„åˆ¤æ–­ã€‚</p>\n</li>\n</ul>\n</blockquote>\n<h4 id=\"1-å…ˆä»-ArrayList-çš„æ„é€ å‡½æ•°è¯´èµ·\"><a href=\"#1-å…ˆä»-ArrayList-çš„æ„é€ å‡½æ•°è¯´èµ·\" class=\"headerlink\" title=\"1. å…ˆä» ArrayList çš„æ„é€ å‡½æ•°è¯´èµ·\"></a>1. å…ˆä» ArrayList çš„æ„é€ å‡½æ•°è¯´èµ·</h4><p><strong>ï¼ˆJDK8ï¼‰ArrayList æœ‰ä¸‰ç§æ–¹å¼æ¥åˆå§‹åŒ–ï¼Œæ„é€ æ–¹æ³•æºç å¦‚ä¸‹ï¼š</strong></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * é»˜è®¤åˆå§‹å®¹é‡å¤§å°</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\"> <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"type\">int</span> <span class=\"variable\">DEFAULT_CAPACITY</span> <span class=\"operator\">=</span> <span class=\"number\">10</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"> <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> Object[] DEFAULTCAPACITY_EMPTY_ELEMENTDATA = &#123;&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"> <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  *é»˜è®¤æ„é€ å‡½æ•°ï¼Œä½¿ç”¨åˆå§‹å®¹é‡10æ„é€ ä¸€ä¸ªç©ºåˆ—è¡¨(æ— å‚æ•°æ„é€ )</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\"> <span class=\"keyword\">public</span> <span class=\"title function_\">ArrayList</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">     <span class=\"built_in\">this</span>.elementData = DEFAULTCAPACITY_EMPTY_ELEMENTDATA;</span><br><span class=\"line\"> &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"> <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * å¸¦åˆå§‹å®¹é‡å‚æ•°çš„æ„é€ å‡½æ•°ã€‚ï¼ˆç”¨æˆ·è‡ªå·±æŒ‡å®šå®¹é‡ï¼‰</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\"> <span class=\"keyword\">public</span> <span class=\"title function_\">ArrayList</span><span class=\"params\">(<span class=\"type\">int</span> initialCapacity)</span> &#123;</span><br><span class=\"line\">     <span class=\"keyword\">if</span> (initialCapacity &gt; <span class=\"number\">0</span>) &#123;<span class=\"comment\">//åˆå§‹å®¹é‡å¤§äº0</span></span><br><span class=\"line\">         <span class=\"comment\">//åˆ›å»ºinitialCapacityå¤§å°çš„æ•°ç»„</span></span><br><span class=\"line\">         <span class=\"built_in\">this</span>.elementData = <span class=\"keyword\">new</span> <span class=\"title class_\">Object</span>[initialCapacity];</span><br><span class=\"line\">     &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (initialCapacity == <span class=\"number\">0</span>) &#123;<span class=\"comment\">//åˆå§‹å®¹é‡ç­‰äº0</span></span><br><span class=\"line\">         <span class=\"comment\">//åˆ›å»ºç©ºæ•°ç»„</span></span><br><span class=\"line\">         <span class=\"built_in\">this</span>.elementData = EMPTY_ELEMENTDATA;</span><br><span class=\"line\">     &#125; <span class=\"keyword\">else</span> &#123;<span class=\"comment\">//åˆå§‹å®¹é‡å°äº0ï¼ŒæŠ›å‡ºå¼‚å¸¸</span></span><br><span class=\"line\">         <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"title class_\">IllegalArgumentException</span>(<span class=\"string\">&quot;Illegal Capacity: &quot;</span>+</span><br><span class=\"line\">                                            initialCapacity);</span><br><span class=\"line\">     &#125;</span><br><span class=\"line\"> &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> *æ„é€ åŒ…å«æŒ‡å®šcollectionå…ƒç´ çš„åˆ—è¡¨ï¼Œè¿™äº›å…ƒç´ åˆ©ç”¨è¯¥é›†åˆçš„è¿­ä»£å™¨æŒ‰é¡ºåºè¿”å›</span></span><br><span class=\"line\"><span class=\"comment\"> *å¦‚æœæŒ‡å®šçš„é›†åˆä¸ºnullï¼Œthrows NullPointerExceptionã€‚</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"title function_\">ArrayList</span><span class=\"params\">(Collection&lt;? extends E&gt; c)</span> &#123;</span><br><span class=\"line\">     elementData = c.toArray();</span><br><span class=\"line\">     <span class=\"keyword\">if</span> ((size = elementData.length) != <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">         <span class=\"comment\">// c.toArray might (incorrectly) not return Object[] (see 6260652)</span></span><br><span class=\"line\">         <span class=\"keyword\">if</span> (elementData.getClass() != Object[].class)</span><br><span class=\"line\">             elementData = Arrays.copyOf(elementData, size, Object[].class);</span><br><span class=\"line\">     &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">         <span class=\"comment\">// replace with empty array.</span></span><br><span class=\"line\">         <span class=\"built_in\">this</span>.elementData = EMPTY_ELEMENTDATA;</span><br><span class=\"line\">     &#125;</span><br><span class=\"line\"> &#125;</span><br></pre></td></tr></table></figure>\n\n<p><strong>ä»¥æ— å‚æ•°æ„é€ æ–¹æ³•åˆ›å»º ArrayList æ—¶ï¼Œå®é™…ä¸Šåˆå§‹åŒ–èµ‹å€¼çš„æ˜¯ä¸€ä¸ªç©ºæ•°ç»„ã€‚å½“çœŸæ­£å¯¹æ•°ç»„è¿›è¡Œæ·»åŠ å…ƒç´ æ“ä½œæ—¶ï¼Œæ‰çœŸæ­£åˆ†é…å®¹é‡ã€‚å³å‘æ•°ç»„ä¸­æ·»åŠ ç¬¬ä¸€ä¸ªå…ƒç´ æ—¶ï¼Œæ•°ç»„å®¹é‡æ‰©ä¸º 10ã€‚</strong> </p>\n<blockquote>\n<p>è¡¥å……ï¼šJDK6 new æ— å‚æ„é€ çš„ <code>ArrayList</code> å¯¹è±¡æ—¶ï¼Œç›´æ¥åˆ›å»ºäº†é•¿åº¦æ˜¯ 10 çš„ <code>Object[]</code> æ•°ç»„ elementData ã€‚</p>\n</blockquote>\n<h4 id=\"2-ä¸€æ­¥ä¸€æ­¥åˆ†æ-ArrayList-æ‰©å®¹æœºåˆ¶\"><a href=\"#2-ä¸€æ­¥ä¸€æ­¥åˆ†æ-ArrayList-æ‰©å®¹æœºåˆ¶\" class=\"headerlink\" title=\"2. ä¸€æ­¥ä¸€æ­¥åˆ†æ ArrayList æ‰©å®¹æœºåˆ¶\"></a>2. ä¸€æ­¥ä¸€æ­¥åˆ†æ ArrayList æ‰©å®¹æœºåˆ¶</h4><p>è¿™é‡Œä»¥æ— å‚æ„é€ å‡½æ•°åˆ›å»ºçš„ ArrayList ä¸ºä¾‹åˆ†æ</p>\n<h5 id=\"2-1-add\"><a href=\"#2-1-add\" class=\"headerlink\" title=\"2.1.  add\"></a>2.1.  <code>add</code></h5><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * å°†æŒ‡å®šçš„å…ƒç´ è¿½åŠ åˆ°æ­¤åˆ—è¡¨çš„æœ«å°¾ã€‚</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\"> <span class=\"keyword\">public</span> <span class=\"type\">boolean</span> <span class=\"title function_\">add</span><span class=\"params\">(E e)</span> &#123;</span><br><span class=\"line\"><span class=\"comment\">// æ·»åŠ å…ƒç´ ä¹‹å‰ï¼Œå…ˆè°ƒç”¨ensureCapacityInternalæ–¹æ³•</span></span><br><span class=\"line\">     ensureCapacityInternal(size + <span class=\"number\">1</span>);  <span class=\"comment\">// Increments modCount!!</span></span><br><span class=\"line\">     <span class=\"comment\">// è¿™é‡Œçœ‹åˆ°ArrayListæ·»åŠ å…ƒç´ çš„å®è´¨å°±ç›¸å½“äºä¸ºæ•°ç»„èµ‹å€¼</span></span><br><span class=\"line\">     elementData[size++] = e;</span><br><span class=\"line\">     <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\"> &#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"2-2-ensureCapacityInternal\"><a href=\"#2-2-ensureCapacityInternal\" class=\"headerlink\" title=\"2.2. ensureCapacityInternal()\"></a>2.2. <code>ensureCapacityInternal()</code></h5><p>ï¼ˆJDK7ï¼‰å¯ä»¥çœ‹åˆ° <code>add</code> æ–¹æ³• é¦–å…ˆè°ƒç”¨äº†<code>ensureCapacityInternal(size + 1)</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//å¾—åˆ°æœ€å°æ‰©å®¹é‡</span></span><br><span class=\"line\"> <span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title function_\">ensureCapacityInternal</span><span class=\"params\">(<span class=\"type\">int</span> minCapacity)</span> &#123;</span><br><span class=\"line\">     <span class=\"keyword\">if</span> (elementData == DEFAULTCAPACITY_EMPTY_ELEMENTDATA) &#123;</span><br><span class=\"line\">         <span class=\"comment\">// è·å–é»˜è®¤çš„å®¹é‡å’Œä¼ å…¥å‚æ•°çš„è¾ƒå¤§å€¼</span></span><br><span class=\"line\">         minCapacity = Math.max(DEFAULT_CAPACITY, minCapacity);</span><br><span class=\"line\">     &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">     ensureExplicitCapacity(minCapacity);</span><br><span class=\"line\"> &#125;</span><br></pre></td></tr></table></figure>\n\n<p><strong>å½“ è¦ add è¿›ç¬¬ 1 ä¸ªå…ƒç´ æ—¶ï¼ŒminCapacity ä¸º 1ï¼Œåœ¨ Math.max()æ–¹æ³•æ¯”è¾ƒåï¼ŒminCapacity ä¸º 10ã€‚</strong></p>\n<blockquote>\n<p>æ­¤å¤„å’Œåç»­ JDK8 ä»£ç æ ¼å¼åŒ–ç•¥æœ‰ä¸åŒï¼Œæ ¸å¿ƒä»£ç åŸºæœ¬ä¸€æ ·ã€‚</p>\n</blockquote>\n<h5 id=\"2-3-ensureExplicitCapacity\"><a href=\"#2-3-ensureExplicitCapacity\" class=\"headerlink\" title=\"2.3. ensureExplicitCapacity()\"></a>2.3. <code>ensureExplicitCapacity()</code></h5><p>å¦‚æœè°ƒç”¨ <code>ensureCapacityInternal()</code> æ–¹æ³•å°±ä¸€å®šä¼šè¿›å…¥ï¼ˆæ‰§è¡Œï¼‰è¿™ä¸ªæ–¹æ³•</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//åˆ¤æ–­æ˜¯å¦éœ€è¦æ‰©å®¹</span></span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title function_\">ensureExplicitCapacity</span><span class=\"params\">(<span class=\"type\">int</span> minCapacity)</span> &#123;</span><br><span class=\"line\">      modCount++;</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"comment\">// overflow-conscious code</span></span><br><span class=\"line\">      <span class=\"keyword\">if</span> (minCapacity - elementData.length &gt; <span class=\"number\">0</span>)</span><br><span class=\"line\">          <span class=\"comment\">//è°ƒç”¨growæ–¹æ³•è¿›è¡Œæ‰©å®¹ï¼Œè°ƒç”¨æ­¤æ–¹æ³•ä»£è¡¨å·²ç»å¼€å§‹æ‰©å®¹äº†</span></span><br><span class=\"line\">          grow(minCapacity);</span><br><span class=\"line\">  &#125;</span><br></pre></td></tr></table></figure>\n\n<p>æˆ‘ä»¬æ¥ä»”ç»†åˆ†æä¸€ä¸‹ï¼š</p>\n<ul>\n<li>å½“æˆ‘ä»¬è¦ add è¿›ç¬¬ 1 ä¸ªå…ƒç´ åˆ° ArrayList æ—¶ï¼ŒelementData.length ä¸º 0 ï¼ˆå› ä¸ºè¿˜æ˜¯ä¸€ä¸ªç©ºçš„ listï¼‰ï¼Œå› ä¸ºæ‰§è¡Œäº† <code>ensureCapacityInternal()</code> æ–¹æ³• ï¼Œæ‰€ä»¥ minCapacity æ­¤æ—¶ä¸º 10ã€‚æ­¤æ—¶ï¼Œ<code>minCapacity - elementData.length &gt; 0</code>æˆç«‹ï¼Œæ‰€ä»¥ä¼šè¿›å…¥ <code>grow(minCapacity)</code> æ–¹æ³•ã€‚</li>\n<li>å½“ add ç¬¬ 2 ä¸ªå…ƒç´ æ—¶ï¼ŒminCapacity ä¸º 2ï¼Œæ­¤æ—¶ elementData.length(å®¹é‡)åœ¨æ·»åŠ ç¬¬ä¸€ä¸ªå…ƒç´ åæ‰©å®¹æˆ 10 äº†ã€‚æ­¤æ—¶ï¼Œ<code>minCapacity - elementData.length &gt; 0</code> ä¸æˆç«‹ï¼Œæ‰€ä»¥ä¸ä¼šè¿›å…¥ ï¼ˆæ‰§è¡Œï¼‰<code>grow(minCapacity)</code> æ–¹æ³•ã€‚</li>\n<li>æ·»åŠ ç¬¬ 3ã€4Â·Â·Â·åˆ°ç¬¬ 10 ä¸ªå…ƒç´ æ—¶ï¼Œä¾ç„¶ä¸ä¼šæ‰§è¡Œ grow æ–¹æ³•ï¼Œæ•°ç»„å®¹é‡éƒ½ä¸º 10ã€‚</li>\n</ul>\n<p>ç›´åˆ°æ·»åŠ ç¬¬ 11 ä¸ªå…ƒç´ ï¼ŒminCapacity(ä¸º 11)æ¯” elementData.lengthï¼ˆä¸º 10ï¼‰è¦å¤§ã€‚è¿›å…¥ grow æ–¹æ³•è¿›è¡Œæ‰©å®¹ã€‚</p>\n<h5 id=\"2-4-grow\"><a href=\"#2-4-grow\" class=\"headerlink\" title=\"2.4. grow()\"></a>2.4. <code>grow()</code></h5><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * è¦åˆ†é…çš„æœ€å¤§æ•°ç»„å¤§å°</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"type\">int</span> <span class=\"variable\">MAX_ARRAY_SIZE</span> <span class=\"operator\">=</span> Integer.MAX_VALUE - <span class=\"number\">8</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * ArrayListæ‰©å®¹çš„æ ¸å¿ƒæ–¹æ³•ã€‚</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title function_\">grow</span><span class=\"params\">(<span class=\"type\">int</span> minCapacity)</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// oldCapacityä¸ºæ—§å®¹é‡ï¼ŒnewCapacityä¸ºæ–°å®¹é‡</span></span><br><span class=\"line\">    <span class=\"type\">int</span> <span class=\"variable\">oldCapacity</span> <span class=\"operator\">=</span> elementData.length;</span><br><span class=\"line\">    <span class=\"comment\">//å°†oldCapacity å³ç§»ä¸€ä½ï¼Œå…¶æ•ˆæœç›¸å½“äºoldCapacity /2ï¼Œ</span></span><br><span class=\"line\">    <span class=\"comment\">//æˆ‘ä»¬çŸ¥é“ä½è¿ç®—çš„é€Ÿåº¦è¿œè¿œå¿«äºæ•´é™¤è¿ç®—ï¼Œæ•´å¥è¿ç®—å¼çš„ç»“æœå°±æ˜¯å°†æ–°å®¹é‡æ›´æ–°ä¸ºæ—§å®¹é‡çš„1.5å€ï¼Œ</span></span><br><span class=\"line\">    <span class=\"type\">int</span> <span class=\"variable\">newCapacity</span> <span class=\"operator\">=</span> oldCapacity + (oldCapacity &gt;&gt; <span class=\"number\">1</span>);</span><br><span class=\"line\">    <span class=\"comment\">//ç„¶åæ£€æŸ¥æ–°å®¹é‡æ˜¯å¦å¤§äºæœ€å°éœ€è¦å®¹é‡ï¼Œè‹¥è¿˜æ˜¯å°äºæœ€å°éœ€è¦å®¹é‡ï¼Œé‚£ä¹ˆå°±æŠŠæœ€å°éœ€è¦å®¹é‡å½“ä½œæ•°ç»„çš„æ–°å®¹é‡ï¼Œ</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (newCapacity - minCapacity &lt; <span class=\"number\">0</span>)</span><br><span class=\"line\">        newCapacity = minCapacity;</span><br><span class=\"line\">   <span class=\"comment\">// å¦‚æœæ–°å®¹é‡å¤§äº MAX_ARRAY_SIZE,è¿›å…¥(æ‰§è¡Œ) `hugeCapacity()` æ–¹æ³•æ¥æ¯”è¾ƒ minCapacity å’Œ MAX_ARRAY_SIZEï¼Œ</span></span><br><span class=\"line\">   <span class=\"comment\">//å¦‚æœminCapacityå¤§äºæœ€å¤§å®¹é‡ï¼Œåˆ™æ–°å®¹é‡åˆ™ä¸º`Integer.MAX_VALUE`ï¼Œå¦åˆ™ï¼Œæ–°å®¹é‡å¤§å°åˆ™ä¸º MAX_ARRAY_SIZE å³ä¸º `Integer.MAX_VALUE - 8`ã€‚</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (newCapacity - MAX_ARRAY_SIZE &gt; <span class=\"number\">0</span>)</span><br><span class=\"line\">        newCapacity = hugeCapacity(minCapacity);</span><br><span class=\"line\">    <span class=\"comment\">// minCapacity is usually close to size, so this is a win:</span></span><br><span class=\"line\">    elementData = Arrays.copyOf(elementData, newCapacity);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><strong>int newCapacity &#x3D; oldCapacity + (oldCapacity &gt;&gt; 1),æ‰€ä»¥ ArrayList æ¯æ¬¡æ‰©å®¹ä¹‹åå®¹é‡éƒ½ä¼šå˜ä¸ºåŸæ¥çš„ 1.5 å€å·¦å³ï¼ˆoldCapacity ä¸ºå¶æ•°å°±æ˜¯ 1.5 å€ï¼Œå¦åˆ™æ˜¯ 1.5 å€å·¦å³ï¼‰</strong> </p>\n<p><strong>æˆ‘ä»¬å†æ¥é€šè¿‡ä¾‹å­æ¢ç©¶ä¸€ä¸‹grow() æ–¹æ³• ï¼š</strong></p>\n<ul>\n<li>å½“ add ç¬¬ 1 ä¸ªå…ƒç´ æ—¶ï¼ŒoldCapacity ä¸º 0ï¼Œç»æ¯”è¾ƒåç¬¬ä¸€ä¸ª if åˆ¤æ–­æˆç«‹ï¼ŒnewCapacity &#x3D; minCapacity(ä¸º 10)ã€‚ä½†æ˜¯ç¬¬äºŒä¸ª if åˆ¤æ–­ä¸ä¼šæˆç«‹ï¼Œå³ newCapacity ä¸æ¯” MAX_ARRAY_SIZE å¤§ï¼Œåˆ™ä¸ä¼šè¿›å…¥ <code>hugeCapacity</code> æ–¹æ³•ã€‚æ•°ç»„å®¹é‡ä¸º 10ï¼Œadd æ–¹æ³•ä¸­ return true,size å¢ä¸º 1ã€‚</li>\n<li>å½“ add ç¬¬ 11 ä¸ªå…ƒç´ è¿›å…¥ grow æ–¹æ³•æ—¶ï¼ŒnewCapacity ä¸º 15ï¼Œæ¯” minCapacityï¼ˆä¸º 11ï¼‰å¤§ï¼Œç¬¬ä¸€ä¸ª if åˆ¤æ–­ä¸æˆç«‹ã€‚æ–°å®¹é‡æ²¡æœ‰å¤§äºæ•°ç»„æœ€å¤§ sizeï¼Œä¸ä¼šè¿›å…¥ hugeCapacity æ–¹æ³•ã€‚æ•°ç»„å®¹é‡æ‰©ä¸º 15ï¼Œadd æ–¹æ³•ä¸­ return true,size å¢ä¸º 11ã€‚</li>\n<li>ä»¥æ­¤ç±»æ¨Â·Â·Â·Â·Â·Â·</li>\n</ul>\n<h5 id=\"2-5-hugeCapacity\"><a href=\"#2-5-hugeCapacity\" class=\"headerlink\" title=\"2.5. hugeCapacity()\"></a>2.5. <code>hugeCapacity()</code></h5><p>ä»ä¸Šé¢ <code>grow()</code> æ–¹æ³•æºç æˆ‘ä»¬çŸ¥é“ï¼š å¦‚æœæ–°å®¹é‡å¤§äº MAX_ARRAY_SIZE,è¿›å…¥(æ‰§è¡Œ) <code>hugeCapacity()</code> æ–¹æ³•æ¥æ¯”è¾ƒ minCapacity å’Œ MAX_ARRAY_SIZEï¼Œå¦‚æœ minCapacity å¤§äºæœ€å¤§å®¹é‡ï¼Œåˆ™æ–°å®¹é‡åˆ™ä¸º<code>Integer.MAX_VALUE</code>ï¼Œå¦åˆ™ï¼Œæ–°å®¹é‡å¤§å°åˆ™ä¸º MAX_ARRAY_SIZE å³ä¸º <code>Integer.MAX_VALUE - 8</code>ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"type\">int</span> <span class=\"title function_\">hugeCapacity</span><span class=\"params\">(<span class=\"type\">int</span> minCapacity)</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (minCapacity &lt; <span class=\"number\">0</span>) <span class=\"comment\">// overflow</span></span><br><span class=\"line\">        <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"title class_\">OutOfMemoryError</span>();</span><br><span class=\"line\">    <span class=\"comment\">//å¯¹minCapacityå’ŒMAX_ARRAY_SIZEè¿›è¡Œæ¯”è¾ƒ</span></span><br><span class=\"line\">    <span class=\"comment\">//è‹¥minCapacityå¤§ï¼Œå°†Integer.MAX_VALUEä½œä¸ºæ–°æ•°ç»„çš„å¤§å°</span></span><br><span class=\"line\">    <span class=\"comment\">//è‹¥MAX_ARRAY_SIZEå¤§ï¼Œå°†MAX_ARRAY_SIZEä½œä¸ºæ–°æ•°ç»„çš„å¤§å°</span></span><br><span class=\"line\">    <span class=\"comment\">//MAX_ARRAY_SIZE = Integer.MAX_VALUE - 8;</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> (minCapacity &gt; MAX_ARRAY_SIZE) ?</span><br><span class=\"line\">        Integer.MAX_VALUE :</span><br><span class=\"line\">        MAX_ARRAY_SIZE;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Setæ¥å£\"><a href=\"#Setæ¥å£\" class=\"headerlink\" title=\"Setæ¥å£\"></a>Setæ¥å£</h3><h4 id=\"HashSet-çš„å®ç°åŸç†ï¼Ÿ\"><a href=\"#HashSet-çš„å®ç°åŸç†ï¼Ÿ\" class=\"headerlink\" title=\"HashSet çš„å®ç°åŸç†ï¼Ÿ\"></a>HashSet çš„å®ç°åŸç†ï¼Ÿ</h4><p>HashSet æ˜¯åŸºäº HashMap å®ç°çš„ï¼ŒHashSetçš„å€¼å­˜æ”¾äºHashMapçš„keyä¸Šï¼ŒHashMapçš„valueç»Ÿä¸€ä¸ºObjectå¸¸é‡PRESENTï¼Œç”±äº HashMap çš„ key ä¸å…è®¸é‡å¤ï¼Œè€Œ HashSet ä¸å…è®¸é‡å¤çš„å€¼ï¼Œå› æ­¤ HashSet å¯ä»¥åŸºäº HashMap å®ç°ï¼ŒåŸºæœ¬ä¸Šéƒ½æ˜¯ç›´æ¥è°ƒç”¨åº•å±‚ HashMap çš„ç›¸å…³æ–¹æ³•æ¥å®Œæˆã€‚</p>\n<h4 id=\"HashSetæ˜¯å¦‚ä½•ä¿è¯æ•°æ®ä¸å¯é‡å¤çš„ï¼Ÿ\"><a href=\"#HashSetæ˜¯å¦‚ä½•ä¿è¯æ•°æ®ä¸å¯é‡å¤çš„ï¼Ÿ\" class=\"headerlink\" title=\"HashSetæ˜¯å¦‚ä½•ä¿è¯æ•°æ®ä¸å¯é‡å¤çš„ï¼Ÿ\"></a>HashSetæ˜¯å¦‚ä½•ä¿è¯æ•°æ®ä¸å¯é‡å¤çš„ï¼Ÿ</h4><p>å½“ä½ æŠŠå¯¹è±¡åŠ å…¥ hashSet æ—¶ï¼ŒhashSet ä¼šå…ˆè®¡ç®—å¯¹è±¡çš„ hashcode å€¼æ¥åˆ¤æ–­å¯¹è±¡åŠ å…¥çš„ä½ç½®ï¼Œå¦‚æœå‘ç°æœ‰ç›¸åŒ hashcode å€¼çš„å¯¹è±¡ï¼Œè¿™æ—¶ä¼šè°ƒç”¨ equals()æ–¹æ³•æ¥æ£€æŸ¥ hashcode ç›¸ç­‰çš„å¯¹è±¡æ˜¯å¦çœŸçš„ç›¸åŒã€‚å¦‚æœä¸¤è€…ç›¸åŒï¼Œè¡¨æ˜å·²ç»æœ‰äº†ç›¸åŒçš„å¯¹è±¡äº†ï¼ŒhashSet å°±ä¸ä¼šè®©å…¶åŠ å…¥æ“ä½œæˆåŠŸã€‚å¦‚æœä¸åŒçš„è¯ï¼Œå°±ä¼šé‡æ–°æ•£åˆ—åˆ°å…¶ä»–ä½ç½®ã€‚ </p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// Dummy value to associate with an Object in the backing Map</span></span><br><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"type\">Object</span> <span class=\"variable\">PRESENT</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Object</span>();</span><br><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">transient</span> HashMap&lt;E,Object&gt; map;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"title function_\">HashSet</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">    map = <span class=\"keyword\">new</span> <span class=\"title class_\">HashMap</span>&lt;&gt;();</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"type\">boolean</span> <span class=\"title function_\">add</span><span class=\"params\">(E e)</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// è°ƒç”¨HashMapçš„putæ–¹æ³•,PRESENTæ˜¯ä¸€ä¸ªè‡³å§‹è‡³ç»ˆéƒ½ç›¸åŒçš„è™šå€¼</span></span><br><span class=\"line\">\t<span class=\"keyword\">return</span> map.put(e, PRESENT)==<span class=\"literal\">null</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"åªé‡å†™-hashCode-å¯ä»¥å—ï¼Ÿ\"><a href=\"#åªé‡å†™-hashCode-å¯ä»¥å—ï¼Ÿ\" class=\"headerlink\" title=\"åªé‡å†™ hashCode å¯ä»¥å—ï¼Ÿ\"></a>åªé‡å†™ hashCode å¯ä»¥å—ï¼Ÿ</h4><p>ä¸¤ä¸ªå¯¹è±¡çš„ hashCode ç›¸åŒï¼Œä½†æ˜¯å†…å®¹å¯èƒ½ä¸åŒï¼Œåœ¨ set ä¸­æ˜æ˜åº”è¯¥æ˜¯ä¸¤ä¸ªä¸åŒçš„å¯¹è±¡ï¼Œè¿™æ—¶å€™åªé€šè¿‡ hashCode åˆ¤æ–­ä»–ä¿©ç›¸åŒä¼šå¯¼è‡´åªæ’å…¥ä¸€ä¸ªå…ƒç´ ã€‚</p>\n<h4 id=\"åªé‡å†™-equalså¯ä»¥å—ï¼Ÿ\"><a href=\"#åªé‡å†™-equalså¯ä»¥å—ï¼Ÿ\" class=\"headerlink\" title=\"åªé‡å†™ equalså¯ä»¥å—ï¼Ÿ\"></a>åªé‡å†™ equalså¯ä»¥å—ï¼Ÿ</h4><p>å¦‚æœåœ¨é‡å†™ equals æ—¶ï¼Œä¸é‡å†™ hashCodeï¼Œå°±ä¼šå¼•èµ·æ¯”å¦‚è¯´å°†ä¸¤ä¸ªç›¸ç­‰çš„è‡ªå®šä¹‰å¯¹è±¡å­˜å‚¨åœ¨ Set é›†åˆæ—¶ï¼Œä¼šå°†è¿™ä¸¤ä¸ªå¯¹è±¡éƒ½è¿›è¡Œæ’å…¥ã€‚ï¼ˆæ— æ³•å»é‡ï¼‰</p>\n<h2 id=\"Mapæ¥å£\"><a href=\"#Mapæ¥å£\" class=\"headerlink\" title=\"Mapæ¥å£\"></a>Mapæ¥å£</h2><h3 id=\"HashMapçº¿ç¨‹ä¸å®‰å…¨çš„ä¸»è¦ä½“ç°ï¼Ÿ\"><a href=\"#HashMapçº¿ç¨‹ä¸å®‰å…¨çš„ä¸»è¦ä½“ç°ï¼Ÿ\" class=\"headerlink\" title=\"HashMapçº¿ç¨‹ä¸å®‰å…¨çš„ä¸»è¦ä½“ç°ï¼Ÿ\"></a>HashMapçº¿ç¨‹ä¸å®‰å…¨çš„ä¸»è¦ä½“ç°ï¼Ÿ</h3><ol>\n<li><p>åœ¨jdk1.7ä¸­ï¼Œåœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ï¼Œ<strong>æ‰©å®¹</strong>æ—¶ä¼šé€ æˆæ­»é“¾ã€‚</p>\n<blockquote>\n<p>ä½œè€…ï¼šç£Šå“¥<br>é“¾æ¥ï¼š<a href=\"https://www.zhihu.com/question/394039290/answer/2314917909\">https://www.zhihu.com/question/394039290/answer/2314917909</a><br>æ¥æºï¼šçŸ¥ä¹</p>\n</blockquote>\n<p> 1.1ã€</p>\n<p> æ­»å¾ªç¯æ˜¯å› ä¸ºå¹¶å‘HashMapæ‰©å®¹å¯¼è‡´çš„ï¼Œå¹¶å‘æ‰©å®¹çš„ç¬¬ä¸€æ­¥ï¼Œçº¿ç¨‹T1å’Œçº¿ç¨‹T2è¦å¯¹HashMapè¿›è¡Œæ‰©å®¹æ“ä½œï¼Œæ­¤æ—¶T1å’ŒT2æŒ‡å‘çš„æ˜¯é“¾è¡¨çš„å¤´ç»“ç‚¹å…ƒç´ Aï¼Œè€ŒT1å’ŒT2çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼Œä¹Ÿå°±æ˜¯T1.nextå’ŒT2.nextæŒ‡å‘çš„æ˜¯BèŠ‚ç‚¹ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š </p>\n<p> <img src=\"https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/v2-e0b4f5ea00cb277bde490f315b9b387f_720w.jpg\" alt=\"å¤šçº¿ç¨‹æ‰©å®¹å¯¼è‡´æ­»å¾ªç¯é—®é¢˜-1\"></p>\n<p> 1.2ã€</p>\n<p> æ­»å¾ªç¯çš„ç¬¬äºŒæ­¥æ“ä½œæ˜¯ï¼Œçº¿ç¨‹T2æ—¶é—´ç‰‡ç”¨å®Œè¿›å…¥ä¼‘çœ çŠ¶æ€ï¼Œè€Œçº¿ç¨‹T1å¼€å§‹æ‰§è¡Œæ‰©å®¹æ“ä½œï¼Œä¸€ç›´åˆ°çº¿ç¨‹T1æ‰©å®¹å®Œæˆåï¼Œçº¿ç¨‹T2æ‰è¢«å”¤é†’ï¼Œæ‰©å®¹ä¹‹åçš„åœºæ™¯å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š </p>\n<p> <img src=\"https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/v2-5f78d8ac8af1efc79e7d79a1f3fdc154_r.jpg\" alt=\"å¤šçº¿ç¨‹æ‰©å®¹å¯¼è‡´æ­»å¾ªç¯é—®é¢˜-2\"></p>\n<p>  ä»ä¸Šå›¾å¯çŸ¥çº¿ç¨‹T1æ‰§è¡Œä¹‹åï¼Œ<strong>å› ä¸ºæ˜¯å¤´æ’æ³•ï¼Œæ‰€ä»¥HashMapçš„é¡ºåºå·²ç»å‘ç”Ÿäº†æ”¹å˜</strong>ï¼Œä½†çº¿ç¨‹T2å¯¹äºå‘ç”Ÿçš„ä¸€åˆ‡æ˜¯ä¸å¯çŸ¥çš„ï¼Œæ‰€ä»¥å®ƒçš„æŒ‡å‘å…ƒç´ ä¾ç„¶æ²¡å˜ï¼Œå¦‚ä¸Šå›¾å±•ç¤ºçš„é‚£æ ·ï¼ŒT2æŒ‡å‘çš„æ˜¯Aå…ƒç´ ï¼ŒT2.nextæŒ‡å‘çš„èŠ‚ç‚¹æ˜¯Bå…ƒç´ ã€‚</p>\n<p> 1.3ã€</p>\n<p> å½“çº¿ç¨‹T1æ‰§è¡Œå®Œï¼Œè€Œçº¿ç¨‹T2æ¢å¤æ‰§è¡Œæ—¶ï¼Œæ­»å¾ªç¯å°±å»ºç«‹äº†ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š </p>\n<p> <img src=\"https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/v2-bd4a753db8c985119aa4dcd4356609cf_720w.jpg\" alt=\"å¤šçº¿ç¨‹æ‰©å®¹å¯¼è‡´æ­»å¾ªç¯é—®é¢˜-3\"></p>\n<p>  å› ä¸ºT1æ‰§è¡Œå®Œæ‰©å®¹ä¹‹åBèŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹æ˜¯Aï¼Œè€ŒT2çº¿ç¨‹æŒ‡å‘çš„é¦–èŠ‚ç‚¹æ˜¯Aï¼Œç¬¬äºŒä¸ªèŠ‚ç‚¹æ˜¯Bï¼Œè¿™ä¸ªé¡ºåºåˆšå¥½å’ŒT1æ‰©å®Œå®¹å®Œä¹‹åçš„èŠ‚ç‚¹é¡ºåºæ˜¯ç›¸åçš„ã€‚<strong>T1æ‰§è¡Œå®Œä¹‹åçš„é¡ºåºæ˜¯Båˆ°Aï¼Œè€ŒT2çš„é¡ºåºæ˜¯Aåˆ°Bï¼Œè¿™æ ·AèŠ‚ç‚¹å’ŒBèŠ‚ç‚¹å°±å½¢æˆæ­»å¾ªç¯äº†</strong>ï¼Œè¿™å°±æ˜¯HashMapæ­»å¾ªç¯å¯¼è‡´çš„åŸå› ã€‚</p>\n</li>\n<li><p>åœ¨jdk1.8ä¸­ï¼Œåœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ï¼Œ<strong>æ’å…¥</strong>æ—¶ä¼šå‘ç”Ÿæ•°æ®è¦†ç›–çš„æƒ…å†µï¼ˆ<strong>å°¾æ’æ³•</strong>ï¼‰ã€‚</p>\n</li>\n</ol>\n<h3 id=\"HashMapåœ¨JDK1-7å’ŒJDK1-8ä¸­æœ‰å“ªäº›ä¸åŒï¼Ÿ\"><a href=\"#HashMapåœ¨JDK1-7å’ŒJDK1-8ä¸­æœ‰å“ªäº›ä¸åŒï¼Ÿ\" class=\"headerlink\" title=\"HashMapåœ¨JDK1.7å’ŒJDK1.8ä¸­æœ‰å“ªäº›ä¸åŒï¼Ÿ\"></a>HashMapåœ¨JDK1.7å’ŒJDK1.8ä¸­æœ‰å“ªäº›ä¸åŒï¼Ÿ</h3><table>\n<thead>\n<tr>\n<th>ä¸åŒ</th>\n<th>JDK 1.7</th>\n<th>JDK 1.8</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><strong>å­˜å‚¨ç»“æ„</strong></td>\n<td>æ•°ç»„ + é“¾è¡¨</td>\n<td>æ•°ç»„ + é“¾è¡¨ + çº¢é»‘æ ‘</td>\n</tr>\n<tr>\n<td><strong>hashå€¼è®¡ç®—æ–¹å¼</strong></td>\n<td>æ‰°åŠ¨å¤„ç† &#x3D; 4æ¬¡ä½è¿ç®— + 5æ¬¡å¼‚æˆ–è¿ç®—</td>\n<td>æ‰°åŠ¨å¤„ç† &#x3D; 1æ¬¡ä½è¿ç®— + 1æ¬¡å¼‚æˆ–è¿ç®—</td>\n</tr>\n<tr>\n<td><strong>å­˜æ”¾æ•°æ®çš„è§„åˆ™</strong></td>\n<td>æ— å†²çªæ—¶ï¼Œå­˜æ”¾æ•°ç»„ï¼›<br />å†²çªæ—¶ï¼Œå­˜æ”¾é“¾è¡¨</td>\n<td>æ— å†²çªæ—¶ï¼Œå­˜æ”¾æ•°ç»„ï¼›<br />å†²çª &amp; é“¾è¡¨é•¿åº¦ &lt; 8ï¼šæ’å…¥å•é“¾è¡¨ï¼›<br />é“¾è¡¨é•¿åº¦&gt;8ï¼Œå…ˆå°è¯•æ‰©å®¹æ•°ç»„ï¼Œæ•°ç»„é•¿åº¦å¤§äº64<br />é“¾è¡¨è½¬ä¸ºçº¢é»‘æ ‘ï¼Œæ’å…¥åˆ°çº¢é»‘æ ‘</td>\n</tr>\n<tr>\n<td><strong>æ’å…¥æ•°æ®æ–¹å¼</strong></td>\n<td>å¤´æ’æ³•</td>\n<td>å°¾æ’æ³•</td>\n</tr>\n<tr>\n<td><strong>æ‰©å®¹åå­˜å‚¨ä½ç½®çš„è®¡ç®—æ–¹å¼</strong></td>\n<td>æŒ‰ç…§åŸæ¥æ–¹æ³•é‡æ–°è¿›è¡Œè®¡ç®—<br />hashCodeã€æ‰°åŠ¨å‡½æ•°ã€ä¸è¿ç®—h&amp;length-1</td>\n<td>æ ¹æ®å…ƒç´ çš„hashå€¼è¿›è¡Œåˆ¤æ–­ <br />æ‰©å®¹åçš„ä½ç½®&#x3D;åŸä½ç½® or åŸä½ç½® + æ—§å®¹é‡</td>\n</tr>\n</tbody></table>\n<h3 id=\"HashMapçš„hashç®—æ³•\"><a href=\"#HashMapçš„hashç®—æ³•\" class=\"headerlink\" title=\"HashMapçš„hashç®—æ³•\"></a>HashMapçš„hashç®—æ³•</h3><h4 id=\"ä»€ä¹ˆæ˜¯å“ˆå¸Œï¼Ÿ\"><a href=\"#ä»€ä¹ˆæ˜¯å“ˆå¸Œï¼Ÿ\" class=\"headerlink\" title=\"ä»€ä¹ˆæ˜¯å“ˆå¸Œï¼Ÿ\"></a>ä»€ä¹ˆæ˜¯å“ˆå¸Œï¼Ÿ</h4><p>Hashï¼Œå°±æ˜¯æŠŠä»»æ„é•¿åº¦çš„è¾“å…¥é€šè¿‡æ•£åˆ—ç®—æ³•ï¼Œå˜æ¢æˆå›ºå®šé•¿åº¦çš„è¾“å‡ºï¼Œè¯¥è¾“å‡ºå°±æ˜¯æ•£åˆ—å€¼ï¼ˆå“ˆå¸Œå€¼ï¼‰ï¼›</p>\n<p>hash å€¼ä¸åŒï¼Œè¾“å…¥ä¸€å®šä¸åŒï¼›è¾“å…¥ä¸åŒï¼Œhash å€¼å¯èƒ½ç›¸åŒï¼ˆå³å“ˆå¸Œç¢°æ’ï¼‰</p>\n<h4 id=\"ä»€ä¹ˆæ˜¯å“ˆå¸Œå†²çªï¼Ÿ\"><a href=\"#ä»€ä¹ˆæ˜¯å“ˆå¸Œå†²çªï¼Ÿ\" class=\"headerlink\" title=\"ä»€ä¹ˆæ˜¯å“ˆå¸Œå†²çªï¼Ÿ\"></a>ä»€ä¹ˆæ˜¯å“ˆå¸Œå†²çªï¼Ÿ</h4><p>å½“ä¸¤ä¸ªä¸åŒçš„è¾“å…¥å€¼ï¼Œæ ¹æ®åŒä¸€æ•£åˆ—å‡½æ•°è®¡ç®—å‡ºç›¸åŒçš„æ•£åˆ—å€¼çš„ç°è±¡ï¼Œæˆ‘ä»¬å°±æŠŠå®ƒå«åšå“ˆå¸Œç¢°æ’&#x2F;å†²çªã€‚</p>\n<h4 id=\"HashMapçš„æ•°æ®ç»“æ„\"><a href=\"#HashMapçš„æ•°æ®ç»“æ„\" class=\"headerlink\" title=\"HashMapçš„æ•°æ®ç»“æ„\"></a>HashMapçš„æ•°æ®ç»“æ„</h4><p>åº•å±‚æ•°æ®ç»“æ„ï¼šæ•°ç»„+é“¾è¡¨<br><strong>æ•°ç»„çš„ç‰¹ç‚¹æ˜¯ï¼šæ–¹ä¾¿æŸ¥æ‰¾ï¼›é“¾è¡¨çš„ç‰¹ç‚¹æ˜¯ï¼šæ–¹ä¾¿æ’å…¥åˆ é™¤</strong><br>æ‰€ä»¥æˆ‘ä»¬å°†æ•°ç»„å’Œé“¾è¡¨ç»“åˆåœ¨ä¸€èµ·ï¼Œå‘æŒ¥ä¸¤è€…å„è‡ªçš„ä¼˜åŠ¿ï¼Œä½¿ç”¨ä¸€ç§å«åš<strong>é“¾åœ°å€æ³•</strong>çš„æ–¹å¼å¯ä»¥è§£å†³å“ˆå¸Œå†²çª</p>\n<blockquote>\n<p>è§£å†³å“ˆå¸Œå†²çªçš„å…¶ä»–æ–¹æ³•ï¼š<br>å¼€æ”¾å®šå€æ³•ï¼ˆå†²çªäº†é€šè¿‡æŸç§æ–¹å¼æ•£åˆ—åˆ°å¦ä¸€ä¸ªä¸å†²çªçš„ä½ç½®ä¸Šï¼‰ï¼›<br>å†å“ˆå¸Œæ³•ï¼ˆæ„é€ å¤šä¸ªä¸åŒçš„å“ˆå¸Œå‡½æ•°ï¼‰ã€‚</p>\n</blockquote>\n<p><img src=\"https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/TyporaNotesaHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy83ODk2ODkwLWM2NmE0YmQ4OTA3ZjQ5ZjYucG5n.png\" alt=\"HashMapæ•°æ®ç»“æ„\"></p>\n<h4 id=\"æ‰°åŠ¨å¤„ç†\"><a href=\"#æ‰°åŠ¨å¤„ç†\" class=\"headerlink\" title=\"æ‰°åŠ¨å¤„ç†\"></a>æ‰°åŠ¨å¤„ç†</h4><p>ç”±äºè®¡ç®—ä¸‹æ ‡æ—¶ï¼Œé€šè¿‡ h &amp; (length - 1)ï¼Œç”±äºhashå€¼èŒƒå›´å¾ˆå¤§ï¼Œè€Œæ•°ç»„é•¿åº¦ç›¸å¯¹æ¥è¯´å°å¾—å¤šï¼Œå¯¼è‡´è¿›è¡Œä¸è¿ç®—æ—¶å‚ä¸è¿ç®—çš„åªæœ‰hashå€¼çš„ä½ä½ï¼Œ<strong>é«˜ä½æ˜¯æ²¡æœ‰èµ·åˆ°ä»»ä½•ä½œç”¨çš„</strong>ï¼Œè¿™å°†ä¼šå¤§å¤§å¢åŠ å“ˆå¸Œç¢°æ’çš„æ¦‚ç‡ã€‚æ‰€ä»¥æˆ‘ä»¬çš„æ€è·¯å°±æ˜¯è®©hashCodeå€¼çš„é«˜ä½ä¹Ÿå‚ä¸è¿ç®—ï¼Œè¿›ä¸€æ­¥é™ä½hashç¢°æ’çš„æ¦‚ç‡ï¼Œä½¿å¾—<strong>æ•°æ®åˆ†å¸ƒæ›´å¹³å‡</strong>ï¼Œæˆ‘ä»¬æŠŠè¿™æ ·çš„æ“ä½œç§°ä¸º<strong>æ‰°åŠ¨</strong>ï¼Œåœ¨<strong>JDK 1.8</strong>ä¸­çš„hash()å‡½æ•°å¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"type\">int</span> <span class=\"title function_\">hash</span><span class=\"params\">(Object key)</span> &#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> h;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> (key == <span class=\"literal\">null</span>) ? <span class=\"number\">0</span> : (h = key.hashCode()) ^ (h &gt;&gt;&gt; <span class=\"number\">16</span>);</span><br><span class=\"line\">    <span class=\"comment\">// ä¸è‡ªå·±å³ç§»16ä½è¿›è¡Œå¼‚æˆ–è¿ç®—ï¼ˆé«˜ä½ä½å¼‚æˆ–ï¼‰</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>è¿™æ¯”åœ¨<strong>JDK 1.7</strong>ä¸­ï¼Œæ›´ä¸ºç®€æ´ï¼Œ<strong>ç›¸æ¯”åœ¨1.7ä¸­çš„4æ¬¡ä½è¿ç®—ï¼Œ5æ¬¡å¼‚æˆ–è¿ç®—ï¼ˆ9æ¬¡æ‰°åŠ¨ï¼‰ï¼Œåœ¨1.8ä¸­ï¼Œåªè¿›è¡Œäº†1æ¬¡ä½è¿ç®—å’Œ1æ¬¡å¼‚æˆ–è¿ç®—ï¼ˆ2æ¬¡æ‰°åŠ¨ï¼‰</strong>ï¼›</p>\n<h4 id=\"ä¸‹æ ‡è®¡ç®—\"><a href=\"#ä¸‹æ ‡è®¡ç®—\" class=\"headerlink\" title=\"ä¸‹æ ‡è®¡ç®—\"></a>ä¸‹æ ‡è®¡ç®—</h4><p>åœ¨å¾—åˆ°hashå€¼ä¹‹åï¼Œæˆ‘ä»¬è¦æŠŠè¿™äº›hashå€¼æ˜ å°„åˆ°ç›¸åº”çš„æ•°ç»„ä¸‹æ ‡ä¸Šï¼Œé‚£ä¹ˆå°±å¯ä»¥è€ƒè™‘ä½¿ç”¨ hash % length</p>\n<p>è€Œ hash % length&#x3D;&#x3D;hash &amp; (length-1) å¹¶ä¸”å‰ææ˜¯ length æ˜¯2çš„ n æ¬¡æ–¹ã€‚<br>ç”±äºé‡‡ç”¨äºŒè¿›åˆ¶ä½æ“ä½œ &amp;ï¼Œç›¸å¯¹äº%èƒ½å¤Ÿæé«˜è¿ç®—æ•ˆç‡ï¼Œå› æ­¤å¯ä»¥å°† HashMap çš„é•¿åº¦è®¾è®¡ä¸º 2 çš„å¹‚æ¬¡æ–¹ã€‚ï¼ˆåˆå§‹åŒ–ä¸º16ï¼Œå¦‚æœæŒ‡å®šåˆå§‹åŒ–å®¹é‡çš„å€¼ï¼Œä¼šæ‰©å®¹è‡³ç¬¬ä¸€ä¸ªå¤§äºè¯¥å®¹é‡çš„ 2 çš„å¹‚æ¬¡æ–¹ä½œä¸ºæ•°ç»„å®¹é‡ï¼‰</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">static</span> <span class=\"type\">int</span> <span class=\"title function_\">indexFor</span><span class=\"params\">(<span class=\"type\">int</span> h, <span class=\"type\">int</span> length)</span>&#123;</span><br><span class=\"line\">     <span class=\"keyword\">return</span> h &amp; (length - <span class=\"number\">1</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"ä¸ºä»€ä¹ˆè¦å°†æ•°ç»„é•¿åº¦è®¾ç½®ä¸º-2-çš„næ¬¡å¹‚å‘¢ï¼Ÿ\"><a href=\"#ä¸ºä»€ä¹ˆè¦å°†æ•°ç»„é•¿åº¦è®¾ç½®ä¸º-2-çš„næ¬¡å¹‚å‘¢ï¼Ÿ\" class=\"headerlink\" title=\"ä¸ºä»€ä¹ˆè¦å°†æ•°ç»„é•¿åº¦è®¾ç½®ä¸º 2 çš„næ¬¡å¹‚å‘¢ï¼Ÿ\"></a>ä¸ºä»€ä¹ˆè¦å°†æ•°ç»„é•¿åº¦è®¾ç½®ä¸º 2 çš„næ¬¡å¹‚å‘¢ï¼Ÿ</h4><p>å½“æ•°ç»„é•¿åº¦ä¸º2çš„næ¬¡å¹‚çš„æ—¶å€™ï¼Œä¸åŒçš„keyä¸1111ï¼ˆnä¸ªï¼‰è¿›è¡Œä¸é¢„ç®—å¾—åˆ°ç›¸åŒä¸‹æ ‡çš„å‡ ç‡è¾ƒå°ï¼Œå‘ç”Ÿç¢°æ’çš„å‡ ç‡å°ã€‚ </p>\n<h4 id=\"JDK1-8æ–°å¢çº¢é»‘æ ‘\"><a href=\"#JDK1-8æ–°å¢çº¢é»‘æ ‘\" class=\"headerlink\" title=\"JDK1.8æ–°å¢çº¢é»‘æ ‘\"></a>JDK1.8æ–°å¢çº¢é»‘æ ‘</h4><p>ä¸ºäº†è§£å†³ä¸€æ¡é“¾ä¸Šçš„å…ƒç´ è¿‡å¤šï¼ŒæŸ¥æ‰¾æ•ˆç‡ä½çš„é—®é¢˜ï¼Œå°†é“¾è¡¨è½¬åŒ–ä¸ºçº¢é»‘æ ‘ï¼Œéå†å¤æ‚åº¦é™ä½è‡³O(logn)ï¼›</p>\n<h4 id=\"HashMapæ˜¯ä½¿ç”¨äº†å“ªäº›æ–¹æ³•æ¥æœ‰æ•ˆè§£å†³å“ˆå¸Œå†²çªçš„ï¼Ÿ\"><a href=\"#HashMapæ˜¯ä½¿ç”¨äº†å“ªäº›æ–¹æ³•æ¥æœ‰æ•ˆè§£å†³å“ˆå¸Œå†²çªçš„ï¼Ÿ\" class=\"headerlink\" title=\"HashMapæ˜¯ä½¿ç”¨äº†å“ªäº›æ–¹æ³•æ¥æœ‰æ•ˆè§£å†³å“ˆå¸Œå†²çªçš„ï¼Ÿ\"></a>HashMapæ˜¯ä½¿ç”¨äº†å“ªäº›æ–¹æ³•æ¥æœ‰æ•ˆè§£å†³å“ˆå¸Œå†²çªçš„ï¼Ÿ</h4><ol>\n<li>ä½¿ç”¨é“¾åœ°å€æ³•ï¼ˆä½¿ç”¨æ•£åˆ—è¡¨ï¼‰æ¥é“¾æ¥æ‹¥æœ‰ç›¸åŒhashå€¼çš„æ•°æ®ï¼›</li>\n<li>ä½¿ç”¨2æ¬¡æ‰°åŠ¨å‡½æ•°ï¼ˆ1æ¬¡ä½è¿ç®—å’Œ1æ¬¡å¼‚æˆ–è¿ç®—ï¼‰æ¥é™ä½å“ˆå¸Œå†²çªçš„æ¦‚ç‡ï¼Œä½¿å¾—æ•°æ®åˆ†å¸ƒæ›´å¹³å‡ï¼›</li>\n<li>å¼•å…¥çº¢é»‘æ ‘è¿›ä¸€æ­¥é™ä½éå†çš„æ—¶é—´å¤æ‚åº¦ï¼Œä½¿å¾—éå†æ›´å¿«ã€‚</li>\n</ol>\n<h3 id=\"HashMapçš„getæ–¹æ³•çš„å…·ä½“æµç¨‹ï¼Ÿ\"><a href=\"#HashMapçš„getæ–¹æ³•çš„å…·ä½“æµç¨‹ï¼Ÿ\" class=\"headerlink\" title=\"HashMapçš„getæ–¹æ³•çš„å…·ä½“æµç¨‹ï¼Ÿ\"></a>HashMapçš„getæ–¹æ³•çš„å…·ä½“æµç¨‹ï¼Ÿ</h3><ol>\n<li>å…ˆä½¿ç”¨keyçš„hashCodeã€æ‰°åŠ¨å¤„ç†ã€ä¸æ•°ç»„é•¿åº¦-1 è¿›è¡Œä¸è¿ç®—ï¼ˆå¯¹æ•°ç»„é•¿åº¦å»ä½™ï¼‰å¾—åˆ°æ§½ä½ï¼›</li>\n<li>åˆ¤æ–­é¦–ç»“ç‚¹ï¼Œå¦‚æœé¦–ç»“ç‚¹å’Œkeyçš„ <strong>hashå€¼</strong> ï¼ˆhashCodeå€¼ç»è¿‡æ‰°åŠ¨å‡½æ•°å¤„ç†åçš„å€¼ï¼‰ç›¸ç­‰ï¼Œå¹¶ä¸”ä¸¤è€…çš„ <strong>keyå€¼åœ°å€ç›¸ç­‰ã€equalsç›¸ç­‰</strong>ï¼Œåˆ™è¿”å›é¦–ç»“ç‚¹ï¼›</li>\n<li>å¦åˆ™ï¼Œåˆ™çº¢é»‘æ ‘æˆ–è€…é“¾è¡¨ä¸­è¿›è¡ŒæŸ¥æ‰¾ï¼ŒæŸ¥æ‰¾æ—¶åˆ¤æ–­ä¸¤ä¸ªkeyçš„hashå€¼ã€keyå€¼åœ°å€ç›¸ç­‰ã€equalsæ˜¯å¦éƒ½ç›¸ç­‰ã€‚</li>\n</ol>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> V <span class=\"title function_\">get</span><span class=\"params\">(Object key)</span> &#123;</span><br><span class=\"line\">    Node&lt;K,V&gt; e;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> (e = getNode(hash(key), key)) == <span class=\"literal\">null</span> ? <span class=\"literal\">null</span> : e.value;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">final</span> Node&lt;K,V&gt; <span class=\"title function_\">getNode</span><span class=\"params\">(<span class=\"type\">int</span> hash, Object key)</span> &#123;</span><br><span class=\"line\">    Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; first, e; <span class=\"type\">int</span> n; K k;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">//Nodeæ•°ç»„ä¸ä¸ºç©ºï¼Œæ•°ç»„é•¿åº¦å¤§äº0ï¼Œæ•°ç»„å¯¹åº”ä¸‹æ ‡çš„Nodeä¸ä¸ºç©º</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> ((tab = table) != <span class=\"literal\">null</span> &amp;&amp; (n = tab.length) &gt; <span class=\"number\">0</span> &amp;&amp;</span><br><span class=\"line\">        <span class=\"comment\">//ä¹Ÿæ˜¯é€šè¿‡ hash &amp; (length - 1) æ¥æ›¿ä»£ hash % length çš„</span></span><br><span class=\"line\">        (first = tab[(n - <span class=\"number\">1</span>) &amp; hash]) != <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"comment\">//å…ˆå’Œç¬¬ä¸€ä¸ªç»“ç‚¹æ¯”ï¼Œhashå€¼ç›¸ç­‰ä¸”keyä¸ä¸ºç©ºï¼Œkeyçš„ç¬¬ä¸€ä¸ªç»“ç‚¹çš„keyçš„å¯¹è±¡åœ°å€å’Œå€¼å‡ç›¸ç­‰</span></span><br><span class=\"line\">        <span class=\"comment\">//åˆ™è¿”å›ç¬¬ä¸€ä¸ªç»“ç‚¹</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (first.hash == hash &amp;&amp; <span class=\"comment\">// always check first node</span></span><br><span class=\"line\">            ((k = first.key) == key || (key != <span class=\"literal\">null</span> &amp;&amp; key.equals(k))))</span><br><span class=\"line\">            <span class=\"keyword\">return</span> first;</span><br><span class=\"line\">        <span class=\"comment\">//å¦‚æœkeyå’Œç¬¬ä¸€ä¸ªç»“ç‚¹ä¸åŒ¹é…ï¼Œåˆ™çœ‹.nextæ˜¯å¦ä¸ºç©ºï¼Œä¸ä¸ºnullåˆ™ç»§ç»­ï¼Œä¸ºç©ºåˆ™è¿”å›null</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> ((e = first.next) != <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">            <span class=\"comment\">//å¦‚æœæ­¤æ—¶æ˜¯çº¢é»‘æ ‘çš„ç»“æ„ï¼Œåˆ™è¿›è¡Œå¤„ç†getTreeNode()æ–¹æ³•æœç´¢key</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> (first <span class=\"keyword\">instanceof</span> TreeNode)</span><br><span class=\"line\">                <span class=\"keyword\">return</span> ((TreeNode&lt;K,V&gt;)first).getTreeNode(hash, key);</span><br><span class=\"line\">            <span class=\"comment\">//æ˜¯é“¾è¡¨ç»“æ„çš„è¯å°±ä¸€ä¸ªä¸€ä¸ªéå†ï¼Œç›´åˆ°æ‰¾åˆ°keyå¯¹åº”çš„ç»“ç‚¹ï¼Œ</span></span><br><span class=\"line\">            <span class=\"comment\">//æˆ–è€…eçš„ä¸‹ä¸€ä¸ªç»“ç‚¹ä¸ºnullé€€å‡ºå¾ªç¯</span></span><br><span class=\"line\">            <span class=\"keyword\">do</span> &#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (e.hash == hash &amp;&amp;</span><br><span class=\"line\">                    ((k = e.key) == key || (key != <span class=\"literal\">null</span> &amp;&amp; key.equals(k))))</span><br><span class=\"line\">                    <span class=\"keyword\">return</span> e;</span><br><span class=\"line\">            &#125; <span class=\"keyword\">while</span> ((e = e.next) != <span class=\"literal\">null</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">null</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"HashMapçš„putæ–¹æ³•çš„å…·ä½“æµç¨‹ï¼Ÿ\"><a href=\"#HashMapçš„putæ–¹æ³•çš„å…·ä½“æµç¨‹ï¼Ÿ\" class=\"headerlink\" title=\"HashMapçš„putæ–¹æ³•çš„å…·ä½“æµç¨‹ï¼Ÿ\"></a>HashMapçš„putæ–¹æ³•çš„å…·ä½“æµç¨‹ï¼Ÿ</h3><ol>\n<li>å¦‚æœtableæœªåˆå§‹åŒ–æˆ–è€…é•¿åº¦ä¸º0ç©ºåˆ™æ‰§è¡Œresize()è¿›è¡Œæ‰©å®¹ï¼Œè½¬å‘â‘¡</li>\n<li>æ ¹æ®é”®å€¼keyè®¡ç®—hashå€¼å¾—åˆ°æ’å…¥çš„æ•°ç»„ç´¢å¼•iï¼Œå¦‚æœtable[i]&#x3D;&#x3D;nullï¼Œå³æ•°ç»„è¯¥ä½ç½®ä¸Šæ²¡æœ‰å…ƒç´ ï¼Œç›´æ¥æ–°å»ºèŠ‚ç‚¹æ’å…¥ï¼Œè½¬å‘â‘¥åˆ¤æ–­æ˜¯å¦éœ€è¦æ‰©å®¹ï¼Œå¦‚æœtable[i]ä¸ä¸ºç©ºï¼Œè½¬å‘â‘¢ï¼›</li>\n<li>åˆ¤æ–­table[i]çš„é¦–ä¸ªå…ƒç´ æ˜¯å¦å’Œkeyä¸€æ ·ï¼Œå¦‚æœç›¸åŒï¼ˆhashCodeç›¸åŒã€keyåœ°å€ç›¸åŒã€equalsç›¸åŒï¼‰ç›´æ¥è¦†ç›–valueï¼Œå¦åˆ™è½¬å‘â‘£ï¼›</li>\n<li>åˆ¤æ–­table[i] æ˜¯å¦ä¸ºtreeNodeï¼Œå³table[i] æ˜¯å¦æ˜¯çº¢é»‘æ ‘ï¼Œå¦‚æœæ˜¯çº¢é»‘æ ‘ï¼Œåˆ™ç›´æ¥åœ¨æ ‘ä¸­æ’å…¥é”®å€¼å¯¹ï¼Œå¦åˆ™è½¬å‘â‘¤ï¼›</li>\n<li>éå†table[i]ï¼Œåˆ¤æ–­é“¾è¡¨é•¿åº¦æ˜¯å¦å¤§äº8ï¼Œå¤§äº8çš„è¯æŠŠé“¾è¡¨è½¬æ¢ä¸ºçº¢é»‘æ ‘ï¼Œåœ¨çº¢é»‘æ ‘ä¸­æ‰§è¡Œæ’å…¥æ“ä½œï¼Œå¦åˆ™è¿›è¡Œé“¾è¡¨çš„æ’å…¥æ“ä½œï¼›éå†è¿‡ç¨‹ä¸­è‹¥å‘ç°keyå·²ç»å­˜åœ¨ç›´æ¥è¦†ç›–valueå³å¯ï¼›</li>\n<li>æ’å…¥æˆåŠŸåï¼Œåˆ¤æ–­å®é™…å­˜åœ¨çš„é”®å€¼å¯¹æ•°é‡sizeæ˜¯å¦è¶…å‡ºå½“å‰æœ€å¤§å®¹é‡thresholdï¼Œå¦‚æœè¶…è¿‡ï¼Œè¿›è¡Œæ‰©å®¹ã€‚</li>\n</ol>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> V <span class=\"title function_\">put</span><span class=\"params\">(K key, V value)</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> putVal(hash(key), key, value, <span class=\"literal\">false</span>, <span class=\"literal\">true</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"type\">int</span> <span class=\"title function_\">hash</span><span class=\"params\">(Object key)</span> &#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> h;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> (key == <span class=\"literal\">null</span>) ? <span class=\"number\">0</span> : (h = key.hashCode()) ^ (h &gt;&gt;&gt; <span class=\"number\">16</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//å®ç°Map.putå’Œç›¸å…³æ–¹æ³•</span></span><br><span class=\"line\"><span class=\"keyword\">final</span> V <span class=\"title function_\">putVal</span><span class=\"params\">(<span class=\"type\">int</span> hash, K key, V value, <span class=\"type\">boolean</span> onlyIfAbsent,</span></span><br><span class=\"line\"><span class=\"params\">                   <span class=\"type\">boolean</span> evict)</span> &#123;</span><br><span class=\"line\">    Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; p; <span class=\"type\">int</span> n, i;</span><br><span class=\"line\">    <span class=\"comment\">// æ­¥éª¤â‘ ï¼štabä¸ºç©ºåˆ™åˆ›å»º </span></span><br><span class=\"line\">    <span class=\"comment\">// tableæœªåˆå§‹åŒ–æˆ–è€…é•¿åº¦ä¸º0ï¼Œè¿›è¡Œæ‰©å®¹</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> ((tab = table) == <span class=\"literal\">null</span> || (n = tab.length) == <span class=\"number\">0</span>)</span><br><span class=\"line\">        n = (tab = resize()).length;</span><br><span class=\"line\">    <span class=\"comment\">// æ­¥éª¤â‘¡ï¼šè®¡ç®—indexï¼Œå¹¶å¯¹nullåšå¤„ç†  </span></span><br><span class=\"line\">    <span class=\"comment\">// (n - 1) &amp; hash ç¡®å®šå…ƒç´ å­˜æ”¾åœ¨å“ªä¸ªæ¡¶ä¸­ï¼Œæ¡¶ä¸ºç©ºï¼Œæ–°ç”Ÿæˆç»“ç‚¹æ”¾å…¥æ¡¶ä¸­(æ­¤æ—¶ï¼Œè¿™ä¸ªç»“ç‚¹æ˜¯æ”¾åœ¨æ•°ç»„ä¸­)</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> ((p = tab[i = (n - <span class=\"number\">1</span>) &amp; hash]) == <span class=\"literal\">null</span>)</span><br><span class=\"line\">        tab[i] = newNode(hash, key, value, <span class=\"literal\">null</span>);</span><br><span class=\"line\">    <span class=\"comment\">// æ¡¶ä¸­å·²ç»å­˜åœ¨å…ƒç´ </span></span><br><span class=\"line\">    <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        Node&lt;K,V&gt; e; K k;</span><br><span class=\"line\">        <span class=\"comment\">// æ­¥éª¤â‘¢ï¼šèŠ‚ç‚¹keyå­˜åœ¨ï¼Œç›´æ¥è¦†ç›–value </span></span><br><span class=\"line\">        <span class=\"comment\">// æ¯”è¾ƒæ¡¶ä¸­ç¬¬ä¸€ä¸ªå…ƒç´ (æ•°ç»„ä¸­çš„ç»“ç‚¹)çš„hashå€¼ç›¸ç­‰ï¼Œkeyç›¸ç­‰</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (p.hash == hash &amp;&amp;</span><br><span class=\"line\">            ((k = p.key) == key || (key != <span class=\"literal\">null</span> &amp;&amp; key.equals(k))))</span><br><span class=\"line\">                <span class=\"comment\">// å°†ç¬¬ä¸€ä¸ªå…ƒç´ èµ‹å€¼ç»™eï¼Œç”¨eæ¥è®°å½•</span></span><br><span class=\"line\">                e = p;</span><br><span class=\"line\">        <span class=\"comment\">// æ­¥éª¤â‘£ï¼šåˆ¤æ–­è¯¥é“¾ä¸ºçº¢é»‘æ ‘ </span></span><br><span class=\"line\">        <span class=\"comment\">// hashå€¼ä¸ç›¸ç­‰ï¼Œå³keyä¸ç›¸ç­‰ï¼›ä¸ºçº¢é»‘æ ‘ç»“ç‚¹</span></span><br><span class=\"line\">        <span class=\"comment\">// å¦‚æœå½“å‰å…ƒç´ ç±»å‹ä¸ºTreeNodeï¼Œè¡¨ç¤ºä¸ºçº¢é»‘æ ‘ï¼ŒputTreeValè¿”å›å¾…å­˜æ”¾çš„node, eå¯èƒ½ä¸ºnull</span></span><br><span class=\"line\">        <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (p <span class=\"keyword\">instanceof</span> TreeNode)</span><br><span class=\"line\">            <span class=\"comment\">// æ”¾å…¥æ ‘ä¸­</span></span><br><span class=\"line\">            e = ((TreeNode&lt;K,V&gt;)p).putTreeVal(<span class=\"built_in\">this</span>, tab, hash, key, value);</span><br><span class=\"line\">        <span class=\"comment\">// æ­¥éª¤â‘¤ï¼šè¯¥é“¾ä¸ºé“¾è¡¨ </span></span><br><span class=\"line\">        <span class=\"comment\">// ä¸ºé“¾è¡¨ç»“ç‚¹</span></span><br><span class=\"line\">        <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            <span class=\"comment\">// åœ¨é“¾è¡¨æœ€æœ«æ’å…¥ç»“ç‚¹</span></span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">binCount</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>; ; ++binCount) &#123;</span><br><span class=\"line\">                <span class=\"comment\">// åˆ°è¾¾é“¾è¡¨çš„å°¾éƒ¨</span></span><br><span class=\"line\">                </span><br><span class=\"line\">                <span class=\"comment\">//åˆ¤æ–­è¯¥é“¾è¡¨å°¾éƒ¨æŒ‡é’ˆæ˜¯ä¸æ˜¯ç©ºçš„</span></span><br><span class=\"line\">                <span class=\"keyword\">if</span> ((e = p.next) == <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">                    <span class=\"comment\">// åœ¨å°¾éƒ¨æ’å…¥æ–°ç»“ç‚¹</span></span><br><span class=\"line\">                    p.next = newNode(hash, key, value, <span class=\"literal\">null</span>);</span><br><span class=\"line\">                    <span class=\"comment\">//åˆ¤æ–­é“¾è¡¨çš„é•¿åº¦æ˜¯å¦è¾¾åˆ°è½¬åŒ–çº¢é»‘æ ‘çš„ä¸´ç•Œå€¼ï¼Œä¸´ç•Œå€¼ä¸º8</span></span><br><span class=\"line\">                    <span class=\"keyword\">if</span> (binCount &gt;= TREEIFY_THRESHOLD - <span class=\"number\">1</span>) <span class=\"comment\">// -1 for 1st</span></span><br><span class=\"line\">                        <span class=\"comment\">//é“¾è¡¨ç»“æ„è½¬æ ‘å½¢ç»“æ„</span></span><br><span class=\"line\">                        treeifyBin(tab, hash);</span><br><span class=\"line\">                    <span class=\"comment\">// è·³å‡ºå¾ªç¯</span></span><br><span class=\"line\">                    <span class=\"keyword\">break</span>;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                <span class=\"comment\">// åˆ¤æ–­é“¾è¡¨ä¸­ç»“ç‚¹çš„keyå€¼ä¸æ’å…¥çš„å…ƒç´ çš„keyå€¼æ˜¯å¦ç›¸ç­‰</span></span><br><span class=\"line\">                <span class=\"keyword\">if</span> (e.hash == hash &amp;&amp;</span><br><span class=\"line\">                    ((k = e.key) == key || (key != <span class=\"literal\">null</span> &amp;&amp; key.equals(k))))</span><br><span class=\"line\">                    <span class=\"comment\">// ç›¸ç­‰ï¼Œè·³å‡ºå¾ªç¯</span></span><br><span class=\"line\">                    <span class=\"keyword\">break</span>;</span><br><span class=\"line\">                <span class=\"comment\">// ç”¨äºéå†æ¡¶ä¸­çš„é“¾è¡¨ï¼Œä¸å‰é¢çš„e = p.nextç»„åˆï¼Œå¯ä»¥éå†é“¾è¡¨</span></span><br><span class=\"line\">                p = e;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">//åˆ¤æ–­å½“å‰çš„keyå·²ç»å­˜åœ¨çš„æƒ…å†µä¸‹ï¼Œå†æ¥ä¸€ä¸ªç›¸åŒçš„hashå€¼ã€keyå€¼æ—¶ï¼Œè¿”å›æ–°æ¥çš„valueè¿™ä¸ªå€¼</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (e != <span class=\"literal\">null</span>) &#123; </span><br><span class=\"line\">            <span class=\"comment\">// è®°å½•eçš„value</span></span><br><span class=\"line\">            <span class=\"type\">V</span> <span class=\"variable\">oldValue</span> <span class=\"operator\">=</span> e.value;</span><br><span class=\"line\">            <span class=\"comment\">// onlyIfAbsentä¸ºfalseæˆ–è€…æ—§å€¼ä¸ºnull</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> (!onlyIfAbsent || oldValue == <span class=\"literal\">null</span>)</span><br><span class=\"line\">                <span class=\"comment\">//ç”¨æ–°å€¼æ›¿æ¢æ—§å€¼</span></span><br><span class=\"line\">                e.value = value;</span><br><span class=\"line\">            <span class=\"comment\">// è®¿é—®åå›è°ƒ</span></span><br><span class=\"line\">            afterNodeAccess(e);</span><br><span class=\"line\">            <span class=\"comment\">// è¿”å›æ—§å€¼</span></span><br><span class=\"line\">            <span class=\"keyword\">return</span> oldValue;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// ç»“æ„æ€§ä¿®æ”¹</span></span><br><span class=\"line\">    ++modCount;</span><br><span class=\"line\">    <span class=\"comment\">// æ­¥éª¤â‘¥ï¼šè¶…è¿‡æœ€å¤§å®¹é‡å°±æ‰©å®¹ </span></span><br><span class=\"line\">    <span class=\"comment\">// å®é™…å¤§å°å¤§äºé˜ˆå€¼åˆ™æ‰©å®¹</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (++size &gt; threshold)</span><br><span class=\"line\">        resize();</span><br><span class=\"line\">    <span class=\"comment\">// æ’å…¥åå›è°ƒ</span></span><br><span class=\"line\">    afterNodeInsertion(evict);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">null</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"HashMapçš„æ‰©å®¹æ“ä½œæ˜¯æ€ä¹ˆå®ç°çš„ï¼Ÿ\"><a href=\"#HashMapçš„æ‰©å®¹æ“ä½œæ˜¯æ€ä¹ˆå®ç°çš„ï¼Ÿ\" class=\"headerlink\" title=\"HashMapçš„æ‰©å®¹æ“ä½œæ˜¯æ€ä¹ˆå®ç°çš„ï¼Ÿ\"></a>HashMapçš„æ‰©å®¹æ“ä½œæ˜¯æ€ä¹ˆå®ç°çš„ï¼Ÿ</h3><p>â‘ .åœ¨jdk1.8ä¸­ï¼Œresizeæ–¹æ³•æ˜¯åœ¨hashmapä¸­çš„é”®å€¼å¯¹ï¼ˆå…ƒç´ æ•°é‡ï¼‰å¤§äºé˜€å€¼æ—¶ï¼ˆé˜ˆå€¼ä¸ºå®¹é‡*è´Ÿè½½å› å­ï¼‰æ‰©å®¹ä¸ºåŸå®¹é‡çš„2å€ï¼Œæˆ–è€…åˆå§‹åŒ–æ—¶ï¼ˆæ‰©å®¹ä¸º16ï¼‰ï¼Œå°±è°ƒç”¨resizeæ–¹æ³•è¿›è¡Œæ‰©å®¹ï¼›</p>\n<p>â‘¡.åœ¨1.7ä¸­ï¼Œæ‰©å®¹ä¹‹åéœ€è¦é‡æ–°å»è®¡ç®—å…¶Hashå€¼ï¼Œæ ¹æ®Hashå€¼å¯¹å…¶è¿›è¡Œåˆ†å‘ï¼Œä½†åœ¨1.8ç‰ˆæœ¬ä¸­ï¼Œåˆ™æ˜¯æ ¹æ®åœ¨åŒä¸€ä¸ªæ¡¶çš„ä½ç½®ä¸­è¿›è¡Œåˆ¤æ–­(e.hash &amp; oldCap)æ˜¯å¦ä¸º0ï¼Œé‡æ–°è¿›è¡Œhashåˆ†é…åï¼Œè¯¥å…ƒç´ hashå€¼ä¸æ—§å®¹é‡ä¸è¿ç®—ä¸º0åˆ™ç•™åœ¨åŸå§‹ä½ç½®ï¼Œhashå€¼ä¸æ—§å®¹é‡ä¸è¿ç®—ä¸º1åˆ™ç§»åŠ¨åˆ° åŸä½ç½® + oldCap è¿™ä¸ªä½ç½®ä¸Š</p>\n<p><img src=\"https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/TyporaNotes20190128152700351.png\" alt=\"HashMapçš„resizeæ“ä½œ\"></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">final</span> Node&lt;K,V&gt;[] resize() &#123;</span><br><span class=\"line\">    Node&lt;K,V&gt;[] oldTab = table;<span class=\"comment\">//oldTabæŒ‡å‘hashæ¡¶æ•°ç»„</span></span><br><span class=\"line\">    <span class=\"type\">int</span> <span class=\"variable\">oldCap</span> <span class=\"operator\">=</span> (oldTab == <span class=\"literal\">null</span>) ? <span class=\"number\">0</span> : oldTab.length;</span><br><span class=\"line\">    <span class=\"type\">int</span> <span class=\"variable\">oldThr</span> <span class=\"operator\">=</span> threshold;</span><br><span class=\"line\">    <span class=\"type\">int</span> newCap, newThr = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (oldCap &gt; <span class=\"number\">0</span>) &#123;<span class=\"comment\">//å¦‚æœoldCapä¸ä¸ºç©ºçš„è¯ï¼Œå°±æ˜¯hashæ¡¶æ•°ç»„ä¸ä¸ºç©º</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (oldCap &gt;= MAXIMUM_CAPACITY) &#123;<span class=\"comment\">//å¦‚æœå¤§äºæœ€å¤§å®¹é‡äº†ï¼Œå°±èµ‹å€¼ä¸ºæ•´æ•°æœ€å¤§çš„é˜€å€¼</span></span><br><span class=\"line\">            threshold = Integer.MAX_VALUE;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> oldTab;<span class=\"comment\">//è¿”å›</span></span><br><span class=\"line\">        &#125;<span class=\"comment\">//å¦‚æœå½“å‰hashæ¡¶æ•°ç»„çš„é•¿åº¦åœ¨æ‰©å®¹åä»ç„¶å°äºæœ€å¤§å®¹é‡ å¹¶ä¸”oldCapå¤§äºé»˜è®¤å€¼16</span></span><br><span class=\"line\">        <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> ((newCap = oldCap &lt;&lt; <span class=\"number\">1</span>) &lt; MAXIMUM_CAPACITY &amp;&amp;</span><br><span class=\"line\">                 oldCap &gt;= DEFAULT_INITIAL_CAPACITY)</span><br><span class=\"line\">            newThr = oldThr &lt;&lt; <span class=\"number\">1</span>; <span class=\"comment\">// double threshold åŒå€æ‰©å®¹é˜€å€¼threshold</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// æ—§çš„å®¹é‡ä¸º0ï¼Œä½†thresholdå¤§äºé›¶ï¼Œä»£è¡¨æœ‰å‚æ„é€ æœ‰capä¼ å…¥ï¼Œthresholdå·²ç»è¢«åˆå§‹åŒ–æˆæœ€å°2çš„næ¬¡å¹‚</span></span><br><span class=\"line\">    <span class=\"comment\">// ç›´æ¥å°†è¯¥å€¼èµ‹ç»™æ–°çš„å®¹é‡</span></span><br><span class=\"line\">    <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (oldThr &gt; <span class=\"number\">0</span>) <span class=\"comment\">// initial capacity was placed in threshold</span></span><br><span class=\"line\">        newCap = oldThr;</span><br><span class=\"line\">    <span class=\"comment\">// æ— å‚æ„é€ åˆ›å»ºçš„mapï¼Œç»™å‡ºé»˜è®¤å®¹é‡å’Œthreshold 16, 16*0.75</span></span><br><span class=\"line\">    <span class=\"keyword\">else</span> &#123;               <span class=\"comment\">// zero initial threshold signifies using defaults</span></span><br><span class=\"line\">        newCap = DEFAULT_INITIAL_CAPACITY;</span><br><span class=\"line\">        newThr = (<span class=\"type\">int</span>)(DEFAULT_LOAD_FACTOR * DEFAULT_INITIAL_CAPACITY);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// æ–°çš„threshold = æ–°çš„cap * 0.75</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (newThr == <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">        <span class=\"type\">float</span> <span class=\"variable\">ft</span> <span class=\"operator\">=</span> (<span class=\"type\">float</span>)newCap * loadFactor;</span><br><span class=\"line\">        newThr = (newCap &lt; MAXIMUM_CAPACITY &amp;&amp; ft &lt; (<span class=\"type\">float</span>)MAXIMUM_CAPACITY ?</span><br><span class=\"line\">                  (<span class=\"type\">int</span>)ft : Integer.MAX_VALUE);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    threshold = newThr;</span><br><span class=\"line\">    <span class=\"comment\">// è®¡ç®—å‡ºæ–°çš„æ•°ç»„é•¿åº¦åèµ‹ç»™å½“å‰æˆå‘˜å˜é‡table</span></span><br><span class=\"line\">    <span class=\"meta\">@SuppressWarnings(&#123;&quot;rawtypes&quot;,&quot;unchecked&quot;&#125;)</span></span><br><span class=\"line\">        Node&lt;K,V&gt;[] newTab = (Node&lt;K,V&gt;[])<span class=\"keyword\">new</span> <span class=\"title class_\">Node</span>[newCap];<span class=\"comment\">//æ–°å»ºhashæ¡¶æ•°ç»„</span></span><br><span class=\"line\">    table = newTab;<span class=\"comment\">//å°†æ–°æ•°ç»„çš„å€¼å¤åˆ¶ç»™æ—§çš„hashæ¡¶æ•°ç»„</span></span><br><span class=\"line\">    <span class=\"comment\">// å¦‚æœåŸå…ˆçš„æ•°ç»„æ²¡æœ‰åˆå§‹åŒ–ï¼Œé‚£ä¹ˆresizeçš„åˆå§‹åŒ–å·¥ä½œåˆ°æ­¤ç»“æŸï¼Œå¦åˆ™è¿›å…¥æ‰©å®¹å…ƒç´ é‡æ’é€»è¾‘ï¼Œä½¿å…¶å‡åŒ€çš„åˆ†æ•£</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (oldTab != <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// éå†æ–°æ•°ç»„çš„æ‰€æœ‰æ¡¶ä¸‹æ ‡</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">j</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>; j &lt; oldCap; ++j) &#123;</span><br><span class=\"line\">            Node&lt;K,V&gt; e;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> ((e = oldTab[j]) != <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">                <span class=\"comment\">// æ—§æ•°ç»„çš„æ¡¶ä¸‹æ ‡èµ‹ç»™ä¸´æ—¶å˜é‡eï¼Œå¹¶ä¸”è§£é™¤æ—§æ•°ç»„ä¸­çš„å¼•ç”¨ï¼Œå¦åˆ™å°±æ•°ç»„æ— æ³•è¢«GCå›æ”¶</span></span><br><span class=\"line\">                oldTab[j] = <span class=\"literal\">null</span>;</span><br><span class=\"line\">                <span class=\"comment\">// å¦‚æœe.next==nullï¼Œä»£è¡¨æ¡¶ä¸­å°±ä¸€ä¸ªå…ƒç´ ï¼Œä¸å­˜åœ¨é“¾è¡¨æˆ–è€…çº¢é»‘æ ‘</span></span><br><span class=\"line\">                <span class=\"keyword\">if</span> (e.next == <span class=\"literal\">null</span>)</span><br><span class=\"line\">                    <span class=\"comment\">// ç”¨åŒæ ·çš„hashæ˜ å°„ç®—æ³•æŠŠè¯¥å…ƒç´ åŠ å…¥æ–°çš„æ•°ç»„</span></span><br><span class=\"line\">                    newTab[e.hash &amp; (newCap - <span class=\"number\">1</span>)] = e;</span><br><span class=\"line\">                <span class=\"comment\">// å¦‚æœeæ˜¯TreeNodeå¹¶ä¸”e.next!=nullï¼Œé‚£ä¹ˆå¤„ç†æ ‘ä¸­å…ƒç´ çš„é‡æ’</span></span><br><span class=\"line\">                <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (e <span class=\"keyword\">instanceof</span> TreeNode)</span><br><span class=\"line\">                    ((TreeNode&lt;K,V&gt;)e).split(<span class=\"built_in\">this</span>, newTab, j, oldCap);</span><br><span class=\"line\">                <span class=\"comment\">// eæ˜¯é“¾è¡¨çš„å¤´å¹¶ä¸”e.next!=nullï¼Œé‚£ä¹ˆå¤„ç†é“¾è¡¨ä¸­å…ƒç´ é‡æ’</span></span><br><span class=\"line\">                <span class=\"keyword\">else</span> &#123; <span class=\"comment\">// preserve order</span></span><br><span class=\"line\">                    <span class=\"comment\">// loHead,loTail ä»£è¡¨æ‰©å®¹åä¸ç”¨å˜æ¢ä¸‹æ ‡ï¼Œè§æ³¨1</span></span><br><span class=\"line\">                    Node&lt;K,V&gt; loHead = <span class=\"literal\">null</span>, loTail = <span class=\"literal\">null</span>;</span><br><span class=\"line\">                    <span class=\"comment\">// hiHead,hiTail ä»£è¡¨æ‰©å®¹åå˜æ¢ä¸‹æ ‡ï¼Œè§æ³¨1</span></span><br><span class=\"line\">                    Node&lt;K,V&gt; hiHead = <span class=\"literal\">null</span>, hiTail = <span class=\"literal\">null</span>;</span><br><span class=\"line\">                    Node&lt;K,V&gt; next;</span><br><span class=\"line\">                    <span class=\"comment\">// éå†é“¾è¡¨</span></span><br><span class=\"line\">                    <span class=\"keyword\">do</span> &#123;             </span><br><span class=\"line\">                        next = e.next;</span><br><span class=\"line\">                        <span class=\"keyword\">if</span> ((e.hash &amp; oldCap) == <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">                            <span class=\"keyword\">if</span> (loTail == <span class=\"literal\">null</span>)</span><br><span class=\"line\">                                <span class=\"comment\">// åˆå§‹åŒ–headæŒ‡å‘é“¾è¡¨å½“å‰å…ƒç´ eï¼Œeä¸ä¸€å®šæ˜¯é“¾è¡¨çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œåˆå§‹åŒ–åloHead</span></span><br><span class=\"line\">                                <span class=\"comment\">// ä»£è¡¨ä¸‹æ ‡ä¿æŒä¸å˜çš„é“¾è¡¨çš„å¤´å…ƒç´ </span></span><br><span class=\"line\">                                loHead = e;</span><br><span class=\"line\">                            <span class=\"keyword\">else</span>                                </span><br><span class=\"line\">                                <span class=\"comment\">// loTail.nextæŒ‡å‘å½“å‰e</span></span><br><span class=\"line\">                                loTail.next = e;</span><br><span class=\"line\">                            <span class=\"comment\">// loTailæŒ‡å‘å½“å‰çš„å…ƒç´ e</span></span><br><span class=\"line\">                            <span class=\"comment\">// åˆå§‹åŒ–åï¼ŒloTailå’ŒloHeadæŒ‡å‘ç›¸åŒçš„å†…å­˜ï¼Œæ‰€ä»¥å½“loTail.nextæŒ‡å‘ä¸‹ä¸€ä¸ªå…ƒç´ æ—¶ï¼Œ</span></span><br><span class=\"line\">                            <span class=\"comment\">// åº•å±‚æ•°ç»„ä¸­çš„å…ƒç´ çš„nextå¼•ç”¨ä¹Ÿç›¸åº”å‘ç”Ÿå˜åŒ–ï¼Œé€ æˆlowHead.next.next.....</span></span><br><span class=\"line\">                            <span class=\"comment\">// è·ŸéšloTailåŒæ­¥ï¼Œä½¿å¾—lowHeadå¯ä»¥é“¾æ¥åˆ°æ‰€æœ‰å±äºè¯¥é“¾è¡¨çš„å…ƒç´ ã€‚</span></span><br><span class=\"line\">                            loTail = e;                           </span><br><span class=\"line\">                        &#125;</span><br><span class=\"line\">                        <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                            <span class=\"keyword\">if</span> (hiTail == <span class=\"literal\">null</span>)</span><br><span class=\"line\">                                <span class=\"comment\">// åˆå§‹åŒ–headæŒ‡å‘é“¾è¡¨å½“å‰å…ƒç´ e, åˆå§‹åŒ–åhiHeadä»£è¡¨ä¸‹æ ‡æ›´æ”¹çš„é“¾è¡¨å¤´å…ƒç´ </span></span><br><span class=\"line\">                                hiHead = e;</span><br><span class=\"line\">                            <span class=\"keyword\">else</span></span><br><span class=\"line\">                                hiTail.next = e;</span><br><span class=\"line\">                            hiTail = e;</span><br><span class=\"line\">                        &#125;</span><br><span class=\"line\">                    &#125; <span class=\"keyword\">while</span> ((e = next) != <span class=\"literal\">null</span>);</span><br><span class=\"line\">                    <span class=\"comment\">// éå†ç»“æŸ, å°†tailæŒ‡å‘nullï¼Œå¹¶æŠŠé“¾è¡¨å¤´æ”¾å…¥æ–°æ•°ç»„çš„ç›¸åº”ä¸‹æ ‡ï¼Œå½¢æˆæ–°çš„æ˜ å°„ã€‚</span></span><br><span class=\"line\">                    <span class=\"keyword\">if</span> (loTail != <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">                        loTail.next = <span class=\"literal\">null</span>;</span><br><span class=\"line\">                        newTab[j] = loHead;</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                    <span class=\"keyword\">if</span> (hiTail != <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">                        hiTail.next = <span class=\"literal\">null</span>;</span><br><span class=\"line\">                        newTab[j + oldCap] = hiHead;</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> newTab;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"HashMapè´Ÿè½½å› å­ä¸ºä»€ä¹ˆè®¾ç½®ä¸º-0-75\"><a href=\"#HashMapè´Ÿè½½å› å­ä¸ºä»€ä¹ˆè®¾ç½®ä¸º-0-75\" class=\"headerlink\" title=\"HashMapè´Ÿè½½å› å­ä¸ºä»€ä¹ˆè®¾ç½®ä¸º 0.75?\"></a>HashMapè´Ÿè½½å› å­ä¸ºä»€ä¹ˆè®¾ç½®ä¸º 0.75?</h3><p>hashmapçš„æºç ä¸­æœ‰ä¸€æ®µæ³¨é‡Šè§£é‡Šäº†ä¸ºä»€ä¹ˆè®¾ç½®ä¸º0.75ï¼Œæ˜¯<strong>ç©ºé—´å’Œæ—¶é—´æ•ˆç‡çš„æŠ˜ä¸­è€ƒè™‘</strong>ã€‚</p>\n<h3 id=\"èƒ½å¦ä½¿ç”¨ä»»ä½•ç±»ä½œä¸º-Map-çš„-keyï¼Ÿ\"><a href=\"#èƒ½å¦ä½¿ç”¨ä»»ä½•ç±»ä½œä¸º-Map-çš„-keyï¼Ÿ\" class=\"headerlink\" title=\"èƒ½å¦ä½¿ç”¨ä»»ä½•ç±»ä½œä¸º Map çš„ keyï¼Ÿ\"></a>èƒ½å¦ä½¿ç”¨ä»»ä½•ç±»ä½œä¸º Map çš„ keyï¼Ÿ</h3><p>å¯ä»¥ä½¿ç”¨ä»»ä½•ç±»ä½œä¸º Map çš„ keyï¼Œå‰ææ˜¯è¯¥ç±»é‡å†™äº†hashCodeå’Œequalsæ–¹æ³•ã€‚é‡å†™hashCode() æ˜¯ä¸ºäº†è®¡ç®—æ•°æ®çš„å­˜å‚¨ä½ç½®ï¼Œé‡å†™equalsæ–¹æ³•æ˜¯ä¸ºäº†ç¡®ä¿keyåœ¨å“ˆå¸Œè¡¨ä¸­çš„å”¯ä¸€æ€§ã€‚æœ€ç»ˆç›®çš„æ˜¯ä¸ºäº†ä¿è¯ Map ä¸­é”®keyçš„å”¯ä¸€æ€§ã€‚</p>\n<h3 id=\"ä¸ºä»€ä¹ˆHashMapä¸­Stringã€Integerè¿™æ ·çš„åŒ…è£…ç±»é€‚åˆä½œä¸ºkeyï¼Ÿ\"><a href=\"#ä¸ºä»€ä¹ˆHashMapä¸­Stringã€Integerè¿™æ ·çš„åŒ…è£…ç±»é€‚åˆä½œä¸ºkeyï¼Ÿ\" class=\"headerlink\" title=\"ä¸ºä»€ä¹ˆHashMapä¸­Stringã€Integerè¿™æ ·çš„åŒ…è£…ç±»é€‚åˆä½œä¸ºkeyï¼Ÿ\"></a>ä¸ºä»€ä¹ˆHashMapä¸­Stringã€Integerè¿™æ ·çš„åŒ…è£…ç±»é€‚åˆä½œä¸ºkeyï¼Ÿ</h3><p>é‡å†™äº†hashCodeå’Œequalsæ–¹æ³•ï¼Œä¿è¯äº† Map ä¸­é”®<strong>keyçš„å”¯ä¸€æ€§</strong>ã€‚å¹¶ä¸”ä»–ä»¬éƒ½ä¸å¯å˜ï¼Œå¯ä»¥å°†å®ƒä»¬çš„hashå€¼<strong>ç¼“å­˜ä¸‹æ¥ï¼Œæé«˜æ•ˆç‡</strong>ã€‚</p>\n<h3 id=\"HashMap-ä¸-HashTable-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\"><a href=\"#HashMap-ä¸-HashTable-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\" class=\"headerlink\" title=\"HashMap ä¸ HashTable æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\"></a>HashMap ä¸ HashTable æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h3><ol>\n<li><strong>çº¿ç¨‹å®‰å…¨</strong>ï¼š HashMap æ˜¯éçº¿ç¨‹å®‰å…¨çš„ï¼ŒHashTable æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå†…éƒ¨çš„æ–¹æ³•åŸºæœ¬éƒ½ç»è¿‡ <code>synchronized</code> ä¿®é¥°ï¼›</li>\n<li><strong>æ•ˆç‡</strong>ï¼š å› ä¸ºçº¿ç¨‹å®‰å…¨çš„é—®é¢˜ synchronizedï¼ŒHashMap è¦æ¯” HashTable æ•ˆç‡é«˜ä¸€ç‚¹ï¼›</li>\n<li><strong>å¯¹Null key å’ŒNull valueçš„æ”¯æŒ</strong>ï¼š HashMap ä¸­ï¼Œnull å¯ä»¥ä½œä¸ºé”®ï¼Œè¿™æ ·çš„é”®åªæœ‰ä¸€ä¸ªï¼Œå¯ä»¥æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªé”®æ‰€å¯¹åº”çš„å€¼ä¸º nullã€‚ä½†æ˜¯åœ¨ HashTable ä¸­ put è¿›çš„é”®å€¼åªè¦æœ‰ä¸€ä¸ª nullï¼Œç›´æ¥æŠ›NullPointerExceptionï¼›</li>\n<li>**åˆå§‹å®¹é‡å¤§å°å’Œæ¯æ¬¡æ‰©å……å®¹é‡å¤§å°çš„ä¸åŒ **ï¼š<br> â‘ åˆ›å»ºæ—¶å¦‚æœä¸æŒ‡å®šå®¹é‡åˆå§‹å€¼ï¼ŒHashTable é»˜è®¤çš„åˆå§‹å¤§å°ä¸º11ï¼Œä¹‹åæ¯æ¬¡æ‰©å……ï¼Œå®¹é‡å˜ä¸ºåŸæ¥çš„2n+1ã€‚HashMap é»˜è®¤çš„åˆå§‹åŒ–å¤§å°ä¸º16ã€‚ä¹‹åæ¯æ¬¡æ‰©å……ï¼Œå®¹é‡å˜ä¸ºåŸæ¥çš„2å€ï¼›<br> â‘¡åˆ›å»ºæ—¶å¦‚æœç»™å®šäº†å®¹é‡åˆå§‹å€¼ï¼Œé‚£ä¹ˆ HashTable ä¼šç›´æ¥ä½¿ç”¨ä½ ç»™å®šçš„å¤§å°ï¼Œè€Œ HashMap ä¼šå°†å…¶æ‰©å……ä¸º2çš„å¹‚æ¬¡æ–¹å¤§å°ã€‚ä¹Ÿå°±æ˜¯è¯´ HashMap æ€»æ˜¯ä½¿ç”¨2çš„å¹‚ä½œä¸ºå“ˆå¸Œè¡¨çš„å¤§å°ï¼›</li>\n<li><strong>åº•å±‚æ•°æ®ç»“æ„</strong>ï¼š JDK1.8 ä»¥åçš„ HashMap åœ¨è§£å†³å“ˆå¸Œå†²çªæ—¶æœ‰äº†è¾ƒå¤§çš„å˜åŒ–ï¼Œå½“é“¾è¡¨é•¿åº¦å¤§äºé˜ˆå€¼ï¼ˆé»˜è®¤ä¸º8ï¼‰æ—¶ï¼Œå°†é“¾è¡¨è½¬åŒ–ä¸ºçº¢é»‘æ ‘ï¼Œä»¥å‡å°‘æœç´¢æ—¶é—´ã€‚HashTable æ²¡æœ‰è¿™æ ·çš„æœºåˆ¶ã€‚</li>\n</ol>\n<h3 id=\"ConcurrentHashMap-å’Œ-HashTable-çš„åŒºåˆ«ï¼Ÿ\"><a href=\"#ConcurrentHashMap-å’Œ-HashTable-çš„åŒºåˆ«ï¼Ÿ\" class=\"headerlink\" title=\"ConcurrentHashMap å’Œ HashTable çš„åŒºåˆ«ï¼Ÿ\"></a>ConcurrentHashMap å’Œ HashTable çš„åŒºåˆ«ï¼Ÿ</h3><p>ConcurrentHashMap å’Œ HashTable çš„åŒºåˆ«ä¸»è¦ä½“ç°åœ¨å®ç°çº¿ç¨‹å®‰å…¨çš„æ–¹å¼ä¸Šä¸åŒã€‚</p>\n<ul>\n<li><strong>åº•å±‚æ•°æ®ç»“æ„</strong>ï¼š<br>  JDK1.7çš„ ConcurrentHashMap åº•å±‚é‡‡ç”¨ <strong>åˆ†æ®µçš„æ•°ç»„+é“¾è¡¨</strong> å®ç°ï¼ŒJDK1.8 é‡‡ç”¨çš„æ•°æ®ç»“æ„è·ŸHashMap1.8çš„ç»“æ„ä¸€æ ·ï¼Œæ•°ç»„+é“¾è¡¨&#x2F;çº¢é»‘äºŒå‰æ ‘ã€‚<br>  HashTable å’Œ JDK1.8 ä¹‹å‰çš„ HashMap çš„åº•å±‚æ•°æ®ç»“æ„ç±»ä¼¼éƒ½æ˜¯é‡‡ç”¨ <strong>æ•°ç»„+é“¾è¡¨</strong> çš„å½¢å¼ï¼Œæ•°ç»„æ˜¯ HashMap çš„ä¸»ä½“ï¼Œé“¾è¡¨åˆ™æ˜¯ä¸»è¦ä¸ºäº†è§£å†³å“ˆå¸Œå†²çªè€Œå­˜åœ¨çš„ï¼›</li>\n<li><strong>å®ç°çº¿ç¨‹å®‰å…¨çš„æ–¹å¼ï¼ˆé‡è¦ï¼‰</strong>ï¼š<br>  â‘  <strong>åœ¨JDK1.7çš„æ—¶å€™ï¼ŒConcurrentHashMapä½¿ç”¨åˆ†æ®µé”</strong> å¯¹æ•´ä¸ªæ¡¶æ•°ç»„è¿›è¡Œäº†åˆ†å‰²åˆ†æ®µ(Segmenté”ç»§æ‰¿ReentrantLock)ï¼Œæ¯ä¸€æŠŠé”åªé”å®¹å™¨å…¶ä¸­ä¸€éƒ¨åˆ†æ•°æ®ï¼Œå¤šçº¿ç¨‹è®¿é—®å®¹å™¨é‡Œä¸åŒæ•°æ®æ®µçš„æ•°æ®ï¼Œå°±ä¸ä¼šå­˜åœ¨é”ç«äº‰ï¼Œæé«˜å¹¶å‘è®¿é—®ç‡ã€‚ï¼ˆé»˜è®¤åˆ†é…16ä¸ªSegmentï¼Œæ¯”HashTableæ•ˆç‡æé«˜16å€ã€‚ï¼‰<br>  <strong>åˆ°äº† JDK1.8 çš„æ—¶å€™å·²ç»æ‘’å¼ƒäº†Segmentçš„æ¦‚å¿µï¼Œè€Œæ˜¯ç›´æ¥ç”¨ Node æ•°ç»„+é“¾è¡¨+çº¢é»‘æ ‘çš„æ•°æ®ç»“æ„æ¥å®ç°ï¼Œå¹¶å‘æ§åˆ¶ä½¿ç”¨ synchronized å’Œ CAS æ¥æ“ä½œï¼Œsynchronizedåªé”å®šå½“å‰é“¾è¡¨æˆ–çº¢é»‘æ ‘çš„é¦–èŠ‚ç‚¹ã€‚ï¼ˆJDK1.6ä»¥å å¯¹ synchronizedé”åšäº†å¾ˆå¤šä¼˜åŒ–ï¼‰</strong> æ•´ä¸ªçœ‹èµ·æ¥å°±åƒæ˜¯ä¼˜åŒ–è¿‡ä¸”çº¿ç¨‹å®‰å…¨çš„ HashMap<br>  â‘¡ <strong>HashTable(å…¨è¡¨é”)</strong> :ä½¿ç”¨ synchronized æ¥ä¿è¯çº¿ç¨‹å®‰å…¨ï¼Œæ•ˆç‡éå¸¸ä½ä¸‹ã€‚å½“ä¸€ä¸ªçº¿ç¨‹è®¿é—®åŒæ­¥æ–¹æ³•æ—¶ï¼Œå…¶ä»–çº¿ç¨‹ä¹Ÿè®¿é—®åŒæ­¥æ–¹æ³•ï¼Œå¯èƒ½ä¼šè¿›å…¥é˜»å¡æˆ–è½®è¯¢çŠ¶æ€ï¼Œå¦‚ä½¿ç”¨ put æ·»åŠ å…ƒç´ ï¼Œå¦ä¸€ä¸ªçº¿ç¨‹ä¸èƒ½ä½¿ç”¨ put æ·»åŠ å…ƒç´ ï¼Œä¹Ÿä¸èƒ½ä½¿ç”¨ getï¼Œç«äº‰ä¼šè¶Šæ¥è¶Šæ¿€çƒˆæ•ˆç‡è¶Šä½ã€‚</li>\n<li>â­<strong>Jdk1.7é‡‡ç”¨åˆ†æ®µé”ï¼Œé”ç²’åº¦è¾ƒå¤§ï¼Œå®¹æ˜“å‘ç”Ÿå†²çªï¼Œå¹¶å‘é‡ä½ï¼›å› æ­¤ Jdk1.8 é‡‡ç”¨åªé”å®šæ¡¶çš„é¦–ç»“ç‚¹ï¼Œé”çš„åŠ›åº¦è¾ƒä½ï¼Œä¸å®¹æ˜“å‘ç”Ÿå†²çªï¼Œå¹¶å‘é‡é«˜ã€‚</strong></li>\n</ul>\n<p><strong>ä¸¤è€…çš„å¯¹æ¯”å›¾</strong>ï¼š</p>\n<p>HashTable:</p>\n<p><img src=\"https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/TyporaNotesaHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAxOC84LzIzLzE2NTY2NzdhNmYyNTYxOTY.png\" alt=\"HashTableå…¨è¡¨é”\"></p>\n<p>JDK1.7çš„ConcurrentHashMapï¼š</p>\n<p><img src=\"https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/TyporaNotesaHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAxOC84LzIzLzE2NTY2NzdhNmYwMDhiZTQ.png\" alt=\"JDK1.7çš„ConcurrentHashMapåˆ†æ®µé”\"></p>\n<p>JDK1.8çš„ConcurrentHashMapï¼ˆTreeBin: çº¢é»‘äºŒå‰æ ‘èŠ‚ç‚¹ Node: é“¾è¡¨èŠ‚ç‚¹ï¼‰ï¼š</p>\n<p><img src=\"https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/TyporaNotesaHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAxOC84LzIzLzE2NTY2NzdhNmYxNGUwMzk.png\" alt=\"JDK1.8çš„ConcurrentHashMapåˆ†æ®µé”\"></p>"},{"title":"Typoraé…ç½®é˜¿é‡Œäº‘OSSå›¾åºŠ","copyright":true,"mathjax":true,"date":"2022-12-12T14:11:09.000Z","urlname":"image-host","_content":"\nåœ¨æˆ‘ä»¬æ—¥å¸¸ä½¿ç”¨Typoraå†™æ–‡æ¡£æ—¶ï¼Œä¸€èˆ¬å›¾ç‰‡éƒ½æ˜¯æ”¾åœ¨æœ¬åœ°çš„ä¸€ä¸ªç›¸å¯¹è·¯å¾„ä¸‹ï¼Œå¦‚æœå°†markdownæ–‡ä»¶å‘é€ç»™åˆ«äººï¼Œé‚£ä¹ˆè¿™ä¸ªæ–‡ä»¶ä¸­çš„å›¾ç‰‡åˆ«äººè‡ªç„¶æ˜¯è®¿é—®ä¸åˆ°çš„ã€‚å›¾åºŠçš„ä½œç”¨å°±æ˜¯æŠŠå›¾ç‰‡å­˜åœ¨ç½‘ç«™ä¸Šï¼Œå¯¹åº”çš„å›¾ç‰‡ç”Ÿæˆä¸€ä¸ªé“¾æ¥ï¼Œmarkdownæ–‡ä»¶ä¸­ä½¿ç”¨è¯¥é“¾æ¥è®¿é—®å›¾ç‰‡ã€‚åœ¨æœ¬æ–‡ä¸­æˆ‘ä»¬ä½¿ç”¨Typora + PicGo + é˜¿é‡Œäº‘OSSå›¾åºŠå®ç°å›¾ç‰‡è‡ªåŠ¨ä¸Šä¼ å¹¶è‡ªç”±è®¿é—®ã€‚\n\n<!--more-->\n\n## ä¸‹è½½ Typora\n\n[Typoraå®˜ç½‘](https://typora.io/) å®˜ç½‘æ‹‰åˆ°æœ€ä¸‹ï¼Œç‚¹å‡» [History Releases](https://typora.io/releases/all)ï¼Œé€‰æ‹© Dev/Beta Releasesï¼Œæ‹‰åˆ°æœ€ä¸‹ More Beta,\n\né€‰æ‹©å¯¹åº”ç³»ç»Ÿçš„é“¾æ¥ [old Windows / Linux beta](https://typora.io/windows/dev_release.html)ï¼Œ[old macOS beta](https://typora.io/dev_release.html)\n\nWindows x64ï¼š[Download old version (Windows x64)](https://download.typora.io/windows/typora-update-x64-1016.exe)\n\nMac OSï¼š[Download v0.11.18](https://download.typora.io/mac/Typora-0.11.18.dmg)\n\n## å¸¸ç”¨è®¾ç½®\n\n### é€šç”¨\n\n1. æ‰“å¼€è‡ªåŠ¨ä¿å­˜\n2. å…³é—­è‡ªåŠ¨æ£€æŸ¥æ›´æ–°\n3. å…³é—­å‘é€åŒ¿åä½¿ç”¨æ•°æ®\n\n### å¤–è§‚\n\n1. è‡ªå®šä¹‰å­—ä½“\n\n2. å‹¾é€‰ä¾§è¾¹æ å¤§çº²è§†å›¾æŠ˜å å’Œå±•å¼€\n\n3. é…ç½® Next ä¸»é¢˜\n\n\t1. å®˜ç½‘ï¼šhttps://theme.typora.io/theme/NexT/\n\n\t2. ä¸‹è½½ zip å‹ç¼©åŒ…ï¼š[typora-theme-next.zip](https://github.com/BillChen2k/typora-theme-next/releases/download/1.1.1/typora-theme-next.zip)\n\n\t3. Typora å·¦ä¸Šè§’ï¼Œæ–‡ä»¶ - åå¥½è®¾ç½® - å¤–è§‚ - æ‰“å¼€ä¸»é¢˜æ–‡ä»¶å¤¹`xxx`\n\n\t4. æŠŠ typora-theme-next.zip è§£å‹ï¼Œå°†æ‰€æœ‰æ–‡ä»¶å¤åˆ¶/å‰ªåˆ‡åˆ°ä¸»é¢˜æ–‡ä»¶å¤¹`xxx`ä¸‹\n\t5. é‡å¯ Typoraï¼Œè®¾ç½®å¤–è§‚é€‰æ‹©Nextå³å¯\n\t6. å¦‚æœæ„Ÿè§‰é¡µé¢å®½åº¦å¤ªå°ï¼Œå¯ä»¥æ‰“å¼€next.cssï¼Œæœç´¢å¹¶é…ç½®max-width\n\t7. å¦‚æœæ„Ÿè§‰æ•´ä½“é¡µé¢åå°ï¼Œå¯ä»¥`Ctrl Shift +/-`å¢å¤§/å‡å°æ•´ä½“é¡µé¢\n\n### ç¼–è¾‘å™¨\n\n1. è®¾ç½®é»˜è®¤æ¢è¡Œç¬¦\n2. å–æ¶ˆæ‹¼å†™æ£€æŸ¥ï¼Œå‹¾é€‰`ä¸ä½¿ç”¨æ‹¼å†™æ£€æŸ¥`\n\n### å›¾åƒ\n\n1. æ’å…¥å›¾ç‰‡æ—¶\n\n\té€‰æ‹©ä¸Šä¼ å›¾ç‰‡ï¼Œå‹¾é€‰`å¯¹æœ¬åœ°ä½ç½®çš„å›¾ç‰‡åº”ç”¨ä¸Šè¿°è§„åˆ™`å’Œ`å¯¹ç½‘ç»œä½ç½®çš„å›¾ç‰‡åº”ç”¨ä¸Šè¿°è§„åˆ™`\n\n2. ä¸Šä¼ æœåŠ¡è®¾å®š\n\n\tæ¥ä¸‹æ¥ä¼šå…·ä½“è®²åˆ°å›¾åºŠçš„é…ç½®\n\n### Markdown\n\n1. å‹¾é€‰æ˜¾ç¤ºä»£ç å—è¡Œå·\n\n## å›¾åºŠé…ç½®\n\n### 1ã€å®‰è£…PicGo\n\nä¸‹è½½åœ°å€ï¼šhttps://github.com/Molunerfinn/PicGo/releases\n\nå®‰è£… PicGo-Setup-2.3.0-beta.7-ia32.exeï¼Œåœ¨PicGoä¸­æ‰“å¼€PicGoè®¾ç½®ï¼Œæ‰¾åˆ°è®¾ç½®Serverï¼Œç‚¹å‡»è®¾ç½®ï¼Œç‚¹å‡»å¼€å¯Serverï¼Œç‚¹å‡»ç¡®å®šå³å¯ã€‚\n\n### 2ã€é…ç½®Typora\n\næ–‡ä»¶-åå¥½è®¾ç½®-å›¾åƒ-è®¾ç½®æ’å…¥å›¾ç‰‡æ—¶ ä¸Šä¼ å›¾ç‰‡-ä¸Šä¼ æœåŠ¡é€‰æ‹©picgo.appï¼Œé€‰æ‹©picgoçš„å®‰è£…è·¯å¾„ï¼ŒéªŒè¯å›¾ç‰‡ä¸Šä¼ é€‰é¡¹\n\n### 3ã€é˜¿é‡Œäº‘OSSæ­å»ºå›¾åºŠ\n\n#### 3.1ã€å¼€é€šé˜¿é‡Œäº‘å¯¹è±¡å­˜å‚¨\n\nå¼€é€šé˜¿é‡Œäº‘å¯¹è±¡å­˜å‚¨https://www.aliyun.com/product/ossï¼Œæ³¨å†Œé˜¿é‡Œäº‘è´¦å·åï¼Œå¼€é€šå¯¹è±¡å‚¨å­˜ï¼Œè¿›å…¥å¯¹è±¡å­˜å‚¨OSSçš„æ§åˆ¶å°\n\n#### 3.2ã€åˆ›å»ºbucket\n\n- åœ¨å·¦ä¾§é€‰æ‹©æ¦‚è§ˆï¼Œç„¶ååœ¨å³ä¾§Bucketç®¡ç†ä¸­åˆ›å»ºä¸€ä¸ªæ–°çš„bucket\n\n- åˆ›å»ºBucketå…·ä½“é…ç½®\n\n\t> Bucketåå­—ä¸èƒ½æœ‰å¤§å†™å­—æ¯ã€åœ°åŸŸå°±è¿‘é€‰æ‹©ã€å­˜å‚¨ç±»å‹é€‰æ‹©`æ ‡å‡†å­˜å‚¨`ï¼Œè¯»å†™æƒé™`å…¬å…±è¯»`\n\n- åˆ›å»ºæˆåŠŸåï¼Œå¯ä»¥åœ¨Bucketåˆ—è¡¨ä¸­æŸ¥çœ‹ï¼Œè®°ä½è‡ªå·±çš„è®¿é—®åŸŸåå’Œåœ°åŸŸèŠ‚ç‚¹ï¼Œåé¢ä¼šç”¨åˆ°ã€‚\n\n#### 3.3ã€åˆ›å»ºAccessKey\n\né¡µé¢å³ä¸Šè§’ï¼Œé¼ æ ‡æ”¾åœ¨å¤´åƒå¤„ï¼Œåœ¨å¼¹å‡ºçš„æ¡†é‡Œé€‰æ‹©AccessKeyç®¡ç†ï¼Œåœ¨å¼¹å‡ºçš„é€‰é¡¹æ¡†é‡Œï¼Œé€‰æ‹©`ç»§ç»­ä½¿ç”¨AccessKey`ã€‚\n\nè¿›å…¥åï¼Œåˆ›å»ºä¸€ä¸ª`AccessKey`ã€‚\n\nåœ¨å¼¹å‡ºçš„ç•Œé¢é‡Œï¼Œè®°ä½ä½ çš„`accessKeyId`å’Œ`accessKeySecret`ã€‚\n\n#### 3.4ã€äº†è§£æ”¶è´¹æ ‡å‡†\n\nä½¿ç”¨é»˜è®¤çš„0.12å…ƒ/1GB/1ä¸ªæœˆå³å¯ã€‚\n\n### 4ã€é…ç½®PicGo\n\næˆ‘ä»¬æ‰“å¼€æ‰“å¼€PicGoçš„ä¸»ç•Œé¢,åœ¨å›¾åºŠè®¾ç½®é‡Œé¢é€‰æ‹©é˜¿é‡Œäº‘OSSï¼Œä¾ç…§ä¸‹é¢æ³¨æ„äº‹é¡¹å¡«å†™ä¿¡æ¯ã€‚\n\nè®¾å®šKeyldï¼šå¡«å†™æˆ‘ä»¬åœ¨ç¬¬ä¸‰æ­¥ä¸­è·å¾—çš„AccessKeyID\n\nè®¾å®šKeySecretï¼šå¡«å†™æˆ‘ä»¬åœ¨ç¬¬ä¸‰æ­¥ä¸­è·å¾—çš„AccessKeyIDSecret\n\nè®¾å®šå‚¨å­˜ç©ºé—´åï¼šå¡«å†™æˆ‘ä»¬åœ¨ç¬¬äºŒæ­¥ä¸­å¡«å†™çš„bucketåç§°\n\nç¡®è®¤å­˜å‚¨åŒºåŸŸï¼šå¡«å†™æˆ‘ä»¬åœ¨ç¬¬äºŒæ­¥ä¸­æŸ¥çœ‹çš„åœ°åŸŸèŠ‚ç‚¹ï¼Œæ³¨æ„å¤åˆ¶çš„æ ¼å¼ï¼šåªéœ€è¦å¤åˆ¶oss-cn-Xxxxå³å¯ï¼Œä¸éœ€è¦åé¢çš„.aliyuncs.com\n\n### 5ã€æµ‹è¯•ä½¿ç”¨\n\nç»è¿‡ä¸Šé¢çš„ä¸€ç³»åˆ—é…ç½®ä¹‹åï¼Œæˆ‘ä»¬å°±å®Œæˆäº†Typoraçš„å›¾åºŠé…ç½®ï¼Œç°åœ¨æˆ‘ä»¬å¯ä»¥ä½¿ç”¨Markdownå¼€å§‹å†™æ–‡ç« äº†ï¼Œå›¾ç‰‡ã€æˆªå›¾ä¼šåœ¨ç²˜è´´ä¹‹åï¼Œè‡ªåŠ¨é€šè¿‡PicGoä¸Šä¼ åˆ°äº†è¿œç«¯å›¾åºŠã€‚åŒæ—¶ä¹Ÿå¯ä»¥æ‰‹åŠ¨å°†ä»¥å‰åœ¨æœ¬åœ°å­˜å‚¨çš„å›¾ç‰‡ä¸Šä¼ åˆ°å›¾åºŠä¸Šã€‚\n\n## å‚è€ƒ\n\nhttps://blog.csdn.net/qq_51808107/article/details/124044961\n","source":"_posts/Typoraé…ç½®é˜¿é‡Œäº‘OSSå›¾åºŠ.md","raw":"---\ntitle: Typoraé…ç½®é˜¿é‡Œäº‘OSSå›¾åºŠ\ncopyright: true\nmathjax: true\ndate: 2022-12-12 22:11:09\ncategories: æŠ€æœ¯æ€»ç»“\ntags: \nurlname: image-host\n---\n\nåœ¨æˆ‘ä»¬æ—¥å¸¸ä½¿ç”¨Typoraå†™æ–‡æ¡£æ—¶ï¼Œä¸€èˆ¬å›¾ç‰‡éƒ½æ˜¯æ”¾åœ¨æœ¬åœ°çš„ä¸€ä¸ªç›¸å¯¹è·¯å¾„ä¸‹ï¼Œå¦‚æœå°†markdownæ–‡ä»¶å‘é€ç»™åˆ«äººï¼Œé‚£ä¹ˆè¿™ä¸ªæ–‡ä»¶ä¸­çš„å›¾ç‰‡åˆ«äººè‡ªç„¶æ˜¯è®¿é—®ä¸åˆ°çš„ã€‚å›¾åºŠçš„ä½œç”¨å°±æ˜¯æŠŠå›¾ç‰‡å­˜åœ¨ç½‘ç«™ä¸Šï¼Œå¯¹åº”çš„å›¾ç‰‡ç”Ÿæˆä¸€ä¸ªé“¾æ¥ï¼Œmarkdownæ–‡ä»¶ä¸­ä½¿ç”¨è¯¥é“¾æ¥è®¿é—®å›¾ç‰‡ã€‚åœ¨æœ¬æ–‡ä¸­æˆ‘ä»¬ä½¿ç”¨Typora + PicGo + é˜¿é‡Œäº‘OSSå›¾åºŠå®ç°å›¾ç‰‡è‡ªåŠ¨ä¸Šä¼ å¹¶è‡ªç”±è®¿é—®ã€‚\n\n<!--more-->\n\n## ä¸‹è½½ Typora\n\n[Typoraå®˜ç½‘](https://typora.io/) å®˜ç½‘æ‹‰åˆ°æœ€ä¸‹ï¼Œç‚¹å‡» [History Releases](https://typora.io/releases/all)ï¼Œé€‰æ‹© Dev/Beta Releasesï¼Œæ‹‰åˆ°æœ€ä¸‹ More Beta,\n\né€‰æ‹©å¯¹åº”ç³»ç»Ÿçš„é“¾æ¥ [old Windows / Linux beta](https://typora.io/windows/dev_release.html)ï¼Œ[old macOS beta](https://typora.io/dev_release.html)\n\nWindows x64ï¼š[Download old version (Windows x64)](https://download.typora.io/windows/typora-update-x64-1016.exe)\n\nMac OSï¼š[Download v0.11.18](https://download.typora.io/mac/Typora-0.11.18.dmg)\n\n## å¸¸ç”¨è®¾ç½®\n\n### é€šç”¨\n\n1. æ‰“å¼€è‡ªåŠ¨ä¿å­˜\n2. å…³é—­è‡ªåŠ¨æ£€æŸ¥æ›´æ–°\n3. å…³é—­å‘é€åŒ¿åä½¿ç”¨æ•°æ®\n\n### å¤–è§‚\n\n1. è‡ªå®šä¹‰å­—ä½“\n\n2. å‹¾é€‰ä¾§è¾¹æ å¤§çº²è§†å›¾æŠ˜å å’Œå±•å¼€\n\n3. é…ç½® Next ä¸»é¢˜\n\n\t1. å®˜ç½‘ï¼šhttps://theme.typora.io/theme/NexT/\n\n\t2. ä¸‹è½½ zip å‹ç¼©åŒ…ï¼š[typora-theme-next.zip](https://github.com/BillChen2k/typora-theme-next/releases/download/1.1.1/typora-theme-next.zip)\n\n\t3. Typora å·¦ä¸Šè§’ï¼Œæ–‡ä»¶ - åå¥½è®¾ç½® - å¤–è§‚ - æ‰“å¼€ä¸»é¢˜æ–‡ä»¶å¤¹`xxx`\n\n\t4. æŠŠ typora-theme-next.zip è§£å‹ï¼Œå°†æ‰€æœ‰æ–‡ä»¶å¤åˆ¶/å‰ªåˆ‡åˆ°ä¸»é¢˜æ–‡ä»¶å¤¹`xxx`ä¸‹\n\t5. é‡å¯ Typoraï¼Œè®¾ç½®å¤–è§‚é€‰æ‹©Nextå³å¯\n\t6. å¦‚æœæ„Ÿè§‰é¡µé¢å®½åº¦å¤ªå°ï¼Œå¯ä»¥æ‰“å¼€next.cssï¼Œæœç´¢å¹¶é…ç½®max-width\n\t7. å¦‚æœæ„Ÿè§‰æ•´ä½“é¡µé¢åå°ï¼Œå¯ä»¥`Ctrl Shift +/-`å¢å¤§/å‡å°æ•´ä½“é¡µé¢\n\n### ç¼–è¾‘å™¨\n\n1. è®¾ç½®é»˜è®¤æ¢è¡Œç¬¦\n2. å–æ¶ˆæ‹¼å†™æ£€æŸ¥ï¼Œå‹¾é€‰`ä¸ä½¿ç”¨æ‹¼å†™æ£€æŸ¥`\n\n### å›¾åƒ\n\n1. æ’å…¥å›¾ç‰‡æ—¶\n\n\té€‰æ‹©ä¸Šä¼ å›¾ç‰‡ï¼Œå‹¾é€‰`å¯¹æœ¬åœ°ä½ç½®çš„å›¾ç‰‡åº”ç”¨ä¸Šè¿°è§„åˆ™`å’Œ`å¯¹ç½‘ç»œä½ç½®çš„å›¾ç‰‡åº”ç”¨ä¸Šè¿°è§„åˆ™`\n\n2. ä¸Šä¼ æœåŠ¡è®¾å®š\n\n\tæ¥ä¸‹æ¥ä¼šå…·ä½“è®²åˆ°å›¾åºŠçš„é…ç½®\n\n### Markdown\n\n1. å‹¾é€‰æ˜¾ç¤ºä»£ç å—è¡Œå·\n\n## å›¾åºŠé…ç½®\n\n### 1ã€å®‰è£…PicGo\n\nä¸‹è½½åœ°å€ï¼šhttps://github.com/Molunerfinn/PicGo/releases\n\nå®‰è£… PicGo-Setup-2.3.0-beta.7-ia32.exeï¼Œåœ¨PicGoä¸­æ‰“å¼€PicGoè®¾ç½®ï¼Œæ‰¾åˆ°è®¾ç½®Serverï¼Œç‚¹å‡»è®¾ç½®ï¼Œç‚¹å‡»å¼€å¯Serverï¼Œç‚¹å‡»ç¡®å®šå³å¯ã€‚\n\n### 2ã€é…ç½®Typora\n\næ–‡ä»¶-åå¥½è®¾ç½®-å›¾åƒ-è®¾ç½®æ’å…¥å›¾ç‰‡æ—¶ ä¸Šä¼ å›¾ç‰‡-ä¸Šä¼ æœåŠ¡é€‰æ‹©picgo.appï¼Œé€‰æ‹©picgoçš„å®‰è£…è·¯å¾„ï¼ŒéªŒè¯å›¾ç‰‡ä¸Šä¼ é€‰é¡¹\n\n### 3ã€é˜¿é‡Œäº‘OSSæ­å»ºå›¾åºŠ\n\n#### 3.1ã€å¼€é€šé˜¿é‡Œäº‘å¯¹è±¡å­˜å‚¨\n\nå¼€é€šé˜¿é‡Œäº‘å¯¹è±¡å­˜å‚¨https://www.aliyun.com/product/ossï¼Œæ³¨å†Œé˜¿é‡Œäº‘è´¦å·åï¼Œå¼€é€šå¯¹è±¡å‚¨å­˜ï¼Œè¿›å…¥å¯¹è±¡å­˜å‚¨OSSçš„æ§åˆ¶å°\n\n#### 3.2ã€åˆ›å»ºbucket\n\n- åœ¨å·¦ä¾§é€‰æ‹©æ¦‚è§ˆï¼Œç„¶ååœ¨å³ä¾§Bucketç®¡ç†ä¸­åˆ›å»ºä¸€ä¸ªæ–°çš„bucket\n\n- åˆ›å»ºBucketå…·ä½“é…ç½®\n\n\t> Bucketåå­—ä¸èƒ½æœ‰å¤§å†™å­—æ¯ã€åœ°åŸŸå°±è¿‘é€‰æ‹©ã€å­˜å‚¨ç±»å‹é€‰æ‹©`æ ‡å‡†å­˜å‚¨`ï¼Œè¯»å†™æƒé™`å…¬å…±è¯»`\n\n- åˆ›å»ºæˆåŠŸåï¼Œå¯ä»¥åœ¨Bucketåˆ—è¡¨ä¸­æŸ¥çœ‹ï¼Œè®°ä½è‡ªå·±çš„è®¿é—®åŸŸåå’Œåœ°åŸŸèŠ‚ç‚¹ï¼Œåé¢ä¼šç”¨åˆ°ã€‚\n\n#### 3.3ã€åˆ›å»ºAccessKey\n\né¡µé¢å³ä¸Šè§’ï¼Œé¼ æ ‡æ”¾åœ¨å¤´åƒå¤„ï¼Œåœ¨å¼¹å‡ºçš„æ¡†é‡Œé€‰æ‹©AccessKeyç®¡ç†ï¼Œåœ¨å¼¹å‡ºçš„é€‰é¡¹æ¡†é‡Œï¼Œé€‰æ‹©`ç»§ç»­ä½¿ç”¨AccessKey`ã€‚\n\nè¿›å…¥åï¼Œåˆ›å»ºä¸€ä¸ª`AccessKey`ã€‚\n\nåœ¨å¼¹å‡ºçš„ç•Œé¢é‡Œï¼Œè®°ä½ä½ çš„`accessKeyId`å’Œ`accessKeySecret`ã€‚\n\n#### 3.4ã€äº†è§£æ”¶è´¹æ ‡å‡†\n\nä½¿ç”¨é»˜è®¤çš„0.12å…ƒ/1GB/1ä¸ªæœˆå³å¯ã€‚\n\n### 4ã€é…ç½®PicGo\n\næˆ‘ä»¬æ‰“å¼€æ‰“å¼€PicGoçš„ä¸»ç•Œé¢,åœ¨å›¾åºŠè®¾ç½®é‡Œé¢é€‰æ‹©é˜¿é‡Œäº‘OSSï¼Œä¾ç…§ä¸‹é¢æ³¨æ„äº‹é¡¹å¡«å†™ä¿¡æ¯ã€‚\n\nè®¾å®šKeyldï¼šå¡«å†™æˆ‘ä»¬åœ¨ç¬¬ä¸‰æ­¥ä¸­è·å¾—çš„AccessKeyID\n\nè®¾å®šKeySecretï¼šå¡«å†™æˆ‘ä»¬åœ¨ç¬¬ä¸‰æ­¥ä¸­è·å¾—çš„AccessKeyIDSecret\n\nè®¾å®šå‚¨å­˜ç©ºé—´åï¼šå¡«å†™æˆ‘ä»¬åœ¨ç¬¬äºŒæ­¥ä¸­å¡«å†™çš„bucketåç§°\n\nç¡®è®¤å­˜å‚¨åŒºåŸŸï¼šå¡«å†™æˆ‘ä»¬åœ¨ç¬¬äºŒæ­¥ä¸­æŸ¥çœ‹çš„åœ°åŸŸèŠ‚ç‚¹ï¼Œæ³¨æ„å¤åˆ¶çš„æ ¼å¼ï¼šåªéœ€è¦å¤åˆ¶oss-cn-Xxxxå³å¯ï¼Œä¸éœ€è¦åé¢çš„.aliyuncs.com\n\n### 5ã€æµ‹è¯•ä½¿ç”¨\n\nç»è¿‡ä¸Šé¢çš„ä¸€ç³»åˆ—é…ç½®ä¹‹åï¼Œæˆ‘ä»¬å°±å®Œæˆäº†Typoraçš„å›¾åºŠé…ç½®ï¼Œç°åœ¨æˆ‘ä»¬å¯ä»¥ä½¿ç”¨Markdownå¼€å§‹å†™æ–‡ç« äº†ï¼Œå›¾ç‰‡ã€æˆªå›¾ä¼šåœ¨ç²˜è´´ä¹‹åï¼Œè‡ªåŠ¨é€šè¿‡PicGoä¸Šä¼ åˆ°äº†è¿œç«¯å›¾åºŠã€‚åŒæ—¶ä¹Ÿå¯ä»¥æ‰‹åŠ¨å°†ä»¥å‰åœ¨æœ¬åœ°å­˜å‚¨çš„å›¾ç‰‡ä¸Šä¼ åˆ°å›¾åºŠä¸Šã€‚\n\n## å‚è€ƒ\n\nhttps://blog.csdn.net/qq_51808107/article/details/124044961\n","slug":"Typoraé…ç½®é˜¿é‡Œäº‘OSSå›¾åºŠ","published":1,"updated":"2023-01-17T02:09:27.111Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cld8kfsiy000izvt850sub8d8","content":"<p>åœ¨æˆ‘ä»¬æ—¥å¸¸ä½¿ç”¨Typoraå†™æ–‡æ¡£æ—¶ï¼Œä¸€èˆ¬å›¾ç‰‡éƒ½æ˜¯æ”¾åœ¨æœ¬åœ°çš„ä¸€ä¸ªç›¸å¯¹è·¯å¾„ä¸‹ï¼Œå¦‚æœå°†markdownæ–‡ä»¶å‘é€ç»™åˆ«äººï¼Œé‚£ä¹ˆè¿™ä¸ªæ–‡ä»¶ä¸­çš„å›¾ç‰‡åˆ«äººè‡ªç„¶æ˜¯è®¿é—®ä¸åˆ°çš„ã€‚å›¾åºŠçš„ä½œç”¨å°±æ˜¯æŠŠå›¾ç‰‡å­˜åœ¨ç½‘ç«™ä¸Šï¼Œå¯¹åº”çš„å›¾ç‰‡ç”Ÿæˆä¸€ä¸ªé“¾æ¥ï¼Œmarkdownæ–‡ä»¶ä¸­ä½¿ç”¨è¯¥é“¾æ¥è®¿é—®å›¾ç‰‡ã€‚åœ¨æœ¬æ–‡ä¸­æˆ‘ä»¬ä½¿ç”¨Typora + PicGo + é˜¿é‡Œäº‘OSSå›¾åºŠå®ç°å›¾ç‰‡è‡ªåŠ¨ä¸Šä¼ å¹¶è‡ªç”±è®¿é—®ã€‚</p>\n<span id=\"more\"></span>\n\n<h2 id=\"ä¸‹è½½-Typora\"><a href=\"#ä¸‹è½½-Typora\" class=\"headerlink\" title=\"ä¸‹è½½ Typora\"></a>ä¸‹è½½ Typora</h2><p><a href=\"https://typora.io/\">Typoraå®˜ç½‘</a> å®˜ç½‘æ‹‰åˆ°æœ€ä¸‹ï¼Œç‚¹å‡» <a href=\"https://typora.io/releases/all\">History Releases</a>ï¼Œé€‰æ‹© Dev/Beta Releasesï¼Œæ‹‰åˆ°æœ€ä¸‹ More Beta,</p>\n<p>é€‰æ‹©å¯¹åº”ç³»ç»Ÿçš„é“¾æ¥ <a href=\"https://typora.io/windows/dev_release.html\">old Windows / Linux beta</a>ï¼Œ<a href=\"https://typora.io/dev_release.html\">old macOS beta</a></p>\n<p>Windows x64ï¼š<a href=\"https://download.typora.io/windows/typora-update-x64-1016.exe\">Download old version (Windows x64)</a></p>\n<p>Mac OSï¼š<a href=\"https://download.typora.io/mac/Typora-0.11.18.dmg\">Download v0.11.18</a></p>\n<h2 id=\"å¸¸ç”¨è®¾ç½®\"><a href=\"#å¸¸ç”¨è®¾ç½®\" class=\"headerlink\" title=\"å¸¸ç”¨è®¾ç½®\"></a>å¸¸ç”¨è®¾ç½®</h2><h3 id=\"é€šç”¨\"><a href=\"#é€šç”¨\" class=\"headerlink\" title=\"é€šç”¨\"></a>é€šç”¨</h3><ol>\n<li>æ‰“å¼€è‡ªåŠ¨ä¿å­˜</li>\n<li>å…³é—­è‡ªåŠ¨æ£€æŸ¥æ›´æ–°</li>\n<li>å…³é—­å‘é€åŒ¿åä½¿ç”¨æ•°æ®</li>\n</ol>\n<h3 id=\"å¤–è§‚\"><a href=\"#å¤–è§‚\" class=\"headerlink\" title=\"å¤–è§‚\"></a>å¤–è§‚</h3><ol>\n<li><p>è‡ªå®šä¹‰å­—ä½“</p>\n</li>\n<li><p>å‹¾é€‰ä¾§è¾¹æ å¤§çº²è§†å›¾æŠ˜å å’Œå±•å¼€</p>\n</li>\n<li><p>é…ç½® Next ä¸»é¢˜</p>\n<ol>\n<li><p>å®˜ç½‘ï¼š<a href=\"https://theme.typora.io/theme/NexT/\">https://theme.typora.io/theme/NexT/</a></p>\n</li>\n<li><p>ä¸‹è½½ zip å‹ç¼©åŒ…ï¼š<a href=\"https://github.com/BillChen2k/typora-theme-next/releases/download/1.1.1/typora-theme-next.zip\">typora-theme-next.zip</a></p>\n</li>\n<li><p>Typora å·¦ä¸Šè§’ï¼Œæ–‡ä»¶ - åå¥½è®¾ç½® - å¤–è§‚ - æ‰“å¼€ä¸»é¢˜æ–‡ä»¶å¤¹<code>xxx</code></p>\n</li>\n<li><p>æŠŠ typora-theme-next.zip è§£å‹ï¼Œå°†æ‰€æœ‰æ–‡ä»¶å¤åˆ¶/å‰ªåˆ‡åˆ°ä¸»é¢˜æ–‡ä»¶å¤¹<code>xxx</code>ä¸‹</p>\n</li>\n<li><p>é‡å¯ Typoraï¼Œè®¾ç½®å¤–è§‚é€‰æ‹©Nextå³å¯</p>\n</li>\n<li><p>å¦‚æœæ„Ÿè§‰é¡µé¢å®½åº¦å¤ªå°ï¼Œå¯ä»¥æ‰“å¼€next.cssï¼Œæœç´¢å¹¶é…ç½®max-width</p>\n</li>\n<li><p>å¦‚æœæ„Ÿè§‰æ•´ä½“é¡µé¢åå°ï¼Œå¯ä»¥<code>Ctrl Shift +/-</code>å¢å¤§/å‡å°æ•´ä½“é¡µé¢</p>\n</li>\n</ol>\n</li>\n</ol>\n<h3 id=\"ç¼–è¾‘å™¨\"><a href=\"#ç¼–è¾‘å™¨\" class=\"headerlink\" title=\"ç¼–è¾‘å™¨\"></a>ç¼–è¾‘å™¨</h3><ol>\n<li>è®¾ç½®é»˜è®¤æ¢è¡Œç¬¦</li>\n<li>å–æ¶ˆæ‹¼å†™æ£€æŸ¥ï¼Œå‹¾é€‰<code>ä¸ä½¿ç”¨æ‹¼å†™æ£€æŸ¥</code></li>\n</ol>\n<h3 id=\"å›¾åƒ\"><a href=\"#å›¾åƒ\" class=\"headerlink\" title=\"å›¾åƒ\"></a>å›¾åƒ</h3><ol>\n<li><p>æ’å…¥å›¾ç‰‡æ—¶</p>\n<p> é€‰æ‹©ä¸Šä¼ å›¾ç‰‡ï¼Œå‹¾é€‰<code>å¯¹æœ¬åœ°ä½ç½®çš„å›¾ç‰‡åº”ç”¨ä¸Šè¿°è§„åˆ™</code>å’Œ<code>å¯¹ç½‘ç»œä½ç½®çš„å›¾ç‰‡åº”ç”¨ä¸Šè¿°è§„åˆ™</code></p>\n</li>\n<li><p>ä¸Šä¼ æœåŠ¡è®¾å®š</p>\n<p> æ¥ä¸‹æ¥ä¼šå…·ä½“è®²åˆ°å›¾åºŠçš„é…ç½®</p>\n</li>\n</ol>\n<h3 id=\"Markdown\"><a href=\"#Markdown\" class=\"headerlink\" title=\"Markdown\"></a>Markdown</h3><ol>\n<li>å‹¾é€‰æ˜¾ç¤ºä»£ç å—è¡Œå·</li>\n</ol>\n<h2 id=\"å›¾åºŠé…ç½®\"><a href=\"#å›¾åºŠé…ç½®\" class=\"headerlink\" title=\"å›¾åºŠé…ç½®\"></a>å›¾åºŠé…ç½®</h2><h3 id=\"1ã€å®‰è£…PicGo\"><a href=\"#1ã€å®‰è£…PicGo\" class=\"headerlink\" title=\"1ã€å®‰è£…PicGo\"></a>1ã€å®‰è£…PicGo</h3><p>ä¸‹è½½åœ°å€ï¼š<a href=\"https://github.com/Molunerfinn/PicGo/releases\">https://github.com/Molunerfinn/PicGo/releases</a></p>\n<p>å®‰è£… PicGo-Setup-2.3.0-beta.7-ia32.exeï¼Œåœ¨PicGoä¸­æ‰“å¼€PicGoè®¾ç½®ï¼Œæ‰¾åˆ°è®¾ç½®Serverï¼Œç‚¹å‡»è®¾ç½®ï¼Œç‚¹å‡»å¼€å¯Serverï¼Œç‚¹å‡»ç¡®å®šå³å¯ã€‚</p>\n<h3 id=\"2ã€é…ç½®Typora\"><a href=\"#2ã€é…ç½®Typora\" class=\"headerlink\" title=\"2ã€é…ç½®Typora\"></a>2ã€é…ç½®Typora</h3><p>æ–‡ä»¶-åå¥½è®¾ç½®-å›¾åƒ-è®¾ç½®æ’å…¥å›¾ç‰‡æ—¶ ä¸Šä¼ å›¾ç‰‡-ä¸Šä¼ æœåŠ¡é€‰æ‹©picgo.appï¼Œé€‰æ‹©picgoçš„å®‰è£…è·¯å¾„ï¼ŒéªŒè¯å›¾ç‰‡ä¸Šä¼ é€‰é¡¹</p>\n<h3 id=\"3ã€é˜¿é‡Œäº‘OSSæ­å»ºå›¾åºŠ\"><a href=\"#3ã€é˜¿é‡Œäº‘OSSæ­å»ºå›¾åºŠ\" class=\"headerlink\" title=\"3ã€é˜¿é‡Œäº‘OSSæ­å»ºå›¾åºŠ\"></a>3ã€é˜¿é‡Œäº‘OSSæ­å»ºå›¾åºŠ</h3><h4 id=\"3-1ã€å¼€é€šé˜¿é‡Œäº‘å¯¹è±¡å­˜å‚¨\"><a href=\"#3-1ã€å¼€é€šé˜¿é‡Œäº‘å¯¹è±¡å­˜å‚¨\" class=\"headerlink\" title=\"3.1ã€å¼€é€šé˜¿é‡Œäº‘å¯¹è±¡å­˜å‚¨\"></a>3.1ã€å¼€é€šé˜¿é‡Œäº‘å¯¹è±¡å­˜å‚¨</h4><p>å¼€é€šé˜¿é‡Œäº‘å¯¹è±¡å­˜å‚¨<a href=\"https://www.aliyun.com/product/oss%EF%BC%8C%E6%B3%A8%E5%86%8C%E9%98%BF%E9%87%8C%E4%BA%91%E8%B4%A6%E5%8F%B7%E5%90%8E%EF%BC%8C%E5%BC%80%E9%80%9A%E5%AF%B9%E8%B1%A1%E5%82%A8%E5%AD%98%EF%BC%8C%E8%BF%9B%E5%85%A5%E5%AF%B9%E8%B1%A1%E5%AD%98%E5%82%A8OSS%E7%9A%84%E6%8E%A7%E5%88%B6%E5%8F%B0\">https://www.aliyun.com/product/ossï¼Œæ³¨å†Œé˜¿é‡Œäº‘è´¦å·åï¼Œå¼€é€šå¯¹è±¡å‚¨å­˜ï¼Œè¿›å…¥å¯¹è±¡å­˜å‚¨OSSçš„æ§åˆ¶å°</a></p>\n<h4 id=\"3-2ã€åˆ›å»ºbucket\"><a href=\"#3-2ã€åˆ›å»ºbucket\" class=\"headerlink\" title=\"3.2ã€åˆ›å»ºbucket\"></a>3.2ã€åˆ›å»ºbucket</h4><ul>\n<li><p>åœ¨å·¦ä¾§é€‰æ‹©æ¦‚è§ˆï¼Œç„¶ååœ¨å³ä¾§Bucketç®¡ç†ä¸­åˆ›å»ºä¸€ä¸ªæ–°çš„bucket</p>\n</li>\n<li><p>åˆ›å»ºBucketå…·ä½“é…ç½®</p>\n<blockquote>\n<p>Bucketåå­—ä¸èƒ½æœ‰å¤§å†™å­—æ¯ã€åœ°åŸŸå°±è¿‘é€‰æ‹©ã€å­˜å‚¨ç±»å‹é€‰æ‹©<code>æ ‡å‡†å­˜å‚¨</code>ï¼Œè¯»å†™æƒé™<code>å…¬å…±è¯»</code></p>\n</blockquote>\n</li>\n<li><p>åˆ›å»ºæˆåŠŸåï¼Œå¯ä»¥åœ¨Bucketåˆ—è¡¨ä¸­æŸ¥çœ‹ï¼Œè®°ä½è‡ªå·±çš„è®¿é—®åŸŸåå’Œåœ°åŸŸèŠ‚ç‚¹ï¼Œåé¢ä¼šç”¨åˆ°ã€‚</p>\n</li>\n</ul>\n<h4 id=\"3-3ã€åˆ›å»ºAccessKey\"><a href=\"#3-3ã€åˆ›å»ºAccessKey\" class=\"headerlink\" title=\"3.3ã€åˆ›å»ºAccessKey\"></a>3.3ã€åˆ›å»ºAccessKey</h4><p>é¡µé¢å³ä¸Šè§’ï¼Œé¼ æ ‡æ”¾åœ¨å¤´åƒå¤„ï¼Œåœ¨å¼¹å‡ºçš„æ¡†é‡Œé€‰æ‹©AccessKeyç®¡ç†ï¼Œåœ¨å¼¹å‡ºçš„é€‰é¡¹æ¡†é‡Œï¼Œé€‰æ‹©<code>ç»§ç»­ä½¿ç”¨AccessKey</code>ã€‚</p>\n<p>è¿›å…¥åï¼Œåˆ›å»ºä¸€ä¸ª<code>AccessKey</code>ã€‚</p>\n<p>åœ¨å¼¹å‡ºçš„ç•Œé¢é‡Œï¼Œè®°ä½ä½ çš„<code>accessKeyId</code>å’Œ<code>accessKeySecret</code>ã€‚</p>\n<h4 id=\"3-4ã€äº†è§£æ”¶è´¹æ ‡å‡†\"><a href=\"#3-4ã€äº†è§£æ”¶è´¹æ ‡å‡†\" class=\"headerlink\" title=\"3.4ã€äº†è§£æ”¶è´¹æ ‡å‡†\"></a>3.4ã€äº†è§£æ”¶è´¹æ ‡å‡†</h4><p>ä½¿ç”¨é»˜è®¤çš„0.12å…ƒ/1GB/1ä¸ªæœˆå³å¯ã€‚</p>\n<h3 id=\"4ã€é…ç½®PicGo\"><a href=\"#4ã€é…ç½®PicGo\" class=\"headerlink\" title=\"4ã€é…ç½®PicGo\"></a>4ã€é…ç½®PicGo</h3><p>æˆ‘ä»¬æ‰“å¼€æ‰“å¼€PicGoçš„ä¸»ç•Œé¢,åœ¨å›¾åºŠè®¾ç½®é‡Œé¢é€‰æ‹©é˜¿é‡Œäº‘OSSï¼Œä¾ç…§ä¸‹é¢æ³¨æ„äº‹é¡¹å¡«å†™ä¿¡æ¯ã€‚</p>\n<p>è®¾å®šKeyldï¼šå¡«å†™æˆ‘ä»¬åœ¨ç¬¬ä¸‰æ­¥ä¸­è·å¾—çš„AccessKeyID</p>\n<p>è®¾å®šKeySecretï¼šå¡«å†™æˆ‘ä»¬åœ¨ç¬¬ä¸‰æ­¥ä¸­è·å¾—çš„AccessKeyIDSecret</p>\n<p>è®¾å®šå‚¨å­˜ç©ºé—´åï¼šå¡«å†™æˆ‘ä»¬åœ¨ç¬¬äºŒæ­¥ä¸­å¡«å†™çš„bucketåç§°</p>\n<p>ç¡®è®¤å­˜å‚¨åŒºåŸŸï¼šå¡«å†™æˆ‘ä»¬åœ¨ç¬¬äºŒæ­¥ä¸­æŸ¥çœ‹çš„åœ°åŸŸèŠ‚ç‚¹ï¼Œæ³¨æ„å¤åˆ¶çš„æ ¼å¼ï¼šåªéœ€è¦å¤åˆ¶oss-cn-Xxxxå³å¯ï¼Œä¸éœ€è¦åé¢çš„.aliyuncs.com</p>\n<h3 id=\"5ã€æµ‹è¯•ä½¿ç”¨\"><a href=\"#5ã€æµ‹è¯•ä½¿ç”¨\" class=\"headerlink\" title=\"5ã€æµ‹è¯•ä½¿ç”¨\"></a>5ã€æµ‹è¯•ä½¿ç”¨</h3><p>ç»è¿‡ä¸Šé¢çš„ä¸€ç³»åˆ—é…ç½®ä¹‹åï¼Œæˆ‘ä»¬å°±å®Œæˆäº†Typoraçš„å›¾åºŠé…ç½®ï¼Œç°åœ¨æˆ‘ä»¬å¯ä»¥ä½¿ç”¨Markdownå¼€å§‹å†™æ–‡ç« äº†ï¼Œå›¾ç‰‡ã€æˆªå›¾ä¼šåœ¨ç²˜è´´ä¹‹åï¼Œè‡ªåŠ¨é€šè¿‡PicGoä¸Šä¼ åˆ°äº†è¿œç«¯å›¾åºŠã€‚åŒæ—¶ä¹Ÿå¯ä»¥æ‰‹åŠ¨å°†ä»¥å‰åœ¨æœ¬åœ°å­˜å‚¨çš„å›¾ç‰‡ä¸Šä¼ åˆ°å›¾åºŠä¸Šã€‚</p>\n<h2 id=\"å‚è€ƒ\"><a href=\"#å‚è€ƒ\" class=\"headerlink\" title=\"å‚è€ƒ\"></a>å‚è€ƒ</h2><p><a href=\"https://blog.csdn.net/qq_51808107/article/details/124044961\">https://blog.csdn.net/qq_51808107/article/details/124044961</a></p>\n","site":{"data":{}},"length":1802,"excerpt":"<p>åœ¨æˆ‘ä»¬æ—¥å¸¸ä½¿ç”¨Typoraå†™æ–‡æ¡£æ—¶ï¼Œä¸€èˆ¬å›¾ç‰‡éƒ½æ˜¯æ”¾åœ¨æœ¬åœ°çš„ä¸€ä¸ªç›¸å¯¹è·¯å¾„ä¸‹ï¼Œå¦‚æœå°†markdownæ–‡ä»¶å‘é€ç»™åˆ«äººï¼Œé‚£ä¹ˆè¿™ä¸ªæ–‡ä»¶ä¸­çš„å›¾ç‰‡åˆ«äººè‡ªç„¶æ˜¯è®¿é—®ä¸åˆ°çš„ã€‚å›¾åºŠçš„ä½œç”¨å°±æ˜¯æŠŠå›¾ç‰‡å­˜åœ¨ç½‘ç«™ä¸Šï¼Œå¯¹åº”çš„å›¾ç‰‡ç”Ÿæˆä¸€ä¸ªé“¾æ¥ï¼Œmarkdownæ–‡ä»¶ä¸­ä½¿ç”¨è¯¥é“¾æ¥è®¿é—®å›¾ç‰‡ã€‚åœ¨æœ¬æ–‡ä¸­æˆ‘ä»¬ä½¿ç”¨Typora + PicGo + é˜¿é‡Œäº‘OSSå›¾åºŠå®ç°å›¾ç‰‡è‡ªåŠ¨ä¸Šä¼ å¹¶è‡ªç”±è®¿é—®ã€‚</p>","more":"<h2 id=\"ä¸‹è½½-Typora\"><a href=\"#ä¸‹è½½-Typora\" class=\"headerlink\" title=\"ä¸‹è½½ Typora\"></a>ä¸‹è½½ Typora</h2><p><a href=\"https://typora.io/\">Typoraå®˜ç½‘</a> å®˜ç½‘æ‹‰åˆ°æœ€ä¸‹ï¼Œç‚¹å‡» <a href=\"https://typora.io/releases/all\">History Releases</a>ï¼Œé€‰æ‹© Dev/Beta Releasesï¼Œæ‹‰åˆ°æœ€ä¸‹ More Beta,</p>\n<p>é€‰æ‹©å¯¹åº”ç³»ç»Ÿçš„é“¾æ¥ <a href=\"https://typora.io/windows/dev_release.html\">old Windows / Linux beta</a>ï¼Œ<a href=\"https://typora.io/dev_release.html\">old macOS beta</a></p>\n<p>Windows x64ï¼š<a href=\"https://download.typora.io/windows/typora-update-x64-1016.exe\">Download old version (Windows x64)</a></p>\n<p>Mac OSï¼š<a href=\"https://download.typora.io/mac/Typora-0.11.18.dmg\">Download v0.11.18</a></p>\n<h2 id=\"å¸¸ç”¨è®¾ç½®\"><a href=\"#å¸¸ç”¨è®¾ç½®\" class=\"headerlink\" title=\"å¸¸ç”¨è®¾ç½®\"></a>å¸¸ç”¨è®¾ç½®</h2><h3 id=\"é€šç”¨\"><a href=\"#é€šç”¨\" class=\"headerlink\" title=\"é€šç”¨\"></a>é€šç”¨</h3><ol>\n<li>æ‰“å¼€è‡ªåŠ¨ä¿å­˜</li>\n<li>å…³é—­è‡ªåŠ¨æ£€æŸ¥æ›´æ–°</li>\n<li>å…³é—­å‘é€åŒ¿åä½¿ç”¨æ•°æ®</li>\n</ol>\n<h3 id=\"å¤–è§‚\"><a href=\"#å¤–è§‚\" class=\"headerlink\" title=\"å¤–è§‚\"></a>å¤–è§‚</h3><ol>\n<li><p>è‡ªå®šä¹‰å­—ä½“</p>\n</li>\n<li><p>å‹¾é€‰ä¾§è¾¹æ å¤§çº²è§†å›¾æŠ˜å å’Œå±•å¼€</p>\n</li>\n<li><p>é…ç½® Next ä¸»é¢˜</p>\n<ol>\n<li><p>å®˜ç½‘ï¼š<a href=\"https://theme.typora.io/theme/NexT/\">https://theme.typora.io/theme/NexT/</a></p>\n</li>\n<li><p>ä¸‹è½½ zip å‹ç¼©åŒ…ï¼š<a href=\"https://github.com/BillChen2k/typora-theme-next/releases/download/1.1.1/typora-theme-next.zip\">typora-theme-next.zip</a></p>\n</li>\n<li><p>Typora å·¦ä¸Šè§’ï¼Œæ–‡ä»¶ - åå¥½è®¾ç½® - å¤–è§‚ - æ‰“å¼€ä¸»é¢˜æ–‡ä»¶å¤¹<code>xxx</code></p>\n</li>\n<li><p>æŠŠ typora-theme-next.zip è§£å‹ï¼Œå°†æ‰€æœ‰æ–‡ä»¶å¤åˆ¶/å‰ªåˆ‡åˆ°ä¸»é¢˜æ–‡ä»¶å¤¹<code>xxx</code>ä¸‹</p>\n</li>\n<li><p>é‡å¯ Typoraï¼Œè®¾ç½®å¤–è§‚é€‰æ‹©Nextå³å¯</p>\n</li>\n<li><p>å¦‚æœæ„Ÿè§‰é¡µé¢å®½åº¦å¤ªå°ï¼Œå¯ä»¥æ‰“å¼€next.cssï¼Œæœç´¢å¹¶é…ç½®max-width</p>\n</li>\n<li><p>å¦‚æœæ„Ÿè§‰æ•´ä½“é¡µé¢åå°ï¼Œå¯ä»¥<code>Ctrl Shift +/-</code>å¢å¤§/å‡å°æ•´ä½“é¡µé¢</p>\n</li>\n</ol>\n</li>\n</ol>\n<h3 id=\"ç¼–è¾‘å™¨\"><a href=\"#ç¼–è¾‘å™¨\" class=\"headerlink\" title=\"ç¼–è¾‘å™¨\"></a>ç¼–è¾‘å™¨</h3><ol>\n<li>è®¾ç½®é»˜è®¤æ¢è¡Œç¬¦</li>\n<li>å–æ¶ˆæ‹¼å†™æ£€æŸ¥ï¼Œå‹¾é€‰<code>ä¸ä½¿ç”¨æ‹¼å†™æ£€æŸ¥</code></li>\n</ol>\n<h3 id=\"å›¾åƒ\"><a href=\"#å›¾åƒ\" class=\"headerlink\" title=\"å›¾åƒ\"></a>å›¾åƒ</h3><ol>\n<li><p>æ’å…¥å›¾ç‰‡æ—¶</p>\n<p> é€‰æ‹©ä¸Šä¼ å›¾ç‰‡ï¼Œå‹¾é€‰<code>å¯¹æœ¬åœ°ä½ç½®çš„å›¾ç‰‡åº”ç”¨ä¸Šè¿°è§„åˆ™</code>å’Œ<code>å¯¹ç½‘ç»œä½ç½®çš„å›¾ç‰‡åº”ç”¨ä¸Šè¿°è§„åˆ™</code></p>\n</li>\n<li><p>ä¸Šä¼ æœåŠ¡è®¾å®š</p>\n<p> æ¥ä¸‹æ¥ä¼šå…·ä½“è®²åˆ°å›¾åºŠçš„é…ç½®</p>\n</li>\n</ol>\n<h3 id=\"Markdown\"><a href=\"#Markdown\" class=\"headerlink\" title=\"Markdown\"></a>Markdown</h3><ol>\n<li>å‹¾é€‰æ˜¾ç¤ºä»£ç å—è¡Œå·</li>\n</ol>\n<h2 id=\"å›¾åºŠé…ç½®\"><a href=\"#å›¾åºŠé…ç½®\" class=\"headerlink\" title=\"å›¾åºŠé…ç½®\"></a>å›¾åºŠé…ç½®</h2><h3 id=\"1ã€å®‰è£…PicGo\"><a href=\"#1ã€å®‰è£…PicGo\" class=\"headerlink\" title=\"1ã€å®‰è£…PicGo\"></a>1ã€å®‰è£…PicGo</h3><p>ä¸‹è½½åœ°å€ï¼š<a href=\"https://github.com/Molunerfinn/PicGo/releases\">https://github.com/Molunerfinn/PicGo/releases</a></p>\n<p>å®‰è£… PicGo-Setup-2.3.0-beta.7-ia32.exeï¼Œåœ¨PicGoä¸­æ‰“å¼€PicGoè®¾ç½®ï¼Œæ‰¾åˆ°è®¾ç½®Serverï¼Œç‚¹å‡»è®¾ç½®ï¼Œç‚¹å‡»å¼€å¯Serverï¼Œç‚¹å‡»ç¡®å®šå³å¯ã€‚</p>\n<h3 id=\"2ã€é…ç½®Typora\"><a href=\"#2ã€é…ç½®Typora\" class=\"headerlink\" title=\"2ã€é…ç½®Typora\"></a>2ã€é…ç½®Typora</h3><p>æ–‡ä»¶-åå¥½è®¾ç½®-å›¾åƒ-è®¾ç½®æ’å…¥å›¾ç‰‡æ—¶ ä¸Šä¼ å›¾ç‰‡-ä¸Šä¼ æœåŠ¡é€‰æ‹©picgo.appï¼Œé€‰æ‹©picgoçš„å®‰è£…è·¯å¾„ï¼ŒéªŒè¯å›¾ç‰‡ä¸Šä¼ é€‰é¡¹</p>\n<h3 id=\"3ã€é˜¿é‡Œäº‘OSSæ­å»ºå›¾åºŠ\"><a href=\"#3ã€é˜¿é‡Œäº‘OSSæ­å»ºå›¾åºŠ\" class=\"headerlink\" title=\"3ã€é˜¿é‡Œäº‘OSSæ­å»ºå›¾åºŠ\"></a>3ã€é˜¿é‡Œäº‘OSSæ­å»ºå›¾åºŠ</h3><h4 id=\"3-1ã€å¼€é€šé˜¿é‡Œäº‘å¯¹è±¡å­˜å‚¨\"><a href=\"#3-1ã€å¼€é€šé˜¿é‡Œäº‘å¯¹è±¡å­˜å‚¨\" class=\"headerlink\" title=\"3.1ã€å¼€é€šé˜¿é‡Œäº‘å¯¹è±¡å­˜å‚¨\"></a>3.1ã€å¼€é€šé˜¿é‡Œäº‘å¯¹è±¡å­˜å‚¨</h4><p>å¼€é€šé˜¿é‡Œäº‘å¯¹è±¡å­˜å‚¨<a href=\"https://www.aliyun.com/product/oss%EF%BC%8C%E6%B3%A8%E5%86%8C%E9%98%BF%E9%87%8C%E4%BA%91%E8%B4%A6%E5%8F%B7%E5%90%8E%EF%BC%8C%E5%BC%80%E9%80%9A%E5%AF%B9%E8%B1%A1%E5%82%A8%E5%AD%98%EF%BC%8C%E8%BF%9B%E5%85%A5%E5%AF%B9%E8%B1%A1%E5%AD%98%E5%82%A8OSS%E7%9A%84%E6%8E%A7%E5%88%B6%E5%8F%B0\">https://www.aliyun.com/product/ossï¼Œæ³¨å†Œé˜¿é‡Œäº‘è´¦å·åï¼Œå¼€é€šå¯¹è±¡å‚¨å­˜ï¼Œè¿›å…¥å¯¹è±¡å­˜å‚¨OSSçš„æ§åˆ¶å°</a></p>\n<h4 id=\"3-2ã€åˆ›å»ºbucket\"><a href=\"#3-2ã€åˆ›å»ºbucket\" class=\"headerlink\" title=\"3.2ã€åˆ›å»ºbucket\"></a>3.2ã€åˆ›å»ºbucket</h4><ul>\n<li><p>åœ¨å·¦ä¾§é€‰æ‹©æ¦‚è§ˆï¼Œç„¶ååœ¨å³ä¾§Bucketç®¡ç†ä¸­åˆ›å»ºä¸€ä¸ªæ–°çš„bucket</p>\n</li>\n<li><p>åˆ›å»ºBucketå…·ä½“é…ç½®</p>\n<blockquote>\n<p>Bucketåå­—ä¸èƒ½æœ‰å¤§å†™å­—æ¯ã€åœ°åŸŸå°±è¿‘é€‰æ‹©ã€å­˜å‚¨ç±»å‹é€‰æ‹©<code>æ ‡å‡†å­˜å‚¨</code>ï¼Œè¯»å†™æƒé™<code>å…¬å…±è¯»</code></p>\n</blockquote>\n</li>\n<li><p>åˆ›å»ºæˆåŠŸåï¼Œå¯ä»¥åœ¨Bucketåˆ—è¡¨ä¸­æŸ¥çœ‹ï¼Œè®°ä½è‡ªå·±çš„è®¿é—®åŸŸåå’Œåœ°åŸŸèŠ‚ç‚¹ï¼Œåé¢ä¼šç”¨åˆ°ã€‚</p>\n</li>\n</ul>\n<h4 id=\"3-3ã€åˆ›å»ºAccessKey\"><a href=\"#3-3ã€åˆ›å»ºAccessKey\" class=\"headerlink\" title=\"3.3ã€åˆ›å»ºAccessKey\"></a>3.3ã€åˆ›å»ºAccessKey</h4><p>é¡µé¢å³ä¸Šè§’ï¼Œé¼ æ ‡æ”¾åœ¨å¤´åƒå¤„ï¼Œåœ¨å¼¹å‡ºçš„æ¡†é‡Œé€‰æ‹©AccessKeyç®¡ç†ï¼Œåœ¨å¼¹å‡ºçš„é€‰é¡¹æ¡†é‡Œï¼Œé€‰æ‹©<code>ç»§ç»­ä½¿ç”¨AccessKey</code>ã€‚</p>\n<p>è¿›å…¥åï¼Œåˆ›å»ºä¸€ä¸ª<code>AccessKey</code>ã€‚</p>\n<p>åœ¨å¼¹å‡ºçš„ç•Œé¢é‡Œï¼Œè®°ä½ä½ çš„<code>accessKeyId</code>å’Œ<code>accessKeySecret</code>ã€‚</p>\n<h4 id=\"3-4ã€äº†è§£æ”¶è´¹æ ‡å‡†\"><a href=\"#3-4ã€äº†è§£æ”¶è´¹æ ‡å‡†\" class=\"headerlink\" title=\"3.4ã€äº†è§£æ”¶è´¹æ ‡å‡†\"></a>3.4ã€äº†è§£æ”¶è´¹æ ‡å‡†</h4><p>ä½¿ç”¨é»˜è®¤çš„0.12å…ƒ/1GB/1ä¸ªæœˆå³å¯ã€‚</p>\n<h3 id=\"4ã€é…ç½®PicGo\"><a href=\"#4ã€é…ç½®PicGo\" class=\"headerlink\" title=\"4ã€é…ç½®PicGo\"></a>4ã€é…ç½®PicGo</h3><p>æˆ‘ä»¬æ‰“å¼€æ‰“å¼€PicGoçš„ä¸»ç•Œé¢,åœ¨å›¾åºŠè®¾ç½®é‡Œé¢é€‰æ‹©é˜¿é‡Œäº‘OSSï¼Œä¾ç…§ä¸‹é¢æ³¨æ„äº‹é¡¹å¡«å†™ä¿¡æ¯ã€‚</p>\n<p>è®¾å®šKeyldï¼šå¡«å†™æˆ‘ä»¬åœ¨ç¬¬ä¸‰æ­¥ä¸­è·å¾—çš„AccessKeyID</p>\n<p>è®¾å®šKeySecretï¼šå¡«å†™æˆ‘ä»¬åœ¨ç¬¬ä¸‰æ­¥ä¸­è·å¾—çš„AccessKeyIDSecret</p>\n<p>è®¾å®šå‚¨å­˜ç©ºé—´åï¼šå¡«å†™æˆ‘ä»¬åœ¨ç¬¬äºŒæ­¥ä¸­å¡«å†™çš„bucketåç§°</p>\n<p>ç¡®è®¤å­˜å‚¨åŒºåŸŸï¼šå¡«å†™æˆ‘ä»¬åœ¨ç¬¬äºŒæ­¥ä¸­æŸ¥çœ‹çš„åœ°åŸŸèŠ‚ç‚¹ï¼Œæ³¨æ„å¤åˆ¶çš„æ ¼å¼ï¼šåªéœ€è¦å¤åˆ¶oss-cn-Xxxxå³å¯ï¼Œä¸éœ€è¦åé¢çš„.aliyuncs.com</p>\n<h3 id=\"5ã€æµ‹è¯•ä½¿ç”¨\"><a href=\"#5ã€æµ‹è¯•ä½¿ç”¨\" class=\"headerlink\" title=\"5ã€æµ‹è¯•ä½¿ç”¨\"></a>5ã€æµ‹è¯•ä½¿ç”¨</h3><p>ç»è¿‡ä¸Šé¢çš„ä¸€ç³»åˆ—é…ç½®ä¹‹åï¼Œæˆ‘ä»¬å°±å®Œæˆäº†Typoraçš„å›¾åºŠé…ç½®ï¼Œç°åœ¨æˆ‘ä»¬å¯ä»¥ä½¿ç”¨Markdownå¼€å§‹å†™æ–‡ç« äº†ï¼Œå›¾ç‰‡ã€æˆªå›¾ä¼šåœ¨ç²˜è´´ä¹‹åï¼Œè‡ªåŠ¨é€šè¿‡PicGoä¸Šä¼ åˆ°äº†è¿œç«¯å›¾åºŠã€‚åŒæ—¶ä¹Ÿå¯ä»¥æ‰‹åŠ¨å°†ä»¥å‰åœ¨æœ¬åœ°å­˜å‚¨çš„å›¾ç‰‡ä¸Šä¼ åˆ°å›¾åºŠä¸Šã€‚</p>\n<h2 id=\"å‚è€ƒ\"><a href=\"#å‚è€ƒ\" class=\"headerlink\" title=\"å‚è€ƒ\"></a>å‚è€ƒ</h2><p><a href=\"https://blog.csdn.net/qq_51808107/article/details/124044961\">https://blog.csdn.net/qq_51808107/article/details/124044961</a></p>"},{"title":"å›è€å®¶çš„ä¸€å‘¨","copyright":true,"mathjax":true,"date":"2022-12-23T10:46:02.000Z","urlname":"week-back-home","_content":"\nä¸Šå‘¨ä»å¸¸å·çœè€ƒå›æ¥ï¼Œå½“å¤©æ™šä¸Šæ­£å¥½æ˜¯ä¸–ç•Œæ¯å†³èµ›ï¼Œçœ‹åˆ°äº†å‡Œæ™¨ä¸¤ç‚¹ï¼Œç¬¬äºŒå¤©ä¸€å¤§æ—©èµ·åºŠï¼Œå’Œçˆ¸å¦ˆä¸€èµ·å¼€è½¦å›è€å®¶ï¼Œç„¶åå°±å¼€å§‹äº†åœ¨è€å®¶çš„ä¸€å‘¨ç”Ÿæ´»ã€‚\n\n<!--more-->\n\nåœ¨è€å®¶çš„ä¸€å‘¨é™¤äº†åƒé¥­å°±æ˜¯å–é…’ï¼Œæ— èŠçš„å¾ˆã€‚ç¬¬ä¸€å¤©æ™šä¸Šæœ‰ç‚¹å¤´ç—›ï¼Œè¿˜ä»¥ä¸ºæ˜¯é˜³äº†ï¼Œåé¢ä¸€ç›´æ²¡ä»€ä¹ˆå¤§çš„ç—‡çŠ¶ï¼Œä¸è¿‡æ¯å¤©éƒ½æ˜¯å¤´æ˜è„‘èƒ€çš„ï¼Œæ„Ÿè§‰åº”è¯¥åªæ˜¯æ™®é€šæµæ„Ÿï¼ˆåˆ°ç°åœ¨è¿˜æ²¡å¥½ï¼‰ã€‚è€å®¶å¥½å¤šäººéƒ½æœ‰ç‚¹å‘çƒ§ï¼Œè¯Šæ‰€é‡Œéƒ½æ˜¯è€äººåœ¨æŒ‚æ°´ï¼Œä¹Ÿä¸çŸ¥é“æŒ‚çš„æ˜¯ä»€ä¹ˆæ°´ï¼Œè€å¹´äººæŒ‚æ°´å¥½åƒä¼šèˆ’æœå¾ˆå¤šã€‚\n\nåœ¨è€å®¶è¿˜ç®€å•è¿‡äº†ä¸ªå°ç”Ÿæ—¥ï¼Œè€çˆ¸è€å¦ˆåœ¨é•‡ä¸Šé…’åº—åŠäº†ä¸¤æ¡Œé…’å¸­æ¥å®¢ï¼Œå§¨å¦ˆç»™ä¹°äº†ä¸ªå¤§è›‹ç³•ï¼Œè¡¨å¼Ÿä»å¸‚é‡Œå›æ¥è¿˜ä¹°äº†ä¸€æŸèŠ±ï¼Œæœ‰ç‚¹å°æ¸©é¦¨ã€‚\n\nè¡¨ä¾„ä»Šå¹´å…­å²äº†ï¼Œå¾ˆå¯çˆ±ï¼Œæ´»è¹¦ä¹±è·³çš„ã€‚\n\nçˆ·çˆ·ã€å¥¶å¥¶é‚£ä¸€è¾ˆçš„å¥½å¤šäººå¹´çºªéƒ½å¾ˆå¤§äº†ï¼Œå¸Œæœ›ä»–ä»¬å¥å¥åº·åº·ã€‚\n\nä»Šå¤©ä¸‹åˆå›åˆ°å¸¸å·äº†ï¼Œå‡†å¤‡æœ€è¿‘æææ¯•ä¸šè®ºæ–‡çš„äº‹äº†ã€‚\n\n","source":"_posts/å›è€å®¶çš„ä¸€å‘¨.md","raw":"---\ntitle: å›è€å®¶çš„ä¸€å‘¨\ncopyright: true\nmathjax: true\ncategories: æ—¥å¸¸å°è®°\ntags: \ndate: 2022-12-23 18:46:02\nurlname: week-back-home\n---\n\nä¸Šå‘¨ä»å¸¸å·çœè€ƒå›æ¥ï¼Œå½“å¤©æ™šä¸Šæ­£å¥½æ˜¯ä¸–ç•Œæ¯å†³èµ›ï¼Œçœ‹åˆ°äº†å‡Œæ™¨ä¸¤ç‚¹ï¼Œç¬¬äºŒå¤©ä¸€å¤§æ—©èµ·åºŠï¼Œå’Œçˆ¸å¦ˆä¸€èµ·å¼€è½¦å›è€å®¶ï¼Œç„¶åå°±å¼€å§‹äº†åœ¨è€å®¶çš„ä¸€å‘¨ç”Ÿæ´»ã€‚\n\n<!--more-->\n\nåœ¨è€å®¶çš„ä¸€å‘¨é™¤äº†åƒé¥­å°±æ˜¯å–é…’ï¼Œæ— èŠçš„å¾ˆã€‚ç¬¬ä¸€å¤©æ™šä¸Šæœ‰ç‚¹å¤´ç—›ï¼Œè¿˜ä»¥ä¸ºæ˜¯é˜³äº†ï¼Œåé¢ä¸€ç›´æ²¡ä»€ä¹ˆå¤§çš„ç—‡çŠ¶ï¼Œä¸è¿‡æ¯å¤©éƒ½æ˜¯å¤´æ˜è„‘èƒ€çš„ï¼Œæ„Ÿè§‰åº”è¯¥åªæ˜¯æ™®é€šæµæ„Ÿï¼ˆåˆ°ç°åœ¨è¿˜æ²¡å¥½ï¼‰ã€‚è€å®¶å¥½å¤šäººéƒ½æœ‰ç‚¹å‘çƒ§ï¼Œè¯Šæ‰€é‡Œéƒ½æ˜¯è€äººåœ¨æŒ‚æ°´ï¼Œä¹Ÿä¸çŸ¥é“æŒ‚çš„æ˜¯ä»€ä¹ˆæ°´ï¼Œè€å¹´äººæŒ‚æ°´å¥½åƒä¼šèˆ’æœå¾ˆå¤šã€‚\n\nåœ¨è€å®¶è¿˜ç®€å•è¿‡äº†ä¸ªå°ç”Ÿæ—¥ï¼Œè€çˆ¸è€å¦ˆåœ¨é•‡ä¸Šé…’åº—åŠäº†ä¸¤æ¡Œé…’å¸­æ¥å®¢ï¼Œå§¨å¦ˆç»™ä¹°äº†ä¸ªå¤§è›‹ç³•ï¼Œè¡¨å¼Ÿä»å¸‚é‡Œå›æ¥è¿˜ä¹°äº†ä¸€æŸèŠ±ï¼Œæœ‰ç‚¹å°æ¸©é¦¨ã€‚\n\nè¡¨ä¾„ä»Šå¹´å…­å²äº†ï¼Œå¾ˆå¯çˆ±ï¼Œæ´»è¹¦ä¹±è·³çš„ã€‚\n\nçˆ·çˆ·ã€å¥¶å¥¶é‚£ä¸€è¾ˆçš„å¥½å¤šäººå¹´çºªéƒ½å¾ˆå¤§äº†ï¼Œå¸Œæœ›ä»–ä»¬å¥å¥åº·åº·ã€‚\n\nä»Šå¤©ä¸‹åˆå›åˆ°å¸¸å·äº†ï¼Œå‡†å¤‡æœ€è¿‘æææ¯•ä¸šè®ºæ–‡çš„äº‹äº†ã€‚\n\n","slug":"å›è€å®¶çš„ä¸€å‘¨","published":1,"updated":"2023-01-17T01:34:20.538Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cld8kfsiy000kzvt81s4l7d8z","content":"<p>ä¸Šå‘¨ä»å¸¸å·çœè€ƒå›æ¥ï¼Œå½“å¤©æ™šä¸Šæ­£å¥½æ˜¯ä¸–ç•Œæ¯å†³èµ›ï¼Œçœ‹åˆ°äº†å‡Œæ™¨ä¸¤ç‚¹ï¼Œç¬¬äºŒå¤©ä¸€å¤§æ—©èµ·åºŠï¼Œå’Œçˆ¸å¦ˆä¸€èµ·å¼€è½¦å›è€å®¶ï¼Œç„¶åå°±å¼€å§‹äº†åœ¨è€å®¶çš„ä¸€å‘¨ç”Ÿæ´»ã€‚</p>\n<span id=\"more\"></span>\n\n<p>åœ¨è€å®¶çš„ä¸€å‘¨é™¤äº†åƒé¥­å°±æ˜¯å–é…’ï¼Œæ— èŠçš„å¾ˆã€‚ç¬¬ä¸€å¤©æ™šä¸Šæœ‰ç‚¹å¤´ç—›ï¼Œè¿˜ä»¥ä¸ºæ˜¯é˜³äº†ï¼Œåé¢ä¸€ç›´æ²¡ä»€ä¹ˆå¤§çš„ç—‡çŠ¶ï¼Œä¸è¿‡æ¯å¤©éƒ½æ˜¯å¤´æ˜è„‘èƒ€çš„ï¼Œæ„Ÿè§‰åº”è¯¥åªæ˜¯æ™®é€šæµæ„Ÿï¼ˆåˆ°ç°åœ¨è¿˜æ²¡å¥½ï¼‰ã€‚è€å®¶å¥½å¤šäººéƒ½æœ‰ç‚¹å‘çƒ§ï¼Œè¯Šæ‰€é‡Œéƒ½æ˜¯è€äººåœ¨æŒ‚æ°´ï¼Œä¹Ÿä¸çŸ¥é“æŒ‚çš„æ˜¯ä»€ä¹ˆæ°´ï¼Œè€å¹´äººæŒ‚æ°´å¥½åƒä¼šèˆ’æœå¾ˆå¤šã€‚</p>\n<p>åœ¨è€å®¶è¿˜ç®€å•è¿‡äº†ä¸ªå°ç”Ÿæ—¥ï¼Œè€çˆ¸è€å¦ˆåœ¨é•‡ä¸Šé…’åº—åŠäº†ä¸¤æ¡Œé…’å¸­æ¥å®¢ï¼Œå§¨å¦ˆç»™ä¹°äº†ä¸ªå¤§è›‹ç³•ï¼Œè¡¨å¼Ÿä»å¸‚é‡Œå›æ¥è¿˜ä¹°äº†ä¸€æŸèŠ±ï¼Œæœ‰ç‚¹å°æ¸©é¦¨ã€‚</p>\n<p>è¡¨ä¾„ä»Šå¹´å…­å²äº†ï¼Œå¾ˆå¯çˆ±ï¼Œæ´»è¹¦ä¹±è·³çš„ã€‚</p>\n<p>çˆ·çˆ·ã€å¥¶å¥¶é‚£ä¸€è¾ˆçš„å¥½å¤šäººå¹´çºªéƒ½å¾ˆå¤§äº†ï¼Œå¸Œæœ›ä»–ä»¬å¥å¥åº·åº·ã€‚</p>\n<p>ä»Šå¤©ä¸‹åˆå›åˆ°å¸¸å·äº†ï¼Œå‡†å¤‡æœ€è¿‘æææ¯•ä¸šè®ºæ–‡çš„äº‹äº†ã€‚</p>\n","site":{"data":{}},"length":323,"excerpt":"<p>ä¸Šå‘¨ä»å¸¸å·çœè€ƒå›æ¥ï¼Œå½“å¤©æ™šä¸Šæ­£å¥½æ˜¯ä¸–ç•Œæ¯å†³èµ›ï¼Œçœ‹åˆ°äº†å‡Œæ™¨ä¸¤ç‚¹ï¼Œç¬¬äºŒå¤©ä¸€å¤§æ—©èµ·åºŠï¼Œå’Œçˆ¸å¦ˆä¸€èµ·å¼€è½¦å›è€å®¶ï¼Œç„¶åå°±å¼€å§‹äº†åœ¨è€å®¶çš„ä¸€å‘¨ç”Ÿæ´»ã€‚</p>","more":"<p>åœ¨è€å®¶çš„ä¸€å‘¨é™¤äº†åƒé¥­å°±æ˜¯å–é…’ï¼Œæ— èŠçš„å¾ˆã€‚ç¬¬ä¸€å¤©æ™šä¸Šæœ‰ç‚¹å¤´ç—›ï¼Œè¿˜ä»¥ä¸ºæ˜¯é˜³äº†ï¼Œåé¢ä¸€ç›´æ²¡ä»€ä¹ˆå¤§çš„ç—‡çŠ¶ï¼Œä¸è¿‡æ¯å¤©éƒ½æ˜¯å¤´æ˜è„‘èƒ€çš„ï¼Œæ„Ÿè§‰åº”è¯¥åªæ˜¯æ™®é€šæµæ„Ÿï¼ˆåˆ°ç°åœ¨è¿˜æ²¡å¥½ï¼‰ã€‚è€å®¶å¥½å¤šäººéƒ½æœ‰ç‚¹å‘çƒ§ï¼Œè¯Šæ‰€é‡Œéƒ½æ˜¯è€äººåœ¨æŒ‚æ°´ï¼Œä¹Ÿä¸çŸ¥é“æŒ‚çš„æ˜¯ä»€ä¹ˆæ°´ï¼Œè€å¹´äººæŒ‚æ°´å¥½åƒä¼šèˆ’æœå¾ˆå¤šã€‚</p>\n<p>åœ¨è€å®¶è¿˜ç®€å•è¿‡äº†ä¸ªå°ç”Ÿæ—¥ï¼Œè€çˆ¸è€å¦ˆåœ¨é•‡ä¸Šé…’åº—åŠäº†ä¸¤æ¡Œé…’å¸­æ¥å®¢ï¼Œå§¨å¦ˆç»™ä¹°äº†ä¸ªå¤§è›‹ç³•ï¼Œè¡¨å¼Ÿä»å¸‚é‡Œå›æ¥è¿˜ä¹°äº†ä¸€æŸèŠ±ï¼Œæœ‰ç‚¹å°æ¸©é¦¨ã€‚</p>\n<p>è¡¨ä¾„ä»Šå¹´å…­å²äº†ï¼Œå¾ˆå¯çˆ±ï¼Œæ´»è¹¦ä¹±è·³çš„ã€‚</p>\n<p>çˆ·çˆ·ã€å¥¶å¥¶é‚£ä¸€è¾ˆçš„å¥½å¤šäººå¹´çºªéƒ½å¾ˆå¤§äº†ï¼Œå¸Œæœ›ä»–ä»¬å¥å¥åº·åº·ã€‚</p>\n<p>ä»Šå¤©ä¸‹åˆå›åˆ°å¸¸å·äº†ï¼Œå‡†å¤‡æœ€è¿‘æææ¯•ä¸šè®ºæ–‡çš„äº‹äº†ã€‚</p>"},{"title":"å­—èŠ‚æš‘æœŸå®ä¹ åŒç»„å®ä¹ ç”Ÿç§‹æ‹›æƒ…å†µåˆ†äº«","copyright":true,"mathjax":true,"date":"2022-12-13T12:02:14.000Z","urlname":"my-bytedance-internship-friends-offer","_content":"\nçªç„¶æƒ³èµ·æ¥åšè¿™ä¸ªåˆ†äº«ï¼Œæ˜¯å› ä¸ºåˆšå¥½ä¸‹åˆæœ‰ä¸ªå­—èŠ‚è·³åŠ¨æš‘æœŸå®ä¹ æ—¶åŒç»„çš„æœ‹å‹åˆšç­¾çº¦ä¸‰æ–¹ï¼Œå’Œçˆ¶æ¯ä¹Ÿé¡ºä¾¿åˆ†äº«äº†å…¶ä»–åŒç»„å®ä¹ ç”Ÿçš„ç­¾çº¦æƒ…å†µã€‚è¿™è¾¹ä¹Ÿç»™å¤§å®¶åˆ†äº«ä¸‹ã€‚\n\n<!--more-->\n\nåœ¨å­—èŠ‚è·³åŠ¨æš‘æœŸå®ä¹ æœŸé—´ï¼Œå‰å‰åååŠ ä¸Šæˆ‘ä¸€å…±æœ‰5åå®ä¹ ç”Ÿã€‚\n\nå®ä¹ ç”ŸAï¼šæµ™å¤§ç¡•ï¼Œåœ¨æˆ‘ä»¬ç»„ä»4æœˆä¸­å¹²åˆ°7æœˆä¸­ï¼Œèµ°å­—èŠ‚çš„æ´»æ°´å¹³å°æ´»æ°´åˆ°å…¶ä»–éƒ¨é—¨ç»§ç»­æš‘æœŸå®ä¹ äº†ï¼Œæœªèƒ½è½¬æ­£æˆåŠŸï¼Œåç»­æƒ…å†µä¸æ¸…æ¥šã€‚\n\nå®ä¹ ç”ŸBï¼šå±±å¤§ç¡•ï¼Œå¤šæ®µå®ä¹ ï¼ˆåŒ…æ‹¬é‡åŒ–ï¼Œå­—èŠ‚å¤šæ®µå®ä¹ ï¼‰å¤§ä½¬ï¼Œ7æœˆç¦»èŒï¼Œæœªå‚åŠ å®ä¹ è½¬æ­£ï¼ŒæŠ•é€’å­—èŠ‚å¦ä¸€ä¸ªéƒ¨é—¨çš„ç§‹æ‹›æå‰æ‰¹ï¼Œæœ€ç»ˆæ–©è·å¤§sp offerå¹¶é¡ºåˆ©ç­¾çº¦ã€‚\n\nå®ä¹ ç”ŸCï¼šé‡é‚®æœ¬ï¼Œå‚åŠ æœ¬éƒ¨é—¨å®ä¹ è½¬æ­£ï¼Œé¡ºåˆ©æ”¶åˆ°å°sp offerå¹¶ç­¾çº¦ã€‚\n\nå®ä¹ ç”ŸDï¼šå—å¼€ç¡•ï¼Œç”±äºå®ä¹ æ—¶é—´çŸ­äº§å‡ºä¸è¶³æœªèƒ½è½¬æ­£æˆåŠŸï¼Œç§‹æ‹›æ”¶åˆ°åä¸ºå’Œå†œè¡Œç­‰offerï¼Œé€‰æ‹©wlbçš„å†œè¡Œã€‚\n\nå®ä¹ ç”ŸEï¼ˆæœ¬äººï¼‰ï¼Œå…·ä½“æƒ…å†µå¯è§æˆ‘çš„[2022ç§‹æ‹›æ€»ç»“](https://yaxing97.com/2022-autumn-recruitment-summary.html) ã€‚\n\nè¿™ä¸¤å¤©çœ‹äº†å¾ˆå¤šè„‰è„‰ï¼Œæœ‰ä¸€ä¸ªè¯„è®ºæˆ‘è§‰å¾—è¯´çš„å¾ˆå¯¹ï¼šâ€œå¾ˆå¤šæš‘æœŸå®ä¹ è¿‡çš„äººï¼Œéƒ½ä¸æƒ³å†å»å¤§å‚äº†ï¼Œé€‰æ‹©å»å›½ä¼ã€‚â€\n\næˆ‘è§‰å¾—è¯´çš„çœŸçš„å¾ˆå¯¹ï¼Œå®ä¹ è¿‡ä½“ä¼šäº†å¤§å‚çš„å·ï¼Œå†µä¸”è¿˜æ˜¯å®ä¹ ç”Ÿï¼Œå½“æ—¶æˆ‘çš„mentoræ¯”æˆ‘ç´¯å¤šäº†ï¼Œæ¯å¤©æ™šä¸Šå›å»è¿˜è¦å¹²æ´»ã€‚æˆ‘æ¯å¤©å›åˆ°å®¶æ„Ÿè§‰æ•´ä¸ªäººéƒ½è¢«æŠ½ç©ºäº†ï¼Œè™½è¯´æˆ‘å›å®¶çš„ä¹Ÿå¾ˆæ—©ï¼Œä¸€èˆ¬8ç‚¹å·¦å³å°±æ¶¦äº†ã€‚åˆ°å®¶ä»€ä¹ˆéƒ½ä¸æƒ³åšï¼Œæ›´åˆ«æå­¦ä¹ äº†ã€‚å¹¸å¥½618å…¥æ‰‹äº†ps5ï¼Œé æˆ˜ç¥4ã€ç‘å¥‡ä¸å®å½“ã€åªç‹¼ç­‰æ¸¸æˆåº¦è¿‡ä¸€ä¸ªåˆä¸€ä¸ªå¤œæ™šï¼Œä¸ç„¶æˆ‘è§‰å¾—æˆ‘å¯èƒ½ä¼šæŠ‘éƒã€‚è¯´å®è¯ï¼Œå¦‚æœæ²¡æœ‰è¿™æ®µæš‘æœŸå®ä¹ ï¼Œæˆ‘æ‹¿åˆ°å­—èŠ‚ç­‰å¤§å‚offerå¯èƒ½æ— è„‘å»äº†ï¼Œç»å†è¿‡æ‰çŸ¥é“è‡ªå·±æ‰€èƒ½æ‰¿å—çš„èº«å¿ƒå‹åŠ›ã€‚\n\nå› æ­¤ï¼Œæš‘æœŸå®ä¹ è¿˜æ˜¯æ¨èå»å¤§å‚çš„ï¼Œä¸€æ–¹é¢ç»™ç§‹æ‹›ç®€å†æ¶¦è‰²ï¼Œå¦ä¸€æ–¹é¢çœ‹çœ‹è‡ªå·±æ˜¯å¦èƒ½é€‚åº”å¤§å‚å·¥ä½œç”Ÿæ´»èŠ‚å¥ã€‚\n\nä»¥ä¸Šã€‚\n","source":"_posts/å­—èŠ‚æš‘æœŸå®ä¹ åŒç»„å®ä¹ ç”Ÿç§‹æ‹›æƒ…å†µåˆ†äº«.md","raw":"---\ntitle: å­—èŠ‚æš‘æœŸå®ä¹ åŒç»„å®ä¹ ç”Ÿç§‹æ‹›æƒ…å†µåˆ†äº«\ncopyright: true\nmathjax: true\ndate: 2022-12-13 20:02:14\ncategories: \n  - å®ä¹ ç§‹æ‹›\n  - å®ä¹ \ntags: \nurlname: my-bytedance-internship-friends-offer\n---\n\nçªç„¶æƒ³èµ·æ¥åšè¿™ä¸ªåˆ†äº«ï¼Œæ˜¯å› ä¸ºåˆšå¥½ä¸‹åˆæœ‰ä¸ªå­—èŠ‚è·³åŠ¨æš‘æœŸå®ä¹ æ—¶åŒç»„çš„æœ‹å‹åˆšç­¾çº¦ä¸‰æ–¹ï¼Œå’Œçˆ¶æ¯ä¹Ÿé¡ºä¾¿åˆ†äº«äº†å…¶ä»–åŒç»„å®ä¹ ç”Ÿçš„ç­¾çº¦æƒ…å†µã€‚è¿™è¾¹ä¹Ÿç»™å¤§å®¶åˆ†äº«ä¸‹ã€‚\n\n<!--more-->\n\nåœ¨å­—èŠ‚è·³åŠ¨æš‘æœŸå®ä¹ æœŸé—´ï¼Œå‰å‰åååŠ ä¸Šæˆ‘ä¸€å…±æœ‰5åå®ä¹ ç”Ÿã€‚\n\nå®ä¹ ç”ŸAï¼šæµ™å¤§ç¡•ï¼Œåœ¨æˆ‘ä»¬ç»„ä»4æœˆä¸­å¹²åˆ°7æœˆä¸­ï¼Œèµ°å­—èŠ‚çš„æ´»æ°´å¹³å°æ´»æ°´åˆ°å…¶ä»–éƒ¨é—¨ç»§ç»­æš‘æœŸå®ä¹ äº†ï¼Œæœªèƒ½è½¬æ­£æˆåŠŸï¼Œåç»­æƒ…å†µä¸æ¸…æ¥šã€‚\n\nå®ä¹ ç”ŸBï¼šå±±å¤§ç¡•ï¼Œå¤šæ®µå®ä¹ ï¼ˆåŒ…æ‹¬é‡åŒ–ï¼Œå­—èŠ‚å¤šæ®µå®ä¹ ï¼‰å¤§ä½¬ï¼Œ7æœˆç¦»èŒï¼Œæœªå‚åŠ å®ä¹ è½¬æ­£ï¼ŒæŠ•é€’å­—èŠ‚å¦ä¸€ä¸ªéƒ¨é—¨çš„ç§‹æ‹›æå‰æ‰¹ï¼Œæœ€ç»ˆæ–©è·å¤§sp offerå¹¶é¡ºåˆ©ç­¾çº¦ã€‚\n\nå®ä¹ ç”ŸCï¼šé‡é‚®æœ¬ï¼Œå‚åŠ æœ¬éƒ¨é—¨å®ä¹ è½¬æ­£ï¼Œé¡ºåˆ©æ”¶åˆ°å°sp offerå¹¶ç­¾çº¦ã€‚\n\nå®ä¹ ç”ŸDï¼šå—å¼€ç¡•ï¼Œç”±äºå®ä¹ æ—¶é—´çŸ­äº§å‡ºä¸è¶³æœªèƒ½è½¬æ­£æˆåŠŸï¼Œç§‹æ‹›æ”¶åˆ°åä¸ºå’Œå†œè¡Œç­‰offerï¼Œé€‰æ‹©wlbçš„å†œè¡Œã€‚\n\nå®ä¹ ç”ŸEï¼ˆæœ¬äººï¼‰ï¼Œå…·ä½“æƒ…å†µå¯è§æˆ‘çš„[2022ç§‹æ‹›æ€»ç»“](https://yaxing97.com/2022-autumn-recruitment-summary.html) ã€‚\n\nè¿™ä¸¤å¤©çœ‹äº†å¾ˆå¤šè„‰è„‰ï¼Œæœ‰ä¸€ä¸ªè¯„è®ºæˆ‘è§‰å¾—è¯´çš„å¾ˆå¯¹ï¼šâ€œå¾ˆå¤šæš‘æœŸå®ä¹ è¿‡çš„äººï¼Œéƒ½ä¸æƒ³å†å»å¤§å‚äº†ï¼Œé€‰æ‹©å»å›½ä¼ã€‚â€\n\næˆ‘è§‰å¾—è¯´çš„çœŸçš„å¾ˆå¯¹ï¼Œå®ä¹ è¿‡ä½“ä¼šäº†å¤§å‚çš„å·ï¼Œå†µä¸”è¿˜æ˜¯å®ä¹ ç”Ÿï¼Œå½“æ—¶æˆ‘çš„mentoræ¯”æˆ‘ç´¯å¤šäº†ï¼Œæ¯å¤©æ™šä¸Šå›å»è¿˜è¦å¹²æ´»ã€‚æˆ‘æ¯å¤©å›åˆ°å®¶æ„Ÿè§‰æ•´ä¸ªäººéƒ½è¢«æŠ½ç©ºäº†ï¼Œè™½è¯´æˆ‘å›å®¶çš„ä¹Ÿå¾ˆæ—©ï¼Œä¸€èˆ¬8ç‚¹å·¦å³å°±æ¶¦äº†ã€‚åˆ°å®¶ä»€ä¹ˆéƒ½ä¸æƒ³åšï¼Œæ›´åˆ«æå­¦ä¹ äº†ã€‚å¹¸å¥½618å…¥æ‰‹äº†ps5ï¼Œé æˆ˜ç¥4ã€ç‘å¥‡ä¸å®å½“ã€åªç‹¼ç­‰æ¸¸æˆåº¦è¿‡ä¸€ä¸ªåˆä¸€ä¸ªå¤œæ™šï¼Œä¸ç„¶æˆ‘è§‰å¾—æˆ‘å¯èƒ½ä¼šæŠ‘éƒã€‚è¯´å®è¯ï¼Œå¦‚æœæ²¡æœ‰è¿™æ®µæš‘æœŸå®ä¹ ï¼Œæˆ‘æ‹¿åˆ°å­—èŠ‚ç­‰å¤§å‚offerå¯èƒ½æ— è„‘å»äº†ï¼Œç»å†è¿‡æ‰çŸ¥é“è‡ªå·±æ‰€èƒ½æ‰¿å—çš„èº«å¿ƒå‹åŠ›ã€‚\n\nå› æ­¤ï¼Œæš‘æœŸå®ä¹ è¿˜æ˜¯æ¨èå»å¤§å‚çš„ï¼Œä¸€æ–¹é¢ç»™ç§‹æ‹›ç®€å†æ¶¦è‰²ï¼Œå¦ä¸€æ–¹é¢çœ‹çœ‹è‡ªå·±æ˜¯å¦èƒ½é€‚åº”å¤§å‚å·¥ä½œç”Ÿæ´»èŠ‚å¥ã€‚\n\nä»¥ä¸Šã€‚\n","slug":"å­—èŠ‚æš‘æœŸå®ä¹ åŒç»„å®ä¹ ç”Ÿç§‹æ‹›æƒ…å†µåˆ†äº«","published":1,"updated":"2023-01-17T01:33:55.150Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cld8kfsiz000lzvt83151b4xq","content":"<p>çªç„¶æƒ³èµ·æ¥åšè¿™ä¸ªåˆ†äº«ï¼Œæ˜¯å› ä¸ºåˆšå¥½ä¸‹åˆæœ‰ä¸ªå­—èŠ‚è·³åŠ¨æš‘æœŸå®ä¹ æ—¶åŒç»„çš„æœ‹å‹åˆšç­¾çº¦ä¸‰æ–¹ï¼Œå’Œçˆ¶æ¯ä¹Ÿé¡ºä¾¿åˆ†äº«äº†å…¶ä»–åŒç»„å®ä¹ ç”Ÿçš„ç­¾çº¦æƒ…å†µã€‚è¿™è¾¹ä¹Ÿç»™å¤§å®¶åˆ†äº«ä¸‹ã€‚</p>\n<span id=\"more\"></span>\n\n<p>åœ¨å­—èŠ‚è·³åŠ¨æš‘æœŸå®ä¹ æœŸé—´ï¼Œå‰å‰åååŠ ä¸Šæˆ‘ä¸€å…±æœ‰5åå®ä¹ ç”Ÿã€‚</p>\n<p>å®ä¹ ç”ŸAï¼šæµ™å¤§ç¡•ï¼Œåœ¨æˆ‘ä»¬ç»„ä»4æœˆä¸­å¹²åˆ°7æœˆä¸­ï¼Œèµ°å­—èŠ‚çš„æ´»æ°´å¹³å°æ´»æ°´åˆ°å…¶ä»–éƒ¨é—¨ç»§ç»­æš‘æœŸå®ä¹ äº†ï¼Œæœªèƒ½è½¬æ­£æˆåŠŸï¼Œåç»­æƒ…å†µä¸æ¸…æ¥šã€‚</p>\n<p>å®ä¹ ç”ŸBï¼šå±±å¤§ç¡•ï¼Œå¤šæ®µå®ä¹ ï¼ˆåŒ…æ‹¬é‡åŒ–ï¼Œå­—èŠ‚å¤šæ®µå®ä¹ ï¼‰å¤§ä½¬ï¼Œ7æœˆç¦»èŒï¼Œæœªå‚åŠ å®ä¹ è½¬æ­£ï¼ŒæŠ•é€’å­—èŠ‚å¦ä¸€ä¸ªéƒ¨é—¨çš„ç§‹æ‹›æå‰æ‰¹ï¼Œæœ€ç»ˆæ–©è·å¤§sp offerå¹¶é¡ºåˆ©ç­¾çº¦ã€‚</p>\n<p>å®ä¹ ç”ŸCï¼šé‡é‚®æœ¬ï¼Œå‚åŠ æœ¬éƒ¨é—¨å®ä¹ è½¬æ­£ï¼Œé¡ºåˆ©æ”¶åˆ°å°sp offerå¹¶ç­¾çº¦ã€‚</p>\n<p>å®ä¹ ç”ŸDï¼šå—å¼€ç¡•ï¼Œç”±äºå®ä¹ æ—¶é—´çŸ­äº§å‡ºä¸è¶³æœªèƒ½è½¬æ­£æˆåŠŸï¼Œç§‹æ‹›æ”¶åˆ°åä¸ºå’Œå†œè¡Œç­‰offerï¼Œé€‰æ‹©wlbçš„å†œè¡Œã€‚</p>\n<p>å®ä¹ ç”ŸEï¼ˆæœ¬äººï¼‰ï¼Œå…·ä½“æƒ…å†µå¯è§æˆ‘çš„<a href=\"https://yaxing97.com/2022-autumn-recruitment-summary.html\">2022ç§‹æ‹›æ€»ç»“</a> ã€‚</p>\n<p>è¿™ä¸¤å¤©çœ‹äº†å¾ˆå¤šè„‰è„‰ï¼Œæœ‰ä¸€ä¸ªè¯„è®ºæˆ‘è§‰å¾—è¯´çš„å¾ˆå¯¹ï¼šâ€œå¾ˆå¤šæš‘æœŸå®ä¹ è¿‡çš„äººï¼Œéƒ½ä¸æƒ³å†å»å¤§å‚äº†ï¼Œé€‰æ‹©å»å›½ä¼ã€‚â€</p>\n<p>æˆ‘è§‰å¾—è¯´çš„çœŸçš„å¾ˆå¯¹ï¼Œå®ä¹ è¿‡ä½“ä¼šäº†å¤§å‚çš„å·ï¼Œå†µä¸”è¿˜æ˜¯å®ä¹ ç”Ÿï¼Œå½“æ—¶æˆ‘çš„mentoræ¯”æˆ‘ç´¯å¤šäº†ï¼Œæ¯å¤©æ™šä¸Šå›å»è¿˜è¦å¹²æ´»ã€‚æˆ‘æ¯å¤©å›åˆ°å®¶æ„Ÿè§‰æ•´ä¸ªäººéƒ½è¢«æŠ½ç©ºäº†ï¼Œè™½è¯´æˆ‘å›å®¶çš„ä¹Ÿå¾ˆæ—©ï¼Œä¸€èˆ¬8ç‚¹å·¦å³å°±æ¶¦äº†ã€‚åˆ°å®¶ä»€ä¹ˆéƒ½ä¸æƒ³åšï¼Œæ›´åˆ«æå­¦ä¹ äº†ã€‚å¹¸å¥½618å…¥æ‰‹äº†ps5ï¼Œé æˆ˜ç¥4ã€ç‘å¥‡ä¸å®å½“ã€åªç‹¼ç­‰æ¸¸æˆåº¦è¿‡ä¸€ä¸ªåˆä¸€ä¸ªå¤œæ™šï¼Œä¸ç„¶æˆ‘è§‰å¾—æˆ‘å¯èƒ½ä¼šæŠ‘éƒã€‚è¯´å®è¯ï¼Œå¦‚æœæ²¡æœ‰è¿™æ®µæš‘æœŸå®ä¹ ï¼Œæˆ‘æ‹¿åˆ°å­—èŠ‚ç­‰å¤§å‚offerå¯èƒ½æ— è„‘å»äº†ï¼Œç»å†è¿‡æ‰çŸ¥é“è‡ªå·±æ‰€èƒ½æ‰¿å—çš„èº«å¿ƒå‹åŠ›ã€‚</p>\n<p>å› æ­¤ï¼Œæš‘æœŸå®ä¹ è¿˜æ˜¯æ¨èå»å¤§å‚çš„ï¼Œä¸€æ–¹é¢ç»™ç§‹æ‹›ç®€å†æ¶¦è‰²ï¼Œå¦ä¸€æ–¹é¢çœ‹çœ‹è‡ªå·±æ˜¯å¦èƒ½é€‚åº”å¤§å‚å·¥ä½œç”Ÿæ´»èŠ‚å¥ã€‚</p>\n<p>ä»¥ä¸Šã€‚</p>\n","site":{"data":{}},"length":664,"excerpt":"<p>çªç„¶æƒ³èµ·æ¥åšè¿™ä¸ªåˆ†äº«ï¼Œæ˜¯å› ä¸ºåˆšå¥½ä¸‹åˆæœ‰ä¸ªå­—èŠ‚è·³åŠ¨æš‘æœŸå®ä¹ æ—¶åŒç»„çš„æœ‹å‹åˆšç­¾çº¦ä¸‰æ–¹ï¼Œå’Œçˆ¶æ¯ä¹Ÿé¡ºä¾¿åˆ†äº«äº†å…¶ä»–åŒç»„å®ä¹ ç”Ÿçš„ç­¾çº¦æƒ…å†µã€‚è¿™è¾¹ä¹Ÿç»™å¤§å®¶åˆ†äº«ä¸‹ã€‚</p>","more":"<p>åœ¨å­—èŠ‚è·³åŠ¨æš‘æœŸå®ä¹ æœŸé—´ï¼Œå‰å‰åååŠ ä¸Šæˆ‘ä¸€å…±æœ‰5åå®ä¹ ç”Ÿã€‚</p>\n<p>å®ä¹ ç”ŸAï¼šæµ™å¤§ç¡•ï¼Œåœ¨æˆ‘ä»¬ç»„ä»4æœˆä¸­å¹²åˆ°7æœˆä¸­ï¼Œèµ°å­—èŠ‚çš„æ´»æ°´å¹³å°æ´»æ°´åˆ°å…¶ä»–éƒ¨é—¨ç»§ç»­æš‘æœŸå®ä¹ äº†ï¼Œæœªèƒ½è½¬æ­£æˆåŠŸï¼Œåç»­æƒ…å†µä¸æ¸…æ¥šã€‚</p>\n<p>å®ä¹ ç”ŸBï¼šå±±å¤§ç¡•ï¼Œå¤šæ®µå®ä¹ ï¼ˆåŒ…æ‹¬é‡åŒ–ï¼Œå­—èŠ‚å¤šæ®µå®ä¹ ï¼‰å¤§ä½¬ï¼Œ7æœˆç¦»èŒï¼Œæœªå‚åŠ å®ä¹ è½¬æ­£ï¼ŒæŠ•é€’å­—èŠ‚å¦ä¸€ä¸ªéƒ¨é—¨çš„ç§‹æ‹›æå‰æ‰¹ï¼Œæœ€ç»ˆæ–©è·å¤§sp offerå¹¶é¡ºåˆ©ç­¾çº¦ã€‚</p>\n<p>å®ä¹ ç”ŸCï¼šé‡é‚®æœ¬ï¼Œå‚åŠ æœ¬éƒ¨é—¨å®ä¹ è½¬æ­£ï¼Œé¡ºåˆ©æ”¶åˆ°å°sp offerå¹¶ç­¾çº¦ã€‚</p>\n<p>å®ä¹ ç”ŸDï¼šå—å¼€ç¡•ï¼Œç”±äºå®ä¹ æ—¶é—´çŸ­äº§å‡ºä¸è¶³æœªèƒ½è½¬æ­£æˆåŠŸï¼Œç§‹æ‹›æ”¶åˆ°åä¸ºå’Œå†œè¡Œç­‰offerï¼Œé€‰æ‹©wlbçš„å†œè¡Œã€‚</p>\n<p>å®ä¹ ç”ŸEï¼ˆæœ¬äººï¼‰ï¼Œå…·ä½“æƒ…å†µå¯è§æˆ‘çš„<a href=\"https://yaxing97.com/2022-autumn-recruitment-summary.html\">2022ç§‹æ‹›æ€»ç»“</a> ã€‚</p>\n<p>è¿™ä¸¤å¤©çœ‹äº†å¾ˆå¤šè„‰è„‰ï¼Œæœ‰ä¸€ä¸ªè¯„è®ºæˆ‘è§‰å¾—è¯´çš„å¾ˆå¯¹ï¼šâ€œå¾ˆå¤šæš‘æœŸå®ä¹ è¿‡çš„äººï¼Œéƒ½ä¸æƒ³å†å»å¤§å‚äº†ï¼Œé€‰æ‹©å»å›½ä¼ã€‚â€</p>\n<p>æˆ‘è§‰å¾—è¯´çš„çœŸçš„å¾ˆå¯¹ï¼Œå®ä¹ è¿‡ä½“ä¼šäº†å¤§å‚çš„å·ï¼Œå†µä¸”è¿˜æ˜¯å®ä¹ ç”Ÿï¼Œå½“æ—¶æˆ‘çš„mentoræ¯”æˆ‘ç´¯å¤šäº†ï¼Œæ¯å¤©æ™šä¸Šå›å»è¿˜è¦å¹²æ´»ã€‚æˆ‘æ¯å¤©å›åˆ°å®¶æ„Ÿè§‰æ•´ä¸ªäººéƒ½è¢«æŠ½ç©ºäº†ï¼Œè™½è¯´æˆ‘å›å®¶çš„ä¹Ÿå¾ˆæ—©ï¼Œä¸€èˆ¬8ç‚¹å·¦å³å°±æ¶¦äº†ã€‚åˆ°å®¶ä»€ä¹ˆéƒ½ä¸æƒ³åšï¼Œæ›´åˆ«æå­¦ä¹ äº†ã€‚å¹¸å¥½618å…¥æ‰‹äº†ps5ï¼Œé æˆ˜ç¥4ã€ç‘å¥‡ä¸å®å½“ã€åªç‹¼ç­‰æ¸¸æˆåº¦è¿‡ä¸€ä¸ªåˆä¸€ä¸ªå¤œæ™šï¼Œä¸ç„¶æˆ‘è§‰å¾—æˆ‘å¯èƒ½ä¼šæŠ‘éƒã€‚è¯´å®è¯ï¼Œå¦‚æœæ²¡æœ‰è¿™æ®µæš‘æœŸå®ä¹ ï¼Œæˆ‘æ‹¿åˆ°å­—èŠ‚ç­‰å¤§å‚offerå¯èƒ½æ— è„‘å»äº†ï¼Œç»å†è¿‡æ‰çŸ¥é“è‡ªå·±æ‰€èƒ½æ‰¿å—çš„èº«å¿ƒå‹åŠ›ã€‚</p>\n<p>å› æ­¤ï¼Œæš‘æœŸå®ä¹ è¿˜æ˜¯æ¨èå»å¤§å‚çš„ï¼Œä¸€æ–¹é¢ç»™ç§‹æ‹›ç®€å†æ¶¦è‰²ï¼Œå¦ä¸€æ–¹é¢çœ‹çœ‹è‡ªå·±æ˜¯å¦èƒ½é€‚åº”å¤§å‚å·¥ä½œç”Ÿæ´»èŠ‚å¥ã€‚</p>\n<p>ä»¥ä¸Šã€‚</p>"},{"title":"å¼€äº†ä¸ªBç«™å¤§ä¼šå‘˜","copyright":true,"mathjax":true,"date":"2022-12-15T13:39:46.000Z","urlname":"bilibili-vip","_content":"\næœ€è¿‘å·«å¸ˆ3æ›´æ–°äº†æ¬¡ä¸–ä»£ç‰ˆæœ¬ï¼ˆç”»è´¨ä¼˜åŒ–+ä¸­æ–‡é…éŸ³ï¼‰ï¼Œç”±äºPS5æ”¾åœ¨äº†å­¦æ ¡é‡Œï¼Œç¬”è®°æœ¬ä¹Ÿå¸¦ä¸å¤ªåŠ¨ï¼Œåªèƒ½çœ‹è€æˆ´çš„è§†é¢‘äº‘ç©å®¶äºŒå‘¨ç›®äº†ï¼ˆ[é“¾æ¥](https://www.bilibili.com/video/BV1L14y1N7b3)ï¼‰ã€‚\n\n<!--more-->\n\nçœ‹äº†ä¸€ä¼šï¼Œè¯¶ï¼Œå’‹æ›´æ–°äº†è¿˜è¿™ä¹ˆç³Šï¼Œä¸€çœ‹åŸæ¥æ˜¯åªå¼€äº†1080Pç”»è´¨ï¼Œä¸€å†²åŠ¨ä¸ŠæŸå¤šå¤šä¹°äº†ä¸‰ä¸ªæœˆçš„å¤§ä¼šå‘˜ï¼Œç‚¹å¼€4Kç”»è´¨é€‰é¡¹ï¼Œå¥½å®¶ä¼™ï¼Œç›´æ¥æ„Ÿå—åˆ°äº†æ¬¡ä¸–ä»£çš„é­…åŠ›ã€‚é…éŸ³é…çš„ä¹Ÿå¾ˆå‡ºè‰²ï¼Œæ²¡ä»€ä¹ˆæ§½ç‚¹ã€‚å›å¤´PS5ä¸Šå†ä¸‰å‘¨ç›®å§ï¼Œå¹¶ä¸”æœŸå¾…ä¸€æ‰‹å·«å¸ˆ4ã€‚\n\nå……äº†å¤§ä¼šå‘˜ï¼Œæ¥ä¸‹æ¥é—²çš„æ—¶å€™å†æŠŠBç«™ä¸Šçš„ç”µå½±å†çœ‹çœ‹ï¼Œæ€»ä¸èƒ½æµªè´¹äº†ä¸æ˜¯hhhã€‚\n\næœ€è¿‘å¤šä¸ªå¹³å°éƒ½åœ¨æå¹´ç»ˆæ€»ç»“äº†ï¼Œæ¯”å¦‚Apple Musicå’ŒPlayStationï¼Œå‡†å¤‡ç­‰å…¶ä»–å¹³å°éƒ½æ¨å‡ºå¹´ç»ˆæ€»ç»“ä¹‹åææ³¢åˆ†äº«ï½\n\n","source":"_posts/å¼€äº†ä¸ªBç«™å¤§ä¼šå‘˜.md","raw":"---\ntitle: å¼€äº†ä¸ªBç«™å¤§ä¼šå‘˜\ncopyright: true\nmathjax: true\ndate: 2022-12-15 21:39:46\ncategories: æ—¥å¸¸å°è®°\ntags: \nurlname: bilibili-vip\n---\n\næœ€è¿‘å·«å¸ˆ3æ›´æ–°äº†æ¬¡ä¸–ä»£ç‰ˆæœ¬ï¼ˆç”»è´¨ä¼˜åŒ–+ä¸­æ–‡é…éŸ³ï¼‰ï¼Œç”±äºPS5æ”¾åœ¨äº†å­¦æ ¡é‡Œï¼Œç¬”è®°æœ¬ä¹Ÿå¸¦ä¸å¤ªåŠ¨ï¼Œåªèƒ½çœ‹è€æˆ´çš„è§†é¢‘äº‘ç©å®¶äºŒå‘¨ç›®äº†ï¼ˆ[é“¾æ¥](https://www.bilibili.com/video/BV1L14y1N7b3)ï¼‰ã€‚\n\n<!--more-->\n\nçœ‹äº†ä¸€ä¼šï¼Œè¯¶ï¼Œå’‹æ›´æ–°äº†è¿˜è¿™ä¹ˆç³Šï¼Œä¸€çœ‹åŸæ¥æ˜¯åªå¼€äº†1080Pç”»è´¨ï¼Œä¸€å†²åŠ¨ä¸ŠæŸå¤šå¤šä¹°äº†ä¸‰ä¸ªæœˆçš„å¤§ä¼šå‘˜ï¼Œç‚¹å¼€4Kç”»è´¨é€‰é¡¹ï¼Œå¥½å®¶ä¼™ï¼Œç›´æ¥æ„Ÿå—åˆ°äº†æ¬¡ä¸–ä»£çš„é­…åŠ›ã€‚é…éŸ³é…çš„ä¹Ÿå¾ˆå‡ºè‰²ï¼Œæ²¡ä»€ä¹ˆæ§½ç‚¹ã€‚å›å¤´PS5ä¸Šå†ä¸‰å‘¨ç›®å§ï¼Œå¹¶ä¸”æœŸå¾…ä¸€æ‰‹å·«å¸ˆ4ã€‚\n\nå……äº†å¤§ä¼šå‘˜ï¼Œæ¥ä¸‹æ¥é—²çš„æ—¶å€™å†æŠŠBç«™ä¸Šçš„ç”µå½±å†çœ‹çœ‹ï¼Œæ€»ä¸èƒ½æµªè´¹äº†ä¸æ˜¯hhhã€‚\n\næœ€è¿‘å¤šä¸ªå¹³å°éƒ½åœ¨æå¹´ç»ˆæ€»ç»“äº†ï¼Œæ¯”å¦‚Apple Musicå’ŒPlayStationï¼Œå‡†å¤‡ç­‰å…¶ä»–å¹³å°éƒ½æ¨å‡ºå¹´ç»ˆæ€»ç»“ä¹‹åææ³¢åˆ†äº«ï½\n\n","slug":"å¼€äº†ä¸ªBç«™å¤§ä¼šå‘˜","published":1,"updated":"2023-01-17T01:34:09.679Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cld8kfsj0000ozvt8d6uhd03t","content":"<p>æœ€è¿‘å·«å¸ˆ3æ›´æ–°äº†æ¬¡ä¸–ä»£ç‰ˆæœ¬ï¼ˆç”»è´¨ä¼˜åŒ–+ä¸­æ–‡é…éŸ³ï¼‰ï¼Œç”±äºPS5æ”¾åœ¨äº†å­¦æ ¡é‡Œï¼Œç¬”è®°æœ¬ä¹Ÿå¸¦ä¸å¤ªåŠ¨ï¼Œåªèƒ½çœ‹è€æˆ´çš„è§†é¢‘äº‘ç©å®¶äºŒå‘¨ç›®äº†ï¼ˆ<a href=\"https://www.bilibili.com/video/BV1L14y1N7b3\">é“¾æ¥</a>ï¼‰ã€‚</p>\n<span id=\"more\"></span>\n\n<p>çœ‹äº†ä¸€ä¼šï¼Œè¯¶ï¼Œå’‹æ›´æ–°äº†è¿˜è¿™ä¹ˆç³Šï¼Œä¸€çœ‹åŸæ¥æ˜¯åªå¼€äº†1080Pç”»è´¨ï¼Œä¸€å†²åŠ¨ä¸ŠæŸå¤šå¤šä¹°äº†ä¸‰ä¸ªæœˆçš„å¤§ä¼šå‘˜ï¼Œç‚¹å¼€4Kç”»è´¨é€‰é¡¹ï¼Œå¥½å®¶ä¼™ï¼Œç›´æ¥æ„Ÿå—åˆ°äº†æ¬¡ä¸–ä»£çš„é­…åŠ›ã€‚é…éŸ³é…çš„ä¹Ÿå¾ˆå‡ºè‰²ï¼Œæ²¡ä»€ä¹ˆæ§½ç‚¹ã€‚å›å¤´PS5ä¸Šå†ä¸‰å‘¨ç›®å§ï¼Œå¹¶ä¸”æœŸå¾…ä¸€æ‰‹å·«å¸ˆ4ã€‚</p>\n<p>å……äº†å¤§ä¼šå‘˜ï¼Œæ¥ä¸‹æ¥é—²çš„æ—¶å€™å†æŠŠBç«™ä¸Šçš„ç”µå½±å†çœ‹çœ‹ï¼Œæ€»ä¸èƒ½æµªè´¹äº†ä¸æ˜¯hhhã€‚</p>\n<p>æœ€è¿‘å¤šä¸ªå¹³å°éƒ½åœ¨æå¹´ç»ˆæ€»ç»“äº†ï¼Œæ¯”å¦‚Apple Musicå’ŒPlayStationï¼Œå‡†å¤‡ç­‰å…¶ä»–å¹³å°éƒ½æ¨å‡ºå¹´ç»ˆæ€»ç»“ä¹‹åææ³¢åˆ†äº«ï½</p>\n","site":{"data":{}},"length":276,"excerpt":"<p>æœ€è¿‘å·«å¸ˆ3æ›´æ–°äº†æ¬¡ä¸–ä»£ç‰ˆæœ¬ï¼ˆç”»è´¨ä¼˜åŒ–+ä¸­æ–‡é…éŸ³ï¼‰ï¼Œç”±äºPS5æ”¾åœ¨äº†å­¦æ ¡é‡Œï¼Œç¬”è®°æœ¬ä¹Ÿå¸¦ä¸å¤ªåŠ¨ï¼Œåªèƒ½çœ‹è€æˆ´çš„è§†é¢‘äº‘ç©å®¶äºŒå‘¨ç›®äº†ï¼ˆ<a href=\"https://www.bilibili.com/video/BV1L14y1N7b3\">é“¾æ¥</a>ï¼‰ã€‚</p>","more":"<p>çœ‹äº†ä¸€ä¼šï¼Œè¯¶ï¼Œå’‹æ›´æ–°äº†è¿˜è¿™ä¹ˆç³Šï¼Œä¸€çœ‹åŸæ¥æ˜¯åªå¼€äº†1080Pç”»è´¨ï¼Œä¸€å†²åŠ¨ä¸ŠæŸå¤šå¤šä¹°äº†ä¸‰ä¸ªæœˆçš„å¤§ä¼šå‘˜ï¼Œç‚¹å¼€4Kç”»è´¨é€‰é¡¹ï¼Œå¥½å®¶ä¼™ï¼Œç›´æ¥æ„Ÿå—åˆ°äº†æ¬¡ä¸–ä»£çš„é­…åŠ›ã€‚é…éŸ³é…çš„ä¹Ÿå¾ˆå‡ºè‰²ï¼Œæ²¡ä»€ä¹ˆæ§½ç‚¹ã€‚å›å¤´PS5ä¸Šå†ä¸‰å‘¨ç›®å§ï¼Œå¹¶ä¸”æœŸå¾…ä¸€æ‰‹å·«å¸ˆ4ã€‚</p>\n<p>å……äº†å¤§ä¼šå‘˜ï¼Œæ¥ä¸‹æ¥é—²çš„æ—¶å€™å†æŠŠBç«™ä¸Šçš„ç”µå½±å†çœ‹çœ‹ï¼Œæ€»ä¸èƒ½æµªè´¹äº†ä¸æ˜¯hhhã€‚</p>\n<p>æœ€è¿‘å¤šä¸ªå¹³å°éƒ½åœ¨æå¹´ç»ˆæ€»ç»“äº†ï¼Œæ¯”å¦‚Apple Musicå’ŒPlayStationï¼Œå‡†å¤‡ç­‰å…¶ä»–å¹³å°éƒ½æ¨å‡ºå¹´ç»ˆæ€»ç»“ä¹‹åææ³¢åˆ†äº«ï½</p>"},{"title":"æ‰‹æŠŠæ‰‹å¸¦ä½ æ­å»ºä¸ªäººåšå®¢","copyright":true,"mathjax":true,"date":"2022-12-12T13:08:31.000Z","toc":true,"urlname":"build-blog","_content":"\n## ç³»ç»Ÿç¯å¢ƒ&å·¥å…·\n\nç³»ç»Ÿç¯å¢ƒï¼šMacOS\n\nå·¥å…·ï¼šåšå®¢æ¡†æ¶ä¸ºhexoï¼Œåšå®¢æ–‡ä»¶æ‰˜ç®¡äºGitHubï¼Œåšå®¢ç½‘ç«™ç”¨Netlifyç”Ÿæˆï¼Œå›½å†…è®¿é—®é‡‡ç”¨CloudFlareè¿›è¡ŒCDNåŠ é€Ÿ\n\n<!--more-->\n\n## hexoåšå®¢æ¡†æ¶å®‰è£…\n\n### é¢„å…ˆç¯å¢ƒ\n\n1ã€å®‰è£…nodeï¼ˆä½¿ç”¨homebrewï¼‰\n\n```bash\nbrew install node\n```\n\n2ã€æŸ¥çœ‹ç‰ˆæœ¬ä¿¡æ¯ï¼Œæ­£å¸¸çœ‹åˆ°ç‰ˆæœ¬ä¿¡æ¯å³ä¸ºæˆåŠŸ\n\n```bash\nnode -v\nnpm -v\n```\n\n3ã€åˆ‡æ¢npmçš„æºå°†æºè®¾ç½®ä¸ºæ·˜å®æºï¼ˆé€Ÿåº¦å¿«ï¼‰\n\n```bash\nnpm config get registry\t# æŸ¥çœ‹æº\nnpm config set registry https://registry.npm.taobao.org # ä¿®æ”¹ä¸ºæ·˜å®æº\n```\n\n### å®‰è£…\n\n1ã€å®‰è£…hexo\n\n```bash\nnpm install hexo-cli -g # å…¨å±€å®‰è£…hexoå‘½ä»¤è¡Œå·¥å…·\n```\n\n2ã€åˆå§‹åŒ–åšå®¢é¡¹ç›®\n\n```bash\nhexo init \"åšå®¢ç›®å½•åç§°\"\n# hexo init \"blog\" å³æˆ‘çš„åšå®¢ç›®å½•åç§°ä¸ºblogï¼Œåç»­éƒ½ç”¨è¯¥ç›®å½•æ¥è®²è§£\n```\n\n3ã€åˆ‡æ¢è‡³åšå®¢ç›®å½•å®‰è£…ä¾èµ–\n\n```bash\ncd blog\nnpm install\n```\n\n4ã€è¿è¡Œ\n\n```bash\nhexo clean\nhexo g\nhexo s\n```\n\næ‰“å¼€é“¾æ¥ï¼Œæœ¬åœ°å‡ºç°åšå®¢ç•Œé¢ï¼Œå³æœ¬åœ°æ­å»ºæˆåŠŸï¼\n\n### æ·»åŠ å»ºç«™è„šæœ¬\n\nä¸ºäº†åç»­`netlify`å»ºç«™æ–¹ä¾¿ï¼Œåœ¨`package.json`é‡Œé¢æ·»åŠ ä¸€ä¸ªå‘½ä»¤ï¼š\n\n```json\nJSON\n{\n    // ......\n    \"scripts\": {\n        \"build\": \"hexo generate\",\n        \"clean\": \"hexo clean\",\n        \"deploy\": \"hexo deploy\",\n        \"server\": \"hexo server\",\n        \"netlify\": \"npm run clean && npm run build\" // æ–°åŠ è¡Œ\n    },\n    // ......\n}\n```\n\n## GitHubæ‰˜ç®¡é¡¹ç›®æ–‡ä»¶\n\nåˆ›å»ºæœ¬åœ°ä»“åº“ï¼Œæ¨é€åˆ°è¿œç«¯æœåŠ¡å™¨\n\n```bash\ncd blog\ngit init\ngit add .\ngit commit -m \"my blog first commit\"\ngit remote add origin \"è¿œç«¯githubä»“åº“åœ°å€\"\ngit branch -M main\ngit push -u origin main\n```\n\n## Netlifyå»ºç«™\n\nç”±äºGitHubè‡ªå¸¦çš„gitpageè®¿é—®é€Ÿåº¦è¾ƒæ…¢ï¼Œæˆ‘ä»¬ä½¿ç”¨Netlifyï¼ˆä¸€ä¸ªå›½å¤–çš„å…è´¹çš„æä¾›é™æ€ç½‘ç«™éƒ¨ç½²æœåŠ¡çš„å¹³å°ï¼‰å°†æ‰˜ç®¡ GitHubä¸Šçš„é™æ€ç½‘ç«™éƒ¨ç½²ä¸Šçº¿ã€‚\n\n### æ­¥éª¤\n\n1ã€æ³¨å†Œå¹¶ç™»é™† Netlify\n\n2ã€add new site - import an existing project\n\n3ã€è¿æ¥åˆ°GitHubï¼Œé€‰æ‹©æˆ‘ä»¬æ‰˜ç®¡åœ¨GitHubä¸Šçš„åšå®¢é¡¹ç›®\n\n4ã€åœ¨è®¾ç½®ä¸­æ³¨æ„ä¿®æ”¹ä¸€å¤„ï¼ŒBasic build settings - Build commandä¿®æ”¹ä¸º `npm run netlify`\n\n5ã€æ„å»ºå®Œæˆå¯ä»¥çœ‹åˆ°ä¸€ä¸ª xxx.netlify.app çš„urlï¼Œå³ä¸ºæˆ‘ä»¬åšå®¢çš„urlï¼Œä¿®æ”¹è¯¥urlä¸­çš„xxxä¸ºyaxing97ï¼Œå³è®¾ç½®æˆ‘çš„ä¸ªäººåšå®¢åŸŸåä¸º`yaxing97.netlify.app`\n\n### é…ç½®åŸŸå\n\n1ã€è´­ä¹°åŸŸåï¼ˆå›½å†…å›½å¤–éƒ½å¯ï¼‰\n\n2ã€è´­ä¹°å®Œæˆååœ¨åŸŸååˆ—è¡¨æ‰¾åˆ°è‡ªå·±çš„åŸŸåï¼Œç‚¹å‡»æ“ä½œä¸­çš„è§£ææŒ‰é’®\n\n3ã€è®¾ç½®åŸŸåè§£æï¼Œç±»å‹ä¸º`CNAME`ï¼Œä¸»æœºè®°å½•ä¸º`@`ï¼Œè®°å½•å€¼ä¸º`yaxing97.netlify.app`ï¼Œå…¶ä¸­`yaxing97`æ˜¯ä¹‹å‰å»ºç«™æ­¥éª¤ä¸­è®¾ç½®çš„ä¸ªæ€§äºŒçº§åŸŸå\n\n4ã€åœ¨netlifyä¸­é…ç½®åŸŸåï¼Œdomain management - domains - add custom domainï¼Œä¸€è·¯é€šè¿‡å³å¯\n\n## CloudFlareåŠ é€Ÿ\n\nNetlify è™½ç„¶å·²ç»æä¾›äº† CDN åŠ é€Ÿï¼Œä½†åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­å‘ç°å›½å†…è®¿é—®è¿˜æ˜¯æ¯”è¾ƒæ…¢ï¼ŒCloudflare ç›¸å¯¹äºå›½å†…çš„ä¸ƒç‰›äº‘ã€é˜¿é‡Œäº‘ç­‰äº‘æœåŠ¡å•†çš„ CDN é€Ÿåº¦ä¼šæ…¢ä¸€äº›ï¼Œä½†æ˜¯å®ƒæœ‰å…è´¹ç‰ˆæœ¬ï¼Œè€Œä¸”æœ€é‡è¦çš„æ˜¯åŸŸåä¸ç”¨å¤‡æ¡ˆã€‚\n\n### æ­¥éª¤\n\n1ã€æ³¨å†ŒCloudflareå¹¶ç™»é™†\n\n2ã€è¾“å…¥æ‚¨çš„ç«™ç‚¹ï¼ˆyaxing97.comï¼‰ï¼Œç‚¹å‡»æ·»åŠ ç«™ç‚¹\n\n3ã€é€‰æ‹©å…è´¹å¥—é¤\n\n4ã€æ·»åŠ DNSï¼ŒTypeä¸º`CNAME`ï¼ŒNameä¸º`yaxing97.com`ï¼ŒContentä¸º`yaxing97.netlify.app`\n\n5ã€ä½¿ç”¨cloudflareæä¾›çš„dnsè§£ææœåŠ¡å™¨ï¼ˆCloudflare Nameserversï¼‰å¯¹ `yaxing97.com` è¿›è¡Œdnsè§£æ\n\n6ã€åˆ°é˜¿é‡Œäº‘æ§åˆ¶å°ä¸­ï¼ŒDNSç®¡ç† - DNSä¿®æ”¹ï¼Œä¿®æ”¹DNSæœåŠ¡å™¨\n\n## é…ç½®https\n\nå›åˆ°netlifyä¸­ï¼ŒDomain management - HTTPSï¼Œç‚¹å‡» verify DNS configurationï¼Œç»“æœå¦‚ä¸‹å³ä¸ºé…ç½®å®Œæˆ\n\n![é…ç½®HTTPS](https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/image-20221212214817015.png)\n\n\n\n## æ–‡ç« ç¼–å†™\n\n```bash\nhexo new \"æ–‡ç« æ ‡é¢˜\"\n# ç¼–å†™å¥½ä¹‹å\nhexo clean\nhexo g\ngit add *\ngit commit -m \"commitä¿¡æ¯\"\ngit push\n```\n\nè¿‡ç‰‡åˆ»ï¼Œè®¿é—®æˆ‘ä»¬çš„`https://yaxing97.com`ï¼Œå¯ä»¥çœ‹åˆ°æ–°æ·»åŠ çš„æ–‡ç« ã€‚\n\n## å‚è€ƒ&æ›´å¤š\n\nhttps://blog.cuijiacai.com/blog-building/\n\nhttps://www.mdnice.com/writing/382af676baff4ed4ad5511074fb736da\n","source":"_posts/æ‰‹æŠŠæ‰‹å¸¦ä½ æ­å»ºä¸ªäººåšå®¢.md","raw":"---\ntitle: æ‰‹æŠŠæ‰‹å¸¦ä½ æ­å»ºä¸ªäººåšå®¢\ncopyright: true\nmathjax: true\ndate: 2022-12-12 21:08:31\ncategories: æŠ€æœ¯æ€»ç»“\ntags: \ntoc: true\nurlname: build-blog\n---\n\n## ç³»ç»Ÿç¯å¢ƒ&å·¥å…·\n\nç³»ç»Ÿç¯å¢ƒï¼šMacOS\n\nå·¥å…·ï¼šåšå®¢æ¡†æ¶ä¸ºhexoï¼Œåšå®¢æ–‡ä»¶æ‰˜ç®¡äºGitHubï¼Œåšå®¢ç½‘ç«™ç”¨Netlifyç”Ÿæˆï¼Œå›½å†…è®¿é—®é‡‡ç”¨CloudFlareè¿›è¡ŒCDNåŠ é€Ÿ\n\n<!--more-->\n\n## hexoåšå®¢æ¡†æ¶å®‰è£…\n\n### é¢„å…ˆç¯å¢ƒ\n\n1ã€å®‰è£…nodeï¼ˆä½¿ç”¨homebrewï¼‰\n\n```bash\nbrew install node\n```\n\n2ã€æŸ¥çœ‹ç‰ˆæœ¬ä¿¡æ¯ï¼Œæ­£å¸¸çœ‹åˆ°ç‰ˆæœ¬ä¿¡æ¯å³ä¸ºæˆåŠŸ\n\n```bash\nnode -v\nnpm -v\n```\n\n3ã€åˆ‡æ¢npmçš„æºå°†æºè®¾ç½®ä¸ºæ·˜å®æºï¼ˆé€Ÿåº¦å¿«ï¼‰\n\n```bash\nnpm config get registry\t# æŸ¥çœ‹æº\nnpm config set registry https://registry.npm.taobao.org # ä¿®æ”¹ä¸ºæ·˜å®æº\n```\n\n### å®‰è£…\n\n1ã€å®‰è£…hexo\n\n```bash\nnpm install hexo-cli -g # å…¨å±€å®‰è£…hexoå‘½ä»¤è¡Œå·¥å…·\n```\n\n2ã€åˆå§‹åŒ–åšå®¢é¡¹ç›®\n\n```bash\nhexo init \"åšå®¢ç›®å½•åç§°\"\n# hexo init \"blog\" å³æˆ‘çš„åšå®¢ç›®å½•åç§°ä¸ºblogï¼Œåç»­éƒ½ç”¨è¯¥ç›®å½•æ¥è®²è§£\n```\n\n3ã€åˆ‡æ¢è‡³åšå®¢ç›®å½•å®‰è£…ä¾èµ–\n\n```bash\ncd blog\nnpm install\n```\n\n4ã€è¿è¡Œ\n\n```bash\nhexo clean\nhexo g\nhexo s\n```\n\næ‰“å¼€é“¾æ¥ï¼Œæœ¬åœ°å‡ºç°åšå®¢ç•Œé¢ï¼Œå³æœ¬åœ°æ­å»ºæˆåŠŸï¼\n\n### æ·»åŠ å»ºç«™è„šæœ¬\n\nä¸ºäº†åç»­`netlify`å»ºç«™æ–¹ä¾¿ï¼Œåœ¨`package.json`é‡Œé¢æ·»åŠ ä¸€ä¸ªå‘½ä»¤ï¼š\n\n```json\nJSON\n{\n    // ......\n    \"scripts\": {\n        \"build\": \"hexo generate\",\n        \"clean\": \"hexo clean\",\n        \"deploy\": \"hexo deploy\",\n        \"server\": \"hexo server\",\n        \"netlify\": \"npm run clean && npm run build\" // æ–°åŠ è¡Œ\n    },\n    // ......\n}\n```\n\n## GitHubæ‰˜ç®¡é¡¹ç›®æ–‡ä»¶\n\nåˆ›å»ºæœ¬åœ°ä»“åº“ï¼Œæ¨é€åˆ°è¿œç«¯æœåŠ¡å™¨\n\n```bash\ncd blog\ngit init\ngit add .\ngit commit -m \"my blog first commit\"\ngit remote add origin \"è¿œç«¯githubä»“åº“åœ°å€\"\ngit branch -M main\ngit push -u origin main\n```\n\n## Netlifyå»ºç«™\n\nç”±äºGitHubè‡ªå¸¦çš„gitpageè®¿é—®é€Ÿåº¦è¾ƒæ…¢ï¼Œæˆ‘ä»¬ä½¿ç”¨Netlifyï¼ˆä¸€ä¸ªå›½å¤–çš„å…è´¹çš„æä¾›é™æ€ç½‘ç«™éƒ¨ç½²æœåŠ¡çš„å¹³å°ï¼‰å°†æ‰˜ç®¡ GitHubä¸Šçš„é™æ€ç½‘ç«™éƒ¨ç½²ä¸Šçº¿ã€‚\n\n### æ­¥éª¤\n\n1ã€æ³¨å†Œå¹¶ç™»é™† Netlify\n\n2ã€add new site - import an existing project\n\n3ã€è¿æ¥åˆ°GitHubï¼Œé€‰æ‹©æˆ‘ä»¬æ‰˜ç®¡åœ¨GitHubä¸Šçš„åšå®¢é¡¹ç›®\n\n4ã€åœ¨è®¾ç½®ä¸­æ³¨æ„ä¿®æ”¹ä¸€å¤„ï¼ŒBasic build settings - Build commandä¿®æ”¹ä¸º `npm run netlify`\n\n5ã€æ„å»ºå®Œæˆå¯ä»¥çœ‹åˆ°ä¸€ä¸ª xxx.netlify.app çš„urlï¼Œå³ä¸ºæˆ‘ä»¬åšå®¢çš„urlï¼Œä¿®æ”¹è¯¥urlä¸­çš„xxxä¸ºyaxing97ï¼Œå³è®¾ç½®æˆ‘çš„ä¸ªäººåšå®¢åŸŸåä¸º`yaxing97.netlify.app`\n\n### é…ç½®åŸŸå\n\n1ã€è´­ä¹°åŸŸåï¼ˆå›½å†…å›½å¤–éƒ½å¯ï¼‰\n\n2ã€è´­ä¹°å®Œæˆååœ¨åŸŸååˆ—è¡¨æ‰¾åˆ°è‡ªå·±çš„åŸŸåï¼Œç‚¹å‡»æ“ä½œä¸­çš„è§£ææŒ‰é’®\n\n3ã€è®¾ç½®åŸŸåè§£æï¼Œç±»å‹ä¸º`CNAME`ï¼Œä¸»æœºè®°å½•ä¸º`@`ï¼Œè®°å½•å€¼ä¸º`yaxing97.netlify.app`ï¼Œå…¶ä¸­`yaxing97`æ˜¯ä¹‹å‰å»ºç«™æ­¥éª¤ä¸­è®¾ç½®çš„ä¸ªæ€§äºŒçº§åŸŸå\n\n4ã€åœ¨netlifyä¸­é…ç½®åŸŸåï¼Œdomain management - domains - add custom domainï¼Œä¸€è·¯é€šè¿‡å³å¯\n\n## CloudFlareåŠ é€Ÿ\n\nNetlify è™½ç„¶å·²ç»æä¾›äº† CDN åŠ é€Ÿï¼Œä½†åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­å‘ç°å›½å†…è®¿é—®è¿˜æ˜¯æ¯”è¾ƒæ…¢ï¼ŒCloudflare ç›¸å¯¹äºå›½å†…çš„ä¸ƒç‰›äº‘ã€é˜¿é‡Œäº‘ç­‰äº‘æœåŠ¡å•†çš„ CDN é€Ÿåº¦ä¼šæ…¢ä¸€äº›ï¼Œä½†æ˜¯å®ƒæœ‰å…è´¹ç‰ˆæœ¬ï¼Œè€Œä¸”æœ€é‡è¦çš„æ˜¯åŸŸåä¸ç”¨å¤‡æ¡ˆã€‚\n\n### æ­¥éª¤\n\n1ã€æ³¨å†ŒCloudflareå¹¶ç™»é™†\n\n2ã€è¾“å…¥æ‚¨çš„ç«™ç‚¹ï¼ˆyaxing97.comï¼‰ï¼Œç‚¹å‡»æ·»åŠ ç«™ç‚¹\n\n3ã€é€‰æ‹©å…è´¹å¥—é¤\n\n4ã€æ·»åŠ DNSï¼ŒTypeä¸º`CNAME`ï¼ŒNameä¸º`yaxing97.com`ï¼ŒContentä¸º`yaxing97.netlify.app`\n\n5ã€ä½¿ç”¨cloudflareæä¾›çš„dnsè§£ææœåŠ¡å™¨ï¼ˆCloudflare Nameserversï¼‰å¯¹ `yaxing97.com` è¿›è¡Œdnsè§£æ\n\n6ã€åˆ°é˜¿é‡Œäº‘æ§åˆ¶å°ä¸­ï¼ŒDNSç®¡ç† - DNSä¿®æ”¹ï¼Œä¿®æ”¹DNSæœåŠ¡å™¨\n\n## é…ç½®https\n\nå›åˆ°netlifyä¸­ï¼ŒDomain management - HTTPSï¼Œç‚¹å‡» verify DNS configurationï¼Œç»“æœå¦‚ä¸‹å³ä¸ºé…ç½®å®Œæˆ\n\n![é…ç½®HTTPS](https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/image-20221212214817015.png)\n\n\n\n## æ–‡ç« ç¼–å†™\n\n```bash\nhexo new \"æ–‡ç« æ ‡é¢˜\"\n# ç¼–å†™å¥½ä¹‹å\nhexo clean\nhexo g\ngit add *\ngit commit -m \"commitä¿¡æ¯\"\ngit push\n```\n\nè¿‡ç‰‡åˆ»ï¼Œè®¿é—®æˆ‘ä»¬çš„`https://yaxing97.com`ï¼Œå¯ä»¥çœ‹åˆ°æ–°æ·»åŠ çš„æ–‡ç« ã€‚\n\n## å‚è€ƒ&æ›´å¤š\n\nhttps://blog.cuijiacai.com/blog-building/\n\nhttps://www.mdnice.com/writing/382af676baff4ed4ad5511074fb736da\n","slug":"æ‰‹æŠŠæ‰‹å¸¦ä½ æ­å»ºä¸ªäººåšå®¢","published":1,"updated":"2023-01-17T12:12:45.141Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cld8kfsj0000qzvt83ivcd84m","content":"<h2 id=\"ç³»ç»Ÿç¯å¢ƒ-amp-å·¥å…·\"><a href=\"#ç³»ç»Ÿç¯å¢ƒ-amp-å·¥å…·\" class=\"headerlink\" title=\"ç³»ç»Ÿç¯å¢ƒ&å·¥å…·\"></a>ç³»ç»Ÿç¯å¢ƒ&amp;å·¥å…·</h2><p>ç³»ç»Ÿç¯å¢ƒï¼šMacOS</p>\n<p>å·¥å…·ï¼šåšå®¢æ¡†æ¶ä¸ºhexoï¼Œåšå®¢æ–‡ä»¶æ‰˜ç®¡äºGitHubï¼Œåšå®¢ç½‘ç«™ç”¨Netlifyç”Ÿæˆï¼Œå›½å†…è®¿é—®é‡‡ç”¨CloudFlareè¿›è¡ŒCDNåŠ é€Ÿ</p>\n<span id=\"more\"></span>\n\n<h2 id=\"hexoåšå®¢æ¡†æ¶å®‰è£…\"><a href=\"#hexoåšå®¢æ¡†æ¶å®‰è£…\" class=\"headerlink\" title=\"hexoåšå®¢æ¡†æ¶å®‰è£…\"></a>hexoåšå®¢æ¡†æ¶å®‰è£…</h2><h3 id=\"é¢„å…ˆç¯å¢ƒ\"><a href=\"#é¢„å…ˆç¯å¢ƒ\" class=\"headerlink\" title=\"é¢„å…ˆç¯å¢ƒ\"></a>é¢„å…ˆç¯å¢ƒ</h3><p>1ã€å®‰è£…nodeï¼ˆä½¿ç”¨homebrewï¼‰</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">brew install node</span><br></pre></td></tr></table></figure>\n\n<p>2ã€æŸ¥çœ‹ç‰ˆæœ¬ä¿¡æ¯ï¼Œæ­£å¸¸çœ‹åˆ°ç‰ˆæœ¬ä¿¡æ¯å³ä¸ºæˆåŠŸ</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">node -v</span><br><span class=\"line\">npm -v</span><br></pre></td></tr></table></figure>\n\n<p>3ã€åˆ‡æ¢npmçš„æºå°†æºè®¾ç½®ä¸ºæ·˜å®æºï¼ˆé€Ÿåº¦å¿«ï¼‰</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm config get registry\t<span class=\"comment\"># æŸ¥çœ‹æº</span></span><br><span class=\"line\">npm config <span class=\"built_in\">set</span> registry https://registry.npm.taobao.org <span class=\"comment\"># ä¿®æ”¹ä¸ºæ·˜å®æº</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"å®‰è£…\"><a href=\"#å®‰è£…\" class=\"headerlink\" title=\"å®‰è£…\"></a>å®‰è£…</h3><p>1ã€å®‰è£…hexo</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install hexo-cli -g <span class=\"comment\"># å…¨å±€å®‰è£…hexoå‘½ä»¤è¡Œå·¥å…·</span></span><br></pre></td></tr></table></figure>\n\n<p>2ã€åˆå§‹åŒ–åšå®¢é¡¹ç›®</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hexo init <span class=\"string\">\"åšå®¢ç›®å½•åç§°\"</span></span><br><span class=\"line\"><span class=\"comment\"># hexo init \"blog\" å³æˆ‘çš„åšå®¢ç›®å½•åç§°ä¸ºblogï¼Œåç»­éƒ½ç”¨è¯¥ç›®å½•æ¥è®²è§£</span></span><br></pre></td></tr></table></figure>\n\n<p>3ã€åˆ‡æ¢è‡³åšå®¢ç›®å½•å®‰è£…ä¾èµ–</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">cd</span> blog</span><br><span class=\"line\">npm install</span><br></pre></td></tr></table></figure>\n\n<p>4ã€è¿è¡Œ</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hexo clean</span><br><span class=\"line\">hexo g</span><br><span class=\"line\">hexo s</span><br></pre></td></tr></table></figure>\n\n<p>æ‰“å¼€é“¾æ¥ï¼Œæœ¬åœ°å‡ºç°åšå®¢ç•Œé¢ï¼Œå³æœ¬åœ°æ­å»ºæˆåŠŸï¼</p>\n<h3 id=\"æ·»åŠ å»ºç«™è„šæœ¬\"><a href=\"#æ·»åŠ å»ºç«™è„šæœ¬\" class=\"headerlink\" title=\"æ·»åŠ å»ºç«™è„šæœ¬\"></a>æ·»åŠ å»ºç«™è„šæœ¬</h3><p>ä¸ºäº†åç»­<code>netlify</code>å»ºç«™æ–¹ä¾¿ï¼Œåœ¨<code>package.json</code>é‡Œé¢æ·»åŠ ä¸€ä¸ªå‘½ä»¤ï¼š</p>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">JSON</span><br><span class=\"line\"><span class=\"punctuation\">{</span></span><br><span class=\"line\">    <span class=\"comment\">// ......</span></span><br><span class=\"line\">    <span class=\"attr\">\"scripts\"</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">{</span></span><br><span class=\"line\">        <span class=\"attr\">\"build\"</span><span class=\"punctuation\">:</span> <span class=\"string\">\"hexo generate\"</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">\"clean\"</span><span class=\"punctuation\">:</span> <span class=\"string\">\"hexo clean\"</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">\"deploy\"</span><span class=\"punctuation\">:</span> <span class=\"string\">\"hexo deploy\"</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">\"server\"</span><span class=\"punctuation\">:</span> <span class=\"string\">\"hexo server\"</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">\"netlify\"</span><span class=\"punctuation\">:</span> <span class=\"string\">\"npm run clean &amp;&amp; npm run build\"</span> <span class=\"comment\">// æ–°åŠ è¡Œ</span></span><br><span class=\"line\">    <span class=\"punctuation\">}</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"comment\">// ......</span></span><br><span class=\"line\"><span class=\"punctuation\">}</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"GitHubæ‰˜ç®¡é¡¹ç›®æ–‡ä»¶\"><a href=\"#GitHubæ‰˜ç®¡é¡¹ç›®æ–‡ä»¶\" class=\"headerlink\" title=\"GitHubæ‰˜ç®¡é¡¹ç›®æ–‡ä»¶\"></a>GitHubæ‰˜ç®¡é¡¹ç›®æ–‡ä»¶</h2><p>åˆ›å»ºæœ¬åœ°ä»“åº“ï¼Œæ¨é€åˆ°è¿œç«¯æœåŠ¡å™¨</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">cd</span> blog</span><br><span class=\"line\">git init</span><br><span class=\"line\">git add .</span><br><span class=\"line\">git commit -m <span class=\"string\">\"my blog first commit\"</span></span><br><span class=\"line\">git remote add origin <span class=\"string\">\"è¿œç«¯githubä»“åº“åœ°å€\"</span></span><br><span class=\"line\">git branch -M main</span><br><span class=\"line\">git push -u origin main</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Netlifyå»ºç«™\"><a href=\"#Netlifyå»ºç«™\" class=\"headerlink\" title=\"Netlifyå»ºç«™\"></a>Netlifyå»ºç«™</h2><p>ç”±äºGitHubè‡ªå¸¦çš„gitpageè®¿é—®é€Ÿåº¦è¾ƒæ…¢ï¼Œæˆ‘ä»¬ä½¿ç”¨Netlifyï¼ˆä¸€ä¸ªå›½å¤–çš„å…è´¹çš„æä¾›é™æ€ç½‘ç«™éƒ¨ç½²æœåŠ¡çš„å¹³å°ï¼‰å°†æ‰˜ç®¡ GitHubä¸Šçš„é™æ€ç½‘ç«™éƒ¨ç½²ä¸Šçº¿ã€‚</p>\n<h3 id=\"æ­¥éª¤\"><a href=\"#æ­¥éª¤\" class=\"headerlink\" title=\"æ­¥éª¤\"></a>æ­¥éª¤</h3><p>1ã€æ³¨å†Œå¹¶ç™»é™† Netlify</p>\n<p>2ã€add new site - import an existing project</p>\n<p>3ã€è¿æ¥åˆ°GitHubï¼Œé€‰æ‹©æˆ‘ä»¬æ‰˜ç®¡åœ¨GitHubä¸Šçš„åšå®¢é¡¹ç›®</p>\n<p>4ã€åœ¨è®¾ç½®ä¸­æ³¨æ„ä¿®æ”¹ä¸€å¤„ï¼ŒBasic build settings - Build commandä¿®æ”¹ä¸º <code>npm run netlify</code></p>\n<p>5ã€æ„å»ºå®Œæˆå¯ä»¥çœ‹åˆ°ä¸€ä¸ª xxx.netlify.app çš„urlï¼Œå³ä¸ºæˆ‘ä»¬åšå®¢çš„urlï¼Œä¿®æ”¹è¯¥urlä¸­çš„xxxä¸ºyaxing97ï¼Œå³è®¾ç½®æˆ‘çš„ä¸ªäººåšå®¢åŸŸåä¸º<code>yaxing97.netlify.app</code></p>\n<h3 id=\"é…ç½®åŸŸå\"><a href=\"#é…ç½®åŸŸå\" class=\"headerlink\" title=\"é…ç½®åŸŸå\"></a>é…ç½®åŸŸå</h3><p>1ã€è´­ä¹°åŸŸåï¼ˆå›½å†…å›½å¤–éƒ½å¯ï¼‰</p>\n<p>2ã€è´­ä¹°å®Œæˆååœ¨åŸŸååˆ—è¡¨æ‰¾åˆ°è‡ªå·±çš„åŸŸåï¼Œç‚¹å‡»æ“ä½œä¸­çš„è§£ææŒ‰é’®</p>\n<p>3ã€è®¾ç½®åŸŸåè§£æï¼Œç±»å‹ä¸º<code>CNAME</code>ï¼Œä¸»æœºè®°å½•ä¸º<code>@</code>ï¼Œè®°å½•å€¼ä¸º<code>yaxing97.netlify.app</code>ï¼Œå…¶ä¸­<code>yaxing97</code>æ˜¯ä¹‹å‰å»ºç«™æ­¥éª¤ä¸­è®¾ç½®çš„ä¸ªæ€§äºŒçº§åŸŸå</p>\n<p>4ã€åœ¨netlifyä¸­é…ç½®åŸŸåï¼Œdomain management - domains - add custom domainï¼Œä¸€è·¯é€šè¿‡å³å¯</p>\n<h2 id=\"CloudFlareåŠ é€Ÿ\"><a href=\"#CloudFlareåŠ é€Ÿ\" class=\"headerlink\" title=\"CloudFlareåŠ é€Ÿ\"></a>CloudFlareåŠ é€Ÿ</h2><p>Netlify è™½ç„¶å·²ç»æä¾›äº† CDN åŠ é€Ÿï¼Œä½†åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­å‘ç°å›½å†…è®¿é—®è¿˜æ˜¯æ¯”è¾ƒæ…¢ï¼ŒCloudflare ç›¸å¯¹äºå›½å†…çš„ä¸ƒç‰›äº‘ã€é˜¿é‡Œäº‘ç­‰äº‘æœåŠ¡å•†çš„ CDN é€Ÿåº¦ä¼šæ…¢ä¸€äº›ï¼Œä½†æ˜¯å®ƒæœ‰å…è´¹ç‰ˆæœ¬ï¼Œè€Œä¸”æœ€é‡è¦çš„æ˜¯åŸŸåä¸ç”¨å¤‡æ¡ˆã€‚</p>\n<h3 id=\"æ­¥éª¤-1\"><a href=\"#æ­¥éª¤-1\" class=\"headerlink\" title=\"æ­¥éª¤\"></a>æ­¥éª¤</h3><p>1ã€æ³¨å†ŒCloudflareå¹¶ç™»é™†</p>\n<p>2ã€è¾“å…¥æ‚¨çš„ç«™ç‚¹ï¼ˆyaxing97.comï¼‰ï¼Œç‚¹å‡»æ·»åŠ ç«™ç‚¹</p>\n<p>3ã€é€‰æ‹©å…è´¹å¥—é¤</p>\n<p>4ã€æ·»åŠ DNSï¼ŒTypeä¸º<code>CNAME</code>ï¼ŒNameä¸º<code>yaxing97.com</code>ï¼ŒContentä¸º<code>yaxing97.netlify.app</code></p>\n<p>5ã€ä½¿ç”¨cloudflareæä¾›çš„dnsè§£ææœåŠ¡å™¨ï¼ˆCloudflare Nameserversï¼‰å¯¹ <code>yaxing97.com</code> è¿›è¡Œdnsè§£æ</p>\n<p>6ã€åˆ°é˜¿é‡Œäº‘æ§åˆ¶å°ä¸­ï¼ŒDNSç®¡ç† - DNSä¿®æ”¹ï¼Œä¿®æ”¹DNSæœåŠ¡å™¨</p>\n<h2 id=\"é…ç½®https\"><a href=\"#é…ç½®https\" class=\"headerlink\" title=\"é…ç½®https\"></a>é…ç½®https</h2><p>å›åˆ°netlifyä¸­ï¼ŒDomain management - HTTPSï¼Œç‚¹å‡» verify DNS configurationï¼Œç»“æœå¦‚ä¸‹å³ä¸ºé…ç½®å®Œæˆ</p>\n<p><img src=\"https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/image-20221212214817015.png\" alt=\"é…ç½®HTTPS\"></p>\n<h2 id=\"æ–‡ç« ç¼–å†™\"><a href=\"#æ–‡ç« ç¼–å†™\" class=\"headerlink\" title=\"æ–‡ç« ç¼–å†™\"></a>æ–‡ç« ç¼–å†™</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hexo new <span class=\"string\">\"æ–‡ç« æ ‡é¢˜\"</span></span><br><span class=\"line\"><span class=\"comment\"># ç¼–å†™å¥½ä¹‹å</span></span><br><span class=\"line\">hexo clean</span><br><span class=\"line\">hexo g</span><br><span class=\"line\">git add *</span><br><span class=\"line\">git commit -m <span class=\"string\">\"commitä¿¡æ¯\"</span></span><br><span class=\"line\">git push</span><br></pre></td></tr></table></figure>\n\n<p>è¿‡ç‰‡åˆ»ï¼Œè®¿é—®æˆ‘ä»¬çš„<code>https://yaxing97.com</code>ï¼Œå¯ä»¥çœ‹åˆ°æ–°æ·»åŠ çš„æ–‡ç« ã€‚</p>\n<h2 id=\"å‚è€ƒ-amp-æ›´å¤š\"><a href=\"#å‚è€ƒ-amp-æ›´å¤š\" class=\"headerlink\" title=\"å‚è€ƒ&æ›´å¤š\"></a>å‚è€ƒ&amp;æ›´å¤š</h2><p><a href=\"https://blog.cuijiacai.com/blog-building/\">https://blog.cuijiacai.com/blog-building/</a></p>\n<p><a href=\"https://www.mdnice.com/writing/382af676baff4ed4ad5511074fb736da\">https://www.mdnice.com/writing/382af676baff4ed4ad5511074fb736da</a></p>\n","site":{"data":{}},"length":2194,"excerpt":"<h2 id=\"ç³»ç»Ÿç¯å¢ƒ-amp-å·¥å…·\"><a href=\"#ç³»ç»Ÿç¯å¢ƒ-amp-å·¥å…·\" class=\"headerlink\" title=\"ç³»ç»Ÿç¯å¢ƒ&å·¥å…·\"></a>ç³»ç»Ÿç¯å¢ƒ&amp;å·¥å…·</h2><p>ç³»ç»Ÿç¯å¢ƒï¼šMacOS</p>\n<p>å·¥å…·ï¼šåšå®¢æ¡†æ¶ä¸ºhexoï¼Œåšå®¢æ–‡ä»¶æ‰˜ç®¡äºGitHubï¼Œåšå®¢ç½‘ç«™ç”¨Netlifyç”Ÿæˆï¼Œå›½å†…è®¿é—®é‡‡ç”¨CloudFlareè¿›è¡ŒCDNåŠ é€Ÿ</p>","more":"<h2 id=\"hexoåšå®¢æ¡†æ¶å®‰è£…\"><a href=\"#hexoåšå®¢æ¡†æ¶å®‰è£…\" class=\"headerlink\" title=\"hexoåšå®¢æ¡†æ¶å®‰è£…\"></a>hexoåšå®¢æ¡†æ¶å®‰è£…</h2><h3 id=\"é¢„å…ˆç¯å¢ƒ\"><a href=\"#é¢„å…ˆç¯å¢ƒ\" class=\"headerlink\" title=\"é¢„å…ˆç¯å¢ƒ\"></a>é¢„å…ˆç¯å¢ƒ</h3><p>1ã€å®‰è£…nodeï¼ˆä½¿ç”¨homebrewï¼‰</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">brew install node</span><br></pre></td></tr></table></figure>\n\n<p>2ã€æŸ¥çœ‹ç‰ˆæœ¬ä¿¡æ¯ï¼Œæ­£å¸¸çœ‹åˆ°ç‰ˆæœ¬ä¿¡æ¯å³ä¸ºæˆåŠŸ</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">node -v</span><br><span class=\"line\">npm -v</span><br></pre></td></tr></table></figure>\n\n<p>3ã€åˆ‡æ¢npmçš„æºå°†æºè®¾ç½®ä¸ºæ·˜å®æºï¼ˆé€Ÿåº¦å¿«ï¼‰</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm config get registry\t<span class=\"comment\"># æŸ¥çœ‹æº</span></span><br><span class=\"line\">npm config <span class=\"built_in\">set</span> registry https://registry.npm.taobao.org <span class=\"comment\"># ä¿®æ”¹ä¸ºæ·˜å®æº</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"å®‰è£…\"><a href=\"#å®‰è£…\" class=\"headerlink\" title=\"å®‰è£…\"></a>å®‰è£…</h3><p>1ã€å®‰è£…hexo</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install hexo-cli -g <span class=\"comment\"># å…¨å±€å®‰è£…hexoå‘½ä»¤è¡Œå·¥å…·</span></span><br></pre></td></tr></table></figure>\n\n<p>2ã€åˆå§‹åŒ–åšå®¢é¡¹ç›®</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hexo init <span class=\"string\">\"åšå®¢ç›®å½•åç§°\"</span></span><br><span class=\"line\"><span class=\"comment\"># hexo init \"blog\" å³æˆ‘çš„åšå®¢ç›®å½•åç§°ä¸ºblogï¼Œåç»­éƒ½ç”¨è¯¥ç›®å½•æ¥è®²è§£</span></span><br></pre></td></tr></table></figure>\n\n<p>3ã€åˆ‡æ¢è‡³åšå®¢ç›®å½•å®‰è£…ä¾èµ–</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">cd</span> blog</span><br><span class=\"line\">npm install</span><br></pre></td></tr></table></figure>\n\n<p>4ã€è¿è¡Œ</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hexo clean</span><br><span class=\"line\">hexo g</span><br><span class=\"line\">hexo s</span><br></pre></td></tr></table></figure>\n\n<p>æ‰“å¼€é“¾æ¥ï¼Œæœ¬åœ°å‡ºç°åšå®¢ç•Œé¢ï¼Œå³æœ¬åœ°æ­å»ºæˆåŠŸï¼</p>\n<h3 id=\"æ·»åŠ å»ºç«™è„šæœ¬\"><a href=\"#æ·»åŠ å»ºç«™è„šæœ¬\" class=\"headerlink\" title=\"æ·»åŠ å»ºç«™è„šæœ¬\"></a>æ·»åŠ å»ºç«™è„šæœ¬</h3><p>ä¸ºäº†åç»­<code>netlify</code>å»ºç«™æ–¹ä¾¿ï¼Œåœ¨<code>package.json</code>é‡Œé¢æ·»åŠ ä¸€ä¸ªå‘½ä»¤ï¼š</p>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">JSON</span><br><span class=\"line\"><span class=\"punctuation\">{</span></span><br><span class=\"line\">    <span class=\"comment\">// ......</span></span><br><span class=\"line\">    <span class=\"attr\">\"scripts\"</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">{</span></span><br><span class=\"line\">        <span class=\"attr\">\"build\"</span><span class=\"punctuation\">:</span> <span class=\"string\">\"hexo generate\"</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">\"clean\"</span><span class=\"punctuation\">:</span> <span class=\"string\">\"hexo clean\"</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">\"deploy\"</span><span class=\"punctuation\">:</span> <span class=\"string\">\"hexo deploy\"</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">\"server\"</span><span class=\"punctuation\">:</span> <span class=\"string\">\"hexo server\"</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">\"netlify\"</span><span class=\"punctuation\">:</span> <span class=\"string\">\"npm run clean &amp;&amp; npm run build\"</span> <span class=\"comment\">// æ–°åŠ è¡Œ</span></span><br><span class=\"line\">    <span class=\"punctuation\">}</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"comment\">// ......</span></span><br><span class=\"line\"><span class=\"punctuation\">}</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"GitHubæ‰˜ç®¡é¡¹ç›®æ–‡ä»¶\"><a href=\"#GitHubæ‰˜ç®¡é¡¹ç›®æ–‡ä»¶\" class=\"headerlink\" title=\"GitHubæ‰˜ç®¡é¡¹ç›®æ–‡ä»¶\"></a>GitHubæ‰˜ç®¡é¡¹ç›®æ–‡ä»¶</h2><p>åˆ›å»ºæœ¬åœ°ä»“åº“ï¼Œæ¨é€åˆ°è¿œç«¯æœåŠ¡å™¨</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">cd</span> blog</span><br><span class=\"line\">git init</span><br><span class=\"line\">git add .</span><br><span class=\"line\">git commit -m <span class=\"string\">\"my blog first commit\"</span></span><br><span class=\"line\">git remote add origin <span class=\"string\">\"è¿œç«¯githubä»“åº“åœ°å€\"</span></span><br><span class=\"line\">git branch -M main</span><br><span class=\"line\">git push -u origin main</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Netlifyå»ºç«™\"><a href=\"#Netlifyå»ºç«™\" class=\"headerlink\" title=\"Netlifyå»ºç«™\"></a>Netlifyå»ºç«™</h2><p>ç”±äºGitHubè‡ªå¸¦çš„gitpageè®¿é—®é€Ÿåº¦è¾ƒæ…¢ï¼Œæˆ‘ä»¬ä½¿ç”¨Netlifyï¼ˆä¸€ä¸ªå›½å¤–çš„å…è´¹çš„æä¾›é™æ€ç½‘ç«™éƒ¨ç½²æœåŠ¡çš„å¹³å°ï¼‰å°†æ‰˜ç®¡ GitHubä¸Šçš„é™æ€ç½‘ç«™éƒ¨ç½²ä¸Šçº¿ã€‚</p>\n<h3 id=\"æ­¥éª¤\"><a href=\"#æ­¥éª¤\" class=\"headerlink\" title=\"æ­¥éª¤\"></a>æ­¥éª¤</h3><p>1ã€æ³¨å†Œå¹¶ç™»é™† Netlify</p>\n<p>2ã€add new site - import an existing project</p>\n<p>3ã€è¿æ¥åˆ°GitHubï¼Œé€‰æ‹©æˆ‘ä»¬æ‰˜ç®¡åœ¨GitHubä¸Šçš„åšå®¢é¡¹ç›®</p>\n<p>4ã€åœ¨è®¾ç½®ä¸­æ³¨æ„ä¿®æ”¹ä¸€å¤„ï¼ŒBasic build settings - Build commandä¿®æ”¹ä¸º <code>npm run netlify</code></p>\n<p>5ã€æ„å»ºå®Œæˆå¯ä»¥çœ‹åˆ°ä¸€ä¸ª xxx.netlify.app çš„urlï¼Œå³ä¸ºæˆ‘ä»¬åšå®¢çš„urlï¼Œä¿®æ”¹è¯¥urlä¸­çš„xxxä¸ºyaxing97ï¼Œå³è®¾ç½®æˆ‘çš„ä¸ªäººåšå®¢åŸŸåä¸º<code>yaxing97.netlify.app</code></p>\n<h3 id=\"é…ç½®åŸŸå\"><a href=\"#é…ç½®åŸŸå\" class=\"headerlink\" title=\"é…ç½®åŸŸå\"></a>é…ç½®åŸŸå</h3><p>1ã€è´­ä¹°åŸŸåï¼ˆå›½å†…å›½å¤–éƒ½å¯ï¼‰</p>\n<p>2ã€è´­ä¹°å®Œæˆååœ¨åŸŸååˆ—è¡¨æ‰¾åˆ°è‡ªå·±çš„åŸŸåï¼Œç‚¹å‡»æ“ä½œä¸­çš„è§£ææŒ‰é’®</p>\n<p>3ã€è®¾ç½®åŸŸåè§£æï¼Œç±»å‹ä¸º<code>CNAME</code>ï¼Œä¸»æœºè®°å½•ä¸º<code>@</code>ï¼Œè®°å½•å€¼ä¸º<code>yaxing97.netlify.app</code>ï¼Œå…¶ä¸­<code>yaxing97</code>æ˜¯ä¹‹å‰å»ºç«™æ­¥éª¤ä¸­è®¾ç½®çš„ä¸ªæ€§äºŒçº§åŸŸå</p>\n<p>4ã€åœ¨netlifyä¸­é…ç½®åŸŸåï¼Œdomain management - domains - add custom domainï¼Œä¸€è·¯é€šè¿‡å³å¯</p>\n<h2 id=\"CloudFlareåŠ é€Ÿ\"><a href=\"#CloudFlareåŠ é€Ÿ\" class=\"headerlink\" title=\"CloudFlareåŠ é€Ÿ\"></a>CloudFlareåŠ é€Ÿ</h2><p>Netlify è™½ç„¶å·²ç»æä¾›äº† CDN åŠ é€Ÿï¼Œä½†åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­å‘ç°å›½å†…è®¿é—®è¿˜æ˜¯æ¯”è¾ƒæ…¢ï¼ŒCloudflare ç›¸å¯¹äºå›½å†…çš„ä¸ƒç‰›äº‘ã€é˜¿é‡Œäº‘ç­‰äº‘æœåŠ¡å•†çš„ CDN é€Ÿåº¦ä¼šæ…¢ä¸€äº›ï¼Œä½†æ˜¯å®ƒæœ‰å…è´¹ç‰ˆæœ¬ï¼Œè€Œä¸”æœ€é‡è¦çš„æ˜¯åŸŸåä¸ç”¨å¤‡æ¡ˆã€‚</p>\n<h3 id=\"æ­¥éª¤-1\"><a href=\"#æ­¥éª¤-1\" class=\"headerlink\" title=\"æ­¥éª¤\"></a>æ­¥éª¤</h3><p>1ã€æ³¨å†ŒCloudflareå¹¶ç™»é™†</p>\n<p>2ã€è¾“å…¥æ‚¨çš„ç«™ç‚¹ï¼ˆyaxing97.comï¼‰ï¼Œç‚¹å‡»æ·»åŠ ç«™ç‚¹</p>\n<p>3ã€é€‰æ‹©å…è´¹å¥—é¤</p>\n<p>4ã€æ·»åŠ DNSï¼ŒTypeä¸º<code>CNAME</code>ï¼ŒNameä¸º<code>yaxing97.com</code>ï¼ŒContentä¸º<code>yaxing97.netlify.app</code></p>\n<p>5ã€ä½¿ç”¨cloudflareæä¾›çš„dnsè§£ææœåŠ¡å™¨ï¼ˆCloudflare Nameserversï¼‰å¯¹ <code>yaxing97.com</code> è¿›è¡Œdnsè§£æ</p>\n<p>6ã€åˆ°é˜¿é‡Œäº‘æ§åˆ¶å°ä¸­ï¼ŒDNSç®¡ç† - DNSä¿®æ”¹ï¼Œä¿®æ”¹DNSæœåŠ¡å™¨</p>\n<h2 id=\"é…ç½®https\"><a href=\"#é…ç½®https\" class=\"headerlink\" title=\"é…ç½®https\"></a>é…ç½®https</h2><p>å›åˆ°netlifyä¸­ï¼ŒDomain management - HTTPSï¼Œç‚¹å‡» verify DNS configurationï¼Œç»“æœå¦‚ä¸‹å³ä¸ºé…ç½®å®Œæˆ</p>\n<p><img src=\"https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/image-20221212214817015.png\" alt=\"é…ç½®HTTPS\"></p>\n<h2 id=\"æ–‡ç« ç¼–å†™\"><a href=\"#æ–‡ç« ç¼–å†™\" class=\"headerlink\" title=\"æ–‡ç« ç¼–å†™\"></a>æ–‡ç« ç¼–å†™</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hexo new <span class=\"string\">\"æ–‡ç« æ ‡é¢˜\"</span></span><br><span class=\"line\"><span class=\"comment\"># ç¼–å†™å¥½ä¹‹å</span></span><br><span class=\"line\">hexo clean</span><br><span class=\"line\">hexo g</span><br><span class=\"line\">git add *</span><br><span class=\"line\">git commit -m <span class=\"string\">\"commitä¿¡æ¯\"</span></span><br><span class=\"line\">git push</span><br></pre></td></tr></table></figure>\n\n<p>è¿‡ç‰‡åˆ»ï¼Œè®¿é—®æˆ‘ä»¬çš„<code>https://yaxing97.com</code>ï¼Œå¯ä»¥çœ‹åˆ°æ–°æ·»åŠ çš„æ–‡ç« ã€‚</p>\n<h2 id=\"å‚è€ƒ-amp-æ›´å¤š\"><a href=\"#å‚è€ƒ-amp-æ›´å¤š\" class=\"headerlink\" title=\"å‚è€ƒ&æ›´å¤š\"></a>å‚è€ƒ&amp;æ›´å¤š</h2><p><a href=\"https://blog.cuijiacai.com/blog-building/\">https://blog.cuijiacai.com/blog-building/</a></p>\n<p><a href=\"https://www.mdnice.com/writing/382af676baff4ed4ad5511074fb736da\">https://www.mdnice.com/writing/382af676baff4ed4ad5511074fb736da</a></p>"},{"title":"æ–°ä¹°çš„å°ä¹¦æ¡Œ","copyright":true,"mathjax":true,"date":"2022-12-14T08:21:02.000Z","urlname":"new-desk","_content":"\nä¹‹å‰ä¹°äº†ä¸ªLGçš„27å¯¸æ˜¾ç¤ºå™¨ï¼Œæ”¾åœ¨ä¹¦æˆ¿çš„æ¡Œå­ä¸Šï¼Œä¸€æ–¹é¢ä¸èƒ½å‡é«˜ï¼ˆä¸Šé¢æœ‰æ¶æ¿æŒ¡ä½ï¼‰ï¼Œå¦ä¸€æ–¹é¢æ˜¯æ¡Œå­å®½åº¦ä¸å¤Ÿï¼ˆåªæœ‰50cmï¼‰ï¼Œæ˜¾ç¤ºå™¨é å¢™å‰é¢åªèƒ½å‹‰å¼ºæ”¾ä¸‹æˆ‘çš„macï¼Œå¯¼è‡´å±å¹•ç¦»æˆ‘å¾ˆè¿‘ï¼Œè§‚æ„Ÿæå·®ã€‚äºæ˜¯åœ¨æ·˜å®ä¸Šæ·˜äº†ä¸ªä¹¦æ¡Œï¼Œè¿˜ç®—ä¸é”™ã€‚\n\n<!--more-->\n\nå¦‚æœè¦ä½¿ç”¨27å¯¸åŠä»¥ä¸Šå°ºå¯¸æ˜¾ç¤ºå™¨çš„è¯ï¼Œå»ºè®®è´­ä¹°å®½åº¦è‡³å°‘70cmçš„ï¼Œæˆ‘è´­ä¹°çš„å°ºå¯¸ä¸º $120 \\times 80 \\times 74 cm$ï¼Œåº—é“ºæ˜¯â€œæ–°å°šç¾å®¶å±…â€ã€‚\n\næ³¨æ„åˆ°æ‰‹éœ€è¦è‡ªå·±æ‹§èºä¸å›ºå®šæ¡Œè…¿å’Œæ¡Œæ¿ï¼ˆç”¨ç”µåŠ¨èºä¸åˆ€ï¼‰ä»¥åŠæ¡Œè…¿å’Œæ¡Œè…¿ä¹‹é—´çš„è¿æ¥ï¼ˆæ‰‹æ‹§å³å¯ï¼‰ã€‚\n\nä»¥ä¸‹æ˜¯å®æ‹å›¾ hhã€‚\n\n![æ–°ä¹¦æ¡Œå®æ‹å›¾](https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/IMG_1396.JPG)\n","source":"_posts/æ–°ä¹°çš„å°ä¹¦æ¡Œ.md","raw":"---\ntitle: æ–°ä¹°çš„å°ä¹¦æ¡Œ\ncopyright: true\nmathjax: true\ndate: 2022-12-14 16:21:02\ncategories: æ—¥å¸¸å°è®°\ntags: \nurlname: new-desk\n---\n\nä¹‹å‰ä¹°äº†ä¸ªLGçš„27å¯¸æ˜¾ç¤ºå™¨ï¼Œæ”¾åœ¨ä¹¦æˆ¿çš„æ¡Œå­ä¸Šï¼Œä¸€æ–¹é¢ä¸èƒ½å‡é«˜ï¼ˆä¸Šé¢æœ‰æ¶æ¿æŒ¡ä½ï¼‰ï¼Œå¦ä¸€æ–¹é¢æ˜¯æ¡Œå­å®½åº¦ä¸å¤Ÿï¼ˆåªæœ‰50cmï¼‰ï¼Œæ˜¾ç¤ºå™¨é å¢™å‰é¢åªèƒ½å‹‰å¼ºæ”¾ä¸‹æˆ‘çš„macï¼Œå¯¼è‡´å±å¹•ç¦»æˆ‘å¾ˆè¿‘ï¼Œè§‚æ„Ÿæå·®ã€‚äºæ˜¯åœ¨æ·˜å®ä¸Šæ·˜äº†ä¸ªä¹¦æ¡Œï¼Œè¿˜ç®—ä¸é”™ã€‚\n\n<!--more-->\n\nå¦‚æœè¦ä½¿ç”¨27å¯¸åŠä»¥ä¸Šå°ºå¯¸æ˜¾ç¤ºå™¨çš„è¯ï¼Œå»ºè®®è´­ä¹°å®½åº¦è‡³å°‘70cmçš„ï¼Œæˆ‘è´­ä¹°çš„å°ºå¯¸ä¸º $120 \\times 80 \\times 74 cm$ï¼Œåº—é“ºæ˜¯â€œæ–°å°šç¾å®¶å±…â€ã€‚\n\næ³¨æ„åˆ°æ‰‹éœ€è¦è‡ªå·±æ‹§èºä¸å›ºå®šæ¡Œè…¿å’Œæ¡Œæ¿ï¼ˆç”¨ç”µåŠ¨èºä¸åˆ€ï¼‰ä»¥åŠæ¡Œè…¿å’Œæ¡Œè…¿ä¹‹é—´çš„è¿æ¥ï¼ˆæ‰‹æ‹§å³å¯ï¼‰ã€‚\n\nä»¥ä¸‹æ˜¯å®æ‹å›¾ hhã€‚\n\n![æ–°ä¹¦æ¡Œå®æ‹å›¾](https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/IMG_1396.JPG)\n","slug":"æ–°ä¹°çš„å°ä¹¦æ¡Œ","published":1,"updated":"2023-01-17T01:36:24.834Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cld8kfsj1000tzvt814db9bze","content":"<p>ä¹‹å‰ä¹°äº†ä¸ªLGçš„27å¯¸æ˜¾ç¤ºå™¨ï¼Œæ”¾åœ¨ä¹¦æˆ¿çš„æ¡Œå­ä¸Šï¼Œä¸€æ–¹é¢ä¸èƒ½å‡é«˜ï¼ˆä¸Šé¢æœ‰æ¶æ¿æŒ¡ä½ï¼‰ï¼Œå¦ä¸€æ–¹é¢æ˜¯æ¡Œå­å®½åº¦ä¸å¤Ÿï¼ˆåªæœ‰50cmï¼‰ï¼Œæ˜¾ç¤ºå™¨é å¢™å‰é¢åªèƒ½å‹‰å¼ºæ”¾ä¸‹æˆ‘çš„macï¼Œå¯¼è‡´å±å¹•ç¦»æˆ‘å¾ˆè¿‘ï¼Œè§‚æ„Ÿæå·®ã€‚äºæ˜¯åœ¨æ·˜å®ä¸Šæ·˜äº†ä¸ªä¹¦æ¡Œï¼Œè¿˜ç®—ä¸é”™ã€‚</p>\n<span id=\"more\"></span>\n\n<p>å¦‚æœè¦ä½¿ç”¨27å¯¸åŠä»¥ä¸Šå°ºå¯¸æ˜¾ç¤ºå™¨çš„è¯ï¼Œå»ºè®®è´­ä¹°å®½åº¦è‡³å°‘70cmçš„ï¼Œæˆ‘è´­ä¹°çš„å°ºå¯¸ä¸º <mjx-container class=\"MathJax\" jax=\"SVG\"><svg style=\"vertical-align: -0.05ex;\" xmlns=\"http://www.w3.org/2000/svg\" width=\"16.416ex\" height=\"1.581ex\" role=\"img\" focusable=\"false\" viewBox=\"0 -677 7255.9 699\"><g stroke=\"currentColor\" fill=\"currentColor\" stroke-width=\"0\" transform=\"scale(1,-1)\"><g data-mml-node=\"math\"><g data-mml-node=\"mn\"><path data-c=\"31\" d=\"M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z\"></path><path data-c=\"32\" d=\"M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z\" transform=\"translate(500,0)\"></path><path data-c=\"30\" d=\"M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z\" transform=\"translate(1000,0)\"></path></g><g data-mml-node=\"mo\" transform=\"translate(1722.2,0)\"><path data-c=\"D7\" d=\"M630 29Q630 9 609 9Q604 9 587 25T493 118L389 222L284 117Q178 13 175 11Q171 9 168 9Q160 9 154 15T147 29Q147 36 161 51T255 146L359 250L255 354Q174 435 161 449T147 471Q147 480 153 485T168 490Q173 490 175 489Q178 487 284 383L389 278L493 382Q570 459 587 475T609 491Q630 491 630 471Q630 464 620 453T522 355L418 250L522 145Q606 61 618 48T630 29Z\"></path></g><g data-mml-node=\"mn\" transform=\"translate(2722.4,0)\"><path data-c=\"38\" d=\"M70 417T70 494T124 618T248 666Q319 666 374 624T429 515Q429 485 418 459T392 417T361 389T335 371T324 363L338 354Q352 344 366 334T382 323Q457 264 457 174Q457 95 399 37T249 -22Q159 -22 101 29T43 155Q43 263 172 335L154 348Q133 361 127 368Q70 417 70 494ZM286 386L292 390Q298 394 301 396T311 403T323 413T334 425T345 438T355 454T364 471T369 491T371 513Q371 556 342 586T275 624Q268 625 242 625Q201 625 165 599T128 534Q128 511 141 492T167 463T217 431Q224 426 228 424L286 386ZM250 21Q308 21 350 55T392 137Q392 154 387 169T375 194T353 216T330 234T301 253T274 270Q260 279 244 289T218 306L210 311Q204 311 181 294T133 239T107 157Q107 98 150 60T250 21Z\"></path><path data-c=\"30\" d=\"M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z\" transform=\"translate(500,0)\"></path></g><g data-mml-node=\"mo\" transform=\"translate(3944.7,0)\"><path data-c=\"D7\" d=\"M630 29Q630 9 609 9Q604 9 587 25T493 118L389 222L284 117Q178 13 175 11Q171 9 168 9Q160 9 154 15T147 29Q147 36 161 51T255 146L359 250L255 354Q174 435 161 449T147 471Q147 480 153 485T168 490Q173 490 175 489Q178 487 284 383L389 278L493 382Q570 459 587 475T609 491Q630 491 630 471Q630 464 620 453T522 355L418 250L522 145Q606 61 618 48T630 29Z\"></path></g><g data-mml-node=\"mn\" transform=\"translate(4944.9,0)\"><path data-c=\"37\" d=\"M55 458Q56 460 72 567L88 674Q88 676 108 676H128V672Q128 662 143 655T195 646T364 644H485V605L417 512Q408 500 387 472T360 435T339 403T319 367T305 330T292 284T284 230T278 162T275 80Q275 66 275 52T274 28V19Q270 2 255 -10T221 -22Q210 -22 200 -19T179 0T168 40Q168 198 265 368Q285 400 349 489L395 552H302Q128 552 119 546Q113 543 108 522T98 479L95 458V455H55V458Z\"></path><path data-c=\"34\" d=\"M462 0Q444 3 333 3Q217 3 199 0H190V46H221Q241 46 248 46T265 48T279 53T286 61Q287 63 287 115V165H28V211L179 442Q332 674 334 675Q336 677 355 677H373L379 671V211H471V165H379V114Q379 73 379 66T385 54Q393 47 442 46H471V0H462ZM293 211V545L74 212L183 211H293Z\" transform=\"translate(500,0)\"></path></g><g data-mml-node=\"mi\" transform=\"translate(5944.9,0)\"><path data-c=\"1D450\" d=\"M34 159Q34 268 120 355T306 442Q362 442 394 418T427 355Q427 326 408 306T360 285Q341 285 330 295T319 325T330 359T352 380T366 386H367Q367 388 361 392T340 400T306 404Q276 404 249 390Q228 381 206 359Q162 315 142 235T121 119Q121 73 147 50Q169 26 205 26H209Q321 26 394 111Q403 121 406 121Q410 121 419 112T429 98T420 83T391 55T346 25T282 0T202 -11Q127 -11 81 37T34 159Z\"></path></g><g data-mml-node=\"mi\" transform=\"translate(6377.9,0)\"><path data-c=\"1D45A\" d=\"M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z\"></path></g></g></g></svg></mjx-container>ï¼Œåº—é“ºæ˜¯â€œæ–°å°šç¾å®¶å±…â€ã€‚</p>\n<p>æ³¨æ„åˆ°æ‰‹éœ€è¦è‡ªå·±æ‹§èºä¸å›ºå®šæ¡Œè…¿å’Œæ¡Œæ¿ï¼ˆç”¨ç”µåŠ¨èºä¸åˆ€ï¼‰ä»¥åŠæ¡Œè…¿å’Œæ¡Œè…¿ä¹‹é—´çš„è¿æ¥ï¼ˆæ‰‹æ‹§å³å¯ï¼‰ã€‚</p>\n<p>ä»¥ä¸‹æ˜¯å®æ‹å›¾ hhã€‚</p>\n<p><img src=\"https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/IMG_1396.JPG\" alt=\"æ–°ä¹¦æ¡Œå®æ‹å›¾\"></p>\n","site":{"data":{}},"length":240,"excerpt":"<p>ä¹‹å‰ä¹°äº†ä¸ªLGçš„27å¯¸æ˜¾ç¤ºå™¨ï¼Œæ”¾åœ¨ä¹¦æˆ¿çš„æ¡Œå­ä¸Šï¼Œä¸€æ–¹é¢ä¸èƒ½å‡é«˜ï¼ˆä¸Šé¢æœ‰æ¶æ¿æŒ¡ä½ï¼‰ï¼Œå¦ä¸€æ–¹é¢æ˜¯æ¡Œå­å®½åº¦ä¸å¤Ÿï¼ˆåªæœ‰50cmï¼‰ï¼Œæ˜¾ç¤ºå™¨é å¢™å‰é¢åªèƒ½å‹‰å¼ºæ”¾ä¸‹æˆ‘çš„macï¼Œå¯¼è‡´å±å¹•ç¦»æˆ‘å¾ˆè¿‘ï¼Œè§‚æ„Ÿæå·®ã€‚äºæ˜¯åœ¨æ·˜å®ä¸Šæ·˜äº†ä¸ªä¹¦æ¡Œï¼Œè¿˜ç®—ä¸é”™ã€‚</p>","more":"<p>å¦‚æœè¦ä½¿ç”¨27å¯¸åŠä»¥ä¸Šå°ºå¯¸æ˜¾ç¤ºå™¨çš„è¯ï¼Œå»ºè®®è´­ä¹°å®½åº¦è‡³å°‘70cmçš„ï¼Œæˆ‘è´­ä¹°çš„å°ºå¯¸ä¸º <mjx-container class=\"MathJax\" jax=\"SVG\"><svg style=\"vertical-align: -0.05ex;\" xmlns=\"http://www.w3.org/2000/svg\" width=\"16.416ex\" height=\"1.581ex\" role=\"img\" focusable=\"false\" viewBox=\"0 -677 7255.9 699\"><g stroke=\"currentColor\" fill=\"currentColor\" stroke-width=\"0\" transform=\"scale(1,-1)\"><g data-mml-node=\"math\"><g data-mml-node=\"mn\"><path data-c=\"31\" d=\"M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z\"></path><path data-c=\"32\" d=\"M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z\" transform=\"translate(500,0)\"></path><path data-c=\"30\" d=\"M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z\" transform=\"translate(1000,0)\"></path></g><g data-mml-node=\"mo\" transform=\"translate(1722.2,0)\"><path data-c=\"D7\" d=\"M630 29Q630 9 609 9Q604 9 587 25T493 118L389 222L284 117Q178 13 175 11Q171 9 168 9Q160 9 154 15T147 29Q147 36 161 51T255 146L359 250L255 354Q174 435 161 449T147 471Q147 480 153 485T168 490Q173 490 175 489Q178 487 284 383L389 278L493 382Q570 459 587 475T609 491Q630 491 630 471Q630 464 620 453T522 355L418 250L522 145Q606 61 618 48T630 29Z\"></path></g><g data-mml-node=\"mn\" transform=\"translate(2722.4,0)\"><path data-c=\"38\" d=\"M70 417T70 494T124 618T248 666Q319 666 374 624T429 515Q429 485 418 459T392 417T361 389T335 371T324 363L338 354Q352 344 366 334T382 323Q457 264 457 174Q457 95 399 37T249 -22Q159 -22 101 29T43 155Q43 263 172 335L154 348Q133 361 127 368Q70 417 70 494ZM286 386L292 390Q298 394 301 396T311 403T323 413T334 425T345 438T355 454T364 471T369 491T371 513Q371 556 342 586T275 624Q268 625 242 625Q201 625 165 599T128 534Q128 511 141 492T167 463T217 431Q224 426 228 424L286 386ZM250 21Q308 21 350 55T392 137Q392 154 387 169T375 194T353 216T330 234T301 253T274 270Q260 279 244 289T218 306L210 311Q204 311 181 294T133 239T107 157Q107 98 150 60T250 21Z\"></path><path data-c=\"30\" d=\"M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z\" transform=\"translate(500,0)\"></path></g><g data-mml-node=\"mo\" transform=\"translate(3944.7,0)\"><path data-c=\"D7\" d=\"M630 29Q630 9 609 9Q604 9 587 25T493 118L389 222L284 117Q178 13 175 11Q171 9 168 9Q160 9 154 15T147 29Q147 36 161 51T255 146L359 250L255 354Q174 435 161 449T147 471Q147 480 153 485T168 490Q173 490 175 489Q178 487 284 383L389 278L493 382Q570 459 587 475T609 491Q630 491 630 471Q630 464 620 453T522 355L418 250L522 145Q606 61 618 48T630 29Z\"></path></g><g data-mml-node=\"mn\" transform=\"translate(4944.9,0)\"><path data-c=\"37\" d=\"M55 458Q56 460 72 567L88 674Q88 676 108 676H128V672Q128 662 143 655T195 646T364 644H485V605L417 512Q408 500 387 472T360 435T339 403T319 367T305 330T292 284T284 230T278 162T275 80Q275 66 275 52T274 28V19Q270 2 255 -10T221 -22Q210 -22 200 -19T179 0T168 40Q168 198 265 368Q285 400 349 489L395 552H302Q128 552 119 546Q113 543 108 522T98 479L95 458V455H55V458Z\"></path><path data-c=\"34\" d=\"M462 0Q444 3 333 3Q217 3 199 0H190V46H221Q241 46 248 46T265 48T279 53T286 61Q287 63 287 115V165H28V211L179 442Q332 674 334 675Q336 677 355 677H373L379 671V211H471V165H379V114Q379 73 379 66T385 54Q393 47 442 46H471V0H462ZM293 211V545L74 212L183 211H293Z\" transform=\"translate(500,0)\"></path></g><g data-mml-node=\"mi\" transform=\"translate(5944.9,0)\"><path data-c=\"1D450\" d=\"M34 159Q34 268 120 355T306 442Q362 442 394 418T427 355Q427 326 408 306T360 285Q341 285 330 295T319 325T330 359T352 380T366 386H367Q367 388 361 392T340 400T306 404Q276 404 249 390Q228 381 206 359Q162 315 142 235T121 119Q121 73 147 50Q169 26 205 26H209Q321 26 394 111Q403 121 406 121Q410 121 419 112T429 98T420 83T391 55T346 25T282 0T202 -11Q127 -11 81 37T34 159Z\"></path></g><g data-mml-node=\"mi\" transform=\"translate(6377.9,0)\"><path data-c=\"1D45A\" d=\"M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z\"></path></g></g></g></svg></mjx-container>ï¼Œåº—é“ºæ˜¯â€œæ–°å°šç¾å®¶å±…â€ã€‚</p>\n<p>æ³¨æ„åˆ°æ‰‹éœ€è¦è‡ªå·±æ‹§èºä¸å›ºå®šæ¡Œè…¿å’Œæ¡Œæ¿ï¼ˆç”¨ç”µåŠ¨èºä¸åˆ€ï¼‰ä»¥åŠæ¡Œè…¿å’Œæ¡Œè…¿ä¹‹é—´çš„è¿æ¥ï¼ˆæ‰‹æ‹§å³å¯ï¼‰ã€‚</p>\n<p>ä»¥ä¸‹æ˜¯å®æ‹å›¾ hhã€‚</p>\n<p><img src=\"https://yaxingfang-typora.oss-cn-hangzhou.aliyuncs.com/IMG_1396.JPG\" alt=\"æ–°ä¹¦æ¡Œå®æ‹å›¾\"></p>"},{"title":"æ–°å¹´å¿«ä¹ï¼","copyright":true,"mathjax":false,"date":"2023-01-22T01:55:21.000Z","toc":null,"urlname":"2023-happy-spring-festival","_content":"\nä»Šå¹´æ˜¯å¤§å¹´åˆä¸€ï¼Œè¿‡æ–°å¹´ã€‚ç¥æ„¿æˆ‘å’Œå„ä½è¯»è€…ä»¬æ–°å¹´å¿«ä¹ï¼Œäº‹äº‹å¦‚æ„ï¼Œæ—¥è¿›æ–—é‡‘ï¼Œè´¢è¿äº¨é€šï¼Œå…”å¹´å¤§å‰ğŸ‰\n","source":"_posts/æ–°å¹´å¿«ä¹ï¼.md","raw":"---\ntitle: æ–°å¹´å¿«ä¹ï¼\ncopyright: true\nmathjax: false\ncategories:\n  - æ—¥å¸¸å°è®°\ndate: 2023-01-22 09:55:21\ntags: \ntoc: \nurlname: 2023-happy-spring-festival\n---\n\nä»Šå¹´æ˜¯å¤§å¹´åˆä¸€ï¼Œè¿‡æ–°å¹´ã€‚ç¥æ„¿æˆ‘å’Œå„ä½è¯»è€…ä»¬æ–°å¹´å¿«ä¹ï¼Œäº‹äº‹å¦‚æ„ï¼Œæ—¥è¿›æ–—é‡‘ï¼Œè´¢è¿äº¨é€šï¼Œå…”å¹´å¤§å‰ğŸ‰\n","slug":"æ–°å¹´å¿«ä¹ï¼","published":1,"updated":"2023-01-23T08:39:20.578Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cld8kfsj2000vzvt8d287ba8h","content":"<p>ä»Šå¹´æ˜¯å¤§å¹´åˆä¸€ï¼Œè¿‡æ–°å¹´ã€‚ç¥æ„¿æˆ‘å’Œå„ä½è¯»è€…ä»¬æ–°å¹´å¿«ä¹ï¼Œäº‹äº‹å¦‚æ„ï¼Œæ—¥è¿›æ–—é‡‘ï¼Œè´¢è¿äº¨é€šï¼Œå…”å¹´å¤§å‰ğŸ‰</p>\n","site":{"data":{}},"length":47,"excerpt":"","more":"<p>ä»Šå¹´æ˜¯å¤§å¹´åˆä¸€ï¼Œè¿‡æ–°å¹´ã€‚ç¥æ„¿æˆ‘å’Œå„ä½è¯»è€…ä»¬æ–°å¹´å¿«ä¹ï¼Œäº‹äº‹å¦‚æ„ï¼Œæ—¥è¿›æ–—é‡‘ï¼Œè´¢è¿äº¨é€šï¼Œå…”å¹´å¤§å‰ğŸ‰</p>\n"},{"title":"æœ€è¿‘å…³äºæ ¡æ‹›ã€äº’è”ç½‘çš„ä¸€äº›ä¿¡æ¯","copyright":true,"mathjax":true,"date":"2023-01-13T04:56:40.000Z","urlname":"202301-it-info","_content":"\næœ€è¿‘åˆ·è„‰è„‰ã€çŸ¥ä¹ç­‰è®°å½•ä¸‹ä¸€äº›ç½‘å‹å‘å¸ƒçš„ä¸€äº›ä¿¡æ¯ï¼Œä»…ä½œè®°å½•ï¼Œä¸å¯¹å…¶çœŸå®æ€§ç­‰ä½œæ·±ç©¶ï¼Œä¾µåˆ ã€‚\n\n<!--more-->\n\n1ã€å­—èŠ‚é£ä¹¦EAï¼Œbaseæ­å·çš„å¾ˆå¤š22å±Šæ ¡æ‹›ç”Ÿæ²¡è¿‡è¯•ç”¨æœŸã€‚\n\n2ã€æŠ–éŸ³ä¸Šä¸€å•†å®¶C++åŸºç¡€è¯¾ç¨‹å–2999ä¸€ä»½ï¼Œé”€é‡1700+ã€‚\n\n3ã€é“¶è¡Œç±»å¼€å‘å²—ï¼Œä»ä½“é‡ã€å‘å±•ã€åˆ¶åº¦ç­‰æ–¹é¢è€ƒè™‘ï¼Œå»ºè®®å»å›½æœ‰å¤§å‹é“¶è¡Œï¼Œä»¥åŠå¤´éƒ¨çš„è‚¡ä»½åˆ¶é“¶è¡Œã€‚\n\n4ã€è‹¥æ˜¯å»å¤§åŸå¸‚å½“ç¨‹åºå‘˜ï¼Œä»¥åå¯èƒ½ä¼šæƒ³è±¡åœ¨è€å®¶å½“è€å¸ˆå¤šèˆ’æœå‘€ï¼›è‹¥æ˜¯å›å®¶å½“è€å¸ˆï¼Œæˆ–è®¸ä¸€è¾ˆå­éƒ½ä¼šåæ‚”ä¸ºä»€ä¹ˆå¹´è½»çš„æ—¶å€™ä¸å»å¤§åŸå¸‚é—¯ä¸€é—¯ï¼Œè¿™å°±æ˜¯äººç”Ÿã€‚å¸Œæœ›è‹¥å¹²å¹´åï¼Œéƒ½èƒ½å’Œè‡ªå·±å’Œè§£ï¼Œè¿™è¾ˆå­è¿‡çš„è¿˜ä¸é”™ã€‚\n\n5ã€ä»¥å‰è¿›å¤§ä¸“æŠ€æ ¡ä¸­å°å­¦ç­‰å½“è€å¸ˆé—¨æ§›å¾ˆä½ï¼Œç°åœ¨è¶Šæ¥è¶Šé«˜ï¼Œè¶Šæ¥è¶Šå·ã€‚\n\n6ã€ä¸çƒ­çˆ±ç¼–ç¨‹ï¼Œæ²¡è‡ªä¿¡æˆä¸ºè¡Œä¸šç²¾è‹±ï¼Œä¸å–œæ¬¢åŠ ç­ï¼Œä¸æ¨èæˆä¸ºç¨‹åºå‘˜ã€‚\n\n7ã€è¿™æ˜¯ä¸€ä½å­—èŠ‚æˆ˜ç•¥ç¦»èŒçš„è€å“¥/è€å§å¯¹é£ä¹¦çš„çœ‹æ³•ï¼šä¸ªäººä¸çœ‹å¥½ã€‚æ¬§ç¾çš„ä¼ä¸šsaasèƒ½åšèµ·æ¥æœ‰ä¸¤ä¸ªå‰æï¼šä¸€æ˜¯æ¬§ç¾æœ‰å¾ˆæˆç†Ÿçš„èŒä¸šç»ç†äººä½“ç³»ï¼ŒèŒä¸šç»ç†äººæ¥åšé‡‡è´­å†³ç­–ï¼Œè€Œä¸­å›½å¤§éƒ¨åˆ†å…¬å¸æ˜¯ä¸è¿½æ±‚æ•ˆç‡çš„å›½ä¼æˆ–è€…æŠ é—¨åˆ›å§‹äººæä¸€è¨€å ‚çš„ç§ä¼ï¼›äºŒæ˜¯ä¼ä¸šsaasçš„æœ¬è´¨æ˜¯æå‡å‘˜å·¥å·¥ä½œæ•ˆç‡ï¼Œä»è€Œå®ç°å‡å°‘å‘˜å·¥æ•°é‡ï¼Œé™ä½äººåŠ›æˆæœ¬ï¼Œç¾å›½äººå¹³å‡å·¥èµ„æ˜¯5-7ä¸‡ç¾å…ƒï¼Œçœä¸€ä¸ªäººå°±æ˜¯å¤§é‡çš„æˆæœ¬ï¼Œä¸­å›½äººåŠ›æˆæœ¬è¿™ä¹ˆä½ï¼Œä¸ºä»€ä¹ˆä¼šæ„¿æ„å‘é£ä¹¦è¿™æ ·çš„ä¼ä¸šsaasä»˜è´¹å‘¢ï¼Ÿ\n\n8ã€ä¸Šæµ·é“¶è¡Œå¼€å‘å²—ä»Šå¹´é™è–ªï¼Œ22å¹´åŠä»¥å‰å¾ˆé¦™çš„ä¸Šé“¶ï¼Œä»Šå¹´é£è¯„é€æ¸å˜å·®ã€‚\n\n9ã€è„‰è„‰æŠ•ç¥¨æ˜¾ç¤ºå››å¤§è¡Œç ”å‘ä¸­å¿ƒå½“ä¸€è¾ˆå­ç¨‹åºå‘˜çš„èŒä¸šç”Ÿæ¶¯å¼€å±€æ¯”å»å¤§å‚åº”å±Šè¯•ç”¨æœŸè¢«è£ä¸‹å®¶ä¸ç¡®å®šæ›´å¥½ã€‚\n\n10ã€èŒåœºpuaï¼šè¿™ä¸ªéœ€æ±‚äº¤ç»™ä½ åšæ˜¯ä¸ºäº†åŸ¹å…»ä½ ï¼Œä½ è¦å¼€å‘ä¸‰å¤©ï¼Œæˆ‘äº¤ç»™è€å‘˜å·¥åªè¦ä¸€å¤©ï¼›ä½ èƒ½åŠ›ä¸è¡Œï¼Œä¸åƒåˆ«çš„å‘˜å·¥ï¼Œä½ ç¦»å¼€è¿™ä¸ªå¹³å°å¯¸æ­¥éš¾è¡Œï¼Œè¦çæƒœå­¦ä¹ çš„æœºä¼šã€‚\n\n11ã€æŸé“¶è¡Œï¼šä¸€ä¸ªå†…éƒ¨å‡ åä¸ªäººç”¨çš„å•ä½“ç³»ç»Ÿï¼Œè¿˜è¦ædevopsã€‚åƒä½™äººï¼Œå¤§éƒ¨åˆ†è¿˜æ˜¯åƒµå°¸ç”¨æˆ·çš„ç³»ç»Ÿé€¼ç€ä½ åšç†”æ–­é™æµã€‚\n\n12ã€å†œè¡Œçš„ä¸€äº›ç ”å‘ä¸­å¿ƒé£è¯„è¾ƒå·®ï¼Œå˜æ›´é—®é¢˜ã€å…è´¹åŠ ç­ã€å‰Šå‡ç¦åˆ©ã€å˜ç›¸é™è–ªã€æ™‹å‡å›°éš¾ã€å‡ºå¸‚å®¡æ‰¹ã€å„ç§è€ƒæ ¸ï¼Œè¦ä»”ç»†ç”„åˆ«ã€‚\n\n13ã€äº’è”ç½‘ä¼ä¸šçš„å·å·²ç»æ˜¯å…±è¯†äº†ï¼Œåœ¨ç»æµç¯å¢ƒä¸å¥½çš„å¤§åŠ¿ä¸‹ï¼Œä»ç„¶æœ‰æºæºä¸æ–­çš„å¹´è½»å°ä¼™ä¼´å‡å¦‚åˆ°å·åŠ¨å¤§æ½®ã€‚è¿™ä¸ªå·èƒ½ä¸èƒ½é¿å…ï¼Ÿæˆ‘ä»¥å‰è®¤ä¸ºä¸èƒ½ï¼Œå› ä¸ºä¸šåŠ¡å‘å±•é€Ÿåº¦å¤ªå¿«ï¼Œå˜åŒ–å¤ªå¤§ï¼Œå¾ˆéš¾é¿å…åŠ ç­åŠ ç‚¹çš„å·ã€‚äº‹å®ä¸Šè·³å‡ºæ¥çœ‹çœ‹ï¼Œè‡³å°‘æœ‰ä¸€åŠä»¥ä¸Šçš„å·éƒ½æ˜¯å› ä¸ºç®¡ç†è€…æ— çŸ¥ï¼Œæ²¡æœ‰æ€è·¯ï¼Œä¸ç»™å›¢é˜ŸæŒ‡å¯¼å’Œæ–¹å‘å¯¼è‡´çš„â€œæ‰¯æ·¡å·â€ã€‚ä¹Ÿè®¸å¹´è½»é²œæ´»çš„ç”Ÿå‘½ä¸å·ç™½ä¸å·ï¼Œæ‰€è°“å°‘å¹´å¾—å¿—çš„ç®¡ç†è€…è‡ªå·±ä¹Ÿæ˜¯è¿™ä¹ˆè¢«å·è‡³ä»Šã€‚ä¼ä¸šæˆé•¿çš„ä»£ä»·ï¼Œæœ€åä¸€åŠè¢«æŠ•èµ„äººä¹°å•ï¼Œä¸€åŠè¢«å‘˜å·¥ä¹°å•ï¼Œå¦‚æœèŠ±äº†ä»£ä»·èƒ½ä¹°æ¥æˆé•¿ï¼Œä¹Ÿç®—å€¼å¾—ï¼Œå¯æ‚²çš„æ˜¯ï¼Œå¤šåŠä¹°ä¸æ¥æˆé•¿ï¼Œä¹°æ¥çš„æ˜¯å¤±è´¥åçš„æ•™è®­ã€‚\n\n14ã€å›½å®¶å·²ç»æ‹‰å“äº†ä½ç”Ÿè‚²è­¦æŠ¥ï¼Œä½ å¯¹æé«˜å¹´è½»äººç”Ÿè‚²æœ‰ä»€ä¹ˆå»ºè®®ï¼Ÿ - [å®‡å®™åŒºé•¿å­™è¿åŸçš„å›ç­”](https://www.zhihu.com/question/576438196/answer/2830715899)\n\n15ã€å­—èŠ‚æ­å·æœ‰éƒ¨é—¨å…¨æ’¤è½¬baseäº†ï¼Œè™½ç„¶äººä¸å¤šã€‚\n\n16ã€é‚®å‚¨ç ”å‘ä¸­å¿ƒæ€»åŒ…èƒ½åˆ°30+wï¼Œå¾ˆé¦™ï¼Œä½†æ˜¯è²Œä¼¼è¦996ï¼Œä¸ªäººæ„Ÿè§‰è¿˜æ˜¯æ¯”è¾ƒé¦™ã€‚\n\n17ã€å­—èŠ‚æ•™è‚²å‰©ä¸‹çš„äººä¸ç”¨èƒŒæŒ‡æ ‡ï¼Œä¸ç”¨æ‰¿æ‹…é›†å›¢çš„é«˜é¢„æœŸï¼Œåªéœ€æ¢ç´¢æ–°æ–¹å‘å’Œæ‰“ç£¨æ–°äº§å“ï¼Œè€Œä¸”é›†å›¢æ¯ä¸ªæœˆå›ºå®šæ‹¨é’±å…»ä¸šåŠ¡ï¼Œä½•å°ä¸æ˜¯ä¸€ç§å¹¸ç¦å‘¢ï¼Ÿ\n\n18ã€å‰å‡ å¹´å½“è€å¸ˆé—¨æ§›å¾ˆä½ï¼Œå¦‚æœä»¥å½“åˆçš„æ¡ä»¶ï¼Œç°åœ¨å»åº”è˜ï¼Œæ ¹æœ¬è¿›ä¸å»ã€‚\n\n19ã€â€œå›´åŸâ€è¿™ä¸ªè¯ä¸€å®šèƒ½åœ¨ä»Šå¹´ç§‹æ‹›å æ®ä¸€å¸­ä¹‹åœ°ã€‚å¤§åŸå°åŸï¼Œå›½ä¼å¤®ä¼ç§ä¼å¤–ä¼ä½“åˆ¶ï¼Œé“¶è¡Œåˆ¸å•†äº’è”ç½‘åˆ¶é€ ä¸šå†›å·¥ç ”ç©¶æ‰€ã€‚ç©¶ç«Ÿæ˜¯é€‰ä¸ªèƒ½å®‰å®¶çš„å°åŸè¿˜æ˜¯å°½æƒ…äº«å—å¤§åŸå¸‚çš„å¹´è½»ä¸è‡ªç”±ï¼Ÿæ˜¯é€‰æ‹©ä¸€æ­¥åˆ°ä½è¿˜æ˜¯å°†æ‚¬å¿µç•™ä¸ªæœªæ¥ï¼Ÿæ˜¯æŒ¤å‡ºæ—¶é—´æ¥å·¥ä½œè¿˜æ˜¯é€‰æ‹©å·¥ä½œå¤–çš„ç”Ÿæ´»ï¼Ÿæ˜¯åšå®šèµ°è‡ªå·±çš„ä¸“ä¸šè¿˜æ˜¯å¦è¾Ÿè¹Šå¾„ï¼Ÿæ˜¯é€‰æ‹©ä¸€çœ¼çœ‹åˆ°å¤´çš„å®‰å¿ƒè¿˜æ˜¯æœªçŸ¥ä¼´éšçš„é£é™©ä¸æœºé‡ï¼Ÿæœ€åï¼Œå¸Œæœ›å„ä½éƒ½èƒ½æœ‰æ»¡æ„çš„é€‰æ‹©ã€‚æˆ‘ä»¬å·²æ˜¯å½“ä»£é’å¹´ï¼Œæˆ‘ä»¬çš„é€‰æ‹©ä¾¿æ˜¯æ–°ä¸€ä»£é’å¹´çš„é€‰æ‹©ã€‚ä¸è¯¸ä½å…±å‹‰ã€‚\n\n20ã€ä»åŒ—å¤§æ¥è¯»ä¹¦çš„ï¼Œæœ€è¿‘çœ‹å·¥ä½œï¼Œè¶Šæ¥è¶Šè§‰å¾—ï¼Œåœ¨åŒ—äº¬æŒ£ä¸‰åå’ŒæŒ£äº”åæ²¡æœ‰å¤ªå¤§åŒºåˆ«ï¼Œåšäº’è”ç½‘å’Œåšå…¶ä»–è¡Œä¸šä¹Ÿæ²¡æœ‰å¤ªå¤§åŒºåˆ«ï¼Œå¯è§çš„æœªæ¥çš„å·¥ä½œåªæ˜¯ä½œä¸ºç³Šå£çš„å·¥å…·ï¼Œå¾ˆéš¾æœ‰ä»€ä¹ˆçƒ­çˆ±å¯è¨€ã€‚è¶Šæ¥è¶Šæƒ³å›å®¶ä¹¡æ‰¾ä¸ªä½“åˆ¶å†…çš„ç¨³å®šå·¥ä½œäº†ï¼ŒæŠŠæ›´å¤šçš„æ—¶é—´ç”¨åœ¨ç”Ÿæ´»ä¸Šé¢ã€‚æ˜¯æˆ‘å¤ªèººäº†å—ï¼Ÿè¿˜æ˜¯æˆ‘æ ¼å±€ä¸å¤Ÿï¼Ÿ\n","source":"_posts/æœ€è¿‘å…³äºæ ¡æ‹›ã€äº’è”ç½‘çš„ä¸€äº›ä¿¡æ¯.md","raw":"---\ntitle: æœ€è¿‘å…³äºæ ¡æ‹›ã€äº’è”ç½‘çš„ä¸€äº›ä¿¡æ¯\ncopyright: true\nmathjax: true\ncategories: æ—¥å¸¸å°è®°\ntags: \ndate: 2023-01-13 12:56:40\nurlname: 202301-it-info\n---\n\næœ€è¿‘åˆ·è„‰è„‰ã€çŸ¥ä¹ç­‰è®°å½•ä¸‹ä¸€äº›ç½‘å‹å‘å¸ƒçš„ä¸€äº›ä¿¡æ¯ï¼Œä»…ä½œè®°å½•ï¼Œä¸å¯¹å…¶çœŸå®æ€§ç­‰ä½œæ·±ç©¶ï¼Œä¾µåˆ ã€‚\n\n<!--more-->\n\n1ã€å­—èŠ‚é£ä¹¦EAï¼Œbaseæ­å·çš„å¾ˆå¤š22å±Šæ ¡æ‹›ç”Ÿæ²¡è¿‡è¯•ç”¨æœŸã€‚\n\n2ã€æŠ–éŸ³ä¸Šä¸€å•†å®¶C++åŸºç¡€è¯¾ç¨‹å–2999ä¸€ä»½ï¼Œé”€é‡1700+ã€‚\n\n3ã€é“¶è¡Œç±»å¼€å‘å²—ï¼Œä»ä½“é‡ã€å‘å±•ã€åˆ¶åº¦ç­‰æ–¹é¢è€ƒè™‘ï¼Œå»ºè®®å»å›½æœ‰å¤§å‹é“¶è¡Œï¼Œä»¥åŠå¤´éƒ¨çš„è‚¡ä»½åˆ¶é“¶è¡Œã€‚\n\n4ã€è‹¥æ˜¯å»å¤§åŸå¸‚å½“ç¨‹åºå‘˜ï¼Œä»¥åå¯èƒ½ä¼šæƒ³è±¡åœ¨è€å®¶å½“è€å¸ˆå¤šèˆ’æœå‘€ï¼›è‹¥æ˜¯å›å®¶å½“è€å¸ˆï¼Œæˆ–è®¸ä¸€è¾ˆå­éƒ½ä¼šåæ‚”ä¸ºä»€ä¹ˆå¹´è½»çš„æ—¶å€™ä¸å»å¤§åŸå¸‚é—¯ä¸€é—¯ï¼Œè¿™å°±æ˜¯äººç”Ÿã€‚å¸Œæœ›è‹¥å¹²å¹´åï¼Œéƒ½èƒ½å’Œè‡ªå·±å’Œè§£ï¼Œè¿™è¾ˆå­è¿‡çš„è¿˜ä¸é”™ã€‚\n\n5ã€ä»¥å‰è¿›å¤§ä¸“æŠ€æ ¡ä¸­å°å­¦ç­‰å½“è€å¸ˆé—¨æ§›å¾ˆä½ï¼Œç°åœ¨è¶Šæ¥è¶Šé«˜ï¼Œè¶Šæ¥è¶Šå·ã€‚\n\n6ã€ä¸çƒ­çˆ±ç¼–ç¨‹ï¼Œæ²¡è‡ªä¿¡æˆä¸ºè¡Œä¸šç²¾è‹±ï¼Œä¸å–œæ¬¢åŠ ç­ï¼Œä¸æ¨èæˆä¸ºç¨‹åºå‘˜ã€‚\n\n7ã€è¿™æ˜¯ä¸€ä½å­—èŠ‚æˆ˜ç•¥ç¦»èŒçš„è€å“¥/è€å§å¯¹é£ä¹¦çš„çœ‹æ³•ï¼šä¸ªäººä¸çœ‹å¥½ã€‚æ¬§ç¾çš„ä¼ä¸šsaasèƒ½åšèµ·æ¥æœ‰ä¸¤ä¸ªå‰æï¼šä¸€æ˜¯æ¬§ç¾æœ‰å¾ˆæˆç†Ÿçš„èŒä¸šç»ç†äººä½“ç³»ï¼ŒèŒä¸šç»ç†äººæ¥åšé‡‡è´­å†³ç­–ï¼Œè€Œä¸­å›½å¤§éƒ¨åˆ†å…¬å¸æ˜¯ä¸è¿½æ±‚æ•ˆç‡çš„å›½ä¼æˆ–è€…æŠ é—¨åˆ›å§‹äººæä¸€è¨€å ‚çš„ç§ä¼ï¼›äºŒæ˜¯ä¼ä¸šsaasçš„æœ¬è´¨æ˜¯æå‡å‘˜å·¥å·¥ä½œæ•ˆç‡ï¼Œä»è€Œå®ç°å‡å°‘å‘˜å·¥æ•°é‡ï¼Œé™ä½äººåŠ›æˆæœ¬ï¼Œç¾å›½äººå¹³å‡å·¥èµ„æ˜¯5-7ä¸‡ç¾å…ƒï¼Œçœä¸€ä¸ªäººå°±æ˜¯å¤§é‡çš„æˆæœ¬ï¼Œä¸­å›½äººåŠ›æˆæœ¬è¿™ä¹ˆä½ï¼Œä¸ºä»€ä¹ˆä¼šæ„¿æ„å‘é£ä¹¦è¿™æ ·çš„ä¼ä¸šsaasä»˜è´¹å‘¢ï¼Ÿ\n\n8ã€ä¸Šæµ·é“¶è¡Œå¼€å‘å²—ä»Šå¹´é™è–ªï¼Œ22å¹´åŠä»¥å‰å¾ˆé¦™çš„ä¸Šé“¶ï¼Œä»Šå¹´é£è¯„é€æ¸å˜å·®ã€‚\n\n9ã€è„‰è„‰æŠ•ç¥¨æ˜¾ç¤ºå››å¤§è¡Œç ”å‘ä¸­å¿ƒå½“ä¸€è¾ˆå­ç¨‹åºå‘˜çš„èŒä¸šç”Ÿæ¶¯å¼€å±€æ¯”å»å¤§å‚åº”å±Šè¯•ç”¨æœŸè¢«è£ä¸‹å®¶ä¸ç¡®å®šæ›´å¥½ã€‚\n\n10ã€èŒåœºpuaï¼šè¿™ä¸ªéœ€æ±‚äº¤ç»™ä½ åšæ˜¯ä¸ºäº†åŸ¹å…»ä½ ï¼Œä½ è¦å¼€å‘ä¸‰å¤©ï¼Œæˆ‘äº¤ç»™è€å‘˜å·¥åªè¦ä¸€å¤©ï¼›ä½ èƒ½åŠ›ä¸è¡Œï¼Œä¸åƒåˆ«çš„å‘˜å·¥ï¼Œä½ ç¦»å¼€è¿™ä¸ªå¹³å°å¯¸æ­¥éš¾è¡Œï¼Œè¦çæƒœå­¦ä¹ çš„æœºä¼šã€‚\n\n11ã€æŸé“¶è¡Œï¼šä¸€ä¸ªå†…éƒ¨å‡ åä¸ªäººç”¨çš„å•ä½“ç³»ç»Ÿï¼Œè¿˜è¦ædevopsã€‚åƒä½™äººï¼Œå¤§éƒ¨åˆ†è¿˜æ˜¯åƒµå°¸ç”¨æˆ·çš„ç³»ç»Ÿé€¼ç€ä½ åšç†”æ–­é™æµã€‚\n\n12ã€å†œè¡Œçš„ä¸€äº›ç ”å‘ä¸­å¿ƒé£è¯„è¾ƒå·®ï¼Œå˜æ›´é—®é¢˜ã€å…è´¹åŠ ç­ã€å‰Šå‡ç¦åˆ©ã€å˜ç›¸é™è–ªã€æ™‹å‡å›°éš¾ã€å‡ºå¸‚å®¡æ‰¹ã€å„ç§è€ƒæ ¸ï¼Œè¦ä»”ç»†ç”„åˆ«ã€‚\n\n13ã€äº’è”ç½‘ä¼ä¸šçš„å·å·²ç»æ˜¯å…±è¯†äº†ï¼Œåœ¨ç»æµç¯å¢ƒä¸å¥½çš„å¤§åŠ¿ä¸‹ï¼Œä»ç„¶æœ‰æºæºä¸æ–­çš„å¹´è½»å°ä¼™ä¼´å‡å¦‚åˆ°å·åŠ¨å¤§æ½®ã€‚è¿™ä¸ªå·èƒ½ä¸èƒ½é¿å…ï¼Ÿæˆ‘ä»¥å‰è®¤ä¸ºä¸èƒ½ï¼Œå› ä¸ºä¸šåŠ¡å‘å±•é€Ÿåº¦å¤ªå¿«ï¼Œå˜åŒ–å¤ªå¤§ï¼Œå¾ˆéš¾é¿å…åŠ ç­åŠ ç‚¹çš„å·ã€‚äº‹å®ä¸Šè·³å‡ºæ¥çœ‹çœ‹ï¼Œè‡³å°‘æœ‰ä¸€åŠä»¥ä¸Šçš„å·éƒ½æ˜¯å› ä¸ºç®¡ç†è€…æ— çŸ¥ï¼Œæ²¡æœ‰æ€è·¯ï¼Œä¸ç»™å›¢é˜ŸæŒ‡å¯¼å’Œæ–¹å‘å¯¼è‡´çš„â€œæ‰¯æ·¡å·â€ã€‚ä¹Ÿè®¸å¹´è½»é²œæ´»çš„ç”Ÿå‘½ä¸å·ç™½ä¸å·ï¼Œæ‰€è°“å°‘å¹´å¾—å¿—çš„ç®¡ç†è€…è‡ªå·±ä¹Ÿæ˜¯è¿™ä¹ˆè¢«å·è‡³ä»Šã€‚ä¼ä¸šæˆé•¿çš„ä»£ä»·ï¼Œæœ€åä¸€åŠè¢«æŠ•èµ„äººä¹°å•ï¼Œä¸€åŠè¢«å‘˜å·¥ä¹°å•ï¼Œå¦‚æœèŠ±äº†ä»£ä»·èƒ½ä¹°æ¥æˆé•¿ï¼Œä¹Ÿç®—å€¼å¾—ï¼Œå¯æ‚²çš„æ˜¯ï¼Œå¤šåŠä¹°ä¸æ¥æˆé•¿ï¼Œä¹°æ¥çš„æ˜¯å¤±è´¥åçš„æ•™è®­ã€‚\n\n14ã€å›½å®¶å·²ç»æ‹‰å“äº†ä½ç”Ÿè‚²è­¦æŠ¥ï¼Œä½ å¯¹æé«˜å¹´è½»äººç”Ÿè‚²æœ‰ä»€ä¹ˆå»ºè®®ï¼Ÿ - [å®‡å®™åŒºé•¿å­™è¿åŸçš„å›ç­”](https://www.zhihu.com/question/576438196/answer/2830715899)\n\n15ã€å­—èŠ‚æ­å·æœ‰éƒ¨é—¨å…¨æ’¤è½¬baseäº†ï¼Œè™½ç„¶äººä¸å¤šã€‚\n\n16ã€é‚®å‚¨ç ”å‘ä¸­å¿ƒæ€»åŒ…èƒ½åˆ°30+wï¼Œå¾ˆé¦™ï¼Œä½†æ˜¯è²Œä¼¼è¦996ï¼Œä¸ªäººæ„Ÿè§‰è¿˜æ˜¯æ¯”è¾ƒé¦™ã€‚\n\n17ã€å­—èŠ‚æ•™è‚²å‰©ä¸‹çš„äººä¸ç”¨èƒŒæŒ‡æ ‡ï¼Œä¸ç”¨æ‰¿æ‹…é›†å›¢çš„é«˜é¢„æœŸï¼Œåªéœ€æ¢ç´¢æ–°æ–¹å‘å’Œæ‰“ç£¨æ–°äº§å“ï¼Œè€Œä¸”é›†å›¢æ¯ä¸ªæœˆå›ºå®šæ‹¨é’±å…»ä¸šåŠ¡ï¼Œä½•å°ä¸æ˜¯ä¸€ç§å¹¸ç¦å‘¢ï¼Ÿ\n\n18ã€å‰å‡ å¹´å½“è€å¸ˆé—¨æ§›å¾ˆä½ï¼Œå¦‚æœä»¥å½“åˆçš„æ¡ä»¶ï¼Œç°åœ¨å»åº”è˜ï¼Œæ ¹æœ¬è¿›ä¸å»ã€‚\n\n19ã€â€œå›´åŸâ€è¿™ä¸ªè¯ä¸€å®šèƒ½åœ¨ä»Šå¹´ç§‹æ‹›å æ®ä¸€å¸­ä¹‹åœ°ã€‚å¤§åŸå°åŸï¼Œå›½ä¼å¤®ä¼ç§ä¼å¤–ä¼ä½“åˆ¶ï¼Œé“¶è¡Œåˆ¸å•†äº’è”ç½‘åˆ¶é€ ä¸šå†›å·¥ç ”ç©¶æ‰€ã€‚ç©¶ç«Ÿæ˜¯é€‰ä¸ªèƒ½å®‰å®¶çš„å°åŸè¿˜æ˜¯å°½æƒ…äº«å—å¤§åŸå¸‚çš„å¹´è½»ä¸è‡ªç”±ï¼Ÿæ˜¯é€‰æ‹©ä¸€æ­¥åˆ°ä½è¿˜æ˜¯å°†æ‚¬å¿µç•™ä¸ªæœªæ¥ï¼Ÿæ˜¯æŒ¤å‡ºæ—¶é—´æ¥å·¥ä½œè¿˜æ˜¯é€‰æ‹©å·¥ä½œå¤–çš„ç”Ÿæ´»ï¼Ÿæ˜¯åšå®šèµ°è‡ªå·±çš„ä¸“ä¸šè¿˜æ˜¯å¦è¾Ÿè¹Šå¾„ï¼Ÿæ˜¯é€‰æ‹©ä¸€çœ¼çœ‹åˆ°å¤´çš„å®‰å¿ƒè¿˜æ˜¯æœªçŸ¥ä¼´éšçš„é£é™©ä¸æœºé‡ï¼Ÿæœ€åï¼Œå¸Œæœ›å„ä½éƒ½èƒ½æœ‰æ»¡æ„çš„é€‰æ‹©ã€‚æˆ‘ä»¬å·²æ˜¯å½“ä»£é’å¹´ï¼Œæˆ‘ä»¬çš„é€‰æ‹©ä¾¿æ˜¯æ–°ä¸€ä»£é’å¹´çš„é€‰æ‹©ã€‚ä¸è¯¸ä½å…±å‹‰ã€‚\n\n20ã€ä»åŒ—å¤§æ¥è¯»ä¹¦çš„ï¼Œæœ€è¿‘çœ‹å·¥ä½œï¼Œè¶Šæ¥è¶Šè§‰å¾—ï¼Œåœ¨åŒ—äº¬æŒ£ä¸‰åå’ŒæŒ£äº”åæ²¡æœ‰å¤ªå¤§åŒºåˆ«ï¼Œåšäº’è”ç½‘å’Œåšå…¶ä»–è¡Œä¸šä¹Ÿæ²¡æœ‰å¤ªå¤§åŒºåˆ«ï¼Œå¯è§çš„æœªæ¥çš„å·¥ä½œåªæ˜¯ä½œä¸ºç³Šå£çš„å·¥å…·ï¼Œå¾ˆéš¾æœ‰ä»€ä¹ˆçƒ­çˆ±å¯è¨€ã€‚è¶Šæ¥è¶Šæƒ³å›å®¶ä¹¡æ‰¾ä¸ªä½“åˆ¶å†…çš„ç¨³å®šå·¥ä½œäº†ï¼ŒæŠŠæ›´å¤šçš„æ—¶é—´ç”¨åœ¨ç”Ÿæ´»ä¸Šé¢ã€‚æ˜¯æˆ‘å¤ªèººäº†å—ï¼Ÿè¿˜æ˜¯æˆ‘æ ¼å±€ä¸å¤Ÿï¼Ÿ\n","slug":"æœ€è¿‘å…³äºæ ¡æ‹›ã€äº’è”ç½‘çš„ä¸€äº›ä¿¡æ¯","published":1,"updated":"2023-01-17T01:34:46.943Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cld8kfsj2000yzvt8dzj3a5ca","content":"<p>æœ€è¿‘åˆ·è„‰è„‰ã€çŸ¥ä¹ç­‰è®°å½•ä¸‹ä¸€äº›ç½‘å‹å‘å¸ƒçš„ä¸€äº›ä¿¡æ¯ï¼Œä»…ä½œè®°å½•ï¼Œä¸å¯¹å…¶çœŸå®æ€§ç­‰ä½œæ·±ç©¶ï¼Œä¾µåˆ ã€‚</p>\n<span id=\"more\"></span>\n\n<p>1ã€å­—èŠ‚é£ä¹¦EAï¼Œbaseæ­å·çš„å¾ˆå¤š22å±Šæ ¡æ‹›ç”Ÿæ²¡è¿‡è¯•ç”¨æœŸã€‚</p>\n<p>2ã€æŠ–éŸ³ä¸Šä¸€å•†å®¶C++åŸºç¡€è¯¾ç¨‹å–2999ä¸€ä»½ï¼Œé”€é‡1700+ã€‚</p>\n<p>3ã€é“¶è¡Œç±»å¼€å‘å²—ï¼Œä»ä½“é‡ã€å‘å±•ã€åˆ¶åº¦ç­‰æ–¹é¢è€ƒè™‘ï¼Œå»ºè®®å»å›½æœ‰å¤§å‹é“¶è¡Œï¼Œä»¥åŠå¤´éƒ¨çš„è‚¡ä»½åˆ¶é“¶è¡Œã€‚</p>\n<p>4ã€è‹¥æ˜¯å»å¤§åŸå¸‚å½“ç¨‹åºå‘˜ï¼Œä»¥åå¯èƒ½ä¼šæƒ³è±¡åœ¨è€å®¶å½“è€å¸ˆå¤šèˆ’æœå‘€ï¼›è‹¥æ˜¯å›å®¶å½“è€å¸ˆï¼Œæˆ–è®¸ä¸€è¾ˆå­éƒ½ä¼šåæ‚”ä¸ºä»€ä¹ˆå¹´è½»çš„æ—¶å€™ä¸å»å¤§åŸå¸‚é—¯ä¸€é—¯ï¼Œè¿™å°±æ˜¯äººç”Ÿã€‚å¸Œæœ›è‹¥å¹²å¹´åï¼Œéƒ½èƒ½å’Œè‡ªå·±å’Œè§£ï¼Œè¿™è¾ˆå­è¿‡çš„è¿˜ä¸é”™ã€‚</p>\n<p>5ã€ä»¥å‰è¿›å¤§ä¸“æŠ€æ ¡ä¸­å°å­¦ç­‰å½“è€å¸ˆé—¨æ§›å¾ˆä½ï¼Œç°åœ¨è¶Šæ¥è¶Šé«˜ï¼Œè¶Šæ¥è¶Šå·ã€‚</p>\n<p>6ã€ä¸çƒ­çˆ±ç¼–ç¨‹ï¼Œæ²¡è‡ªä¿¡æˆä¸ºè¡Œä¸šç²¾è‹±ï¼Œä¸å–œæ¬¢åŠ ç­ï¼Œä¸æ¨èæˆä¸ºç¨‹åºå‘˜ã€‚</p>\n<p>7ã€è¿™æ˜¯ä¸€ä½å­—èŠ‚æˆ˜ç•¥ç¦»èŒçš„è€å“¥/è€å§å¯¹é£ä¹¦çš„çœ‹æ³•ï¼šä¸ªäººä¸çœ‹å¥½ã€‚æ¬§ç¾çš„ä¼ä¸šsaasèƒ½åšèµ·æ¥æœ‰ä¸¤ä¸ªå‰æï¼šä¸€æ˜¯æ¬§ç¾æœ‰å¾ˆæˆç†Ÿçš„èŒä¸šç»ç†äººä½“ç³»ï¼ŒèŒä¸šç»ç†äººæ¥åšé‡‡è´­å†³ç­–ï¼Œè€Œä¸­å›½å¤§éƒ¨åˆ†å…¬å¸æ˜¯ä¸è¿½æ±‚æ•ˆç‡çš„å›½ä¼æˆ–è€…æŠ é—¨åˆ›å§‹äººæä¸€è¨€å ‚çš„ç§ä¼ï¼›äºŒæ˜¯ä¼ä¸šsaasçš„æœ¬è´¨æ˜¯æå‡å‘˜å·¥å·¥ä½œæ•ˆç‡ï¼Œä»è€Œå®ç°å‡å°‘å‘˜å·¥æ•°é‡ï¼Œé™ä½äººåŠ›æˆæœ¬ï¼Œç¾å›½äººå¹³å‡å·¥èµ„æ˜¯5-7ä¸‡ç¾å…ƒï¼Œçœä¸€ä¸ªäººå°±æ˜¯å¤§é‡çš„æˆæœ¬ï¼Œä¸­å›½äººåŠ›æˆæœ¬è¿™ä¹ˆä½ï¼Œä¸ºä»€ä¹ˆä¼šæ„¿æ„å‘é£ä¹¦è¿™æ ·çš„ä¼ä¸šsaasä»˜è´¹å‘¢ï¼Ÿ</p>\n<p>8ã€ä¸Šæµ·é“¶è¡Œå¼€å‘å²—ä»Šå¹´é™è–ªï¼Œ22å¹´åŠä»¥å‰å¾ˆé¦™çš„ä¸Šé“¶ï¼Œä»Šå¹´é£è¯„é€æ¸å˜å·®ã€‚</p>\n<p>9ã€è„‰è„‰æŠ•ç¥¨æ˜¾ç¤ºå››å¤§è¡Œç ”å‘ä¸­å¿ƒå½“ä¸€è¾ˆå­ç¨‹åºå‘˜çš„èŒä¸šç”Ÿæ¶¯å¼€å±€æ¯”å»å¤§å‚åº”å±Šè¯•ç”¨æœŸè¢«è£ä¸‹å®¶ä¸ç¡®å®šæ›´å¥½ã€‚</p>\n<p>10ã€èŒåœºpuaï¼šè¿™ä¸ªéœ€æ±‚äº¤ç»™ä½ åšæ˜¯ä¸ºäº†åŸ¹å…»ä½ ï¼Œä½ è¦å¼€å‘ä¸‰å¤©ï¼Œæˆ‘äº¤ç»™è€å‘˜å·¥åªè¦ä¸€å¤©ï¼›ä½ èƒ½åŠ›ä¸è¡Œï¼Œä¸åƒåˆ«çš„å‘˜å·¥ï¼Œä½ ç¦»å¼€è¿™ä¸ªå¹³å°å¯¸æ­¥éš¾è¡Œï¼Œè¦çæƒœå­¦ä¹ çš„æœºä¼šã€‚</p>\n<p>11ã€æŸé“¶è¡Œï¼šä¸€ä¸ªå†…éƒ¨å‡ åä¸ªäººç”¨çš„å•ä½“ç³»ç»Ÿï¼Œè¿˜è¦ædevopsã€‚åƒä½™äººï¼Œå¤§éƒ¨åˆ†è¿˜æ˜¯åƒµå°¸ç”¨æˆ·çš„ç³»ç»Ÿé€¼ç€ä½ åšç†”æ–­é™æµã€‚</p>\n<p>12ã€å†œè¡Œçš„ä¸€äº›ç ”å‘ä¸­å¿ƒé£è¯„è¾ƒå·®ï¼Œå˜æ›´é—®é¢˜ã€å…è´¹åŠ ç­ã€å‰Šå‡ç¦åˆ©ã€å˜ç›¸é™è–ªã€æ™‹å‡å›°éš¾ã€å‡ºå¸‚å®¡æ‰¹ã€å„ç§è€ƒæ ¸ï¼Œè¦ä»”ç»†ç”„åˆ«ã€‚</p>\n<p>13ã€äº’è”ç½‘ä¼ä¸šçš„å·å·²ç»æ˜¯å…±è¯†äº†ï¼Œåœ¨ç»æµç¯å¢ƒä¸å¥½çš„å¤§åŠ¿ä¸‹ï¼Œä»ç„¶æœ‰æºæºä¸æ–­çš„å¹´è½»å°ä¼™ä¼´å‡å¦‚åˆ°å·åŠ¨å¤§æ½®ã€‚è¿™ä¸ªå·èƒ½ä¸èƒ½é¿å…ï¼Ÿæˆ‘ä»¥å‰è®¤ä¸ºä¸èƒ½ï¼Œå› ä¸ºä¸šåŠ¡å‘å±•é€Ÿåº¦å¤ªå¿«ï¼Œå˜åŒ–å¤ªå¤§ï¼Œå¾ˆéš¾é¿å…åŠ ç­åŠ ç‚¹çš„å·ã€‚äº‹å®ä¸Šè·³å‡ºæ¥çœ‹çœ‹ï¼Œè‡³å°‘æœ‰ä¸€åŠä»¥ä¸Šçš„å·éƒ½æ˜¯å› ä¸ºç®¡ç†è€…æ— çŸ¥ï¼Œæ²¡æœ‰æ€è·¯ï¼Œä¸ç»™å›¢é˜ŸæŒ‡å¯¼å’Œæ–¹å‘å¯¼è‡´çš„â€œæ‰¯æ·¡å·â€ã€‚ä¹Ÿè®¸å¹´è½»é²œæ´»çš„ç”Ÿå‘½ä¸å·ç™½ä¸å·ï¼Œæ‰€è°“å°‘å¹´å¾—å¿—çš„ç®¡ç†è€…è‡ªå·±ä¹Ÿæ˜¯è¿™ä¹ˆè¢«å·è‡³ä»Šã€‚ä¼ä¸šæˆé•¿çš„ä»£ä»·ï¼Œæœ€åä¸€åŠè¢«æŠ•èµ„äººä¹°å•ï¼Œä¸€åŠè¢«å‘˜å·¥ä¹°å•ï¼Œå¦‚æœèŠ±äº†ä»£ä»·èƒ½ä¹°æ¥æˆé•¿ï¼Œä¹Ÿç®—å€¼å¾—ï¼Œå¯æ‚²çš„æ˜¯ï¼Œå¤šåŠä¹°ä¸æ¥æˆé•¿ï¼Œä¹°æ¥çš„æ˜¯å¤±è´¥åçš„æ•™è®­ã€‚</p>\n<p>14ã€å›½å®¶å·²ç»æ‹‰å“äº†ä½ç”Ÿè‚²è­¦æŠ¥ï¼Œä½ å¯¹æé«˜å¹´è½»äººç”Ÿè‚²æœ‰ä»€ä¹ˆå»ºè®®ï¼Ÿ - <a href=\"https://www.zhihu.com/question/576438196/answer/2830715899\">å®‡å®™åŒºé•¿å­™è¿åŸçš„å›ç­”</a></p>\n<p>15ã€å­—èŠ‚æ­å·æœ‰éƒ¨é—¨å…¨æ’¤è½¬baseäº†ï¼Œè™½ç„¶äººä¸å¤šã€‚</p>\n<p>16ã€é‚®å‚¨ç ”å‘ä¸­å¿ƒæ€»åŒ…èƒ½åˆ°30+wï¼Œå¾ˆé¦™ï¼Œä½†æ˜¯è²Œä¼¼è¦996ï¼Œä¸ªäººæ„Ÿè§‰è¿˜æ˜¯æ¯”è¾ƒé¦™ã€‚</p>\n<p>17ã€å­—èŠ‚æ•™è‚²å‰©ä¸‹çš„äººä¸ç”¨èƒŒæŒ‡æ ‡ï¼Œä¸ç”¨æ‰¿æ‹…é›†å›¢çš„é«˜é¢„æœŸï¼Œåªéœ€æ¢ç´¢æ–°æ–¹å‘å’Œæ‰“ç£¨æ–°äº§å“ï¼Œè€Œä¸”é›†å›¢æ¯ä¸ªæœˆå›ºå®šæ‹¨é’±å…»ä¸šåŠ¡ï¼Œä½•å°ä¸æ˜¯ä¸€ç§å¹¸ç¦å‘¢ï¼Ÿ</p>\n<p>18ã€å‰å‡ å¹´å½“è€å¸ˆé—¨æ§›å¾ˆä½ï¼Œå¦‚æœä»¥å½“åˆçš„æ¡ä»¶ï¼Œç°åœ¨å»åº”è˜ï¼Œæ ¹æœ¬è¿›ä¸å»ã€‚</p>\n<p>19ã€â€œå›´åŸâ€è¿™ä¸ªè¯ä¸€å®šèƒ½åœ¨ä»Šå¹´ç§‹æ‹›å æ®ä¸€å¸­ä¹‹åœ°ã€‚å¤§åŸå°åŸï¼Œå›½ä¼å¤®ä¼ç§ä¼å¤–ä¼ä½“åˆ¶ï¼Œé“¶è¡Œåˆ¸å•†äº’è”ç½‘åˆ¶é€ ä¸šå†›å·¥ç ”ç©¶æ‰€ã€‚ç©¶ç«Ÿæ˜¯é€‰ä¸ªèƒ½å®‰å®¶çš„å°åŸè¿˜æ˜¯å°½æƒ…äº«å—å¤§åŸå¸‚çš„å¹´è½»ä¸è‡ªç”±ï¼Ÿæ˜¯é€‰æ‹©ä¸€æ­¥åˆ°ä½è¿˜æ˜¯å°†æ‚¬å¿µç•™ä¸ªæœªæ¥ï¼Ÿæ˜¯æŒ¤å‡ºæ—¶é—´æ¥å·¥ä½œè¿˜æ˜¯é€‰æ‹©å·¥ä½œå¤–çš„ç”Ÿæ´»ï¼Ÿæ˜¯åšå®šèµ°è‡ªå·±çš„ä¸“ä¸šè¿˜æ˜¯å¦è¾Ÿè¹Šå¾„ï¼Ÿæ˜¯é€‰æ‹©ä¸€çœ¼çœ‹åˆ°å¤´çš„å®‰å¿ƒè¿˜æ˜¯æœªçŸ¥ä¼´éšçš„é£é™©ä¸æœºé‡ï¼Ÿæœ€åï¼Œå¸Œæœ›å„ä½éƒ½èƒ½æœ‰æ»¡æ„çš„é€‰æ‹©ã€‚æˆ‘ä»¬å·²æ˜¯å½“ä»£é’å¹´ï¼Œæˆ‘ä»¬çš„é€‰æ‹©ä¾¿æ˜¯æ–°ä¸€ä»£é’å¹´çš„é€‰æ‹©ã€‚ä¸è¯¸ä½å…±å‹‰ã€‚</p>\n<p>20ã€ä»åŒ—å¤§æ¥è¯»ä¹¦çš„ï¼Œæœ€è¿‘çœ‹å·¥ä½œï¼Œè¶Šæ¥è¶Šè§‰å¾—ï¼Œåœ¨åŒ—äº¬æŒ£ä¸‰åå’ŒæŒ£äº”åæ²¡æœ‰å¤ªå¤§åŒºåˆ«ï¼Œåšäº’è”ç½‘å’Œåšå…¶ä»–è¡Œä¸šä¹Ÿæ²¡æœ‰å¤ªå¤§åŒºåˆ«ï¼Œå¯è§çš„æœªæ¥çš„å·¥ä½œåªæ˜¯ä½œä¸ºç³Šå£çš„å·¥å…·ï¼Œå¾ˆéš¾æœ‰ä»€ä¹ˆçƒ­çˆ±å¯è¨€ã€‚è¶Šæ¥è¶Šæƒ³å›å®¶ä¹¡æ‰¾ä¸ªä½“åˆ¶å†…çš„ç¨³å®šå·¥ä½œäº†ï¼ŒæŠŠæ›´å¤šçš„æ—¶é—´ç”¨åœ¨ç”Ÿæ´»ä¸Šé¢ã€‚æ˜¯æˆ‘å¤ªèººäº†å—ï¼Ÿè¿˜æ˜¯æˆ‘æ ¼å±€ä¸å¤Ÿï¼Ÿ</p>\n","site":{"data":{}},"length":1596,"excerpt":"<p>æœ€è¿‘åˆ·è„‰è„‰ã€çŸ¥ä¹ç­‰è®°å½•ä¸‹ä¸€äº›ç½‘å‹å‘å¸ƒçš„ä¸€äº›ä¿¡æ¯ï¼Œä»…ä½œè®°å½•ï¼Œä¸å¯¹å…¶çœŸå®æ€§ç­‰ä½œæ·±ç©¶ï¼Œä¾µåˆ ã€‚</p>","more":"<p>1ã€å­—èŠ‚é£ä¹¦EAï¼Œbaseæ­å·çš„å¾ˆå¤š22å±Šæ ¡æ‹›ç”Ÿæ²¡è¿‡è¯•ç”¨æœŸã€‚</p>\n<p>2ã€æŠ–éŸ³ä¸Šä¸€å•†å®¶C++åŸºç¡€è¯¾ç¨‹å–2999ä¸€ä»½ï¼Œé”€é‡1700+ã€‚</p>\n<p>3ã€é“¶è¡Œç±»å¼€å‘å²—ï¼Œä»ä½“é‡ã€å‘å±•ã€åˆ¶åº¦ç­‰æ–¹é¢è€ƒè™‘ï¼Œå»ºè®®å»å›½æœ‰å¤§å‹é“¶è¡Œï¼Œä»¥åŠå¤´éƒ¨çš„è‚¡ä»½åˆ¶é“¶è¡Œã€‚</p>\n<p>4ã€è‹¥æ˜¯å»å¤§åŸå¸‚å½“ç¨‹åºå‘˜ï¼Œä»¥åå¯èƒ½ä¼šæƒ³è±¡åœ¨è€å®¶å½“è€å¸ˆå¤šèˆ’æœå‘€ï¼›è‹¥æ˜¯å›å®¶å½“è€å¸ˆï¼Œæˆ–è®¸ä¸€è¾ˆå­éƒ½ä¼šåæ‚”ä¸ºä»€ä¹ˆå¹´è½»çš„æ—¶å€™ä¸å»å¤§åŸå¸‚é—¯ä¸€é—¯ï¼Œè¿™å°±æ˜¯äººç”Ÿã€‚å¸Œæœ›è‹¥å¹²å¹´åï¼Œéƒ½èƒ½å’Œè‡ªå·±å’Œè§£ï¼Œè¿™è¾ˆå­è¿‡çš„è¿˜ä¸é”™ã€‚</p>\n<p>5ã€ä»¥å‰è¿›å¤§ä¸“æŠ€æ ¡ä¸­å°å­¦ç­‰å½“è€å¸ˆé—¨æ§›å¾ˆä½ï¼Œç°åœ¨è¶Šæ¥è¶Šé«˜ï¼Œè¶Šæ¥è¶Šå·ã€‚</p>\n<p>6ã€ä¸çƒ­çˆ±ç¼–ç¨‹ï¼Œæ²¡è‡ªä¿¡æˆä¸ºè¡Œä¸šç²¾è‹±ï¼Œä¸å–œæ¬¢åŠ ç­ï¼Œä¸æ¨èæˆä¸ºç¨‹åºå‘˜ã€‚</p>\n<p>7ã€è¿™æ˜¯ä¸€ä½å­—èŠ‚æˆ˜ç•¥ç¦»èŒçš„è€å“¥/è€å§å¯¹é£ä¹¦çš„çœ‹æ³•ï¼šä¸ªäººä¸çœ‹å¥½ã€‚æ¬§ç¾çš„ä¼ä¸šsaasèƒ½åšèµ·æ¥æœ‰ä¸¤ä¸ªå‰æï¼šä¸€æ˜¯æ¬§ç¾æœ‰å¾ˆæˆç†Ÿçš„èŒä¸šç»ç†äººä½“ç³»ï¼ŒèŒä¸šç»ç†äººæ¥åšé‡‡è´­å†³ç­–ï¼Œè€Œä¸­å›½å¤§éƒ¨åˆ†å…¬å¸æ˜¯ä¸è¿½æ±‚æ•ˆç‡çš„å›½ä¼æˆ–è€…æŠ é—¨åˆ›å§‹äººæä¸€è¨€å ‚çš„ç§ä¼ï¼›äºŒæ˜¯ä¼ä¸šsaasçš„æœ¬è´¨æ˜¯æå‡å‘˜å·¥å·¥ä½œæ•ˆç‡ï¼Œä»è€Œå®ç°å‡å°‘å‘˜å·¥æ•°é‡ï¼Œé™ä½äººåŠ›æˆæœ¬ï¼Œç¾å›½äººå¹³å‡å·¥èµ„æ˜¯5-7ä¸‡ç¾å…ƒï¼Œçœä¸€ä¸ªäººå°±æ˜¯å¤§é‡çš„æˆæœ¬ï¼Œä¸­å›½äººåŠ›æˆæœ¬è¿™ä¹ˆä½ï¼Œä¸ºä»€ä¹ˆä¼šæ„¿æ„å‘é£ä¹¦è¿™æ ·çš„ä¼ä¸šsaasä»˜è´¹å‘¢ï¼Ÿ</p>\n<p>8ã€ä¸Šæµ·é“¶è¡Œå¼€å‘å²—ä»Šå¹´é™è–ªï¼Œ22å¹´åŠä»¥å‰å¾ˆé¦™çš„ä¸Šé“¶ï¼Œä»Šå¹´é£è¯„é€æ¸å˜å·®ã€‚</p>\n<p>9ã€è„‰è„‰æŠ•ç¥¨æ˜¾ç¤ºå››å¤§è¡Œç ”å‘ä¸­å¿ƒå½“ä¸€è¾ˆå­ç¨‹åºå‘˜çš„èŒä¸šç”Ÿæ¶¯å¼€å±€æ¯”å»å¤§å‚åº”å±Šè¯•ç”¨æœŸè¢«è£ä¸‹å®¶ä¸ç¡®å®šæ›´å¥½ã€‚</p>\n<p>10ã€èŒåœºpuaï¼šè¿™ä¸ªéœ€æ±‚äº¤ç»™ä½ åšæ˜¯ä¸ºäº†åŸ¹å…»ä½ ï¼Œä½ è¦å¼€å‘ä¸‰å¤©ï¼Œæˆ‘äº¤ç»™è€å‘˜å·¥åªè¦ä¸€å¤©ï¼›ä½ èƒ½åŠ›ä¸è¡Œï¼Œä¸åƒåˆ«çš„å‘˜å·¥ï¼Œä½ ç¦»å¼€è¿™ä¸ªå¹³å°å¯¸æ­¥éš¾è¡Œï¼Œè¦çæƒœå­¦ä¹ çš„æœºä¼šã€‚</p>\n<p>11ã€æŸé“¶è¡Œï¼šä¸€ä¸ªå†…éƒ¨å‡ åä¸ªäººç”¨çš„å•ä½“ç³»ç»Ÿï¼Œè¿˜è¦ædevopsã€‚åƒä½™äººï¼Œå¤§éƒ¨åˆ†è¿˜æ˜¯åƒµå°¸ç”¨æˆ·çš„ç³»ç»Ÿé€¼ç€ä½ åšç†”æ–­é™æµã€‚</p>\n<p>12ã€å†œè¡Œçš„ä¸€äº›ç ”å‘ä¸­å¿ƒé£è¯„è¾ƒå·®ï¼Œå˜æ›´é—®é¢˜ã€å…è´¹åŠ ç­ã€å‰Šå‡ç¦åˆ©ã€å˜ç›¸é™è–ªã€æ™‹å‡å›°éš¾ã€å‡ºå¸‚å®¡æ‰¹ã€å„ç§è€ƒæ ¸ï¼Œè¦ä»”ç»†ç”„åˆ«ã€‚</p>\n<p>13ã€äº’è”ç½‘ä¼ä¸šçš„å·å·²ç»æ˜¯å…±è¯†äº†ï¼Œåœ¨ç»æµç¯å¢ƒä¸å¥½çš„å¤§åŠ¿ä¸‹ï¼Œä»ç„¶æœ‰æºæºä¸æ–­çš„å¹´è½»å°ä¼™ä¼´å‡å¦‚åˆ°å·åŠ¨å¤§æ½®ã€‚è¿™ä¸ªå·èƒ½ä¸èƒ½é¿å…ï¼Ÿæˆ‘ä»¥å‰è®¤ä¸ºä¸èƒ½ï¼Œå› ä¸ºä¸šåŠ¡å‘å±•é€Ÿåº¦å¤ªå¿«ï¼Œå˜åŒ–å¤ªå¤§ï¼Œå¾ˆéš¾é¿å…åŠ ç­åŠ ç‚¹çš„å·ã€‚äº‹å®ä¸Šè·³å‡ºæ¥çœ‹çœ‹ï¼Œè‡³å°‘æœ‰ä¸€åŠä»¥ä¸Šçš„å·éƒ½æ˜¯å› ä¸ºç®¡ç†è€…æ— çŸ¥ï¼Œæ²¡æœ‰æ€è·¯ï¼Œä¸ç»™å›¢é˜ŸæŒ‡å¯¼å’Œæ–¹å‘å¯¼è‡´çš„â€œæ‰¯æ·¡å·â€ã€‚ä¹Ÿè®¸å¹´è½»é²œæ´»çš„ç”Ÿå‘½ä¸å·ç™½ä¸å·ï¼Œæ‰€è°“å°‘å¹´å¾—å¿—çš„ç®¡ç†è€…è‡ªå·±ä¹Ÿæ˜¯è¿™ä¹ˆè¢«å·è‡³ä»Šã€‚ä¼ä¸šæˆé•¿çš„ä»£ä»·ï¼Œæœ€åä¸€åŠè¢«æŠ•èµ„äººä¹°å•ï¼Œä¸€åŠè¢«å‘˜å·¥ä¹°å•ï¼Œå¦‚æœèŠ±äº†ä»£ä»·èƒ½ä¹°æ¥æˆé•¿ï¼Œä¹Ÿç®—å€¼å¾—ï¼Œå¯æ‚²çš„æ˜¯ï¼Œå¤šåŠä¹°ä¸æ¥æˆé•¿ï¼Œä¹°æ¥çš„æ˜¯å¤±è´¥åçš„æ•™è®­ã€‚</p>\n<p>14ã€å›½å®¶å·²ç»æ‹‰å“äº†ä½ç”Ÿè‚²è­¦æŠ¥ï¼Œä½ å¯¹æé«˜å¹´è½»äººç”Ÿè‚²æœ‰ä»€ä¹ˆå»ºè®®ï¼Ÿ - <a href=\"https://www.zhihu.com/question/576438196/answer/2830715899\">å®‡å®™åŒºé•¿å­™è¿åŸçš„å›ç­”</a></p>\n<p>15ã€å­—èŠ‚æ­å·æœ‰éƒ¨é—¨å…¨æ’¤è½¬baseäº†ï¼Œè™½ç„¶äººä¸å¤šã€‚</p>\n<p>16ã€é‚®å‚¨ç ”å‘ä¸­å¿ƒæ€»åŒ…èƒ½åˆ°30+wï¼Œå¾ˆé¦™ï¼Œä½†æ˜¯è²Œä¼¼è¦996ï¼Œä¸ªäººæ„Ÿè§‰è¿˜æ˜¯æ¯”è¾ƒé¦™ã€‚</p>\n<p>17ã€å­—èŠ‚æ•™è‚²å‰©ä¸‹çš„äººä¸ç”¨èƒŒæŒ‡æ ‡ï¼Œä¸ç”¨æ‰¿æ‹…é›†å›¢çš„é«˜é¢„æœŸï¼Œåªéœ€æ¢ç´¢æ–°æ–¹å‘å’Œæ‰“ç£¨æ–°äº§å“ï¼Œè€Œä¸”é›†å›¢æ¯ä¸ªæœˆå›ºå®šæ‹¨é’±å…»ä¸šåŠ¡ï¼Œä½•å°ä¸æ˜¯ä¸€ç§å¹¸ç¦å‘¢ï¼Ÿ</p>\n<p>18ã€å‰å‡ å¹´å½“è€å¸ˆé—¨æ§›å¾ˆä½ï¼Œå¦‚æœä»¥å½“åˆçš„æ¡ä»¶ï¼Œç°åœ¨å»åº”è˜ï¼Œæ ¹æœ¬è¿›ä¸å»ã€‚</p>\n<p>19ã€â€œå›´åŸâ€è¿™ä¸ªè¯ä¸€å®šèƒ½åœ¨ä»Šå¹´ç§‹æ‹›å æ®ä¸€å¸­ä¹‹åœ°ã€‚å¤§åŸå°åŸï¼Œå›½ä¼å¤®ä¼ç§ä¼å¤–ä¼ä½“åˆ¶ï¼Œé“¶è¡Œåˆ¸å•†äº’è”ç½‘åˆ¶é€ ä¸šå†›å·¥ç ”ç©¶æ‰€ã€‚ç©¶ç«Ÿæ˜¯é€‰ä¸ªèƒ½å®‰å®¶çš„å°åŸè¿˜æ˜¯å°½æƒ…äº«å—å¤§åŸå¸‚çš„å¹´è½»ä¸è‡ªç”±ï¼Ÿæ˜¯é€‰æ‹©ä¸€æ­¥åˆ°ä½è¿˜æ˜¯å°†æ‚¬å¿µç•™ä¸ªæœªæ¥ï¼Ÿæ˜¯æŒ¤å‡ºæ—¶é—´æ¥å·¥ä½œè¿˜æ˜¯é€‰æ‹©å·¥ä½œå¤–çš„ç”Ÿæ´»ï¼Ÿæ˜¯åšå®šèµ°è‡ªå·±çš„ä¸“ä¸šè¿˜æ˜¯å¦è¾Ÿè¹Šå¾„ï¼Ÿæ˜¯é€‰æ‹©ä¸€çœ¼çœ‹åˆ°å¤´çš„å®‰å¿ƒè¿˜æ˜¯æœªçŸ¥ä¼´éšçš„é£é™©ä¸æœºé‡ï¼Ÿæœ€åï¼Œå¸Œæœ›å„ä½éƒ½èƒ½æœ‰æ»¡æ„çš„é€‰æ‹©ã€‚æˆ‘ä»¬å·²æ˜¯å½“ä»£é’å¹´ï¼Œæˆ‘ä»¬çš„é€‰æ‹©ä¾¿æ˜¯æ–°ä¸€ä»£é’å¹´çš„é€‰æ‹©ã€‚ä¸è¯¸ä½å…±å‹‰ã€‚</p>\n<p>20ã€ä»åŒ—å¤§æ¥è¯»ä¹¦çš„ï¼Œæœ€è¿‘çœ‹å·¥ä½œï¼Œè¶Šæ¥è¶Šè§‰å¾—ï¼Œåœ¨åŒ—äº¬æŒ£ä¸‰åå’ŒæŒ£äº”åæ²¡æœ‰å¤ªå¤§åŒºåˆ«ï¼Œåšäº’è”ç½‘å’Œåšå…¶ä»–è¡Œä¸šä¹Ÿæ²¡æœ‰å¤ªå¤§åŒºåˆ«ï¼Œå¯è§çš„æœªæ¥çš„å·¥ä½œåªæ˜¯ä½œä¸ºç³Šå£çš„å·¥å…·ï¼Œå¾ˆéš¾æœ‰ä»€ä¹ˆçƒ­çˆ±å¯è¨€ã€‚è¶Šæ¥è¶Šæƒ³å›å®¶ä¹¡æ‰¾ä¸ªä½“åˆ¶å†…çš„ç¨³å®šå·¥ä½œäº†ï¼ŒæŠŠæ›´å¤šçš„æ—¶é—´ç”¨åœ¨ç”Ÿæ´»ä¸Šé¢ã€‚æ˜¯æˆ‘å¤ªèººäº†å—ï¼Ÿè¿˜æ˜¯æˆ‘æ ¼å±€ä¸å¤Ÿï¼Ÿ</p>"},{"title":"æ±Ÿè‹çœè€ƒè€ƒå®Œå•¦","copyright":true,"mathjax":true,"date":"2022-12-18T03:49:32.000Z","urlname":"2022-jiangsu-gwy","_content":"\nåæ ‡å¸¸å·é’Ÿæ¥¼åŒºè‚¯å¾·åŸºé’å±±åº—ï¼Œçœ‹äº†ä¸‹ä¸‹ä¸€ç­å›å®¶çš„ç­è½¦è¦åˆ°ä¸‹åˆä¸€ç‚¹äº†ï¼Œé‚ååœ¨è‚¯å¾·åŸºé‡Œï¼Œæ²æµ´æš–å†¬çš„é˜³å…‰ï¼Œç®€å•å›é¡¾ä¸€ä¸‹æˆ‘å¤‡è€ƒè¿™æ¬¡æ±Ÿè‹çœè€ƒçš„ä¸€äº›äº‹æƒ…å§ã€‚\n\n<!--more-->\n\n8æœˆåº•ä»å­—èŠ‚å›å­¦æ ¡ï¼Œæœ¬æ¥æ˜¯å‡†å¤‡ç”¨80%çš„æ—¶é—´å‡†å¤‡gwyè€ƒè¯•ï¼Œå‰©ä¸‹æ—¶é—´å‚åŠ ç§‹æ‹›çš„ã€‚ç„¶è€Œï¼Œäº‹ä¸æ„¿è¿ï¼Œç”±äºè€ƒå…¬çš„æ„æ„¿ä¸æ˜¯å¾ˆå¼ºçƒˆï¼Œå†åŠ ä¸Šä¸€æ³¢åˆä¸€æ³¢çš„ç¬”è¯•é¢è¯•ï¼Œä¸¥é‡æŒ¤å äº†å¤ä¹ æ—¶é—´ã€‚æ›´å…³é”®çš„æ˜¯ï¼Œåœ¨åæœŸç§‹æ‹›å¿«ç»“æŸçš„æ—¶å€™ï¼Œç”±äºofferé€‰æ‹©ç­‰é—®é¢˜è®©äººå¿ƒçƒ¦ï¼Œå¤‡è€ƒç”šè‡³ä¸­æ–­è¿‡ä¸€æ®µæ—¶é—´ã€‚\n\næ¥å¸¸å·ä¹Ÿæ˜¯ä¸å¤ªé¡ºåˆ©ï¼Œæœ€è¿‘ç–«æƒ…ç®¡æ§æ”¾å¼€ï¼Œç¤¼æ‹œäº”ä¸­åˆæ¥å¸¸ä¹‹å‰ç‰¹æ„åšäº†å•ç®¡æ ¸é…¸æ£€æµ‹ï¼Œé—®äº†ä¸‹è¯´æ˜¯æ™šä¸Šå…­ä¸ƒç‚¹å°±èƒ½å‡ºç»“æœï¼Œå¹¶ä¸”å¬æœ‹å‹è¯´å¦‚æœç¬¬äºŒå¤©æ—©ä¸Šå…«ç‚¹ä¸å‡ºç»“æœï¼Œå°±æ˜¯é˜³äº†ã€‚ç­‰å•Šç­‰ï¼Œåˆ°æ™šä¸Šä¸ƒå…«ç‚¹äº†åå¤æŸ¥çœ‹æ ¸é…¸ç»“æœï¼Œæ— ã€‚åä¸€ç‚¹ç¡å‰å†çœ‹äº†ä¸€æ¬¡ï¼Œè¿˜æ˜¯æ— ï¼Œç¡å§ï¼Œèƒ½å’‹åŠå‘¢ã€‚ç¬¬äºŒå¤©ä¸€æ—©ï¼Œé†’æ¥ç¬¬ä¸€ä»¶äº‹å°±æ˜¯çœ‹æ ¸é…¸ç»“æœï¼Œç»“æœå‡ºæ¥äº†ï¼Œé˜´æ€§ï¼Œå¤§èˆ’ä¸€å£æ°”ï¼Œä¸ç„¶ä¸æ˜¯æµªè´¹äº†æŠ¥åè´¹è·Ÿé…’åº—è´¹å˜›ï¼ˆç¬‘æ­»ï¼‰ã€‚\n\næ˜¨å¤©æ—©ä¸Šè¡Œæµ‹ï¼Œ135é¢˜ï¼Œåšç¤¼èŸ¹ï¼Œæ„Ÿè§‰ä»¥æˆ‘ç›®å‰çš„æ°´å¹³120åˆ†é’Ÿåšå®Œ125é¢˜æ˜¯ä¸ªæé™äº†ï¼Œè¿˜æœ‰æµ™æ±Ÿçœè€ƒç«Ÿç„¶115é¢˜ï¼Œæ™•ã€‚ä¸‹åˆç”³è®ºï¼Œå†™äº†ä¸‰å°æ—¶å°å­¦ç”Ÿå†™ä½œï¼Œä¸å¾—ä¸è¯´æˆ‘çš„å­—å†™çš„å¤ªæŒ«äº†ï¼Œä»¥åæœ‰ç©ºå¯ä»¥ç»ƒç»ƒï¼ˆflagå·²ç«‹ï¼‰ï¼Œä¸è¿‡ä»¥åæœ‰å°å­©è¿™ä¸ªä¸€å®šè¦æ”¾åˆ°é«˜ä¼˜é¡¹ã€‚ä»Šå¤©ä¸Šåˆåˆšè€ƒå®Œä¸“ä¸šç§‘ç›®ï¼Œè·Ÿå‰ä¸¤å¤©ç²‰ç¬”ä¸Šåšçš„å»å¹´å’Œå‰å¹´çš„ä¸“ä¸šè¯¾æ„Ÿè§‰å·®ä¸å¤šï¼Œéƒ½æ˜¯è¯¥ä¼šçš„ä¼šï¼Œä¸ä¼šçš„çŒœï¼Œæ¯•ç«Ÿè£¸è€ƒã€‚\n\næ€»ä½“è€Œè¨€ï¼Œå¯¹äºæˆ‘è¿™ä¸ªå²—ä½è€Œè¨€ï¼ŒæŠ¥å½•æ¯”80:2ï¼Œå¦‚æœä»ä¸ƒæœˆä»½å¥½å¥½å‡†å¤‡ï¼Œå¿ƒæ— æ—éª›ï¼Œæˆ‘è§‰å¾—åº”è¯¥æ˜¯å¯ä»¥è¿›é¢è¯•çš„ï¼ˆèœœæ±è‡ªä¿¡ï¼‰ã€‚\n\nä¸‹ä¸ªæœˆè¿˜æœ‰å›½è€ƒï¼Œè¿™å‡ å¤©å†å¸¦ç€çœ‹çœ‹è¡Œæµ‹å§ã€‚\n","source":"_posts/æ±Ÿè‹çœè€ƒè€ƒå®Œå•¦.md","raw":"---\ntitle: æ±Ÿè‹çœè€ƒè€ƒå®Œå•¦\ncopyright: true\nmathjax: true\ncategories: æ—¥å¸¸å°è®°\ntags: \ndate: 2022-12-18 11:49:32\nurlname: 2022-jiangsu-gwy\n---\n\nåæ ‡å¸¸å·é’Ÿæ¥¼åŒºè‚¯å¾·åŸºé’å±±åº—ï¼Œçœ‹äº†ä¸‹ä¸‹ä¸€ç­å›å®¶çš„ç­è½¦è¦åˆ°ä¸‹åˆä¸€ç‚¹äº†ï¼Œé‚ååœ¨è‚¯å¾·åŸºé‡Œï¼Œæ²æµ´æš–å†¬çš„é˜³å…‰ï¼Œç®€å•å›é¡¾ä¸€ä¸‹æˆ‘å¤‡è€ƒè¿™æ¬¡æ±Ÿè‹çœè€ƒçš„ä¸€äº›äº‹æƒ…å§ã€‚\n\n<!--more-->\n\n8æœˆåº•ä»å­—èŠ‚å›å­¦æ ¡ï¼Œæœ¬æ¥æ˜¯å‡†å¤‡ç”¨80%çš„æ—¶é—´å‡†å¤‡gwyè€ƒè¯•ï¼Œå‰©ä¸‹æ—¶é—´å‚åŠ ç§‹æ‹›çš„ã€‚ç„¶è€Œï¼Œäº‹ä¸æ„¿è¿ï¼Œç”±äºè€ƒå…¬çš„æ„æ„¿ä¸æ˜¯å¾ˆå¼ºçƒˆï¼Œå†åŠ ä¸Šä¸€æ³¢åˆä¸€æ³¢çš„ç¬”è¯•é¢è¯•ï¼Œä¸¥é‡æŒ¤å äº†å¤ä¹ æ—¶é—´ã€‚æ›´å…³é”®çš„æ˜¯ï¼Œåœ¨åæœŸç§‹æ‹›å¿«ç»“æŸçš„æ—¶å€™ï¼Œç”±äºofferé€‰æ‹©ç­‰é—®é¢˜è®©äººå¿ƒçƒ¦ï¼Œå¤‡è€ƒç”šè‡³ä¸­æ–­è¿‡ä¸€æ®µæ—¶é—´ã€‚\n\næ¥å¸¸å·ä¹Ÿæ˜¯ä¸å¤ªé¡ºåˆ©ï¼Œæœ€è¿‘ç–«æƒ…ç®¡æ§æ”¾å¼€ï¼Œç¤¼æ‹œäº”ä¸­åˆæ¥å¸¸ä¹‹å‰ç‰¹æ„åšäº†å•ç®¡æ ¸é…¸æ£€æµ‹ï¼Œé—®äº†ä¸‹è¯´æ˜¯æ™šä¸Šå…­ä¸ƒç‚¹å°±èƒ½å‡ºç»“æœï¼Œå¹¶ä¸”å¬æœ‹å‹è¯´å¦‚æœç¬¬äºŒå¤©æ—©ä¸Šå…«ç‚¹ä¸å‡ºç»“æœï¼Œå°±æ˜¯é˜³äº†ã€‚ç­‰å•Šç­‰ï¼Œåˆ°æ™šä¸Šä¸ƒå…«ç‚¹äº†åå¤æŸ¥çœ‹æ ¸é…¸ç»“æœï¼Œæ— ã€‚åä¸€ç‚¹ç¡å‰å†çœ‹äº†ä¸€æ¬¡ï¼Œè¿˜æ˜¯æ— ï¼Œç¡å§ï¼Œèƒ½å’‹åŠå‘¢ã€‚ç¬¬äºŒå¤©ä¸€æ—©ï¼Œé†’æ¥ç¬¬ä¸€ä»¶äº‹å°±æ˜¯çœ‹æ ¸é…¸ç»“æœï¼Œç»“æœå‡ºæ¥äº†ï¼Œé˜´æ€§ï¼Œå¤§èˆ’ä¸€å£æ°”ï¼Œä¸ç„¶ä¸æ˜¯æµªè´¹äº†æŠ¥åè´¹è·Ÿé…’åº—è´¹å˜›ï¼ˆç¬‘æ­»ï¼‰ã€‚\n\næ˜¨å¤©æ—©ä¸Šè¡Œæµ‹ï¼Œ135é¢˜ï¼Œåšç¤¼èŸ¹ï¼Œæ„Ÿè§‰ä»¥æˆ‘ç›®å‰çš„æ°´å¹³120åˆ†é’Ÿåšå®Œ125é¢˜æ˜¯ä¸ªæé™äº†ï¼Œè¿˜æœ‰æµ™æ±Ÿçœè€ƒç«Ÿç„¶115é¢˜ï¼Œæ™•ã€‚ä¸‹åˆç”³è®ºï¼Œå†™äº†ä¸‰å°æ—¶å°å­¦ç”Ÿå†™ä½œï¼Œä¸å¾—ä¸è¯´æˆ‘çš„å­—å†™çš„å¤ªæŒ«äº†ï¼Œä»¥åæœ‰ç©ºå¯ä»¥ç»ƒç»ƒï¼ˆflagå·²ç«‹ï¼‰ï¼Œä¸è¿‡ä»¥åæœ‰å°å­©è¿™ä¸ªä¸€å®šè¦æ”¾åˆ°é«˜ä¼˜é¡¹ã€‚ä»Šå¤©ä¸Šåˆåˆšè€ƒå®Œä¸“ä¸šç§‘ç›®ï¼Œè·Ÿå‰ä¸¤å¤©ç²‰ç¬”ä¸Šåšçš„å»å¹´å’Œå‰å¹´çš„ä¸“ä¸šè¯¾æ„Ÿè§‰å·®ä¸å¤šï¼Œéƒ½æ˜¯è¯¥ä¼šçš„ä¼šï¼Œä¸ä¼šçš„çŒœï¼Œæ¯•ç«Ÿè£¸è€ƒã€‚\n\næ€»ä½“è€Œè¨€ï¼Œå¯¹äºæˆ‘è¿™ä¸ªå²—ä½è€Œè¨€ï¼ŒæŠ¥å½•æ¯”80:2ï¼Œå¦‚æœä»ä¸ƒæœˆä»½å¥½å¥½å‡†å¤‡ï¼Œå¿ƒæ— æ—éª›ï¼Œæˆ‘è§‰å¾—åº”è¯¥æ˜¯å¯ä»¥è¿›é¢è¯•çš„ï¼ˆèœœæ±è‡ªä¿¡ï¼‰ã€‚\n\nä¸‹ä¸ªæœˆè¿˜æœ‰å›½è€ƒï¼Œè¿™å‡ å¤©å†å¸¦ç€çœ‹çœ‹è¡Œæµ‹å§ã€‚\n","slug":"æ±Ÿè‹çœè€ƒè€ƒå®Œå•¦","published":1,"updated":"2023-01-17T01:34:15.047Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cld8kfsj30010zvt874q85gky","content":"<p>åæ ‡å¸¸å·é’Ÿæ¥¼åŒºè‚¯å¾·åŸºé’å±±åº—ï¼Œçœ‹äº†ä¸‹ä¸‹ä¸€ç­å›å®¶çš„ç­è½¦è¦åˆ°ä¸‹åˆä¸€ç‚¹äº†ï¼Œé‚ååœ¨è‚¯å¾·åŸºé‡Œï¼Œæ²æµ´æš–å†¬çš„é˜³å…‰ï¼Œç®€å•å›é¡¾ä¸€ä¸‹æˆ‘å¤‡è€ƒè¿™æ¬¡æ±Ÿè‹çœè€ƒçš„ä¸€äº›äº‹æƒ…å§ã€‚</p>\n<span id=\"more\"></span>\n\n<p>8æœˆåº•ä»å­—èŠ‚å›å­¦æ ¡ï¼Œæœ¬æ¥æ˜¯å‡†å¤‡ç”¨80%çš„æ—¶é—´å‡†å¤‡gwyè€ƒè¯•ï¼Œå‰©ä¸‹æ—¶é—´å‚åŠ ç§‹æ‹›çš„ã€‚ç„¶è€Œï¼Œäº‹ä¸æ„¿è¿ï¼Œç”±äºè€ƒå…¬çš„æ„æ„¿ä¸æ˜¯å¾ˆå¼ºçƒˆï¼Œå†åŠ ä¸Šä¸€æ³¢åˆä¸€æ³¢çš„ç¬”è¯•é¢è¯•ï¼Œä¸¥é‡æŒ¤å äº†å¤ä¹ æ—¶é—´ã€‚æ›´å…³é”®çš„æ˜¯ï¼Œåœ¨åæœŸç§‹æ‹›å¿«ç»“æŸçš„æ—¶å€™ï¼Œç”±äºofferé€‰æ‹©ç­‰é—®é¢˜è®©äººå¿ƒçƒ¦ï¼Œå¤‡è€ƒç”šè‡³ä¸­æ–­è¿‡ä¸€æ®µæ—¶é—´ã€‚</p>\n<p>æ¥å¸¸å·ä¹Ÿæ˜¯ä¸å¤ªé¡ºåˆ©ï¼Œæœ€è¿‘ç–«æƒ…ç®¡æ§æ”¾å¼€ï¼Œç¤¼æ‹œäº”ä¸­åˆæ¥å¸¸ä¹‹å‰ç‰¹æ„åšäº†å•ç®¡æ ¸é…¸æ£€æµ‹ï¼Œé—®äº†ä¸‹è¯´æ˜¯æ™šä¸Šå…­ä¸ƒç‚¹å°±èƒ½å‡ºç»“æœï¼Œå¹¶ä¸”å¬æœ‹å‹è¯´å¦‚æœç¬¬äºŒå¤©æ—©ä¸Šå…«ç‚¹ä¸å‡ºç»“æœï¼Œå°±æ˜¯é˜³äº†ã€‚ç­‰å•Šç­‰ï¼Œåˆ°æ™šä¸Šä¸ƒå…«ç‚¹äº†åå¤æŸ¥çœ‹æ ¸é…¸ç»“æœï¼Œæ— ã€‚åä¸€ç‚¹ç¡å‰å†çœ‹äº†ä¸€æ¬¡ï¼Œè¿˜æ˜¯æ— ï¼Œç¡å§ï¼Œèƒ½å’‹åŠå‘¢ã€‚ç¬¬äºŒå¤©ä¸€æ—©ï¼Œé†’æ¥ç¬¬ä¸€ä»¶äº‹å°±æ˜¯çœ‹æ ¸é…¸ç»“æœï¼Œç»“æœå‡ºæ¥äº†ï¼Œé˜´æ€§ï¼Œå¤§èˆ’ä¸€å£æ°”ï¼Œä¸ç„¶ä¸æ˜¯æµªè´¹äº†æŠ¥åè´¹è·Ÿé…’åº—è´¹å˜›ï¼ˆç¬‘æ­»ï¼‰ã€‚</p>\n<p>æ˜¨å¤©æ—©ä¸Šè¡Œæµ‹ï¼Œ135é¢˜ï¼Œåšç¤¼èŸ¹ï¼Œæ„Ÿè§‰ä»¥æˆ‘ç›®å‰çš„æ°´å¹³120åˆ†é’Ÿåšå®Œ125é¢˜æ˜¯ä¸ªæé™äº†ï¼Œè¿˜æœ‰æµ™æ±Ÿçœè€ƒç«Ÿç„¶115é¢˜ï¼Œæ™•ã€‚ä¸‹åˆç”³è®ºï¼Œå†™äº†ä¸‰å°æ—¶å°å­¦ç”Ÿå†™ä½œï¼Œä¸å¾—ä¸è¯´æˆ‘çš„å­—å†™çš„å¤ªæŒ«äº†ï¼Œä»¥åæœ‰ç©ºå¯ä»¥ç»ƒç»ƒï¼ˆflagå·²ç«‹ï¼‰ï¼Œä¸è¿‡ä»¥åæœ‰å°å­©è¿™ä¸ªä¸€å®šè¦æ”¾åˆ°é«˜ä¼˜é¡¹ã€‚ä»Šå¤©ä¸Šåˆåˆšè€ƒå®Œä¸“ä¸šç§‘ç›®ï¼Œè·Ÿå‰ä¸¤å¤©ç²‰ç¬”ä¸Šåšçš„å»å¹´å’Œå‰å¹´çš„ä¸“ä¸šè¯¾æ„Ÿè§‰å·®ä¸å¤šï¼Œéƒ½æ˜¯è¯¥ä¼šçš„ä¼šï¼Œä¸ä¼šçš„çŒœï¼Œæ¯•ç«Ÿè£¸è€ƒã€‚</p>\n<p>æ€»ä½“è€Œè¨€ï¼Œå¯¹äºæˆ‘è¿™ä¸ªå²—ä½è€Œè¨€ï¼ŒæŠ¥å½•æ¯”80:2ï¼Œå¦‚æœä»ä¸ƒæœˆä»½å¥½å¥½å‡†å¤‡ï¼Œå¿ƒæ— æ—éª›ï¼Œæˆ‘è§‰å¾—åº”è¯¥æ˜¯å¯ä»¥è¿›é¢è¯•çš„ï¼ˆèœœæ±è‡ªä¿¡ï¼‰ã€‚</p>\n<p>ä¸‹ä¸ªæœˆè¿˜æœ‰å›½è€ƒï¼Œè¿™å‡ å¤©å†å¸¦ç€çœ‹çœ‹è¡Œæµ‹å§ã€‚</p>\n","site":{"data":{}},"length":635,"excerpt":"<p>åæ ‡å¸¸å·é’Ÿæ¥¼åŒºè‚¯å¾·åŸºé’å±±åº—ï¼Œçœ‹äº†ä¸‹ä¸‹ä¸€ç­å›å®¶çš„ç­è½¦è¦åˆ°ä¸‹åˆä¸€ç‚¹äº†ï¼Œé‚ååœ¨è‚¯å¾·åŸºé‡Œï¼Œæ²æµ´æš–å†¬çš„é˜³å…‰ï¼Œç®€å•å›é¡¾ä¸€ä¸‹æˆ‘å¤‡è€ƒè¿™æ¬¡æ±Ÿè‹çœè€ƒçš„ä¸€äº›äº‹æƒ…å§ã€‚</p>","more":"<p>8æœˆåº•ä»å­—èŠ‚å›å­¦æ ¡ï¼Œæœ¬æ¥æ˜¯å‡†å¤‡ç”¨80%çš„æ—¶é—´å‡†å¤‡gwyè€ƒè¯•ï¼Œå‰©ä¸‹æ—¶é—´å‚åŠ ç§‹æ‹›çš„ã€‚ç„¶è€Œï¼Œäº‹ä¸æ„¿è¿ï¼Œç”±äºè€ƒå…¬çš„æ„æ„¿ä¸æ˜¯å¾ˆå¼ºçƒˆï¼Œå†åŠ ä¸Šä¸€æ³¢åˆä¸€æ³¢çš„ç¬”è¯•é¢è¯•ï¼Œä¸¥é‡æŒ¤å äº†å¤ä¹ æ—¶é—´ã€‚æ›´å…³é”®çš„æ˜¯ï¼Œåœ¨åæœŸç§‹æ‹›å¿«ç»“æŸçš„æ—¶å€™ï¼Œç”±äºofferé€‰æ‹©ç­‰é—®é¢˜è®©äººå¿ƒçƒ¦ï¼Œå¤‡è€ƒç”šè‡³ä¸­æ–­è¿‡ä¸€æ®µæ—¶é—´ã€‚</p>\n<p>æ¥å¸¸å·ä¹Ÿæ˜¯ä¸å¤ªé¡ºåˆ©ï¼Œæœ€è¿‘ç–«æƒ…ç®¡æ§æ”¾å¼€ï¼Œç¤¼æ‹œäº”ä¸­åˆæ¥å¸¸ä¹‹å‰ç‰¹æ„åšäº†å•ç®¡æ ¸é…¸æ£€æµ‹ï¼Œé—®äº†ä¸‹è¯´æ˜¯æ™šä¸Šå…­ä¸ƒç‚¹å°±èƒ½å‡ºç»“æœï¼Œå¹¶ä¸”å¬æœ‹å‹è¯´å¦‚æœç¬¬äºŒå¤©æ—©ä¸Šå…«ç‚¹ä¸å‡ºç»“æœï¼Œå°±æ˜¯é˜³äº†ã€‚ç­‰å•Šç­‰ï¼Œåˆ°æ™šä¸Šä¸ƒå…«ç‚¹äº†åå¤æŸ¥çœ‹æ ¸é…¸ç»“æœï¼Œæ— ã€‚åä¸€ç‚¹ç¡å‰å†çœ‹äº†ä¸€æ¬¡ï¼Œè¿˜æ˜¯æ— ï¼Œç¡å§ï¼Œèƒ½å’‹åŠå‘¢ã€‚ç¬¬äºŒå¤©ä¸€æ—©ï¼Œé†’æ¥ç¬¬ä¸€ä»¶äº‹å°±æ˜¯çœ‹æ ¸é…¸ç»“æœï¼Œç»“æœå‡ºæ¥äº†ï¼Œé˜´æ€§ï¼Œå¤§èˆ’ä¸€å£æ°”ï¼Œä¸ç„¶ä¸æ˜¯æµªè´¹äº†æŠ¥åè´¹è·Ÿé…’åº—è´¹å˜›ï¼ˆç¬‘æ­»ï¼‰ã€‚</p>\n<p>æ˜¨å¤©æ—©ä¸Šè¡Œæµ‹ï¼Œ135é¢˜ï¼Œåšç¤¼èŸ¹ï¼Œæ„Ÿè§‰ä»¥æˆ‘ç›®å‰çš„æ°´å¹³120åˆ†é’Ÿåšå®Œ125é¢˜æ˜¯ä¸ªæé™äº†ï¼Œè¿˜æœ‰æµ™æ±Ÿçœè€ƒç«Ÿç„¶115é¢˜ï¼Œæ™•ã€‚ä¸‹åˆç”³è®ºï¼Œå†™äº†ä¸‰å°æ—¶å°å­¦ç”Ÿå†™ä½œï¼Œä¸å¾—ä¸è¯´æˆ‘çš„å­—å†™çš„å¤ªæŒ«äº†ï¼Œä»¥åæœ‰ç©ºå¯ä»¥ç»ƒç»ƒï¼ˆflagå·²ç«‹ï¼‰ï¼Œä¸è¿‡ä»¥åæœ‰å°å­©è¿™ä¸ªä¸€å®šè¦æ”¾åˆ°é«˜ä¼˜é¡¹ã€‚ä»Šå¤©ä¸Šåˆåˆšè€ƒå®Œä¸“ä¸šç§‘ç›®ï¼Œè·Ÿå‰ä¸¤å¤©ç²‰ç¬”ä¸Šåšçš„å»å¹´å’Œå‰å¹´çš„ä¸“ä¸šè¯¾æ„Ÿè§‰å·®ä¸å¤šï¼Œéƒ½æ˜¯è¯¥ä¼šçš„ä¼šï¼Œä¸ä¼šçš„çŒœï¼Œæ¯•ç«Ÿè£¸è€ƒã€‚</p>\n<p>æ€»ä½“è€Œè¨€ï¼Œå¯¹äºæˆ‘è¿™ä¸ªå²—ä½è€Œè¨€ï¼ŒæŠ¥å½•æ¯”80:2ï¼Œå¦‚æœä»ä¸ƒæœˆä»½å¥½å¥½å‡†å¤‡ï¼Œå¿ƒæ— æ—éª›ï¼Œæˆ‘è§‰å¾—åº”è¯¥æ˜¯å¯ä»¥è¿›é¢è¯•çš„ï¼ˆèœœæ±è‡ªä¿¡ï¼‰ã€‚</p>\n<p>ä¸‹ä¸ªæœˆè¿˜æœ‰å›½è€ƒï¼Œè¿™å‡ å¤©å†å¸¦ç€çœ‹çœ‹è¡Œæµ‹å§ã€‚</p>"}],"PostAsset":[],"PostCategory":[{"post_id":"cld8kfsik0001zvt8co8o6kyx","category_id":"cld8kfsip0004zvt86uh15bd8","_id":"cld8kfsiu000czvt892eh9w5w"},{"post_id":"cld8kfsix000hzvt8ghzo4q37","category_id":"cld8kfsix000gzvt8cfljb67j","_id":"cld8kfsiz000mzvt83zmi42mp"},{"post_id":"cld8kfsir0007zvt8b5os7454","category_id":"cld8kfsix000gzvt8cfljb67j","_id":"cld8kfsj0000pzvt85kxxgg70"},{"post_id":"cld8kfsiy000kzvt81s4l7d8z","category_id":"cld8kfsip0004zvt86uh15bd8","_id":"cld8kfsj1000rzvt8ewdbbrq6"},{"post_id":"cld8kfsis0008zvt89obi96oc","category_id":"cld8kfsix000gzvt8cfljb67j","_id":"cld8kfsj2000uzvt884lk9tj6"},{"post_id":"cld8kfsj0000ozvt8d6uhd03t","category_id":"cld8kfsip0004zvt86uh15bd8","_id":"cld8kfsj2000wzvt83hho7x8t"},{"post_id":"cld8kfsit000azvt86vrhhome","category_id":"cld8kfsix000gzvt8cfljb67j","_id":"cld8kfsj3000zzvt857h4fnqm"},{"post_id":"cld8kfsj1000tzvt814db9bze","category_id":"cld8kfsip0004zvt86uh15bd8","_id":"cld8kfsj30011zvt869fadcdv"},{"post_id":"cld8kfsin0003zvt85kb1cvmo","category_id":"cld8kfsit0009zvt8ds7207xq","_id":"cld8kfsj40013zvt8avxhh9pl"},{"post_id":"cld8kfsin0003zvt85kb1cvmo","category_id":"cld8kfsj1000szvt8a3k007f2","_id":"cld8kfsj40014zvt8armje7l0"},{"post_id":"cld8kfsj2000vzvt8d287ba8h","category_id":"cld8kfsip0004zvt86uh15bd8","_id":"cld8kfsj40016zvt880wzguk4"},{"post_id":"cld8kfsj2000yzvt8dzj3a5ca","category_id":"cld8kfsip0004zvt86uh15bd8","_id":"cld8kfsj40017zvt8f2yj5ipc"},{"post_id":"cld8kfsiu000bzvt8gmhrh2x5","category_id":"cld8kfsix000gzvt8cfljb67j","_id":"cld8kfsj40018zvt82uhb478q"},{"post_id":"cld8kfsj30010zvt874q85gky","category_id":"cld8kfsip0004zvt86uh15bd8","_id":"cld8kfsj5001azvt8c1agdrrb"},{"post_id":"cld8kfsiv000ezvt8dj5yb1a7","category_id":"cld8kfsix000gzvt8cfljb67j","_id":"cld8kfsj5001bzvt89b4e4u2c"},{"post_id":"cld8kfsiq0006zvt8eejq2hpk","category_id":"cld8kfsit0009zvt8ds7207xq","_id":"cld8kfsj5001dzvt8cd5g40zy"},{"post_id":"cld8kfsiq0006zvt8eejq2hpk","category_id":"cld8kfsj40015zvt86m8cez11","_id":"cld8kfsj5001ezvt85ekea0k6"},{"post_id":"cld8kfsiw000fzvt8477edsy8","category_id":"cld8kfsix000gzvt8cfljb67j","_id":"cld8kfsj5001gzvt87xraaobv"},{"post_id":"cld8kfsiy000izvt850sub8d8","category_id":"cld8kfsj5001czvt86tcq7jot","_id":"cld8kfsj6001izvt8cjxnfgtz"},{"post_id":"cld8kfsiz000lzvt83151b4xq","category_id":"cld8kfsit0009zvt8ds7207xq","_id":"cld8kfsj6001jzvt8hlyj1q35"},{"post_id":"cld8kfsiz000lzvt83151b4xq","category_id":"cld8kfsj1000szvt8a3k007f2","_id":"cld8kfsj6001kzvt8b93yeep6"},{"post_id":"cld8kfsj0000qzvt83ivcd84m","category_id":"cld8kfsj5001czvt86tcq7jot","_id":"cld8kfsj6001lzvt8aup5635e"}],"PostTag":[],"Tag":[]}}